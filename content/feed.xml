<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="/content/assets/feed.xsl" type="text/xsl"?>
<feed xmlns:atom="http://www.w3.org/2005/Atom" xml:base="https://nabijaczleweli.xyz">
  <title>nabijaczleweli's page</title>
  <id>https://nabijaczleweli.xyz/content</id>
  <icon>https://nabijaczleweli.xyz/assets/nabijaczleweli.png</icon>
  <link rel="alternate" href="https://nabijaczleweli.xyz/content" type="text/html"/>
  <link rel="self" href="https://nabijaczleweli.xyz/content/feed.xml" type="application/atom+xml"/>
  <author>
    <name>nabijaczleweli</name>
    <email>nabijaczleweli@nabijaczleweli.xyz</email>
    <uri>https://nabijaczleweli.xyz</uri>
  </author>
  <rights>Copyright (c) 2016 nabijaczleweli</rights>
<updated>2025-09-28T01:02:48+02:00</updated>
  <generator>
    GNU Awk 5.3.2, API 4.0, PMA Avon 8-g1, (GNU MPFR 4.2.2, GNU MP 6.3.0)
  </generator>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/020-sizeof-division.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/020-sizeof-division.html" />
    <title> 020. Pre-modern-UNIX sizeof division — blognꞌt — nabijaczleweli </title>
    <updated>2025-09-28T01:02:48+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;020. Pre-modern-UNIX sizeof division&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Sun, 28 Sep 2025 01:02:48 +0200&lt;/span&gt;Sun, 28 Sep 2025 19:54:03 +0200&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#v1'&gt;&lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v1/UNIX_ProgrammersManual_Nov71.pdf&quot;&gt;UNIX Programmer'&lt;!--'--&gt;s Manual&lt;/a&gt;&lt;/cite&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#v2'&gt;UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v2/v2man.pdf#page=39&quot;&gt;Second Edition&lt;/a&gt;&lt;/cite&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#prestruct-c'&gt;&lt;a href=&quot;//web.archive.org/web/20080419002944/http://cm.bell-labs.com/cm/cs/who/dmr/primevalC.html&quot;&gt;prestruct-c&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#v5'&gt;UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v5/v5man.pdf#page=36&quot;&gt;Fifth Edition&lt;/a&gt;&lt;/cite&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#rest'&gt;&amp;c.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#conclusion'&gt;conclusion&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Similarly to &lt;a href=&quot;017-malloc0.html&quot;&gt;previous&lt;/a&gt;, &lt;a href=&quot;mailto:Alejandro Colomar &lt;alx@kernel.org&gt;&quot;&gt;acolomar&lt;/a&gt; writ:
&lt;/p&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;
I've&lt;!--'--&gt; been wondering why the _Countof() operator was not implemented back in the times of K&amp;R.
That was information certainly available in the compiler, and division was quite expensive, so you wouldn't&lt;!--'--&gt; want to perform a run-time division of sizeof.
[…] what does cc(1) produce for a sizeof division?
&lt;/blockquote&gt;
&lt;h2 id=&quot;v1&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#v1&quot;&gt;#&lt;/a&gt; &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v1/UNIX_ProgrammersManual_Nov71.pdf&quot;&gt;UNIX Programmer'&lt;!--'--&gt;s Manual&lt;/a&gt;&lt;/cite&gt;&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
doesn't&lt;!--'--&gt; have C.
&lt;/p&gt;
&lt;h2 id=&quot;v2&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#v2&quot;&gt;#&lt;/a&gt; UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v2/v2man.pdf#page=39&quot;&gt;Second Edition&lt;/a&gt;&lt;/cite&gt;&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
does, and we can observe it directly:
the distributors of
&lt;a href=&quot;//code.google.com/archive/p/unix-jun72/&quot;&gt;unix&lt;/a&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v1/svntree-20081216.tar.gz&quot;&gt;72&lt;/a&gt;,
which is for most effects and purposes a V1 system,
include the &quot;last1120c&quot; cc, which, accd'g&lt;!--'--&gt; to
&lt;cite&gt;dmr, &lt;a href=&quot;//web.archive.org/web/20080419002944/http://cm.bell-labs.com/cm/cs/who/dmr/primevalC.html&quot;&gt;Very early C compilers and language&lt;/a&gt;&lt;/cite&gt;
(or, more tellingly, &lt;code&gt;primevalC.html&lt;/code&gt;)
&lt;q&gt;is a saved copy of the compiler preserved just as we were abandoning the PDP-11/20&lt;/q&gt;
which puts it in the V2 era. Thus:
&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ &lt;kbd&gt;pdp11 simh.cfg&lt;/kbd&gt;
PDP-11 simulator V3.8-1
Disabling CR
Disabling XQ
RF: buffering file in memory
TC0: 16b format, buffering file in memory
:login: &lt;kbd&gt;root&lt;/kbd&gt;
root
# &lt;kbd&gt;chdir /tmp&lt;/kbd&gt;
# &lt;kbd&gt;cat &gt;a.c
int gaming[20];
size() { return sizeof(gaming) / &lt;del&gt;4#&lt;/del&gt;2; }&lt;/kbd&gt;
# &lt;kbd&gt;cc -c a.c&lt;/kbd&gt;
1: External definition syntax
1: _gaming undefined
2: Statement syntax
2: _sizeof undefined
2: _gaming undefined
I
II&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Primeval is right!
&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# &lt;kbd&gt;cat &gt;a.c
gaming[20];
size() { return 012345; }&lt;/kbd&gt;
# &lt;kbd&gt;cc -c a.c&lt;/kbd&gt;
2: Statement syntax
I
II&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
So there &lt;em&gt;is&lt;/em&gt; a reason the &lt;code&gt;return ()&lt;/code&gt; style persists!
&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# &lt;kbd&gt;ed a.c&lt;/kbd&gt;
38
&lt;kbd&gt;s/012345/(&amp;)/&lt;/kbd&gt;
&lt;kbd&gt;w&lt;/kbd&gt;
40
# &lt;kbd&gt;cc -c a.c&lt;/kbd&gt;
I
II
# &lt;kbd&gt;ls -l a.o&lt;/kbd&gt;
&lt;!--&quot;--&gt;total    1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;134 s-rwrw  1 root     92 Jan  1 00:00:00 a.o&lt;!--&quot;--&gt;
# &lt;kbd&gt;od a.o&lt;/kbd&gt;
&lt;!--&quot;--&gt;00000  00407  00020  00004  00050  00044  00000  00000  00000&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;00020  10546  10605  12700  &lt;strong&gt;12345&lt;/strong&gt;  00167 -77764  00167 -77760&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;00040  40024  40000  00000  00000  00000  00000  00000  00051&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
(I am sparing you from the rest of the object file
 and &lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v1/UNIX_ProgrammersManual_Nov71.pdf#page=75&quot;&gt;the remaining 420 bytes of this output&lt;/a&gt;;
 do note, however, how this signed output style is &lt;a href=&quot;//ro.ws.co.ls/man1/od.1.pdf&quot;&gt;not available&lt;/a&gt; in present-day od).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
With our epistemic method honed, we can attack the problem directly by spelling &lt;code&gt;return 1783;&lt;/code&gt; as
&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;# &lt;kbd&gt;cat &gt;b.c
size() { return(012345 / 3); }&lt;/kbd&gt;
# &lt;kbd&gt;cc -c b.c&lt;/kbd&gt;
I
II
# &lt;kbd&gt;ls -l b.o&lt;/kbd&gt;
&lt;!--&quot;--&gt;total    1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;133 s-rwrw  1 root     92 Jan  1 00:00:00 b.o&lt;!--&quot;--&gt;
# &lt;kbd&gt;od b.o&lt;/kbd&gt;
&lt;!--&quot;--&gt;00000  00407  00030  00002  00000  00030  00000  00000  00000&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;00020  10546  10605  12714  &lt;strong&gt;12345&lt;/strong&gt;  12767  &lt;strong&gt;00003&lt;/strong&gt; -37262  11400&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;00040  00167 -77754  00167 -77750  40000  00000  00000  00000&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
shocking no-one, this is clearly a run-time division.
The source doesn't&lt;!--'--&gt; even contain anything close to an optimiser that I could find.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;q&gt;A PDP-11 disassembler exists.&lt;/q&gt; — good news if we are to dead-confirm this —
but I don't&lt;!--'--&gt; think ken would appreciate it if I were to &lt;q&gt;Contact the author for more information.&lt;/q&gt;.
(I have, in fact, just quoted the &lt;em&gt;entire&lt;/em&gt; das (VI) manual from
 &lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v1/UNIX_ProgrammersManual_Nov71.pdf#page=184&quot;&gt;V1&lt;/a&gt;,
 &lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v2/v2man.pdf#page=239&quot;&gt;V2&lt;/a&gt;,
 and
 &lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v3/v3man.tar.gz&quot;&gt;V3&lt;/a&gt; (&lt;samp&gt;./manx/das.6&lt;/samp&gt;)
 (it goes away in &lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v4/v4man.tar.gz&quot;&gt;V4&lt;/a&gt;).)
It's&lt;!--'--&gt; also not part of unix72 or any dump.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
But others must exist, and indeed &lt;a href=&quot;//rawcdn.githack.com/caldwell/pdp11dasm/refs/heads/master/pdp11dasm.html&quot;&gt;pdp11dasm&lt;/a&gt;
(from a &lt;a href=&quot;//github.com/caldwell/pdp11dasm&quot;&gt;re-re-re-host&lt;/a&gt;, as is tradition) works, yielding
&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&lt;!--&quot;--&gt;000020: 010546                  mov     r5,-(r6)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;000022: 010605                  mov     r6,r5&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;000024: 012714 012345           mov     &lt;strong&gt;#12345&lt;/strong&gt;,(r4)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;000030: 012767 000003 140516    mov     &lt;strong&gt;#3&lt;/strong&gt;,140554&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;000036: 011400                  mov     (r4),r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;000040: 000167 100024           jmp     100070&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
after &lt;a href=&quot;/content/assets/blogn_t/020.01-deworm.c&quot;&gt;deworming&lt;/a&gt; + truncating the od output and &lt;code&gt;echo d 0+20 &gt; b.o.ctl&lt;/code&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
God knows &lt;em&gt;how&lt;/em&gt; the jump achieves division, but it obviously does.
V2 verdict: no &lt;code&gt;sizeof&lt;/code&gt;, no &lt;samp&gt;int/int&lt;/samp&gt; folding.
&lt;/p&gt;
&lt;h2 id=&quot;prestruct-c&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#prestruct-c&quot;&gt;#&lt;/a&gt; &lt;a href=&quot;//web.archive.org/web/20080419002944/http://cm.bell-labs.com/cm/cs/who/dmr/primevalC.html&quot;&gt;prestruct-c&lt;/a&gt;&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;q&gt;is a copy of the compiler just before I started changing it to use structures itself&lt;/q&gt; (imagine!).
&lt;q&gt;It's&lt;!--'--&gt; a bit hard to get really accurate dates for these compilers, except that they are certainly 1972-73&lt;/q&gt;,
&lt;q&gt;by the time of the second, we had a PDP-11 that did provide mapping&lt;/q&gt;
— this roughly lines up with the metatext of PDP-11/45 mentions in
UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v3/v3man.tar.gz&quot;&gt;Third Edition&lt;/a&gt;&lt;/cite&gt;,
and definitely lines up with the &lt;q&gt;February, 1973&lt;/q&gt; dating.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Still no &lt;code&gt;sizeof&lt;/code&gt; (proof by &lt;code&gt;grep -r&lt;/code&gt;),
but there is an optimiser! as part of &lt;a href=&quot;//web.archive.org/web/20080419002944/http://cm.bell-labs.com/cm/cs/who/dmr/prestruct-c/c01.c&quot;&gt;the first pass&lt;/a&gt;,
which I present to the dear reader in its entirety
(though I must warn that the experience is not unlike reading Perl for the first time;
 also, &lt;code&gt;int name[]&lt;/code&gt; is the spelling-du-jour of &lt;code&gt;int *name&lt;/code&gt;):
&lt;/p&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token function&quot;&gt;optim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; p1&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; p2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;p &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* + */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;p1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;p2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;p1&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* const */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;t &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; p1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;p1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; p2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;p2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;p2 &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* const */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;p2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* const 0 */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;p1&lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;35&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;p1&lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* not &amp;amp; */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;p2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; p1&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;p2&lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* name? */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;C error (optim)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;p2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
This folds additions where either
(one operand is a constant 0) or
(one operand is a constant and the other is a &lt;code&gt;&amp;var&lt;/code&gt; expression).
One has to assume &lt;code&gt;&amp;var + 3.5&lt;/code&gt; gets promoted before this, but idk if this works for &lt;code&gt;3.5 + 0&lt;/code&gt; or &lt;code&gt;3.5 + 0.0&lt;/code&gt;.
Either way, V3 verdict: no &lt;code&gt;sizeof&lt;/code&gt;, no &lt;samp&gt;int/int&lt;/samp&gt; folding.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
V4 has a V3-style cc (I), and, likely, compiler. No way to know.
&lt;/p&gt;
&lt;h2 id=&quot;v5&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#v5&quot;&gt;#&lt;/a&gt; UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v5/v5man.pdf#page=36&quot;&gt;Fifth Edition&lt;/a&gt;&lt;/cite&gt;&lt;/h2&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;dl class=&quot;continuing&quot;&gt;
  &lt;dt style=&quot;font-weight: bold;&quot;&gt;−O&lt;/dt&gt;
  &lt;dd&gt;Invoke the experimental object-code optimizer.&lt;/dd&gt;
 &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
but internally this is the &lt;q&gt;C object code &lt;em&gt;improver&lt;/em&gt;&lt;/q&gt;!
(&lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v5/v5root.tar.gz&quot;&gt;V5&lt;/a&gt;, &lt;samp&gt;./usr/source/s1/c2&lt;var&gt;?&lt;/var&gt;.c&lt;/samp&gt;&lt;/cite&gt;)
as a new third pass
(and actually parses and optimises the assembly output by the second pass, not the object, but same difference).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The &lt;em&gt;actual&lt;/em&gt; optimiser moves to the second pass to take up a whole &lt;q&gt;C compiler part 2 -- expression optimizer&lt;/q&gt; file
(&lt;cite&gt;ibid., &lt;samp&gt;./usr/source/s1/c12.c&lt;/samp&gt;&lt;/cite&gt;),
and is no longer just a peep-hole at the two addition cases,
though they do still feature, but in 4K this time:
&lt;/p&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token function&quot;&gt;optim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;atree&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;tnode&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;atree&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;dope &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; opdope&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dope&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;LEAF&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tree&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dope&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;BINARY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unoptim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tree&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* is known to be binary */&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dope&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;COMMUTE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;acomm&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;d1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tree&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;tree &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;acommute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tree&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;tree&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; d1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tree&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;acommute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;atree&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;flt &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isfloat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tree&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;flt&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* put constants together */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;acl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextl&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;i&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;CON&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;CON&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;i&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;acl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextl&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;t2&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; t2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;PLUS&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* toss out &quot;+0&quot; */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;acl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextl&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;CON &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;SFCON&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;value&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;acl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextl&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;t2&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;acl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextl &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* subsume constant in &quot;&amp;amp;x+c&quot; */&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;CON &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; t2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;AMPER&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;t2&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;t2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;tr1&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;offset &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; t2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;acl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nextl&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;TIMES&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
but also with a full constant folder:
&lt;/p&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token function&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; av&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;register&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;v &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; av&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; PLUS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; TIMES&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; AND&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; OR&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; EXOR&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; DIVIDE&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; MOD&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Divide check&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;DIVIDE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; RSHIFT&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; LSHIFT&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;vp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;C error: const&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
V5 verdict: yes &lt;code&gt;sizeof&lt;/code&gt; (new: &lt;cite&gt;ibid., &lt;samp&gt;./usr/source/s1/c0[01].c&lt;/samp&gt;&lt;/cite&gt;), yes &lt;samp&gt;int/int&lt;/samp&gt; folding.
&lt;/p&gt;
&lt;h2 id=&quot;rest&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#rest&quot;&gt;#&lt;/a&gt; &amp;c.&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;v6&quot;&gt;
&lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v6/v6src.tar.gz&quot;&gt;V6&lt;/a&gt; (&lt;samp&gt;./c/&lt;/samp&gt;)&lt;/cite&gt;'s cc doesn't change for the purposes of this analysis.
By following &lt;cite&gt;Computer History Wiki's&lt;!--'--&gt; &lt;a href=&quot;//gunkies.org/wiki/Installing_UNIX_v6_(PDP-11)_on_SIMH&quot;&gt;Installing UNIX v6 (PDP-11) on SIMH&lt;/a&gt;&lt;/cite&gt;
we can observe this directly:
&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ pdp11 boot.ini
PDP-11 simulator V3.8-1
Disabling XQ
@&lt;kbd&gt;unix&lt;/kbd&gt;
login: &lt;kbd&gt;root&lt;/kbd&gt;
# &lt;kbd&gt;chdir /tmp&lt;/kbd&gt;
# &lt;kbd&gt;cat &gt;a.c
gaming[012345];
size() { return(sizeof(gaming) / sizeof(*gaming)); }&lt;/kbd&gt;
# &lt;kbd&gt;cc -c a.c&lt;/kbd&gt;
# &lt;kbd&gt;od a.o&lt;/kbd&gt;
0000000 000407 000016 000000 000000 000110 000000 000000 000000
0000020 004567 177774 012700 &lt;strong&gt;012345&lt;/strong&gt; 000400 000167 177762 000000
0000040 000071 000000 000000 000000 000000 000131 063537 066541&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;and naturally&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&lt;!--&quot;--&gt;000020: 004567 177774           jsr     r5,20&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;000024: 012700 012345           mov     &lt;strong&gt;#12345&lt;/strong&gt;,r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;000030: 000400                  br      32&lt;!--&quot;--&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;indented&quot; id=&quot;v7&quot;&gt;
&lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Henry_Spencer_v7/v7.tar.gz&quot;&gt;V7&lt;/a&gt; (&lt;samp&gt;usr/src/cmd/c/&lt;/samp&gt;)&lt;/cite&gt;'s cc doesn't change for the purposes of this analysis.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;sys3&quot;&gt;
&lt;span class=&quot;smallcaps&quot;&gt;Unix&lt;/span&gt; User'&lt;!--'--&gt;s Manual, &lt;a href=&quot;//archive.org/details/bitsavers_attunixSysalRelease3Jun80_33886798/page/n108/mode/1up&quot;&gt;Release 3.0&lt;/a&gt;
ships both a classic V6 compiler and, on the PDP-11, a &quot;portable&quot; pcc.
What it actually means by this is that it ships pcc on both the PDP-11 and VAX, but calls it &lt;samp&gt;/bin/pcc&lt;/samp&gt; on the PDP-11 and &lt;samp&gt;/bin/cc&lt;/samp&gt; on the VAX.
The PDP-11 classic compiler grows &lt;samp&gt;unsigned&lt;/samp&gt; and, with it, 8 branches in &lt;code&gt;const()&lt;/code&gt;,
but does not otherwise change for the purposes of this analysis
(&lt;cite&gt;&lt;a href=&quot;//vetusware.com/download/UNIX%20System%20III%20Source%20Code%20SYSIII/?id=11576&quot;&gt;SysIII&lt;/a&gt;, &lt;samp&gt;src/cmd/cc/pdp11/c12.c&lt;/samp&gt;&lt;/cite&gt;;
 with thanks to my good friend Vetus).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
pcc
(both pccs, since, despite having a machine-independent and machine-dependent half, both are twice in the source,
 and the machine-independent bits &lt;em&gt;are&lt;/em&gt; different
 (&lt;cite&gt;ibid., &lt;samp&gt;src/cmd/cc/pcc/*&lt;/samp&gt; &amp; &lt;samp&gt;src/cmd/cc/vax/{cc.*,pcc/,mip/}&lt;/samp&gt;&lt;/cite&gt;)),
also supports &lt;code&gt;sizeof&lt;/code&gt; and also folds &lt;samp&gt;int/int&lt;/samp&gt; divisions
(but don't&lt;!--'--&gt; be fooled: the latter happens during AST construction, not in the optimiser
 (&lt;cite&gt;ibid., &lt;samp&gt;src/cmd/cc/pcc/mip/trees.c&lt;/samp&gt; &amp; &lt;samp&gt;src/cmd/cc/vax/mip/trees.c&lt;/samp&gt;&lt;/cite&gt; (these are actually the same))):
&lt;/p&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;NODE &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;buildtree&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;register&lt;/span&gt; NODE &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;opty &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;optype&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* check for constants */&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; opty &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; UTYPE &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; ICON &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; o&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;UNARY MINUS &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;FCON &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; o&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;QUEST &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;ICON &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;ANDAND &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; o&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;OROR&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;ICON&lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;ICON&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;goto&lt;/span&gt; ccwarn&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; opty &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; BITYPE &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; ICON &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; ICON &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; opty &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; BITYPE &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;FCON&lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;ICON&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;FCON&lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;op&lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;ICON&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; PLUS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; MINUS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; MUL&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; DIV&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;o&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; PLUS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; MINUS&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; MUL&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval &lt;span class=&quot;token operator&quot;&gt;*=&lt;/span&gt; r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; DIV&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;uerror&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;division by 0.&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; l&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; r&lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;fpn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dval&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;/* its real; we must make a new node */&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;p &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; o&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; INT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; INT &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Also, VAX SysIII separately includes the &lt;q&gt;improver&lt;/q&gt; (&lt;cite&gt;ibid., &lt;samp&gt;src/cmd/cc/vax/c2/&lt;/samp&gt;&lt;/cite&gt;) and the front-end &lt;em&gt;does&lt;/em&gt; run it there.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;sys5r1&quot;&gt;
&lt;cite&gt;&lt;a href=&quot;//vetusware.com/download/UNIX%20SYSVr1%20Source%20Code%20r1/?id=11570&quot;&gt;SysVr1&lt;/a&gt;, &lt;samp&gt;sysv-pdp11_usr-src/cmd/cc/cc.mk&lt;/samp&gt;&lt;/cite&gt;
elucidates this(?):
&lt;/p&gt;
&lt;pre class=&quot;language-makefile&quot;&gt;&lt;code class=&quot;language-makefile&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;The directory structure (global multi-machine view) assumed is:&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                       &lt;!--&quot;--&gt;/cpp --- cpp.mk&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                       &lt;!--&quot;--&gt;/&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                      &lt;!--&quot;--&gt;/&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;/c2 --- c2.mk&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;(only for vax)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;/&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;/&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                    &lt;!--&quot;--&gt;/&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;/&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;/cc --- cc.mk&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;(Ritchie'&lt;!--'--&gt;s pdp11 C compiler)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;/&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;/&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;/&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;/usr/src/cmd --- /cc ------- cc.mk&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;(this makefile)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                           &lt;!--&quot;--&gt;\&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;\
#&lt;!--&quot;--&gt;                            &lt;!--&quot;--&gt;\&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;cc.c&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;\&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;/mip&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;\&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;/&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                               &lt;!--&quot;--&gt;\&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;/&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;/vax --- pcc.mk&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                                &lt;!--&quot;--&gt;\&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;/&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;/&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                               &lt;!--&quot;--&gt;/pcc ------- pcc.mk&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#&lt;!--&quot;--&gt;                                   &lt;!--&quot;--&gt;\
#&lt;!--&quot;--&gt;                                    &lt;!--&quot;--&gt;\
#&lt;!--&quot;--&gt;                                   &lt;!--&quot;--&gt;/pdp11 --- pcc.mk&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
But doesn't&lt;!--'--&gt; otherwise change for the purposes of this analysis (&lt;cite&gt;ibid., &lt;samp&gt;sysv-pdp11_usr-src/cmd/cc/pcc/mip/trees.c&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;sys5r2&quot;&gt;
&lt;cite&gt;&lt;a href=&quot;//vetusware.com/download/UNIX%20SYSVr2%20Source%20Code%20r2/?id=11571&quot;&gt;SysVr2&lt;/a&gt; (&lt;samp&gt;usr/src/cmd/c/&lt;/samp&gt;)&lt;/cite&gt;'s ccs don't change for the purposes of this analysis.
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;sys5r3&quot;&gt;
&lt;cite&gt;&lt;a href=&quot;//vetusware.com/download/UNIX%20SYSVr3%20Source%20Code%20r3/?id=11572&quot;&gt;SysVr3&lt;/a&gt; (&lt;samp&gt;ATT-SYSVr3/{301,31}/usr/src/scripts/cc/&lt;/samp&gt;)&lt;/cite&gt; comes with just pcc and I don't see source for it but there's no reason to suspect it'd've lost the optimisation.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;sys5r4&quot;&gt;
&lt;cite&gt;&lt;a href=&quot;//vetusware.com/download/UNIX%20SYSVr4%20Source%20Code%20r4/?id=11573&quot;&gt;SysVr4&lt;/a&gt; (&lt;samp&gt;ATT-SYSVr3/{301,31}/usr/src/scripts/cc/&lt;/samp&gt;)&lt;/cite&gt; comes with &lt;em&gt;some&lt;/em&gt; compiler?
But
&lt;cite&gt;&lt;a href=&quot;//bitsavers.org/pdf/att/unix/System_V_Release_4/0-13-947029-8_Unix_System_V_Rel4_Programmers_Reference_Manual_1990.pdf#page=79&quot;&gt;UNIX® System V Release 4 Programmer's Reference manual&lt;/a&gt;'s cc(1)&lt;/cite&gt;
doesn't&lt;!--'--&gt; change from
&lt;cite&gt;&lt;a href=&quot;//bitsavers.org/pdf/att/unix/System_V_Release_3/UNIX_System_V_Programmers_Reference_Manual_1987.pdf#page=33&quot;&gt;UNIX System V Programmer's Reference Manual&lt;/a&gt;'s cc(1)&lt;/cite&gt;,
so it's&lt;!--'--&gt; probably still the same pcc.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
It also includes the &lt;a href=&quot;//101010.pl/@nabijaczleweli/115278564014771352&quot;&gt;all-time-funniest AT&amp;T program&lt;/a&gt; as &lt;samp&gt;/usr/ucb/cc&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;1bsd&quot;&gt;
1BSD doesn't&lt;!--'--&gt; include a different C compiler
(&lt;cite&gt;&lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_1_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 1&lt;/span&gt;: Berkeley Systems 1978-1986&lt;/a&gt;, &lt;samp&gt;./1bsd/&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;2bsd&quot;&gt;
2BSD includes some cc patches which do not affect related functionality we care about
(&lt;cite&gt;ibid., &lt;samp&gt;./2bsd/upgrade/c/&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;3bsd&quot;&gt;
3BSD ships cc as pcc + the extracted c2 improver
(&lt;cite&gt;ibid., &lt;samp&gt;./3bsd/usr/src/cmd/{cc.c,pcc/,mip/,c2/}&lt;/samp&gt;&lt;/cite&gt;).
The relevant segment of &lt;cite&gt;&lt;samp&gt;./3bsd/usr/src/cmd/mip/trees.c&lt;/samp&gt;&lt;/cite&gt; is the same as above.
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;4bsd&quot;&gt;
4BSD's cc doesn't change for the purposes of this analysis
(&lt;cite&gt;ibid., &lt;samp&gt;./4.0/usr/src/cmd/mip/trees.c&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;4.1bsd&quot;&gt;
4.1BSD's cc doesn't change for the purposes of this analysis
(&lt;cite&gt;ibid., &lt;samp&gt;./4.1/usr/src/cmd/mip/trees.c&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;4.2bsd&quot;&gt;
4.2BSD's cc doesn't change for the purposes of this analysis
(&lt;cite&gt;ibid., &lt;samp&gt;./4.1/usr/src/lib/mip/trees.c&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;4.3bsd&quot;&gt;
4.3BSD's cc doesn't change for the purposes of this analysis
(&lt;cite&gt;ibid., &lt;samp&gt;./4.1/usr/src/lib/mip/trees.c&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;4.3bsd-tahoe&quot;&gt;
4.3BSD-Tahoe's cc doesn't change for the purposes of this analysis
(&lt;cite&gt;&lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_2_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 2&lt;/span&gt;: Berkeley Systems 1987-1993&lt;/a&gt;, &lt;samp&gt;./4.0/usr/src/cmd/mip/trees.c&lt;/samp&gt;&lt;/cite&gt;).
It actually ships a second one in &lt;cite&gt;&lt;samp&gt;./4.3tahoe/usr/src/lib/old_compiler/&lt;/samp&gt;&lt;/cite&gt;, but the purpose of this is unclear to me.
The only reference (I think?) to this situation is in &lt;cite&gt;&lt;samp&gt;./4.3tahoe/usr/doc/smm/12.uchanges/1.t&lt;/samp&gt;&lt;/cite&gt;, quoth:
&lt;/p&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;
Some effort has been made to improve error reporting
for program errors and to handle exceptional conditions in which
the old compiler used to punt.
&lt;/blockquote&gt;
&lt;p class=&quot;indented&quot; id=&quot;4.3bsd-reno&quot;&gt;
4.3BSD-Reno's cc doesn't change for the purposes of this analysis
(&lt;cite&gt;ibid., &lt;samp&gt;./4.3reno/usr/src/libexec/pcc/mip/trees.c&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;4.4bsd&quot;&gt;
The 4.4BSD-Lites ship with GCC 2.3.3
(&lt;cite&gt;ibid., &lt;samp&gt;./4.4BSD-Lite1&lt;/samp&gt;&lt;/cite&gt;;
 &lt;cite&gt;&lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_3_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 3&lt;/span&gt;: Final Berkeley Releases&lt;/a&gt;, &lt;samp&gt;./4.4BSD-Lite2&lt;/samp&gt;&lt;/cite&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It's&lt;!--'--&gt; difficult to come to a
&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#conclusion&quot;&gt;#&lt;/a&gt; conclusion&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
other than &quot;there has never been a compiler with &lt;code&gt;sizeof&lt;/code&gt; but no &lt;samp&gt;int/int&lt;/samp&gt; folding&quot;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;em&gt;Perhaps&lt;/em&gt; for a hair? in 1973 around our V4 epistemic hole, &lt;a href=&quot;/content/assets/blogn_t/020.02-kicker.webm&quot;&gt;but.&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/020-sizeof-division.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/019-aphantasia.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/019-aphantasia.html" />
    <title> 019. aphantasia. — blognꞌt — nabijaczleweli </title>
    <updated>2025-09-18T18:34:15+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;019. aphantasia.&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Thu, 18 Sep 2025 18:34:15 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p&gt;
I present the following minimally-editorialised conversation between me and a dear friend
(who wishes to remain anonymous for the purposes of this reproduction)
in the hopes that it will be useful but without any warranty;
except for the warranty that it is true to my proverbial soul.
The only context this requires to avoid unduly scandalising the reader is that he's&lt;!--'--&gt; also gay, so the call is coming from inside the house.
Comment and opine under &lt;a href=&quot;//101010.pl/@nabijaczleweli/115147862930109361&quot;&gt;post&lt;/a&gt;.
&lt;/p&gt;
&lt;blockquote&gt;&lt;div id=1&gt;&lt;span class=&quot;context&quot;&gt;&lt;h4&gt;&lt;a href=&quot;#1&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:50+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:50&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;I'&lt;!--'--&gt;m sorry but I will simply not argue with someone who is wrong&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=2&gt;&lt;span class=&quot;context&quot;&gt;&lt;h4&gt;&lt;a href=&quot;#2&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:50+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:50&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;and i wont because i dont care&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=3&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#3&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:50+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:50&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;unrelatedly, i saw this couple 2 weeks ago
&lt;a href=&quot;//101010.pl/@nabijaczleweli/115147862930109361&quot;&gt;&lt;img alt=&quot;crude but otherwise presentational drawing of two people on a road&quot; src=&quot;/content/assets/blogn_t/019.01-scooter-bf-skater-gf.png&quot;&gt;&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=4&gt;&lt;span class=&quot;context&quot;&gt;&lt;h4&gt;&lt;a href=&quot;#4&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:50+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:50&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;another mayfly victory&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=5&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#5&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:51+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:51&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;and relatedly to that, i think weed fixed my aphantasia that i didnt know i had&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=6&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#6&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:51+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:51&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;who knew drawing were so easy if you can just induce a hallucination and trace off that!&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=7&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#7&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:52+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:52&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;you'&lt;!--'--&gt;re telling me youve had this tech forever and never told me?&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=8&gt;&lt;span&gt;&lt;a class=&quot;backlink&quot; href=&quot;#6&quot;&gt;↬ &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt; &lt;span&gt;who knew drawing were so easy if you can just induce a hallucination and trace off that!&lt;/span&gt;&lt;/a&gt;
&lt;h4&gt;&lt;a href=&quot;#8&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:52+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:52&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;us ubermensch can do it on command&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=9&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#9&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:52+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:52&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;like i can picture a lizard on my keyboard eating a smurf jello or whatever&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=10&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#10&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;no wonder bitches were so good at drawing&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=11&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#11&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;or imagine an apple, red, spinning, a bit shiny&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=12&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#12&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;an entire scene&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=13&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#13&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;this is literally a cheat code&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=14&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#14&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i close my eyes i'&lt;!--'--&gt;m at the beach&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=15&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#15&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;crazy crazy crazy crazy&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=16&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#16&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;complete with sounds and touch feeling&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=17&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#17&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;insane&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=18&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#18&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;smell is very hard to conjure though&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=19&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#19&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:53+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:53&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;(it didnt fix it to that extent ftr)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=20&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#20&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:54+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:54&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;nab hardcore mushroom arc incoming&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=21&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#21&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:54+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:54&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;never&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=22&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#22&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:54+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:54&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;midcore&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=23&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#23&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:54+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:54&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;you know&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=24&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#24&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:54+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:54&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;ok so&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=25&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#25&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:54+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:54&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;if i ask you to picture the face of a family member&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=26&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#26&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:54+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:54&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;can you?&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=27&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#27&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:55+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:55&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;this actually explains why me, aged like 5-8, drew trees as straight lines and my father laughed at me that i couldnt draw them normal and curvy&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=28&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#28&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:55+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:55&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;oh no&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=29&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#29&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:56+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:56&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;she'&lt;!--'--&gt;s &lt;del&gt;retarded&lt;/del&gt; aphantastic&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=30&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#30&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:56+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:56&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;wow normally people cant draw straight lines but you can only draw straight lines wow funny&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=31&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#31&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:57+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:57&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;turns out when you have to model the universe based on semantic data alone its almost impossible to draw anything that isn'&lt;!--'--&gt;t a schematic!!&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=32&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#32&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:57+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:57&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;especially at age 7&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=33&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#33&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:57+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:57&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;indeed&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=34&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#34&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:57+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:57&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;why didnt you get the DLC before starting up the game&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=35&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#35&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:57+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:57&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;you'&lt;!--'--&gt;re playing in low res&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=36&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#36&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:58+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:58&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;nope&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=37&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#37&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:58+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:58&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;before this it was inconceivable that anyone could get visual hallucinations of any kind&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=38&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#38&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:58+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:58&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;to me&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=39&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#39&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:58+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:58&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;well let me reassure you&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=40&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#40&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:58+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;14:58&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;the opposite concept is equally insane for us&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=41&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#41&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:59+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:59&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;inability to conjure mental images (or sounds) is just inconceivable&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=42&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#42&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:59+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:59&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;recalling a memory is equivalent to getting an ordered list of semantic, semiotic, and spatial relationships&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=43&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#43&quot;&gt;&lt;time datetime=&quot;2025-09-18 14:59+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;14:59&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;yeah thats what ive gathered from similar aphantasoids comments on HN&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=44&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#44&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:00+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:00&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;for us real people we recall the physical entire scene in varying degrees of details&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=45&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#45&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:00+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:00&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;the way a lossy camera would&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=46&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#46&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:00+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:00&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i can also tell you that it'&lt;!--'--&gt;s impossible to answer the aphantasia test diagram correctly&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=47&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#47&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:00+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:00&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;what is that&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=48&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#48&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:00+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:00&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;this standard jpeg
&lt;img alt=&quot;self-check. can you visualise? it'&lt;!--'--&gt;s 5 apples. 1 is in full render. 2 is in a blocky cartoon style. 3 is just a pink-coloured apple shape. 4 is just an outline. 5 is nothing&quot; src=&quot;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCADhAOEDASIAAhEBAxEB/8QAHAABAAMBAQEBAQAAAAAAAAAAAAQFBgMCBwEI/8QAQxAAAAUCAwMHCQYGAgIDAAAAAAECAwQFERITIQYiMRQyQVFSU5IHFSMzQmFicYEkQ3KRobE0gqKy0fAWwQjhF2Px/8QAGwEBAAMBAQEBAAAAAAAAAAAAAAECBAUDBgf/xAAqEQACAQQBAwMEAgMAAAAAAAAAAQIDBBESIRMxUSJBcQUyYdGBsRSR8P/aAAwDAQACEQMRAD8A+9gADyNIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABhPLBtBUNndm2HqSvkz0iWmOqVhxZCTSozOx6X0tqKvbmdtLsj5O5zz9eRMmcpbTFnpYJt3LVqZKLVN9DK5dBjdbS0qFXqQ/SaktGTL9GnhixFvEab8VFa/0HwmsVWbI8ktYo05fKV0OpNREvp5q0EakkV+mxpt8jSPGo8Z+DLVbWfg+mVXz3sr5PKzUH69KqU/kyFNKfYbTkKUZJ3SItdVdN+BCu2v2lrETyMU6ssTMmqyG4ynX0pLFvlc7FaxX+XSO+2FGXA8ktcQ3VanVUOttSEuzn81SUkpB2SdismxXFFty4hz/wAfaMtvuIifqRWP9SFZSaz8ESk1n4PpuykGbEprfnKqyaq89hcxPtJTgI0loWEi0v1jP+VTaCoUiFSqfQloZqtWlpitOqTiyiMyIzIj6bqSX1MSqbSZdB2bYRsoyiZJdwOKTU5buFJGjXCdjt0aFYhjvKm9UI7mw9WrrMaMuJUvT8mdNxpJY0KLeURHzUKF5PEC8niBO2llbV7HUDaBfnJ6fGZYjOQ58lLeNDi3SbcTbp0O5XLS/SLNG0lT/wCQeT1lbyMmsxHHJiUpLfWTKVlY+JWMz4Ct8sNdal7N7R0ZhGNcSNEkOvpUWG65CSJFuuxX+opqVS2qZtJ5L5Tc+pzOVtrVhmPm4hojYTo2XsFvcPcQo5YeF+P7KSlh4X4/stPJXK2g2qdl1adtDKRGjz1M8jSw3gWkkpVYztci3iLTXQdTm7QbY7ZbRwqNWHqVAoyclrISlSn3zuW+ai5uJKtOqwq/INSuURp1Q85VNlcSe4lUBp/DHXdtO+tFtT1PX4C6hN8nE1qibbeUKLOWhnA+c/e3dwlLUZ+FaD+olS4WSI9lseJO2tYpG2NHRtA9yOGihcrnRcKfXEThnYy6TNCSIiPpsNp5O3K3I2f84bSPY5M5w5DTGEk8mZVbA3oWumuuuo+Q7bId212yo70RlcaTLoCZjDCrK3k5ziUHpY72t9R9q2Mr7W02zcGrMbmcn0qe7dLRRfn+lhNN5Zak8t8l2AAPY1AAAAAAAAAAAAAAAAAAAAAAAB85n+UxFIbf85Q8clqsPQHUsKPcjoLHnW1vZCkmZe/oEmTty7EpG0dTcZjPM0+qIhNYVGlKmlZW+Z63PfUenuFeojy6kTegKqNtFR5dEcqzFSjLprN1KfxbqcPG/SR+7iOEDamlVOiS6tTXlyY0TFm4WHMaTSRKtgMsV7GR8OkTsi+yO+0NApm0UFuNWY2cyhROJ3jbU2oulKkmRkYjRtj6FH2ffobFNZ81O7zrWqsw9NTUZ4r6FrfSxD92Krv/ACbZuLU+TPRlvJLE0pJpTexGeAz5yddFdIolVzairzp0nZeHSV0qDJVESmYpSXZikHZw0KLdQRHcive9hDx3KNw7ltQtitn6JGnM02BgZnN5b6XXXHUuJ10sszsWp8BFZ8nOy8emy6e3TV8jlqQp1pUl1SboMzK11bupnw4i42h2jpWzsZt6szOTIdUaUpwqcUoyK52SkjMyIuJ20HKs7VUeiU2DNnTMEaXbIdS0pzHdOIrYSPiQYgTin+C6QhDbWBvcQjdT8iEKtUqFW6a5T6tGRJhvWxJV1lwMjLUjLrIeqPVIVbprFQpr2dDevhWm6eB2MjI9SMjIysfUMdC2urbm1LmznmpC57U01Ov6pZRAOxpdvxNZkeEi4XIwbRLmi5ibEbORKBLozFNQimy7Z6cSsThkZGRmu+K5WK2ugnr2fpjjlKXyNGOk3TD3j9ERpwdeuhFxvwHBG1dEc2g8zNz0ecsWXhwqw4yK5px2w4ra4b3HX/kVK3PtPrZp05O6f8Qm5mjh7j14B6Cq0Kw/J/s15787N03BPzykYmn3EpxkeK+AlYeOvASNoNitnK9UkTatTUSZKLJxYlJxEXAlEkyJRfO4/dsq3IoMalSWEIXGensR5WK/o23DNOMuoyUaR+JrsiZtsujQWWVw4LGZUX1X3FrL0bSbe17R36AxDsRiHbBOVQKZ57YrPI0eco7HJ2nU3ThRroSS06T6Okx6otEp9E5WimxuTIlvqkOpSo8KlqsRmRGenAtC0FPE2yhN7P0qoVZaEPVPFkNQ8yTiIjPVNk3sSbGZmRWuLKpbR0qmedeVycHmxtD0rdNWWly+E9C1vY+AeklOHcuAFJW9qqJRJrEKqz0MyZFsKcKlaGeEjVhI8JX0udiHCubRLplXlQslnBHpL1RzXXTSm6FERIOxHZPG56icotujRAMtL20plM82s1la2ZkttlXoGHXWUqc0IicJNj1v7xLru1tHos3k1SeWh7CTjuFhxxDCFHhJTikkZIIzI9T6gyhuvJfAMBt5LrdImomwa36aQ+yzTqO1GSpMk7lmZij3uBmdysSSIhv1AmE8vAAAElwAAAAAAAAAADFsbENf/IlY2gl5L0OdEJlLGvOUkkOGZWtqlJFx9oxT07ycy4Gx1SoTEmM9m1RuW0p2/qELaPAvTnYUHw04D6YAr00eXTRg63sXNlt7TIiPQkIqM2LPYadvgUtrDjS6RFwUaC1K4k7E0Ku0yTXF116nvM1Nw5SlRlKxIeURJNJEZWNBJIrHx04DZgGizkdNZyUOw1NqFE2biUypcmWuCko7TrClKzG0kRJUolEWFXWRXL3inRRtqKJJnM7LvUl6my5K5CU1DMSuItw8S8ODRacRmZEduI2wCcFtODB7W7K12ryYkqDMp/KV012mSnX2lJS2TppxutJK9lWIysZ8DLUdGtmKq5s/srFlrp/LKJNYcxNKUpDjLSTRpcr4zSZacL9I3ACNEV6aKHY+iO0GNVWX1oWzIqT8thLV9xDhkokHfpvceUUaQ3t+5XW1o5G9TShKTrjxpdNZHwtaxn0jQAJ1LaI+fI2NqvnZDPKYXmFFYOtpVvcpzTM1ZfZw4j51720HWNsfUG9rW3nJMZdBaqT1XaRvZ2e4g05ZlbDhIzUq979A3gCNEV6aKXbOjeftl6lTG1oQ9Ib9EpXNS4RkpBnboJREOexlA8w0TJfe5TUpDipEyV3r6+cfyLQi9xC+ATrzktqs5PmU/YiuubG0CkxHqZymntmnlSlOtrYWZ3J1ladTMi0NJkRGJ+1WxtTq9blLiSY3m2ptxW6jm3zUkws1EbdtDxEZpMjtYb4BGiK9NHzfbbYqt1epVhdJmU9mNU0x1OqfxZramLmltNitgNWEzPo10MW1Y2dqdXclPPrhMvS6E9TlJaUpSUvrO9yMyuaNT14+4bIA0Q6aMBtJs7tG/J2YXTfNMmNSWyUpiY642hyQSSSTm6k7kniXDUx42q2HkVPaTznyanz2ZDDLMqLJkvsJSaL6pNvRZGR81RdHvH0IA0Q6aKKdSlyNsqVU22dyPGkMqVm4cOM27blteaetyt7xegAkvgAACSwAAAAAAAAAQKpIW23gYXge7XZFak1BZZUkPy2o/wAa/h/7EDzshzcbye1zsWnWMjNq8uI7kvvZK0Xw4t3MI+yZcSGC2j2hXHkoeYx/Z1GpKk85N+Onv0HIqX08+kq5H29FSX94hAlx5TUj1fP7KhlqRP5e24ttlaEIVl4u0oiLFb5Kun5kYsB7wuZL7ics0ACHAlZm45z/AO4TB0ITU1lEgAEWdI5O36Pnr/pCc1BZYOjz7Uf1i/5RFXUu7R4hXLX7bi/5lCmq66nymC9Rnoz0Zlz7YxpicQdiulXQZFc7aXGCV1KT44JUZNZNN51y/WIE2PKaker5/ZUM9dDbuN9aEL+JQ7JPuxWF1UX3GS2deonUqxwn2Xv8v58GiAQoErM3HOf7PxCaOjCamso1AAHCZI5O18fsiZSUVlg9vPIj+sWIa6l3aPEK9a1ub7gjyZHJ/WMryfaUn2fmXUOdO6m/tLQTm8Itk1L/AOn+oSWZbTnwL+IfPqjPkS5OTEWvBiwpSn2vfoNFDbXHjMIc56E73zEQupr7jTcWcrampzfL9jUAK+BK+5c/lV/0LAb6dRTWUZAAAPQsAAAAAAAH4s8vfGfdXz1ufiULuV/DL/CPnvlLlOxNhKqtjnrSln6LWlJ/oZjBdy5SL0abrVIU17tL/Zg9qdvJdXkrhUZfJqbiw5uElLf95X5qerp/YV7WxbkhxDzFclFiSSlcUmRnxLXS/wAjt7xmaV6MfQ4M1eW2htY5zlg/RX9NpUKahSiv+8k2gbNLhkhD1dqBtIxKwKdPAkzurgkrnc7/AJjQorPIG0Zi1rZ9rFzvoK+I4tz2x+7QyGIlKfayt62LOUrXQuBF0FceazJ5ObUtoVJKnJZRuWHuY837lfiIX4w2yL/KNlqcvn+gL9NP+htWP4Zv8JfsOtZPuj4yrT6VRw8No6ChkuZji1/7YXbnql/hMZqbj5E/l8/LV+xhdvsisI7SjE+fV2qu1KSvf+zJV6JPRbr+Yr0Kyyxt7i+0kfhD9IyMYD9Uo28KNNU4rhBas1eNe+vtK3hYUKqu02S2vH9mxelR0W6/mK8zIh+GArW8K1N05Lhn1lC8vfb/ABDQIXmNNr7Yy1Ox8hiZnPy0/sQ0UH+GQN1pLlo/Kpx0m4kgUkxzMkr8P5C7GfF7t8JFWQKlUWoHxvL5qf8AIqyr7vcowfUQaw5mVJ/4FYfy0EQYT6uz+l0OkpTWWy2arPJ2sDEZCPxKxDvEruY7glowI7SfZ+ZCiH4Bqn9Mt5xey/nPJvEmL2O5mNNrGTojmZTWMz3p/I7DTU3+GR9RptJerB8bVp9Ko4eOCUAAOiQAAAAAAAH4ssxpxHbGK2tpa6vQKlT/AL55s0p/GWqf1IhthX1GL983/N/kZrqnstkWpzdOcZruuT+Ro7y23fjR/uo2NKqCHMGYvfQLbynbES25z9ZoTK3mXd59hpOraulaSLiR9PUfu4fOY8rL9sciUT9PsryneUdo/wA/g+oeckR8Cxn9pdonZ+43+H8R8LEMsqq+xjH0PyabIyJclis1llbMZreisOp3lqLgsyPgkuJdZ26OMRiyl1Wt7KnKrLv7fo+obOU5cCk02n+2ywhtXzIiv+txrCIQ6dFy99zn+yJw7FrT0WWfmMpupJzfdgZ91GW64hz8I0AgVGPmemb5/tBdU91lexDeOT49VIiqfNfiucEK3fiT0GIti+g+j1mkR6o16TceRzXU+z8+shmlbJTTXZD0bL7WI/2sOYffWH123qUV1ZYl7/szp2+glUyKuozWIyC0Wre+FPSf5C4TslNJdlvRsvta/tYaWj0iPS2vR77y+c6r9i6iEi/+vUKdJ9J5l7fssCL2GxoGUZbbaOwkQKdH++c/lFkOha09VlnwKeXkCjkt5claP9sLwQ58bM32+ej+ohe4p7x4IZ89rrOXUl/HZX5/+7iCNXWIHK2vR+uRzf8AAzC2HW3cDjK0L/COafYfTbyFWgk3yuDmA6Ljut89laPxJMWFIpa5Dra30YGUdr2v/QGutdU6NPdvgu6UzyemsI+HF+eo08RGXGQgQIEfMcxucxH9Ri1G60p6+tnxE5uc3N+4AAGwqAAAAAAAAAAARX4SHN9vcWKCZsjTJcnOl0qnyXu0phKj+pmQ1IjzpTUCC/JlrwMspNxStVYSLjoQ8Z21OXJaNSUOYywUUTZSnx3MbFNp7K+0lhKT/MiF5HhIb3+esSQCFCECspyl9wAAHsAAAAIsmEhzfb3FiEuA78C/5v8AItxzlvojxlvOY8CN7dSbivolJGZn7iHjO2hLkrgq0wZHY/qEuPAQ36zf/tElh5EiMh5heNl1JOJV2iMrkf5DoKwt4RGAAANBYAAACNJiIkfAvtf5EJcB37vAsWwDxnQhMjGCnTBkdj+ohJZgI+/Xj+EdoE2PPjcqiLxs4lJ3kmlV0qNJkZKIjIyMjL6CSKwt6cRhnkiHoAGgkAAAAAAAAAAAAAAAOb7KJEZbL6MbLqTbUntEZWMvyHQAB5QWW3g/uUav1PiPQCvmTfYY8X+B51KigssqTVrQ36xeAc+VR++QKVRiPLlNRGsb68GPdT1qPqIi1M/kMn+W2/SiMmmQtDnq14x7GQbqsfMbR9pZWtRJSt1hxtKjPhqZC/hzfYf8X+R7QudniawTksByksNS4z7L++y8k21JxGnERlY9S1L6DqA0ljjFjNRG8ljHg+J1TnAiLiozPoHYBCmTcvcb5/8AaKzmoLLKkta0N+sXgHLlUfvkCnWtbnrB+DFK7fsiMl6hxDnq1oWPYz4mxZ3sP8ztf5HpTuk+GTksx5UQ9ANZYjQIMeA3kxELQjEat5SlamZmZ3UZnczM9RJAAKgAACwAAAAAAAAAAAAAAAAAARai9ltfGvdFSJdVP7Sj8IpZ7juaxFYXgedupTvdoTa5l77mRF8/cObXk51NSjJElhEhvJc5i/5VXLUjI+gyFPEfXHqUtdSQ8uSzZtpTTCnE4LXvukdjM+Py9wnJo9P+8jIeX2n/AEi1fM1ajx5mj8px+mycOFTWarDcj00vw1Vpw1HmnHsQemUOy5Lcp9lbLLN8ppXOUoytjUXRpciL3mLIVvmen/dxkMr7THo1p+Rp1HuA47mvxn143mbKS73iFXsZl13IyP5e8Q+ewNLTnsxr40bolCqpR/aV/hFqOjQntAsjjMe5PGx+3zU/MUosKufq0fMV4x3U8zwQwAAM5AAAAFlS3sxrB2P2E4U9NP7S39RcDpW89oFkAABoLAAAAAAAAAAAAAAAAAAAAAAFXVS9I2v4f2FG/wCjrcRfbYdb+t0K/Yj/ACGpms8oa+NG8kZqqMLkRvQfxLSicaxdoug/cZXL6jn14a1PkoyYAjw5CJkZt5v+ZKucky4kfUZDtf2PbGUg9Cvj+krctfYYab+t1K/Yy/MSJkhEONnOfhSlPOUZ8CLrMxzprC48b0/8S8o3HcPaPoL3EVi+gldgXFKL0ji/h/cWg4QmeTtfGveUO46lCGkMFkV1XL1a/mkQBdyWeUNYP9uKNRDFdQxPJDP0AAZyAAAAJFNL7T+C4uBEp7GW3jc56/2EsdS3hpAsgAAPYsAAAAAAAAAAAAAAAAAAAAAABDmQszfb3F/3CYArOCmsMqZWZSkcpxuIeZeXzlNOqbxfOx6jj5phZf8ADb/OzcR5t+vHzr/UbAeMtHYR4Rmds/ZkYMxDpSOU420PPPI5qnXTcw/K56C+hwsvfc5/9omALwtlF5fJOAAANBYCLLiIkb/MX/d8xKAVnBTWGVKF1lbfrEDyNAPGWjsI8Ixu08MjBRoQtz1aMYsIkHL33/CJ6QHrTtVHlk4AAA0lgAAAAAAAAAAAAAAADnntd8jxBntd8jxCu68lToA557XfI8QZ7XfI8QbryDoA557XfI8QZ7XfI8QbryDoA557XfI8QZ7XfI8QbryDoK1EGW3tA/N5YtcZ5hLfJVc1s0mZ3RbpO+t+PXoRCdntd8jxBntd8jxBuvIOgDnntd8jxBntd8jxBuvIOgDnntd8jxBntd8jxCN4+QdBW1ODIkTYMph7BydSlKSq+FdyLQyLTiRa9GvWYnZ7XfI8QZ7XfI8QnePkFJIptVbqTkqJUvQyJLalNYfVIQRkZJuftaX4ajwxSq220wz57xsojEypWUWapeIjzLmWp4Sw69d+Ivs9rvkeIM9rvkeIV2h5IwilVTqxmt5dVRg383d5ylNkkjTe+EiWRqtw+dxIgQqrHmoXLnoejZBpU1lYfSGd8ZH0FbS3vFlntd8jxBntd8jxC20PIwdAHPPa75HiDPa75HiDePkk6AOee13yPEGe13yPEG68g6AOee13yPEGe13yPEG68g6AOee13yPEGe13yPEG68g6AOee13yPEAbx8gowABxyoAAAAAAAAAAAAAAH6SF9j/TH7kO5WPAvBr+g/Y8h1j1a8A6JmyO319XTx/cSsA5Ey72F9Ps9RXP9AW2tv1iF/wCnb9x2XOkOesXz97ml1Yf2H75xkdv+kuu+nULegHDJd7C/CPzLX2F/7/8ApCU7UZH3e4jESk7pbtitxsPBzpHfdaejp0/6D0g45LvYX0ez18B4USxJVOkZuPGjH+Euq37aDw9KdkNYHF40c4V4ByAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAABIAAAAAAAAAAAAAAAAAAAAAAP//Z&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=49&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#49&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:01+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:01&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=50&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#50&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:01+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:01&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;before this i thought i was like a 2&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=51&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#51&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:01+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:01&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;now i know i was a 5&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=52&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#52&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:01+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:01&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;she a 2 but looks like a 5&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=53&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#53&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:01+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:01&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;me with eyeliner &lt;span class=&quot;context&quot;&gt;[&lt;a href=&quot;//101010.pl/@nabijaczleweli/115217288648887985&quot;&gt;context&lt;/a&gt;, ed.]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=54&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#54&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:02+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:02&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;theres a fundamental conceptual wall when youre reading this that it'&lt;!--'--&gt;s 100% not possible to imagine a world where you do actually hallucinate something&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=55&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#55&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:02+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:02&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;can you see an apple? sure the apple is red, has a leaf, the underside has a fucked up flower left over if you spin it&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=56&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#56&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:03+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:03&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;this is what that means&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=57&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#57&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:03+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:03&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;not can you see an apple? sure, here'&lt;!--'--&gt;s a fucking hallucination of an apple&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=58&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#58&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:03+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:03&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;????&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=59&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#59&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:04+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:04&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;being autistic is this bandgap but about everything youve ever experienced in your life btw&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=60&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#60&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:04+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:04&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i think id rather be gay&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=61&gt;&lt;span&gt;&lt;a class=&quot;backlink&quot; href=&quot;#56&quot;&gt;↬ &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt; &lt;span&gt;this is what that means&lt;/span&gt;&lt;/a&gt;
&lt;h4&gt;&lt;a href=&quot;#61&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:05+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:05&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;well the question is more&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=62&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#62&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:05+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:05&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;imagine an apple&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=63&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#63&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:05+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:05&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;make it red&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=64&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#64&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:05+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:05&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;make it spin&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=65&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#65&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:05+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:05&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;generally aphantasoids will go &quot;what&quot; by the 3rd statement&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=66&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#66&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:06+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:06&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i can make it spin easily&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=67&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#67&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:06+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:06&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i can apply any rotation to any thing to get to a solution to a question&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=68&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#68&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:06+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:06&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;then i dont get what you cannot see&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=69&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#69&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:06+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:06&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;but i dont hallucinate an apple&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=70&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#70&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:07+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:07&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;so if I ask you to imagine a little lizard on your keyboard the question makes no sense?&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=71&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#71&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:07+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:07&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;to you this means hallucinate an apple and look at it, to me this means &quot;i will be talking about apples. when answering questions about the result, remember that it'&lt;!--'--&gt;s red and spinning&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=72&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#72&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:08+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:08&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i see so you'&lt;!--'--&gt;re basically redis&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=73&gt;&lt;span&gt;&lt;a class=&quot;backlink&quot; href=&quot;#70&quot;&gt;↬ &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt; &lt;span&gt;so if I ask you to imagine a little lizard on your keyboard the question makes no sense?&lt;/span&gt;&lt;/a&gt;
&lt;h4&gt;&lt;a href=&quot;#73&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:08+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:08&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;a lizard could be on my keyboard i suppose. to what end?&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=74&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#74&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:08+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:08&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;rendering a scene to answer a question about it is a conscious process&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=75&gt;&lt;span&gt;&lt;a class=&quot;backlink&quot; href=&quot;#71&quot;&gt;↬ &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt; &lt;span&gt;to you this means hallucinate an apple and look at it, to me this means &quot;i will be talking about apples. when answering questions about the result, remember that it'&lt;!--'--&gt;s red and spinning&quot;&lt;/span&gt;&lt;/a&gt;
&lt;h4&gt;&lt;a href=&quot;#75&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;but then one could ask questions like&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=76&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#76&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;make it spin faster&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=77&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#77&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;nope&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=78&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#78&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&quot;which way is it pointing to now&quot;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=79&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#79&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;this makes no sense&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=80&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#80&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;there is no apple&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=81&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#81&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;it'&lt;!--'--&gt;s not pointing anywhere&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=82&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#82&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;yeah this is what i am saying&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=83&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#83&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;those are the statements that should tell you something is off&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=84&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#84&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:09+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:09&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;there are 5-10 semantic elements&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=85&gt;&lt;span&gt;&lt;a class=&quot;backlink&quot; href=&quot;#83&quot;&gt;↬ &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt; &lt;span&gt;those are the statements that should tell you something is off&lt;/span&gt;&lt;/a&gt;
&lt;h4&gt;&lt;a href=&quot;#85&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:10+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:10&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;its impossible to conceive of a universe where there is a counterfactual to this&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=86&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#86&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:11+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:11&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i think there could be&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=87&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#87&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:11+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:11&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i can only give you this analysis because weed fixed my aphantasia a little bit&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=88&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#88&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:11+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:11&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;therefore i can conceive of a universe with a counterfactual because i am living in that universe&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=89&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#89&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:13+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:13&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;so when are you upgrading to 1 apple diagram rating&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=90&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#90&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:13+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:13&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;unclear&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=91&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#91&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:13+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:13&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i have real weed (as opposed to weed goop which is narrow-spectrum) on the way. this may work better or it may work worse&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=92&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#92&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:14+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:14&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;the nab descent to hell
lounge -&gt; systemd -&gt; weed -&gt; ability to hallucinate spinning apples&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=93&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#93&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:14+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:14&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;lol&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=94&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#94&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:21+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:21&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;if you want to know what being autistic is like you should watch poor things (2023)&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=95&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#95&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:21+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:21&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;its pov me&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=96&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#96&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:21+02:00&quot; class=hoveronly&gt;&lt;span&gt;[&lt;/span&gt;15:21&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;no media that claims to be about being autistic actually is, it'&lt;!--'--&gt;s all reddit chungus&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=97&gt;&lt;span class=&quot;context&quot;&gt;&lt;h4&gt;&lt;a href=&quot;#97&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:23+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:23&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;similarly if you want to know what being gay is like you should watch belami boys&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=98&gt;&lt;span class=&quot;context&quot;&gt;&lt;h4&gt;&lt;a href=&quot;#98&quot;&gt;&lt;time datetime=&quot;2025-09-18 15:23+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;15:23&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;lmaoo&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=99&gt;&lt;span&gt;&lt;h4&gt;&lt;a href=&quot;#99&quot;&gt;&lt;time datetime=&quot;2025-09-18 +02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=100&gt;&lt;span class=&quot;context&quot;&gt;&lt;h4&gt;&lt;a href=&quot;#100&quot;&gt;&lt;time datetime=&quot;2025-09-18 16:25+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;16:25&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;nabijaczleweli&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;i will be editorialising our conversation above for a blogue poast btw&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div id=101&gt;&lt;span class=&quot;context&quot;&gt;&lt;h4&gt;&lt;a href=&quot;#101&quot;&gt;&lt;time datetime=&quot;2025-09-18 16:27+02:00&quot;&gt;&lt;span&gt;[&lt;/span&gt;16:27&lt;span&gt;]&lt;/span&gt;&lt;/time&gt;&lt;/a&gt; &lt;strong&gt;Mayfly&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/h4&gt; &lt;span&gt;the part where you'&lt;!--'--&gt;re unable to imagine yourself sitting on a blinking cactus that'&lt;!--'--&gt;s spinning counter clockwise? 😔&lt;/span&gt;&lt;/span&gt;&lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/019-aphantasia.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/notes/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/notes/" />
    <title> Analysis notes — nabijaczleweli </title>
    <updated>2025-07-07T19:08:39+02:00</updated>
    <content type="html">
&lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;..&quot;&gt;↩&lt;/a&gt; Analysis notes &lt;a class=&quot;go-back-link right&quot; href=&quot;..&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt;
&lt;h3&gt;&lt;a href=&quot;/content/assets/notes/elementary.txt&quot;&gt;queerness in elementary&lt;/a&gt;&lt;/h3&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/017-malloc0.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/017-malloc0.html" />
    <title> 017. malloc(0) &amp; realloc(…，0) ≠ 0 — blognꞌt — nabijaczleweli </title>
    <updated>2024-10-17T03:42:06+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;017. malloc(0) &amp; realloc(…, 0) ≠ 0&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Thu, 17 Oct 2024 03:42:06 +0200&lt;/span&gt;; updated Thu, 17 Oct 2024 12:15:42 +0200, Fri, 18 Oct 2024 18:50:12 +0200, &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/2&quot;&gt;Wed, 30 Oct 2024 18:53:30 +0100&lt;/a&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#v5'&gt;UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v5/v5man.pdf&quot;&gt;Fifth Edition&lt;/a&gt;&lt;/cite&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#v6'&gt;UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v6/v6doc.tar.gz&quot;&gt;Sixth Edition&lt;/a&gt;&lt;/cite&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#v7'&gt;UNIX™ Time-Sharing System: UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Henry_Spencer_v7/v7.tar.gz&quot;&gt;Seventh Edition&lt;/a&gt;&lt;/cite&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#BSD'&gt;&lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Henry_Spencer_v7/v7.tar.gz&quot;&gt;The &lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;&lt;/a&gt;&lt;/cite&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#42BSD'&gt;4.2&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#43BSD'&gt;4.3&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#44BSD'&gt;4.4&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#SysIII'&gt;&lt;span class=&quot;smallcaps&quot;&gt;Unix&lt;/span&gt; User'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//archive.org/details/bitsavers_attunixSysalRelease3Jun80_33886798&quot;&gt;Release 3.0&lt;/a&gt;&lt;/cite&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#SysVr123'&gt;&lt;span class=&quot;smallcaps&quot;&gt;Unix&lt;/span&gt;∗ System User'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//bitsavers.org/pdf/att/unix/System_V_Release_1/301-905_UNIX_System_V_Release_1_Users_Manual_Jan83.pdf&quot;&gt;System V&lt;/a&gt;&lt;/cite&gt;&lt;br /&gt; UNIX™ &lt;b&gt;System V&lt;/b&gt;—&lt;a href=&quot;http://bitsavers.org/pdf/att/unix/System_V_Release_2/307-113_UNIX_System_V_Release_2.0_Programmer_Reference_Manual_DEC_Processors_Apr1984.pdf&quot;&gt;Release 2.0&lt;/a&gt; &lt;b&gt;Programmer Reference Manual&lt;/b&gt;&lt;br /&gt; &lt;b&gt;UNIX® System V&lt;/b&gt; Programmer'&lt;!--'--&gt;s Reference Manual &lt;del&gt;[&lt;a href=&quot;http://bitsavers.org/pdf/att/unix/System_V_Release_3/308-139_UNIX_System_V_Release_3_Programmers_Guide_1987.pdf&quot;&gt;SysVr3&lt;/a&gt;]&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#SysVr4'&gt;UNIX® System V &lt;a href=&quot;//bitsavers.org/pdf/att/unix/System_V_Release_4/0-13-947029-8_Unix_System_V_Rel4_Programmers_Reference_Manual_1990.pdf&quot;&gt;Release 4&lt;/a&gt; Programmer'&lt;!--'--&gt;s Reference Manual&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#sunos3'&gt;SunOS &lt;a href=&quot;//www.bitsavers.org/bits/Sun/sun3/sunos_3.4_src.7z&quot;&gt;3.4&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#sunos4'&gt;SunOS &lt;a href=&quot;//vetusware.com/download/SunOS%20Source%20Code%204.1.3/?id=13475&quot;&gt;4.1.3&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#solaris'&gt;Solaris &lt;a href=&quot;//vetusware.com/download/Solaris%20Source%20Code%205.8/?id=11547&quot;&gt;8&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#SVID'&gt;&lt;span class=&quot;smallcaps&quot;&gt;svid&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#SVID2'&gt;System V Interface Definition, &lt;a href=&quot;//bitsavers.org/pdf/att/unix/SVID/System_V_Interface_Definition_Issue_2_Volume_1_1986.pdf&quot;&gt;Issue 2&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#SVID3'&gt;System V Interface Definition, &lt;a href=&quot;//archive.org/details/systemvinterface0001unse&quot;&gt;Third Edition&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#XPG'&gt;&lt;a href=&quot;//bitsavers.computerhistory.org/pdf/xOpen/X_Open_Portability_Guide_1985/xpg_2_xopen_system_v_specification_2.pdf&quot;&gt;X/Open Portability Guide, Part II: The X/Open System V Specification&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#XPG4'&gt;&lt;span class=&quot;smallcaps&quot;&gt;xpg4&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#conclusions'&gt;Conclusions&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#conclusions'&gt;Verdict &lt;del style=&quot;font-weight: normal;&quot;&gt;&lt;small&gt;&lt;i&gt;(this section is not normative)&lt;/i&gt;&lt;/small&gt;&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#appendixA'&gt;Appendix — &lt;a href=&quot;//nvlpubs.nist.gov/nistpubs/Legacy/FIPS/fipspub160.pdf#page=170&quot;&gt;C89&lt;/a&gt; &lt;code&gt;realloc(…, 0)&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//www.open-std.org/jtc1/sc22/wg14/www/docs/n3301.pdf#subsection.7.24.4&quot;&gt;C&lt;/a&gt; and &lt;a href=&quot;//pubs.opengroup.org/onlinepubs/9799919799/functions/malloc.html&quot;&gt;POSIX&lt;/a&gt;
say that
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
If the size of the space requested is 0, the behavior is implementation-defined:
either a null pointer shall be returned, or the behavior shall be as if the size were some non-zero value &lt;del&gt;[…]&lt;/del&gt;.
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
one &lt;a href=&quot;//github.com/shadow-maint/shadow/pull/1095&quot;&gt;has to wonder&lt;/a&gt; if this is real.
&lt;/p&gt;
&lt;h2 id=&quot;v5&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#v5&quot;&gt;#&lt;/a&gt; UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v5/v5man.pdf&quot;&gt;Fifth Edition&lt;/a&gt;&lt;/cite&gt;&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
doesn'&lt;!--'--&gt;t have &lt;code&gt;malloc&lt;/code&gt;.
&lt;/p&gt;
&lt;h2 id=&quot;v6&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#v6&quot;&gt;#&lt;/a&gt; UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v6/v6doc.tar.gz&quot;&gt;Sixth Edition&lt;/a&gt;&lt;/cite&gt;&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
doesn'&lt;!--'--&gt;t have &lt;code&gt;malloc&lt;/code&gt; either,
but has a generic alloc(3) with &lt;code&gt;alloc()&lt;/code&gt;/&lt;code&gt;free()&lt;/code&gt;
(&lt;em&gt;generic&lt;/em&gt; in contrast to most programs shipping an &lt;code&gt;alloc()&lt;/code&gt; that boils down to &lt;code&gt;sbrk(1024)&lt;/code&gt;, or just &lt;code&gt;sbrk&lt;/code&gt;ing directly;
 this implementation is not widely used).
The code and text of this implementation get expanded into the malloc(3) suite in &lt;span class=&quot;smallcaps&quot;&gt;v7&lt;/span&gt;, and, for the purposes of this document, they behave equivalently
(except that &lt;code&gt;alloc&lt;/code&gt; &lt;q&gt;Returns −1 if there is no available core.&lt;/q&gt;).
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;./man/man3/alloc.3&lt;/samp&gt;, &lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v6/v6src.tar.gz&quot;&gt;&lt;samp&gt;./s4/alloc.s&lt;/samp&gt;&lt;/a&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h2 id=&quot;v7&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#v7&quot;&gt;#&lt;/a&gt; UNIX™ Time-Sharing System: UNIX Programmer'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Henry_Spencer_v7/v7.tar.gz&quot;&gt;Seventh Edition&lt;/a&gt;&lt;/cite&gt;&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
has a malloc(3) with &lt;code&gt;malloc&lt;/code&gt; and &lt;code&gt;realloc&lt;/code&gt;:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
&lt;i&gt;Malloc&lt;/i&gt;, &lt;i&gt;realloc&lt;/i&gt; and &lt;i&gt;calloc&lt;/i&gt; return a null pointer (0) if there is no available memory or if the arena has been detectably corrupted &lt;del&gt;[…]&lt;/del&gt;.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
where &lt;code&gt;malloc&lt;/code&gt; allocates &lt;code&gt;(nbytes+WORD+WORD-1)/WORD&lt;/code&gt; (≥1) words, where one is eaten for the allocation size,
and &lt;code&gt;realloc(b, nbytes)&lt;/code&gt; is &lt;code&gt;free(b); malloc(nbytes); memcpy()&lt;/code&gt; (in so many words),
with &lt;code&gt;memcpy()&lt;/code&gt; skipped if the just-freed block was &lt;code&gt;malloc&lt;/code&gt;ed.
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;usr/man/man3/malloc.3&lt;/samp&gt;, &lt;samp&gt;usr/src/libc/gen/malloc.c&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h2 id=&quot;BSD&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#BSD&quot;&gt;#&lt;/a&gt; &lt;cite&gt;&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Henry_Spencer_v7/v7.tar.gz&quot;&gt;The &lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;&lt;/a&gt;&lt;/cite&gt;&lt;/h2&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;cite&gt;
 &lt;a href=&quot;//www.mckusick.com/csrg/&quot;&gt;The &lt;span class=&quot;smallcaps&quot;&gt;csrg&lt;/span&gt; Archives&lt;/a&gt;,
 &lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_1_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 1&lt;/span&gt;: Berkeley Systems 1978-1986&lt;/a&gt;,
 &lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_2_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 2&lt;/span&gt;: Berkeley Systems 1987-1993&lt;/a&gt;,
 and&amp;nbsp;&lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_3_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 3&lt;/span&gt;: Final Berkeley Releases&lt;/a&gt;
&lt;/cite&gt;
say that everything up to 4.1&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt; uses the &lt;span class=&quot;smallcaps&quot;&gt;v7&lt;/span&gt; allocator.
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;3bsd/usr/src/libc/gen/malloc.c&lt;/samp&gt;, &lt;samp&gt;4.0/usr/src/libc/gen/malloc.c.c&lt;/samp&gt;, &lt;samp&gt;4.1/usr/src/libc/gen/malloc.c&lt;/samp&gt;&lt;/cite&gt;
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;3bsd/usr/man/man3/malloc.3&lt;/samp&gt;, &lt;samp&gt;4.0/usr/man/man3/malloc.3&lt;/samp&gt;, &lt;samp&gt;4.1/usr/man/man3/malloc.3&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h3 id=&quot;42BSD&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#42BSD&quot;&gt;#&lt;/a&gt; 4.2&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;&lt;/h3&gt;
&lt;p class=&quot;continuing&quot;&gt;
has a new allocator:
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;4.2/usr/src/lib/libc/gen/malloc.c&lt;/samp&gt;, &lt;samp&gt;4.2/usr/man/man3/malloc.3&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
    &quot;--&gt;/*&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; * nextf[i] is the pointer to the next free block of size 2^(i+3).  The&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; * smallest allocatable block is 8 bytes.  The overhead information&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; * precedes the data area returned to the user.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; */&lt;!--&quot;--&gt;
static union overhead *nextf[30];&lt;!--
--&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
but otherwise implements the same methodology by adding &lt;code&gt;sizeof (union overhead)&lt;/code&gt; to the allocation size before rounding up and bucketing.
&lt;code&gt;realloc(cp, nbytes)&lt;/code&gt; similarly returns &lt;code&gt;cp&lt;/code&gt; if &lt;code&gt;nbytes&lt;/code&gt; ≤ the old allocation size, else &lt;code&gt;malloc(nbytes); memcpy()&lt;/code&gt;.
&lt;/p&gt;
&lt;h3 id=&quot;43BSD&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#43BSD&quot;&gt;#&lt;/a&gt; 4.3&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;&lt;/h3&gt;
&lt;p class=&quot;continuing&quot;&gt;
goes about calculating it differently, but small allocations remain equivalent to allocating 8 bytes.
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;4.3/usr/src/lib/libc/gen/malloc.c&lt;/samp&gt;, &lt;samp&gt;4.3/usr/man/man3/malloc.3&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h3 id=&quot;44BSD&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#44BSD&quot;&gt;#&lt;/a&gt; 4.4&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;&lt;/h3&gt;
&lt;p class=&quot;continuing&quot;&gt;
updates the malloc(3) &lt;cite&gt;RETURN VALUES&lt;/cite&gt; wording to
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
The &lt;code&gt;&lt;b&gt;malloc&lt;/b&gt;&lt;/code&gt;() function returns a pointer to the allocated space if successful; otherwise a null pointer is returned.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
and cites conformance with C89.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
realloc(3) is split off with text lifted directly from C89, including
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
If &lt;tt&gt;&lt;i&gt;size&lt;/i&gt;&lt;/tt&gt; is zero and &lt;tt&gt;&lt;i&gt;ptr&lt;/i&gt;&lt;/tt&gt; is not a null pointer, the object it points to is freed.
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
This is not true and the implementation doesn'&lt;!--'--&gt;t change.
Thus, the claimed conformance with C89 is also not true.
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;4.3tahoe/usr/src/lib/libc/gen/malloc.c&lt;/samp&gt;, &lt;samp&gt;4.3reno/usr/src/lib/libc/stdlib/malloc.c&lt;/samp&gt;, &lt;samp&gt;4.4BSD-Lite1/usr/src/lib/libc/stdlib/malloc.c&lt;/samp&gt;, &lt;samp&gt;4.4BSD-Lite2/usr/src/lib/libc/stdlib/malloc.c&lt;/samp&gt;&lt;/cite&gt;
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;4.3tahoe/usr/src/man/man3/malloc.3&lt;/samp&gt;, &lt;samp&gt;4.3reno/usr/src/lib/libc/stdlib/malloc.3&lt;/samp&gt;, &lt;samp&gt;4.4BSD-Lite1/usr/src/lib/libc/stdlib/malloc.3&lt;/samp&gt;, &lt;samp&gt;4.4BSD-Lite2/usr/src/lib/libc/stdlib/malloc.3&lt;/samp&gt;, &lt;samp&gt;4.4BSD-Lite1/usr/src/lib/libc/stdlib/realloc.3&lt;/samp&gt;, &lt;samp&gt;4.4BSD-Lite2/usr/src/lib/libc/stdlib/realloc.3&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h2 id=&quot;SysIII&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#SysIII&quot;&gt;#&lt;/a&gt; &lt;span class=&quot;smallcaps&quot;&gt;Unix&lt;/span&gt; User'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//archive.org/details/bitsavers_attunixSysalRelease3Jun80_33886798&quot;&gt;Release 3.0&lt;/a&gt;&lt;/cite&gt;&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
uses the &lt;span class=&quot;smallcaps&quot;&gt;v7&lt;/span&gt; allocator and malloc(3C).
&lt;cite class=&quot;path&quot;&gt;p. 524, &lt;a href=&quot;//vetusware.com/download/UNIX%20System%20III%20Source%20Code%20SYSIII/?id=11576&quot;&gt;&lt;samp&gt;src/lib/libc/vax/gen/malloc.c&lt;/samp&gt;&lt;/a&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h2 id=&quot;SysVr123&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#SysVr123&quot;&gt;#&lt;/a&gt; &lt;span class=&quot;smallcaps&quot;&gt;Unix&lt;/span&gt;∗ System User'&lt;!--'--&gt;s Manual, &lt;cite&gt;&lt;a href=&quot;//bitsavers.org/pdf/att/unix/System_V_Release_1/301-905_UNIX_System_V_Release_1_Users_Manual_Jan83.pdf&quot;&gt;System V&lt;/a&gt;&lt;/cite&gt;&lt;br /&gt; UNIX™ &lt;b&gt;System V&lt;/b&gt;—&lt;a href=&quot;http://bitsavers.org/pdf/att/unix/System_V_Release_2/307-113_UNIX_System_V_Release_2.0_Programmer_Reference_Manual_DEC_Processors_Apr1984.pdf&quot;&gt;Release 2.0&lt;/a&gt; &lt;b&gt;Programmer Reference Manual&lt;/b&gt;&lt;br /&gt; &lt;b&gt;UNIX® System V&lt;/b&gt; Programmer'&lt;!--'--&gt;s Reference Manual &lt;del&gt;[&lt;a href=&quot;http://bitsavers.org/pdf/att/unix/System_V_Release_3/308-139_UNIX_System_V_Release_3_Programmers_Guide_1987.pdf&quot;&gt;SysVr3&lt;/a&gt;]&lt;/del&gt;&lt;/h2&gt;
&lt;p class=&quot;indented&quot;&gt;
None of these make any meaningful changes to the allocator (in the domain of small allocations) or to malloc(3C).
&lt;cite class=&quot;path&quot;&gt;p. 585, &lt;a href=&quot;//vetusware.com/download/UNIX%20SYSVr1%20Source%20Code%20r1/?id=11570&quot;&gt;&lt;samp&gt;sysv-pdp11_usr-src/lib/libc/port/gen/malloc.c&lt;/samp&gt;&lt;/a&gt;&lt;/cite&gt;
&lt;cite class=&quot;path&quot;&gt;p. &lt;code&gt;MALLOC(3C) 1&lt;/code&gt;, &lt;a href=&quot;//vetusware.com/download/UNIX%20SYSVr2%20Source%20Code%20r2/?id=11571&quot;&gt;&lt;samp&gt;sysv-pdp11_usr-src/lib/libc/port/gen/malloc.c&lt;/samp&gt;&lt;/a&gt;&lt;/cite&gt;
&lt;cite class=&quot;path&quot;&gt;p. 310 (331), &lt;a href=&quot;//vetusware.com/download/UNIX%20SYSVr3%20Source%20Code%20r3/?id=11572&quot;&gt;&lt;samp&gt;301/usr/src/lib/libc/port/gen/malloc.c&lt;/samp&gt;, &lt;samp&gt;31/usr/src/lib/libc/port/gen/malloc.c&lt;/samp&gt;&lt;/a&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
SysVr2 and SysVr3 both additionally ship malloc(3X) (the &quot;&lt;em&gt;fast&lt;/em&gt; main memory allocator&quot;), however, as &lt;code&gt;-lmalloc&lt;/code&gt;.
Within the area this document surveys, the manual is functionally equivalent, sans the &lt;cite&gt;WARNINGS&lt;/cite&gt; including
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
Undocumented features of &lt;i&gt;malloc&lt;/i&gt;(3C) have not been duplicated.
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
and, indeed, this implementation'&lt;!--'--&gt;s &lt;code&gt;malloc(nbytes)&lt;/code&gt; says &lt;code&gt;if (nbytes == 0) return NULL;&lt;/code&gt;
and &lt;code&gt;realloc(ptr, size)&lt;/code&gt; says &lt;code&gt;if(size == 0) return NULL;&lt;/code&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
If one recalls that the &lt;cite&gt;DIAGNOSTICS&lt;/cite&gt; still say that
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
&lt;i&gt;malloc&lt;/i&gt;, &lt;i&gt;realloc&lt;/i&gt; and &lt;i&gt;calloc&lt;/i&gt; return a NULL pointer if there is not enough available memory.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
and mention no other case,
and the &lt;cite&gt;DESCRIPTION&lt;/cite&gt; explicitly defining
&lt;blockquote class=&quot;continuing&quot;&gt;
The argument to &lt;i&gt;free&lt;/i&gt; is a pointer to a block previously allocated by malloc
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
when &lt;code&gt;free(0)&lt;/code&gt; doesn'&lt;!--'--&gt;t work (dereferences negative pointer, so segfaults, probably?),
then it's difficult to conclude that this isn't an &quot;undocumented feature&quot;, but &quot;just a bug in malloc(3X) actually&quot;.
&lt;cite class=&quot;path&quot;&gt;p. &lt;code&gt;MALLOC(3X) 1&lt;/code&gt;, &lt;samp&gt;src/lib/libmalloc/malloc.c&lt;/samp&gt;&lt;/cite&gt;
&lt;cite class=&quot;path&quot;&gt;p. 469 (490), &lt;samp&gt;301/usr/src/lib/libmalloc/malloc.c&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
This is also the birth of the &lt;cite&gt;DIAGNOSTICS&lt;/cite&gt;'&lt;!--'--&gt;
&lt;/p&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;
When &lt;i&gt;realloc&lt;/i&gt; returns NULL, the block pointed to by &lt;i&gt;ptr&lt;/i&gt; is left intact.
&lt;/blockquote&gt;
&lt;h2 id=&quot;SysVr4&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#SysVr4&quot;&gt;#&lt;/a&gt; UNIX® System V &lt;a href=&quot;//bitsavers.org/pdf/att/unix/System_V_Release_4/0-13-947029-8_Unix_System_V_Rel4_Programmers_Reference_Manual_1990.pdf&quot;&gt;Release 4&lt;/a&gt; Programmer'&lt;!--'--&gt;s Reference Manual&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
has a new implementation, in which &lt;code&gt;malloc&lt;/code&gt; first tries to re-use the last-freed block,
then allocations smaller than 5 &lt;code&gt;int&lt;/code&gt;s use a special small-block queue, wherein
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
    &quot;--&gt;	/* want to return a unique pointer on malloc(0) */&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	if(size == 0)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		size = WORDSIZE;&lt;!--&quot;
--&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
(i.e. &lt;code&gt;sizeof(int)&lt;/code&gt;).
This spills to &lt;code&gt;realloc&lt;/code&gt; where
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
    &quot;--&gt;	/* special cases involving small blocks */&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	if(size &amp;lt; MINSIZE || SIZE(tp) &amp;lt; MINSIZE)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		goto call_malloc;&lt;!--&quot;
--&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
where the old algorithm is reimplemented as &lt;code&gt;malloc(); memcpy(); free()&lt;/code&gt;.
&lt;cite class=&quot;path&quot;&gt;p. 507, &lt;a href=&quot;//vetusware.com/download/UNIX%20SYSVr4%20Source%20Code%20r4/?id=11573&quot;&gt;&lt;samp&gt;ATT-SYSVr4/lib/libc/port/gen/malloc.c&lt;/samp&gt;, &lt;samp&gt;ATT-SYSVr4/lib/libc/port/gen/mallint.h&lt;/samp&gt;&lt;/a&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
malloc(3X) is unchanged but &lt;code&gt;-lmalloc&lt;/code&gt; &lt;code&gt;free&lt;/code&gt; accepts &lt;code&gt;NULL&lt;/code&gt;s now.
And &lt;code&gt;realloc(ptr, 0)&lt;/code&gt; frees &lt;code&gt;ptr&lt;/code&gt;.
As it should do, since &lt;code&gt;NULL&lt;/code&gt; is this implementation'&lt;!--'--&gt;s spelling for a zero-sized allocation.
Except that it now no longer leaves &lt;code&gt;ptr&lt;/code&gt; unchanged when returning &lt;code&gt;NULL&lt;/code&gt;.
&lt;cite class=&quot;path&quot;&gt;p. 682, &lt;samp&gt;ATT-SYSVr4/lib/libmalloc/malloc.c&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h2 id=&quot;sunos3&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#sunos3&quot;&gt;#&lt;/a&gt; SunOS &lt;a href=&quot;//www.bitsavers.org/bits/Sun/sun3/sunos_3.4_src.7z&quot;&gt;3.4&lt;/a&gt;&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
uses the SunOS allocator which &lt;code&gt;malloc&lt;/code&gt;s and &lt;code&gt;realloc&lt;/code&gt;s at least &lt;code&gt;sizeof(uint)&lt;/code&gt; (+ once again for the accounting block).
This allocator is dated 1986, so there's no reason to suspect (and no way to verify) there was another one that interceded 'twixt the &lt;span class=&quot;smallcaps&quot;&gt;v7&lt;/span&gt; one.
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;sunos_3.4_src/lib/libc/gen/malloc.h&lt;/samp&gt;, &lt;samp&gt;sunos_3.4_src/lib/libc/gen/mallint.h&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h2 id=&quot;sunos4&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#sunos4&quot;&gt;#&lt;/a&gt; SunOS &lt;a href=&quot;//vetusware.com/download/SunOS%20Source%20Code%204.1.3/?id=13475&quot;&gt;4.1.3&lt;/a&gt;&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
adjusts the minima to &lt;code&gt;sizeof(double)&lt;/code&gt; on &lt;span class=&quot;smallcaps&quot;&gt;sparc&lt;/span&gt; or &lt;code&gt;sizeof(uint)&lt;/code&gt; on m68k.
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;SunOS 4.1.3 sunsrc.tar&lt;/samp&gt;, &lt;samp&gt;SunOS 4.1.3 sunsrc/413/lib/libc/gen/common/malloc.c&lt;/samp&gt;, &lt;samp&gt;SunOS 4.1.3 sunsrc/413/lib/libc/gen/common/mallint.h&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
It also ships libxpg which includes SysVr2-style &lt;code&gt;-lmalloc&lt;/code&gt;
&lt;cite class=&quot;path&quot;&gt;&lt;samp&gt;SunOS 4.1.3 sunsrc.tar&lt;/samp&gt;, &lt;samp&gt;SunOS 4.1.3 sunsrc/413/xpglib/malloc.c&lt;/samp&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;h2 id=&quot;solaris&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#solaris&quot;&gt;#&lt;/a&gt; Solaris &lt;a href=&quot;//vetusware.com/download/Solaris%20Source%20Code%205.8/?id=11547&quot;&gt;8&lt;/a&gt;&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
ships both implementations functionally unchanged since SysVr4.
There'&lt;!--'--&gt;s no
&lt;a href=&quot;//vetusware.com/download/Solaris%202.5%20Source%20Code%202.5/?id=11544&quot;&gt;reason&lt;/a&gt;
&lt;a href=&quot;//vetusware.com/download/Solaris%20Source%20Code%202.6/?id=11545&quot;&gt;to&lt;/a&gt;
&lt;a href=&quot;//vetusware.com/download/Solaris%20Source%20Code%202.7/?id=11546&quot;&gt;suspect&lt;/a&gt;
this has ever wavered in SysV SunOSes prior (or for some time after 2000).
&lt;/p&gt;
&lt;h2 id=&quot;SVID&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#SVID&quot;&gt;#&lt;/a&gt; &lt;span class=&quot;smallcaps&quot;&gt;svid&lt;/span&gt;&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
has no extant copy.
&lt;/p&gt;
&lt;h3 id=&quot;SVID2&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#SVID2&quot;&gt;#&lt;/a&gt; System V Interface Definition, &lt;a href=&quot;//bitsavers.org/pdf/att/unix/SVID/System_V_Interface_Definition_Issue_2_Volume_1_1986.pdf&quot;&gt;Issue 2&lt;/a&gt;&lt;/h3&gt;
&lt;p class=&quot;continuing&quot;&gt;
includes SysVr2 malloc(3X) mostly-verbatim as malloc(BA_OS) in Volume 1.
(The API is adapted minimally to match SysVr3'&lt;!--'--&gt;s.)
The &lt;cite&gt;RETURN VALUE&lt;/cite&gt; is extended to say for the first time that
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
The functions &lt;tt&gt;malloc&lt;/tt&gt;, &lt;tt&gt;realloc&lt;/tt&gt;, and &lt;tt&gt;calloc&lt;/tt&gt; return a &lt;tt&gt;NULL&lt;/tt&gt; pointer if &lt;tt&gt;nbytes&lt;/tt&gt; is &lt;tt&gt;0&lt;/tt&gt;
or if there is not enough available memory.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
Illuminatingly, &lt;cite&gt;RETURN VALUE&lt;/cite&gt; proclaims that
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
In System V Release 2.0, the developer can control whether the contents of the freed space are destroyed or left undisturbed &lt;del&gt;[…]&lt;/del&gt;.
In System V Release 1.0, the contents are left undisturbed.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
manufacturing a reality in which the &lt;em&gt;undocumented behaviour of the &lt;code&gt;-lmalloc&lt;/code&gt; opt-in extension&lt;/em&gt; is actually the universal baseline.
&lt;cite class=&quot;path&quot;&gt;p. 103 (114)&lt;/cite&gt;
&lt;/p&gt;
&lt;h3 id=&quot;SVID3&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#SVID3&quot;&gt;#&lt;/a&gt; System V Interface Definition, &lt;a href=&quot;//archive.org/details/systemvinterface0001unse&quot;&gt;Third Edition&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
The functions &lt;tt&gt;malloc&lt;/tt&gt;(), &lt;tt&gt;realloc&lt;/tt&gt;(), and &lt;tt&gt;calloc&lt;/tt&gt;() return a null pointer if there is not enough available memory.
If the size of the space requested is zero, the behavior is implementation defined; the value returned will be either a null pointer or unique pointer.
When &lt;tt&gt;realloc&lt;/tt&gt;() returns &lt;tt&gt;NULL&lt;/tt&gt;, the block pointed to by &lt;i&gt;ptr&lt;/i&gt; is left intact.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
This is supposed to match SysVr4, and neither of SysVr4'&lt;!--'--&gt;s mallocs document which behaviour they pick.
It also mandates SysVr2 (SysVr3)'s &lt;code&gt;-lmalloc&lt;/code&gt;'s leaking behaviour, which SysVr4 has fixed, making it non-compliant.
&lt;cite class=&quot;path&quot;&gt;p. 6-76&lt;/cite&gt;
&lt;/p&gt;
&lt;h2 id=&quot;XPG&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#XPG&quot;&gt;#&lt;/a&gt; &lt;a href=&quot;//bitsavers.computerhistory.org/pdf/xOpen/X_Open_Portability_Guide_1985/xpg_2_xopen_system_v_specification_2.pdf&quot;&gt;X/Open Portability Guide, Part II: The X/Open System V Specification&lt;/a&gt;&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
includes SysVr2'&lt;!--'--&gt;s malloc(3X) as malloc(3X) (it says it's via SVID malloc(OS) but it &lt;em&gt;doesn't&lt;/em&gt; define &lt;code&gt;malloc(0) = NULL&lt;/code&gt;).
It notes that an &lt;q&gt;older (smaller) form may also exist&lt;/q&gt;,
but correctly recognises that &lt;q&gt;it is the responsibility of the application developers to ensure that the appropriate version is linked into their applications&lt;/q&gt;.
&lt;cite class=&quot;path&quot;&gt;p. 103&lt;/cite&gt;
&lt;/p&gt;
&lt;h3 id=&quot;XPG4&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#XPG4&quot;&gt;#&lt;/a&gt; &lt;span class=&quot;smallcaps&quot;&gt;xpg4&lt;/span&gt;&lt;/h3&gt;
&lt;p class=&quot;continuation&quot;&gt;
&lt;q&gt;is updated to indicate what will be returned if &lt;i&gt;size&lt;/i&gt; is 0&lt;/q&gt;: &lt;code&gt;NULL&lt;/code&gt; or a unique &lt;code&gt;free&lt;/code&gt;able.
&lt;cite class=&quot;path&quot;&gt;&lt;a href=&quot;//pubs.opengroup.org/onlinepubs/009656499/toc.pdf#page=406&quot;&gt;p. 378 (406) &amp; 468 (495)&lt;/a&gt;&lt;/cite&gt;
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
This is naught but a mild editorialisation of &lt;a href=&quot;//nvlpubs.nist.gov/nistpubs/Legacy/FIPS/fipspub160.pdf#page=170&quot;&gt;C89 wording&lt;/a&gt;,
and later &lt;s&gt;&lt;span class=&quot;smallcaps&quot;&gt;xpg&lt;/span&gt;s&lt;/s&gt;&lt;s&gt;&lt;span class=&quot;smallcaps&quot;&gt;sus&lt;/span&gt;es&lt;/s&gt;&lt;span class=&quot;smallcaps&quot;&gt;posix&lt;/span&gt;es use later Cs.
&lt;/p&gt;
&lt;h2 id=&quot;conclusions&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#conclusions&quot;&gt;#&lt;/a&gt; Conclusions&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
Within the area this document surveys (&lt;span class=&quot;smallcaps&quot;&gt;at&amp;t unix&lt;/span&gt;, the &lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt;, SunOS and '&lt;!--'--&gt;til-Y2K Solaris, pre-&lt;span class=&quot;smallcaps&quot;&gt;xpg&lt;/span&gt; &lt;span class=&quot;smallcaps&quot;&gt;svid&lt;/span&gt;, &lt;span class=&quot;smallcaps&quot;&gt;xpg&lt;/span&gt; and its descendants):
&lt;/p&gt;
&lt;ol&gt;
 &lt;li&gt;every &lt;code&gt;realloc(…, 0)&lt;/code&gt; ever behaved congruently with its &lt;code&gt;malloc&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;every &lt;em&gt;default&lt;/em&gt; &lt;code&gt;malloc(0)&lt;/code&gt; ever behaved as-if &lt;code&gt;malloc(n); n &gt; 0&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;this is documented. just not, like, as explicitly as you'&lt;!--'--&gt;d write it today,
     but there hadn't been a confounding implementation that did the opposite, so it never crossed anyone's mind probably&lt;/li&gt;
 &lt;li&gt;this was clearly understood as relied-on behaviour, as it'&lt;!--'--&gt;s retained across multiple re-implementations&lt;/li&gt;
 &lt;li&gt;the implementation that breaks this — SysVr2 &lt;code&gt;-lmalloc&lt;/code&gt; — also understands this since
     (a) it has to implement the opposite behaviour explicitly, and
     (b) includes a nod to its removal in malloc(3X)
         (the other behaviour this could be referring to is retained — &lt;code&gt;realloc&lt;/code&gt; can &lt;q&gt;deal with twits who reallocate free blocks&lt;/q&gt;)&lt;/li&gt;
 &lt;li&gt;this difference is not documented&lt;/li&gt;
 &lt;li&gt;the author needs to opt into this implementation explicitly (and is — ever so tacitly — warned about this) so this is basically fine, if sub-optimal&lt;/li&gt;
 &lt;li&gt;AT&amp;T issues the &lt;span class=&quot;smallcaps&quot;&gt;svid&lt;/span&gt; with the malloc(3X) extension presented as the universal baseline interface,
     with its undocumented features, incl. &lt;code&gt;malloc(0) = NULL&lt;/code&gt;, expressly defined as standard&lt;/li&gt;
 &lt;li&gt;this contrapuncts the implied documentation in every other implementation, which is now awfully weak&lt;/li&gt;
 &lt;li&gt;the &lt;span class=&quot;smallcaps&quot;&gt;xpg&lt;/span&gt; manages to miss this,
     but it'&lt;!--'--&gt;s now impossible to reconcile the behaviour mandated by the &lt;span class=&quot;smallcaps&quot;&gt;svid&lt;/span&gt; that &lt;em&gt;no-one was actually getting&lt;/em&gt;
     with the unstated behaviour experienced universally, except by saying &quot;yeah fuckin do whatever&quot; a decade later&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;conclusions&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#conclusions&quot;&gt;#&lt;/a&gt; Verdict &lt;del style=&quot;font-weight: normal;&quot;&gt;&lt;small&gt;&lt;i&gt;(this section is not normative)&lt;/i&gt;&lt;/small&gt;&lt;/del&gt;&lt;/h3&gt;
&lt;p class=&quot;continuing&quot;&gt;
not real.
&lt;/p&gt;
&lt;h2 id=&quot;appendixA&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#appendixA&quot;&gt;#&lt;/a&gt; Appendix — &lt;a href=&quot;//nvlpubs.nist.gov/nistpubs/Legacy/FIPS/fipspub160.pdf#page=170&quot;&gt;C89&lt;/a&gt; &lt;code&gt;realloc(…, 0)&lt;/code&gt;&lt;/h2&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
If &lt;del&gt;[…]&lt;/del&gt; the second argument is 0, then the call frees the memory pointed to by the first argument&lt;del&gt;[…]&lt;/del&gt;;
this specification is consistent with the policy of not allowing zero-size objects.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
but is &lt;em&gt;not&lt;/em&gt; consistent with any extant implementation, obviously.
&lt;cite class=&quot;path&quot;&gt;p. 156 (169)&lt;/cite&gt;
&lt;cite class=&quot;path&quot;&gt;p. 102 (342)&lt;/cite&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
This made &lt;code&gt;realloc(…, 0)&lt;/code&gt; unusable
(since this returns &lt;code&gt;NULL&lt;/code&gt; — an error —
 you'&lt;!--'--&gt;re gonna free the pointer (double-free) or use it with its original size (use-after-free),
 like with normal &lt;code&gt;realloc&lt;/code&gt;),
and is potentially-inconsistent with &lt;code&gt;malloc(0) ≠ 0&lt;/code&gt;,
so C23 &lt;a href=&quot;//www.open-std.org/jtc1/sc22/wg14/www/docs/n3301.pdf#subsubsection.7.24.4.8&quot;&gt;made it UB&lt;/a&gt;.
&lt;/a&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
The rationale paper for C89 and the path &lt;code&gt;realloc()&lt;/code&gt; takes through later standards is summarised
&lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/3&quot;&gt;here&lt;/a&gt;.
&lt;/a&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/017-malloc0.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/016-BSDi-qfont.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/016-BSDi-qfont.html" />
    <title> 016. BSDi qfont — blognꞌt — nabijaczleweli </title>
    <updated>2024-10-05T21:56:06+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;016. &lt;span class=&quot;qfont&quot;&gt;BSDi qfont&lt;/span&gt;&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Sat, 05 Oct 2024 21:56:06 +0200&lt;/span&gt;; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0023-BSDi-fonts/&quot;&gt;go wild&lt;/a&gt; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0023-BSDi-fonts/&quot;&gt;&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p class=&quot;indented&quot;&gt;
This in many ways mirrors &lt;a href=&quot;008-amix-fonts&quot;&gt;&lt;samp&gt;008. &lt;span class=&quot;topaz&quot;&gt;AMIX&lt;/span&gt; &lt;span class=&quot;sunfont&quot;&gt;fonts&lt;/span&gt;&lt;/samp&gt;&lt;/a&gt;,
sans la fonte du jour est qfont, which has been waiting for a similar length of time (since 2021-07) to get processed thusly.
&lt;/p&gt;
&lt;center&gt;
&lt;a href=&quot;/content/assets/blogn_t/016.02-best.png&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Terminal screenshot with qfont's all 177 glyphs displayed alongside the Unicode characters they represent in 2 columns&quot; src=&quot;/content/assets/blogn_t/016.02-best.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
The greatest hits:
an overgrown &lt;samp&gt;@&lt;/samp&gt;,
asymmetric &lt;samp&gt;/\&lt;/samp&gt;,
an offensive &lt;samp&gt;&amp;&lt;/samp&gt; that'&lt;!--'--&gt;s clearly just an 8 with a moustache,
but an &lt;samp&gt;8&lt;/samp&gt; that'&lt;!--'--&gt;s nearing double-width,
and a heavy set of punctuation (the first one is a &lt;samp&gt;`&lt;/samp&gt;, the second an &lt;samp&gt;'&lt;!--'--&gt;&lt;/samp&gt;).
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/016.03-allchars-freetype.png&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Terminal screenshot with qfont's all 177 glyphs displayed alongside the Unicode characters they represent in 2 columns&quot; src=&quot;/content/assets/blogn_t/016.03-allchars-freetype.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
Full demo, as rendered by libfreetype 2.12.1+dfsg-5+deb12u3/libfontconfig 2.14.1-4.
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/016.04-winword.png&quot;&gt;&lt;img class=&quot;continued dark-invert&quot; alt=&quot;Microsoft Word screenshot with lowercase vowels and uppercase consonants&quot; src=&quot;/content/assets/blogn_t/016.04-winword.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
As rendered by &lt;tt&gt;WINWORD.EXE&lt;/tt&gt;.
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/016.05-photoshop.png&quot;&gt;&lt;img class=&quot;continued&quot; alt='Block of all characters in qfont, surrounded in an ellipse by /*	BSDI $Id: qfont.c,v 1.2 1994/02/06 20:14:06 karels Exp $	*/    derived from:  &quot;@(#)qfont.c	6.2	ULTRIX	2/4/88&quot;' src=&quot;/content/assets/blogn_t/016.05-photoshop.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
As rendered by Photoshop CS6 (AA disabled).
&lt;/p&gt;
&lt;p class=&quot;qfont continued&quot; style=&quot;font-size: 3em; overflow-wrap: anywhere;&quot;&gt;
&amp;nbsp;!&quot;#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?&lt;br /&gt; &lt;!--&quot;--&gt;
@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_&lt;br /&gt;
`abcdefghijklmnopqrstuvwxyz{|}~&amp;nbsp;&lt;br /&gt;
¡¢£⸮¥§¤©ª«°±²³µ¶·¹º»¼½¿&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;br /&gt;
ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÑÒÓÔÕÖŒØÙÚÛÜÝß&amp;nbsp;&amp;nbsp;&lt;br /&gt;
àáâãäåæçèéêëìíîïñòóôõöœøùúûüý&amp;nbsp;&amp;nbsp;&amp;nbsp;
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
As rendered by your browser, hopefully.
&lt;/p&gt;
&lt;/center&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The procedure can be found &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/bsdi.fonts&quot;&gt;here&lt;/a&gt;,
and is adapted trivially from the &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/amix.fonts&quot;&gt;&lt;span class=&quot;sunfont&quot;&gt;AMIX&lt;/span&gt; &lt;span class=&quot;topaz&quot;&gt;one&lt;/span&gt;&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Indeed, much more trivially because &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/bsdi.fonts/tree/trunk/item/BSDI-1.1-qfont.c&quot;&gt;the font is in C&lt;/a&gt;, so you can just link to it.
This C file bears four kilobytes of licence headers (even though bitmap fonts are not subject to copyright protection),
and it turns out to be retained in NetBSD as
&lt;a href=&quot;http://cvsweb.netbsd.org/bsdweb.cgi/src/sys/dev/qbus/qfont.c?rev=1.8&amp;content-type=text/x-cvsweb-markup&quot;&gt;&lt;tt&gt;src/sys/dev/qbus/qfont.c&lt;/tt&gt;&lt;/a&gt;
(but stamped BSD-3-Clause).
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
qfont covers 7-bit &lt;span class=&quot;smallcaps&quot;&gt;ascii&lt;/span&gt; and most of ISO-8859-1 (with some substitutions).
Like previously, it'&lt;!--'--&gt;s an art font unsuitable for general use.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The distribution contains:
&lt;/p&gt;
&lt;center&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0023-BSDi-fonts/qfont-montage.png&quot;&gt;&lt;img class=&quot;continuing&quot; src=&quot;//lfs.nabijaczleweli.xyz/0023-BSDi-fonts/qfont-montage.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
qfont, a 177-character monospace 8x15px font, with baseline at 12px.
(&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0023-BSDi-fonts/qfont-montage.svg&quot;&gt;SVG&lt;/a&gt;)
&lt;/p&gt;
&lt;/center&gt;
&lt;p class=&quot;continued&quot;&gt;
The font includes:
&lt;/p&gt;
&lt;ul class=&quot;continuation&quot;&gt;
&lt;li&gt;Bitmap strikes at integer increments of [1, 16]x their original size, embedded in their respective OTFs.&lt;/li&gt;
&lt;li&gt;BDFs of all of the above are also exported, if of dubious usefulness.&lt;/li&gt;
&lt;li&gt;The original FontForge &lt;tt&gt;.sfd&lt;/tt&gt; files are also included, for export to other formats.&lt;/li&gt;
&lt;li&gt;Images of the bitmap strikes at all sizes (in PBM P1 format, understood globally by all tooling).&lt;/li&gt;
&lt;li&gt;A montage of all the characters in the fonts (from 4x scale), and an SVG tracing thereof.&lt;/li&gt;
&lt;li&gt;FontForge demo PDFs.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
Go wild: &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0023-BSDi-fonts/&quot;&gt;https://lfs.nabijaczleweli.xyz/0023-BSDi-fonts/&lt;/a&gt;.
Built on bookworm.
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/016-BSDi-qfont.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/015-ranlib.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/015-ranlib.html" />
    <title> 015. where da lib runnin — blognꞌt — nabijaczleweli </title>
    <updated>2024-10-01T11:09:48+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;015. where da lib runnin&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Tue, 01 Oct 2024 11:09:48 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
If you're anything like me (and let us hope this is not the case) you've come across &lt;code&gt;ar crs&lt;/code&gt;, or, for that matter, ar(1) saying
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;dl class=&quot;bltag&quot;&gt;
  &lt;dt&gt;&lt;samp&gt;s&lt;/samp&gt;&lt;/dt&gt;
  &lt;dd&gt;Write an object-file index into the archive &lt;del&gt;[…]&lt;/del&gt;. Running &lt;samp&gt;ar s&lt;/samp&gt; on an archive is equivalent to running &lt;samp&gt;ranlib&lt;/samp&gt; on it.&lt;/dd&gt;
 &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;while ranlib(1) (&lt;q&gt;generate an index to an archive&lt;/q&gt;) says&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;samp&gt;ranlib&lt;/samp&gt; generates an index to the contents of an archive &lt;del&gt;[…]&lt;/del&gt;.
 The index lists each symbol defined by a member of an archive that is a relocatable object file.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;comparing llvm-ar(1)&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;dl class=&quot;bltag&quot;&gt;
  &lt;dt&gt;&lt;samp&gt;s&lt;/samp&gt;&lt;/dt&gt;
  &lt;dd&gt;This modifier requests that an archive index (or symbol table) be added to the &lt;var&gt;archive&lt;/var&gt;, as if using ranlib. &lt;del&gt;Content description follows.&lt;/del&gt;&lt;/dd&gt;
 &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
and llvm-ranlib(1) (&lt;q&gt;manual page for llvm-ranlib 19&lt;/q&gt;, the manual looks like untouched help2man-equivalent output)
OVERVIEWs it exclusively as &lt;q&gt;Generate an index for archives&lt;/q&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Beside the obvious question (the linker can already read archives and read the symbols out of objects, so why would the archive itself duplicate this),
these are all circular, &lt;q&gt;running &lt;samp&gt;ranlib&lt;/samp&gt; is completely equivalent to executing &lt;samp&gt;ar -s&lt;/samp&gt;&lt;/q&gt;, and &lt;samp&gt;s&lt;/samp&gt; is the default.
Well, &lt;samp&gt;s&lt;/samp&gt; is an XSI extension that &lt;em&gt;just&lt;/em&gt; rebuilds the symbol table,
because POSIX.1-2024 (in text that dates back to the X/Open Portability Guide Issue 3 (&quot;&lt;!--&quot;--&gt;&lt;span class=&quot;smallcaps&quot;&gt;xpg3&lt;/span&gt;&lt;!--&quot;--&gt;&quot;) (1988), inherited directly from the System V Interface Definition (&quot;&lt;!--&quot;--&gt;&lt;span class=&quot;smallcaps&quot;&gt;svid&lt;/span&gt;&lt;!--&quot;--&gt;&quot; (1985))) says
&lt;/p&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;
When there is at least one object file &lt;del&gt;[…]&lt;/del&gt; in the archive, an archive symbol table shall be created &lt;del&gt;[…]&lt;/del&gt;.
Whenever the &lt;samp&gt;ar&lt;/samp&gt; utility is used to create or update &lt;del&gt;[…]&lt;/del&gt; an archive, the symbol table shall be rebuilt.
&lt;/blockquote&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This is all really clear-cut and agrees with our shared personal experience of having constructed many archives, and not having &lt;code&gt;ranlib&lt;/code&gt;bed them, ever.
Why, then, does the &lt;cite&gt;&lt;a href=&quot;//www.gnu.org/software/automake/manual/html_node/Optional.html#index-AC_005fPROG_005fRANLIB&quot;&gt;GNU Automake manual&lt;/a&gt;&lt;/cite&gt; say
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;dl class=&quot;bltag&quot;&gt;
  &lt;dt&gt;&lt;samp&gt;AC_PROG_RANLIB&lt;/samp&gt;&lt;/dt&gt;
  &lt;dd&gt;This is required if any libraries are built in the package.&lt;/dd&gt;
 &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
And when was this last true, if ever?
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
As expected from the &lt;span class=&quot;smallcaps&quot;&gt;svid&lt;/span&gt; wording provenance, versions 1-&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Dennis_v6/v6doc.tar.gz&quot;&gt;6&lt;/a&gt; &lt;span class=&quot;smallcaps&quot;&gt;at&amp;t unix&lt;/span&gt;, &lt;span class=&quot;smallcaps&quot;&gt;at&amp;t&lt;/span&gt; System III &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt;, and all releases of &lt;span class=&quot;smallcaps&quot;&gt;at&amp;t&lt;/span&gt; System V &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt;
ship without &lt;samp&gt;ranlib&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Indeed, the &lt;span class=&quot;smallcaps&quot;&gt;svid&lt;/span&gt; wording is replicated from
&lt;a href=&quot;//bitsavers.org/pdf/att/unix/System_V_Release_1/301-905_UNIX_System_V_Release_1_Users_Manual_Jan83.pdf&quot;&gt;&lt;cite&gt;&lt;span class=&quot;smallcaps&quot;&gt;Unix&lt;/span&gt; System User'&lt;!--'--&gt;s Manual, System V, January 1983&lt;/cite&gt;&lt;/a&gt; (SysVr1), in &lt;em&gt;both&lt;/em&gt; ar(1)s,
but is not in
&lt;a href=&quot;//archive.org/details/bitsavers_attunixSysalRelease3Jun80_33886798&quot;&gt;&lt;cite&gt;&lt;span class=&quot;smallcaps&quot;&gt;Unix&lt;/span&gt; User'&lt;!--'--&gt;s Manual, Release 3.0, June 1980&lt;/cite&gt;&lt;/a&gt; (SysIII).
This also corresponds to the ld(1) wording change from
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
If any argument is a library, it is searched exactly once at the point it is
encountered in the argument list. Only those routines defining an unresolved
external reference are loaded. If a routine from a library references
another routine in the library, the referenced routine must appear after the
referencing routine in the library. Thus the order of programs within
libraries is important.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;(&lt;cite&gt;ibid.&lt;/cite&gt;), and hence lorder(1) and tsort(1), to
&lt;blockquote class=&quot;continuing&quot;&gt;
&lt;del&gt;[…]&lt;/del&gt; are loaded. The library (archive) symbol table (see &lt;i&gt;ar&lt;/i&gt;(4) is
searched sequentially with as many passes as are necessary to resolve external
references which can be satisfied by library members. Thus, the ordering of
library members is unimportant.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
(&lt;cite&gt;SysVr1&lt;/cite&gt;), but only in ld(1) for non-&lt;span class=&quot;smallcaps&quot;&gt;pdp-11&lt;/span&gt;
(lorder(1) is further declared unneeded, except on the &lt;span class=&quot;smallcaps&quot;&gt;pdp-11&lt;/span&gt;).
Later releases
(&lt;a href=&quot;//bitsavers.org/pdf/att/unix/System_V_Release_2/UNIX_Programmers_Manual_Vol_1_Commands_and_Utilities_1986.pdf&quot;&gt;&lt;cite&gt;UNIX programmer'&lt;!--'--&gt;s manual, 1986&lt;/cite&gt;&lt;/a&gt; (SysVr2))
drop the &lt;span class=&quot;smallcaps&quot;&gt;pdp-11&lt;/span&gt; and its specific ld(1)/ar(1); the lorder(1) mention is downgraded to &lt;!--&quot;--&gt;&quot;except onsome&lt;del&gt;(sic)&lt;/del&gt; computers&quot;&lt;!--&quot;--&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Conversely, Version 7 &lt;span class=&quot;smallcaps&quot;&gt;at&amp;t unix&lt;/span&gt; contains ranlib(1) (&lt;q&gt;convert archives to random libraries&lt;/q&gt;, which explains the bizarre name), which
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
converts each &lt;var&gt;archive&lt;/var&gt; to a form which can be loaded more rapidly by the loader, by adding a table of contents named &lt;strong&gt;__.SYMDEF&lt;/strong&gt; to the beginning of the archive.
It uses &lt;i&gt;ar&lt;/i&gt;(1) to reconstruct the archive, &lt;del&gt;[…]&lt;/del&gt;.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
(&lt;a href=&quot;//www.tuhs.org/Archive/Distributions/Research/Henry_Spencer_v7/v7.tar.gz&quot;&gt;&lt;cite&gt;UNIX&lt;sup&gt;TM&lt;/sup&gt; TIME-SHARING SYSTEM: UNIX PROGRAMMER'&lt;!--'--&gt;S MANUAL, Seventh Edition, January, 1979&lt;/cite&gt;&lt;/a&gt;),
and the loader instead growing a midpoint of both of the aforementioned:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
&lt;del&gt;[…]&lt;/del&gt; If a routine from a library references
another routine in the library, and the library has not been processed by &lt;i&gt;ranlib&lt;/i&gt;(1),
the referenced routine must appear after the referencing routine in the library.
Thus the order of programs within libraries may be important.
If the first member of a library is named `__.SYMDEF'&lt;!--'--&gt;,
then it is understood to be a dictionary for the library such as produced by ranlib;
the dictionary is searched iteratively to satisfy as many references as possible.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
(&lt;cite&gt;ibid.&lt;/cite&gt;).
ranlib(1) &lt;strong&gt;BUGS&lt;/strong&gt; indict further:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
Because generation &lt;del&gt;[…]&lt;/del&gt; and randomization &lt;del&gt;[…]&lt;/del&gt; are separate, phase errors are possible.
The loader &lt;i&gt;ld&lt;/i&gt; warns when the modification date of a library is more recent than the creation of its dictionary;
 but this means you get the warning even if you only copy the library.
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
any system so utterly limp as to warrant more &lt;strong&gt;BUGS&lt;/strong&gt; than &lt;strong&gt;DESCRIPTION&lt;/strong&gt;
is truly worthy of its stench still lingering 45 years on.
One has to wonder why &lt;samp&gt;ar&lt;/samp&gt; didn'&lt;!--'--&gt;t, at worst, finish with &lt;code class=&quot;nowrap&quot;&gt;exec(&quot;ranlib&quot;, &lt;var&gt;arc&lt;/var&gt;, 0)&lt;/code&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;cite&gt;
 &lt;a href=&quot;//www.mckusick.com/csrg/&quot;&gt;The &lt;span class=&quot;smallcaps&quot;&gt;csrg&lt;/span&gt; Archives&lt;/a&gt;,
 &lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_1_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 1&lt;/span&gt;: Berkeley Systems 1978-1986&lt;/a&gt;,
 &lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_2_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 2&lt;/span&gt;: Berkeley Systems 1987-1993&lt;/a&gt;,
 &lt;a href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_3_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 3&lt;/span&gt;: Final Berkeley Releases&lt;/a&gt;,
 and&amp;nbsp;&lt;a
    href=&quot;//archive.org/details/The_CSRG_Archives_CD-ROM_4_August_1998_Marshall_Kirk_McKusick&quot;&gt;&lt;span class=&quot;nowrap&quot;&gt;CD-ROM 4&lt;/span&gt;: Final /usr/src including SCCS files&lt;/a&gt;
&lt;/cite&gt;
tell us that
&lt;span class=&quot;smallcaps&quot;&gt;3bsd&lt;/span&gt; (December, 1979) is not afflicted by this because it doesn'&lt;!--'--&gt;t ship ranlib(1) at all
(owing no doubt to shipping a novel &lt;span class=&quot;smallcaps&quot;&gt;vax&lt;/span&gt;-specific ld(1) with no support for a symbol table).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;span class=&quot;smallcaps&quot;&gt;4bsd&lt;/span&gt; (November, 1980) includes Version 7 &lt;span class=&quot;smallcaps&quot;&gt;at&amp;t unix&lt;/span&gt; ranlib(1) (and a very related implementation),
and the ld(1) blurb is similarly related, except the first member &lt;q&gt;should&lt;/q&gt;.
lorder(1) is briefly expanded to note that
&lt;q&gt;The need for lorder may be vitiated by use of &lt;i&gt;ranlib&lt;/i&gt;(1), which converts an ordered archive into a randomly accessed library.&lt;/q&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;span class=&quot;smallcaps&quot;&gt;4.3bsd&lt;/span&gt; (April, 1986) calls ranlib(1) &lt;q&gt;preprocess archives for efficient linking&lt;/q&gt; instead
and adds &lt;samp&gt;-t&lt;/samp&gt; (matching &lt;samp&gt;make -t&lt;/samp&gt;) to update the timestamp of the symbol table only.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Archive targets in &lt;span class=&quot;smallcaps&quot;&gt;4.3bsd&lt;/span&gt;-Reno (June, 1990) &lt;samp&gt;make&lt;/samp&gt; are rebuilt based on the timestamp in the symbol table, not that of the archive itself
(archives without symbol tables are always rebuilt).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;span class=&quot;smallcaps&quot;&gt;4.4bsd&lt;/span&gt;-Lite (June, 1993)'&lt;!--'--&gt;s ranlib(1) is &lt;q&gt;table-of-contents for archive libraries&lt;/q&gt;,
and in spite of no implementation changes, ar(1) &lt;q&gt;is expected to offer a superset of the &lt;span class=&quot;smallcaps&quot;&gt;posix&lt;/span&gt; 1003.2 functionality&lt;/q&gt;.
This is because
&lt;cite&gt;&lt;a href=&quot;//rawcdn.githack.com/oldlinux-web/oldlinux-files/HEAD/Ref-docs/POSIX/all.pdf?page=717&quot;&gt;IEEE P1003.2 Draft 11.2&lt;/a&gt; − September 1991,
      &lt;a href=&quot;//ftp.funet.fi/index/doc/posix/p1003.2/d11.2/6.1&quot;&gt;Section 6: Software Development Utilities Option&lt;/a&gt;&lt;/cite&gt;
doesn'&lt;!--'--&gt;t specify &lt;samp&gt;as -s&lt;/samp&gt;, just requiring that
&lt;q&gt;When an archive consists entirely of valid object files,
   the implementation shall format the archive so that it is usable as a library for link editing &lt;del&gt;[…]&lt;/del&gt;.&lt;/q&gt;,
rationalised because
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
&lt;p class=&quot;continuing&quot;&gt;
historical implementations maintain a symbol table to speed searches,
particularly when the archive contains object files. However, future implementors
may or may not use a symbol table, and the &lt;samp&gt;-s&lt;/samp&gt; option was removed from this
clause to permit implementors freedom of choice. &lt;del&gt;[…]&lt;/del&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
System V maintain&lt;del&gt;s&lt;/del&gt; the symbol table without
&lt;del&gt;[…]&lt;/del&gt; &lt;samp&gt;-s&lt;/samp&gt;, so adding &lt;samp&gt;-s&lt;/samp&gt; (even if it were worded as allowing a no-op)
would essentially require all portable applications to use it in all invocations
involving libraries.
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
And being fully &lt;q&gt;usable as a library for link editing&lt;/q&gt; is ensured for libraries without symbol tables by this system just shipping GNU ld,
which understands symbol tables, but can read symbols out of objects just as well.
Naturally, the matter of make(1) remains, and it still always considers untabled archives outdated, but it doesn'&lt;!--'--&gt;t even try to claim &lt;span class=&quot;smallcaps&quot;&gt;posix&lt;/span&gt; compatibility,
and it'&lt;!--'--&gt;s basically a cosmetic issue.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Net&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt; 1.1 (&lt;cite&gt;&lt;a href=&quot;//cvsweb.netbsd.org/bsdweb.cgi/src/usr.bin/make/arch.c#rev1.8&quot;&gt;&lt;tt&gt;make/arch.c&lt;/tt&gt; revision 1.8 (1995-01-11)&lt;/a&gt;&lt;/cite&gt;)
echoes this, saying that
&lt;q&gt;we should not bother with the TOC at all since this is used by 'ar' rules that affect the data contents of the archive, not by ranlib rules, which affect the TOC.&lt;/q&gt;,
except that no-thing has ever used separate &lt;samp&gt;ar&lt;/samp&gt;/&lt;samp&gt;ranlib&lt;/samp&gt; rules,
and every make-file in every distribution heretofore (and hence),
if it runs &lt;samp&gt;ranlib&lt;/samp&gt; at all, does so just after &lt;samp&gt;ar&lt;/samp&gt; anyway.
Indeed, the application of the
&lt;a href=&quot;//ro.ws.co.ls/tsort.pdf?page=2&quot;&gt;lorder(1)-recommended&lt;/a&gt; &lt;code&gt;ar cr library `lorder *.o | tsort`&lt;/code&gt;
stanza is nigh-universal for library archives &lt;em&gt;anyway&lt;/em&gt;, even post-&lt;samp&gt;ranlib&lt;/samp&gt;.
This version of the file is included in &lt;span class=&quot;smallcaps&quot;&gt;4.4bsd&lt;/span&gt;-Lite2 (April, 1994 (actually 1995-06))
as &lt;tt&gt;make/arch.c&lt;/tt&gt; revision 8.3 (95/04/28, christos &lt;q&gt;Updated to the latest version from the Net&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt; source&lt;/q&gt;).
&lt;/p&gt;
&lt;p class=&quot;continued indented&quot;&gt;
Thus, you &lt;em&gt;realistically&lt;/em&gt; never really needed to run &lt;samp&gt;ranlib&lt;/samp&gt;, since you were building archives with lorder(1) anyway.
But if you weren'&lt;!--'--&gt;t, then the efficacious range is [1979-01, 1995-06).
&lt;/p&gt;
&lt;p class=&quot;continuing indented&quot;&gt;
The unfortunate virulence of this is reflected even contemporaneously
— &lt;a href=&quot;//fosstodon.org/@alanc/113182473295182189&quot;&gt;upstream reports&lt;/a&gt;,
  and I &lt;a href=&quot;//winworldpc.com/product/sun-solaris/2x&quot;&gt;can&lt;/a&gt; &lt;a href=&quot;//vetusware.com/download/Solaris%202.5%20Source%20Code/?id=11544&quot;&gt;validate&lt;/a&gt; —
that in the SunOS 4→5 1992 transition (&lt;span class=&quot;smallcaps&quot;&gt;4.3bsd&lt;/span&gt;→SysV rebase) &lt;samp&gt;ranlib&lt;/samp&gt; was naturally lost,
then re-invented as a no-op in 2.5 for compat.
This &lt;a href=&quot;//github.com/illumos/illumos-gate/blame/master/usr/src/cmd/sgs/ranlib/ranlib.sh&quot;&gt;remains&lt;/a&gt; in the illumos gate.
&lt;/p&gt;
&lt;p class=&quot;continuation indented&quot;&gt;
So, last even remotely desirable 30 years ago, defined as extraneous by all standards,
and also &lt;span class=&quot;smallcaps&quot;&gt;4.4bsd&lt;/span&gt;-Lite2 very clearly includes Net&lt;span class=&quot;smallcaps&quot;&gt;bsd&lt;/span&gt; code but no &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; genealogical chart shows this?
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/015-ranlib.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/recipes/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/recipes/" />
    <title> Recipes — nabijaczleweli </title>
    <updated>2024-08-07T19:28:41+02:00</updated>
    <published>2023-05-03T23:16:48+02:00</published>
    <content type="html">
&lt;script&gt;
window.addEventListener(&quot;DOMContentLoaded&quot;, function() {
 Array.from(document.getElementsByTagName(&quot;button&quot;)).forEach(function(butt) {
  var all = Array.from(document.getElementsByTagName(butt.attributes[&quot;toggle-tag&quot;].value));
  var cur = true;
  butt.addEventListener(&quot;click&quot;, function() {
   cur = !cur;
   all.forEach(butt.attributes[&quot;toggle-tag&quot;].value == &quot;details&quot; ? function(el) { el.open = cur; } : function(el) { el.hidden = !cur; });
  });
 });
});
&lt;/script&gt;
&lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;..&quot;&gt;↩&lt;/a&gt; My answer to the replication crisis &lt;a class=&quot;go-back-link right&quot; href=&quot;..&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt;
&lt;span class=&quot;roboto&quot;&gt;
&lt;p&gt;
 Latest replication: &lt;a href=&quot;https://101010.pl/@nabijaczleweli/112819434215946460&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-07-20&lt;/span&gt;&lt;/a&gt;.
 &lt;button toggle-tag=&quot;details&quot;&gt;Toggle all&lt;/button&gt;
 &lt;button toggle-tag=&quot;center&quot; &gt;Toggle images&lt;/button&gt;
&lt;/p&gt;
&lt;article&gt;
&lt;/article&gt; 
 &lt;article id=&quot;round-bean-bun-set&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111953094782822407&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/953/094/410/776/572/original/ab63fb8e79a17fef.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/111953094782822407&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/953/094/431/861/949/original/d4e24052d3f88f80.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#round-bean-bun-set&quot;&gt;#&lt;/a&gt;Round co-steamed bean buns&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/1dRqVUL4hhs&quot;&gt;Cook the bread without an oven? Soft and fluffy!
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;不用烤箱，教你在家做面包，简单一蒸，蓬松宣软还拉丝【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111953094782822407&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-02-17&lt;/span&gt;&lt;/a&gt;:
 &lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60g&lt;/span&gt; egg, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;210g&lt;/span&gt; of milk, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2g&lt;/span&gt; of yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10g&lt;/span&gt; of sugar, stir to dissolve&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;350g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2g&lt;/span&gt; of salt, flock&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20g&lt;/span&gt; of butter (or corn oil), knead&lt;/li&gt;
  &lt;li&gt;knead radially roll-wise, cylindrise, divide &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt;-wise&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;knead radially, ballify&lt;/li&gt;
    &lt;li&gt;flatten, thinner on the edges&lt;/li&gt;
    &lt;li&gt;deploy bean paste&lt;/li&gt;
    &lt;li&gt;close like a bun&lt;/li&gt;
    &lt;li&gt;flatten&lt;/li&gt;
    &lt;li&gt;roll out long&lt;/li&gt;
    &lt;li&gt;cut through the top layer through most of the minor dimension, repeat across the major dimension&lt;/li&gt;
    &lt;li&gt;invert&lt;/li&gt;
    &lt;li&gt;fold, preserving the minor dimension, up to like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;⅔&lt;/span&gt;rds&lt;/li&gt;
    &lt;li&gt;fold the other flap, preserving the minor dimension, up to the edge&lt;/li&gt;
    &lt;li&gt;roll out the sides that haven'&lt;!--'--&gt;t moved&lt;/li&gt;
    &lt;li&gt;fold both centrally&lt;/li&gt;
    &lt;li&gt;invert&lt;/li&gt;
    &lt;li&gt;deploy into papered cylindrical mould (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7&lt;/span&gt; radially, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; central) – mine was a tad small at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;⌀210&lt;/span&gt;&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;they sleep over warm water in the steamer (appx. &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30-40min&lt;/span&gt;)&lt;/li&gt;
  &lt;li&gt;boil the water, keep steaming for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;25min&lt;/span&gt;, keep shut warm for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5min&lt;/span&gt; thereafter&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;article&gt;
&lt;/article&gt; 
 &lt;article id=&quot;onion-long-guy&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111903329023457077&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/903/281/696/588/261/original/45af730372481292.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/111903329023457077&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/903/281/884/095/112/original/26f03bb2a061d5b0.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#onion-long-guy&quot;&gt;#&lt;/a&gt;Long onion bread&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/btFJfs-ZBiU&quot;&gt;3-minute breakfast cake, 1 bowl of flour and 1 bowl of water, soft and fluffy
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;3分钟早餐饼，1碗面粉1碗水，宣软蓬松不油不腻，孩子一口一个真好吃【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111903329023457077&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-02-09&lt;/span&gt;&lt;/a&gt;:
 &lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3&lt;/span&gt; eggs, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3g&lt;/span&gt; of salt, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3g&lt;/span&gt; of yeast – she sizes the eggs as &quot;wholesale&quot; but my wholesale-sized eggs were kinda small, use normal ones&lt;/li&gt;
  &lt;li&gt;a handful of chives, mix – not in season rn, but a bigger half of a large red onion instead was very good&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;300g&lt;/span&gt; of flour, knead&lt;/li&gt;
  &lt;li&gt;he sleeps&lt;/li&gt;
  &lt;li&gt;knead to de-gas, roll out rectangularly to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5mm&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;cut into thirds&lt;/li&gt;
  &lt;li&gt;for each third, cut into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1cm&lt;/span&gt;-wide strips&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;he sleeps covered for 15min&lt;/li&gt;
    &lt;li&gt;deploy on dry hot leccy pan, close the pan&lt;/li&gt;
    &lt;li&gt;flop when the bottom is golden-brown&lt;/li&gt;
    &lt;li&gt;bake for another &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2min&lt;/span&gt; for even colour on either side&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;article&gt;
&lt;/article&gt; 
 &lt;article id=&quot;emil-vánočka&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111665995564384100&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/665/984/649/011/860/original/54a12b070a2f3e3a.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/111665995564384100&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/665/985/294/509/492/original/0cb5cd15f13295ad.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#emil-vánočka&quot;&gt;#&lt;/a&gt;&lt;a href=&quot;//101010.pl/@the_art_of_giving_up@mastodon.social/111637997219976292&quot;&gt;Emil'&lt;!--'--&gt;s vánočka&lt;/a&gt;&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//www.pottenpannen.cz/recepty-a-rady/adventni-vyzva-prava-ceska-vanocka-podle-josefa-marsalka/&quot;&gt;Adventní výzva – Pravá česká vánočka podle Josefa Maršálka&lt;/a&gt;,
  by Potten &amp; Pannen - Staněk,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111665100080724986&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-12-29&lt;/span&gt;&lt;/a&gt;:
 &lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;dissolve &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20g&lt;/span&gt; of live yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10g&lt;/span&gt; of vanilla sugar, and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; of flour in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;250g&lt;/span&gt; of milk and leave for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1h&lt;/span&gt; covered with a rag,
      this will be gloop Ш –
      I don'&lt;!--'--&gt;t stock live yeast so dry yeast for me, I warmed the milk to like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt;, and it definitely started to leave the bowl,
      so I'&lt;!--'--&gt;d say prep the rest of the from step 2 and put the bowl on top to explode; definitely no rag&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;400g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; of sugar, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30g&lt;/span&gt; (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3-4&lt;/span&gt;) of egg yolks, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5g&lt;/span&gt; of salt, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2g&lt;/span&gt; of nutmeg, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1g&lt;/span&gt; of milled anise,
      the skin of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; lemon, mix – I was fresh out of lemons, so the skin of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; mandarins for me&lt;/li&gt;
  &lt;li&gt;mix in gloop Ш, knead dough to be smooth and not sticky&lt;/li&gt;
  &lt;li&gt;add in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;150g&lt;/span&gt; of butter and continue kneading –
      they recommend machine kneading, and it'&lt;!--'--&gt;s difficult to disagree; this definitely needs a tremendous amount of kneading before and after the butter,
      much more than I was able to give it at the time&lt;/li&gt;
  &lt;li&gt;when it stops sticking and is resilient but elastic, lightly knead in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; of golden raisins – cranberries for me&lt;/li&gt;
  &lt;li&gt;he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~1h&lt;/span&gt; under a rag until tripled in size – this may be because it was underkneaded but this rise didn'&lt;!--'--&gt;t do much for me&lt;/li&gt;
  &lt;li&gt;roll out into strips and weave a vánočka onto a baking tray like you usually do, Josef recommends knitting from six strands – 🙄&lt;/li&gt;
  &lt;li&gt;leave him to sleep once more to rise well – again, no rise for me&lt;/li&gt;
  &lt;li&gt;Form the nut icing by mixing:
     &lt;ol&gt;
       &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3-4&lt;/span&gt; eggs) of whites&lt;/li&gt;
       &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60g&lt;/span&gt; of powder sugar&lt;/li&gt;
       &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60g&lt;/span&gt; of milled hazelnuts –
           apparently these are available commercially, but I just pounded some full ones;
           this meant it never really formed a &quot;paste with consistency&quot; but close enough&lt;/li&gt;
       &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1g&lt;/span&gt; of milled cinnamon&lt;/li&gt;
     &lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;brush it with egg and the nut icing, then sprinkle cut almonds&lt;/li&gt;
  &lt;li&gt;start baking at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200°&lt;/span&gt;, but bake at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;160°&lt;/span&gt; for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30min&lt;/span&gt;, validate by prodding with a stick – mine needed &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5min&lt;/span&gt; more&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;article&gt;
&lt;/article&gt; &lt;article id=&quot;andy-vánočka&quot;&gt; &lt;center class=&quot;grid-by-each continued&quot;&gt; &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111647881958561845&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/647/880/463/356/238/original/7938eaee2ded220a.png&quot; /&gt;&lt;/a&gt; &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#andy-vánočka&quot;&gt;#&lt;/a&gt;Andy'&lt;!--'--&gt;s vánočka&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;!-- https://discord.com/channels/145079846832308224/166565886998609920/1188939034597281842 --&gt;
  Guest recipe from Andy's wife's grandma,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111647542784996947&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-12-26&lt;/span&gt;&lt;/a&gt;:
 &lt;/p&gt;
 &lt;ul class=&quot;continuing&quot;&gt;
  &lt;li&gt;500g flour (ideally low protein content, like 8-9g)&lt;/li&gt;
  &lt;li&gt;120g butter&lt;/li&gt;
  &lt;li&gt;120g crystal or caster sugar&lt;/li&gt;
  &lt;li&gt;3 average egg yolks or 4 small egg yolks&lt;/li&gt;
  &lt;li&gt;30g fresh yeast&lt;/li&gt;
  &lt;li&gt;5g salt&lt;/li&gt;
  &lt;li&gt;250g milk&lt;/li&gt;
  &lt;li&gt;1 lemon zest (or actually as much as you like)&lt;/li&gt;
  &lt;li&gt;30g almonds (or actually as much as you like)&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p class=&quot;continuation&quot;&gt;
  Make the dough by mixing all the ingredients, then let it rise in a bowl for like 60-90 mins. Then roll 9 equally long pieces and form the vianočka. Paint with egg whites, let it rise for another 30 mins or so, then bake at 180C for about 45 mins
 &lt;/p&gt;
 &lt;p&gt;
  I don'&lt;!--'--&gt;t stock fresh yeast, and used dry instead; forgot to brush with egg.
 &lt;/p&gt;
&lt;/details&gt;
&lt;article&gt;
&lt;/article&gt; &lt;article id=&quot;challah&quot;&gt; &lt;center class=&quot;grid-by-each continued&quot;&gt; &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111631778152035657&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/631/775/273/497/339/original/cc67a40e25cad667.jpeg&quot; /&gt;&lt;/a&gt; &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#challah&quot;&gt;#&lt;/a&gt;Chałka (strucla (chałka))&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//stronakuchni.pl/klasyczna-chalka-drozdzowa-na-podwieczorek-tradycyjny-przepis-na-rumiany-wypiek-posyp-ja-makiem-jak-za-dawnych-lat/ar/c17-17861293&quot;&gt;Klasyczna chałka drożdżowa na podwieczorek. Tradycyjny przepis na rumiany wypiek. Posyp ją makiem jak za dawnych lat&lt;/a&gt;
  by Strona Kuchni,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111631778152035657&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-12-23&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;prepare a urine sample yesterday by having applied three saffron threads to a spoon of white rum – I don'&lt;!--'--&gt;t think the spirit matters, I had gin to hand&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15g&lt;/span&gt; of fresh yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;90g&lt;/span&gt; of like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt; water, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20g&lt;/span&gt; of sugar, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; egg, stir, leave alone for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;add &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;25g&lt;/span&gt; of warm butter and mix it in – to… water? I know this is a click-farm and this was probably poorly copied but this is baffling&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;½&lt;/span&gt; of a small spoon of salt, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;250g&lt;/span&gt; of flour, knead mostly, add the urine sample, knead fully, he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;knead short, he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1h&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;knead to accrue, divide into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5&lt;/span&gt; guys, they sleep for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5-7min&lt;/span&gt; under a rag&lt;/li&gt;
  &lt;li&gt;cylindrise each guy &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;18-20cm&lt;/span&gt; long, plait them together, they sleep for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1h&lt;/span&gt; under a rag – that would have been exceedingly short for me&lt;/li&gt;
  &lt;li&gt;brush with yolk, sprinkle poppy, bake at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;180°&lt;/span&gt; for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;25min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;cool on rack&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  This is something I'&lt;!--'--&gt;d call a chałka and mother calls a chałka,
  but polish chałka is sweet with streusel topping,
  and this isn't because it's a chrismas variant,
  so father calls it a strucla which it isn'&lt;!--'--&gt;t,
  or this must be deeply regional counternomenclature.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;ass-yorkshire-pudding&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111450828098726010&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/450/825/877/321/125/original/20fb7deb1879af31.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/111495453441617318&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/495/451/686/471/782/original/7275030b7d7eadd0.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#ass-yorkshire-pudding&quot;&gt;#&lt;/a&gt;Yorkshire pudding (bad)&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;!-- https://discord.com/channels/616404343146414243/659425870204764160/1171880679416537180 --&gt;
  From Donkey Kong,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111450828098726010&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-16&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111495453441617318&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-27&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;minimally combine mixed powder Ш (
       &lt;ul class=&quot;continuing&quot;&gt;
        &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3&lt;/span&gt; cups of flour&lt;/li&gt;
        &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;¼&lt;/span&gt; of a cup of sugar&lt;/li&gt;
        &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; small spoon of salt&lt;/li&gt;
        &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; spoon of baking powder&lt;/li&gt;
        &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1½&lt;/span&gt; spoons of baking soda&lt;/li&gt;
       &lt;/ul&gt;
      ) with mixed gloop Ё (
       &lt;ul class=&quot;continuing&quot;&gt;
        &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; cup of milk&lt;/li&gt;
        &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;¼&lt;/span&gt; of a cup of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5%&lt;/span&gt; vinegar&lt;/li&gt;
        &lt;li&gt;vanilla&lt;/li&gt;
        &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3&lt;/span&gt; eggs&lt;/li&gt;
        &lt;li&gt;some cider&lt;/li&gt;
       &lt;/ul&gt;
      )&lt;/li&gt;
  &lt;li&gt;fridge for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1h&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;generously grease a muffin-type tin, heat to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;230°&lt;/span&gt;, deploy gloop, bake for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20min&lt;/span&gt; – supposed to sizzle on deployment&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  Doesn'&lt;!--'--&gt;t really work, clearly.
  This is in contrast to what the original photos demonstrated, so maybe this only works in Leicester.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;america-biscuit&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111387230909933378&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/387/225/452/857/096/original/7d8005acf75fd3a9.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/111426205697493973&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/426/200/399/488/287/original/494470d2f12e46a3.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;span id=&quot;england-biscuit&quot;&gt; &lt;!-- I fucked it and misrembered. kingdom biscuits are actual biscuits!!--&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#america-biscuit&quot;&gt;#&lt;/a&gt;Yankscuit&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//sallysbakingaddiction.com/flaky-buttermilk-biscuits/&quot;&gt;Homemade Buttermilk Biscuits (6 Ingredients)&lt;/a&gt;,
  by Sally'&lt;!--'--&gt;s Baking Addiction,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111364903392394230&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-05&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111369410357766527&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-06&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111381412838337393&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-09&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111387230909933378&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-10&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111423249410917412&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-14&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111426205697493973&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-15&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111562935147889796&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-12-11&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;313g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; spoons of baking powder, small spoon of salt, mix&lt;/li&gt;
  &lt;li&gt;cut in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;113g&lt;/span&gt; of butter&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;240ml&lt;/span&gt; of buttermilk, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;14g&lt;/span&gt; of honey, combine –
      unclear how you'&lt;!--'--&gt;re supposed to measure the former, but &lt;a href=&quot;//pl.wikipedia.org/wiki/Maślanka#Skład_chemiczny&quot;&gt;published buttermilk breakdowns&lt;/a&gt;
      and taking just whatever'&lt;!--'--&gt;s &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt; &gt;1%&lt;/span&gt; concentration yields &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;91% + 3.1%⋅1.35 + 4%⋅1.525&lt;/span&gt; which ends up being around &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.01285g/ml&lt;/span&gt;
      and agrees with my experimental data, which is close enough to unity to not matter; or like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;245g&lt;/span&gt; if you want to split hairs&lt;/li&gt;
  &lt;li&gt;flatten to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19mm&lt;/span&gt;, fold in third&lt;/li&gt;
  &lt;li&gt;flatten to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19mm&lt;/span&gt;, fold in third&lt;/li&gt;
  &lt;li&gt;flatten to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19mm&lt;/span&gt;, fold in third&lt;/li&gt;
  &lt;li&gt;flatten to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19mm&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;cut into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;Φ63.5-76.2&lt;/span&gt; cylinders — or into whatever shape so long as it's not super small and with something sharp. unclear how it'd get an appropriate circular cutter&lt;/li&gt;
  &lt;li&gt;lay out so the tips touch, brush with buttermilk, bake for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;18-20min&lt;/span&gt; at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;220°&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;brush with a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2:1&lt;/span&gt; butter:honey combo heated to combine&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/span&gt;
&lt;/article&gt; &lt;article id=&quot;ciasto-kotletowe&quot;&gt; &lt;center class=&quot;grid-by-each continued&quot;&gt; &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111353464306173291&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/353/463/863/592/505/original/561588b6e25a107f.png&quot; /&gt;&lt;/a&gt; &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#ciasto-kotletowe&quot;&gt;#&lt;/a&gt;Ciasto kotletowe&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  Courtesy of my aunt,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111353464306173291&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-04&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
  &lt;div style=&quot;padding-left: 40px;&quot;&gt;
   &lt;p class=&quot;continuation&quot;&gt;
    2 szkl. kaszy mannej&lt;br /&gt;
    2 szkl. mąki&lt;br /&gt;
    2 łyżeczki proszku do pieczenia&lt;br /&gt;
    1 1/2 szklanki cukru&lt;br /&gt;
    200g zimnego masła&lt;br /&gt;
    2kg jabłek&lt;br /&gt;
   &lt;/p&gt;
   &lt;strong&gt;Wykonanie&lt;/strong&gt;
   &lt;p class=&quot;continuation&quot;&gt;Jabłka obieramy i ścieramy na tarce o grubych oczkach i mieszamy z 3-ma łyżkami cukru. Jabłka powinny być wilgotne.&lt;/p&gt;
   &lt;p class=&quot;continued&quot;&gt;Mannę, mąkę, cukier, proszek mieszamy i dzliemy na trzy części. Formę wykładamy papierem.&lt;/p&gt;
   &lt;p class=&quot;continuing&quot;&gt;Na dno wsypujemy część sypkich składników i wykładamy połową jabłek, przykrywamy drugą częścią sypkich składników. Wykładamy resztę jabłek. Ponownie dajemy sypkie składniki.&lt;/p&gt;
   &lt;p class=&quot;continuing&quot;&gt;Wierzch szarlotki pokrywamy plastrami masła lub wiórkami.&lt;/p&gt;
   &lt;p class=&quot;continuation&quot;&gt;Pokrywamy całą powierzchnię ciasta. Pieczemy 60 min, 180°C.&lt;/p&gt;
  &lt;/div&gt;
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;shaobing&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110992083451588635&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/992/073/464/014/965/original/d128c25363a316d5.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/111041049425379229&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/041/044/915/290/778/original/a43748bfceb81e52.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#shaobing&quot;&gt;#&lt;/a&gt;Shaobing&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/OoSJTqpcHps&quot; lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;从小吃到大的油盐烧饼，不用烤烙着吃更香，咸香酥软太好吃了&lt;!--&quot;--&gt;&lt;/a&gt;,
  by Yi Ning'&lt;!--'--&gt;s Mother Loves Food,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110991939199680335&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-09-01&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110956423046357306&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-09-07&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111358771030497231&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-11-02&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;250g&lt;/span&gt; of like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt; water, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5g&lt;/span&gt; of salt, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3g&lt;/span&gt; of yeast, mix&lt;/li&gt;
  &lt;li&gt;flock into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;400g&lt;/span&gt; of flour – she gets something quite stiff, but I tend to get more of a light bread dough, even when putting in additional flour&lt;/li&gt;
  &lt;li&gt;knead, he sleeps&lt;/li&gt;
  &lt;li&gt;pour &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50g&lt;/span&gt; of boiling oil over &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5g&lt;/span&gt; of salt, and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5g&lt;/span&gt; of pepper&lt;/li&gt;
  &lt;li&gt;wake him up, clean up on floured board, roll out thinly on floured board – you want to get like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5-6&lt;/span&gt; folds while preserving the major dimension&lt;/li&gt;
  &lt;li&gt;deploy and spread the oily goop&lt;/li&gt;
  &lt;li&gt;roll up fold-wise while preserving the major dimension&lt;/li&gt;
  &lt;li&gt;cut into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6&lt;/span&gt; guys&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;crimp cut ends&lt;/li&gt;
    &lt;li&gt;roll out the resulting skirts&lt;/li&gt;
    &lt;li&gt;fold the edges in, then the flap up&lt;/li&gt;
    &lt;li&gt;invert, roll, invert, roll, invert&lt;/li&gt;
    &lt;li&gt;brush with oil, deploy black sesame&lt;/li&gt;
    &lt;li&gt;he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10min&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;fry covered on dark oil, flip after &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt;, flip after &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt;, flip after &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt;, flip after &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt;&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;liver-soup&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110945861145403755&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/945/854/392/660/756/original/26ad039c41131d76.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/110956423046357306&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/956/422/198/154/529/original/46ad82460086d290.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#liver-soup&quot;&gt;#&lt;/a&gt;Hog'&lt;!--'--&gt;s liver soup&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/y_hT7nzXzGE&quot;&gt;Chef Wang teaches you: &quot;Pork Liver Soup&quot;, a traditional Sichuan soup dish
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;厨师长教你：“生汆猪肝汤”的家常做法，清爽滑嫩，鲜而不腥&lt;/span&gt;)&lt;/a&gt;,
  by Chef Wang 美食作家王刚,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110945861145403755&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-24&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110956423046357306&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-26&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;soak some fungus and dried lilies for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30min&lt;/span&gt; –
      the lilies appear to be a very regional product, I just put in some dried apricots in a similar aspect ratio&lt;/li&gt;
  &lt;li&gt;detendonise a small hog'&lt;!--'--&gt;s liver, cut into small strips –
      &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~4&lt;/span&gt; poultry livers also work but it's a hell of a job to de-tendonise them and you don't get nice pieces&lt;/li&gt;
  &lt;li&gt;spoon of salt, launder, fill with water, launder, drain, squeeze&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.5&lt;/span&gt; spoons (nom. &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~1.5g&lt;/span&gt;) of salt, and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;some&lt;/span&gt; (nom. &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~1g&lt;/span&gt;) white pepper, launder&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; egg's&lt;!--'--&gt;s white, launder&lt;/li&gt;
  &lt;li&gt;add a few hands (nom. &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50g&lt;/span&gt;) of starch, laundering in betweem; let &quot;marinate&quot; –
      he specs sweet potato, I don't think this is sold here. normal starch works; appx. four to five hands went into poultry livers and hog's liver, resp.&lt;/li&gt;
  &lt;li&gt;quarter &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; tomato, de-seed, de-skin, cut into strips&lt;/li&gt;
  &lt;li&gt;de-root a couple small pokchois&lt;/li&gt;
  &lt;li&gt;shred a couple onion whites&lt;/li&gt;
  &lt;li&gt;shred a &quot;small bit&quot; of ginger&lt;/li&gt;
  &lt;li&gt;blanch the soakers&lt;/li&gt;
  &lt;li&gt;boil the blanched soakers with the ginger and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;some&lt;/span&gt; lard, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; spoon (nom. &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3g&lt;/span&gt;) of salt,
      and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; pinch (nom. &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.5g&lt;/span&gt;) each of white pepper and MSG&lt;/li&gt;
  &lt;li&gt;deploy each bit of liver piece-wise into the boiling water&lt;/li&gt;
  &lt;li&gt;let it &quot;half-cook&quot;&lt;/li&gt;
  &lt;li&gt;deploy the rest of the vegetables&lt;/li&gt;
  &lt;li&gt;boil midly and de-froth until &quot;the vegetables are half-cooked&quot;&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;supposed-laobing&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110912325874653835&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/912/322/766/078/278/original/871fbbb3fdab47bb.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/112819434215946460&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/112/819/433/399/538/415/original/35d81c59df1b21fe.jpg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#supposed-laobing&quot;&gt;#&lt;/a&gt;Half-rye inflating bread&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/y_hT7nzXzGE&quot; lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;这样烙饼好神奇！不抹油不包油酥，个个空心像气球，简单好吃&lt;!--&quot;--&gt;&lt;/a&gt;,
  by Yi Ning'&lt;!--'--&gt;s Mother Loves Food,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110867561340637439&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-10&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110874141044133521&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-11&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110877700083516193&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-12&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110885535194714458&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-13&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110899730662475961&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-16&lt;/span&gt;&lt;/a&gt;,
            &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-17&lt;/span&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110912325874653835&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-18&lt;/span&gt;&lt;/a&gt;,
            &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-19&lt;/span&gt;,
            &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-20&lt;/span&gt;,
            &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-21&lt;/span&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110933500189109818&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-22&lt;/span&gt;&lt;/a&gt;,
             …,
            &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-09-06&lt;/span&gt;,
             …,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111126263457267793&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-09-25&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111263625416932870&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-10-19&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111341104967972340&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-10-31&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111732581354542796&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-01-10&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111744470267322996&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-01-12&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111772190896591033&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-01-17&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111913995778831904&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-02-11&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/112389011536964221&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-05-05&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/112394417116581266&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-05-06&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/112401424959172004&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-05-07&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/112797183837502699&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-07-16&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/112803711752632824&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-07-17&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/112813780139103185&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-07-19&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/112819434215946460&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-07-20&lt;/span&gt;&lt;/a&gt;,
            &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-07-21&lt;/span&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; of rye flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;190g&lt;/span&gt; of boiling water, pastify, let cool to yeast temp&lt;/li&gt;
  &lt;li&gt;mix in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3g&lt;/span&gt; of yeast&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200g&lt;/span&gt; of flour, knead&lt;/li&gt;
  &lt;li&gt;he sleeps&lt;/li&gt;
  &lt;li&gt;cylindrise, divide &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6&lt;/span&gt;-wise&lt;/li&gt;
  &lt;li&gt;for each guy: knead radially, ballify&lt;/li&gt;
  &lt;li&gt;for each guy: flatten directly, flour bilaterally, roll out to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2-3mm&lt;/span&gt;, bake on casting&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; &lt;article id=&quot;soy-flour-red-bean-sticky-rice-worm-hunks&quot;&gt; &lt;center class=&quot;grid-by-each continued&quot;&gt; &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110809682480516115&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/809/495/805/550/457/original/20bef8e45b221fe0.jpg&quot; /&gt;&lt;/a&gt; &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#soy-flour-red-bean-sticky-rice-worm-hunks&quot;&gt;#&lt;/a&gt;The soy-eating sticky rice and red bean worm so delicious it was hunted to extinxion (real, sad, tragic, the method for preparation is explained)&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/94sq209lddU&quot; lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;糯米粉这样做，比驴打滚简单好吃，一口一个软糯香甜，夏天必吃&lt;!--&quot;--&gt;&lt;/a&gt;,
  by Yi Ning'&lt;!--'--&gt;s Mother Loves Food,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110809682480516115&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-07-31&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;180g&lt;/span&gt; of sticky rice flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20g&lt;/span&gt; of corn starch, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20g&lt;/span&gt; of sugar, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;220g&lt;/span&gt; of milk, whisk –
      I don'&lt;!--'--&gt;t operate under a corn-based economy, so I just had potato&lt;/li&gt;
  &lt;li&gt;steam for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20min&lt;/span&gt; – she has a flat bowl, mine was still raw inside; I did altogether &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;cut in, deploy &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20g&lt;/span&gt; of butter, hide&lt;/li&gt;
  &lt;li&gt;knead in the butter once wet, ballify&lt;/li&gt;
  &lt;li&gt;deploy on soy flour, roll out rectangularly until &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2-3mm&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;to exhaustion: deploy bean paste length-wise near edge, snakify, separate, fix weld&lt;/li&gt;
  &lt;li&gt;for each snake: to exhaustion: cut off a piece&lt;/li&gt;
  &lt;li&gt;toss the pieces in soy flour to cover&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;shroomy-paper&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110787166550728100&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/787/165/007/587/820/original/f9aa27cddb09c71e.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/111133451540276725&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/133/449/399/259/470/original/dea0e20ea8afc644.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#shroomy-paper&quot;&gt;#&lt;/a&gt;Fungus bean curd skin&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/94sq209lddU&quot;&gt;The chef teaches you the recipe for Bean curd skin , it'&lt;!--'--&gt;s too fragrant
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;豆腐皮这个做法太好吃了，我家一周吃6次，上桌就光盘，太香了！Bean curd skin recipe&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by &lt;span lang=&quot;zh-CN&quot;&gt;家常菜日记&lt;/span&gt;,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110787166550728100&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-07-27&lt;/span&gt;&lt;/a&gt;
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111133451540276725&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-07-26&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;soak fungus in water with a little salt and some flour for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5min&lt;/span&gt;, wash in clean water –
      he specs auricularia cornea, which only has a wiki article in śląski and no common names; I used dried shredded mun because thats what I had&lt;/li&gt;
  &lt;li&gt;cut up &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; bean curd skins into strips, then parallelograms –
      his appeared smaller and thicker than mine, the stack I got looked like twice what he did, so I doubled the rest and it made two big bowls&lt;/li&gt;
  &lt;li&gt;cut a flat half of a long red and long green pepper lengthwise then parallelogramwise&lt;/li&gt;
  &lt;li&gt;shred two chives, keep the white bit separate&lt;/li&gt;
  &lt;li&gt;mince a garlic, save it with the white bit&lt;/li&gt;
  &lt;li&gt;for sus:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;a little salt&lt;/li&gt;
    &lt;li&gt;a little chicken essence (bullion cube)&lt;/li&gt;
    &lt;li&gt;ground pepper&lt;/li&gt;
    &lt;li&gt;two spoons of light soy sus&lt;/li&gt;
    &lt;li&gt;an spoon of oyster sus&lt;/li&gt;
    &lt;li&gt;a drip of dark soy sus (colour only)&lt;/li&gt;
    &lt;li&gt;half a spoon of corn starch – I don'&lt;!--'--&gt;t operate under a corn-based economy, so I just had potato&lt;/li&gt;
    &lt;li&gt;stir with some water&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;boil the skin for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30s&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;boil the shrooms for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;heat oil, fry the white bit + garlic with an spoon of bean paste until the oil reddens&lt;/li&gt;
  &lt;li&gt;fry with shrooms&lt;/li&gt;
  &lt;li&gt;fry with skin&lt;/li&gt;
  &lt;li&gt;boil for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2min&lt;/span&gt; with the sus&lt;/li&gt;
  &lt;li&gt;fry with with peppers&lt;/li&gt;
  &lt;li&gt;finish with chives&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  The &lt;em&gt;lightness&lt;/em&gt; of the soy sus is paramount here, it really did come Too Salty™ the first time.
  Probably moderate the salt when using a salty bullion cube.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;beef-brussy-CA&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110752930128901173&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/752/920/201/065/064/original/e5104e9dae21ffc3.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/110752998578446480&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/752/949/667/426/193/original/6937c34646c929fd.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#beef-brussy-CA&quot;&gt;#&lt;/a&gt;Beef Stuffed Flatbread&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/kko5x0P0Cbg&quot;&gt;Beef Stuffed Flatbread
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;薄皮馅饼 Stuffed Flatbread&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by &lt;span lang=&quot;zh-CN&quot;&gt;小高姐的&lt;/span&gt; Magic Ingredients,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110752998578446480&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-07-21&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;350g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;210g&lt;/span&gt; of water, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;¼&lt;/span&gt; of a small spoon of yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; spoon of oil, mix to accrue, he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;knead for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt;, divide &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6&lt;/span&gt;-wise&lt;/li&gt;
  &lt;li&gt;for each guy: knead radially, press directly knead-side down, he sleeps for at least &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;flatten directly in the hand&lt;/li&gt;
    &lt;li&gt;deploy gloop ball&lt;/li&gt;
    &lt;li&gt;encompass, close with a flat weld&lt;/li&gt;
    &lt;li&gt;deploy weld-side down on oiled sheet&lt;/li&gt;
    &lt;li&gt;cover with oil&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;cover the sheet with plastic, fridge for the night&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;extract&lt;/li&gt;
    &lt;li&gt;flatten directly on oiled board&lt;/li&gt;
    &lt;li&gt;roll out – I opted for flattening directly entirely&lt;/li&gt;
    &lt;li&gt;fry on oil expectedly&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
 &lt;p class=&quot;continuing&quot;&gt;with a spec gloop of&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60g&lt;/span&gt; of starch noodles boiled for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3min&lt;/span&gt;, run through with cold water, and shredded&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; of chives finely chopped&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200g&lt;/span&gt; of beef extrusion,
     &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; spoon of soy sus,
     &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; spoon of dark soy sus,
     &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;¼&lt;/span&gt; of a small spoon of ground pepper from sichuan,
     &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;¼&lt;/span&gt; of a small spoon of ground white pepper,
     &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;¼&lt;/span&gt; of a small spoon of salt,
     &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;⅛&lt;/span&gt; of a small spoon of five spices, mix&lt;/li&gt;
  &lt;li&gt;pour on &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; spoon of sesame oil and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; spoon of oil on the the chives and noodles, mix&lt;/li&gt;
  &lt;li&gt;mix the chive and noodle gloop with the meat&lt;/li&gt;
  &lt;li&gt;divide &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6&lt;/span&gt;-wise, ballify&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  I had not realised this was a yankified recipe until after having fridged it –
  this explains why my meat was pale and the result was lacking flavour –
  she uses spoon-based measurements, but she actually means &quot;customary ladle #7&quot;.
  Actual measures yet unknown.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;blooming-bread&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110669748656310055&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/669/573/055/938/291/original/c6b5c98e5242ace8.jpeg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/110669748656310055&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/110/670/199/586/607/127/original/2a6248ace16432df.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#blooming-bread&quot;&gt;#&lt;/a&gt;开花馒头&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/NOZxFzMKnz4&quot; lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;开花馒头，开不开花揉馒头方法很关键，做对了一出锅个个笑开花【三丰美食】&lt;!--&quot;--&gt;&lt;/a&gt;,
  by &lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;三丰美食&lt;!--&quot;--&gt;&lt;/span&gt;,
  replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110669748656310055&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-07-06&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110684630031038414&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-07-08&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40g&lt;/span&gt; of dark sugar, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;190g&lt;/span&gt; of hot water, mix to solve, wait to cool to like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;some yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3g&lt;/span&gt; of baking powder, mix –
      I had originally mis-taken this to be salt and put a spoon of salt in;
      this ended up tasting better, and I haven'&lt;!--'--&gt;t detected an appreciable change from the powder&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;350g&lt;/span&gt; of flour, knead, he sleeps covered&lt;/li&gt;
  &lt;li&gt;pour hot water over &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11&lt;/span&gt; jujube, cut up into small bits&lt;/li&gt;
  &lt;li&gt;flatten the risen dough in the bowl, deploy &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1g&lt;/span&gt; of soda in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10g&lt;/span&gt;(?) of water, knead, he sleeps covered for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;flatten on board, deploy jujube, knead in, cylindrise, tear into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7&lt;/span&gt; guys&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;flatten directly(?)&lt;/li&gt;
    &lt;li&gt;fold a point at the bottom to the top on the same radius, rotate a bit, repeat for like two rotations&lt;/li&gt;
    &lt;li&gt;indent, form conically&lt;/li&gt;
    &lt;li&gt;sleep for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;boil water, deploy, let rip for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  I haven'&lt;!--'--&gt;t gotten these to work morphologically.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;puckered-bread&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1688343-idk-what-i-did-diffe&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/7e10cb46-e68f-454c-8a1f-920b6f7ef7a3/DSC_2700.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1676107-didn-t-explode-along&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/b3806ff1-048d-472c-b03c-b6a5bdec1189/DSC_2694.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#puckered-bread&quot;&gt;#&lt;/a&gt;Puckered bread&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/z44JqGKyLBg&quot;&gt;Blossom steamed bread delicious method is very simple
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;开花馒头好吃方法很简单，学会这个做法，蓬松柔软个个开花【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1676107-didn-t-explode-along&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-13&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1688384-scale-comparison&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-15&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1705325-i-don-t-know-what-i&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-17&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1776589-they-made&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-28&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1791054-empty&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-30&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110736025902684639&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-07-18&lt;/span&gt;&lt;/a&gt;,
             &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-14&lt;/span&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111880068943735140&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-02-04&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111920590118411048&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-02-12&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111932121051092383&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-02-14&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111987958901410421&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2024-02-20&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4-5g&lt;/span&gt; of yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;35g&lt;/span&gt; of sugar, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50-60g&lt;/span&gt; egg, mix&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;80g&lt;/span&gt; of yogurt – I'&lt;!--'--&gt;ve been informed chinese yogurt is closer to zsiadłe mleko (or, indeed, lait ribot). that worked fine&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200g&lt;/span&gt; of hot milk – to compensate the cold egg and &quot;yogurt&quot;&lt;/li&gt;
  &lt;li&gt;knead to accrue, stretch out on board, deposit &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15g&lt;/span&gt; of butter, gloop in – she uses clarified, normal worked fine&lt;/li&gt;
  &lt;li&gt;he sleeps&lt;/li&gt;
  &lt;li&gt;tear him open, knead radially roll-wise, cylindrise. divide &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7&lt;/span&gt;-wise&lt;/li&gt;
  &lt;li&gt;for each guy: knead, smooth, ballify&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;spin around on floured board&lt;/li&gt;
    &lt;li&gt;invert, indent radially&lt;/li&gt;
    &lt;li&gt;invert, spin around on floured board&lt;/li&gt;
    &lt;li&gt;deposit flour-side up to sleep for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;boil water, deploy, let rip for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;, kill the heat and leave alone for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2min&lt;/span&gt;&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  I haven't gotten an indentation technique that wasn't just a knife to work, idk how she does it.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;dumpy&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1619105-one-day-they-ll-inve&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/833db54b-f39d-4278-998d-167856b153cb/DSC_2655a.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1619105-one-day-they-ll-inve&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/81fc99fc-d95a-4cd4-b69d-5eed4470c701/DSC_2656.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#dumpy&quot;&gt;#&lt;/a&gt;Steamed dumpling&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/kwx-qZd9Epw&quot;&gt;Home version of big steamed dumplings learn to do this, soft and chewy
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;家庭版大蒸饺学会这样做，柔软筋道不破皮不漏馅，适合新手【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1619105-one-day-they-ll-inve&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-04&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1636148-actually-fun-moment&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-06&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1647533-dzia-zy&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-08&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1658603-this-user-is-like&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-06-10&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3g&lt;/span&gt; of salt, mix&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;150g&lt;/span&gt; of boiling water in one half&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;150g&lt;/span&gt; of cold water in the other half&lt;/li&gt;
  &lt;li&gt;drizzle oil, knead roughly&lt;/li&gt;
  &lt;li&gt;he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10min&lt;/span&gt;, knead, he sleeps hidden for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;halve, roll out each into thick cylinder, divide each into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~12&lt;/span&gt;, flatten each directly, hide&lt;/li&gt;
  &lt;li&gt;for each guy: flatten directly, roll out radially, deploy &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3&lt;/span&gt; spoons of filling, close, deploy on boiling water for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10min&lt;/span&gt; –
      small scoops maybe? or my potatoes are small&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p class=&quot;continuing&quot;&gt;with a spec gloop of&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;big potato and carrot grated long, washed twice in cold water, blanched for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30s&lt;/span&gt;, extracted into cold water, squeezed, roughly shredded&lt;/li&gt;
  &lt;li&gt;half a sweet pepper and some green onion shredded&lt;/li&gt;
  &lt;li&gt;ginger, thirteen spices, bullion cube, salt&lt;/li&gt;
  &lt;li&gt;pour hot oil overtop, stir&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;brown-sugar-shortbread&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1534159-idk-whose-home-town&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/2e864867-f252-4c51-9ea4-126fd8e1a5e9/DSC_2637a.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1534159-idk-whose-home-town&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/bb5f12d8-8cd5-47a2-980e-55501950da44/DSC_2635a.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#brown-sugar-shortbread&quot;&gt;#&lt;/a&gt;Old-fashioned brown sugar short-bread&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/wzMPdyUy99g&quot;&gt;Hometown gourmet brown sugar shortbread, step-by-step explanation
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;家乡美食红糖酥饼，步骤详细讲解，酥脆香甜不用出去买【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1534159-idk-whose-home-town&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-21&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500g&lt;/span&gt; of flour. &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1g&lt;/span&gt; of yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1g&lt;/span&gt; of baking soda, mix – I ended up wanting like half a hand more&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;125g&lt;/span&gt; of sesame oil, rub together in hands for full dispersal&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200g&lt;/span&gt; of like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt; water&lt;/li&gt;
  &lt;li&gt;knead roughly, he sleeps in a bag for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10min&lt;/span&gt;, shortly knead smooth, he sleeps hidden for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;gloop Ш: &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;65g&lt;/span&gt; of sesame oil – I again needed a half-spoon to get the desired thick consistency&lt;/li&gt;
  &lt;li&gt;gloop Ё: &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; of flour, a few grams of water, mix, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;250g&lt;/span&gt; of brown sugar, mix –
      hers is absolutely sodden and very dark; mine isn't and I don't think it'&lt;!--'--&gt;s available here; you need a reasonably wet-adsorbed gloop for it to set&lt;/li&gt;
  &lt;li&gt;flatten the dough directly, roll out rectangularly –
      keep in mind the post-cylindrisation aspect to be relatively square instead of long;
      I did it essentially the same aspect as for &lt;a href=&quot;#flower-rolls&quot;&gt;flower rolls&lt;/a&gt; because it'&lt;!--'--&gt;s a happy one for the table and it was too wide&lt;/li&gt;
  &lt;li&gt;spackle gloop Ш&lt;/li&gt;
  &lt;li&gt;roll into tight cylinder, even out diameter&lt;/li&gt;
  &lt;li&gt;cut into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; guys, hide&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;pull into hand-sized roughly-equal-thickness hemisphere&lt;/li&gt;
    &lt;li&gt;deploy three spoons of gloop Ё&lt;/li&gt;
    &lt;li&gt;close like a bun, but really press it&lt;/li&gt;
    &lt;li&gt;spin around weld-side down to enforce the ass&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;spin around ass-down, flatten directly&lt;/li&gt;
    &lt;li&gt;roll out and quarter-turn thrice&lt;/li&gt;
    &lt;li&gt;flip&lt;/li&gt;
    &lt;li&gt;roll out and quarter-turn more than thrice – you really can'&lt;!--'--&gt;t go too thin but you can go too thick&lt;/li&gt;
    &lt;li&gt;deploy ass-down on hot oiled leccy pan, brush with oil&lt;/li&gt;
    &lt;li&gt;flip when bottom brown&lt;/li&gt;
    &lt;li&gt;flip when bottom brown&lt;/li&gt;
    &lt;li&gt;flip when bottom browner – &quot;&lt;!--&quot;--&gt;overall &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8-9min&lt;/span&gt;&lt;!--&quot;--&gt;&quot; was about right for me&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;pumpkin-hanamaki&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1538182-yes-im-still-working&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/7339792a-7d19-4344-acc1-4f0b2f928cef/DSC_2647.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1525544-okay-thats-kinda-pog&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/64a8b45c-13e5-4a1f-8bcc-1564da55fcd5/DSC_2630a.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#pumpkin-hanamaki&quot;&gt;#&lt;/a&gt;Pumpkin hanamaki&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/7_VBad4AzWI&quot;&gt;Homemade Hanamaki is simple and practical, you can learn it in a minute
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;家常花卷简单实用，一分钟就能学会，营养丰富层多柔软【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1525544-okay-thats-kinda-pog&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-17&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1538182-yes-im-still-working&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-22&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110820714260955866&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-08-02&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;half a pumpkin in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4mm&lt;/span&gt; slices, steamed for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20min&lt;/span&gt;, blended with water for a loose gloop –
      I used an &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;850g&lt;/span&gt; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1512219-this-is-half-a-pumpk&quot;&gt;dynia piżmowa&lt;/a&gt;,
      which is just about what her half a pumpkin looked like, but do not be fooled: she did not use the whole half a pumpkin&lt;/li&gt;
  &lt;li&gt;define dough over Ш as
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;300g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2g&lt;/span&gt; of yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.5g&lt;/span&gt; of baking powder, mixed&lt;/li&gt;
    &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;180g&lt;/span&gt; of like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt; Ш&lt;/li&gt;
    &lt;li&gt;knead, he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5min&lt;/span&gt;&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;dough over the gloop&lt;/li&gt;
  &lt;li&gt;dough over water&lt;/li&gt;
  &lt;li&gt;roll gloop dough into big &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1:2&lt;/span&gt; rectangle – &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;38×35cm&lt;/span&gt;'&lt;!--'--&gt;s much too thick, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32×55cm&lt;/span&gt; is better&lt;/li&gt;
  &lt;li&gt;flour and roll up on a broom handle&lt;/li&gt;
  &lt;li&gt;roll water dough to same size&lt;/li&gt;
  &lt;li&gt;spray water&lt;/li&gt;
  &lt;li&gt;extract the broom rectangle, weld by light rolling&lt;/li&gt;
  &lt;li&gt;brush with oil&lt;/li&gt;
  &lt;li&gt;roll into tight cylinder, preserving the major dimension&lt;/li&gt;
  &lt;li&gt;cut into like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6cm&lt;/span&gt; pieces with something sharp&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;squeeze the center third parallel to the cut edges&lt;/li&gt;
    &lt;li&gt;squeeze the corners belonging to the same uncut edge together&lt;/li&gt;
    &lt;li&gt;twist in opposite direxions and weld on the opposite side to the freshly-formed edge-face&lt;/li&gt;
    &lt;li&gt;hide for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20min&lt;/span&gt;&lt;/li&gt;
    &lt;li&gt;boil the water, deploy, let rip for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;, kill the heat and leave alone for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2min&lt;/span&gt;&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;butter-bread&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1488951-quite-pog-for-a-brus&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/85fc5b38-c64e-4c56-8323-4b6aae087473/1683924925110.JPEG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1488951-quite-pog-for-a-brus&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/6401196b-c17e-478d-9249-9593555e5531/DSC_2615a.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#butter-bread&quot;&gt;#&lt;/a&gt;Butter bread&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/i8fGjFvwNN0?t=441&quot;&gt;How to make Haijuan Gourmet'&lt;!--'--&gt;s big white steamed buns with bright surface?
                                         (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;【面食合集】表面光亮的大白馒头怎么做？蓬松柔软又好吃，看一遍就会做！【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  at 7:21,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1488951-quite-pog-for-a-brus&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-12&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1504203-remaining-4-5-not-p&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-15&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50g&lt;/span&gt; egg, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;260g&lt;/span&gt; of water, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100g&lt;/span&gt; of milk, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20g&lt;/span&gt; of sugar, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4g&lt;/span&gt; of salt, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5g&lt;/span&gt; of yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50g&lt;/span&gt; of corn oil, whisk –
      olive oil works fine; she doesn't say &quot;warm water&quot; so I used normal and it didn't really rise that well, so;
      doing all but water and yeast first, then hot water to compensate the cold milk and eggs to a sensible temperature, then the yeast worked well&lt;/li&gt;
  &lt;li&gt;whisk in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;650g&lt;/span&gt; of flour –
      again, I needed like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;55g&lt;/span&gt; more; she gets a floculent out of the whisking which is very much not what I got; normal stick-based flocking worked better&lt;/li&gt;
  &lt;li&gt;knead – &quot;a little longer&quot; is once again sensible&lt;/li&gt;
  &lt;li&gt;he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;knead to de-gas, halve, cylindrise both, cut each nine-wise, ballise each&lt;/li&gt;
  &lt;li&gt;lay out in three rows, deploy a gloop of clarified butter on two – for lack of clarified, normal worked fine&lt;/li&gt;
  &lt;li&gt;flatten each guy directly&lt;/li&gt;
  &lt;li&gt;stack column-wise, unbuttered on buttered on buttered&lt;/li&gt;
  &lt;li&gt;they sleep covered for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;for each stack:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;flatten directly, flip, flatten directly, &amp;c.&lt;/li&gt;
    &lt;li&gt;fold a point on the perimeter to the middle&lt;/li&gt;
    &lt;li&gt;repeat &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7&lt;/span&gt; times &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;45°&lt;/span&gt; apart&lt;/li&gt;
    &lt;li&gt;hide weld-side down&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;flatten directly – you want them really quite flat, otherwise the bulk ends up raw&lt;/li&gt;
    &lt;li&gt;deploy weld-side down on hot buttered leccy pan&lt;/li&gt;
    &lt;li&gt;flatten the edge directly&lt;/li&gt;
    &lt;li&gt;brush butter on top –
        this step I forgor 💀 the first time but then my pan was quite buttered;
        it's crucial for a good effect if your guys are big and thus don't leave a lot of free butter post-flip&lt;/li&gt;
    &lt;li&gt;cover for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt; – I needed like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1:20&lt;/span&gt; to get even close to the displayed browning level&lt;/li&gt;
    &lt;li&gt;flip, let rip for another &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2min&lt;/span&gt; – as above; &quot;when both sides are golden brown, it can be out of the pan&quot;&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;hushi-confexion&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1494733-still-very-acceptabl&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/284c385d-ab51-470c-9663-5f001f09b2ab/DSC_2617.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1486924-pog-moment&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/d8658927-a3d4-4f84-bc06-4d1bb418db20/DSC_2610a.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#hushi-confexion&quot;&gt;#&lt;/a&gt;Hushi confexion&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/yW85JqGvy7M&quot;&gt;Chinese rural specialty delicacy Hushi sugar baker
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;中国农村特色美食呼市方糖焙子，从和面到制作油酥很详细，香甜可口还柔软【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1486924-pog-moment&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-12&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1494733-still-very-acceptabl&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-14&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4-5g&lt;/span&gt; of yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2g&lt;/span&gt; of baking powder, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1g&lt;/span&gt; of baking soda, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5g&lt;/span&gt; of sugar, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50g&lt;/span&gt; egg, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20g&lt;/span&gt; of safflower oil, flock
      – I needed &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;585g&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;300g&lt;/span&gt; of like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt; water&lt;/li&gt;
  &lt;li&gt;knead – &quot;needs a little more kneading&quot; is right, needs &lt;em&gt;much&lt;/em&gt; more due to the oil&lt;/li&gt;
  &lt;li&gt;he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;knead to de-gas, roll cylindrically, cut six-wise, spin each into ball, hide&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;180g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;150g&lt;/span&gt; of sesame oil, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;150g&lt;/span&gt; of sugar, stir – I needed &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;212g&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;pull into hand-sized hemisphere&lt;/li&gt;
    &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2-3&lt;/span&gt; spoons of gloop&lt;/li&gt;
    &lt;li&gt;close like a bun with a flat top&lt;/li&gt;
    &lt;li&gt;spin on counter, weld-side down, to form the ass thereon&lt;/li&gt;
    &lt;li&gt;hide&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;pat sides-on to rectangularise&lt;/li&gt;
    &lt;li&gt;roll out long, mostly save the very ends&lt;/li&gt;
    &lt;li&gt;correct for wide spots&lt;/li&gt;
    &lt;li&gt;flip&lt;/li&gt;
    &lt;li&gt;define folding as
     &lt;ol class=&quot;continuing&quot;&gt;
      &lt;li&gt;fold top edge to bottom third, press lightly&lt;/li&gt;
      &lt;li&gt;roll the weld and the uncovered third&lt;/li&gt;
      &lt;li&gt;fold the bottom edge to the new top, press strongly&lt;/li&gt;
      &lt;li&gt;quarter-turn&lt;/li&gt;
     &lt;/ol&gt;
    &lt;/li&gt;
    &lt;li&gt;folding&lt;/li&gt;
    &lt;li&gt;roll out long, mostly save the very ends&lt;/li&gt;
    &lt;li&gt;folding&lt;/li&gt;
    &lt;li&gt;roll out long, mostly save the very ends&lt;/li&gt;
    &lt;li&gt;folding&lt;/li&gt;
    &lt;li&gt;flip, roll rectangularly&lt;/li&gt;
    &lt;li&gt;hide on tray&lt;/li&gt;
   &lt;/ol&gt;
   – resist the temptation of doing it &lt;em&gt;super&lt;/em&gt; thin, because it takes it very well, but I think it affected the rise a bit
  &lt;/li&gt;
  &lt;li&gt;brush all with oil, they sleep covered for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;sprinkle with sesame and sugar&lt;/li&gt;
  &lt;li&gt;bake at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;190°&lt;/span&gt; for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20min&lt;/span&gt;&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  Again, for me the recipe suffers from her flour having, oddly, since she lives in a hotter wetter climate, much more flour per flour
  (the first time I had three hands and three gloops of flour more to get the same consistency on both as she did; second time as above);
  conversely, her sugar is absolutely sodden.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; &lt;article id=&quot;onion-pancake&quot;&gt; &lt;center class=&quot;grid-by-each continued&quot;&gt; &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1465853-this-is-the-only-one&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/f5fef574-0ada-4e5c-919a-526285cfee9d/DSC_2596a.JPG&quot; /&gt;&lt;/a&gt; &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#onion-pancake&quot;&gt;#&lt;/a&gt;Green onion pancake&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/i8fGjFvwNN0?t=886&quot;&gt;How to make Haijuan Gourmet'&lt;!--'--&gt;s big white steamed buns with bright surface?
                                         (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;【面食合集】表面光亮的大白馒头怎么做？蓬松柔软又好吃，看一遍就会做！【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  at 14:46,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1465853-this-is-the-only-one&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-08&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&quot;small bowl&quot; of flour – my similarly-profiled and probably-similarly-sized bowl came out to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;488g&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;twice that many bolws of water – &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1470g&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;salt, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3&lt;/span&gt; eggs&lt;/li&gt;
  &lt;li&gt;handful of a green onion – came out to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~50g&lt;/span&gt; of szczypiorek&lt;/li&gt;
  &lt;li&gt;whisk&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol class=&quot;continuing&quot;&gt;
    &lt;li&gt;brush oil on a hot pan&lt;/li&gt;
    &lt;li&gt;some mixture, roll to spread&lt;/li&gt;
    &lt;li&gt;when it sets a bit (changes colour?), drizzle oil&lt;/li&gt;
    &lt;li&gt;when it gets a bubble in the middle, flip&lt;/li&gt;
    &lt;li&gt;when it gets a bubble in the middle, roll around&lt;/li&gt;
    &lt;li&gt;roll around again within the minute&lt;/li&gt;
    &lt;li&gt;flip after just a little fried&lt;/li&gt;
    &lt;li&gt;extract after &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10s&lt;/span&gt;&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  Unclear what the hell happened, but she appears to be doing these on a well-maintained casting; it turned out all my normal-sized plastic pans are apparently ass.
  Similarly, it appeared impossible to &lt;em&gt;not&lt;/em&gt; get something much thicker than what she got,
  with reduced volumes just yielding smaller pancakes of a constant depth.
  Except for like three, none of them behaved at all.
  The surface didn'&lt;!--'--&gt;t really change colour to yellower in the same way that hers did;
  it did get a bubble in the middle, but it was only sufficiently stable to flip when either
  (a) never because it burned on the ass pan, or (b) it was already quite fried, and hers were still white at this time.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;buns&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1461465-okay-thats-some-pret&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/fdb67946-b1d1-4696-8450-585f0aceda59/DSC_5798.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://101010.pl/@nabijaczleweli/111575020146177424&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/574/872/987/262/651/original/559a4b23d29075e3.jpeg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#buns&quot;&gt;#&lt;/a&gt;Buns&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/tghGkiw8feU&quot;&gt;From snacks to big sauced meat buns, the skin is thin and the stuffing is big and soft
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;从小吃到大的酱肉包子，皮薄馅大又暄软，不塌陷不回缩【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
        replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1461715-goated-gloop-as-well&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-07&lt;/span&gt;&lt;/a&gt;,
                   &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111064931118614188&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-09-12&lt;/span&gt;&lt;/a&gt;
                   &lt;a href=&quot;https://101010.pl/@nabijaczleweli/111575020146177424&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-12-13&lt;/span&gt;&lt;/a&gt;;
  gloop replicated &lt;a href=&quot;https://101010.pl/@nabijaczleweli/110691639550245407&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-07-10&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuing&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;300g&lt;/span&gt; of like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt; water, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4g&lt;/span&gt; of yeast, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5g&lt;/span&gt; of sugar, stir to suspend&lt;/li&gt;
  &lt;li&gt;flock in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500g&lt;/span&gt; of flour&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10g&lt;/span&gt; of lard – I used hog fat from &lt;a href=&quot;#leek-cake&quot;&gt;last time&lt;/a&gt;, worked very well&lt;/li&gt;
  &lt;li&gt;knead, he sleeps sleep in the bowl until he doubles in size –
      I was gonna try the usual &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40min&lt;/span&gt;, but I made and cooled the gloop in this time for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100min&lt;/span&gt;; still worked well&lt;/li&gt;
  &lt;li&gt;knead to de-gas, roll into cylinder, divide &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16&lt;/span&gt; ways&lt;/li&gt;
  &lt;li&gt;for each guy: spin him flat, ballify him, hide under plastic – or some magical plastic that doesn'&lt;!--'--&gt;t stick to it, because the one I had did&lt;/li&gt;
  &lt;li&gt;for each guy: flatten directly, roll out radially (somewhere in the vicinity of upward of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2mm&lt;/span&gt;) leaving a thicker area for the ass in the middle, re-hide –
      I misunderstood the video, and did this individually before packing each bun;
      worked fine tho;
      it really does help to have something that'&lt;!--'--&gt;s mostly round&lt;/li&gt;
  &lt;li&gt;for each guy: get him on your off-hand, center over the kuckles, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3-4&lt;/span&gt; spoons of gloop and squish it, close it, spin around to enforce the ass,
      deposit on paper in basket –
      this may've been because I've never shut up a bun before so I didn'&lt;!--'--&gt;t really know how I usually liked,
      or that I need mechanical assitance to bend my hand that way, or w/e, but I got in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2-3&lt;/span&gt; spoons at most; operator error&lt;/li&gt;
  &lt;li&gt;they sleep there covered for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10min&lt;/span&gt; –
      they only grow a bit sideways while sleeping but much more when steaming; I knew this and still put them too close together&lt;/li&gt;
  &lt;li&gt;boil the water, let rip for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;, kill the heat and leave alone for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3min&lt;/span&gt;, extract&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p class=&quot;continuing&quot;&gt;with a spec gloop of&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt;(?) handfuls of pokchois, blanched in water with olive oil for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt;, dumped in ice water, squeezed dry, shredded –
      idk how I'&lt;!--'--&gt;d get pokchois, so I used what came out to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;473g&lt;/span&gt; of kapusta pekińska (&quot;napa cabbage&quot; apparently), and I had lower cook volume so &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2min&lt;/span&gt;,
      and that behaved like hers did&lt;/li&gt;
  &lt;li&gt;&quot;a few washed shiitakes&quot;, thick cuboidsed, same cooking –
      looks like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7&lt;/span&gt; big ones; all the shrooms I had on hand was &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30g&lt;/span&gt; of dried shiitakes, and those, re-wetted, worked fine in here,
      compensated with more leeks and that worked&lt;/li&gt;
  &lt;li&gt;big tall pan, considerable volume of oil, a &quot;dozen peppercorns&quot;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; star anise pod, fried until the pepper changes colour, plants removed –
      my pepper does not look like hers, unclear to me what I'&lt;!--'--&gt;d call what she put in there&lt;/li&gt;
  &lt;li&gt;chopped ginger – similar quantity to &lt;a href=&quot;#leek-cake&quot;&gt;last time&lt;/a&gt; was a tad small –
      and all but half a handful of two medium-but-all-white-bit-leeks(?), halved length-wise and shredded, until they change colour&lt;/li&gt;
  &lt;li&gt;minced hog (but not too fine), fried until mostly-cooked –
      &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;800g&lt;/span&gt; was about right proportionally,
      but seemed leaner or drier than what she had, so compensated with remainder of the hog fat from &lt;a href=&quot;#leek-cake&quot;&gt;last time&lt;/a&gt;,
      and the commercial stuff I got was in extrusions and pre-cutting them to like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.5cm&lt;/span&gt; worked to get a similar granulation to what she has&lt;/li&gt;
  &lt;li&gt;pepper, &quot;bean paste&quot; (miso?), soy sus, oyster sus, salt, &quot;chicken essence&quot; (bit of a boullion cube?), fry to fully cook and disperse the colour –
      one and a most of a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15g&lt;/span&gt; miso packet was too little for this much schmeat; fish sus worked well I think; half a &quot;strong&quot; boullion cube&lt;/li&gt;
  &lt;li&gt;the shiitakes, keep frying for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt;, extract, cool&lt;/li&gt;
  &lt;li&gt;the blanched pokchois, rest of the leek, mix&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  Quite easy (sans the wrapping, but the first pieróg you wrapped also looked like ass and now you can do them without looking, so);
  the lard in the dough is magic.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;leek-cake&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1440206-leek-multi-laye&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/e7e450f2-e151-42ab-977c-d8395e05154a/DSC_5775.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1440206-leek-multi-laye&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/660e5669-4349-4236-907a-dcec6f5c8003/DSC_5778.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#leek-cake&quot;&gt;#&lt;/a&gt;Leek multi-layer cake&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/2rNbXgnnyQg&quot;&gt;Leek multi-layer cake is delicious and no skill
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;韭菜多层饼好吃无技巧，层层有饼层层有馅，咸香味美满嘴香！【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1440206-leek-multi-laye&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-03&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuing&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500g&lt;/span&gt; of flour, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~2g&lt;/span&gt; of salt, flock with &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;150g&lt;/span&gt; of boiling water then &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;130g&lt;/span&gt; of normal&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60g&lt;/span&gt; egg – I had good results with an uncompensated &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;70g&lt;/span&gt; one&lt;/li&gt;
  &lt;li&gt;knead via pulling&lt;/li&gt;
  &lt;li&gt;roll into cylinder, cut into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; guys, spin each guy flat then ball him; they all sleep on a tray for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1h&lt;/span&gt;, oiled and plasticked&lt;/li&gt;
  &lt;li&gt;with oiled counter, stick, and hands, roll each guy into like a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2:5&lt;/span&gt; rectangle&lt;/li&gt;
  &lt;li&gt;&quot;not too thin&quot;, but you do want it quite thin, presumably the difference here is &quot;not paper-thin&quot;&lt;/li&gt;
  &lt;li&gt;dispense gloop, omit &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~1-1.5cm&lt;/span&gt; from the edge, fold thrice (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4&lt;/span&gt; sections), roll and press the loose ends toward the face with the last fold&lt;/li&gt;
  &lt;li&gt;these go on a hot oiled leccy pan, weld side down, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~1min&lt;/span&gt; on the first side until they set, then flip 1/min for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~6min&lt;/span&gt; total –
      filling ought to be visible from the edges here but may not be if the dough's thick and you don't have much contrast in the gloop&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p class=&quot;continuing&quot;&gt;with a spec gloop of&lt;/p&gt;
 &lt;ol class=&quot;continuing&quot;&gt;
  &lt;li&gt;cold fried minced hog&lt;/li&gt;
  &lt;li&gt;minced ginger, &quot;dark soy&quot; (miso?), soy sus, thirteen spices, &quot;chicken essence&quot; (bit of a boullion cube?), oyster sus, salt&lt;/li&gt;
  &lt;li&gt;rough-chopped scallions&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p class=&quot;continuing&quot;&gt;and I had good (if lightly-loaded, wants more matter) results with&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;400g&lt;/span&gt; of fried minced hog, most fat drained&lt;/li&gt;
  &lt;li&gt;most of the white bit of a leek&lt;/li&gt;
  &lt;li&gt;most of a big shallot&lt;/li&gt;
  &lt;li&gt;half a big carrot&lt;/li&gt;
  &lt;li&gt;a forefinger'&lt;!--'--&gt;s worth of ginger – go for the first two knuckles (or more meat) next time&lt;/li&gt;
  &lt;li&gt;a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15g&lt;/span&gt; miso packet&lt;/li&gt;
  &lt;li&gt;soy sus, fish sus, salt&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; &lt;article id=&quot;topinambur-cream-soup&quot;&gt; &lt;center class=&quot;grid-by-each continued&quot;&gt;&lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#topinambur-cream-soup&quot;&gt;#&lt;/a&gt;Topinambur cream soup&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  Top-most recipe from
  &lt;a href=&quot;//www.ugotowanepozamiatane.pl/top-5-potraw-topinambur/&quot;&gt;Top 6 najlepszych przepisów na topinambur&lt;/a&gt;,
  by Ugotowane, Pozamiatane,
  replicated &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-01&lt;/span&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1kg&lt;/span&gt; of topinambur, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1l&lt;/span&gt; of milk, boil until &quot;soft&quot;, and normal potato heuristics work –
      I had closer to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;700g&lt;/span&gt; so everything'&lt;!--'--&gt;s scaled appropriately, with a small turmeric to generate the piss colour&lt;/li&gt;
  &lt;li&gt;drain of milk, put in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1l&lt;/span&gt; of boullion, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100ml&lt;/span&gt; of amaretto, a gloop of maple syrup, big pinch each of nutmeg, salt, and pepper&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500ml&lt;/span&gt; of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;36%&lt;/span&gt; cream – this would be unbearably fat. for the scaled amount I used a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;400g&lt;/span&gt; bucket of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12%&lt;/span&gt; and that worked well&lt;/li&gt;
  &lt;li&gt;blend&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;corn-freamed-buns&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1434488-okay-these-ones-rose&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/ca893d84-f5a0-4e68-8d59-25caa7553def/DSC_2584.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1413956-okay-these-are-pog-c&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/4cac1ee0-9abc-447d-ad26-bf841e4f6a2a/DSC_2571.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#corn-freamed-buns&quot;&gt;#&lt;/a&gt;Corn freamed (fried steamed) rolls (buns), rose-shaped&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/7tZEh6uzcOo&quot;&gt;Cornmeal for rolls? Easy to make fluffy and soft
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;玉米面不蒸馒头做花卷？蓬松柔软做法简单，全程无难度【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1413956-okay-these-are-pog-c&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-04-29&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1433335-little-secondary-ris&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-02&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1434488-okay-these-ones-rose&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-02&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200g&lt;/span&gt; of &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1404618-this-user-just-got&quot;&gt;corn&lt;/a&gt;,
      flock with &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200g&lt;/span&gt; of boiling water,
      let cool until not hot to second knuckle – with the eggs you want to get a good yeast temp&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3g&lt;/span&gt; of yeast, spoon of sugar, two eggs – mine are &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~70g&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200g&lt;/span&gt; of flour – maybe my eggs are huge, maybe idk, but starting with &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;250g&lt;/span&gt; and likely adding slightly more to get to a reasonable &quot;dough&quot; consistency
      — instead of a paste, which doesn'&lt;!--'--&gt;t rise; the spec is to &lt;em&gt;maybe add water&lt;/em&gt; which is insane to me —
      worked for me to avoid the &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1433335-little-secondary-ris&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-02&lt;/span&gt;&lt;/a&gt; incident again&lt;/li&gt;
  &lt;li&gt;flock, accrue, knead in bowl for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5min&lt;/span&gt;, he sleeps in the covered bowl for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;knead a bit on floured counter to de-gas, roll into cylinder, cut into &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~12&lt;/span&gt; guys –
      there's a critical mass above which they won't re-rise(?), and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9&lt;/span&gt; left them too big
      (again, &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1433335-little-secondary-ris&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-02&lt;/span&gt;&lt;/a&gt;),
      &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13&lt;/span&gt; and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12&lt;/span&gt; worked very well, and she does &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;for each guy:
   &lt;ol&gt;
    &lt;li&gt;spin him flat – thus averaging the crust that'&lt;!--'--&gt;s inevitably developed&lt;/li&gt;
    &lt;li&gt;cylindrise, flatten, roll out long –
        you want a high aspect ratio and relatively thin;
        if he sticks to the counter then unstick him, flour the counter, and zoom him around so he'&lt;!--'--&gt;s free for the next step&lt;/li&gt;
    &lt;li&gt;start a cut through the middle &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~.5-1cm&lt;/span&gt; from one edge, and through the other&lt;/li&gt;
    &lt;li&gt;&quot;braid him like a braid&quot;, i.e. keep passing one over the other,
                                       keep the top-facing faces facing the top and the counter-facing faces facing the counter&lt;/li&gt;
    &lt;li&gt;at the end, weld the halves together again – the best-kept secret here is that no matter how badly you do any of this it'&lt;!--'--&gt;ll turn out great&lt;/li&gt;
    &lt;li&gt;flip (dry side up wet side down now),
        roll from the welded bit to the uncut bit,
        stick the tongue that'&lt;!--'--&gt;s left to the side, may need water assist&lt;/li&gt;
    &lt;li&gt;ass-down spin him around a bit to ensure flat perpendicular ass&lt;/li&gt;
    &lt;li&gt;hide under a cover&lt;/li&gt;
   &lt;/ol&gt;
     – this took me like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50&lt;/span&gt; minutes the first time, and like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40&lt;/span&gt; the third
   &lt;/li&gt;
  &lt;li&gt;oil a pan, lay them there, they sleep covered for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;crank to medium for three minutes –
      maybe her leccy pan is more powerful than my stove, I need like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1min&lt;/span&gt; on 9 then &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4min&lt;/span&gt; on 6,
      you'&lt;!--'--&gt;re shooting for a well-developed brown crust on the ass&lt;/li&gt;
  &lt;li&gt;pour water &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;⅓&lt;/span&gt;&lt;sup&gt;rd&lt;/sup&gt; way up – the guys? the pan? idk. – kill the heat, they steam until the water gets sucked off (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~10min&lt;/span&gt;)&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  These came out just about perfect &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1413956-okay-these-are-pog-c&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-04-29&lt;/span&gt;&lt;/a&gt;,
  but the water level is finnicky, and pouring in more and turning the heat back on turns out badly for me
  (stuck to bottom; &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1433335-little-secondary-ris&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-02&lt;/span&gt;&lt;/a&gt;,
                    &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1434488-okay-these-ones-rose&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-05-02&lt;/span&gt;&lt;/a&gt;).
  Maybe this is easier if you have a plastic pan the right size, but my biggest (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;Φ245&lt;/span&gt;) is stainless (but the right size).
  Operator error.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;wężymorda&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1397956-she-call-me-her-grat&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/685d38a2-808b-4136-85f5-be6813691c20/1682517987967.JPEG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1397956-she-call-me-her-grat&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/3bb8cd24-0ff4-40e8-8b0f-a554a2cf6714/1682517987996.JPEG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#wężymorda&quot;&gt;#&lt;/a&gt;Gratin de salsifis&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//www.swissmilk.ch/fr/recettes-idees/recettes/LM200711_21/gratin-de-salsifis/&quot;&gt;Gratin de salsifis&lt;/a&gt;,
  by swissmilk,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1397956-she-call-me-her-grat&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-04-26&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;water, salt, and lemon juice in pot&lt;/li&gt;
  &lt;li&gt;peel &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1kg&lt;/span&gt; of salsifis under the tap, trim to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15cm&lt;/span&gt;ish bits, directly into pot&lt;/li&gt;
  &lt;li&gt;boil &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15-20min&lt;/span&gt; – until relatively not super hard&lt;/li&gt;
  &lt;li&gt;drain and replace with cold water&lt;/li&gt;
  &lt;li&gt;butter a baking dish – an oval &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;130×185&lt;/span&gt; one was a bit small for a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500g&lt;/span&gt;-scaled batch and it got filled instead of getting two layers&lt;/li&gt;
  &lt;li&gt;lay out the salsifis, wrap the top-most layer in ham&lt;/li&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;300ml&lt;/span&gt; of &quot;half-cream&quot;, pepper, half a small spoon each of salt and paprika are poured over and down –
      I used 18% and had to push it down a bit, maybe wants 12% or something&lt;/li&gt;
  &lt;li&gt;grate gruyère and dump some cut hazelnuts on top – smashed works too&lt;/li&gt;
  &lt;li&gt;bake at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;220°&lt;/span&gt; for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20-25min&lt;/span&gt; – ideally you wanna get colour on the ham, but not burn the cheese&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;flower-rolls&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1341136-he-is-risen-to-an-un&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/c1132df0-720c-4f9b-9859-aa533b959935/DSC_2539.JPG&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1383268-who-need-they-brussy&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://staging.cohostcdn.org/attachment/87a35886-38b0-4092-b95d-b5940b45780d/DSC_2554.JPG&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#flower-rolls&quot;&gt;#&lt;/a&gt;Flower rolls (round steamed bread with an oil)&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  &lt;a href=&quot;//youtu.be/hpYrnQiGd6w&quot;&gt;Homemade flower rolls are delicious and no skills, suitable for novice making
                                   (&lt;span lang=&quot;zh-CN&quot;&gt;&lt;!--&quot;--&gt;家常花卷好吃无技巧，松软白亮方法简单，适合新手制作【海娟美食】&lt;!--&quot;--&gt;&lt;/span&gt;)&lt;/a&gt;,
  by Haijuan Food,
  replicated &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1341136-he-is-risen-to-an-un&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-04-15&lt;/span&gt;&lt;/a&gt;,
             &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1383268-who-need-they-brussy&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2023-04-23&lt;/span&gt;&lt;/a&gt;:&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500g&lt;/span&gt; of flour,
      &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4g&lt;/span&gt; of yeast,
      spoon of sugar,
      flock with &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;300g&lt;/span&gt; of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40°&lt;/span&gt; water,
      accrue,
      knead in bowl for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5min&lt;/span&gt;,
      he sleeps in the covered bowl for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;knead a bit on floured counter to de-gas, roll into cylinder, cut at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;⅖&lt;/span&gt;&lt;sup&gt;th&lt;/sup&gt;s or like a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;⅓&lt;/span&gt;&lt;sup&gt;rd&lt;/sup&gt;&lt;/li&gt;
  &lt;li&gt;both parts (small first, big goes around it):
   &lt;ol&gt;
    &lt;li&gt;flatten, roll out rectangularly –
        the major dimension will inform the output &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;Φ&lt;/span&gt;, but it'&lt;!--'--&gt;s relatively forgiving,
        and you can shorten and obversely elongate segments as required&lt;/li&gt;
    &lt;li&gt;thoroughly brush with oil – it &quot;had better be cooked&quot;; olive and a smelly one are fine, blank kujawski sucks&lt;/li&gt;
    &lt;li&gt;stochastically dust with dry flour a bit –
        unclear what this achieves, the splotches achieved don'&lt;!--'--&gt;t form a coherent layer and are not enough to influence adhesion in any way&lt;/li&gt;
    &lt;li&gt;roll tightly into a cylinder, preserving the major dimension&lt;/li&gt;
    &lt;li&gt;make sure it's not stuck and won't easily stick to the counter&lt;/li&gt;
    &lt;li&gt;cut &lt;em&gt;most&lt;/em&gt; of the way through every &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~3cm&lt;/span&gt; – you wanna leave like two layers alone&lt;/li&gt;
    &lt;li&gt;push down stick A on an edge segment, then stick B on the next one, and squeeze them downward and together, thus exposing the internal edges&lt;/li&gt;
    &lt;li&gt;apply stick C similarly on the subsequent segment, and squeeze it downward and together with stick B, then free stick A&lt;/li&gt;
    &lt;li&gt;repeat through-out all the segments&lt;/li&gt;
    &lt;li&gt;assemble into a circle in situ in a papered steamer&lt;/li&gt;
   &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;give him half a date – this is life advice&lt;/li&gt;
  &lt;li&gt;put the steamer on the pot, he sleeps for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10min&lt;/span&gt;&lt;/li&gt;
  &lt;li&gt;boil the water, then let rip for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15min&lt;/span&gt;, kill the heat and leave alone for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3min&lt;/span&gt;, extract&lt;/li&gt;
 &lt;/ol&gt;
 &lt;p&gt;
  The title'&lt;!--'--&gt;s right: suitable for completely inept imbeciles like me. 0 failure 0 technique.
 &lt;/p&gt;
&lt;/details&gt;
&lt;/article&gt; 
 &lt;article id=&quot;bubliki&quot;&gt; 
 &lt;center class=&quot;grid-by-each continued&quot;&gt; 
 &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0017-twitter-export#1533929176725594118&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0017-twitter-export/parser-output/media/1533929176725594118-FUmcYBvXwAA78H5.jpg&quot; /&gt;&lt;/a&gt;&lt;!-- 
 --&gt;&lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0017-twitter-export#1584894789878587392&quot;&gt;&lt;img loading=&quot;lazy&quot; class=&quot;grid-by-each&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0017-twitter-export/parser-output/media/1584894789878587392-Ff6s7wOX0AQGK5f.jpg&quot; /&gt;&lt;/a&gt; 
 &lt;/center&gt;
&lt;details open&gt;
 &lt;summary class=&quot;roboto-unscale&quot; style=&quot;font-weight: bold;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#bubliki&quot;&gt;#&lt;/a&gt;Бублики&lt;/summary&gt;
 &lt;p class=&quot;continuing&quot;&gt;
  Originally derived from
  &lt;a href=&quot;//youtu.be/PPHy_1R7Xu4&quot;&gt;Making the slavic bagel&lt;/a&gt;,
  by Life of Boris.
  First replicated
  &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0017-twitter-export#1533929176725594118&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2022-06-06&lt;/span&gt;&lt;/a&gt;,
  but this was my sole bread in-take for the
  &lt;a href=&quot;https://lfs.nabijaczleweli.xyz/0017-twitter-export#1584894789878587392&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2022-07-06–2022-10-28&lt;/span&gt;&lt;/a&gt;
  period (at which point I sustained multiple hand wounds, which don'&lt;!--'--&gt;t really cooperate well with this):&lt;/p&gt;
 &lt;ol class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~400g&lt;/span&gt; of flour,
      &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~100g&lt;/span&gt; of water,
      &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; eggs,
      &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; spoon of malt,
      &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; small spoon of salt,
      yeast;
      knead, adding flour until dry&lt;/li&gt;
  &lt;li&gt;ballify like six-wise and let rip for a bit – my notes just say &quot;let rip&quot;, natch; cover with a rag, spray with water; either half an hour or an hour&lt;/li&gt;
  &lt;li&gt;unstick, gently skrungle and expand the hole in the middle, boil each guy &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30s&lt;/span&gt;/side, flip once –
      you probably wanna dump some salt and the remaining flour to the medium;
      I do two at a time, whereupon they move to a plate and new guys enter, the plate ones get doused in salt/sesame/poppy, and&lt;/li&gt;
  &lt;li&gt;why do they call it oven when you of in the cold food of out the &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~185°&lt;/span&gt; for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15-40min&lt;/span&gt; –
      harder flours rise less and need longer, full-pump white is the lower bound here&lt;/li&gt;
 &lt;/ol&gt;
&lt;/details&gt;
&lt;/article&gt;
&lt;/span&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/014-unix-pre-v4-pid0-corollary.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/014-unix-pre-v4-pid0-corollary.html" />
    <title> 014. PID 0 in V1 UNIX (and V4 nsys, and the PDP-7 proto-UNIX) — blognꞌt — nabijaczleweli </title>
    <updated>2024-06-10T01:04:14+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;014. PID 0 in V1 UNIX (and V4 nsys, and the PDP-7 proto-UNIX)&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Mon, 10 Jun 2024 01:04:14 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#v1'&gt;The UNIX Programmer'&lt;!--'--&gt;s Manual (&amp;c.)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#nsys'&gt;nsys &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; (the V4 what isn'&lt;!--'--&gt;t)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#pdp7'&gt;that funny PDP-7 proto-unix&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;h2 id=&quot;v1&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#v1&quot;&gt;#&lt;/a&gt; The UNIX Programmer'&lt;!--'--&gt;s Manual (&amp;c.)&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//blog.dave.tf/post/linux-pid0/&quot;&gt;David Anderson'&lt;!--'--&gt;s &lt;cite&gt;What is PID 0?&lt;/cite&gt;&lt;/a&gt;
(on &lt;a href=&quot;//hachyderm.io/@danderson/112577183087638679&quot;&gt;mastussy&lt;/a&gt;)
analyses the popular misconceptions (or, indeed, one guy'&lt;!--'--&gt;s wikipedia edit) of if, and what, PID 0 is,
but stops its retrospective at Version 4 &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; because it'&lt;!--'--&gt;s the first one written in C.
This, in many ways, is like stopping a retrospective on the Great War when the British joined because they talk weird in Sarajevo.
Thankfully, I talk exactly as weird, and am similarly ready to shoot a prince.
Has this protracted {slavic/english} {unix/war} {franz-ferdinand/englishman} analogy overstayed its welcome yet.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
To rectify this, and analyse it forward rather than in reverse, we can take advantage of unix72
(or &lt;a href=&quot;//code.google.com/archive/p/unix-jun72/&quot;&gt;unix-jun72&lt;/a&gt;
 (but the one and only SVN dump tarball calls it &lt;samp&gt;unix72/&lt;/samp&gt;,
  as does &lt;a href=&quot;//github.com/bambams/unix72&quot;&gt;a mirror&lt;/a&gt;
  (note that it says it's a fork but it actually appears to have SVN-imported commits exclusively, unlike the &quot;original&quot; which has been damaged; it's all bad));
 the more real mirror is &lt;a href=&quot;//www.tuhs.org/&quot;&gt;&lt;abbr title=&quot;TUHS&quot;&gt;The Unix Heritage Society&lt;/abbr&gt;&lt;/a&gt;'&lt;!--'--&gt;s
 (one of them; the &lt;a href=&quot;//wiki.tuhs.org/doku.php?id=source:unix_archive&quot;&gt;TUHS mirror structure&lt;/a&gt; is sociopathic)
 which reproduces said dump as &lt;a href=&quot;http://ftp.okass.net/pub/mirror/minnie.tuhs.org/Distributions/Research/Dennis_v1/&quot;&gt;&lt;samp&gt;svntree-20081216.tar.gz&lt;/samp&gt;&lt;/a&gt;)
which transcribes
&lt;cite&gt;&lt;a href=&quot;//bitsavers.org/pdf/att/unix/Early_UNIX/PreliminaryUnixImplementationDocument_Jun72.pdf&quot;&gt;Jim DeFelice'&lt;!--'--&gt;s 1972-06-20 &lt;samp&gt;Preliminary Release of UNIX Implementation Document&lt;/samp&gt;&lt;/a&gt;&lt;/cite&gt;,
which itself includes
&lt;/p&gt;
&lt;ol id=&quot;PreliminaryUnixImplementationDocument_Jun72-toc&quot;&gt;
 &lt;li&gt;a driver (in the form of a patch) for the &lt;a href=&quot;//w140.com/tekwiki/wiki/4002&quot;&gt;T4002A graphics terminal&lt;/a&gt; (2 pgs)&lt;/li&gt;
 &lt;li&gt;&lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; (11 segments (&lt;code&gt;u0&lt;/code&gt;, …, &lt;code&gt;u&lt;var&gt;n&lt;/var&gt;&lt;/code&gt;, …, &lt;code&gt;u9&lt;/code&gt;, &lt;code&gt;ux&lt;/code&gt;), described in &lt;code&gt;F&lt;/code&gt;; 80 pgs)&lt;/li&gt;
 &lt;li&gt;&lt;samp&gt;/bin/sh&lt;/samp&gt; (7 pgs)&lt;/li&gt;
 &lt;li&gt;&lt;samp&gt;/etc/init&lt;/samp&gt; (4 pgs)&lt;/li&gt;
 &lt;li&gt;&lt;q&gt;System Overview&lt;/q&gt;, which is all the shit they couldn'&lt;!--'--&gt;t stuff elsewhere (17 pgs)&lt;/li&gt;
 &lt;li&gt;&lt;q&gt;Data Base Item Descriptions&lt;/q&gt;, or, in modern parlance, all the kernel variables (12 pgs)&lt;/li&gt;
 &lt;li&gt;effectively manual sexion 9 (kernel subroutines) (10 subsexions, internally counted as &lt;samp&gt;U&lt;var&gt;nn&lt;/var&gt;&lt;/samp&gt;, matching the &lt;code&gt;H.&lt;var&gt;nn&lt;/var&gt;&lt;/code&gt; segments; 156 pgs)&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;code&gt;H.0–H.9&lt;/code&gt; is a re-print of
&lt;cite&gt;&lt;a href=&quot;//bitsavers.org/pdf/att/unix/Early_UNIX/Kernel_Subroutine_Descriptions_Mar72.pdf&quot;&gt;our current UNIX documentation&lt;/a&gt; as of 1972-04-03, also by Jim DeFelice&lt;/cite&gt;.
Both are &lt;a href=&quot;http://ftp.okass.net/pub/mirror/minnie.tuhs.org/Distributions/Research/Dennis_v1/&quot;&gt;redistributed by the TUHS&lt;/a&gt;.
This is a different Jim DeFelice than the famous author
(but I'm basing that entirely off the fact that the author would've been 11 when he started at Bell. maybe americans allow this).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Aptly, &lt;code&gt;F&lt;/code&gt;, 1. Overview says that
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
There are three major portions of UNIX: the file system, the process control system, and the rest.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;and&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
It has been mentioned parenthetically that UNIX is not very modular.
Its lack of modularity is reflected in this document.
Therefore (to paraphrase Fenichel and McIlroy referring to their description of TMGL) no single order of reading can be recommended;
instead a chimneying technique is suggested, climbing not one wall at a time, but all simultaneously.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
but, besides a truly astounding slew of typos (at best it's the &quot;process wail facility&quot;, at worst it's gibberish)
the sexion nevertheless contains relevant information on process lifetime and syscall and scheduler design,
both as a general overview of fundamental &lt;span class=&quot;smallcaps&quot;&gt;UNIX&lt;/span&gt; semantics &lt;em&gt;and&lt;/em&gt; as implementation minutiae.
&lt;/p&gt;
&lt;p class=&quot;continuing indented&quot;&gt;
For our case, the most interesting part of scheduler design is that the document implies there is none:
&lt;q&gt;The system can legitimately be entered only by some sort of trap &lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt; that is, sys&lt;/q&gt;,
further backed up by
&lt;q&gt;At sysret, &lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt; a check is made to determine if the user'&lt;!--'--&gt;s time quantum ran out during his execution in the system.
If so, tswap is called to give another user a chance to run.&lt;/q&gt;
which implies a per-user quantum-overflow-only (this is a period-accurate way of spelling &quot;time slice&quot;) re-scheduling (to another user) only at syscalls,
but there &lt;em&gt;is&lt;/em&gt; very much a timer interrupt:
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continuing&quot; id=&quot;#interrupt vectors&quot;&gt;
 &lt;a href=&quot;#interrupt vectors&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;interrupt vectors&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;. = orig+60&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       ttyi;240 &lt;span class=&quot;comment&quot;&gt;/ interrupt vector tty in       ; processor level 5&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       ttyo;240 &lt;span class=&quot;comment&quot;&gt;/ interrupt vector tty out&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       ppti;240 &lt;span class=&quot;comment&quot;&gt;/                  punch papertape in&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       ppto;240 &lt;span class=&quot;comment&quot;&gt;/                  punch papertape out&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       clock;340 &lt;span class=&quot;comment&quot;&gt;/ clock interrupt vector       ; processor level 7&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; . = orig+200&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/     lpto; 240  line printer interrupt     ; processor level 5 (future)&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; . = orig+204&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       drum;300 &lt;span class=&quot;comment&quot;&gt;/ drum interrupt         ; processor level 6&lt;/span&gt;&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;blockquote class=&quot;u69 continuing&quot; id=&quot;#clock&quot;&gt;
 &lt;a href=&quot;clock&quot;&gt;
  &lt;span&gt;u4&lt;/span&gt;
  &lt;div&gt;clock:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;clock: &lt;span class=&quot;comment&quot;&gt;/ interrupt from 60 cycle clock&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       mov     r0,-(sp) &lt;span class=&quot;comment&quot;&gt;/ save r0&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       tst     *$lks &lt;span class=&quot;comment&quot;&gt;/ restart clock?&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       mov     $s.time+2,r0 &lt;span class=&quot;comment&quot;&gt;/ increment the time of day&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       inc     (r0)&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;       mov     $uquant,r0 &lt;span class=&quot;comment&quot;&gt;/ decrement user time quantum&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       decb    (r0)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       bge     1f &lt;span class=&quot;comment&quot;&gt;/ if less than 0&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       clrb    (r0) &lt;span class=&quot;comment&quot;&gt;/ make it 0&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;1: &lt;span class=&quot;comment&quot;&gt;/ decrement time out counts return now if priority was not 0&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       cmp     4(sp),$200 &lt;span class=&quot;comment&quot;&gt;/ ps greater than or equal to 200&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       bge     2f &lt;span class=&quot;comment&quot;&gt;/ yes, check time outs&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       tstb    (r0) &lt;span class=&quot;comment&quot;&gt;/ no, user timed out?&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       bne     1f &lt;span class=&quot;comment&quot;&gt;/ no&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       cmpb    sysflg,$-1 &lt;span class=&quot;comment&quot;&gt;/ yes, are we outside the system?&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       bne     1f &lt;span class=&quot;comment&quot;&gt;/ no, 1f&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       mov     (sp)+,r0 &lt;span class=&quot;comment&quot;&gt;/ yes, put users r0 in r0&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       sys     0 / sysrele&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       rti&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Syntactic informer: addresses in the form &lt;samp&gt;1f&lt;/samp&gt;, &lt;samp&gt;2b&lt;/samp&gt;, &amp;c.
Indicate the address of &quot;next label 1, forward&quot; and &quot;next label 2, backward&quot;.
Also, notice how there'&lt;!--'--&gt;s a &lt;samp&gt;$&lt;/samp&gt; sometimes in front of numbers or addresses?
This means &quot;this is a number/pointer, not a variable to dereference&quot;.
Usually. This is vibes-based.
Also also, I gave up trying to highlight this shit (sorry).
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;
Which corresponds to &lt;code&gt;sys rele (II)&lt;/code&gt; (p. 128) in the &lt;cite&gt;&lt;a href=&quot;http://ftp.okass.net/pub/mirror/minnie.tuhs.org/Distributions/Research/Dennis_v1/UNIX_ProgrammersManual_Nov71.pdf&quot;&gt;UNIX Programmer'&lt;!--'--&gt;s Manual&lt;/a&gt;&lt;/cite&gt;:
&lt;/p&gt;
&lt;blockquote class=&quot;manual continuing&quot; id=&quot;sys rele (ii)&quot;&gt;
 &lt;a href=&quot;#sys rele (ii)&quot;&gt;
  &lt;span&gt;11/3/71&lt;/span&gt;
  &lt;div&gt;sys rele (ii)&lt;/div&gt;
 &lt;/a&gt;
 &lt;dl&gt;
  &lt;div&gt;&lt;dt&gt;name&lt;/dt&gt; &lt;dd&gt;rele -- release processor&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;synopsis&lt;/dt&gt; &lt;dd&gt;sys rele / rele = 0; not in assembler&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;description&lt;/dt&gt;&lt;dd&gt;This call causes the process to be swapped out immediately if another process wants to run.&lt;!--&quot;--&gt; &lt;!--&quot;--&gt; Its main reason for being is internal to the system, namely to implement timer-runout swaps.&lt;!--&quot;--&gt; &lt;!--&quot;--&gt; However, it can be used beneficially by programs which wish to loop for some reason without consuming more processor time than necesary.&lt;/dd&gt;&lt;/div&gt;
 &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
and indeed &lt;code&gt;sysrele&lt;/code&gt; just calls &lt;code&gt;tswap&lt;/code&gt;, which has little to do with the user (indeed &lt;code&gt;u.uid&lt;/code&gt; isn'&lt;!--'--&gt;t mentioned),
and resets the timer thusly:
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continuing&quot; id=&quot;tswap&quot;&gt;
 &lt;a href=&quot;#tswap&quot;&gt;
  &lt;span&gt;u3&lt;/span&gt;
  &lt;div&gt;tswap:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;       movb    $30.,uquant &lt;span class=&quot;comment&quot;&gt;/ initialize process time quantum&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       rts     r0 &lt;span class=&quot;comment&quot;&gt;/ return&lt;/span&gt;&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
so, a &quot;process time&quot;, not a &quot;user time&quot;.
Indeed, we can attribute this confusion to the author'&lt;!--'--&gt;s misconstruance of &quot;user&quot; (and the various &lt;code&gt;u.&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;&lt;/code&gt; variables) in the comments
as referring to the user (as in a system user) where it'&lt;!--'--&gt;s usually used as &lt;!--&quot;--&gt;&quot;current user-space process &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; is interrupting&quot;&lt;!--&quot;--&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
So, if I'&lt;!--'--&gt;m reading this right, then a normal-priority process (I cut off a lot of other bollocks from &lt;code&gt;clock&lt;/code&gt;)
will get to run for around 30 ticks / 60Hz = 500ms without making any syscalls before being considered for swapping out,
while a high-priority process will only be considered for swapping out after it makes a syscall.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Now that we've established a bidirexionally-adversarial rapport with the text, it's time to really analyse it.
Note that to assemble the unix72 scans back into files, you can run &lt;code&gt;tools/rebuild&lt;/code&gt;, and this will also apply patches from &lt;code&gt;patches/core/&lt;/code&gt;;
these wouldn'&lt;!--'--&gt;t materially affect this analysis, but it is nevertheless performed on the unpatched source.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
There is one interesting patch, not applied by default: &lt;code&gt;cold.patch&lt;/code&gt;.
This, shockingly, sets the &lt;code&gt;cold&lt;/code&gt; flag in &lt;code&gt;u0&lt;/code&gt;,
which &lt;em&gt;creates the root filesystem on boot&lt;/em&gt;.
This is inextricably linked with the
&lt;/p&gt;
&lt;blockquote class=&quot;manual continuing&quot; id=&quot;boot procedures (vii)&quot;&gt;
 &lt;a href=&quot;#boot procedures (vii)&quot;&gt;
  &lt;span&gt;11/3/71&lt;/span&gt;
  &lt;div&gt;boot procedures (vii)&lt;/div&gt;
 &lt;/a&gt;
 &lt;dl&gt;
  &lt;div&gt;&lt;dt&gt;name&lt;/dt&gt; &lt;dd&gt;bos, maki, rom, vcboot, msys, et al&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;synopsis&lt;/dt&gt; &lt;dd&gt;--&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;description&lt;/dt&gt;&lt;dd&gt;On the RF disk &lt;span class=&quot;cmt&quot;&gt;&lt;span class=&quot;roboto-unscale roboto&quot;&gt;(this is the fixed disk with the root filesystem on it)&lt;/span&gt;&lt;/span&gt;, the highest 16K words are reserved for stand-alone programs.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;These 16K words are allocated as follows:

&lt;!--&quot;--&gt;bos		(1K)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Warm UNIX	(6K)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Cold UNIX	(6K)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;unassigned	(6K)&lt;!--&quot;--&gt;

The UNIX read only memory (ROM) is home cut&lt;span class=&quot;cmt&quot;&gt;[?]&lt;/span&gt; with 2 programs of 16 words each.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;The first &lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt; reads &lt;u&gt;bos&lt;/u&gt; from the RF disk into core &lt;span class=&quot;cmt&quot;&gt;[and transfers to it]&lt;/span&gt;.

&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;

The program &lt;u&gt;bos&lt;/u&gt; (Bootstrap Operating System) examines the console switchs and executes one of several internal programs &lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;The following settings are currently recognized:

&lt;!--&quot;--&gt;173700&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;73700	Will read Warm UNIX from the RF into core location 0 and transfer to 400,&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;1	Will read Cold UNIX from the RF into core location 0 and transfer to 400,&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;2	Will read the unassigned 3K program into core location 0 and transfer to 400,&lt;!--&quot;--&gt;

&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;

Thus we come to the UNIX warm boot procedure: put 173700 into the switches, push &lt;u&gt;load&lt;/u&gt; &lt;u&gt;address&lt;/u&gt; and then push &lt;u&gt;start&lt;/u&gt;.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;The alternate switch setting of 73700 that will load warm UNIX is used as a signal to bring up a single user system for special purposes.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;See /&lt;u&gt;etc&lt;/u&gt;/&lt;u&gt;init&lt;/u&gt;.

Cold boots can be accomplished with the Cold UNIX program, but they'&lt;!--'--&gt;re not.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Thus the Cold UNIX slot on the RF may have any program desired.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;This slot is, however, used during a cold boot.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;span class=&quot;roboto-unscale roboto&quot;&gt;How to install the &quot;UNIX INIT DECtape&quot;, what to press to run it, and what programs are on it, is explained in grueling detail here.&lt;/span&gt;&lt;/span&gt;&lt;/dd&gt;&lt;/div&gt;
 &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
There is so much more, and it is all genuinely interesting and on page 195.
Also, all programmers being illiterate is clearly not a novel phenomenon.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
It &lt;em&gt;was&lt;/em&gt; relatively obvious that the entry point was &lt;del&gt;&lt;code&gt;400&lt;/code&gt;&lt;/del&gt; just the first bit of code in &lt;code&gt;u0&lt;/code&gt;,
but it'&lt;!--'--&gt;s good to know this for sure.
That said: let'&lt;!--'--&gt;s initialise.
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;constants&quot;&gt;
 &lt;a href=&quot;#constants&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;constants&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;nproc = 16. &lt;span class=&quot;comment&quot;&gt;/ number of processes&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;nfiles = 50.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;ntty = 8+1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;nbuf = 6&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; .if cold &lt;span class=&quot;comment&quot;&gt;/ ignored if cold = 0&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;nbuf = 2&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;.endif&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;core = orig+40000  &lt;span class=&quot;comment&quot;&gt;/ specifies beginning of user's core&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;ecore = core+20000 &lt;span class=&quot;comment&quot;&gt;/ specifies end of user's core (4096 words)&lt;/span&gt;&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;blockquote class=&quot;u69 continuation&quot; id=&quot;entry point&quot;&gt;
 &lt;a href=&quot;#entry point&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;entry point&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;. = orig+400&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ copy in transfer vectors&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	mov    $ecore,sp &lt;span class=&quot;comment&quot;&gt;/ put pointer to ecore in the stack pointer&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr    r0,copyz; 0; 14 &lt;span class=&quot;comment&quot;&gt;/ clear locations 0 to 14 in core&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    $4,r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	clr    r1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,(r1)+ &lt;span class=&quot;comment&quot;&gt;/ put value of 4 into location 0&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,(r1)+ &lt;span class=&quot;comment&quot;&gt;/ put value of 4 into location 2&lt;/span&gt;&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Historical and syntactic reminder: nothing is hexadecimal yet.
Numbers that end with a full stop are decimal (there are &lt;code&gt;16&lt;/code&gt; processes that can have &lt;code&gt;50&lt;/code&gt; file descriptions open),
everything else is octal
(the &lt;q&gt;beginning of user'&lt;!--'--&gt;s core&lt;/q&gt; (smallest userspace address) is &lt;code&gt;&lt;var&gt;orig&lt;/var&gt;+40000&lt;sub class=&quot;roboto&quot;&gt;(8)&lt;/sub&gt;&lt;/code&gt; = &lt;code&gt;&lt;var&gt;0&lt;/var&gt;+16384&lt;sub class=&quot;roboto&quot;&gt;(10)&lt;/sub&gt;&lt;/code&gt;,
 and the maximal userspace address is thus &lt;code&gt;&lt;var&gt;core&lt;/var&gt;+20000&lt;sub class=&quot;roboto&quot;&gt;(8)&lt;/sub&gt;&lt;/code&gt; = &lt;code&gt;&lt;var&gt;16384(10)&lt;/var&gt;+8192&lt;sub class=&quot;roboto&quot;&gt;(10)&lt;/sub&gt;&lt;/code&gt;,
 thus the userspace has &lt;var&gt;ecore&lt;/var&gt;−&lt;var&gt;core&lt;/var&gt; = 8192&lt;sub &gt;(8)&lt;/sub&gt; bytes = 4096 words,
 which is congruent with the comment).
But there are &lt;code&gt;8+1&lt;/code&gt;=9 ttys, even though 8 is not in octal. Wondrous.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
This bit doesn'&lt;!--'--&gt;t really do much, except initialise three interrupt vectors (one shown) which are overridden by the a.out header (and thus commented out).
This corresponds to pages in section E.0 in &lt;a href=&quot;//bitsavers.org/pdf/att/unix/Early_UNIX/PreliminaryUnixImplementationDocument_Jun72.pdf&quot;&gt;the PDF&lt;/a&gt;,
which is physical page 6 (and companion section H.0 which is physical page 126).
It'&lt;!--'--&gt;s convenient to follow along (indeed, these tend to be annotated by hand (with a pen) with relevant metatext).
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;memory initialisation&quot;&gt;
 &lt;a href=&quot;#memory initialisation&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;memory initialisation&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ clear core&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.if cold &lt;span class=&quot;comment&quot;&gt;/ ignored if cold = 0&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	halt &lt;span class=&quot;comment&quot;&gt;/ halt before initializing rf file system; user has&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;             &lt;span class=&quot;comment&quot;&gt;/ last chance to reconsider&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.endif&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	jsr    r0,copyz; systm; ecore &lt;span class=&quot;comment&quot;&gt;/ clear locations systm to ecore&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    $s.chrgt+2,clockp &lt;span class=&quot;comment&quot;&gt;/ intialize clockp&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ allocate tty buffers; see H.0 for description&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ allocate disk buffers; see H.0 for description&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ set devices to interrupt&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ set up time out subroutines&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ free all character blocks; see H.0 for description&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ set up drum swap addresses; see H.0 for description&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ free rest of drum&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.if cold&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ zero i list&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;	.endif&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;code&gt;systm&lt;/code&gt; is the start of the kernel variable block (all of which reside in &lt;code&gt;ux&lt;/code&gt;, and &lt;code&gt;systm&lt;/code&gt; is actually the root filesystem superblock), and is the last thing before &lt;code&gt;core&lt;/code&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Note that &lt;code&gt;s.chrgt&lt;/code&gt; is just a variable (symbol) called &lt;var&gt;s.chrgt&lt;/var&gt;.
Given the &lt;code&gt;&lt;q&gt;$&lt;/q&gt;&lt;/code&gt;,
the &lt;code&gt;mov&lt;/code&gt; can be expressed as (in C parlance) &quot;&lt;samp&gt;clockp = (char *)(&amp;s.chrgt) + 2&lt;/samp&gt;&quot;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Do not be confused by the convenient naming: &lt;code&gt;r0&lt;/code&gt; is just a variable. The PDP-11 has no registers.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;q&gt;The drum&lt;/q&gt; refers &lt;em&gt;not&lt;/em&gt; to an actual drum but the RF fixed disk where the root filesystem is
(the one from boot procedures (VII) with the kernels and BPP on it).
But they'&lt;!--'--&gt;re &lt;em&gt;really&lt;/em&gt; adamant about calling it a &quot;drum&quot; and contrasting it to disks (as in the 2.5MB &quot;RK&quot; removable disk with /usr),
and &lt;em&gt;only&lt;/em&gt; doing so in the kernel source and this &lt;cite&gt;Implementation Document&lt;/cite&gt; that I deadass thought there was another device,
and not shown to the userspace. The nomenclature is so ancient it's like it's from another dimension.
But yes, the root disk has 1024 512-byte blocks.
The top 64 (32kB) are &lt;q&gt;set aside for storing UNIX itself&lt;/q&gt; and this is the bit with the kernels and BPP in it,
then the processes get 17 blocks each (8.5kB; this is congruent with having 8kB of userspace RAM + 1 accounting block consisting of the &lt;var&gt;user&lt;/var&gt; label (which includes all &lt;var&gt;u.&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;&lt;/var&gt; variables)).
Thus we can eke out the formatting of the fixed disk as &lt;samp&gt;[/: 344kB; swap: 16·8.5kB=136kB; bootloader area: 32kB]&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
The next two bits effectively do &lt;samp&gt;mkfs /dev/rf0 /&lt;/samp&gt; (on the cold kernel) by zeroing most of it out and configuring the superblock accordingly,
with user data reaching up to block 687 (which matches &lt;span style=&quot;white-space: nowrap;&quot;&gt;1024−64−17·(&lt;var&gt;nproc&lt;/var&gt;=16)&lt;/span&gt; so the entire disk is accounted for).
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;magick&quot;&gt;
 &lt;a href=&quot;#magick&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;magick&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ make current program a user&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	mov    $41.,r0 &lt;span class=&quot;comment&quot;&gt;/ rootdir set to 41 and never changed&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,rootdir &lt;span class=&quot;comment&quot;&gt;/ rootdir is i-number of root directory&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,u.cdir &lt;span class=&quot;comment&quot;&gt;/ u.cdir is i-number of process current directory&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    $1,r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	movb   r0,u.uno &lt;span class=&quot;comment&quot;&gt;/ set process table index for this process to 1&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,mpid &lt;span class=&quot;comment&quot;&gt;/ initialize mpid to 1&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,p.pid &lt;span class=&quot;comment&quot;&gt;/ p.pid identifies process&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	movb   r0,p.stat &lt;span class=&quot;comment&quot;&gt;/ process status = 1 i.e., active&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                         &lt;span class=&quot;comment&quot;&gt;/                = 0 free&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.if cold         &lt;span class=&quot;comment&quot;&gt;/                = 2 waiting for a child to die&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                         &lt;span class=&quot;comment&quot;&gt;/                = 3 terminated but not yet waited&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                         &lt;span class=&quot;comment&quot;&gt;/                  for&lt;/span&gt;&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
This is where the magic happens. This is what you came here for. Let'&lt;!--'--&gt;s prototype this in C for the gamers:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;NPROC&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;uint16_t&lt;/span&gt; rootdir&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;uint16_t&lt;/span&gt; u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cdir&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;uint8_t&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;uno&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;uint16_t&lt;/span&gt; mpid&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;uint16_t&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;NPROC&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;uint8_t&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stat&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;NPROC&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// make current program a user&lt;/span&gt;

&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// rootdir set to 41 and never changed&lt;/span&gt;
rootdir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// rootdir is i-number of root directory&lt;/span&gt;
u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cdir&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;41&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// u.cdir is i-number of process current directory&lt;/span&gt;

u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;uno&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// set process table index for this process to 1&lt;/span&gt;
mpid&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// initialize mpid to 1&lt;/span&gt;
p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pid&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// p.pid identifies process&lt;/span&gt;
p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stat&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// process status = 1 i.e., active&lt;/span&gt;
&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;= 0 free&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;COLD&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;= 2 waiting for a child to die&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;= 3 terminated but not yet waited for&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
This means, in order:
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;rootdir&lt;/var&gt; is just a constant, but defined as a symbol.
/ is defined as being i-node 41, and this sets that.
(We have zeroed the whole variable block in the last step.)
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;u.cdir&lt;/var&gt; is the i-node of the process'&lt;!--'--&gt;s working directory,
on device &lt;var&gt;u.cdev&lt;/var&gt; (previously zeroed, and 0 = RF),
so the process we are becoming is now in /.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;u.uno&lt;/var&gt; is the 1-based index into the process table (&lt;var&gt;p.&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;&lt;/var&gt;) of the current process, and 0 is used as a sentinel to mean &quot;no process, you &lt;em&gt;must&lt;/em&gt; swap me out&quot;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;mpid&lt;/var&gt; is the global PID counter. On &lt;samp&gt;sys fork&lt;/samp&gt; (II), a new process is assigned &lt;samp&gt;p.pid[…] = ++mpid;&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;var&gt;proc&lt;/var&gt; (under which all &lt;var&gt;p.&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;&lt;/var&gt; variables are found),
is the process table (though notice how it'&lt;!--'--&gt;s intrusively structured as arrays per-field rather than an array of objects; remember: no objects).
Thus, &lt;var&gt;p.pid[n]&lt;/var&gt; and &lt;var&gt;p.status[n]&lt;/var&gt; are the PID and status of process &lt;var&gt;n&lt;/var&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Thus, we can model the state before as:
&lt;/p&gt;
&lt;ul&gt;
 &lt;li&gt;next PID = 1&lt;/li&gt;
 &lt;li&gt;process table = {1..=16 = {free}}&lt;/li&gt;
 &lt;li&gt;not executing a process&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;continuing&quot;&gt;
and the state after as
&lt;/p&gt;
&lt;ul&gt;
 &lt;li&gt;next PID = 2&lt;/li&gt;
 &lt;li&gt;process table = {1 = {pid = 1, parent-pid = 0, not on the run queue, status = R}, 2..=16 = {free}}&lt;/li&gt;
 &lt;li&gt;executing process 1 in kernel mode&lt;/li&gt;
 &lt;li&gt;working directory: /&lt;/li&gt;
 &lt;li&gt;UID (and all other parameters you can think of): 0&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;continuation&quot;&gt;
and this is written in the correct order,
so you can't ever really say you're running PID 0
(like would be the case if the &lt;var&gt;p.pid&lt;/var&gt; and &lt;var&gt;p.stat&lt;/var&gt; assignments were swapped).
Between assigning &lt;var&gt;u.uno&lt;/var&gt; and &lt;var&gt;p.stat&lt;/var&gt; a &lt;em&gt;destroyed&lt;/em&gt; process is running, which is SOP for sys exit (II) &amp;c.
Admittedly, I don'&lt;!--'--&gt;t think the process would survive getting swapped out (or returned to at all), but it doesn't have to because we're in kernel mode.
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;superblock&quot;&gt;
 &lt;a href=&quot;#superblock&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;superblock&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;	.if cold&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ initialize inodes for special files (inodes 1 to 40.)&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;(we will revisit this)&lt;/span&gt;
&lt;!--&quot;--&gt;	.endif&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ next 2 instructions not executed during cold boot.&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bis    $2000,sb0 &lt;span class=&quot;comment&quot;&gt;/ sb0 I/O queue entry for superblock on drum;&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                         &lt;span class=&quot;comment&quot;&gt;/ set bit 10 to 1&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr    r0,ppoke &lt;span class=&quot;comment&quot;&gt;/ read drum superblock&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	tstb   sb0+1 &lt;span class=&quot;comment&quot;&gt;/ has I/O request been honored (for drum)?&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bne    1b &lt;span class=&quot;comment&quot;&gt;/ no, continue to idle.&lt;/span&gt;&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
By this time we still haven'&lt;!--'--&gt;t read in the superblock for the rootfs.
It'&lt;!--'--&gt;s always loaded as an invariant, and definitely before we do any filesystem operations.
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;init&quot;&gt;
 &lt;a href=&quot;#init&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;init&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	decb   sysflg &lt;span class=&quot;comment&quot;&gt;/ mormally sysflag=0, indicates executing in system&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    exec; 2f; 1f &lt;span class=&quot;comment&quot;&gt;/ generates trap interrupt; trap vector =&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                            &lt;span class=&quot;comment&quot;&gt;/ sysent; 0&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	br     panic &lt;span class=&quot;comment&quot;&gt;/ execute file/etc/init&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	2f;0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;2:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;/etc/init\0&gt; &lt;span class=&quot;comment&quot;&gt;/ UNIX looks for strings term, noted by nul\0&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;panic:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	clr    ps&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	dec    $0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bne    1b&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	dec    $5&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bne    1b&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jmp    *$173700 &lt;span class=&quot;comment&quot;&gt;/ rom loader address&lt;/span&gt;&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
and once again for the gamers:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;uint8_t&lt;/span&gt; sysflg&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;sysflg&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// mormally sysflag=0, indicates executing in system&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// generates trap interrupt; trap vector = sysent; 0&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;goto&lt;/span&gt; panic&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// execute file/etc/init&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;_1&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;_2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; _2&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/etc/init&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// UNIX looks for strings term, noted by nul\0&lt;/span&gt;

panic&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
ps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;uint16_t&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;uint16_t&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// I think??&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;goto&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0173700&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// rom loader address&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
Once more, in order:
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;sysflg&lt;/var&gt; is used as a flag that prevents running syscalls while in the kernel (see below).
This is what realistically delineates running in user and kernel modes
(indeed, some may say it'&lt;!--'--&gt;s a &lt;code&gt;flg&lt;/code&gt; what indicates being in &lt;code&gt;sys&lt;/code&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;code&gt;exec()&lt;/code&gt; is exactly how you'&lt;!--'--&gt;d run it from userspace (since, well, we are now).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
If that fails, then we panic by clearing processor flags (idk) and jumping to the loader that loads the BOS (cf. boot procedures (VII)).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
But not before doing something sociopathic with the word at 0 (this would be the address to jump to for interrupt 0(?), and is &lt;code&gt;4&lt;/code&gt;)
and the word at 5 (this is an odd address, so this is the high byte of the address for interrupt 1 (&lt;code&gt;unkni&lt;/code&gt;/&lt;code&gt;sysent&lt;/code&gt;) and the low byte of its processor flags word (0)).
Why?
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;sysent&quot;&gt;
 &lt;a href=&quot;#sysent&quot;&gt;
  &lt;span&gt;u1&lt;/span&gt;
  &lt;div&gt;sysent:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;unkni: &lt;span class=&quot;comment&quot;&gt;/ used for all system calls&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;sysent:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	incb	sysflg &lt;span class=&quot;comment&quot;&gt;/ indicate a system routine is&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	beq	1f &lt;span class=&quot;comment&quot;&gt;/ in progress&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jmp	panic &lt;span class=&quot;comment&quot;&gt;/ called if trap inside system&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;	(rest of syscall handling)&lt;!--&quot;--&gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;uint8_t&lt;/span&gt; sysflg&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;sysflg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;goto&lt;/span&gt; panic&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
(−1 if in userspace, 0 if in kernel, 1 if currently panicking).
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This clearly demonstrates that in V1 there is &lt;em&gt;no&lt;/em&gt; PID 0.
The system runs with no process, then it runs as a syscall of PID 1, then it runs &lt;code&gt;execl(&quot;/etc/init&quot;, &quot;/etc/init&quot;, 0)&lt;/code&gt; in PID 1, then it'&lt;!--'--&gt;s normal.
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;superblock installation&quot;&gt;
 &lt;a href=&quot;#superblock installation&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;superblock installation&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;	.if cold&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ initialize inodes for special files (inodes 1 to 40.)&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	mov    $40.,r1 &lt;span class=&quot;comment&quot;&gt;/ set r1=i-node-number 40.&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr    r0,iget &lt;span class=&quot;comment&quot;&gt;/ read i-node 'r1' from disk into inode area of&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                       &lt;span class=&quot;comment&quot;&gt;/ core and write modified inode out (if any)&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    $100017,i.flgs &lt;span class=&quot;comment&quot;&gt;/ set flags in core image of inode to indi-&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                              &lt;span class=&quot;comment&quot;&gt;/ cate allocated, read (owner, non-owner),&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                              &lt;span class=&quot;comment&quot;&gt;/ write (owner, non-owner)&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	movb   $1,i.nlks &lt;span class=&quot;comment&quot;&gt;/ set no. of links = 1&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	movb   $1,i.uid &lt;span class=&quot;comment&quot;&gt;/ set user id of owner = 1&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr    r0,setimod &lt;span class=&quot;comment&quot;&gt;/ set imod=1 to indicate i-node modified, also&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                          &lt;span class=&quot;comment&quot;&gt;/ stuff time of modification into i-node&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	dec    r1 &lt;span class=&quot;comment&quot;&gt;/ next i-node no. = present i-node no.-1&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bgt    1b &lt;span class=&quot;comment&quot;&gt;/ has i-node 1 been initialized; no, branch&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ initialize i-nodes r1.,...,47. and write the root device, binary, etc.,&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ directories onto fixed head disk. user temporary, initialization prog.&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	mov    $idata,r0 &lt;span class=&quot;comment&quot;&gt;/ r0=base addr. of assembled directories.&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    $u.off,u.fofp &lt;span class=&quot;comment&quot;&gt;/ pointer to u.off in u.fofp (holds file&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                             &lt;span class=&quot;comment&quot;&gt;/ offset)&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    (r0)+,r1&lt;span class=&quot;comment&quot;&gt;/r1=41.,...,47; &quot;0&quot; in the assembled directory&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                       &lt;span class=&quot;comment&quot;&gt;/ header signals last&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	beq    1f      &lt;span class=&quot;comment&quot;&gt;/ assembled directory has been written onto drum&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr    r0,imap &lt;span class=&quot;comment&quot;&gt;/ locate the inode map bit for i-node 'r1'&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bisb   mq,(r2) &lt;span class=&quot;comment&quot;&gt;/ set the bit to indicate the i-node is not&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                       &lt;span class=&quot;comment&quot;&gt;/ available&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr    r0,iget &lt;span class=&quot;comment&quot;&gt;/ read inode 'r1' from disk into inode area of&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                       &lt;span class=&quot;comment&quot;&gt;/ core and write modified i-node on drum (if any)&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    (r0)+,i.flgs &lt;span class=&quot;comment&quot;&gt;/ set flags in core image of inode from&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                            &lt;span class=&quot;comment&quot;&gt;/ assembled directories header&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	movb   (r0)+,i.nlks &lt;span class=&quot;comment&quot;&gt;/ set no. of links from header&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	movb   (r0)+,i.uid &lt;span class=&quot;comment&quot;&gt;/ set user id of owner from header&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr    r0,setimod &lt;span class=&quot;comment&quot;&gt;/ set imod=1 to indicate inode modified; also,&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                          &lt;span class=&quot;comment&quot;&gt;/ stuff time of modification into i-node&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    (r0)+,u.count &lt;span class=&quot;comment&quot;&gt;/ set byte count for write call equal to&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                             &lt;span class=&quot;comment&quot;&gt;/ size of directory&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,u.base &lt;span class=&quot;comment&quot;&gt;/ set buffer address for write to top of directory&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	clr    u.off &lt;span class=&quot;comment&quot;&gt;/ clear file offset used in 'seek' and 'tell'&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	add    u.count,r0 &lt;span class=&quot;comment&quot;&gt;/ r0 points to the header of the next directory&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr    r0,writei &lt;span class=&quot;comment&quot;&gt;/ write the directory and i-node onto drum&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	br     1b &lt;span class=&quot;comment&quot;&gt;/ do next directory&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.endif&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
Here-in:
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The first loop creates files 1–40 owned by UID 1 (&quot;sys&quot;), mode &lt;samp&gt;u=rw,o=rw&lt;/samp&gt;
(normal creation semantics apply; there isn'&lt;!--'--&gt;t a &quot;close&quot; or &quot;write&quot;,
 because only one i-node can be open at a time and &lt;code&gt;iget&lt;/code&gt; will flush the current one before opening a new one).
The first real file is 41 (that'&lt;!--'--&gt;s the root directory), and i-nodes smaller than this are devices,
with the equivalent of the modern &lt;var&gt;maj:min&lt;/var&gt; being just the i-node number:
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continuation&quot; id=&quot;iopen&quot;&gt;
 &lt;a href=&quot;#iopen&quot;&gt;
  &lt;span&gt;u5&lt;/span&gt;
  &lt;div&gt;iopen:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;iopen: &lt;span class=&quot;comment&quot;&gt;/ open file whose i-number is in r1&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        tst    r1 &lt;span class=&quot;comment&quot;&gt;/ write or read access?&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        blt    2f &lt;span class=&quot;comment&quot;&gt;/ write, go to 2f&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        jsr    r0,access; 2 &lt;span class=&quot;comment&quot;&gt;/ get inode into core with read access&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        cmp    r1,$40. &lt;span class=&quot;comment&quot;&gt;/ is it a special file&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        bgt    3f &lt;span class=&quot;comment&quot;&gt;/ no. 3f&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        mov    r1,-(sp) &lt;span class=&quot;comment&quot;&gt;/ yes, figure out&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        asl    r1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        jmp    *1f-2(r1) &lt;span class=&quot;comment&quot;&gt;/ which one and transfer to it&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        otty   &lt;span class=&quot;comment&quot;&gt;/ tty&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        oppt   &lt;span class=&quot;comment&quot;&gt;/ ppt&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        sret   &lt;span class=&quot;comment&quot;&gt;/ mem&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        sret    &lt;span class=&quot;comment&quot;&gt;/ rf0&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        sret   &lt;span class=&quot;comment&quot;&gt;/ rk0&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        sret   &lt;span class=&quot;comment&quot;&gt;/ tap0&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;        sret   &lt;span class=&quot;comment&quot;&gt;/ tap7&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        ocvt   &lt;span class=&quot;comment&quot;&gt;/ tty0&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;        ocvt   &lt;span class=&quot;comment&quot;&gt;/ tty7&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        error &lt;span class=&quot;comment&quot;&gt;/ crd&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;(this repeats for writes identically, but directories error)&lt;/span&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The second loop walks &lt;code&gt;idata&lt;/code&gt; to exhaustion, creating each given inode, copying the mode, link count, owner, and data.
What could the format &lt;em&gt;possibly&lt;/em&gt; be? The uzh, lest we forget that directories are just files with filenames inside:
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continuing&quot; id=&quot;idata&quot;&gt;
 &lt;a href=&quot;#idata&quot;&gt;
  &lt;span&gt;u0&lt;/span&gt;
  &lt;div&gt;idata:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;idata:&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ root&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	41.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	140016&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.byte 7,1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	9f-.-2&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	41.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;..\0\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	41.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;.\0\0\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	42.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;dev\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	43.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;bin\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	44.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;etc\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	45.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;usr\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	46.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;tmp\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;9:&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ device directory&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	42.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	140016&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.byte 2,1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	9f-.-2&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;	01.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;tty\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	02.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;ppt\0\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	03.&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;	01.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;tty8\0\0\0\0&gt; &lt;span class=&quot;comment&quot;&gt;/ really tty&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;9:&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ etcetra directory&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	44.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	140016&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.byte 2,3&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	9f-.-2&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;	47.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;init\0\0\0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;9:&lt;!--&quot;--&gt;

&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ initialization program&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	47.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	100036&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.byte 1,3&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	9f-.-2&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;8:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    break; 0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    open; 6f-8b+core; 0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,r1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    seek; 65.; 0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r1,r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    read; 9f-8b+core; 512.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    9f,r5            &lt;span class=&quot;comment&quot;&gt;/ size&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	beq    1f&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    creat; 9f-8b+core+4; 0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r0,r2&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	movb   9f+2,0f&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    chmod; 9f-8b+core+4; 0:..&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	movb   9f+3,0f&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    chown; 9f-8b+core+4; 0:..&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;2:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	tst    r5&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	beq    2f&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r1,r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    read; 9f-8b+core; 512.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    $512.,0f&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	cmp    r5,$512.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bhi    3f&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r5,0f&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;3:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r2,r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    write; 9f-8b+core; 0:..&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sub    r0,r5&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	br     2b&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;2:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r2,r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    close&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	br     1b&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov    r1,r0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    close&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    exec; 5f-8b+core; 4f-8b+core&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sys    exit&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;4:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	5f-8b+core; 0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;5:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;/etc/init\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;6:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	&amp;lt;/dev/tap0\0&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	.even&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;9:&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ end of initialization data&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	0&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	.endif&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
And the problem of including an &lt;samp&gt;/etc/init&lt;/samp&gt; which we inevitably execute is solved by using the kernel assembler to compile it directly into the faux filesystem image (admittedly, with a bit of a fucky &lt;code&gt;-8b+core&lt;/code&gt; addressing mode):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// cf. modern brk(2); this allocates the entire 8kB:&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;extern&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// we can pretend this variable exists just after program text&lt;/span&gt;

tape &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/dev/tap0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; O_RDONLY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;seek&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tape&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;65&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SEEK_SET&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tape&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;uint16_t&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;buf&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;file &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;creat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buf &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buf &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;chown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buf &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tape&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;size &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;file&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;file&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tape&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/etc/init&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
Thus, knowing that DECtapes are block-addressed, we can deduce the tape has a 65-block header, then alternatingly blocks containing
&lt;samp&gt;[size: 2B; mode: 1B; owner: 1B; name: NUL-terminated]&lt;/samp&gt;, and data to completion, ending in a file with &lt;samp&gt;size=0&lt;/samp&gt;.
Boot procedures (VII) say this init &lt;q&gt;reads the DECtape for initialization files starting from block 33&lt;/q&gt;.
It's unclear how one's supposed to reconcile this with the &lt;code&gt;65&lt;/code&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
So the filesystem, before loading from tape, consists of (omitting &lt;samp&gt;.&lt;/samp&gt; and &lt;samp&gt;..&lt;/samp&gt;):
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;
&lt;!--&quot;--&gt;41 /          &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;1 (sys)      [7 links] d-rwr-&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;   42 dev     &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;1 (sys)      [2 links] d-rwr-&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       1 tty      2 ppt      3 mem   &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;Every file: 1 (sys) [1 link] --rwrw&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;       4 rf0      5 rk0      6 tap0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;       7 tap1     8 tap2     9 tap3&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;      10 tap4    11 tap5    12 tap6&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;      13 tap7    14 tty0    15 tty1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;      16 tty2    17 tty3    18 tty4&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;      19 tty5    20 tty6    21 tty7&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;      22 lpr      1 tty8             (really tty)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   43 bin      &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;3 (bin, adm) [2 links] d-rwr-&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;   44 etc      &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;3 (bin, adm) [2 links] d-rwr-&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;      47 init  &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;3 (bin, adm) [1 link ] -xrwr-&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;   45 usr      &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;1 (sys)      [2 links] d-rwr-&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;   46 tmp      &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;&lt;!--&quot;--&gt;1 (sys)      [2 links] d-rwrw&lt;!--&quot;--&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;nsys&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#nsys&quot;&gt;#&lt;/a&gt; nsys &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; (the V4 what isn'&lt;!--'--&gt;t)&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
One would be remiss to not properly analyse the next available &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; as well.
&lt;a href=&quot;http://ftp.okass.net/pub/mirror/minnie.tuhs.org/Distributions/Research/Dennis_v2/&quot;&gt;V2&lt;/a&gt;? no.
&lt;a href=&quot;http://ftp.okass.net/pub/mirror/minnie.tuhs.org/Distributions/Research/Dennis_v3/&quot;&gt;V3&lt;/a&gt;? sure, but this is actually a &lt;em&gt;WIP&lt;/em&gt; of V4
(compare &lt;samp&gt;Readme.nsys&lt;/samp&gt; and &lt;samp&gt;Changes.txt&lt;/samp&gt; and the &lt;a href=&quot;//www.tuhs.org/cgi-bin/utree.pl?file=V4&quot;&gt;The Unix Tree&lt;/a&gt;-for-V4 comments):
it'&lt;!--'--&gt;s in C, sure, and time (II) already returns seconds since 1970,
but &lt;code&gt;&lt;q&gt;0, &amp;nosys, /* 42 = pipe */&lt;/q&gt;&lt;/code&gt; (V3 &lt;a href=&quot;//www.tuhs.org/cgi-bin/utree.pl?file=V3/man/man2/pipe.2&quot;&gt;already had pipes&lt;/a&gt;).
This is the same dump as &lt;a href=&quot;//github.com/dspinellis/unix-history-repo/blob/Research-V4/sys/ken/slp.c#L89&quot;&gt;what Anderson calls &quot;V4&quot;&lt;/a&gt;.
This is obviously wrong (no fault of his, of course, how were he to know), but V4 is one of the two things we know this is definitely not.
That said: probably close enough, given that the bits we care about are identical in V5.
And what would those be?
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;nsys-entry&quot;&gt;
 &lt;a href=&quot;#nsys-entry&quot;&gt;
  &lt;span&gt;ken/low.s&lt;/span&gt;
  &lt;div&gt;entry&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ low core&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;

&lt;!--&quot;--&gt;. = 0^.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	4&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	br	1f&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ trap vectors&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	trap; br7+0		&lt;span class=&quot;comment&quot;&gt;/ bus error&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	trap; br7+1		&lt;span class=&quot;comment&quot;&gt;/ illegal instruction&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	trap; br7+2		&lt;span class=&quot;comment&quot;&gt;/ bpt-trace trap&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	trap; br7+3		&lt;span class=&quot;comment&quot;&gt;/ iot trap&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	trap; br7+4		&lt;span class=&quot;comment&quot;&gt;/ power fail&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	trap; br7+5		&lt;span class=&quot;comment&quot;&gt;/ emulator trap&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	trap; br7+6		&lt;span class=&quot;comment&quot;&gt;/ system entry&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;. = 040^.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1:	jmp	start&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
Loaded at 0, jump to jump to &lt;code&gt;start&lt;/code&gt;.
It'&lt;!--'--&gt;s most convenient to follow along with &lt;a href=&quot;//www.tuhs.org/cgi-bin/utree.pl?file=V4/nsys&quot;&gt;The Unix Tree&lt;/a&gt;.
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continuing&quot; id=&quot;nsys-start&quot;&gt;
 &lt;a href=&quot;#nsys-start&quot;&gt;
  &lt;span&gt;ken/45.s&lt;/span&gt;
  &lt;div&gt;start:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ machine language assist&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ PDP-11/45&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;

&lt;!--&quot;--&gt;start:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bit	$1,SSR0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	bne	start			&lt;span class=&quot;comment&quot;&gt;/ loop if re-entry&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	reset&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ initialize systems segments&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ initialize user segmant&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ initialize io segment&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ set up counts on super segments&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ get a sp and start segmentation&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ clear bss&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ clear user block&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;/ set up previous mode and call main&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	mov	$30000,PS&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	jsr	pc,_main&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mov	$170000,-(sp)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	clr	-(sp)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	rti&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;blockquote class=&quot;u69 continuing&quot; id=&quot;nsys-main&quot;&gt;
 &lt;a href=&quot;#nsys-main&quot;&gt;
  &lt;span&gt;ken/main.c&lt;/span&gt;
  &lt;div&gt;main()&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;main()&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;{&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;	/*&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 * zero and free all of core&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 */&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	UISA-&gt;r[0] = KISA-&gt;r[6] + USIZE;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	UISD-&gt;r[0] = 6;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	for(; fubyte(0) &gt;= 0; UISA-&gt;r[0]++) {&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		clearseg(UISA-&gt;r[0]);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		mfree(coremap, 1, UISA-&gt;r[0]);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	}&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	mfree(swapmap, NSWAP, SWPLO);&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
This mirrors almost-verbatim what we saw in V1 setup, except we now have segmented memory
(and thus &lt;code&gt;malloc()&lt;/code&gt;/&lt;code&gt;mfree()&lt;/code&gt;; also &lt;code&gt;printf()&lt;/code&gt;(!)).
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;nsys-main-prep&quot;&gt;
 &lt;a href=&quot;#nsys-main-prep&quot;&gt;
  &lt;span&gt;ken/main.c&lt;/span&gt;
  &lt;div&gt;process prep&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;	/*&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 * set up system process&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 */&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	proc[0].p_addr = KISA-&gt;r[6];&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	proc[0].p_size = USIZE;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	proc[0].p_stat = SRUN;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	proc[0].p_flag =| SLOAD|SSYS;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	u.u_procp = &amp;proc[0];&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;	/*&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 * set up 'known' i-nodes&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 */&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;	rootdir = iget(ROOTDEV, ROOTINO);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	rootdir-&gt;i_flag =&amp; ~ILOCK;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	u.u_cdir = iget(ROOTDEV, ROOTINO);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	u.u_cdir-&gt;i_flag =&amp; ~ILOCK;&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
One last time:
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;proc[0].p_addr&lt;/var&gt; is the base of the process'&lt;!--'--&gt; address space and &lt;var&gt;proc[0].p_size&lt;/var&gt; is its size. but idk what the unit is lol
(it's gotta be chunks of &lt;em&gt;some&lt;/em&gt; size because the allocator's arena size is a &lt;samp&gt;char&lt;/samp&gt;, but fuck knows what;
 &lt;code&gt;USIZE&lt;/code&gt; is helpfully &lt;q&gt;8&lt;/q&gt;, and I'&lt;!--'--&gt;ve calculated the size of &lt;code&gt;u&lt;/code&gt; at 217 (or 228) bytes;
 maybe it's 32 bytes? that's awfully narrow but it fits).
In V1 this was &lt;samp&gt;[core; &lt;var&gt;u.break&lt;/var&gt;)&lt;/samp&gt; (and also the stack was separate. but close enough),
now it'&lt;!--'--&gt;s &lt;samp&gt;[&lt;var&gt;proc[…].p_addr&lt;/var&gt;, &lt;var&gt;proc[…].p_addr&lt;/var&gt; + &lt;var&gt;proc[…].p_size&lt;/var&gt;)&lt;/samp&gt;.
AFAICT, &lt;code&gt;KISA-&gt;r[6]&lt;/code&gt; is gonna be the Kernel I&lt;span class=&quot;cmt&quot;&gt;nstruction&lt;/span&gt;-Space Page Address Register #0, register 6
(there's a total of 8, matching the machine's &lt;a href=&quot;//gunkies.org/wiki/PDP-11_Memory_Management&quot;&gt;8 segments&lt;/a&gt;, so this probably means we'&lt;!--'--&gt;ll be executing from kernel instruction bank 6?).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;proc[0].p_stat&lt;/var&gt; is the same as before (except R is now 4).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;proc[0].p_flag&lt;/var&gt; is, AFAICT, &quot;loaded&quot; (as in: don'&lt;!--'--&gt;t need to swap in),
and &lt;code&gt;SSYS&lt;/code&gt; poisons the scheduler to never consider the process for being swapped out.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;var&gt;rootdir&lt;/var&gt; and &lt;var&gt;u.u_cdir&lt;/var&gt; mean the same thing as in V1,
but they are now entries into the open-inode table (and &lt;code&gt;iget()&lt;/code&gt; opens the given inode, returning a &lt;samp&gt;struct inode *&lt;/samp&gt;).
This system has a &quot;filesystem cache&quot;! Revolutionary.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;var&gt;u.u_procp&lt;/var&gt; is the equivalent of &lt;var&gt;u.uno&lt;/var&gt;, and is the process'&lt;!--'--&gt; index in the scheduler table.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Before we were strictly in kernel mode, now we'&lt;!--'--&gt;re running &lt;em&gt;as PID 0&lt;/em&gt;, as an unswappable system process executing kernel code, in /.
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;nsys-main-fork&quot;&gt;
 &lt;a href=&quot;#nsys-main-fork&quot;&gt;
  &lt;span&gt;ken/main.c&lt;/span&gt;
  &lt;div&gt;the scheduler and also init&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;&lt;span class=&quot;comment&quot;&gt;	/*&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 * make init process&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 * enter scheduling loop&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 * with system process&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	 */&lt;/span&gt;&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;	if(newproc()) {&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		expand(USIZE+1);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		u.u_uisa[0] = USIZE;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		u.u_uisd[0] = 6;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		sureg();&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		for(i=0; icode[i] != -1; i++)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;			suword(i*2, icode[i]);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		return;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	}&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	sched();&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;}&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;code&gt;newproc()&lt;/code&gt; is what does the forking in &lt;code&gt;fork()&lt;/code&gt;, and returns nonzero in the child.
This is the first known instance of the kernel forking.
Naturally, since &lt;code&gt;mpid&lt;/code&gt; was never changed, the new process is PID 1.
The special PID 0 process goes to &lt;code&gt;sched()&lt;/code&gt; and now does scheduling.
It will probably schedule our PID 1 instantly.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
And PID 1 will first allocate another 1 block (32 bytes?), then…
&lt;var&gt;u.u_uisa[0]&lt;/var&gt;&amp;&lt;var&gt;u.u_uisd[0]&lt;/var&gt; look awfully like the user instruction and data segments? This matches segment 6 for data?
But there are 8 segments (0–7 and &lt;code&gt;USIZE&lt;/code&gt; is 8 so fuck knows. maybe not). &lt;code&gt;sureg()&lt;/code&gt; sets user segment registers.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;code&gt;suword()&lt;/code&gt;, expectedly, sets words in user memory.
The loop effectively does a memcpy of &lt;code&gt;icode&lt;/code&gt; until &lt;samp&gt;-1&lt;/samp&gt; to user memory starting at user address 0,
and then we return there.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;code&gt;icode&lt;/code&gt; is, unfortunately,
&lt;code&gt;&lt;q&gt;int icode[]
{
 0104413,
 0000014,
 0000010,
 0000777,
 0000014,
 0000000,
 0062457,
 0061564,
 0064457,
 0064556,
 0000164,
 -1
};&lt;/q&gt;&lt;/code&gt;
so a beautiful methodology has definitely been lost. But a quick &lt;samp&gt;objcopy --dump-section .data=/dev/stdout a.o | od -t o2z -w014&lt;/samp&gt; later, this is
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;margin-left: 1em;&quot;&gt;&lt;samp&gt;&lt;!--&quot;--&gt;0000000 104413 000014 000010 000777 000014 000000  &gt;............&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000014 062457 061564 064457 064556 000164 177777  &gt;/etc/init...&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000030&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;/pre&gt;
from which the &lt;samp&gt;0000014&lt;/samp&gt; pointer stands out the most, so this can be trivially disassembled to
&lt;pre class=&quot;continuation&quot; style=&quot;margin-left: 1em;&quot;&gt;&lt;samp&gt;&lt;!--&quot;--&gt;0000000: sys exec; 0000014; 0000010&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000010: 0000014; 0000000&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000014: &amp;lt;/etc/init\0&gt;&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;indented&quot;&gt;
The &lt;code&gt;return&lt;/code&gt; returns to &lt;a href=&quot;#nsys-start&quot;&gt;&lt;code&gt;start:&lt;/code&gt;&lt;/a&gt;,
which explicitly (&lt;code&gt;clr&lt;/code&gt;) returns to address 0 in user mode (&lt;code&gt;rti&lt;/code&gt; returns &lt;em&gt;from an interrupr&lt;/em&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Anderson'&lt;!--'--&gt;s analysis is correct, even if by accident: based on nsys source, V4 will have most likely been the first &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; with a PID 0 scheduler process.
TTBOMK, this corresponds with this being the first system targeting the PDP-11/45 (or at least its memory segmentation features) rather than the PDP-11/20,
and thus a purely-interrupt-driven architecture was no longer possible.
(This hurts less when it'&lt;!--'--&gt;s one process out of a fifty than if it were one process out of sixteen, too.)
&lt;/p&gt;
&lt;h2 id=&quot;pdp7&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#pdp7&quot;&gt;#&lt;/a&gt; that funny PDP-7 proto-unix&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Since we're all here already, it'd be a shame to stop at Version 1 &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt;.
The scans for this system can be found
&lt;a href=&quot;http://ftp.okass.net/pub/mirror/minnie.tuhs.org/Distributions/Research/McIlroy_v0/&quot;&gt;at the TUHS as the number-named PDFs&lt;/a&gt;.
The accompanying document —
&lt;cite&gt;D. M. Ritchie'&lt;!--'--&gt;s &lt;samp&gt;&lt;a href=&quot;http://ftp.okass.net/pub/mirror/minnie.tuhs.org/Distributions/Research/McIlroy_v0/UnixEditionZero-Threshold_OCR.pdf&quot;&gt;DRAFT of The UNIX Time-Sharing System&lt;/a&gt;&lt;/samp&gt;&lt;/cite&gt;
— is a delightful 53 short pages (27 if you exclude the manuals (though they are not that yet)) and you should read or at least skim,
is found in the &lt;samp&gt;UnixEditionZero&lt;var&gt;*&lt;/var&gt;&lt;/samp&gt; files. For the PDFs I recommend &lt;samp&gt;Threshold_OCR&lt;/samp&gt;, which has text, bookmarks, and not-being-100MB.
An OCR-only text file is also available.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Well, the document says this documents &lt;samp&gt;&lt;q&gt;UNIX-11&lt;/q&gt;&lt;/samp&gt;, which is a mildly-redesigned port of &lt;samp&gt;&lt;q&gt;UNIX-7&lt;/q&gt;&lt;/samp&gt;. idk. it's the best I've got.
It's also the first and only mention I've ever seen of R. H. Canaday'&lt;!--'--&gt;s involvement.
But this document also contains my favourite lie (it'&lt;!--'--&gt;s honestly all gold, but.):
&lt;cite&gt;&lt;samp&gt;&lt;u&gt;5&lt;/u&gt;. &lt;u&gt;The&lt;/u&gt; &lt;u&gt;Shell&lt;/u&gt;, &lt;u&gt;5&lt;/u&gt;.&lt;u&gt;5&lt;/u&gt;. &lt;u&gt;Processes&lt;/u&gt; &lt;u&gt;and&lt;/u&gt; &lt;u&gt;forking&lt;/u&gt;&lt;/samp&gt;&lt;/cite&gt; (p. 18):
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;p class=&quot;continuation&quot;&gt;
  Except while UNIX is bootstrapping itself into operation, a new process can come into existence in only one way: by use of the &lt;u&gt;fork&lt;/u&gt; system call.
 &lt;/p&gt;
 &lt;pre class=&quot;continuing&quot; style=&quot;margin-left: 2em;&quot;&gt;&lt;code&gt;processid = fork(label) &lt;/code&gt;&lt;/pre&gt;
 &lt;p class=&quot;continued&quot;&gt;
  When fork is executed by a process, it splits into two idependently executing processes.
  The two processes have core images which are copies of each other, but they are not precisely equivalent:
  one of them is considered the parent process.
  In the parent, control does not return directly from the &lt;u&gt;fork&lt;/u&gt;, but instead passes to location &lt;u&gt;label&lt;/u&gt;;
  in the child process, there is a normal return.
  The &lt;u&gt;processid&lt;/u&gt; returned by the &lt;u&gt;fork&lt;/u&gt; call is the identification of the other, offspring process.
 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
This
  (a) shows dmr'&lt;!--'--&gt;s hand, since he almost-outright says the first process is produced magically, but also
  (b) is a delightful fib because this is, logically, what fork does, but:
&lt;cite&gt;&lt;samp&gt;&lt;u&gt;APPENDIX&lt;/u&gt; &lt;u&gt;1&lt;/u&gt;, &lt;u&gt;A1&lt;/u&gt;.&lt;u&gt;2&lt;/u&gt; &lt;u&gt;fork&lt;/u&gt;&lt;/samp&gt;&lt;/cite&gt; (p. A1-2; p. 37):
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;p class=&quot;continuation&quot;&gt;
  This is the primitive used to generate new processes.
 &lt;/p&gt;
 &lt;pre class=&quot;continuing&quot; style=&quot;margin-left: 2em;&quot;&gt;&lt;code&gt;sys fork
(old process return)
(new process return) &lt;/code&gt;&lt;/pre&gt;
 &lt;p&gt;
  There are no input arguments.
  &lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
  R0 contains the process identification of the new proces.
  See also section 5.
 &lt;/p&gt;
 &lt;p class=&quot;continued&quot;&gt;
  The parent process returns immediately after the &quot;sys&quot; call; the new process skips one word.
  (The label argument mentioned in the discussion of &lt;u&gt;fork&lt;/u&gt; in section 5.5 was a white lie.)
 &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
This also looks like the first syscall-type word.
Everything else calls them &quot;system calls&quot;, but this is a call to &quot;sys&quot;. Give it another year.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
The TUHS also distributes a
&lt;a href=&quot;http://ftp.okass.net/pub/mirror/minnie.tuhs.org/Distributions/Research/PDP7/pdp7-unix-master.zip&quot;&gt;zipped git export with no history&lt;/a&gt;,
which claims to be a transcription of the PDFs.
It may well be, and you may even be able to run it!
But the only reliable source is &lt;samp&gt;01-s1.pdf&lt;/samp&gt;.
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continued&quot; id=&quot;pdp7-s8-coldentry&quot;&gt;
 &lt;a href=&quot;#pdp7-s8-coldentry&quot;&gt;
  &lt;span&gt;s8, pp. 49–50&lt;/span&gt;
  &lt;div&gt;coldentry:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;coldentry:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   dzm 0100 &lt;span class=&quot;comment&quot;&gt;&quot; not re-entrant&lt;/span&gt;
&lt;!--&quot;--&gt;   caf&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;…&lt;/span&gt;
&lt;!--&quot;--&gt;   jms dskio; 06000&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   jms copy; dskbuf; sysdata; ulist-sysdata&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   lac d3&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   jms namei; initf&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;      jms halt&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   jms iget&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   cls&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   jms iread; 4096; 4096&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   jmp 4096&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;blockquote class=&quot;u69 continuing&quot; id=&quot;pdp7-s8-strings&quot;&gt;
 &lt;a href=&quot;#pdp7-s8-strings&quot;&gt;
  &lt;span&gt;s8, p. 48&lt;/span&gt;
  &lt;div&gt;&quot;init&quot;&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;span class=&quot;comment&quot;&gt;&quot; Strings&lt;/span&gt;&lt;!--&quot;--&gt;
initf:
&lt;!--&quot;--&gt;   &amp;lt;i&gt;n;&amp;lt;i&gt;t;&amp;lt; &gt; ;&amp;lt; &gt; &lt;span class=&quot;comment&quot;&gt;&quot;&lt;/span&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Also note the slew of &quot;constants&quot; on p. 48 which are variables in the form
&lt;code&gt;o212: 0212&lt;/code&gt;,
&lt;code&gt;d7999: 8999&lt;/code&gt;,
&lt;code&gt;dm3: -3&lt;/code&gt;.
It'&lt;!--'--&gt;s unclear if this saves space, or.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;var&gt;ulist&lt;/var&gt; is the process table (funnily enough, object-addressed):
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continuing&quot; id=&quot;pdp7-s8-ulist&quot;&gt;
 &lt;a href=&quot;#pdp7-s8-ulist&quot;&gt;
  &lt;span&gt;s8, p. 50&lt;/span&gt;
  &lt;div&gt;ulist:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;ulist:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   0131000;1;0;0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   0031040;0;0;0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   0031100;0;0;0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   0031140;0;0;0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;(and so on, there'&lt;!--'--&gt;s 10 total)&lt;/span&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
and fuck knows what the fields are, but the first one is very clearly initialised differently.
If I had to guess (and I do), the second field would be &lt;var&gt;pid&lt;/var&gt; because that'&lt;!--'--&gt;s congruent with the &lt;code&gt;userdata&lt;/code&gt;.
No clue what that high bit being set is.
&lt;/p&gt;
&lt;blockquote class=&quot;u69 continuation&quot; id=&quot;pdp7-s8-userdata&quot;&gt;
 &lt;a href=&quot;#pdp7-s8-userdata&quot;&gt;
  &lt;span&gt;s8, p. 50&lt;/span&gt;
  &lt;div&gt;userdata:&lt;/div&gt;
 &lt;/a&gt;
 &lt;pre&gt;&lt;!--&quot;--&gt;userdata:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   u.ac: 0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   u.mq: 0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   u.rg: .=.+9&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   u.uid: -1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   u.pid: 1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;(there'&lt;!--'--&gt;s more)&lt;/span&gt;&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
If I &lt;em&gt;were&lt;/em&gt; to translate this all to C and adapt it to a modern audience, then I'&lt;!--'--&gt;d say
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; initf&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;init&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// idk if 4 spaces or 4 NULs at the end&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;diskread&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;06000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sysdata&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sysdata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// superblock(?)&lt;/span&gt;

init &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;initf&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;init &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;halt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;init&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4096&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4096&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;goto&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4096&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented&quot;&gt;
So I'&lt;!--'--&gt;d say this system &lt;em&gt;boots&lt;/em&gt; into PID 1 but executing the kernel and with no program data, then reads &lt;samp&gt;init&lt;/samp&gt; into the program data
(from the root directory; but there'&lt;!--'--&gt;s barely a hierarchical filesystem here),
and jumps there.
This is as an open-coded sys exec (II).
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/014-unix-pre-v4-pid0-corollary.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/013-linux-a.out-quine.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/013-linux-a.out-quine.html" />
    <title> 013. Linux a.out quine in 44 bytes — blognꞌt — nabijaczleweli </title>
    <updated>2024-03-17T04:57:16+01:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;013. Linux a.out quine in 44 bytes&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Sun, 17 Mar 2024 04:57:16 +0100&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//susam.net/self-printing-machine-code.html&quot;&gt;Susam Pal'&lt;!--'--&gt;s &lt;cite&gt;Self-Printing Machine Code&lt;/cite&gt;&lt;/a&gt;
(on &lt;a href=&quot;//mastodon.social/@susam/112104337300249149&quot;&gt;mastussy&lt;/a&gt;)
demonstrates a 12-byte &lt;span class=&quot;smallcaps&quot;&gt;dos&lt;/span&gt; program copying its image to the standard output.
This platform lends itself well to the problem, since executables are allowed to be bare code and copied to a fixed offset,
naturally advantaging it over real systems like &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt;.
Nevertheless, the &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; a.out header is only 32 bytes and the entire image is similarly mapped at a well-known location;
too bad Linux doesn'&lt;!--'--&gt;t support a.out.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
But
&lt;a href=&quot;//lists.debian.org/debian-announce/1995/msg00004.html&quot;&gt;&lt;q&gt;Debian GNU/Linux 0.93 will be the last release that uses the a.out binary format.&lt;/q&gt;&lt;/a&gt;,
and &lt;a href=&quot;//archive.debian.org/debian/dists/Debian-0.93R6/&quot;&gt;0.93R6 is, obviously, readily available to install&lt;/a&gt;.
A musty 1995 vintage, for which you
&lt;a href=&quot;//101010.pl/@nabijaczleweli/110729867412904137&quot;&gt;definitely want to consult the installation guide&lt;/a&gt;,
but 1995 debian-installer is irrevocably and unfalteringly debian-installer.
There are, of course, some fundamental issues with running a 30-year-old system:
&lt;/p&gt;
&lt;ul style=&quot;padding-left: 1em;&quot;&gt;
 &lt;li&gt;KVM breaks it completely (not that it needs acceleration)&lt;/li&gt;
 &lt;li&gt;no SCSI, and the installation is multi-floppy, so &lt;span id=&quot;google&quot;&gt;google&lt;/span&gt; &quot;qemu monitor change floppy&quot; is in full effect&lt;/li&gt;
 &lt;li&gt;it needs a little bit of RAM (&lt;q&gt;at least four megabytes&lt;/q&gt;), but not too much; the &lt;span class=&quot;smallcaps&quot;&gt;qemu&lt;/span&gt; default of 128M &lt;em&gt;is&lt;/em&gt; too much&lt;/li&gt;
 &lt;li&gt;similarly for the disk – suppress the instinct of defaulting to 4G, and given &lt;q&gt;a new disk partition of at least 40 megabytes&lt;/q&gt;, 128M works&lt;/li&gt;
 &lt;li&gt;ACPI doesn'&lt;!--'--&gt;t exist yet. the system halts by halting&lt;/li&gt;
 &lt;li&gt;it will probably Just hang at one point;
     lynx will cause a kernel oops;
     (address resolution in) ping will &lt;a href=&quot;//101010.pl/@nabijaczleweli/112106991701251065&quot;&gt;randomly hardloop/segfault&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;there is no DHCP-enabled config in the installer, and you don'&lt;!--'--&gt;t need it because &lt;span class=&quot;smallcaps&quot;&gt;qemu&lt;/span&gt; doesn'&lt;!--'--&gt;t emulate any supported ethernet card&lt;/li&gt;
 &lt;li&gt;this means that the only I/O to the world is by floppy and serial&lt;/li&gt;
 &lt;li&gt;boot is floppy-only as well&lt;/li&gt;
&lt;/ul&gt;
&lt;script&gt;
(function() {
 let googles = [&quot;google&quot;, &quot;ddg&quot;, &quot;baidu&quot;, &quot;kagi&quot;, &quot;startpage&quot;];
 google.innerText = googles[Math.floor(Math.random() * googles.length)];
})()
&lt;/script&gt;
&lt;p class=&quot;continuation&quot;&gt;
overall &lt;code&gt;qemu-system-i386 -m 32m -fda boot.bin -hda rootfs -boot a -fdb debs.tar&lt;/code&gt; works,
and the most annoying limitation is that the floppy will be truncated at 2.8M, so you can'&lt;!--'--&gt;t tar up every deb at once;
not that it really matters because &lt;tt&gt;strace&lt;/tt&gt;/&lt;tt&gt;gdb&lt;/tt&gt;/&lt;tt&gt;binutils&lt;/tt&gt;/&lt;tt&gt;gcc&lt;/tt&gt; are the only relevant ones not on the installation floppies.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This draws heavily from the aforelinked &lt;a href=&quot;//binary.golf&quot;&gt;BGGP4&lt;/a&gt; submission,
where &lt;a href=&quot;//101010.pl/@nabijaczleweli/111400543705964317&quot;&gt;I had been robbed of my winning submissions&lt;/a&gt; for both the binary and shell program categories.
Nevertheless, this allows for more interesting packing; given the annotated program:
&lt;/p&gt;
&lt;div style=&quot;text-align: right;&quot;&gt;
(build with &lt;code&gt;cut -sf2 &amp;lt; prog | tr a-f A-F | tr -d '[:space:]' | base16 -d&lt;/code&gt;)
&lt;/div&gt;
&lt;pre class=&quot;continuing&quot;&gt;&lt;code&gt;&lt;span class=&quot;cmt&quot;&gt;0&lt;/span&gt;&lt;!--&quot;--&gt;	cc 00 64 00	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; &lt;var&gt;a_midmag&lt;/var&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;4&lt;/span&gt;&lt;!--&quot;--&gt;	0C 00 00 00	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; &lt;var&gt;a_text&lt;/var&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;8&lt;/span&gt;&lt;!--&quot;--&gt;	00 00 00 00	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; &lt;var&gt;a_data&lt;/var&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;12&lt;/span&gt;&lt;!--&quot;--&gt;	b0 04      	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; &lt;var&gt;a_bss&lt;/var&gt; eax=4	mov    al,0x4	number=__NR_write&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;14&lt;/span&gt;&lt;!--&quot;--&gt;	EB 10      	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;            	jmp    +16&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;18&lt;/span&gt;&lt;!--&quot;--&gt;	00 00 00 00	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; &lt;var&gt;a_syms&lt;/var&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;22&lt;/span&gt;&lt;!--&quot;--&gt;	0C 10 00 00	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; &lt;var&gt;a_entry&lt;/var&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;26&lt;/span&gt;&lt;!--&quot;--&gt;	00 00 00 00	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; &lt;var&gt;a_trsize&lt;/var&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;30&lt;/span&gt;&lt;!--&quot;--&gt;	00 00 00 00	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; &lt;var&gt;a_drsize&lt;/var&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;32&lt;/span&gt;&lt;!--&quot;--&gt;	31 db      	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; ebx=0     	xor    ebx,ebx	fd    =0&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;34&lt;/span&gt;&lt;!--&quot;--&gt;	31 c9      	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;           	xor    ecx,ecx&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;36&lt;/span&gt;&lt;!--&quot;--&gt;	b5 10      	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; ecx=0x1000	mov    ch,0x10	buf   =loadaddr&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;38&lt;/span&gt;&lt;!--&quot;--&gt;	31 d2      	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;           	xor    edx,edx&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;40&lt;/span&gt;&lt;!--&quot;--&gt;	b2 2C      	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; edx=44    	mov    dl,44	count =progsize&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;42&lt;/span&gt;&lt;!--&quot;--&gt;	cd 80      	&lt;!--&quot;--&gt;&lt;span class=&quot;cmt&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt; syscall() 	int    0x80&lt;!--&quot;--&gt;
&lt;span class=&quot;cmt&quot;&gt;44&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
note that
&lt;var&gt;a_midmag&lt;/var&gt; (the magic),
&lt;var&gt;a_text&lt;/var&gt; (the size of the program text immediately following the header;
                   Linux has started requiring this (and, thus, the file size) to be page-aligned by 2.6), and
&lt;var&gt;a_data&lt;/var&gt; (the size of program data, following the text)
are fixed parameters while
&lt;var&gt;a_trsize&lt;/var&gt;
and
&lt;var&gt;a_drsize&lt;/var&gt;
must be &lt;strong&gt;0&lt;/strong&gt;;
&lt;var&gt;a_bss&lt;/var&gt; can be anything, since it describes the initial allocation to map after the program data,
while
&lt;var&gt;a_syms&lt;/var&gt; can, empirically, &lt;em&gt;sometimes&lt;/em&gt; have a non-zero low byte.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
While COMs are loaded at &lt;var&gt;0x100&lt;/var&gt; and a.outs are loaded at &lt;var&gt;0x1000&lt;/var&gt;,
the start address for COMs is also &lt;var&gt;0x100&lt;/var&gt;, while for a.outs it'&lt;!--'--&gt;s &lt;code&gt;&lt;var&gt;a_entry&lt;/var&gt;&lt;/code&gt;.
&quot;Real&quot; a.outs in the distribution include the libc runtime entry point at start of the program text,
and thus &lt;code&gt;&lt;var&gt;a_entry&lt;/var&gt;&lt;/code&gt; is unwaveringly &lt;samp&gt;0x1020&lt;/samp&gt; (&lt;var&gt;0x1000&lt;/var&gt; + the 32 header bytes);
except in this case it'&lt;!--'--&gt;s &lt;code&gt;&lt;var&gt;a_bss&lt;/var&gt;&lt;/code&gt;, into which the first instruxion is packed.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
While Susam'&lt;!--'--&gt;s program amounts to, effectively, a &quot;write a buffer, then return&quot; implementation (down to exiting with &lt;code&gt;ret&lt;/code&gt;) in 12 bytes,
this is an exercise in zeroing registers, since it amounts to
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;&lt;code&gt;&lt;!--&quot;--&gt;	write(0, 0x1000, 44);&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
in 44 bytes – conveniently an even 32 more, matching the header size.
The astute reader will'&lt;!--'--&gt;ve noted that it &lt;em&gt;actually&lt;/em&gt; executes 16 bytes to do so,
but if all registers were clear on entry this would'&lt;!--'--&gt;ve been just 10.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
There is no explicit exit,
since the 270M of zeroes (allocated by &lt;code&gt;&lt;var&gt;a_bss&lt;/var&gt;&lt;/code&gt;=&lt;code&gt;0x10eb04b0&lt;/code&gt;)
decode to &lt;samp style=&quot;white-space: nowrap;&quot;&gt;add byte [eax], al&lt;/samp&gt; which instantly segfaults,
and, if you don'&lt;!--'--&gt;t disable coredumps, fills your disk.
&lt;/p&gt;
&lt;figure&gt;
 &lt;a href=&quot;/content/assets/blogn_t/013.01-output.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/013.01-output.png&quot;&gt;&lt;/a&gt;
 &lt;figcaption&gt;
  &lt;pre class=&quot;continuing&quot;&gt;&lt;!--&quot;--&gt;Debian GNU/Linux 0.93R6&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Copyright (C) 1993, 1994, 1995 Debian Association, Inc. and others&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0.93R6 login: &lt;kbd&gt;nab&lt;/kbd&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Password:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Last login: Sat Mar 16 21:15:48 on tty1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Linux 0.93R6 1.2.13 #2 Wed Oct 4 17:35:14 EST 1995 i686&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Copyright (C) 1993, 1994, 1995 Debian Association, Inc. and others&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;Everything included with the Debian GNU/Linux system is freely&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;redistributable; the exact distribution terms for each program&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;are described in the individual files in /usr/doc/copyright/.&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;Debian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;permitted by applicable law.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;$ &lt;kbd&gt;ulimit -c 0&lt;/kbd&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;$ &lt;kbd&gt;./newd3&lt;/kbd&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;�d&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  ��&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;    1�1ɵ1Ҳ,̀Segmentation fault&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;$ &lt;kbd&gt;./newd3 0&gt;&amp;1 | od -tx1 -Ad&lt;/kbd&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000000 cc 00 64 00 0c 00 00 00 00 00 00 00 b0 04 eb 10&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000016 00 00 00 00 0c 10 00 00 00 00 00 00 00 00 00 00&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000032 31 db 31 c9 b5 10 31 d2 b2 2c cd 80&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000044&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Segmentation fault&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;$ &lt;kbd&gt;&amp;lt; newd3 od -tx1 -Ad&lt;/kbd&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000000 cc 00 64 00 0c 00 00 00 00 00 00 00 b0 04 eb 10&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000016 00 00 00 00 0c 10 00 00 00 00 00 00 00 00 00 00&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000032 31 db 31 c9 b5 10 31 d2 b2 2c cd 80&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0000044&lt;!--&quot;--&gt;&lt;/pre&gt;
 &lt;/figcaption&gt;
&lt;/figure&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/013-linux-a.out-quine.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/012b-debian-chromebook-lenovo-300e-gen2-mtk-real.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/012b-debian-chromebook-lenovo-300e-gen2-mtk-real.html" />
    <title> 012b. Debian on the Lenovo 300e 2nd-gen MTK arm64 Chromebook (hana) (real) — blognꞌt — nabijaczleweli </title>
    <updated>2024-02-07T01:09:33+01:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;012b. Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen MTK arm64 Chromebook (hana) (real)&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Wed, 07 Feb 2024 01:09:33 +0100&lt;/span&gt;; updated &lt;a href=&quot;update-2025-09-13&quot;&gt;Sat, 13 Sep 2025 16:05:39 +0200&lt;/a&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#jpeg'&gt;no nooo my nose cam noooooo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#jailbroke'&gt;saved from chromium (chrome os (chromium os(?)))&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#HFBITLAND'&gt;&lt;span class=&quot;smallcaps&quot;&gt;hfbitland&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#bootloader'&gt;Me loading: Haha fuck yeah!!! Yes!! Me booting: Well this fucking sucks. What the fuck.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#kernal'&gt;how is &lt;del&gt;pointar formed&lt;/del&gt; kernal loaded?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#debian'&gt;she debra on my ian '&lt;!--'--&gt;til I marr her dock&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#ctrl-i'&gt;an interlude: here's a never-documented-before &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;i&lt;/kbd&gt; shortcut :)&lt;!--'--&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#systemd'&gt;a way to leak post-mortem metadata&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#systemd'&gt;a brief ado about systemd&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#dernal'&gt;a way to pack a kernel to boot&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#hifux'&gt;when im in an EXacutif'&lt;!--'--&gt;^@gejarators competition and my opponent is Hifux:&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#mmc'&gt;&lt;a style=&quot;font-size: .9em;&quot; lang=&quot;de&quot; href=&quot;//youtu.be/HqxKVQqoL5o&quot;&gt;Mein Gott Leute, mein neu Linux hat mir einfach erlaubt dass ich MMC booten darf! Wie cool ist das bitte? Jetzt zocke ich Systemd und boote von MMC! &lt;span style=&quot;text-transform: uppercase;&quot;&gt;Yippee&lt;/span&gt;!&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#foreign-config'&gt;Fraerin'&lt;!--'--&gt; ex%butinn^N&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#🐧'&gt;🐧🐧🐧🐧&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#days'&gt;this is where I spend two further straight days building kernels to find out.&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#speedrun'&gt;arm64 Chromebook Debian port any% 17-day RTA/#137 IGT WR&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#install'&gt;installing Debian&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#speedrun-install'&gt;arm64 Chromebook Debian port install% 23-day RTA/#137 IGT WR&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#recovery'&gt;ChromeOS as a recovery system&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#hid'&gt;they unfucked the HIDs bro its crazy&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#hid-touchpad'&gt;naaah no they fuckin didn'&lt;!--'--&gt;t&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#hdmi'&gt;&lt;abbr title=&quot;Horny Demon Mangling Interface&quot;&gt;HDMI&lt;/abbr&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#blob'&gt;blob-free boot bundle real&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#miscellanea'&gt;Miscellanea:&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#install-guide'&gt;How to get Debian on your Google Hana 2023 (real (working (no virus)))&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#functional-summary'&gt;Funxional summary&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#functional-summary-functional'&gt;Funxional&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#functional-summary-dysfunctional'&gt;Dysfunxional&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#summary'&gt;Summary&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
In &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html&quot;&gt;&lt;samp&gt;012. Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen arm64 Chromebook&lt;/samp&gt;&lt;/a&gt; I bought a laptop I thought was this one and in &lt;a href=&quot;012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html&quot;&gt;&lt;samp&gt;012a. Installing Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen Chromebook (Intel)&lt;/samp&gt;&lt;/a&gt; I &lt;a href=&quot;//docs.chrultrabook.com&quot;&gt;made it normal&lt;/a&gt;.
Now I have a celeron laptop for some reason.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Well, the reason is that Lenovo makes three identical laptops,
as listed by
&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/&quot;&gt;&lt;cite&gt;Chromium OS &gt; &lt;b&gt;Developer Information for Chrome OS Devices&lt;/b&gt;&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div style=&quot;text-align: right;&quot;&gt;&lt;dt style=&quot;text-align: initial;&quot;&gt;Release&lt;/dt&gt;&lt;dd&gt;27 February 2019&lt;/dd&gt;&lt;dd&gt;1 March 2019&lt;/dd&gt;&lt;dd&gt;28 February 2020&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;OEM&lt;/dt &gt;&lt;dd&gt;Lenovo&lt;/dd &gt;&lt;dd&gt;Lenovo&lt;/dd &gt;&lt;dd&gt;Lenovo&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Model&lt;/dt&gt;&lt;dd &gt;&lt;a href=&quot;//www.lenovo.com/us/en/laptops/lenovo/student-chromebooks/Lenovo-300e-Chromebook-2nd-Gen-MTK/p/88ELC1S9988&quot;&gt;Lenovo 300e Chromebook 2nd Gen (MTK)&lt;/a&gt;&lt;/dd&gt;&lt;dd&gt;&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/Lenovo%20300e%20Chromebook%202nd%20Gen%20(Intel)&quot;&gt;Lenovo 300e Chromebook 2nd Gen (Intel)&lt;/a&gt;&lt;/dd&gt;&lt;dd&gt;&lt;a href=&quot;//www.lenovo.com/us/en/laptops/lenovo/student-chromebooks/Lenovo-300e-Chromebook-2nd-Gen-AST/p/88ELC1S8036&quot;&gt;Lenovo 300e &lt;span title='&quot;Chromebook&quot; ominously missing from the page, a clear mistake' class=&quot;spacing-only&quot;&gt;Chromebook&lt;/span&gt; 2nd Gen AMD&lt;/a&gt;&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Code name&lt;/dt &gt;&lt;dd&gt;Sycamore360&lt;/dd &gt;&lt;dd&gt;Phaser360&lt;/dd &gt;&lt;dd&gt;Treeya360&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Board name(s)&lt;/dt&gt;&lt;dd&gt;hana&lt;/dd &gt;&lt;dd&gt;Octopus&lt;/dd &gt;&lt;dd&gt;Grunt&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Base board&lt;/dt &gt;&lt;dd&gt;oak&lt;/dd &gt;&lt;dd&gt;octopus&lt;/dd &gt;&lt;dd&gt;&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;User ABI&lt;/dt &gt;&lt;dd&gt;arm&lt;/dd &gt;&lt;dd&gt;x86_64&lt;/dd &gt;&lt;dd&gt;x86_64&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Kernel&lt;/dt &gt;&lt;dd&gt;3.18&lt;/dd &gt;&lt;dd&gt;4.14&lt;/dd &gt;&lt;dd&gt;4.14&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Kernel ABI&lt;/dt &gt;&lt;dd&gt;aarch64&lt;/dd &gt;&lt;dd&gt;x86_64&lt;/dd &gt;&lt;dd&gt;x86_64&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Platform&lt;/dt &gt;&lt;dd&gt;MT8173&lt;/dd &gt;&lt;dd&gt;Gemini Lake&lt;/dd &gt;&lt;dd&gt;Stoney Ridge&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Form Factor&lt;/dt &gt;&lt;dd&gt;Chromebook&lt;/dd &gt;&lt;dd&gt;Convertible&lt;/dd &gt;&lt;dd&gt;Convertible&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;First Release&lt;/dt&gt;&lt;dd&gt;R72&lt;/dd &gt;&lt;dd&gt;R72&lt;/dd &gt;&lt;dd&gt;R80&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
compare this to what Lenovo product pages call them:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
  &lt;div&gt;&lt;dt&gt;Branding&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;//www.lenovo.com/us/en/p/laptops/lenovo/lenovo-edu-chromebooks/lenovo-300e-chromebook-2nd-gen-mtk/88elc1s9988&quot;&gt;300e Chromebook 2nd Gen (11.6&quot;) Laptop&lt;/a&gt;&lt;/dd&gt;&lt;dd&gt;&lt;a href=&quot;//www.lenovo.com/us/en/p/laptops/lenovo/lenovo-edu-chromebooks/300e-chromebook-2nd-gen-(11.6-inch)-laptop/len101l0001&quot;&gt;300e Chromebook 2nd Gen (11.6&quot;) Laptop&lt;/a&gt;&lt;/dd&gt;&lt;dd&gt;&lt;a href=&quot;//www.lenovo.com/us/en/p/laptops/lenovo/lenovo-edu-chromebooks/lenovo-300e-chromebook-2nd-gen-ast/88elc1s8036&quot;&gt;300e Chromebook 2nd Gen (11.6”, AMD)&lt;/a&gt;&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;Google summary and &quot;product not available&quot; popup&lt;/dt&gt;&lt;dd&gt;Lenovo 300e Chromebook (2nd Gen, MTK)&lt;/dd&gt;&lt;dd&gt;300e Chromebook 2nd Gen (11.6&quot;&lt;!--&quot;--&gt;) Laptop&lt;/dd&gt;&lt;dd&gt;New Lenovo Chromebook 300e&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;P/N&lt;/dt&gt;&lt;dd&gt;&lt;a href=&quot;//psref.lenovo.com/syspool/Sys/PDF/Lenovo/Lenovo_300e_Chromebook_2nd_Gen_MTK/Lenovo_300e_Chromebook_2nd_Gen_MTK_Spec.PDF&quot;&gt;81QC&lt;/a&gt;&lt;/dd&gt;&lt;dd&gt;&lt;a href=&quot;//psref.lenovo.com/syspool/Sys/PDF/Lenovo/Lenovo_300e_Chromebook_2nd_Gen/Lenovo_300e_Chromebook_2nd_Gen_Spec.pdf&quot;&gt;81MB&lt;/a&gt;&lt;/dd&gt;&lt;dd&gt;&lt;a href=&quot;//psref.lenovo.com/syspool/Sys/PDF/Lenovo/Lenovo_300e_Chromebook_2nd_Gen_AST/Lenovo_300e_Chromebook_2nd_Gen_AST_Spec.pdf&quot;&gt;82CE&lt;/a&gt;&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;Processor&lt;/dt&gt;&lt;dd&gt;MediaTek™ 8173C (2.10GHz)&lt;/dd&gt;&lt;dd&gt;Intel® Celeron® N4020 Processor (…)&lt;/dd&gt;&lt;dd&gt;7th Generation AMD A4-9120C APU (…)&lt;/dd&gt;&lt;/div&gt;
 &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
and to what the bottom stickers and the &quot;Product Specification References&quot; (the PDFs you get in Tech Specs, More Information) call them:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
  &lt;div&gt;&lt;dt&gt;Sticker&lt;/dt&gt;&lt;dd&gt;Lenovo 300e Chromebook 2nd Gen MTK&lt;/dd &gt;&lt;dd&gt;Lenovo 300e Chromebook 2nd Gen&lt;/dd&gt;&lt;dd&gt;Lenovo 300e Chromebook 2nd Gen AST&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;PSRef&lt;/dt &gt;&lt;dd&gt;Lenovo 300e Chromebook 2&lt;sup&gt;nd&lt;/sup&gt; Gen MTK&lt;/dd&gt;&lt;dd&gt;Lenovo 300e Chromebook 2nd Gen&lt;/dd&gt;&lt;dd&gt;Lenovo 300e Chromebook 2nd Gen AST&lt;/dd&gt;&lt;/div&gt;
 &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
This &lt;em&gt;has&lt;/em&gt; to be actively-malicious behaviour on Lenovo'&lt;!--'--&gt;s part.
I bought my Intel (sorry, my ) 300e thinking it were the MTK one becuase it was listed thusly.
The sticker didn't specify any variant, but it's the first from the series so that added up.
The seller had listed it as that because the &lt;em&gt;only&lt;/em&gt; Google result for &quot;Lenovo 300e Chromebook 2nd Gen&quot; is the MTK-variant product page,
there's no way she could've known.
The ‌ variant appears to be absolute search engine poison. Or deduplicated away. Or whatever.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Also, I don'&lt;!--'--&gt;t know where the ChromiumOS page got the parens around the variant designator from, or the &quot;Intel&quot;,
but they were crucial in fooling me, personally.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
In an obverse vein, the &quot;Acer Chromebook R13&quot; (which was also under consideration this time)
is a &lt;a href=&quot;//allegrolokalnie.pl/oferta/acer-cb5312t-chromebook-133-ips-fullhd-464gb&quot;&gt;real product&lt;/a&gt;
that the ChromiumOS page also knows about,
and Acer seems to entirely and wholly deny having ever produced it – there is no mention of it on acer.com, and Google returns second-hand re-sellers exclusively.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Regardless, the search space is thus narrowed considerably,
because any listing that doesn'&lt;!--'--&gt;t show a clear, in-focus, readable, un-painted-over view of the bottom sticker, at least enough to make out &quot;MTK&quot;, is right out.
This means I may'&lt;!--'--&gt;ve missed out on some deals,
but at time of writing there'&lt;!--'--&gt;s all of 5 working arm64 Chromebooks in Poland for a reasonable price (defined as a hard ≤200zł (≤46€) filter).
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
On 2024-01-11 I bought the titular laptop for 149+10.95zł (70+22zł for one with a busted-ass screen; resp. 36.78€ and 21.15€; resp. 18.5kg and 10.6kg of kefir)
for the same reason as in &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html&quot;&gt;&lt;samp&gt;012. Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen arm64 Chromebook&lt;/samp&gt;&lt;/a&gt; – as an arm64-with-CRC32 testbed.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This continues to be primarily precipitated by &lt;a href=&quot;//media.ccc.de/v/37c3-11929-turning_chromebooks_into_regular_laptops&quot;&gt;the chrultrabook talk&lt;/a&gt;,
and naturally it continues to be impossible to install Debian traditionally on ARM Chromebooks.
Like &lt;cite&gt;&lt;a href=&quot;//wiki.debian.org/InstallingDebianOn/Samsung/ARMChromebook&quot;&gt;InstallingDebianOn/Samsung/ARMChromebook&lt;/a&gt;&lt;/cite&gt;
and &lt;cite&gt;&lt;a href=&quot;//archlinuxarm.org/platforms/armv7/samsung/samsung-chromebook-2&quot;&gt;Samsung Chromebook 2&lt;/a&gt;&lt;/cite&gt;,
this is &quot;running debian on the chromebook from the μ&lt;span class=&quot;smallcaps&quot;&gt;sd&lt;/span&gt; card, and also you can »install« by properly arranging and copying to the internal flash&quot;,
even though both of them do say they're &quot;installing&quot; on the device when they aren't.
Which is why &lt;a href=&quot;012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html&quot;&gt;&lt;samp&gt;012a. Installing Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen Chromebook (Intel)&lt;/samp&gt;&lt;/a&gt; had &quot;install&quot; in the title and this doesn'&lt;!--'--&gt;t.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Hopefully,
instead of using unprecedented-in-the-text shell programs and methodologies that definitely make sense to the authors at the time to construct the images,
I can demonstrate the final state itself (god forbid!) as well as the basis for the steps taken with no leaps of logic,
so this can serve as more useful documentation.
&lt;/p&gt;
&lt;h2 id=&quot;jpeg&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#jpeg&quot;&gt;#&lt;/a&gt; no nooo my nose cam noooooo&lt;/h2&gt;
&lt;div class=&quot;side-by-each-inside continued&quot;&gt;
    &lt;a href=&quot;/content/assets/blogn_t/012b.02-DSC_0970cvcc.jpg&quot;&gt;&lt;img class=&quot;continued&quot; alt=&quot;Chromebook open flat; there's a camera and a glaring white sticker above the screen; the keyboard itself is english and decroted: there are two extrmely wide keys to the left of the space bar (ctrl and alt), the ISO enter is half a key thin, the caps lock has a 🔍 on it, and the top row has an esc key, then a series of 11 icons&quot; src=&quot;/content/assets/blogn_t/012b.02-DSC_0970cvcc.jpg&quot;&gt;&lt;/a&gt;&lt;!--
 --&gt;&lt;a href=&quot;/content/assets/blogn_t/012b.03-DSC_0969cvcc.jpg&quot;&gt;&lt;img class=&quot;continuation&quot; alt=&quot;Chromebook open flat, bottom side up: there's two more stickers over screws in the bottom panel, and a yellow barcode beow the product sticker; the top panel has both a chrome wordmark and logo, and a Lenovo wordmark in inverse colours; the hinges are beat to hell&quot; src=&quot;/content/assets/blogn_t/012b.03-DSC_0969cvcc.jpg&quot;&gt;&lt;/a&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Here we can see some obvious &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html&quot;&gt;physical differences&lt;/a&gt;
between these supposedly-identical laptops (barring the warranty/service seals glued to the screen):
on the english keyboard, &lt;kbd&gt;⟵&lt;/kbd&gt; is actually labelled &lt;kbd&gt;backspace&lt;/kbd&gt;, &lt;kbd&gt;⇥&lt;/kbd&gt; – &lt;kbd&gt;tab&lt;/kbd&gt;, and &lt;kbd&gt;⇧&lt;/kbd&gt; – &lt;kbd&gt;shift&lt;/kbd&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Most importantly, however: there's no nose cam. What's the point of a laptop, then, honestly.
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.04-DSC_0974+0976.jpg&quot;&gt;&lt;img class=&quot;continued&quot; alt=&quot;the hinge-corner of the chromebook on its side. both halves have holes out and are thick, implying both halves are the keyboard half&quot; src=&quot;/content/assets/blogn_t/012b.04-DSC_0974+0976.jpg&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
And this demonstrates a significant consumer-affecting difference, in that the holes are just different:
&lt;/p&gt;
&lt;dl class=&quot;continuing&quot;&gt;
 &lt;div&gt;&lt;dt&gt;81MB Left&lt;/dt &gt;&lt;dd&gt;USB-C charging&lt;/dd &gt;&lt;dd&gt;USB-A 3&lt;/dd &gt;&lt;dd&gt;μSD card&lt;/dd &gt;&lt;dd&gt;3.5mm TRRS&lt;/dd&gt;&lt;/div&gt;
 &lt;div&gt;&lt;dt&gt;81QC Left&lt;/dt &gt;&lt;dd&gt;USB-C charging&lt;/dd &gt;&lt;dd&gt;HDMI&lt;/dd &gt;&lt;dd&gt;USB-A 3&lt;/dd &gt;&lt;dd&gt;SD card&lt;/dd&gt;&lt;/div&gt;
 &lt;div&gt;&lt;dt&gt;81MB Right&lt;/dt&gt;&lt;dd&gt;Kensington lock&lt;/dd&gt;&lt;dd&gt;USB-C&lt;/dd &gt;&lt;dd&gt;USB-A 3&lt;/dd &gt;&lt;dd&gt;power/volume buttons&lt;/dd&gt;&lt;/div&gt;
 &lt;div&gt;&lt;dt&gt;81QC Right&lt;/dt&gt;&lt;dd&gt;Kensington lock&lt;/dd&gt;&lt;dd&gt;power/volume buttons&lt;/dd&gt;&lt;dd&gt;3.5mm TRRS&lt;/dd&gt;&lt;/div&gt;
&lt;/dl&gt;
&lt;p class=&quot;continuation&quot;&gt;
So this full-size computer somehow has only as much I/O as my &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export/#1324083127128596481&quot;&gt;palmtop&lt;/a&gt;?
&lt;/p&gt;
&lt;p class=&quot;continued indented&quot;&gt;
The label does agree with &lt;a href=&quot;//allegro.pl/oferta/lenovo-chromebook-300e-2gen-11-6-mediatek-4gb-32gb-dotyk-czarny-a109-14794069921&quot;&gt;the listing&lt;/a&gt; that it'&lt;!--'--&gt;s MTK:
&lt;/p&gt;
&lt;!--&quot;--&gt;&lt;a href=&quot;/content/assets/blogn_t/012b.01-label.jpg&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;the product sticker from the bottom panel:
Lenovo 300e Chromebook 2nd Gen MTK
Model Name (型號):81QC
INPUT (電壓/電流):15V DC 3A
Mfg Date:19/09/02
S/N:P206RP16 MTM:81QC0004UK
Manufactured for Lenovo
Made in China 中國製造
MO:P2N0B9902007 Factory ID: HFBITLAND&quot; src=&quot;/content/assets/blogn_t/012b.01-label.jpg&quot;&gt;&lt;/a&gt;&lt;!--&quot;--&gt;
&lt;p class=&quot;continuation&quot;&gt;
Incredible pog moment.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It appears that I'&lt;!--'--&gt;m pre-
&lt;/p&gt;
&lt;h2 id=&quot;jailbroke&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#jailbroke&quot;&gt;#&lt;/a&gt; saved from chromium (chrome os (chromium os(?)))&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
because it booted to the developer mode warning screen that &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html#jailbreak&quot;&gt;took 400 words last time&lt;/a&gt; –
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.05-DSC_0973ccvc.jpg&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Title line: chrome, English; Main body: OS verifications is OFF Press SPACE to re-enable.; Footer: For help visit https://google.com/chromeos/recovery  Model HANA I4A-C2S-A6I-A66-B2U-Q3T&quot; src=&quot;/content/assets/blogn_t/012b.05-DSC_0973ccvc.jpg&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
– where two things stand out:
the serial number is one triplet shorter (the Intel one had 7),
and it says &quot;Model: HANA&quot;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
One may recall from &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html&quot;&gt;&lt;samp&gt;012. Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen arm64 Chromebook&lt;/samp&gt;&lt;/a&gt; and from the tables quoted at the top of this page that the Intel-processor laptop
&lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html#jailbreak&quot;&gt;said&lt;/a&gt; &quot;Model: PHASER360&quot;.
At the time I'&lt;!--'--&gt;d been &lt;a href=&quot;//101010.pl/@nabijaczleweli/111716821211949630&quot;&gt;expecting&lt;/a&gt; &quot;Sycamore360&quot;,
but due to the nomenclature scam &quot;Phaser360&quot; made sense.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//docs.chrultrabook.com/docs/firmware/system-info.html#recovery-mode&quot;&gt;Chrultrabook&lt;/a&gt;
says this should be the board name, and lists Phaser360 as the board name for the 2&lt;sup&gt;nd&lt;/sup&gt;-gen Intel 300e,
which disagrees with the ChromiumOS-branded documentation but is internally consistent.
Google-official &lt;cite&gt;&lt;a href=&quot;//support.google.com/chromebook/answer/1080595#zippy=step-download-a-new-copy-of-the-os&quot;&gt;Chromebook Help, Recover your Chromebook, Recovery option 2: Use USB drive, Step 2: Download a new copy of the OS&lt;/a&gt;&lt;/cite&gt; says
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;ol style=&quot;padding-left: 1em;&quot; start=4&gt;
  &lt;li&gt;Click &lt;strong&gt;Select a model from a list&lt;/strong&gt;, or type in the model number of the Chromebook you want to recover. To find this number, look at the bottom of the error message on your Chromebook screen.&lt;/li&gt;
 &lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
and &quot;model number&quot; per se doesn'&lt;!--'--&gt;t appear anywhere else.
So everything is, as usual, at odds.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
The &quot;hana&quot; board name appears to be shared between 9 identical devices
(the &lt;a href=&quot;//www.asus.com/Laptops/ASUS-Chromebook-C202XA/&quot;&gt;&quot;telesu&quot; ASUS one&lt;/a&gt; uses a &quot;hana&quot; &quot;Base board&quot;,
 all others use &quot;oak&quot;. these appear to be unrelated hanas)
released between 2017-03-17 and 2019-12-27, which includes &lt;q&gt;300e&lt;/q&gt; (first-gen), &lt;q&gt;300e 2nd Gen&lt;/q&gt;, and &lt;q&gt;100e 2nd Gen&lt;/q&gt; Lenovos.
There appears to be no first-generation ARM 100e variant (the Intel and AMD ones are in full swing).
This is your brain on products.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This is all the more weird because &lt;a href=&quot;//allegro.pl/oferta/lenovo-chromebook-300e-2gen-11-6-mediatek-4gb-32gb-dotyk-czarny-a109-14794069921&quot;&gt;the listing&lt;/a&gt; proclaims it used, &lt;q&gt;&lt;b&gt;✅Bios&lt;/b&gt; - Ok&lt;/q&gt;(? shit don'&lt;!--'--&gt;t got one, brother)
and &lt;q lang=&quot;pl&quot;&gt;&lt;abbr title=&quot;Signs of use&quot;&gt;&lt;b&gt;ŚLADY UŻYTKOWANIA&lt;/b&gt;&lt;/abbr&gt;&lt;/q&gt;,
but doesn't mention anything that would imply it's in developer mode.
Maybe this was done as a reset step, but there are easier and better-documented ways to do this.
Especially since the only thing attached to the laptop in the box, beside the seals,
was a long
&lt;q style=&quot;text-transform: uppercase; font-weight: bold; font-family: Roboto, sans-serif;&quot;&gt;Any modifications to the software or hardware, including attempted service, void your right to a return!&lt;/q&gt;
spiel, which wouldn'&lt;!--'--&gt;t go well for me if I were to return it in such an overtly-&quot;modified&quot; state probably.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
It also tries to spin
&lt;q lang=&quot;pl&quot;&gt;&lt;abbr title=&quot;Battery holds minimum 1h&quot;&gt;&lt;b&gt;✅Bateria trzyma minimalnie 1h&lt;/b&gt;&lt;/abbr&gt;&lt;/q&gt; as
&lt;q lang=&quot;pl&quot;&gt;&lt;abbr title=&quot;batteries checked under load&quot;&gt;baterie sprawdzamy pod obciążeniem&lt;/abbr&gt;&lt;/q&gt;
but one has to wonder how this could be done to a machine in freshly-triggered developer mode.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
So with the innards appearing to be &lt;em&gt;some&lt;/em&gt; ARM board, and a manually-confirmed boot 🙄 the magical OOBE control doesn't appear to've been clicked,
and clicking through it and through the root passphrase popup was so mindless and indistinguishable from
&lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html#jailbreak&quot;&gt;the last time&lt;/a&gt; I forgot to shoot jpegs.
Except that the throbbers appear to be embedded videos instead of animations, but.
&lt;/p&gt;
&lt;h2 id=&quot;HFBITLAND&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#HFBITLAND&quot;&gt;#&lt;/a&gt; &lt;span class=&quot;smallcaps&quot;&gt;hfbitland&lt;/span&gt;&lt;/h2&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.06-DSCN0564cvcc.png&quot;&gt;&lt;img alt='shell session, incl. uname output with version &quot;4.19.272-14690-...&quot; and architecture &quot;aarch64&quot;, lscpu which notes 4 CPUs, of which two &quot;ARM&quot; &quot;Cortex-A53&quot; and two &quot;ARM&quot; &quot;Cortex-A72&quot;, all CPUs have crc32' src=&quot;/content/assets/blogn_t/012b.06-DSCN0564cvcc.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continued&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;indented&quot;&gt;
&lt;p style=&quot;display: inline&quot;&gt;
Beside the similarly-decroted kernel version, note how this doesn'&lt;!--'--&gt;t actually say what the CPU… is? Like its self-branding?
Apparently this information doesn'&lt;!--'--&gt;t exist in the CPU, or exists only to the extent of the same two integers that &lt;samp class=&quot;path&quot;&gt;/proc/cpuinfo&lt;/samp&gt; shows –
&lt;/p&gt;
&lt;dl class=&quot;continuation linear&quot;&gt;
  &lt;dt&gt;&lt;tt&gt;CPU implementer&lt;/tt&gt;&lt;/dt&gt; &lt;dd&gt;&lt;tt&gt;0x41&lt;/tt&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;tt&gt;CPU part&lt;/tt&gt;&lt;/dt&gt; &lt;dd&gt;&lt;tt&gt;0xd03&lt;/tt&gt;&lt;/dd&gt; &lt;dd&gt;&lt;tt&gt;0xd08&lt;/tt&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;continuing&quot; style=&quot;display: inline&quot;&gt;
– and you (&lt;a href=&quot;//github.com/util-linux/util-linux/pull/564/files#diff-77cdd0e3676b5148cbe3c706a0ebf616efad2424c3cbf39b5ef4e6015546915e&quot;&gt;or &lt;code&gt;lscpu&lt;/code&gt;&lt;/a&gt;) can look them up in a table.
&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The best approximation of a CPU/device ID I found in &lt;samp class=&quot;path&quot;&gt;/proc/device-tree/compatible&lt;/samp&gt;, which listed
&lt;tt&gt;google,hana-rev{6,5,4,3,2,1}&lt;/tt&gt;, &lt;tt&gt;google,hana&lt;/tt&gt;, and &lt;tt&gt;mediatek,mt8173&lt;/tt&gt;.
Note the lack of Lenovo's &lt;strong&gt;C&lt;/strong&gt; after the model. I haven't found it attested anywhere in proc/sysfs.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The only product-level branding I found in &lt;samp class=&quot;path&quot;&gt;/sys/firmware/vpd/ro/&lt;/samp&gt;
(&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-arm-chromebook/&quot;&gt;&lt;q&gt;Vital/Vendor Product Data&lt;/q&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt; – yes, the documentation can'&lt;!--'--&gt;t decide)
as &lt;samp class=&quot;path&quot;&gt;model_name&lt;/samp&gt;:
&quot;&lt;tt&gt;Lenovo 300e Chromebook 2nd Gen MTK&lt;/tt&gt;&quot; (which miraculously agrees with Lenovo'&lt;!--'--&gt;s marketing and the outside!),
and &lt;samp class=&quot;path&quot;&gt;customization_id&lt;/samp&gt; matching the ChromiumOS &quot;Code name&quot; with &quot;&lt;tt&gt;OEM1-SYCAMORE360&lt;/tt&gt;&quot;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
There'&lt;!--'--&gt;s also 64 bytes of hex in a &lt;samp class=&quot;path&quot;&gt;stable_device_secret_DO_NOT_SHARE&lt;/samp&gt; in there. idk why. funny, though
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Another model difference is that on the Intel platform the μSD card slot showed up as SCSI (undoubtedly through a USB adapter)
and on this one it'&lt;!--'--&gt;s an MMC device, as it ought to be.
Oh and the tactiles of plugging the SD card are so ass I thought it was broken before looking at the hotplugs in the dmesg.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
I'&lt;!--'--&gt;d &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html#HFBITLAND&quot;&gt;complained&lt;/a&gt; that no Home/End is agony, and it is,
but I must not'&lt;!--'--&gt;ve tried &lt;kbd&gt;🔍&lt;/kbd&gt; and &lt;kbd&gt;˂&lt;/kbd&gt; or &lt;kbd&gt;˃&lt;/kbd&gt;, which does just that.
&lt;/p&gt;
&lt;h2 id=&quot;bootloader&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#bootloader&quot;&gt;#&lt;/a&gt; Me loading: Haha fuck yeah!!! Yes!! Me booting: Well this fucking sucks. What the fuck.&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Following the &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html#HFBITLAND&quot;&gt;instruxions from &lt;samp class=&quot;path&quot;&gt;/etc/issue&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;tt&gt;If you are having trouble booting a self-signed kernel, you may need to
enable USB booting.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;To do so, un the following as root:

enable_dev_usb_boot&lt;/tt&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;yielded&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token output&quot;&gt;localhost ~ # enable_dev_usb_boot

&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;SUCCESS: Booting any self-signed kernel from SSD/USB/SDCard slot is enabled.

&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Insert bootable media into USB / SDCard slot and press Ctrl-U in developer
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;screen to boot your self-signed image.

&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and it do b honkin
&lt;/p&gt;
&lt;video class=&quot;continuing&quot; controls width=640&gt;&lt;source src=&quot;/content/assets/blogn_t/012b.07-DSC_0984_8.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;a href=&quot;/content/assets/blogn_t/012b.07-DSC_0984_8.mp4&quot;&gt;Chromebook being powered on and the white recovery screen coming up; &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;u&lt;/kbd&gt; is pressed a few times, each time generating a harsh buzz and darkening the screen for half a second.&lt;/a&gt;&lt;/video&gt;
&lt;p class=&quot;continuation&quot;&gt;
which one has to assume is good, given the lack of priors in this domain.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
To validate this suspicion, I consulted &lt;samp class=&quot;path&quot;&gt;/sys/firmware/log&lt;/samp&gt; which identifies itself ас
&quot;&lt;tt&gt;coreboot-81de43c Mon Mar 19 23:11:07 UTC 2018 bootblock starting...&lt;/tt&gt;&quot;,
and previously the sexion headed by
&quot;&lt;tt&gt;Starting depthcharge on hana...&lt;/tt&gt;&quot;
had
&lt;/p&gt;
&lt;pre class=&quot;continuing language-plaintext&quot; style=&quot;position: relative;&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/new.log&quot;&gt;&lt;aside&gt;full /sys/firmware/log&lt;/aside&gt;&lt;/a&gt;VbAudioOpen() - note count 5
VbBootDeveloper() - user pressed Ctrl+D; skip delay
VbBootDeveloper() - trying fixed disk
VbTryLoadKernel() start, get_info_flags=0x2
VbTryLoadKernel() found 1 disks
VbTryLoadKernel() trying disk 0
GptNextKernelEntry looking at new prio partition 2
GptNextKernelEntry s1 t0 p2
GptNextKernelEntry looking at new prio partition 4
GptNextKernelEntry s1 t0 p1
GptNextKernelEntry looking at new prio partition 6
GptNextKernelEntry s0 t15 p0
GptNextKernelEntry likes partition 2
Found kernel entry at 20480 size 32768
Checking key block signature...
&lt;!--&quot;--&gt;   - sig_size=512, expecting 512 for algorithm 8&lt;!--&quot;--&gt;
In RSAVerify(): Padding check failed!
In RSAVerify(): Hash check failed!
Invalid key block signature.&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
whereas now it saw the prefix of
&lt;/p&gt;
&lt;pre class=&quot;continuation language-plaintext&quot; style=&quot;position: relative;&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;VbAudioOpen() - note count 5&lt;/span&gt;
VbBootDeveloper() - user pressed Ctrl+U; try USB
vboot_draw_screen: screen=0x0 locale=3
VbTryLoadKernel() start, get_info_flags=0x1
VbTryLoadKernel() found 1 disks
VbTryLoadKernel() trying disk 0
Primary GPT header is invalid
Secondary GPT header is invalid
Unable to read GPT data
VbTryLoadKernel() LoadKernel() = 65551
VbSetRecoveryRequest(91)
VbBootDeveloper() - no kernel found on USB
rt5645_device_init completed, codec = 5650
VbSetRecoveryRequest(0)
vboot_draw_screen: screen=0x101 locale=3
&lt;span class=&quot;token comment&quot;&gt;VbBootDeveloper() - user pressed Ctrl+D; skip delay&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
and presumably the screen being &lt;var&gt;0&lt;/var&gt; is why it flashes black.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
I can'&lt;!--'--&gt;t seem to find, like, first-party documentation about what a &quot;valid&quot; header would be.
Well, about what this bootloader looks for, in any way whatever.
It's either upstream's
&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-arm-chromebook/#usb-boot&quot;&gt;&lt;q&gt;Note: Only CrOS formatted images will boot via USB. Other Linux distros will not work.&lt;/q&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
(abject lie as proven by the guides)
or the guides which are &quot;do this&quot;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Though, actually, it does seem like, for that laptop exclusively,
&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-arm-chromebook/#boot-sequence&quot;&gt;&lt;cite&gt;Chromium OS &gt; Developer Information for Chrome OS Devices &gt; &lt;b&gt;Samsung ARM Chromebook&lt;/b&gt;, &lt;b&gt;Firmware&lt;/b&gt;, &lt;b&gt;Boot Sequence&lt;/b&gt;&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
reads:
&lt;/p&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;
 &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
  &lt;li&gt;power on&lt;/li&gt;
  &lt;li&gt;the CPU will execute u-boot from the read-only on-board SPI flash&lt;/li&gt;
  &lt;li&gt;u-boot will look at the GPT layout on the 16 GiB SSD (connected via eMMC)
      &lt;ul&gt;&lt;li&gt;search for the firmware partition marked active and try to boot the u-boot that lives there&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;u-boot will look at the GPT layout&lt;/li&gt;
      &lt;ul&gt;&lt;li&gt;search for the Linux kernel partition marked active and try to boot the kernel that lives there&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;
  &lt;li&gt;Linux kernel boots from its corresponding rootfs partition&lt;/li&gt;
  &lt;li&gt;profit!&lt;/li&gt;
 &lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Out of the 30 internal links from the
&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/&quot;&gt;device table&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
(discounting those that don'&lt;!--'--&gt;t work or redirect),
&lt;/p&gt;
&lt;details&gt;
 &lt;summary&gt;11 note anything about USB-booting&lt;/summary&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/acer-ac700-chromebook&quot;&gt;&lt;cite&gt;Acer AC700 Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/acer-c720-chromebook&quot;&gt;&lt;cite&gt;Acer C720 &amp; C720P &amp; C740 Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/asus-chromebox&quot;&gt;&lt;cite&gt;Asus Chromebox&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/chromebook-pixel-2015&quot;&gt;&lt;cite&gt;Chromebook Pixel (2015)&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/cr-48-chrome-notebook-developer-information&quot;&gt;&lt;cite&gt;Cr-48 Chrome Notebook Developer Information&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/lenovo-thinkpad-x131e-chromebook&quot;&gt;&lt;cite&gt;Lenovo Thinkpad X131e Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-series-5-chromebook&quot;&gt;&lt;cite&gt;Samsung Series 5 Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/acer-cb5-311-chromebook-13&quot;&gt;&lt;cite&gt;Acer CB5-311 Chromebook 13&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-chromebook-2&quot;&gt;&lt;cite&gt;Samsung Chromebook 2&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/hp-chromebox&quot;&gt;&lt;cite&gt;HP Chromebox&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-arm-chromebook/&quot;&gt;&lt;cite&gt;Samsung ARM Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-sandy-bridge&quot;&gt;&lt;cite&gt;Samsung Series 5 550 Chromebook and Series 3 Chromebox&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/chromebook-pixel&quot;&gt;&lt;cite&gt;Chromebook Pixel (2013)&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
&lt;/details&gt;
&lt;details&gt;
 &lt;summary&gt;3 have a &lt;b&gt;How to boot your own image from USB&lt;/b&gt; sexion (mentions ChromiumOS images exclusively)&lt;/summary&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/acer-ac700-chromebook&quot;&gt;&lt;cite&gt;Acer AC700 Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-series-5-chromebook&quot;&gt;&lt;cite&gt;Samsung Series 5 Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-sandy-bridge&quot;&gt;&lt;cite&gt;Samsung Series 5 550 Chromebook and Series 3 Chromebox&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
&lt;/details&gt;
&lt;details&gt;
 &lt;summary&gt;3 have a similar &lt;b&gt;Running Chromium OS&lt;/b&gt; sexion identified with &lt;q&gt;Before you start fiddling with your own builds it is strongly recommend to&lt;/q&gt;(sic!) (mentions ChromiumOS images exclusively)&lt;/summary&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/acer-c720-chromebook&quot;&gt;&lt;cite&gt;Acer C720 &amp; C720P &amp; C740 Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/asus-chromebox&quot;&gt;&lt;cite&gt;Asus Chromebox&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/hp-chromebox&quot;&gt;&lt;cite&gt;HP Chromebox&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
&lt;/details&gt;
&lt;details&gt;
 &lt;summary&gt;3 (two other) ARM chromebooks have the &lt;em&gt;entire&lt;/em&gt; &lt;b&gt;Developer Mode&lt;/b&gt; sexion &lt;em&gt;identical&lt;/em&gt; (with the abject lie)&lt;/summary&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-arm-chromebook/&quot;&gt;&lt;cite&gt;Samsung ARM Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-chromebook-2&quot;&gt;&lt;cite&gt;Samsung Chromebook 2&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/acer-cb5-311-chromebook-13&quot;&gt;&lt;cite&gt;Acer CB5-311 Chromebook 13&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
&lt;/details&gt;
&lt;details&gt;
 &lt;summary&gt;3 laptops have another set of identical &lt;b&gt;Developer Mode&lt;/b&gt;s (no mention of how or what you can boot)&lt;/summary&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/acer-c720-chromebook&quot;&gt;&lt;cite&gt;Acer C720 &amp; C720P &amp; C740 Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/chromebook-pixel&quot;&gt;&lt;cite&gt;Chromebook Pixel (2013)&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/chromebook-pixel-2015&quot;&gt;&lt;cite&gt;Chromebook Pixel (2015)&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
&lt;/details&gt;
&lt;details&gt;
 &lt;summary&gt;2 &quot;chromeboxes&quot; have another set of identical &lt;b&gt;Developer Mode&lt;/b&gt;s (no mention of how or what you can boot)&lt;/summary&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/asus-chromebox&quot;&gt;&lt;cite&gt;Asus Chromebox&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/hp-chromebox&quot;&gt;&lt;cite&gt;HP Chromebox&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
&lt;/details&gt;
&lt;details&gt;
 &lt;summary&gt;all &lt;b&gt;Developer Mode&lt;/b&gt; sexions are habsburgian, but this device has &lt;q&gt;unique requirements for entering recovery mode!&lt;/q&gt;, so it'&lt;!--'--&gt;s the most different one&lt;/summary&gt;
 &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/lenovo-thinkpad-x131e-chromebook&quot;&gt;&lt;cite&gt;Lenovo Thinkpad X131e Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
&lt;/details&gt;
&lt;p class=&quot;continuing&quot;&gt;
and
&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/cr-48-chrome-notebook-developer-information&quot;&gt;&lt;cite&gt;Cr-48 Chrome Notebook Developer Information&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
is the oldest, so it actually has an itemised guide called &lt;b&gt;How to boot your own (non-Chromium OS) image from USB&lt;/b&gt; which nonetheless starts with
&lt;q&gt;(Note: This part is outdated: &lt;samp&gt;make_developer_script_runner.sh&lt;/samp&gt; does not exist anymore)&lt;/q&gt;.
Even then, a sub-&lt;b&gt;Create a USB disk that will boot another operating system&lt;/b&gt;-sexion consists exclusively of
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;TODO: This should be possible for someone skilled in the art of Linux.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;The above instructions tell you how to run any arbitrary Linux program, and (with root access) you should be able to do pretty much anything you want.

It would be nice to get some good instructions here, though.&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
which actually makes sense, since the &quot;How to&quot; sexion doesn'&lt;!--'--&gt;t actually appear to do anything?
except download a &quot;&lt;tt&gt;mario_recovery_kernel&lt;/tt&gt;&quot;(‽) from a Google CDN,
prepare an &lt;code&gt;exec sh&lt;/code&gt; &quot;developer script&quot;, and combine them it into a ChromeOS-equivalent image?
which sure as hell doesn'&lt;!--'--&gt;t look like &lt;q&gt;non-Chromium OS&lt;/q&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Naturally &lt;em&gt;two&lt;/em&gt; different ways to make an actual ChromiumOS image are outlined, in spite of the page linking to the developer documentation constantly.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Even out of our lucky trio, the
&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-arm-chromebook/&quot;&gt;&lt;cite&gt;Samsung ARM Chromebook&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
is the only one with the bullet list.
Even then, how are you supposed to interpret it?
How can a partition be marked &quot;active&quot;?
Is the &quot;Linux kernel partition&quot; actually &quot;ChromeOS kernel&quot;&lt;small&gt; (&lt;tt&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309&lt;/tt&gt;)&lt;/small&gt;,
the only &lt;code&gt;kernel&lt;/code&gt;-matching UUID bookworm fdisk knows about?
Assuming the image has to support the Linux boot protocol, what parameters does it pass?
Are there any other restrixions?
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The SD card I put in to test was actually MBR-formatted, so this probably explains why &quot;{Primary,Secondary} GPT header is invalid&quot;.
Indeed, re-making it as GPT (with the only partition being a VFAT &quot;Linux filesystem&quot;&lt;small&gt; (&lt;tt&gt;0FC63DAF-8483-4772-8E79-3D69D8477DE4&lt;/tt&gt;)&lt;/small&gt; to copy logs to),
I got:
&lt;/p&gt;
&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;VbBootDeveloper() - user pressed Ctrl+U; try USB
VbTryLoadKernel() trying disk 0&lt;/span&gt;
GptNextKernelEntry no more kernels
&lt;span class=&quot;token comment&quot;&gt;VbTryLoadKernel() LoadKernel() = 65551
VbSetRecoveryRequest(91)
VbBootDeveloper() - no kernel found on USB&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Amazing, incredible, it &lt;em&gt;enumerated&lt;/em&gt; no kernels this time.
Emboldened by this, I made two kernel partitions, one with the flag it hints at (it's wrong of course, &quot;active partitions&quot; are an MBR thing), accd'g to fdisk:
&lt;/p&gt;
&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;!--
    &quot;--&gt;Device         Size Type              Name Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p1 200M Linux filesystem&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p2  30M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p3  30M ChromeOS kernel        LegacyBIOSBootable&lt;!--&quot;
--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
and rebooting
&lt;/p&gt;
&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;VbTryLoadKernel() trying disk 0&lt;/span&gt;
GptNextKernelEntry looking at new prio partition 2
GptNextKernelEntry s0 t0 p0
GptNextKernelEntry looking at new prio partition 3
GptNextKernelEntry s0 t0 p0
GptNextKernelEntry no more kernels
&lt;span class=&quot;token comment&quot;&gt;VbTryLoadKernel() LoadKernel() = 65551&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
and the flag doesn'&lt;!--'--&gt;t appear to change anything, neither the iteration order nor the solaris-disk-lookin-ass statussies.
(rember that it &quot;likes&quot; internal &lt;span class=&quot;smallcaps&quot;&gt;mmc&lt;/span&gt; partition 2 with &quot;&lt;tt&gt;s1 t0 p2&lt;/tt&gt;&quot;)
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Just copying an arm64 kernel doesn'&lt;!--'--&gt;t work. Not altogether unexpected, given that &lt;samp class=&quot;path&quot;&gt;mmcblk0p2&lt;/samp&gt; starts with
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--&quot;--&gt;000000 43 48 52 4f 4d 45 4f 53 02 00 00 00 01 00 00 00  &gt;CHROMEOS........&amp;lt;&lt;!--&quot;--&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
(with an obvious 64k initial block boundary) and binwalk finds an LZ4 blob at &lt;var&gt;0x100C8&lt;/var&gt; which decompresses to a kernel image.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
This puts the &quot;search for the Linux kernel&quot; paragraph at an 0/2 –
the legacy-bootable flag doesn'&lt;!--'--&gt;t do anything,
and the partition contains a ChromeOS boot bundle, not a kernel.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Not altogether helpful, except I can grep out the full branding string –
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;Linux version 4.19.272-14690-gda0c1392f4b0 (chrome-bot@chromeos-release-builder-us-central1-b-x32-59-cvr8) (Chromium OS 16.0_pre475826_p20230103-r7 clang version 16.0.0 (/var/tmp/portage/sys-devel/llvm-16.0_pre475826_p20230103-r7/work/llvm-16.0_pre475826_p20230103/clang 11897708c0229c92802e747564e7c34b722f045f)) #1 SMP PREEMPT Sun Apr 16 19:38:55 PDT 2023&lt;/pre&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Which is somehow 2023-04 on this 2019 laptop? And a ChromiumOS prelease? Maybe this is why it was in developer mode.
&lt;/p&gt;
&lt;h2 id=&quot;kernal&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#kernal&quot;&gt;#&lt;/a&gt; how is &lt;del&gt;pointar formed&lt;/del&gt; kernal loaded?&lt;/h2&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot; id=&quot;resort&quot;&gt;&lt;!--
    &quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;&lt;small&gt;Device  &lt;/small&gt;     Start  Sectors Size Type                  Name       Attrs&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;div&gt;&lt;!--&quot;                       --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;11      64    16384   8M unknown               RWFW       Type-UUID=&lt;small&gt;CAB6E88E-ABF3-4102-A07A-D4BB9BE3C1D3&lt;/small&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;6    16448        1 512B ChromeOS kernel       KERN-C     GUID:52,53,54,55&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;7    16449        1 512B ChromeOS root fs      ROOT-C&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;9    16450        1 512B ChromeOS reserved     reserved&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;10   16451        1 512B ChromeOS reserved     reserved&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;2    20480    32768  16M ChromeOS kernel       KERN-A     GUID:49,56&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;4    53248    32768  16M ChromeOS kernel       KERN-B     GUID:48,56&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;8    86016    32768  16M Microsoft basic data  OEM&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;12  249856    65536  32M EFI System            EFI-SYSTEM LegacyBIOSBootable&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;5   315392  4194304   2G ChromeOS root fs      ROOT-B&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;3  4509696  4194304   2G ChromeOS root fs      ROOT-A&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;1  8704000 52359120  25G Microsoft basic data  STATE&lt;!--&quot;
--&gt;&lt;/div&gt;&lt;div class=&quot;off&quot;&gt;&lt;!--&quot;  --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;1  8704000 52359120  25G Microsoft basic data  STATE&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;2    20480    32768  16M ChromeOS kernel       KERN-A     GUID:49,56&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;3  4509696  4194304   2G ChromeOS root fs      ROOT-A&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;4    53248    32768  16M ChromeOS kernel       KERN-B     GUID:48,56&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;5   315392  4194304   2G ChromeOS root fs      ROOT-B&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;6    16448        1 512B ChromeOS kernel       KERN-C     GUID:52,53,54,55&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;7    16449        1 512B ChromeOS root fs      ROOT-C&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;8    86016    32768  16M Microsoft basic data  OEM&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;9    16450        1 512B ChromeOS reserved     reserved&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;10   16451        1 512B ChromeOS reserved     reserved&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;11      64    16384   8M unknown               RWFW       Type-UUID=&lt;small&gt;CAB6E88E-ABF3-4102-A07A-D4BB9BE3C1D3&lt;/small&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;                            --&gt;&lt;small&gt;mmcblk0p&lt;/small&gt;12  249856    65536  32M EFI System            EFI-SYSTEM LegacyBIOSBootable&lt;!--&quot;
--&gt;&lt;/div&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;button class=&quot;continuation&quot; id=&quot;resort_button&quot; onclick='resort.children[1].classList.toggle(&quot;off&quot;); resort.children[2].classList.toggle(&quot;off&quot;); resort_button.innerText = resort.children[1].classList.contains(&quot;off&quot;) ? &quot;Sort&quot; : &quot;Unsort&quot;;';&gt;Unsort&lt;/button&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This is how the internal flash is partitioned,
Shockingly, this just about matches the layout I saw in &lt;a href=&quot;012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html&quot;&gt;&lt;samp&gt;012a. Installing Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen Chromebook (Intel)&lt;/samp&gt;&lt;/a&gt;,
but notice how the logical partitions are in, effectively, random order.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
A few things jump out here:
the four &lt;var&gt;1&lt;/var&gt;-sector parts are all zero-filled.
Why aren'&lt;!--'--&gt;t they simply Not There? who knows.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Partition 8 (&lt;tt&gt;&lt;q&gt;OEM&lt;/q&gt;&lt;/tt&gt;) is a completely empty ext4, mounted on &lt;samp class=&quot;path&quot;&gt;/usr/share/oem&lt;/samp&gt; under ChromeOS.
The purpose of this is similarly unclear.
&lt;/p&gt;
&lt;div class=&quot;indented&quot;&gt;
&lt;p style=&quot;display: inline&quot;&gt;
Partition 11 is of a type unknown to the fdisk &lt;em&gt;distributed with the system&lt;/em&gt;.
The &lt;a href=&quot;//chromium.googlesource.com/chromiumos/docs/+/d5eefaba799595d6cd302de047325ca8295dd87e/disk_format.md&quot;&gt;only non-forum non-code Google result&lt;/a&gt;
(note also how it'&lt;!--'--&gt;s to-a-commit instead of &lt;tt&gt;main&lt;/tt&gt; which reads, to me, like &quot;no public links to this at all&quot;)
for the UUID calls it &lt;q&gt;ChromeOS firmware&lt;/q&gt;.
I'&lt;!--'--&gt;ve &lt;a href=&quot;//lore.kernel.org/util-linux/r3td5hqd23d4li67qtnkodkffgsduh6tehvek2kibz3yeizpck@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;taken the liberty&lt;/a&gt;
to teach fdisk about this
(made significantly more annoying by the userland being fucking armhf; admittedly they do say
&lt;/p&gt;
&lt;dl class=&quot;continuing linear&quot;&gt;&lt;dt&gt;User ABI&lt;/dt&gt; &lt;dd&gt;arm&lt;/dd&gt;&lt;/dl&gt;&lt;p class=&quot;continuing&quot; style=&quot;display: inline&quot;&gt;, but the &quot;arm&quot; ABI is &lt;a href=&quot;//wiki.debian.org/ArmPort&quot;&gt;hard-dead&lt;/a&gt;, so).
&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
This would presumably be where the second U-Boot is chainloaded from (&lt;tt&gt;&lt;q&gt;RWFW&lt;/q&gt;&lt;/tt&gt; – read/writeable firmware?).
But'&lt;!--'--&gt;s also zero-filled, so the first 10M of the flash is zeroes.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Partition 12 (&lt;tt&gt;&lt;q&gt;EFI-SYSTEM&lt;/q&gt;&lt;/tt&gt;) isn'&lt;!--'--&gt;t actually,
but it is &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p12.gz&quot;&gt;a 6M-used FAT&lt;/a&gt; with
a 110B &lt;samp class=&quot;path&quot;&gt;u-boot/boot.scr.uimg&lt;/samp&gt; identified as &quot;u-boot legacy uImage&quot; whose semantic content appears to be
&lt;tt style=&quot;font-family: monospace;&quot;&gt;&lt;q&gt;setenv kernelpart 2&lt;/q&gt;&lt;/tt&gt;, &lt;tt style=&quot;font-family: monospace;&quot;&gt;&lt;q&gt;setenv rootpart 3&lt;/q&gt;&lt;/tt&gt;
and a &lt;samp class=&quot;path&quot;&gt;vmlinuz.uimg.A&lt;/samp&gt; which is a device tree – nice, but we already have a device tree in procfs. Are they any different?
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Yeah. This device tree has a kernel inside. Not as a joke, but as
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot; style=&quot;position: relative;&quot;&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p12_vmlinuz.uimg.A.decompiled&quot;&gt;&lt;aside&gt;full device tree&lt;/aside&gt;&lt;/a&gt;
&lt;pre class=&quot;language-dts&quot;&gt;&lt;code class=&quot;language-dts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;/dts-v1/&lt;/span&gt;;

/ {
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;timestamp = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x5cc03b66&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;description = &lt;span class=&quot;token string&quot;&gt;&quot;Chrome OS kernel image with one or more FDT blobs&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;#address-cells = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x01&lt;/span&gt;&gt;;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;images {
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;kernel@1 {
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;data = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x4224d18&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x6470b909&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x841600c1&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x4d5a0091&lt;/span&gt; …
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;type = &lt;span class=&quot;token string&quot;&gt;&quot;kernel_noload&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;arch = &lt;span class=&quot;token string&quot;&gt;&quot;arm64&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;os = &lt;span class=&quot;token string&quot;&gt;&quot;linux&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;compression = &lt;span class=&quot;token string&quot;&gt;&quot;lz4&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;load = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;entry = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;};
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
with 1448960 integers, for a total of 5660KiB.
There'&lt;!--'--&gt;s also a few &lt;tt&gt;description = &quot;mt8173-oak-rev5.dtb&quot;;&lt;/tt&gt;-style &lt;tt&gt;fdt@&lt;var&gt;N&lt;/var&gt;&lt;/tt&gt; entries but they all add up to 350k.
And they're all SHA1-checksummed but the kernel isn't.
The branding for this one is
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;padding-left: 1em; white-space: pre-wrap;&quot;&gt;Linux version 3.18.0-12341-g91e1dfd (chrome-bot@chromeos-factory-us-central1-b-x32-31-497v) (gcc version 4.9.x 20150123 (prerelease) (4.9.2_cos_gg_2d511e9_4.9.2-r122) ) #1 SMP PREEMPT Wed Apr 24 03:31:08 PDT 2019&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
which matches the shipped version documented in the big table; conversely, &lt;tt&gt;KERN-B&lt;/tt&gt; is
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;padding-left: 1em; white-space: pre-wrap;&quot;&gt;Linux version 4.19.272-14688-g23c63bd32a8a (chrome-bot@chromeos-release-builder-us-central1-c-x32-90-i5ts) (Chromium OS 16.0_pre475826_p20230103-r7 clang version 16.0.0 (/var/tmp/portage/sys-devel/llvm-16.0_pre475826_p20230103-r7/work/llvm-16.0_pre475826_p20230103/clang 11897708c0229c92802e747564e7c34b722f045f)) #1 SMP PREEMPT Wed Apr 5 00:00:28 PDT 2023&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
which is 2 commits/11 days behind the &lt;tt&gt;KERN-A&lt;/tt&gt; from the previous sexion,
suggesting that this full 2023 ChromiumOS pre-release image(?) randomly includes a completely unrelated 2019 kernel.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
This system'&lt;!--'--&gt;s &lt;samp class=&quot;path&quot;&gt;/proc/device-tree/compatible&lt;/samp&gt; precisely matches &lt;code&gt;conf@9&lt;/code&gt;'&lt;!--'--&gt;s &lt;code&gt;&lt;var&gt;compatible&lt;/var&gt;&lt;/code&gt; string,
pointing to &lt;code&gt;fdt@9&lt;/code&gt;, described as &lt;samp class=&quot;path&quot;&gt;mt8173-elm-hana.dtb&lt;/samp&gt;
[&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.mt8173-elm-hana.dts&quot;&gt;decompiled&lt;/a&gt;].
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Regardless of how odd the partitioning scheme is, it high-lights type-specific bits set in the boot bundle partitions
– just copying the boot bundle to a &lt;q&gt;ChromeOS kernel&lt;/q&gt; partition on the SD card behaved identically to copying the raw kernel (&lt;tt&gt;s0 t0 p0&lt;/tt&gt;, unchecked) –
so by exhaustively testing all the combinations, I arrived at the following table with a &quot;fake&quot; boot bundle (&lt;samp class=&quot;path&quot;&gt;/sys/firmware/log&lt;/samp&gt; outlined).
&lt;/p&gt;
&lt;dl class=&quot;guid-demo&quot;&gt;
 &lt;dt&gt;&lt;tt&gt;GUID:49&lt;/tt&gt;&lt;/dt&gt;
 &lt;dd&gt;instant reset to the developer mode warning screen
&lt;pre class=&quot;continuation language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;GptNextKernelEntry looking at new prio partition 2
GptNextKernelEntry s0 t0 p2
GptNextKernelEntry no more kernels
VbTryLoadKernel() LoadKernel() = 65551
VbSetRecoveryRequest(91)
VbBootDeveloper() - no kernel found on USB&lt;/code&gt;&lt;/pre&gt;
 &lt;/dd&gt;
 &lt;dt&gt;&lt;tt&gt;GUID:56&lt;/tt&gt;&lt;/dt&gt;
 &lt;dd&gt;same
&lt;pre class=&quot;continuation language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;GptNextKernelEntry looking at new prio partition 2&lt;/span&gt;
GptNextKernelEntry s1 t0 p0
&lt;span class=&quot;token comment&quot;&gt;GptNextKernelEntry no more kernels&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
 &lt;/dd&gt;
 &lt;dt&gt;&lt;tt&gt;GUID:49,56&lt;/tt&gt;&lt;/dt&gt;
 &lt;dd&gt;significant delay before returning to the warning screen
&lt;pre class=&quot;continuation language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;GptNextKernelEntry looking at new prio partition 2&lt;/span&gt;
GptNextKernelEntry s1 t0 p2
GptNextKernelEntry likes partition 2
Found kernel entry at 411648 size 81920
Checking key block signature...
&lt;!--&quot;--&gt;   - sig_size=512, expecting 512 for algorithm 8&lt;!--&quot;--&gt;
In RSAVerify(): Padding check failed!
In RSAVerify(): Hash check failed!
Invalid key block signature.
Verifying key block signature failed.
Checking key block hash only...
&lt;!--&quot;--&gt;   - sig_size=256, expecting 256 for algorithm 4&lt;!--&quot;--&gt;
Kernel preamble is good.
Key block valid: 0
Combined version: 65538
&lt;!--&quot;--&gt;   - sig_size=256, expecting 256 for algorithm 4&lt;!--&quot;--&gt;
In RSAVerify(): Hash check failed!
Kernel data verification failed.
Marking kernel as invalid.
GptNextKernelEntry looking at new prio partition 2
GptNextKernelEntry s1 t0 p2
&lt;span class=&quot;token comment&quot;&gt;GptNextKernelEntry no more kernels&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
 &lt;/dd&gt;
 &lt;dt&gt;&lt;tt&gt;GUID:48,56&lt;/tt&gt;&lt;/dt&gt;
 &lt;dd&gt;same
&lt;pre class=&quot;continuation language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;GptNextKernelEntry looking at new prio partition 2&lt;/span&gt;
GptNextKernelEntry s1 t0 p1
&lt;span class=&quot;token comment&quot;&gt;GptNextKernelEntry likes partition 2
…
GptNextKernelEntry looking at new prio partition 2&lt;/span&gt;
GptNextKernelEntry s1 t0 p1
&lt;span class=&quot;token comment&quot;&gt;GptNextKernelEntry no more kernels&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
 &lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;indented continued&quot;&gt;
If bundles copied verbatim from &lt;samp class=&quot;path&quot;&gt;/dev/mmcblk0p2&lt;/samp&gt; are &quot;real&quot;,
then I made &quot;fake&quot; by replacing the kernel with an LZ4ed Debian one
(&lt;code&gt;{ head -c 0x100C8 mmcblk0p2; lz4 -9 &lt; vmlinuz-6.6.11-arm64; } &gt; mmcblk0p2.fake&lt;/code&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Booting fakes with a measurable-but-recoverable behaviour is crucial because real bundles hard-hang the system in the black screen.
According to
&lt;a href=&quot;//chromium.googlesource.com/chromiumos/docs/+/HEAD/debug_buttons.md#devices-with-keyboards&quot;&gt;&lt;cite&gt;ChromiumOS Docs - Debug Button Shortcuts, Devices With Keyboards&lt;/cite&gt;&lt;/a&gt;
there are at least a few combos that may'&lt;!--'--&gt;ve been able to trigger a warm re-boot, but they all start with &lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔊&lt;/kbd&gt;
which &lt;q&gt;is treated as the &lt;a href=&quot;//www.kernel.org/doc/html/latest/admin-guide/sysrq.html&quot;&gt;Magic SysRq&lt;/a&gt; key&lt;/q&gt;
– off by default, enable it yourself –
so no logs from that one.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
I'm assuming it either doesn't get a rootfs or gets a bogus one, and thus panicks instantly.
No log in the firmware survives the reboot, it doesn'&lt;!--'--&gt;t initialise the display, and the resistors that are in stock and would let me construct
&lt;a href=&quot;//chromium.googlesource.com/chromiumos/third_party/hdctools/+/HEAD/docs/ccd.md&quot;&gt;the CCD cable that may show the serial console&lt;/a&gt;
have been &quot;in packing&quot; for most of this week, so. idk.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Please ignore that I'&lt;!--'--&gt;ve now twice referenced the
&lt;b&gt;Partition attributes&lt;/b&gt; table in the
&lt;a href=&quot;//en.wikipedia.org/wiki/GUID_Partition_Table#Partition_entries_(LBA_2%E2%80%9333)&quot;&gt;&lt;cite&gt;GUID Partition Table&lt;/cite&gt; Wikipedia article&lt;/a&gt;,
and the type-specific bits for &lt;q&gt;ChromeOS kernel&lt;/q&gt; partitions are in the &lt;b&gt;ChromeOS kernel partition attributes&lt;/b&gt; table &lt;em&gt;on the next screen down&lt;/em&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Still no &lt;q&gt;active&lt;/q&gt; marker tho.
&lt;/p&gt;
&lt;h2 id=&quot;debian&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#debian&quot;&gt;#&lt;/a&gt; she debra on my ian '&lt;!--'--&gt;til I marr her dock&lt;/h2&gt;
&lt;p class=&quot;indented&quot;&gt;
Looks like I'&lt;!--'--&gt;d retroactively buried the lede – &lt;tt&gt;KERN-A&lt;/tt&gt; and &lt;tt&gt;KERN-B&lt;/tt&gt; are also in the device-tree-with-embedded-LZ4ed-kernel format.
It was very &lt;span aria-label=&quot;sus&quot;&gt;ඞ&lt;/span&gt; that the LZ4 blob started at &lt;var&gt;0x100C8&lt;/var&gt; instead of &lt;var&gt;0x10000&lt;/var&gt;.
But there doesn'&lt;!--'--&gt;t appear to be a rootfs designator in the device tree, or embedded into the image – not that one would be expected, given the
&lt;tt&gt;root=PARTUUID=&lt;var&gt;uuid&lt;/var&gt;/PARTNROFF=&lt;var&gt;1&lt;/var&gt;&lt;/tt&gt;
in &lt;samp class=&quot;path&quot;&gt;/proc/cmdline&lt;/samp&gt;, and especially given the U-Boot &lt;code&gt;setenv&lt;/code&gt;s of &lt;code&gt;{kernel,root}part&lt;/code&gt; in the script.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
If we are to accept booting a one-has-to-assume-backdoored kernel, and with &lt;tt&gt;ROOT-A&lt;/tt&gt; and &lt;tt&gt;ROOT-B&lt;/tt&gt; having no flags to distinguish them,
three possibilities of picking the rootfs when USB-🙄-booting spring to mind:
&lt;/p&gt;
&lt;ol class=&quot;alphalist&quot;&gt;
 &lt;li&gt;it'&lt;!--'--&gt;ll pick anything marked &lt;q&gt;ChromeOS root fs&lt;/q&gt;,&lt;/li&gt;
 &lt;li&gt;the 64k &lt;tt&gt;&lt;q&gt;CHROMEOS&lt;/q&gt;&lt;/tt&gt; preamble contains the partition number,&lt;/li&gt;
 &lt;li&gt;the 64k &lt;tt&gt;&lt;q&gt;CHROMEOS&lt;/q&gt;&lt;/tt&gt; preamble contains the partition UUID,&lt;/li&gt;
 &lt;li&gt;a secret, fourth thing.&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
A quick &lt;code&gt;head -c 0x10000 mmcblk0p[24] | od -tx1 | grep -wC1 cc | grep -w fe&lt;/code&gt; confirms the UUID isn'&lt;!--'--&gt;t there, at least not in plain.
&lt;tt&gt;03&lt;/tt&gt; and &lt;tt&gt;05&lt;/tt&gt; also don'&lt;!--'--&gt;t appear swapped at the same offsets, but who knows.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
So, using the &quot;real&quot; boot bundle and the worst rootfs in existence
(dpkg-deb -R libc6_2.38-5_arm64.deb faux-root; dpkg-deb -R dash_0.5.12-6_arm64.deb faux-root; ln faux-root/{bin/sh,sbin/init}; mkfs.ext2 -d faux-root faux-root.10M 10M)
I observed a significant behavioural change: &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;u&lt;/kbd&gt; now goes black for precisely 5 seconds and then reboots!
(Still no console so idk why it reboots, and it reboots so no log, but it'&lt;!--'--&gt;s definitely doing something.)
The same happens regardless of partition number, which strongly hints at option a).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
(Later, further testing revealed that the rootfs is &lt;em&gt;always&lt;/em&gt; &lt;tt&gt;root=PARTUUID=&lt;var&gt;kernel-partition-uuid&lt;/var&gt;/PARTNROFF=1&lt;/tt&gt; –
 the partition &lt;em&gt;one after&lt;/em&gt; the kernel.
 The partition type-UUID doesn'&lt;!--'--&gt;t matter.
 What I was observing was either some type of kernel panic, or the bootloader picking the kernel with a partition after it.
 A quick check also shows that this is a kernel-only (mount(8) doesn'&lt;!--'--&gt;t understand it) syntax,
 naturally &lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=79975f1327850ef198ada994c2fc44b7d1ea8935&quot;&gt;authored by an @chromium.org address specifically for this use-case&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
 So: secret, fourth thing.
 One could say that, knowing this, &lt;q&gt;Linux kernel boots from its corresponding rootfs partition&lt;/q&gt; makes sense.
 But without that knowledge it means nothing at all — ½/3.)
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Emboldened, I copied over the 2G &lt;tt&gt;ROOT-A&lt;/tt&gt; instead at an incredible pace of 3.3M/s.
(During this I discovered that &lt;a href=&quot;//youtu.be/2aipm6byd7Q&quot;&gt;if you pause the small looped MP4 of an animation on the OOBE screen,
 &lt;tt&gt;chrome&lt;/tt&gt; goes from two processes at &gt;80% CPU each to just one at 10%&lt;/a&gt;.)
This yields a black screen for the same 5s,
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.08-DSCN0565cv.jpg&quot;&gt;&lt;img alt='top left corner: chrome logo, chrome; middle of screen: throbber next to &quot;Your system is repairing itself.  Please wait.&quot;' src=&quot;/content/assets/blogn_t/012b.08-DSCN0565cv.jpg&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
for 3-10s, and only &lt;em&gt;then&lt;/em&gt; a reboot, after which my accessibility settings were globally reset.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Some fiddling with that rootfs yielded
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot;&gt;
&lt;pre class=&quot;language-diff&quot;&gt;&lt;code class=&quot;language-diff&quot;&gt;diff --no-dereference -ru {orig,new}/sbin/chromeos-boot-alert
&lt;span class=&quot;token coord&quot;&gt;--- orig/sbin/chromeos-boot-alert&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;2024-01-20 03:18:41.000000000 +0100&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;+++ new/sbin/chromeos-boot-alert&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;2024-01-20 03:22:26.000000000 +0100&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;@@ -151,6 +151,9 @@&lt;/span&gt;
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;# Prints message before starting to rebuild a corrupted stateful partition.
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;mode_self_repair() {
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;show_assets_message &quot;self_repair&quot;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;id &gt;&gt; &quot;$TTY&quot;
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;bash &amp;lt; &quot;$TTY&quot; &gt;&gt; &quot;$TTY&quot; 2&gt;&amp;amp;1 &amp;amp;
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;sleep 4
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;}
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;# Prints a message telling the user that developer mode has been disabled for
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.09-DSCN0568ccc.JPG&quot;&gt;&lt;img alt=&quot;The same screen, but in the top there's an overlaid shell with id output, prompt, and successful ls execution&quot; src=&quot;/content/assets/blogn_t/012b.09-DSCN0568ccc.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
which was slow as shit (on the order of 2cps max input speed) and still rebooted after a few seconds, but.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The real break-through was
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot;&gt;
&lt;pre class=&quot;language-diff&quot;&gt;&lt;code class=&quot;language-diff&quot;&gt;Only in orig/etc/init: boot-splash.conf
diff '&lt;!--'--&gt;--color=auto'&lt;!--'--&gt; --no-dereference -ru {orig,new}/etc/init/startup.conf
&lt;span class=&quot;token coord&quot;&gt;--- orig/etc/init/startup.conf&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;2023-04-17 06:31:09.000000000 +0200&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;+++ new/etc/init/startup.conf&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;2024-01-20 03:31:08.000000000 +0100&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;@@ -10,4 +10,5 @@&lt;/span&gt;
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;start on stopped pre-startup
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token deleted-sign deleted&quot;&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;exec chromeos_startup
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;#exec chromeos_startup
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;exec frecon --enable-gfx --enable-vt1 --enable-vts
&lt;/span&gt;&lt;/span&gt;diff '&lt;!--'--&gt;--color=auto'&lt;!--'--&gt; --no-dereference -ru {orig,new}/etc/init/ui.conf
&lt;span class=&quot;token coord&quot;&gt;--- orig/etc/init/ui.conf&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;2023-04-17 06:26:19.000000000 +0200&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;+++ new/etc/init/ui.conf&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;2024-01-20 03:06:54.000000000 +0100&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;@@ -35,7 +35,7 @@&lt;/span&gt;
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;kill timeout 20&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# In seconds.
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;# Uncomment line below to output to VT02
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token deleted-sign deleted&quot;&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;#console output
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;console output
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;# Directory where session manager logs are written and prefix of files there.
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;env UI_LOG_DIR=/var/log/ui
&lt;/span&gt;&lt;/span&gt;Only in new/sbin: init.new
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
(The &lt;samp class=&quot;path&quot;&gt;ui.conf&lt;/samp&gt; diff doesn'&lt;!--'--&gt;t do anything.
 The &lt;samp class=&quot;path&quot;&gt;boot-splash.conf&lt;/samp&gt; deletion may be exchanged for a &lt;samp class=&quot;path&quot;&gt;startup.conf&lt;/samp&gt; deletion instead, since it also runs frecon.
 Naturally, the way to show the &quot;ChromeOS&quot; fade-in is by passing a tty emulator 70 PNGs, in developer mode, and keeping it running afterward.)
&lt;samp class=&quot;path&quot;&gt;chromeos_startup&lt;/samp&gt; is what triggers the self-repair message
(rendered is by &lt;code&gt;pango-view&lt;/code&gt;ing the background, the localised text, and the throbber to a PNG and giving those to frecon).
This yields
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.10-DSCN0570cvcc.JPG&quot;&gt;&lt;img alt=&quot;shell session formatted identically to all the ones before, findmnt lists the root to be mounted on /dev/mmcblk1p3&quot; src=&quot;/content/assets/blogn_t/012b.10-DSCN0570cvcc.JPG&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.11-DSCN0573c.JPG&quot;&gt;&lt;img alt=&quot;top listing, the only processes under init are udevd and frecon/login/bash/top&quot; src=&quot;/content/assets/blogn_t/012b.11-DSCN0573c.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This high-lights the biggest issue with this system: there is no console.
This lede is buried in &lt;samp class=&quot;path&quot;&gt;/proc/cmdline&lt;/samp&gt; in the &lt;a href=&quot;#HFBITLAND&quot;&gt;&lt;cite class=&quot;local-ref&quot;&gt;HFBITLAND&lt;/cite&gt;&lt;/a&gt; sexion –
&lt;tt&gt;console=&lt;/tt&gt; is provided as the first parameter.
Opening &lt;samp class=&quot;path&quot;&gt;/dev/console&lt;/samp&gt; fails with &lt;code&gt;&lt;abbr title=&quot;No such device&quot;&gt;ENODEV&lt;/abbr&gt;&lt;/code&gt;.
There are no framebuffers (and no loadable fbdev modules), there are no VTs.
frecon, which is what provides the pseudo-VTs, draws the teletypes (and the PNGs) by talking to the GPU directly.
As in it has &lt;samp class=&quot;path&quot;&gt;/dev/dri/card2&lt;/samp&gt; open.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
This is why the tty says it'&lt;!--'--&gt;s &lt;samp class=&quot;path&quot;&gt;/dev/pts/0&lt;/samp&gt; – it'&lt;!--'--&gt;s an xterm, but drop the &lt;span class=&quot;smallcaps&quot;&gt;x&lt;/span&gt;.
So to answer the first question from &lt;a href=&quot;012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html&quot;&gt;&lt;samp&gt;012a. Installing Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen Chromebook (Intel)&lt;/samp&gt;&lt;/a&gt; – &lt;code&gt;TERM=xterm&lt;/code&gt; because it is.
It'&lt;!--'--&gt;s also horrendous and the ptys it gives you barely work (libreadline masks this in bash)
– i.a. backspace sends &lt;kbd&gt;^H&lt;/kbd&gt; and it'&lt;!--'--&gt;s configured for the usual &lt;kbd&gt;^?&lt;/kbd&gt;.
One syscall to fix, too hard for this trillion-dollar startup.
This also explains why you can press &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;←&lt;/kbd&gt;/&lt;kbd&gt;→&lt;/kbd&gt; (not the arrow keys)
to open &quot;VT&quot; 1/2, even though &lt;kbd&gt;←&lt;/kbd&gt;/&lt;kbd&gt;→&lt;/kbd&gt; are &lt;code&gt;XF86Back&lt;/code&gt;/&lt;code&gt;XF86Forward&lt;/code&gt; and not F1/F2.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Not even serial?
Not even serial.
My resistors'&lt;!--'--&gt;d got here and I assembled a
&lt;a href=&quot;//chromium.googlesource.com/chromiumos/third_party/hdctools/+/HEAD/docs/ccd.md#SuzyQ-SuzyQable&quot;&gt;&lt;cite&gt;hdctools: Chrome OS Hardware Debug &amp; Control Tools, Closed Case Debug (CCD), Communicating with Google Security Chip(GSC), SuzyQ / SuzyQable&lt;/cite&gt;&lt;/a&gt;
(no, even they don'&lt;!--'--&gt;t know what it is)
accd'&lt;!--'--&gt;g to the instruxions in &lt;cite&gt;Making your own SuzyQ&lt;/cite&gt;
(though mind the referenced 22k 1% resistor not being real and the breakout they spec seemingly being american-only)
more &lt;a href=&quot;//101010.pl/@nabijaczleweli/111784958081841432&quot;&gt;on mastussy&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;cite&gt;Device Support&lt;/cite&gt; says
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;The “Closed Case Debugging” column in the &lt;a href=&quot;//www.chromium.org/chromium-os/developer-information-for-chrome-os-devices&quot;&gt;Chrome OS device list&lt;/a&gt; indicates whether CCD is supported.

If the device is ARM, the CPU/AP UART works by default in dev mode (you should see a login prompt). x86 devices disable it &lt;del&gt;[…]&lt;/del&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
which implies to me that there'&lt;!--'--&gt;s some sort of activity.
And the &lt;q&gt;login prompt&lt;/q&gt; really smells like &lt;!--&quot;--&gt;&quot;you get &lt;tt&gt;console=&lt;samp class=&quot;path&quot;&gt;ttyS0&lt;/samp&gt;&lt;/tt&gt;&quot;&lt;!--&quot;--&gt; or at least a getty thereon
(this is substantiated by opening &lt;samp class=&quot;path&quot;&gt;ttyS0&lt;/samp&gt; working and &lt;samp class=&quot;path&quot;&gt;ttyS[123]&lt;/samp&gt; &lt;code&gt;&lt;abbr title=&quot;Input/output error&quot;&gt;EIO&lt;/abbr&gt;&lt;/code&gt;ing).
Indeed, I can debug the Intel-chipped 300e (shows the &lt;samp class=&quot;path&quot;&gt;ttyUSB&lt;/samp&gt;s, &lt;a href=&quot;//101010.pl/@nabijaczleweli/111813860024376201&quot;&gt;talks on all of them&lt;/a&gt;),
but not this one.
Why?
The device list they link to is another version of the big table cited at the top of this page.
Indeed, both agree with regards to the column I omitted – &lt;cite style=&quot;font-weight: bold; font-style: inherit;&quot;&gt;Closed Case Debugging&lt;/cite&gt;.
The Intel 300e has a &lt;q&gt;Yes&lt;/q&gt; in that column. This Mediatek – nothing. No data.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
So another difference between these nominally-identical laptops is that you can debug one but not the other.
This one is either a black screen or you'&lt;!--'--&gt;ve magically done something right and you have a &lt;abbr title=&quot;GPU term&quot;&gt;gterm&lt;/abbr&gt;.
Of course, I tried to actually run Xorg out of a Debian chroot since there'&lt;!--'--&gt;s a GPU exposed, and the best you get is
&lt;/p&gt;
&lt;div class=&quot;continuing-inside bigcode&quot;&gt;
&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;…
(==) ModulePath set to &quot;/usr/lib/xorg/modules&quot;
(II) The server relies on udev to provide the list of input devices.
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;If no devices become available, reconfigure udev or disable AutoAddDevices.
(II) Loader magic: 0x5c61bffef0
(II) Module ABI versions:
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;X.Org ANSI C Emulation: 0.4
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;X.Org Video Driver: 25.2
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;X.Org XInput driver : 24.4
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;X.Org Server Extension : 10.0
(EE) dbus-core: error connecting to system bus: org.freedesktop.DBus.Error.FileNotFound (Failed to connect to socket /run/dbus/system_bus_socket: No such file or directory)
(II) xfree86: Adding drm device (/dev/dri/card1)
(II) Platform probe for /sys/devices/platform/soc/13000000.mfgsys-gpu/drm/card1
(II) xfree86: Adding drm device (/dev/dri/card2)
(II) Platform probe for /sys/devices/platform/soc/14000000.clock-controller/drm/card2
(II) xfree86: Adding drm device (/dev/dri/card0)
(II) Platform probe for /sys/devices/platform/vgem/drm/card0
(II) no primary bus or device found
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;falling back to /sys/devices/platform/soc/13000000.mfgsys-gpu/drm/card1
(II) LoadModule: &quot;glx&quot;
(II) Loading /usr/lib/xorg/modules/extensions/libglx.so
(II) Module glx: vendor=&quot;X.Org Foundation&quot;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;compiled for 1.21.1.11, module version = 1.0.0
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ABI class: X.Org Server Extension, version 10.0
(II) LoadModule: &quot;modesetting&quot;
(II) Loading /usr/lib/xorg/modules/drivers/modesetting_drv.so
(II) Module modesetting: vendor=&quot;X.Org Foundation&quot;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;compiled for 1.21.1.11, module version = 1.21.1
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;Module class: X.Org Video Driver
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ABI class: X.Org Video Driver, version 25.2
(II) modesetting: Driver for Modesetting Kernel Drivers: kms
(WW) Falling back to old probe method for modesetting
(WW) Falling back to old probe method for modesetting
(II) modeset(G0): using drv /dev/dri/card2
(EE) No devices detected.
(EE)
Fatal server error:
(EE) no screens found(EE)
(EE)
Please consult the The X.Org Foundation support
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt; at http://wiki.x.org
 for help.
(EE) Please also check the log file at &quot;/var/log/Xorg.0.log&quot; for additional information.
(EE)
(EE) Server terminated with error (1). Closing log file.
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and no, plugging in an HDMI doesn't work, it just doesn't understand the GPU or whatever.
I'&lt;!--'--&gt;m no eXorgpert.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Given that neither guide mentions anything remotely close to this,
one has to assume that on the &quot;Samsung ARM Chromebook&quot; this is simply not the case,
and that it pre-dates this no-console no-framebuffer model.
&lt;/p&gt;
&lt;h2 id=&quot;ctrl-i&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#ctrl-i&quot;&gt;#&lt;/a&gt; an interlude: here's a never-documented-before &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;i&lt;/kbd&gt; shortcut :)&lt;!--'--&gt;&lt;/h2&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.12-DSCN0566c.JPG&quot;&gt;&lt;img alt=&quot;overlaid atop the recovery screen, in the top left, is a dump of some firmware variables&quot; src=&quot;/content/assets/blogn_t/012b.12-DSCN0566c.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This is close to as far as I can get with first-principles debugging since there just isn'&lt;!--'--&gt;t really a way to do anything unless everything fully works.
If only there were
&lt;/p&gt;
&lt;h2 id=&quot;systemd&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#systemd&quot;&gt;#&lt;/a&gt; a way to leak post-mortem metadata&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
like when you'&lt;!--'--&gt;re bisecting rootfs bootability requirements and you find the cmdline listed in
&lt;samp class=&quot;path&quot;&gt;/sys/fs/pstore/console-ramoops-0&lt;/samp&gt; (and &lt;samp class=&quot;path&quot;&gt;dmesg-ramoops-0&lt;/samp&gt; sometimes(?) but they'&lt;!--'--&gt;re equivalent)
which contains the entire console output.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
(If you know what you'&lt;!--'--&gt;re looking for, this is obvious – &lt;samp class=&quot;path&quot;&gt;/proc/consoles&lt;/samp&gt; consists of
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;margin-left: 1em; padding-left: 1em;&quot;&gt;
&lt;!--&quot;--&gt;pstore-1             -W- (E  p a)&lt;!--&quot;--&gt;
&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&amp;nbsp;but &lt;a href=&quot;/content/writing/translations/sherlock_holmes_the_published_apocrypha/#the-parodies/the-field-bazaar&quot;&gt;&lt;q&gt;It is all obvious when it is explained to you.&lt;/q&gt;&lt;/a&gt;.)
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;indented&quot;&gt;
&lt;p style=&quot;display: inline&quot;&gt;
Which is great, but only works reliably for real co-operated reboots.
When you use the hard-reboot &lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;⟳&lt;/kbd&gt; combo
(which &lt;a href=&quot;//chromium.googlesource.com/chromiumos/docs/+/HEAD/debug_buttons.md#devices-with-keyboards&quot;&gt;&lt;cite&gt;Debug Button Shortcuts&lt;/cite&gt;&lt;/a&gt; calls
 &lt;/p&gt;
 &lt;dl class=&quot;linear&quot;&gt;
  &lt;dt&gt;EC reset&lt;/dt&gt; &lt;dd&gt;&lt;kbd class=&quot;chromiumos&quot;&gt;Power + Refresh&lt;/kbd&gt;&lt;/dd&gt; &lt;/dl&gt; &lt;p class=&quot;continuing&quot; style=&quot;display: inline&quot;&gt;&lt;!--
 --&gt;).
you get something to the effect of (&lt;code&gt;cat -A&lt;/code&gt;-reformatted):
&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--
    &quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0. 00000]&lt;/span&gt; ^Booting Linuh on physicad CPU 0x0000000000 Y0p410fd032]$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;^[    0.000000]&lt;/span&gt; Hifux versin. 4.!9.272-14690-gd! c13(2f4b0 (chrome-bot@chr.mdos)be,easE-bdilder^Mus%central1-b%x32-59-cvp8) (C(romIum OS 16.0_pre47^U826_p&quot;0230^Q03-r7 clang verSHON 12.0^N0 (/va2/tmp/`ortagd/sys-deve,/l,vi)1^V.0Wpr%474826_p20230103-^R7/uorc/dLVm^M16*0_pre475826_p2023^P103/chanc 1189'708c0229c9280^RE74^W564`7c3^Pb722f045f)) &quot;1 SMP PREEMPT Sun Apr 16 19:38:55 PDT 2023$&lt;!--'--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt; Machine model: COocld Hafa$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[ ^@  0.000000L&lt;/span&gt; Malboried early^@optiOn 'Cnnsole'$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.0^P0000M&lt;/span&gt; ReSerred memory8 createD @MA memmry pool at 0x00000000b7^P0000 $ qaze 5 MiB$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0&amp;000^P00]&lt;/span&gt; GF*^@beserved mem: ini4ha,IzeD nOde 6pu_dma_Mem_begio.@&quot;70000 0, compatible id shared-dma,pool$
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[ ^@^@ 0*000000]&lt;/span&gt; pqci: probing for ck*duit method from DT.$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;S  ^@ 0.0000 0]&lt;/span&gt; psci:^@PSCIv1.0 d%tected in firMw!2e.$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0,000000]&lt;/span&gt; psba: Usin^G standard PSAH v0.2 functioj IDr$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;K    0.000000^]&lt;/span&gt; `sci: MIFRATE_INFO_TIPE not supported*$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000^P00]&lt;/span&gt; psc!: SMC CAllinG^@Confeltion V1.1$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;S  ^@ 0. 00000]&lt;/span&gt; percpu: Embedded 24 pages/cpu R41080 r81(2 D^R9032 u98304$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.0 0000Y&lt;/span&gt; @etected V^IPT ^I-ca#`e .n C@^E0$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[     .000000]&lt;/span&gt; CPU features* en`bling workapnunD fob A^RM errata 826319, 827319, 824069^H&lt;span class=&quot;token comment&quot;&gt;[    0,000000]&lt;/span&gt; CPU fe`turEs: enabline^@workaround fop ABM erratul 843419$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0* 00000]&lt;/span&gt; APU feaTureS: enAbling sorkaroqnd foR ARM erratui ^X^T%719$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[^@   0,000 00]&lt;/span&gt; Built 1 z/n%lists, m/bhLity^@group)nc on.  Todal pages^Z^@1030656$&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[ ^@  0.000000U&lt;/span&gt; KernEl #/mmand^@line: crOs_seaure con^Sole5 log,Evel=7 inht=/sbin/ijit cros_recure dbM.tr!ce=0x00^V rogt=PARTUUID=fd012a^P$-54ac-dd4'-b773-73df13281aa7/PABTNROFF&lt;0 rootvait rw dm_vdridh^N%rror_beharior=3 dm_Verity,maxZbios=-1 Dm_FerItY.dev_wAit=0 dm=&quot;1 vrokt none ro 1$0 40774^V8 veridy pay,maD=ROOT]DDV (ashtrde=#_DEV hashstart=4076468 alg=sha054 r'ot_hexdifest=59&amp;5ac90'd@5cfa3f6fd%f15b166c94025a41ef4abfd0d)c6^Xdb6Ef4a2f62a48 salt=05e2c9a8dc172bc%efe0B899182b436bb89^V09a04^TeAbaaeb5ec07441cf2!122&quot; nohnidrd vt.gdmbalWcqrSor_ddfault=0^@kern_guid=fd012a04-^U4ac%dd47,b573,77df1^Q381aa7 cpuidle.governor=tEo  $&lt;!--&quot;
--&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
which, given that the power LED goes off for 573ms during this time,
one has to assume is DRAM bit-rot.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
As cool as observing a theoretical phenomenon everyone knows about but I never expected to see is in the home shop,
it'&lt;!--'--&gt;s less-than-helpful for trying to ascertain precise messages.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//chromium.googlesource.com/chromiumos/docs/+/HEAD/debug_buttons.md#devices-with-keyboards&quot;&gt;&lt;cite&gt;Debug Button Shortcuts&lt;/cite&gt;&lt;/a&gt; also says
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;table id=&quot;debug_button_shortcuts_table&quot;&gt;
  &lt;tr&gt;&lt;th&gt;Functionality&lt;/th &gt;&lt;th&gt;Shortcut&lt;/th&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Warm AP reset&lt;/td &gt;&lt;td&gt;&lt;kbd&gt;Alt + Volume-Up + R&lt;/kbd&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Restart Chrome&lt;/td &gt;&lt;td&gt;&lt;kbd&gt;Alt + Volume-Up + X&lt;/kbd&gt; *&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Kernel panic/reboot&lt;/td &gt;&lt;td&gt;&lt;kbd&gt;Alt + Volume-Up + X + X&lt;/kbd&gt; *&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Reboot EC but don'&lt;!--'--&gt;t boot AP&lt;/td&gt;&lt;td&gt;&lt;kbd&gt;Alt + Volume-Up + Down-Arrow&lt;/kbd&gt;&lt;/td&gt;&lt;/tr&gt;
  &lt;tr&gt;&lt;td&gt;Force EC hibernate&lt;/td &gt;&lt;td&gt;&lt;kbd&gt;Alt + Volume-Up + H&lt;/kbd&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;/table&gt;
 &lt;i&gt;Notes&lt;/i&gt;:
 &lt;ul&gt;
  &lt;li&gt;AP = Application Processor; EC = Embedded Controller.&lt;/li&gt;
  &lt;li&gt;&lt;kbd class=&quot;chromiumos&quot;&gt;Alt + Volume-Up&lt;/kbd&gt; is treated as the Magic SysRq key.
      When in Developer mode, you can enable SysRq key combinations as documented in the Linux kernel docs.&lt;/li&gt;
 &lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
and, naturally, I'&lt;!--'--&gt;d tried to apply this for a long time, with &lt;kbd&gt;alt&lt;/kbd&gt;, the volume up button on the side, and a magick, and it never worked.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
It is only much later that it'&lt;!--'--&gt;d occurred to me that by &lt;q&gt;&lt;kbd class=&quot;chromiumos&quot;&gt;Volume-Up&lt;/kbd&gt;&lt;/q&gt; they may mean the &lt;kbd&gt;🔊&lt;/kbd&gt; on the keyboard.
That does work! and as long as the ChromiumOS kernel is running,
&lt;span style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔊&lt;/kbd&gt;+&lt;a href=&quot;//www.kernel.org/doc/html/latest/admin-guide/sysrq.html#what-are-the-command-keys&quot;&gt;&lt;kbd&gt;b&lt;/kbd&gt;&lt;/a&gt;&lt;/span&gt;&lt;a href=&quot;//www.kernel.org/doc/html/latest/admin-guide/sysrq.html#what-are-the-command-keys&quot;&gt; reboots&lt;/a&gt;
and preserves the pstore log in tact,
while &lt;span style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔊&lt;/kbd&gt;+&lt;kbd&gt;c&lt;/kbd&gt;&lt;/span&gt; crashes and preserves the pstore log in tact.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
But &lt;span style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔊&lt;/kbd&gt;+&lt;kbd&gt;r&lt;/kbd&gt;&lt;/span&gt; &lt;em&gt;also&lt;/em&gt; reboots with pstore &lt;span class=&quot;smallcaps&quot;&gt;ok&lt;/span&gt;,
and not only is that not a useful SysRq (&lt;q&gt;Turns off keyboard raw mode &lt;del&gt;[…]&lt;/del&gt;&lt;/q&gt;),
but it works regardless of a kernel running or said kernel having any hardware.
So this is documented as a SysRq but just isn'&lt;!--'--&gt;t, and is another, more warmer, reboot.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
It's no actual interactive console, but it's a way to reliably probe whatever the fuck was happening in the black box.
Real green-field shit.
&lt;/p&gt;
&lt;h2 id=&quot;systemd&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#systemd&quot;&gt;#&lt;/a&gt; a brief ado about systemd&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Given the above, it is tempting to boot a Debian rootfs with &lt;tt&gt;KERN-A&lt;/tt&gt; – previously just a black screen – and see what falls out.
Don'&lt;!--'--&gt;t – you will first get
&lt;/p&gt;
&lt;div class=&quot;continuing-inside bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--
    &quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    1.95725]&lt;/span&gt; ChbomIuM OS LSM: sb_mou.t ddv=sysf3 type=s)Qfs flAgs-xe&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;   !.9047)8\&lt;/span&gt; systemd[1]: F@i,ed to mount sysfs (4ypa sysfs) on /sYs (MC_NOSUID|MS_NODEV|MS_NOEXEC &quot;&quot;(: Too eany levels of symbklic links&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    1.94304]&lt;/span&gt; Chromi5m OR HSM: sb_moent MotNt path sith syml)nks prohibHded obj=&quot;/syr/kErned/secqrity&quot; pid=1 cMdline=.sbin/init cros_secure&quot;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[   1.91301]&lt;/span&gt; CHROlium OS LSM: 3b_mound dev=#EcuRityfs tyPa&amp;lt;Securityfs blacs0xe&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;    1.957065M&lt;/span&gt; systeed[]* FrEezing exea%tiOn.&lt;span class=&quot;token comment&quot;&gt;[   31.19(945]&lt;/span&gt; bl_dix`d: `ira&quot;ling&lt;!--
--&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
wherein &quot;Chromium OS LSM: Mount path with symlinks prohibited&quot; appears to be from
&lt;a href=&quot;//chromium.googlesource.com/chromiumos/third_party/kernel/+/c1884ac2c30aaa9c3c356f2e6fd0425c74608424/security/chromiumos/lsm.c#33&quot;&gt;the eponymous module&lt;/a&gt;
which prevents mounting on paths which were resolved via symlinks,
and after you &lt;a href=&quot;//101010.pl/@nabijaczleweli/111795417570668617&quot;&gt;strace systemd pid1&lt;/a&gt; you will find out that it does
&lt;/p&gt;
&lt;pre class=&quot;continuing language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;proc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/proc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;proc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;but&lt;/p&gt;
&lt;pre class=&quot;continuing language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/sys&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; O_NOFOLLOW&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;sysfs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/proc/self/fd/0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;sysfs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;and&lt;/p&gt;
&lt;pre class=&quot;continuing language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/sys/kernel/security&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; O_NOFOLLOW&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;securityfs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/proc/self/fd/0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;securityfs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/pre&gt;&lt;/code&gt;
&lt;p class=&quot;continuing&quot;&gt;
as &lt;a href=&quot;//github.com/systemd/systemd/blob/afd08d7740da1cd987739926f52e266a9d15001f/src/shared/mount-setup.c#L81&quot;&gt;its &lt;em&gt;own&lt;/em&gt; symlink mitigation&lt;/a&gt;,
which makes the latter two &lt;code&gt;&lt;abbr title=&quot;Too many levels of symbolic links&quot;&gt;ELOOP&lt;/abbr&gt;&lt;/code&gt;, as seen in the log.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Given that it &lt;a href=&quot;//github.com/systemd/systemd/blob/afd08d7740da1cd987739926f52e266a9d15001f/src/shared/mount-setup.c#L180-L186&quot;&gt;does not remount these&lt;/a&gt;
one may then be tempted to simply gift them.
So after you
&lt;/p&gt;
&lt;details&gt;
 &lt;summary&gt;mount 20 API filesystems (well, fewer in the end – there'&lt;!--'--&gt;s some fallbacks) from &lt;samp class=&quot;path&quot;&gt;/sbin/init&lt;/samp&gt; before execing systemd&lt;/summary&gt;
 &lt;div class=&quot;continuing-inside bigcode&quot;&gt;
&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/bin/sh&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; dupa dupa dupa dupa dupa dupa dupa &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg
/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; sysfs sysfs /sys &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; securityfs securityfs /sys/kernel/security &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; proc proc /proc &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; tmpfs tmpfs /tmp &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; tmpfs tmpfs /run &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; /run/lock &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;/dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; tmpfs tmpfs /run/lock &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; devtmpfs &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;0755 devtmpfs /dev &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; /dev/pts &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; /dev/shm &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; tmpfs &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;01777 tmpfs /dev/shm &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token function-name function&quot;&gt;mnt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/bin/mount &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$@&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;/dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
mnt cgroup2 &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; nsdelegate,memory_recursiveprot cgroup2 /sys/fs/cgroup &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
mnt cgroup2 &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; nsdelegate cgroup2 /sys/fs/cgroup &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
mnt cgroup2 cgroup2 /sys/fs/cgroup &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
mnt tmpfs tmpfs /sys/fs/cgroup
mnt devpts &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;0620,gid&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt; devpts /dev/pts
mnt cgroup2 &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; nsdelegate cgroup2 /sys/fs/cgroup/unified &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
mnt cgroup2 cgroup2 /sys/fs/cgroup/unified
mnt cgroup &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; none,name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;systemd,xattr cgroup /sys/fs/cgroup/systemd &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; 
mnt cgroup &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; none,name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;systemd cgroup /sys/fs/cgroup/systemd 
mnt pstore pstore /sys/fs/pstore
mnt bpf &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;mode&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;0700 bpf /sys/fs/bpf
&lt;span class=&quot;token comment&quot;&gt;#/bin/sed s/^/'&lt;!--'--&gt;verbose debug'&lt;!--'--&gt;/ /proc/cmdline &gt; /etc/cmdline&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#mount --bind /etc/cmdline /proc/cmdline&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#echo zqpa zqpa zqpa zqpa zqpa zqpa zqpa &gt; /dev/kmsg&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#exec /usr/lib/systemd/systemd --log-level=debug&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#/bin/mount -t proc proc /media&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#while :; do /bin/cp /media/self/mounts /dev/kmsg; done &amp;amp;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#( strace -fp 1 -o /dev/kmsg &amp;amp; ) &amp;amp;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#sleep 0.5&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; /lib/systemd/systemd --log-level&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;debug &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$@&lt;/span&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sleep &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sync&lt;/span&gt; /&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;/dev/kmsg &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; /bin/strace &lt;span class=&quot;token parameter variable&quot;&gt;-DDD&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-o&lt;/span&gt; /strace /lib/systemd/systemd --log-level&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;debug &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$@&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
 &lt;/div&gt;
&lt;/details&gt;
&lt;p class=&quot;continuing&quot;&gt;
you will continue to see a black screen and on reset the pstore will contain
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.13-DSCN0579cvcc.png&quot;&gt;&lt;img alt='Some mount warnings, the sytemd &quot;running in system mode&quot; status line, &quot;Dtetected architecture arm64&quot;, &quot;Hostname set to &lt;chwast&gt;&quot;, &quot;Chromium OS LSM: bpf syscall blocked; Mount path with symlinks prohibited: /tmp (sd-gens)&quot;, &quot;Failed to fork off sandboxing anvironment for executing gnereators: Protocol error&quot;' src=&quot;/content/assets/blogn_t/012b.13-DSCN0579cvcc.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented&quot;&gt;
So this kernel is just
&lt;a href=&quot;//github.com/systemd/systemd/blob/afd08d7740da1cd987739926f52e266a9d15001f/src/core/manager.c#L4043&quot;&gt;fundamentally incompatible with systemd&lt;/a&gt;
(at least as-configured).
woulda bin an easy short-cut, but alas
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This, and the ChromiumOS kernels not supporting kexecing, means that we need to find
&lt;/p&gt;
&lt;h2 id=&quot;dernal&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#dernal&quot;&gt;#&lt;/a&gt; a way to pack a kernel to boot&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
first (naturally, this ticks off the &quot;backdoored kernel&quot; issue as well).
The frecon &lt;samp class=&quot;path&quot;&gt;/etc/issue&lt;/samp&gt; says something about &lt;q&gt;booting a self-signed kernel&lt;/q&gt;,
so this ought to be viable;
luckily, &lt;samp&gt;crossystem&lt;/samp&gt; output includes
&lt;/p&gt;
&lt;pre class=&quot;language-plaintext continuing&quot;&gt;&lt;code class=&quot;language-plaintext&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--&quot;--&gt;fw_vboot2 = 1	# [RO/int] 1 if firmware was selected by vboot2 or 0 otherwise&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
so by applying my incredible monkey brain (
&lt;/p&gt;
&lt;pre style=&quot;margin-left: 0.322em;&quot; class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;root@chwast:~&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; apt search vboot2&lt;/span&gt;
Sorting... Done
Full Text Search... Done
&lt;span class=&quot;token info punctuation&quot;&gt;root@chwast:~&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; apt search vboot&lt;/span&gt;
Sorting... Done
Full Text Search... Done

&lt;span class=&quot;token green&quot;&gt;boot-kernel-utils&lt;/span&gt;/unstable,now 0~R106-15054.B-1 arm64
  Chrome OS verified boot utils required to sign kernels

&lt;span class=&quot;token green&quot;&gt;boot-utils&lt;/span&gt;/unstable,now 0~R106-15054.B-1 arm64
  Chrome OS verified u-boot utilities&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
) and rembering that i last saw this toolchain in &lt;cite&gt;&lt;a href=&quot;//wiki.debian.org/InstallingDebianOn/Samsung/ARMChromebook&quot;&gt;InstallingDebianOn/Samsung/ARMChromebook&lt;/a&gt;&lt;/cite&gt; as
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--
    &quot;--&gt;# Declare the kernel flags:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;cat &gt; ${MNT}/boot/kernel.flags &amp;lt;&amp;lt;EOF&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;console=tty1 printk.time=1 nosplash rootwait root=${DEV}p3 rw rootfstype=ext4 lsm.module_locking=0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;EOF&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;# Sign the kernel:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;cat &gt; ${MNT}/boot/sign-kernel.sh &amp;lt;&amp;lt;EOF&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;vbutil_kernel --repack /boot/vmlinuz.signed --keyblock \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  /usr/share/vboot/devkeys/kernel.keyblock --version 1 \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --signprivate /usr/share/vboot/devkeys/kernel_data_key.vbprivk \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --config /boot/kernel.flags --oldblob /boot/oldblob&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;EOF&lt;!--&quot;
--&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
this can be trivially reproduced
(after installing &lt;samp&gt;boot-kernel-utils&lt;/samp&gt;, which suffers from recommending 50M of javascript via a &lt;samp&gt;-docs&lt;/samp&gt; package)
by re-packing &lt;tt&gt;KERN-A&lt;/tt&gt;:
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap; margin-left: 1em;&quot;&gt;&lt;code&gt;&lt;!--
    &quot;--&gt;vbutil_kernel --repack orig.repacked \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --keyblock    /usr/share/vboot/devkeys/kernel.keyblock \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --signprivate /usr/share/vboot/devkeys/kernel_data_key.vbprivk \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --config &lt;!--&quot;--&gt;&lt;samp class=&quot;path&quot;&gt;cmdline&lt;/samp&gt;&lt;!--&quot;--&gt; \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --oldblob /dev/mmcblk0p2&lt;!--&quot;--&gt;
&lt;!-- --&gt;cp orig.repacked &lt;samp class=&quot;path&quot;&gt;/dev/mmcblk1p9&lt;/samp&gt;&lt;!--
--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
which does boot as expected &lt;em&gt;and&lt;/em&gt; uses the cmdline from &lt;samp class=&quot;path&quot;&gt;cmdline&lt;/samp&gt;.
binwalk didn'&lt;!--'--&gt;t find this, but the boot bundles, after the device tree payload, end with a string sexion containing the cmdline:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
    &quot;--&gt;54372340  &gt;sion.load.entry.algo.kernel.fdt.&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54372400  &gt;compatible.timestamp.value......&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54372440  &gt;................................&amp;lt;&lt;!--&quot;--&gt;
*
&lt;!--&quot;--&gt;54400000  &gt;console= loglevel=7 init=/sbin/i&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400040  &gt;nit cros_secure drm.trace=0x106 &amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400100  &gt;root=PARTUUID=&lt;strong&gt;%U&lt;/strong&gt;/PARTNROFF=1 roo&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400140  &gt;twait rw dm_verity.error_behavio&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400200  &gt;r=3 dm_verity.max_bios=-1 dm_ver&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400240  &gt;ity.dev_wait=0 dm=&quot;1 vroot none &amp;lt;
&lt;!--&quot;--&gt;54400300  &gt;ro 1,0 4077568 verity payload=RO&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400340  &gt;OT_DEV hashtree=HASH_DEV hashsta&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400400  &gt;rt=4077568 alg=sha256 root_hexdi&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400440  &gt;gest=&lt;!--&quot;--&gt;&lt;del&gt;[…&lt;/del&gt;
&lt;!--&quot;--&gt;54400640            &lt;!--&quot;--&gt;&lt;del&gt;…]&lt;/del&gt;&quot; noinitrd vt.global_&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400700  &gt;cursor_default=0 kern_guid=&lt;strong&gt;%U&lt;/strong&gt; cp&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54400740  &gt;uidle.governor=teo  ............&amp;lt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;54401000  &gt;................................&amp;lt;&lt;!--&quot;--&gt;
*
100000000&lt;!--
--&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
with the &lt;code&gt;&lt;var&gt;%U&lt;/var&gt;&lt;/code&gt;s being replaced with the boot bundle's partition's UUID by the boot-loader.
A cute scheme, which does work and does boot, so the tool-chain works.
Even if I don't know why you'd want to sign with those particular parts of some key; doesn'&lt;!--'--&gt;t really matter.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
So, by plumbing the depths of the &lt;samp&gt;vbutil_kernel&lt;/samp&gt; usage string
(or its equivalent 🙄 &lt;a href=&quot;//manpages.debian.org/unstable/vboot-kernel-utils/vbutil_kernel.1.en.html&quot;&gt;manual&lt;/a&gt;)
we can observe that,
given &lt;code&gt;vbutil_kernel --get-vmlinuz /dev/mmcblk0p2 --vmlinuz-out &lt;samp class=&quot;path&quot;&gt;orig&lt;/samp&gt;&lt;/code&gt;,
&lt;samp class=&quot;path&quot;&gt;orig&lt;/samp&gt; contains the whole device tree with the embedded kernel &amp;c.
Why do they call it a &lt;q&gt;vmlinuz&lt;/q&gt; then? doesn't matter, I s'pose.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
And by filling out the non-re-packing, I got to
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap; margin-left: 1em;&quot;&gt;&lt;code&gt;&lt;!--
    &quot;--&gt;printf '\0' &gt; bootloader&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;vbutil_kernel --pack /dev/mmcblk1p9 \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --keyblock    /usr/share/vboot/devkeys/kernel.keyblock \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --signprivate /usr/share/vboot/devkeys/kernel_data_key.vbprivk \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --version 1 \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --vmlinuz &lt;!--&quot;--&gt;&lt;samp class=&quot;path&quot;&gt;orig&lt;/samp&gt; \
&lt;!--&quot;--&gt;  &lt;a href=&quot;//bugs.debian.org/1061329&quot;&gt;--bootloader bootloader&lt;/a&gt; \&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  --config &lt;!--&quot;--&gt;&lt;samp class=&quot;path&quot;&gt;cmdline&lt;/samp&gt; \
&lt;!--&quot;--&gt;  --arch arm64&lt;!--&quot;
--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
wherein it's similarly unclear to me what the version's supposed to be or mean.
I copied &lt;var&gt;1&lt;/var&gt; from &lt;cite&gt;&lt;a href=&quot;//wiki.debian.org/InstallingDebianOn/Samsung/ARMChromebook&quot;&gt;InstallingDebianOn/Samsung/ARMChromebook&lt;/a&gt;&lt;/cite&gt; because it'&lt;!--'--&gt;s required for &lt;samp&gt;--pack&lt;/samp&gt;.
The architecture defaults to &quot;&lt;tt&gt;x86&lt;/tt&gt;&quot;
&lt;a href=&quot;//sources.debian.org/src/vboot-utils/0~R106-15054.B-1/futility/cmd_vbutil_kernel.c/#L222&quot;&gt;regardless of the host&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
As inferrable from above, the bootloader bit is null in the shipped kernel,
but &lt;a href=&quot;//bugs.debian.org/1061329&quot;&gt;you can'&lt;!--'--&gt;t spec an empty file&lt;/a&gt;,
so a file with a zero is minimal.
This doesn'&lt;!--'--&gt;t appear to be used by our bootloader, but it lives in a block after the cmdline.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
So, near as I can tell, the boot bundle consists of:
&lt;/p&gt;
&lt;ol&gt;
 &lt;li&gt;64k &lt;q&gt;&lt;tt&gt;CHROMEOS&lt;/tt&gt;&lt;/q&gt; parameter(?) block&lt;/li&gt;
 &lt;li&gt;device tree containing the kernel and device trees matched to the host by the bootloader – vboot-utils calls this bit &lt;q&gt;vmlinuz&lt;/q&gt;&lt;/li&gt;
 &lt;li&gt;cmdline string (with &lt;var&gt;%U&lt;/var&gt;UID substitution, &lt;tt&gt;cros_secure&lt;/tt&gt; also prepended if it'&lt;!--'--&gt;s not in there already)&lt;/li&gt;
 &lt;li&gt;unused &quot;bootloader&quot; block&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;indented&quot;&gt;
(Even if you replace the kernel carefully without re-signing the bundle,
 you get honked at and &lt;samp class=&quot;path&quot;&gt;/sys/firmware/log&lt;/samp&gt; has the same &quot;&lt;tt&gt;In RSAVerify(): Padding check failed!&lt;/tt&gt;&quot; error as the first time.)
&lt;/p&gt;
&lt;h2 id=&quot;hifux&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#hifux&quot;&gt;#&lt;/a&gt; when im in an EXacutif'&lt;!--'--&gt;^@gejarators competition and my opponent is Hifux:&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Now we just need to get an appropriate kernel to stuff into 2..
The Debian kernel is unsuitable as-shipped because it's fully modular and we don't get an initrd.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Naturally, fixing this means &lt;tt&gt;apt source&lt;/tt&gt;ing the latest kernel (6.6.11-1),
copying &lt;samp class=&quot;path&quot;&gt;/boot/config-6.6.11-arm64&lt;/samp&gt; to &lt;samp class=&quot;path&quot;&gt;.config&lt;/samp&gt;,
and either dealing with all the Kconfig UIs actively fighting you when you try to build in a component with modularised dependencies
(why can't the computer &lt;em&gt;also&lt;/em&gt; build them in instead of just complaining that they're modular and doing nothing? unsolvable problem)
or just (&lt;code&gt;sed -i s/=m$/=y/ .config&lt;/code&gt;) building every module into the kernel image.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Unfortunately, if you &lt;a href=&quot;//101010.pl/@nabijaczleweli/111796329282927743&quot;&gt;do the latter&lt;/a&gt;,
not only does &lt;samp&gt;make -j25 ARCH=arm64 LLVM=1 Image&lt;/samp&gt; take eons (like an hour),
it produces an intermediate 1.7G-sized &lt;samp class=&quot;path&quot;&gt;vmlinux&lt;/samp&gt;,
and the output &lt;samp class=&quot;path&quot;&gt;arch/arm64/boot/Image&lt;/samp&gt; (which according to &lt;samp&gt;make ARCH=arm64 help&lt;/samp&gt; is the &lt;q&gt;Uncompressed kernel image&lt;/q&gt;) is 154M (86M LZ4ed).
This would be perfect if it were bootable; alas, it honks with
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.14-DSCN0582cvcc.png&quot;&gt;&lt;img alt=&quot;Kernel body doesn't fit in memory.&quot; src=&quot;/content/assets/blogn_t/012b.14-DSCN0582cvcc.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This unfortunately means manually enabling every Mediatek-specific feature (&lt;code&gt;'/\(MEDIATEK\|MTK\).*=m/s/m$/y/'&lt;/code&gt;),
all framebuffers,
all the blockdev drivers (&lt;code&gt;'/BLOCK.*=m/s/m$/y/'&lt;/code&gt;) and ext4 (&lt;code&gt;'s/CONFIG_EXT4_FS=m/CONFIG_EXT4_FS=y/'&lt;/code&gt;).
This is mind-numbing. A final &lt;samp class=&quot;path&quot;&gt;.config&lt;/samp&gt; (and a diff from the Debian one) are at the end.
Here'&lt;!--'--&gt;s the high-lights.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
There'&lt;!--'--&gt;s a &lt;cite&gt;Platform selection&lt;/cite&gt; menu at the top.
I unselected everything sans &lt;q&gt;MediaTek SoC Family&lt;/q&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
There'&lt;!--'--&gt;s a whole-ass &lt;cite&gt;Platform support for Chrome hardware&lt;/cite&gt; sexion,
with most of it turned off or modularised in the Debian config.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Drivers for ChromeOS systems are disguised as &quot;&lt;tt&gt;CHROMEOS&lt;/tt&gt;&quot;, &quot;&lt;tt&gt;CROS&lt;/tt&gt;&quot;, and &quot;&lt;tt&gt;GOOGLE&lt;/tt&gt;&quot;.
A significant proportion of these &lt;tt style=&quot;text-transform: uppercase;&quot;&gt;depend on &lt;/tt&gt;&lt;samp&gt;X86&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
In the &lt;cite&gt;File systems, Miscellaneous filesystems&lt;/cite&gt; sexion there'&lt;!--'--&gt;s &lt;q&gt;Persistent store support&lt;/q&gt; (&lt;samp&gt;CONFIG_PSTORE&lt;/samp&gt;).
This is crucial, since this is what provides the logs in &lt;samp class=&quot;path&quot;&gt;/sys/fs/pstore&lt;/samp&gt;.
I cranked that shit.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;samp&gt;CONFIG_CHROMEOS_PSTORE&lt;/samp&gt;&lt;tt style=&quot;text-transform: uppercase;&quot;&gt; depends on &lt;/tt&gt;&lt;samp&gt;X86&lt;/samp&gt;.
This is rather surprising, and proves how mind-numbing of an activity this is because I have it in my notes twice.
ARM chromebooks appear to use some standard pstore method which is covered by a generic driver.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This yields a much more realistic 31M &lt;samp class=&quot;path&quot;&gt;Image&lt;/samp&gt;.
There'&lt;!--'--&gt;s probably a, uh, right way to pack it into the device tree.
Alas, as demonstrated in the &lt;a href=&quot;#kernal&quot;&gt;&lt;cite class=&quot;local-ref&quot;&gt;how is &lt;del&gt;pointar formed&lt;/del&gt; kernal loaded?&lt;/cite&gt;&lt;/a&gt; sexion, device trees can be decompiled
(though not unambiguously, since this time the kernel blob was formatted as &lt;q&gt;&lt;tt&gt;data = [04 22 &lt;del&gt;[…]&lt;/del&gt; 74 00];&lt;/tt&gt;&lt;/q&gt;):
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside&quot; style=&quot;position: relative;&quot;&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.dts&quot;&gt;&lt;aside&gt;full device tree&lt;/aside&gt;&lt;/a&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-c&lt;/span&gt; +&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$((&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x10000&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;))&lt;/span&gt;&lt;/span&gt; mmcblk0p2 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; dtc &lt;span class=&quot;token parameter variable&quot;&gt;-I&lt;/span&gt; dtb &lt;span class=&quot;token parameter variable&quot;&gt;-O&lt;/span&gt; dts &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; mmcblk0p2.dts&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;csplit&lt;/span&gt; mmcblk0p2.dts &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;/data =/'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;/type =/'&lt;!--'--&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;161
26119768
7957930
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;head&lt;/span&gt; xx00 xx02&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;==&gt; xx00 &amp;lt;==
/dts-v1/;

/ {
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;timestamp = &amp;lt;0x643cb38f&gt;;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;description = &quot;Chrome OS kernel image with one or more FDT blobs&quot;;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;#address-cells = &amp;lt;0x01&gt;;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;images {

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;kernel@1 {

==&gt; xx02 &amp;lt;==
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;type = &quot;kernel_noload&quot;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;arch = &quot;arm64&quot;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;os = &quot;linux&quot;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;compression = &quot;lz4&quot;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;load = &amp;lt;0x00&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;entry = &amp;lt;0x00&gt;;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;};

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;fdt@1 {
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;description = &quot;mt2712-evb.dtb&quot;;

&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; xx00&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;printf '&lt;!--'--&gt;data = ['&lt;!--'--&gt;; lz4 &amp;lt; .../Image | od -An -tx1 -v | tr -d '&lt;!--'--&gt;\n'&lt;!--'--&gt;; printf '&lt;!--'--&gt;];\n'&lt;!--'--&gt;;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;cat xx02; } &gt; new
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;dtc &lt;span class=&quot;token parameter variable&quot;&gt;-I&lt;/span&gt; dts &lt;span class=&quot;token parameter variable&quot;&gt;-O&lt;/span&gt; dtb &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; new &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; new.dtb&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
(This is hopefully rather clear:
 splitting the file before and after the first &lt;samp&gt;data =&lt;/samp&gt; line – the kernel'&lt;!--'--&gt;s –
 then pasting it back together with said line replaced with a hex dump from the LZ4ed image.
 The first two steps don'&lt;!--'--&gt;t need to be repeated and the latter two can be trivially pipelined together.)
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
So, after several identical signing rounds (with &lt;var&gt;orig&lt;/var&gt; replaced with &lt;samp class=&quot;path&quot;&gt;new.dtb&lt;/samp&gt;),
rebooting to a black screen,
letting it rip for a bit,
then &lt;kbd&gt;⟳&lt;/kbd&gt;+power-buttoning:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.15-DSCN0583cvcc.png&quot;&gt;&lt;img alt=&quot;Linux version 6.6.11 (nabijaczlweli@tarta) (Debian clang version 18.0.0 ...)&quot; src=&quot;/content/assets/blogn_t/012b.15-DSCN0583cvcc.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It is now that I discovered that &lt;span style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔊&lt;/kbd&gt;+&lt;kbd&gt;r&lt;/kbd&gt;&lt;/span&gt; works,
so &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/new+pstored+sysrq.console-ramoops-0&quot;&gt;full log&lt;/a&gt;.
It'&lt;!--'--&gt;s rather inconsequential, but the interesting bits are
&lt;/p&gt;
&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--
    &quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; Linux version 6.6.11 (nabijaczleweli@tarta) (Debian clang version 18.0.0 (++20231231112334+c7c912cff945-1~exp1~20231231112352.433), Debian LLD 18.0.0) #8 SMP Mon Jan 22 03:42:58 CET 2024
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; KASLR disabled due to lack of seed
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; Machine model: Google Hana
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; efi: UEFI not found.
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; Reserved memory: created DMA memory pool at 0x00000000b7000000, size 5 MiB
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; OF: reserved mem: initialized node vpu_dma_mem_region@b7000000, compatible id shared-dma-pool
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; OF: reserved mem: 0x00000000b7000000..0x00000000b74fffff (5120 KiB) nomap non-reusable vpu_dma_mem_region@b7000000
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; NUMA: No NUMA configuration found
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.000000]&lt;/span&gt;&lt;!--&quot;--&gt; Initmem setup node 0 [mem 0x0000000040000000-0x000000013fffffff]

&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.011840]&lt;/span&gt;&lt;!--&quot;--&gt; smp: Brought up 1 node, 4 CPUs
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.011902]&lt;/span&gt;&lt;!--&quot;--&gt; SMP: Total of 4 processors activated.
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.011910]&lt;/span&gt;&lt;!--&quot;--&gt; CPU features: detected: 32-bit EL0 Support
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.011917]&lt;/span&gt;&lt;!--&quot;--&gt; CPU features: detected: 32-bit EL1 Support
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.011925]&lt;/span&gt;&lt;!--&quot;--&gt; CPU features: detected: CRC32 instructions
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.012042]&lt;/span&gt;&lt;!--&quot;--&gt; CPU: All CPU(s) started at EL2

&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.044906]&lt;/span&gt;&lt;!--&quot;--&gt; Serial: AMBA PL011 UART driver
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.045354]&lt;/span&gt;&lt;!--&quot;--&gt; pstore: Using crash dump compression: deflate
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.045368]&lt;/span&gt;&lt;!--&quot;--&gt; printk: console [ramoops-1] enabled
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.045780]&lt;/span&gt;&lt;!--&quot;--&gt; pstore: Registered ramoops as persistent store backend
&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;[    0.045791]&lt;/span&gt;&lt;!--&quot;--&gt; ramoops: using 0x100000@0xb1f00000, ecc: 0&lt;!--
--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
– 4G of RAM, 4 CPUs, clang trunk works, pstore works, so the device tree also works.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It does, however, end with a litany of expired time-outs for like every device –
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;overflow: auto;&quot;&gt;
&lt;!--&quot;--&gt;[   10.976470]&lt;!--&quot;--&gt; mtk-scpsys 10006000.scpsys: vdec: clk unavailable
&lt;!--&quot;--&gt;[   10.976747]&lt;!--&quot;--&gt; mt6577-uart 11002000.serial: Can'&lt;!--'--&gt;t get uart clock
&lt;!--&quot;--&gt;[   10.978161]&lt;!--&quot;--&gt; mediatek-hdmi-ddc 11012000.i2c: get ddc_clk failed: fffffffffffffdfb ,
&lt;!--&quot;--&gt;[   10.978447]&lt;!--&quot;--&gt; mediatek-cec 10013000.cec: Failed to get cec clock: -517
&lt;!--&quot;--&gt;[   10.979634]&lt;!--&quot;--&gt; mtk_vpu 10020000.vpu: get vpu clock failed
&lt;!--&quot;--&gt;[   10.979742]&lt;!--&quot;--&gt; mtk-cpufreq mtk-cpufreq: failed to initialize dvfs info for cpu0
&lt;!--&quot;--&gt;[   10.982016]&lt;!--&quot;--&gt; platform 10212000.mailbox: deferred probe pending
&lt;!--&quot;--&gt;[   10.982039]&lt;!--&quot;--&gt; platform 11290000.usb-phy: deferred probe pending
&lt;!--&quot;--&gt;[   10.982055]&lt;!--&quot;--&gt; platform 10209100.hdmi-phy: deferred probe pending
&lt;!--&quot;--&gt;[   10.982069]&lt;!--&quot;--&gt; platform 1401e000.pwm: deferred probe pending
&lt;!--&quot;--&gt;[   10.982083]&lt;!--&quot;--&gt; platform backlight: deferred probe pending
&lt;!--&quot;--&gt;[   10.982097]&lt;!--&quot;--&gt; platform 1000d000.pwrap: deferred probe pending
&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
Unclear to me what &quot;deferred probe pending&quot; means (do I need to &lt;a href=&quot;//forum.chrultrabook.com/t/help-me-please-i-buyed-incorrect-drivers/218&quot;&gt;buy a driver&lt;/a&gt;?);
this is the hard part.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Actually the hard part turned out to be &quot;getting Hifux to execute an init from an embedded »early userspace« initramfs&quot;
(apparently it wants &lt;samp class=&quot;path&quot;&gt;/init&lt;/samp&gt; (&lt;code&gt;rdinit=&lt;/code&gt;) instead of &lt;samp class=&quot;path&quot;&gt;/sbin/init&lt;/samp&gt; (&lt;code&gt;init=&lt;/code&gt;)
 and only runs it if it exists and silently ignores everything if not;
 I only got to this with significant debugging),
since &lt;a href=&quot;//blog.dowhile0.org/2022/06/21/how-to-troubleshoot-deferred-probe-issues-in-linux/&quot;&gt;&lt;cite&gt;How to troubleshoot deferred probe issues in Linux&lt;/cite&gt;&lt;/a&gt;
notes &lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=d090b70ede02370014a1cf8acd211d1ed0fa9fd9&quot;&gt;commit d090b70ede02: &lt;cite&gt;driver core: add deferring probe reason to devices_deferred property&lt;/cite&gt;&lt;/a&gt;,
which &lt;code&gt;6.6&lt;/code&gt; includes, puts the reason into &lt;samp class=&quot;path&quot;&gt;/sys/kernel/debug/devices_deferred&lt;/samp&gt;
– while we aren'&lt;!--'--&gt;t at a real interactive userland yet
  (and can't embed one due to the Linux image limit, and the &quot;bootloader&quot; block doesn't appear to be forwarded as an initrd),
  a minimal &quot;&lt;code&gt;cp /s/k/d/d_d /dev/kmsg&lt;/code&gt;&quot;-style cpio is 1.7M zstded –
dash, mount, libc6, libblkid1, libmount1, libpcre2, libselinux1 debs, a Makefile
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot;&gt;
&lt;pre class=&quot;language-makefile&quot;&gt;&lt;code class=&quot;language-makefile&quot;&gt;&lt;span class=&quot;token builtin-target builtin&quot;&gt;.ONESHELL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token target symbol&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;mkdir -p root/dev root/proc root/sys root/dev
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;for f in *.deb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; do
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;dpkg-deb -R &lt;span class=&quot;token variable&quot;&gt;$$f&lt;/span&gt; root/
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;rm -r root/DEBIAN
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;done
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;rm -r root/usr/share root/usr/lib/aarch64-linux-gnu/gconv
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;chmod u-s root/usr/bin/*
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ln -f init root/
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;a simple init script to log the file every second&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot;&gt;
&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token shebang important&quot;&gt;#!/bin/sh -x&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; devtmpfs devtmpfs /dev
&lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/console &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; /dev/console &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;#exec &gt; /dev/kmsg 2&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; proc proc /proc
&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; sysfs sysfs /sys
&lt;span class=&quot;token function&quot;&gt;mount&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-t&lt;/span&gt; debugfs debugfs /sys/kernel/debug
&lt;span class=&quot;token builtin class-name&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;%s\n'&lt;!--'--&gt;&lt;/span&gt; /sys/kernel/debug/*
cat&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; +x
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;IFS&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-r&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;%s\n'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$l&lt;/span&gt;&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$1&lt;/span&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; /proc/uptime &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg
&lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; +x
&lt;span class=&quot;token assign-left variable&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;token function-name function&quot;&gt;one&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;IFS&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;. &lt;span class=&quot;token builtin class-name&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-r&lt;/span&gt; u2 rest &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; /proc/uptime
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$u2&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-eq&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$u&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;continue&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$u2&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$u&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$rest&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; /sys/kernel/debug/devices_deferred &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; /dev/kmsg
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;break&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; one
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and
&lt;tt&gt;CONFIG_INITRAMFS_SOURCE=&quot;&lt;!--&quot;--&gt;&lt;span class=&quot;roboto-unscale&quot;&gt;&lt;span class=&quot;ell roboto&quot;&gt;&lt;del&gt;[…]&lt;/del&gt;&lt;/span&gt;&lt;/span&gt;/faux/root&quot;&lt;!--&quot;--&gt;&lt;/tt&gt;,
with a little ergonomic &lt;tt&gt;panic=1&lt;/tt&gt; yields
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;overflow: auto;&quot;&gt;&lt;!--
    &quot;--&gt;[   23.083931] Run /init as init process&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.145830] 23.14 69.15&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.181712] mtk-cpufreq	&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.209648] backlight	platform: supplier fixedregulator2 not ready&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.284973] 11230000.mmc	platform: wait for supplier /soc/pwrap@1000d000/mt6397/mt6397regulator/buck_vio18&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.387265] 11240000.mmc	platform: wait for supplier /soc/pwrap@1000d000/mt6397/mt6397regulator/ldo_vmc&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.501618] 1401d000.dpi	mediatek-dpi: Failed to get bridge&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.572462] 11260000.mmc	platform: wait for supplier /soc/pwrap@1000d000/mt6397/mt6397regulator/ldo_vgp3&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.681601] 1401b000.dsi	platform: wait for supplier /soc/i2c@11007000/edp-bridge@8/ports/port@0/endpoint&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.794384] 14025000.hdmi	&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   23.837822] panel	platform: wait for supplier /soc/i2c@11007000/edp-bridge@8/ports/port@1/endpoint&lt;!--&quot;--&gt;
…
&lt;!--&quot;--&gt;[   32.777145] Kernel panic - not syncing: Attempted to kill init! exitcode=0x00000000&lt;!--&quot;
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
which naturally points to &lt;code&gt;CONFIG_REGULATOR_MT6397&lt;/code&gt;.
Re-building, re-signing, re-rebooting again shows
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;overflow: auto;&quot;&gt;&lt;!--
    &quot;--&gt;[   24.315189] mtk-cpufreq	&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.342813] backlight	platform: supplier fixedregulator2 not ready&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.412245] 1401d000.dpi	mediatek-dpi: Failed to get bridge&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.473247] 11260000.mmc	platform: supplier fixedregulator0 not ready&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.559623] 1401b000.dsi	platform: wait for supplier /soc/i2c@11007000/edp-bridge@8/ports/port@0/endpoint&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.665648] 14025000.hdmi	&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.708081] panel	platform: wait for supplier /soc/i2c@11007000/edp-bridge@8/ports/port@1/endpoint&lt;!--&quot;
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
which is already quite good, with both MMCs showing up
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;overflow: auto;&quot;&gt;&lt;!--
    &quot;--&gt;[   17.525454] mmcblk0: mmc0:e624 SU08G 7.40 GiB&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   17.688381]  mmcblk0: p1 p5 p6 p9 p10 p15&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;[   18.167701] mmc1: new HS400 MMC card at address 0001&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.269237] mmcblk1: mmc1:0001 DA4032 29.1 GiB&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.379454] GPT:partition_entry_array_crc32 values don't match: 0x9d2a6879 != 0xef8dd269&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.499823] GPT:Primary header thinks Alt. header is not at the end of the disk.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.648561] GPT:61063167 != 61071359&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.648566] GPT:Alternate GPT header not at the end of the disk.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.648569] GPT:61063167 != 61071359&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.735943] GPT: Use GNU Parted to correct GPT errors.&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.735978]  mmcblk1: p1 p2 p3 p4 p5 p6 p7 p8 p9 p10 p11 p12&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.853013] mmcblk1boot0: mmc1:0001 DA4032 4.00 MiB&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   18.963993] mmcblk1boot1: mmc1:0001 DA4032 4.00 MiB&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   19.088099] mmcblk1rpmb: mmc1:0001 DA4032 16.0 MiB, chardev (238:0)&lt;!--&quot;
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
(though note the now-randomised MMC order, and the explicit-by-name parted call-out. more like GNU Partition Table!)
but they still want, uh
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;margin-left: 1em; overflow: auto;&quot;&gt;&lt;!--
    '--&gt;$ grep -A1 fixedregulator &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.mt8173-elm-hana.dts&quot;&gt;mt8173-elm-hana.dts&lt;/a&gt;&lt;!--'--&gt;
&lt;!--'--&gt;		fixedregulator0 {&lt;!--'--&gt;
&lt;!--'--&gt;			compatible = &quot;regulator-fixed&quot;;&lt;!--'--&gt;
&lt;!--'--&gt;$ grep -r regulator-fixed | grep c:&lt;!--'--&gt;
&lt;!--'--&gt;drivers/regulator/fixed.c:              .compatible = &quot;regulator-fixed&quot;,&lt;!--'--&gt;
&lt;!--'--&gt;$ grep fixed drivers/regulator/Makefile&lt;!--'--&gt;
&lt;!--'--&gt;obj-$(CONFIG_REGULATOR_FIXED_VOLTAGE) += fixed.o&lt;!--'
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;samp&gt;CONFIG_REGULATOR_FIXED_VOLTAGE&lt;/samp&gt;:
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;overflow: auto;&quot;&gt;&lt;!--
    &quot;--&gt;[   24.483011] mtk-cpufreq	&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.522681] 1401d000.dpi	mediatek-dpi: Failed to get bridge&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.587404] 1401b000.dsi	platform: wait for supplier /soc/i2c@11007000/edp-bridge@8/ports/port@0/endpoint&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.696106] 14025000.hdmi	&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[   24.739520] panel	platform: wait for supplier /soc/i2c@11007000/edp-bridge@8/ports/port@1/endpoint&lt;!--&quot;
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;so&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;overflow: auto;&quot;&gt;&lt;!--
    '--&gt;$ grep -A1 edp-bridge &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.mt8173-elm-hana.dts&quot;&gt;mt8173-elm-hana.dts&lt;/a&gt;&lt;!--'--&gt;
&lt;!--'--&gt;			edp-bridge@8 {&lt;!--'--&gt;
&lt;!--'--&gt;				compatible = &quot;parade,ps8640&quot;;&lt;!--'--&gt;
&lt;!--'--&gt;$ grep -r parade,ps8640&lt;!--'--&gt;
&lt;!--'--&gt;drivers/gpu/drm/bridge/parade-ps8640.c: { .compatible = &quot;parade,ps8640&quot; },&lt;!--'--&gt;
&lt;!--'--&gt;$ grep ps8640 drivers/gpu/drm/bridge/Makefile&lt;!--'--&gt;
&lt;!--'--&gt;obj-$(CONFIG_DRM_PARADE_PS8640) += parade-ps8640.o&lt;!--'--&gt;
&lt;!--'--&gt;$ grep DRM_PARADE_PS8640 .config&lt;!--'--&gt;
&lt;!--'--&gt;CONFIG_DRM_PARADE_PS8640=y&lt;!--'
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;hm&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;overflow: auto;&quot;&gt;&lt;!--
    '--&gt;$ grep -m1 -A1 11007000 &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.mt8173-elm-hana.dts&quot;&gt;mt8173-elm-hana.dts&lt;/a&gt;&lt;!--'--&gt;
&lt;!--'--&gt;		i2c@11007000 {&lt;!--'--&gt;
&lt;!--'--&gt;			compatible = &quot;mediatek,mt8173-i2c&quot;;&lt;!--'--&gt;
&lt;!--'--&gt;$ grep -r mediatek,mt8173-i2c | grep c:&lt;!--'--&gt;
&lt;!--'--&gt;drivers/i2c/busses/i2c-mt65xx.c:        { .compatible = &quot;mediatek,mt8173-i2c&quot;, .data = &amp;mt8173_compat },&lt;!--'--&gt;
&lt;!--'--&gt;$ grep i2c-mt65xx drivers/i2c/busses/Makefile&lt;!--'--&gt;
&lt;!--'--&gt;obj-$(CONFIG_I2C_MT65XX)        += i2c-mt65xx.o&lt;!--'--&gt;
&lt;!--'--&gt;$ grep CONFIG_I2C_MT65XX .config&lt;!--'--&gt;
&lt;!--'--&gt;CONFIG_I2C_MT65XX=m&lt;!--'
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
which still doesn'&lt;!--'--&gt;t actually get us the screen due to the unchanging bridge issues, but
&lt;/p&gt;
&lt;h2 id=&quot;mmc&quot; class=&quot;continuation&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#mmc&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;font-size: .9em;&quot; lang=&quot;de&quot; href=&quot;//youtu.be/HqxKVQqoL5o&quot;&gt;Mein Gott Leute, mein neu Linux hat mir einfach erlaubt dass ich MMC booten darf! Wie cool ist das bitte? Jetzt zocke ich Systemd und boote von MMC! &lt;span style=&quot;text-transform: uppercase;&quot;&gt;Yippee&lt;/span&gt;!&lt;/a&gt;&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But only after disabling &lt;samp&gt;CONFIG_INITRAMFS_SOURCE&lt;/samp&gt; because if there is an initramfs embedded,
even if you don'&lt;!--'--&gt;t unpack it (&lt;code&gt;noinitrd&lt;/code&gt;),
the rootfs mount willl &lt;code&gt;&lt;abbr title=&quot;No such file or directory&quot;&gt;ENOENT&lt;/abbr&gt;&lt;/code&gt; regardless,
which means you can get a panic with a blockdev dump listing available partition UUIDs when root= &lt;em&gt;already contains one of them&lt;/em&gt;:
&lt;/p&gt;
&lt;!-- new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c.console-ramoops-0.no-initrd --&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--
    '--&gt;[   24.530570] VFS: Cannot open root device &quot;PARTLABEL=chwast-root&quot; or unknown-block(179,778): error -2&lt;!--'--&gt;
&lt;!--'--&gt;                                         (or &quot;PARTUUID=b8c64d3b-7752-4132-a244-5a85fc14157a&quot;)&lt;!--'--&gt;
&lt;!--'--&gt;                                         (or &quot;0b3:0030a&quot;)&lt;!--'--&gt;
&lt;!--'--&gt;[   24.639808] Please append a correct &quot;root=&quot; boot option; here are the available partitions:&lt;!--'--&gt;
&lt;!--'--&gt;[   24.739687] b300        30535680 mmcblk2 &lt;!--'--&gt;
&lt;!--'--&gt;[   24.739696]  driver: mmcblk&lt;!--'--&gt;
&lt;!--'--&gt;[   24.820866]   b301        26179560 mmcblk2p1 d8331ad0-ed78-f442-87f4-78df0130895a&lt;!--'--&gt;
…
&lt;!--'--&gt;[   26.001792]   b30c           32768 mmcblk2p12 bcf61070-764a-004f-8abd-590a44996a91&lt;!--'--&gt;
&lt;!--'--&gt;[   26.001798] &lt;!--'--&gt;
&lt;!--'--&gt;[   26.110005] 0b3:00100       4096 mmcblk2boot0 &lt;!--'--&gt;
&lt;!--'--&gt;[   26.110012]  (driver?)&lt;!--'--&gt;
&lt;!--'--&gt;[   26.191177] 0b3:00200       4096 mmcblk2boot1 &lt;!--'--&gt;
&lt;!--'--&gt;[   26.191183]  (driver?)&lt;!--'--&gt;
&lt;!--'--&gt;[   26.272335] 0b3:00300    7761920 mmcblk1 &lt;!--'--&gt;
&lt;!--'--&gt;[   26.272342]  driver: mmcblk&lt;!--'--&gt;
&lt;!--'--&gt;[   26.353498]   0b3:00301     204800 mmcblk1p1 1aa8056f-1357-6c45-a2f2-cb8bb98338e6&lt;!--'--&gt;
&lt;!--'--&gt;[   26.460663]   0b3:00305      16384 mmcblk1p5 8865bf3d-d8ea-574a-9c55-3aabefc1e84d&lt;!--'--&gt;
&lt;!--'--&gt;[   26.567834]   0b3:00306    2097152 mmcblk1p6 a0464221-9912-f146-ac7b-c6f489c25176&lt;!--'--&gt;
&lt;!--'--&gt;[   26.675000]   0b3:00309     102400 mmcblk1p9 1e061a8c-6159-4486-add1-988e88a06acf&lt;!--'--&gt;
&lt;!--'--&gt;[   26.782169]   0b3:0030a    1046872 mmcblk1p10 b8c64d3b-7752-4132-a244-5a85fc14157a&lt;!--'--&gt;
&lt;!--'--&gt;[   26.890374]   0b3:0030f      10240 mmcblk1p15 b6bbcc50-e420-4032-a2d2-ea69fce9cb53&lt;!--'--&gt;
&lt;!--'--&gt;[   26.890381] &lt;!--'--&gt;
&lt;!--'--&gt;[   26.998582] List of all bdev filesystems:&lt;!--'--&gt;
&lt;!--'--&gt;[   27.046449]  ext3&lt;!--'--&gt;
&lt;!--'--&gt;[   27.046453]  ext2&lt;!--'--&gt;
&lt;!--'--&gt;[   27.069350]  ext4&lt;!--'--&gt;
&lt;!--'--&gt;[   27.092248]  fuseblk&lt;!--'--&gt;
&lt;!--'--&gt;[   27.115147] &lt;!--'--&gt;
&lt;!--'--&gt;[   27.158861] Kernel panic - not syncing: VFS: Unable to mount root fs on unknown-block(179,778)&lt;!--'
--&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
and since it says &lt;tt&gt;unknown-block(179,778)&lt;/tt&gt; (rather than &quot;&lt;samp&gt;0,0&lt;/samp&gt;&quot;) it &lt;em&gt;knows what it is!&lt;/em&gt; but just can'&lt;!--'--&gt;t.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But rebuilding without, enabling &lt;tt&gt;serial-getty@ttyUSB0.service&lt;/tt&gt;, plugging in a USB/serial adapter, and building and installing modules, we are greeted with
&lt;/p&gt;
&lt;!-- new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2 --&gt;
&lt;!--&quot;--&gt;&lt;a href=&quot;/content/assets/blogn_t/012b.16-ttyUSB0-login.png&quot;&gt;&lt;img alt=&quot;Debian GNU/Linux trixie/sid chwast ttyUSB0
​
chwast login: nabijaczleweli
Password:
​
Linux chwast 6.6.11 #73 SMP Thu Jan 25 08:06:59 CET 2024 aarch64
$ free -h
Mme: total 3.8Gi used 220Mi free 3.4Gi shared 952Ki buff/cache 295Mi available 3.6Gi
$ cat /proc/device-tree compatible ; echo
google,hana-rev6 google,hana-rev5 google,hana-rev4 google,hana-rev3 google,hana-rev2 google,hana-rev1 google,hana mediatek,mt8173
$ lscpu
Architecture: aarch64
Vendor ID: ARM
Model name: Cortex-A53
Model: 2
Model name: Cortex-A72
Model: 0
Flags: fp asimd evtstrm aes pmull sha1 sha2 crc32 cpuid
NUMA node0 CPU(s): 0-3&quot; src=&quot;/content/assets/blogn_t/012b.16-ttyUSB0-login.png&quot;&gt;&lt;/a&gt;&lt;!--&quot;--&gt;
&lt;p class=&quot;continuation&quot;&gt;
at a blazing 9600 bits per second.
You know it'&lt;!--'--&gt;s a modern system because that speed was achieved over &lt;em&gt;USB 3&lt;/em&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This kinda mostly works, vaguely;
since the other end is a &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export/#1184835796681023488&quot;&gt;real RS232&lt;/a&gt;,
the maximum speed is 115200 baud and oh boy is 11k/s (8k/s for binary data) fucking horrendous in year of the hog 2024!
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Wi-Fi &lt;a href=&quot;//lore.kernel.org/linux-wireless/xebnh5c5rnfequ6khyhieugefrtt5mdftr6rsw522ocpg3yvln@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;backtraces with a warning&lt;/a&gt;
and doesn'&lt;!--'--&gt;t work even after loading firmware (&lt;samp class=&quot;path&quot;&gt;mrvl/sd8897_uapsta.bin&lt;/samp&gt; from firmware-libertas).
Neither does the screen in any meaningful way, even with firmware-misc-nonfree &lt;samp class=&quot;path&quot;&gt;mediatek/mt8173/vpu_p.bin&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Concept proven: Debian &lt;samp class=&quot;path&quot;&gt;new+&lt;wbr /&gt;pstored+&lt;wbr /&gt;sysrq+&lt;wbr /&gt;clock-uvesa+&lt;wbr /&gt;clk+&lt;wbr /&gt;mmc+&lt;wbr /&gt;devices_deferred2+&lt;wbr /&gt;rtc+&lt;wbr /&gt;6397+&lt;wbr /&gt;fixed+&lt;wbr /&gt;i2c+&lt;wbr /&gt;usbsh2&lt;/samp&gt; runs in only 73 kernels,
a significant proportion of which I don'&lt;!--'--&gt;t think made it to the testing stage; this is probably like the twentieth in this lineage.
&lt;/p&gt;
&lt;h2 id=&quot;foreign-config&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#foreign-config&quot;&gt;#&lt;/a&gt; Fraerin'&lt;!--'--&gt; ex%butinn^N&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But no matter what I do or what combination of seemingly-relevant configs I flip, shit don'&lt;!--'--&gt;t work.
This either means booting normally to the rootfs, or freezing completely with an inocuous log or one that doesn'&lt;!--'--&gt;t stand out at all.
&lt;!-- new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy.console-ramoops-0 --&gt;
This is exemplified by &lt;a href=&quot;//101010.pl/@nabijaczleweli/111819728243407140&quot;&gt;the latter happening&lt;/a&gt; when turning on &lt;code&gt;CONFIG_DRM_FBDEV_EMULATION&lt;/code&gt;.
Post factum I know for a fact this isn'&lt;!--'--&gt;t the issue,
but at one point it became obvious that this is some proxy-interactive behaviour with no way to validate it.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
If only someone had a validated-funxional config to test or diff against!
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//www.google.com/search?client=firefox-b-d&amp;q=google+hana+chromebook+linux&quot;&gt;&lt;cite&gt;google hana chromebook linux - Google Search&lt;/cite&gt;&lt;/a&gt;
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;h5 class=&quot;continuing&quot;&gt;&lt;a href=&quot;//github.com/hexdump0815/linux-mainline-on-arm-chromebooks&quot;&gt;running linux mainline on arm chromebooks - for example&lt;/a&gt;&lt;/h5&gt;
 lenovo &lt;strong&gt;chromebook&lt;/strong&gt; n23 - &lt;strong&gt;hana&lt;/strong&gt;; acer &lt;strong&gt;chromebook&lt;/strong&gt; r13 - elm; lenovo &lt;strong&gt;chromebook&lt;/strong&gt; ... https://support.&lt;strong&gt;google&lt;/strong&gt;.com/chrome/a/answer/9139543?hl=en · https://chromium ...
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;→&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//github.com/hexdump0815/linux-mainline-on-arm-chromebooks&quot;&gt;&lt;cite&gt;hexdump0815/linux-mainline-on-arm-chromebooks: running linux mainline on arm chromebooks - for example: &lt;del&gt;[…]&lt;/del&gt; acer r13 (oak elm and hana)&lt;del&gt;[…]&lt;/del&gt; and most probably many many more over time ...&lt;/cite&gt;&lt;/a&gt;
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;h3 class=&quot;continuing&quot;&gt;running linux mainline on arm chromebooks&lt;/h3&gt;
 &lt;h4 class=&quot;continuing&quot;&gt;supported devices and linux distributions&lt;/h4&gt;
 &lt;ul&gt;
  &lt;li&gt;chromebook oak:
      &lt;ul&gt;
       &lt;li&gt;lenovo chromebook 300e (mt8173 version) - hana&lt;/li&gt;
       &lt;li&gt;&lt;a href=&quot;//github.com/hexdump0815/imagebuilder/blob/main/systems/chromebook_oak/readme.md&quot;&gt;https://github.com/hexdump0815/imagebuilder/blob/main/systems/chromebook_oak/readme.md&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
  &lt;/li&gt;
 &lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;→&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//github.com/hexdump0815/imagebuilder/blob/main/systems/chromebook_oak/readme.md&quot;&gt;&lt;cite&gt;imagebuilder/systems/chromebook_oak/readme.md at main · hexdump0815/imagebuilder&lt;/cite&gt;&lt;/a&gt;
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
 &lt;h3 class=&quot;continuing&quot;&gt;chromebook oak&lt;/h3&gt;
 &lt;h4 class=&quot;continuing&quot;&gt;tested systems - working&lt;/h4&gt;
 &lt;ul&gt;&lt;li&gt;lenovo chromebook 300e (mt8173 version) - hana&lt;/li&gt;&lt;/ul&gt;
 &lt;h4 class=&quot;continuing&quot;&gt;kernel build notes&lt;/h4&gt;
 &lt;ul&gt;&lt;li&gt;&lt;a href=&quot;//github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/master/readme.mt7&quot;&gt;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/master/readme.mt7&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;in many ways it'&lt;!--'--&gt;s a program that builds it, making it the best type of notes, so →&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/master/readme.mt7&quot;&gt;&lt;cite&gt;linux-mainline-mediatek-mt81xx-kernel/readme.mt7 at master · hexdump0815/linux-mainline-mediatek-mt81xx-kernel&lt;/cite&gt;&lt;/a&gt;
&lt;/p&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;
 &lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--
    '--&gt;# patches for mt8173/oak&lt;!--'--&gt;
&lt;!-- '--&gt;for i in /compile/doc/stable-mt/misc.cbm/patches/v6.6/mt8173*.patch; do&lt;!--'--&gt;
&lt;!-- '--&gt;  echo === $i&lt;!--'--&gt;
&lt;!-- '--&gt;  patch -p1 &lt; $i&lt;!--'--&gt;
&lt;!-- '--&gt;done&lt;!--'
 --&gt;&lt;/pre&gt;
 &lt;del&gt;[…]&lt;/del&gt;
 &lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;scripts/kconfig/merge_config.sh -m arch/arm64/configs/defconfig /compile/doc/kernel-config-options/chromebooks-aarch64.cfg /compile/doc/kernel-config-options/mediatek.cfg /compile/doc/kernel-config-options/docker-options.cfg /compile/doc/kernel-config-options/options-to-remove-generic.cfg /compile/doc/stable-mt/misc.cbm/options/options-to-remove-special.cfg /compile/doc/kernel-config-options/additional-options-generic.cfg /compile/doc/kernel-config-options/additional-options-aarch64.cfg /compile/doc/stable-mt/misc.cbm/options/additional-options-special.cfg&lt;/pre&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The patches are superficially worrying, but they all just touch the device tree –
&lt;/p&gt;
&lt;dl class=&quot;continuing patch-list&quot;&gt;
 &lt;dt&gt;&lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-fix-mmc-order.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-fix-mmc-order.patch&lt;/samp&gt;&lt;/a&gt;&lt;/dt&gt;
 &lt;dd&gt;MMCs in the fixed ChromiumOS
 &lt;dl class=&quot;linear&quot;&gt;
  &lt;dt&gt;0&lt;/dt&gt; &lt;dd&gt;internal&lt;/dd&gt;
  &lt;dt&gt;1&lt;/dt&gt; &lt;dd&gt;external&lt;/dd&gt;
  &lt;dt&gt;2&lt;/dt&gt; &lt;dd&gt;Wi-Fi&lt;/dd&gt;
 &lt;/dl&gt;
 order in the alias list
 &lt;/dd&gt;
 &lt;dt&gt;&lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-fix-mmc1-speed.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-fix-mmc1-speed.patch&lt;/samp&gt;&lt;/a&gt;&lt;/dt&gt;
 &lt;dd&gt;&lt;q&gt;remove even more high speed mmc stuff to get it working stable&lt;/q&gt;&lt;/dd&gt;
 &lt;dt&gt;&lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-higher-temps.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-higher-temps.patch&lt;/samp&gt;&lt;/a&gt;&lt;/dt&gt;
 &lt;dd&gt;&lt;samp class=&quot;path&quot;&gt;/thermal-zones/cpu_thermal/trips/trip-point0&lt;/samp&gt; 60000⇒70000m°C and
     &lt;samp class=&quot;path&quot;&gt;…/trip-point1&lt;/samp&gt; 65000⇒75000m°C&lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;continuing&quot;&gt;
– whereas the same cannot be said for the MT8183 patches, but thankfully none of them are relevant here.
It is of interest to evaluate these against the &lt;samp class=&quot;path&quot;&gt;mt8173-elm-hana.dtb&lt;/samp&gt; [&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.mt8173-elm-hana.dts&quot;&gt;decompiled&lt;/a&gt;] device tree distributed by ChromiumOS
&lt;/p&gt;
&lt;dl class=&quot;continuation patch-list&quot;&gt;
 &lt;dt&gt;&lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-fix-mmc-order.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-fix-mmc-order.patch&lt;/samp&gt;&lt;/a&gt;&lt;/dt&gt;
 &lt;dd&gt;the ordering &lt;em&gt;is&lt;/em&gt; somehow stable but &lt;em&gt;not&lt;/em&gt; via the alias list&lt;/dd&gt;
 &lt;dt&gt;&lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-fix-mmc1-speed.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-fix-mmc1-speed.patch&lt;/samp&gt;&lt;/a&gt;&lt;/dt&gt;
 &lt;dd&gt;the patch quarters the maximum clock frequency of &lt;samp&gt;mmc1&lt;/samp&gt; – the pluggable one – to 50MHz
     and removes &lt;code&gt;sd-uhs-sdr{50,104}&lt;/code&gt; tags therefrom,
     upstream doesn'&lt;!--'--&gt;t do this.&lt;/dd&gt;
 &lt;dt&gt;&lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-higher-temps.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-higher-temps.patch&lt;/samp&gt;&lt;/a&gt;&lt;/dt&gt;
 &lt;dd&gt;matches Linux'&lt;!--'--&gt;s 60°C and 65°C;
    unclear to me why the patch raises it – this originates in
     &lt;a href=&quot;//github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/commit/7c0cea812b7cabcf1b35527030c47999c259bcdd&quot;&gt;commit &lt;tt style=&quot;font-family: monospace;&quot;&gt;7c0cea8&lt;/tt&gt; (&lt;q&gt;&lt;cite&gt;raise temps for elm a bit&lt;/cite&gt;&lt;/q&gt;)&lt;/a&gt;
     with no further commentary;
     upstream, they were added in
     &lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit?id=689b937beddebf2d7c57249206428b8eecf4646b&quot;&gt;commit &lt;tt style=&quot;font-family: monospace;&quot;&gt;689b937bedde&lt;/tt&gt; (&lt;q&gt;&lt;cite&gt;arm64: dts: mediatek: add mt8173 elm and hana board&lt;/cite&gt;&gt;&lt;/q&gt;&lt;/a&gt;
     already as 60/65;
     giving it another 10° here &lt;em&gt;probably&lt;/em&gt; isn'&lt;!--'--&gt;t gonna &lt;em&gt;super&lt;/em&gt; fuck it up,
     but it'd've been nice to see some reasoning and maybe measurements and potentially a list of considerations given :v&lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Merging the configs per the crusty-ass spec works and produces a boot bundle that doesn'&lt;!--'--&gt;t work.
But given that the blob in &lt;tt&gt;&lt;q&gt;EFI-SYSTEM&lt;/q&gt;&lt;/tt&gt; also contains a different set of device trees paired with its older kernel
(indeed, a set so different it doesn'&lt;!--'--&gt;t even include &lt;samp class=&quot;path&quot;&gt;mt8173-elm-hana.dtb&lt;/samp&gt;
 and the only &lt;code&gt;description&lt;/code&gt; that'&lt;!--'--&gt;s vaguely similar is &lt;code&gt;&quot;mt8173-hana-rev0.dtb&quot;&lt;/code&gt;),
a quick re-pack after the prescribed &lt;samp&gt;make dtbs&lt;/samp&gt;
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;csplit&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-fbb&lt;/span&gt; mmcblk0p2.dts &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;/data =/'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;/type =/'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;/mt8173-elm-hana.dtb/'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;/data =/'&lt;!--'--&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;161
26119768
334465
40
7623425
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# bb00 bb02 start the same as xx00 xx02&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n2&lt;/span&gt; bb02&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;fdt@9 {
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;description = &quot;mt8173-elm-hana.dtb&quot;;
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n8&lt;/span&gt; bb04&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;type = &quot;flat_dt&quot;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;arch = &quot;arm64&quot;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;compression = &quot;none&quot;;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;hash@1 {
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;value = &amp;lt;0xd0eb38a9 0xad297279 0x5b014030 0x1027dbfe 0x3361c4a4&gt;;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;algo = &quot;sha1&quot;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;};
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; bb00&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;printf '&lt;!--'--&gt;data = ['&lt;!--'--&gt;; lz4 &amp;lt; .../Image | od -An -tx1 -v | tr -d '&lt;!--'--&gt;\n'&lt;!--'--&gt;; printf '&lt;!--'--&gt;];\n'&lt;!--'--&gt;;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;cat bb02;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;printf '&lt;!--'--&gt;data = ['&lt;!--'--&gt;; &amp;lt; .../arch/arm64/boot/dts/mediatek/mt8173-elm-hana.dtb od -An -tx1 -v | tr -d '&lt;!--'--&gt;\n'&lt;!--'--&gt;; printf '&lt;!--'--&gt;];\n'&lt;!--'--&gt;;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;cat bb04; } |
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;dtc -I dts -O dtb &gt; stb+dtb.dtb
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
— you may notice or rember the DTB is SHA1ed. This doesn'&lt;!--'--&gt;t do jack shit, &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd&amp;mwifiex+mmc1.sys-firmware-log&quot;&gt;not even as a logged diagnostic&lt;/a&gt;. I even forgor 💀 at the time —
shows
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.17-DSCN0586cvcc.JPG&quot;&gt;&lt;img alt=&quot;Screen of the Chromebook showing four penguins and a systemd boot-up log.&quot; src=&quot;/content/assets/blogn_t/012b.17-DSCN0586cvcc.JPG&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;🐧&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#🐧&quot;&gt;#&lt;/a&gt; 🐧🐧🐧🐧&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
That'&lt;!--'--&gt;s an okay start, but as exemplified by the penguins this is a vajazzled defconfig instead of the reasonable Debian config,
so Wi-Fi still doesn'&lt;!--'--&gt;t work (though that may just be the way iwd drives it and it may work with another userland),
and mounting EXT4s &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/stb+dtb.dmesg-fkern&quot;&gt;throws warnings (final lines)&lt;/a&gt;,
so beside the screen working it'&lt;!--'--&gt;s not a great kernel.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
One would hope that just repacking the best kernel to date with the new device tree would work (it doesn'&lt;!--'--&gt;t).
Or that applying the same set of diffs to &lt;samp class=&quot;path&quot;&gt;/boot/config-6.6.11-arm64&lt;/samp&gt; would (also no).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Why? well,
&lt;/p&gt;
&lt;h3 id=&quot;days&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#days&quot;&gt;#&lt;/a&gt; this is where I spend two further straight days building kernels to find out.&lt;/h3&gt;
&lt;p class=&quot;continuing&quot;&gt;
And that is a very literal &quot;straight&quot; – given this final &lt;code&gt;ls -rtlh *.dtb&lt;/code&gt; of my &lt;samp class=&quot;path&quot;&gt;newkernel&lt;/samp&gt; directory
(also &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel&quot;&gt;browsable and downloadable with corresponing configs, modules, and logs&lt;/a&gt;):
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;21M 01-22 03:44 new+pstored+sysrq.dtb
20M 01-23 05:40 debian.dtb
21M 01-23 06:04 new+pstored+sysrq+clock.dtb
21M 01-23 07:07 new+pstored+sysrq+clock-uvesa.dtb
22M 01-23 16:01 new+pstored+sysrq+clock-uvesa+clk.dtb
22M 01-23 19:02 new+pstored+sysrq+clock-uvesa+clk+initrd.dtb
22M 01-23 20:16 new+pstored+sysrq+clock-uvesa+clk+mmc.dtb
24M 01-24 02:29 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred.dtb
24M 01-24 02:36 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2.dtb
24M 01-24 02:47 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc.dtb
24M 01-24 20:42 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397.dtb
24M 01-24 22:47 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed.dtb
24M 01-25 00:13 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c.dtb
24M 01-25 01:06 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c@mount.dtb
23M 01-25 03:24 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c-initrd.dtb
23M 01-25 08:18 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2.dtb
&lt;span class=&quot;token important&quot;&gt;&lt;!--'--&gt;#               ^ first serial-interactive session&lt;!--'--&gt;&lt;/span&gt;
23M 01-25 21:02 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy.dtb
22M 01-26 02:38 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy.dtb
18M 01-26 07:27 stb+dtb.dtb
&lt;span class=&quot;token important&quot;&gt;&lt;!--'--&gt;#               ^ the 🐧🐧🐧🐧 config&lt;!--'--&gt;&lt;/span&gt;
22M 01-26 21:37 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma.dtb
22M 01-26 22:17 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple.dtb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
we are currently here.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This followed:
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;17M 01-26 23:54 deb+options-to-remove-special.cfg+mediatek.cfg+additional-options-special.cfg.dtb
18M 01-27 00:30 deb+options-to-remove-special.cfg+mediatek.cfg+additional-options-special.cfg+full.dtb
18M 01-27 01:19 deb+options-to-remove-special.cfg+mediatek.cfg+additional-options-special.cfg+full+all.dtb
17M 01-27 01:46 deb+options-to-remove-special.cfg+mediatek.cfg+additional-options-special.cfg+full+all+gen.dtb
17M 01-27 02:29 deb2+1.dtb
18M 01-27 02:44 deb2+2.dtb
18M 01-27 02:56 deb2+3.dtb
18M 01-27 03:08 deb2+4.dtb
18M 01-27 03:13 deb2+5.dtb
18M 01-27 03:20 deb2+6.dtb
18M 01-27 03:25 deb2+7.dtb
18M 01-27 03:30 deb2+8.dtb
18M 01-27 03:34 deb2+9.dtb
18M 01-27 03:37 deb2+11.dtb
18M 01-27 03:37 deb2+10.dtb
18M 01-27 03:46 deb2+12.dtb
&lt;span class=&quot;token important&quot;&gt;&lt;!--'--&gt;#               ^ ./tools/testing/ktest/config-bisect.pl 1 (jack shit)&lt;!--'--&gt;&lt;/span&gt;
22M 01-27 04:35 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+bi.dtb
&lt;span class=&quot;token important&quot;&gt;&lt;!--'--&gt;#               ^ bisexion diff applied to the previous one (still jack shit)&lt;!--'--&gt;&lt;/span&gt;
15M 01-27 04:51 bis.dtb
17M 01-27 05:02 bis+2.dtb
17M 01-27 05:48 bis+3.dtb
17M 01-27 06:57 bis+4.dtb
18M 01-27 08:05 bis+5.dtb
18M 01-27 08:51 bis+6.dtb
18M 01-27 08:55 bis+7.dtb
18M 01-27 09:13 bis+8.dtb
18M 01-27 09:17 bis+9.dtb
18M 01-27 09:37 bis+10.dtb
18M 01-27 09:40 bis+11.dtb
&lt;span class=&quot;token important&quot;&gt;&lt;!--'--&gt;#               ^ ./tools/testing/ktest/config-bisect.pl 2 (also jack shit, and different variable)&lt;!--'--&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;!-- https://101010.pl/@nabijaczleweli/111827127924897644 --&gt;
&lt;!-- https://discord.com/channels/@me/576788179441680394/1200727231090131024 --&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
And this is where the first issue that made applying the diffs not work finally became apparent:
they &lt;a href=&quot;//github.com/hexdump0815/kernel-config-options/blob/b343fac366111080b042ab078eb29b9e8b28e35d/mediatek.cfg#L13&quot;&gt;set&lt;/a&gt;,
for example
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot;&gt;CONFIG_DRM_MEDIATEK_HDMI=y
CONFIG_DRM_MEDIATEK_DP=y
CONFIG_DRM_MEDIATEK=y&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
but &lt;code&gt;make oldconfig&lt;/code&gt; (or &lt;code&gt;olddefconfig&lt;/code&gt;, or any &lt;code&gt;&lt;var&gt;*&lt;/var&gt;config&lt;/code&gt;, or any build job),
which updates the existing &lt;samp class=&quot;path&quot;&gt;.config&lt;/samp&gt; to match both the current kernel and its invariants updates it to
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot;&gt;CONFIG_DRM_MEDIATEK=m
CONFIG_DRM_MEDIATEK_DP=m
CONFIG_DRM_MEDIATEK_HDMI=m&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
because &lt;code&gt;CONFIG_DRM_MEDIATEK&lt;/code&gt; depends on &lt;code&gt;CONFIG_DRM&lt;/code&gt;, which is also built as a module.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
So instead of transitively updating the dependency tree to comply with the &quot;build this in&quot; spec, it just silently downgrades them all to be modules.
Observant readers may note that this is the second time this mentality manifests within this post.
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;17M 01-27 16:57 hm+p.dtb
23M 01-27 18:54 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+merged.dtb
&lt;span class=&quot;token important&quot;&gt;&lt;!--'--&gt;#               ^ {chromebooks-aarch64,mediatek,additional-options-aarch64,additional-options-special}.cfg applied mechanically&lt;!--'--&gt;&lt;/span&gt;
&lt;span class=&quot;token important&quot;&gt;&lt;!--'--&gt;#                 and the other cfgs applied manually&lt;!--'--&gt;&lt;/span&gt;
23M 01-27 19:22 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+merged-svs.dtb
22M 01-27 19:31 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+merged-svs+fb.dtb
22M 01-27 19:50 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+merged-svs+fb+df.dtb
21M 01-27 20:13 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+merged-svs+fb+df+drm.dtb
22M 01-27 20:36 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+merged-svs+fb+df+drm+more.dtb
22M 01-27 20:48 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+merged-svs+fb+df+drm+more+nogoog.dtb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;&lt;em&gt;finally&lt;/em&gt; yielded&lt;/p&gt;
&lt;!-- https://discord.com/channels/@me/576788179441680394/1200890782056456352 --&gt;
&lt;!-- https://101010.pl/@nabijaczleweli/111830159292264671 --&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.18-DSCN0589cvcc.JPG&quot;&gt;&lt;img alt=&quot;Four monochrome penguins and am all-green systemd boot log displayed on the chromebook&quot; src=&quot;/content/assets/blogn_t/012b.18-DSCN0589cvcc.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This marks the first Debian-derived, and thus meaningfully diffable, config.
(You can'&lt;!--'--&gt;t really pick the interesting bits out of the relentless torrent of defconfig diff.)
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The key?
Turning &lt;em&gt;off&lt;/em&gt; &lt;code&gt;GOOGLE_FRAMEBUFFER_COREBOOT&lt;/code&gt;!
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
With it you see
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--
    &quot;--&gt;[    0.386886]&lt;!--&quot;--&gt; simple-framebuffer simple-framebuffer.0: simplefb: cannot reserve video memory at [mem 0x00000000-0x00400fff]
&lt;!--&quot;--&gt;[    0.386911]&lt;!--&quot;--&gt; simple-framebuffer simple-framebuffer.0: framebuffer at 0x0, 0x401000 bytes
&lt;!--&quot;--&gt;[    0.386919]&lt;!--&quot;--&gt; simple-framebuffer simple-framebuffer.0: format=a8r8g8b8, mode=1366x768x32, linelength=5464&lt;!--
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
at the end of the dmesg and then it hangs.
The &quot;cannot reserve video memory&quot; is just a warning that it can'&lt;!--'--&gt;t lock it exclusively,
and it then, presumably, initialises the range [0, 0x400FFF], razing the interrupt table that'&lt;!--'--&gt;s probably unmoved from &lt;var&gt;0&lt;/var&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Without it it just boots and logs
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--
    &quot;--&gt;[    1.098264] [drm] Initialized mediatek 1.0.0 20150513 for mediatek-drm.12.auto on minor 0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[    1.303268] Console: switching to colour frame buffer device 170x48&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;[    1.334367] mediatek-drm mediatek-drm.12.auto: [drm] fb0: mediatekdrmfb frame buffer device&lt;!--&quot;
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
as it ought to.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The Debian config is such that this automatically turns on/off when toggling &lt;code&gt;CONFIG_FB_SIMPLE&lt;/code&gt; (or whatever); the defconfig isn'&lt;!--'--&gt;t.
This is not obvious because the warning looks like an error,
and there are like seven different drivers that log as &quot;simple-framebuffer&quot;,
and approximately twenty &quot;simple framebuffer&quot;s.
Not to mention the spoopy axion at a distance with the actual driver – &lt;tt&gt;framebuffer-coreboot&lt;/tt&gt; – not logging as itself.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Naturally, one wants to enable all the &lt;samp&gt;GOOGLE&lt;/samp&gt;/&lt;samp&gt;CROS&lt;/samp&gt; configs, and you should; just not this one.
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;22M 01-27 23:17 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+merged-svs+fb+df+drm+more+nogoog+somegoog.dtb
22M 01-28 01:38 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+nogoog.dtb
22M 01-28 01:51 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+nogoog+emul.dtb
23M 01-28 02:24 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+nogoog+emul+paneldrm.dtb
23M 01-28 02:40 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+nogoog+emul+paneldrm+spi.dtb
22M 01-28 03:31 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+nogoog+emul+paneldrm+spi+pins+regulator.dtb
22M 01-28 04:22 new+pstored+sysrq+clock-uvesa+clk+mmc+devices_deferred2+rtc+6397+fixed+i2c+usbsh2+legacy-legacy+dtb+dma+simple+nogoog+emul+paneldrm+spi+pins+regulator+noemul+emul.dtb
18M 01-28 17:57 mandeb.dtb
20M 01-28 18:35 mandeb+initrd.dtb
20M 01-28 18:46 mandeb+initrd+1.dtb
20M 01-28 19:03 mandeb+initrd+1+tabs.dtb
20M 01-28 19:09 mandeb+initrd+1+tabs1.dtb
20M 01-28 19:28 mandeb+initrd+1+tabs2+reg.dtb
20M 01-28 19:51 mandeb+initrd+1+tabs2+reg+drm.dtb
20M 01-28 20:03 mandeb+initrd+1+tabs2+reg+drm+adc.dtb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
This was my limit for the
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/mandeb+initrd+1+tabs2+reg+drm+adc.pmsg-ramoops-0&quot;&gt;useless &lt;samp class=&quot;path&quot;&gt;/sys/kernel/debug/devices_deferred&lt;/samp&gt; dumps&lt;/a&gt;,
and where finally instead of thinking &quot;if only there were a way to have a config contain what's in my device tree&quot;
I found and applied &lt;samp class=&quot;path&quot;&gt;scripts/dtc/dt_to_config&lt;/samp&gt;.
Of course, it wants to be in a git checkout
(which I have, but is annoying –
 you could probably replace the &lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/scripts/dtc/dt_to_config?id=861c0981648f5b64c86fd028ee622096eb7af05a#n805&quot;&gt;&lt;code&gt;&lt;q&gt;git grep&lt;/q&gt;&lt;/code&gt;&lt;/a&gt; with &lt;code&gt;grep -rI&lt;/code&gt; with the same effect of not looking into artifacts),
but even beside that it produces a &lt;a href=&quot;//www.youtube.com/shorts/-Tzxx0XFrjI&quot;&gt;brain destroyer&lt;/a&gt; format:
&lt;/p&gt;
&lt;pre class=&quot;continuation&quot; style=&quot;position: relative; overflow: auto; margin-left: 1em;&quot;&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/dt_to_config.log&quot;&gt;&lt;aside&gt;full log&lt;/aside&gt;&lt;/a&gt;-dD----H----- : /backlight : pwm-backlight : arch/arm/mach-s3c/mach-crag6410.c : no_config : none
-dDc---H----- : /backlight : pwm-backlight : drivers/video/backlight/pwm_bl.c : CONFIG_BACKLIGHT_PWM : none

-dDc--------- : /connector : hdmi-connector : drivers/gpu/drm/bridge/display-connector.c : CONFIG_DRM_DISPLAY_CONNECTOR : none
-dDc--------- : /connector : hdmi-connector : drivers/gpu/drm/bridge/lontium-lt8912b.c : CONFIG_DRM_LONTIUM_LT8912B : none
-dDc----x---- : /connector : hdmi-connector : drivers/gpu/drm/mediatek/mtk_hdmi.c : mediatek-drm-hdmi-objs : none
-dDc----x---- : /connector : hdmi-connector : drivers/gpu/drm/sun4i/sun4i_drv.c : sun4i-drm-y : none

------------- : /cpus/cpu@0 : arm,cortex-a53 : no_driver : no_config : none

------------- : /cpus/cpu@1 : arm,cortex-a53 : no_driver : no_makefile : none

-d-c----x---- : /cpus/cpu@100 : arm,cortex-a72 : drivers/soc/bcm/brcmstb/biuctrl.c : obj-y : none

-d-c----x---- : /cpus/cpu@101 : arm,cortex-a72 : drivers/soc/bcm/brcmstb/biuctrl.c : obj-y : none&lt;/pre&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Thankfully this can be avoided with &lt;code&gt;--config-format&lt;/code&gt; which is less arcane –
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;position: relative; overflow: auto; margin-left: 1em;&quot;&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/dt_to_config&quot;&gt;&lt;aside&gt;full config&lt;/aside&gt;&lt;/a&gt;# -dD----H----- : /backlight : pwm-backlight : arch/arm/mach-s3c/mach-crag6410.c : no_config : none
# no_config
# -dDc---H----- : /backlight : pwm-backlight : drivers/video/backlight/pwm_bl.c : CONFIG_BACKLIGHT_PWM : none
# CONFIG_BACKLIGHT_PWM is not set
# CONFIG_BACKLIGHT_PWM=y

# -dDc--------- : /connector : hdmi-connector : drivers/gpu/drm/bridge/display-connector.c : CONFIG_DRM_DISPLAY_CONNECTOR : none
# CONFIG_DRM_DISPLAY_CONNECTOR is not set
# CONFIG_DRM_DISPLAY_CONNECTOR=y
# -dDc--------- : /connector : hdmi-connector : drivers/gpu/drm/bridge/lontium-lt8912b.c : CONFIG_DRM_LONTIUM_LT8912B : none
# CONFIG_DRM_LONTIUM_LT8912B is not set
# CONFIG_DRM_LONTIUM_LT8912B=y
# -dDc----x---- : /connector : hdmi-connector : drivers/gpu/drm/mediatek/mtk_hdmi.c : mediatek-drm-hdmi-objs : none
# mediatek-drm-hdmi-objs
# -dDc----x---- : /connector : hdmi-connector : drivers/gpu/drm/sun4i/sun4i_drv.c : sun4i-drm-y : none
# sun4i-drm-y&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
and can be quite trivially analysed against the current-best with something like
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;^# C'&lt;!--'--&gt;&lt;/span&gt; dt_to_config.config &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;s/# //'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;cut&lt;/span&gt; -d&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; -f1 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt; -u &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; -v ^CONFIG_MACH &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;read&lt;/span&gt; -r c&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; ^&lt;span class=&quot;token variable&quot;&gt;$c&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; .config &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; NO &lt;span class=&quot;token variable&quot;&gt;$c&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; m$&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;CONFIG_ARM_MEDIATEK_CPUFREQ=m
CONFIG_ARM_SMC_WATCHDOG=m
CONFIG_BACKLIGHT_PWM=m
CONFIG_BATTERY_SBS=m
CONFIG_BT_MRVL_SDIO=m
CONFIG_CPUFREQ_DT=m
CONFIG_DRM_DISPLAY_CONNECTOR=m
CONFIG_I2C_HID_OF=m
CONFIG_I2C_MT65XX=m
CONFIG_KEYBOARD_GPIO=m
CONFIG_MFD_ROHM_BD718XX=m
CONFIG_PHY_MTK_TPHY=m
CONFIG_SCSI_UFSHCD_PLATFORM=m
CONFIG_SND_SOC_MT8173=m
CONFIG_SND_SOC_MT8173_RT5650=m
CONFIG_SND_SOC_RT5645=m
CONFIG_TCG_TIS_I2C_INFINEON=m
CONFIG_TOUCHSCREEN_ELAN=m&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
to then upgrade
&lt;code&gt;CONFIG_{ARM_MEDIATEK_CPUFREQ{,_HW},&lt;wbr /&gt;BACKLIGHT_PWM,&lt;wbr /&gt;CPUFREQ_DT,&lt;wbr /&gt;DRM_DISPLAY_CONNECTOR,&lt;wbr /&gt;I2C_HID_{CORE,OF},&lt;wbr /&gt;I2C_MT65XX,&lt;wbr /&gt;KEYBOARD_GPIO,&lt;wbr /&gt;MFD_ROHM_BD718XX}&lt;/code&gt;
and enable
&lt;code&gt;I2C_HID_OF_{ELAN,GOODIX}&lt;/code&gt;,
yielding
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;20M 01-28 20:37 mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c.dtb
18M 01-28 20:43 mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd.dtb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;i.e.&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.19-DSCN0591cvcc.png&quot;&gt;&lt;img style=&quot;max-height: 30em;&quot; alt=&quot;listing of some paths under sysfs, a few times a second apart, then a listing of MMC devices, displayed on the Chromebook's display&quot; src=&quot;/content/assets/blogn_t/012b.19-DSCN0591cvcc.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
which, with no missing devices and, well, showing up on the screen, bodes very well!
and
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.20-DSCN0592cvcc.JPG&quot;&gt;&lt;img alt=&quot;an all-green systemd boot log with fsck running, on the chromebook screen&quot; src=&quot;/content/assets/blogn_t/012b.20-DSCN0592cvcc.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
which may be one of this generation'&lt;!--'--&gt;s yippeeest moments.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
(The &lt;code&gt;&lt;abbr title=&quot;Invalid argument&quot;&gt;ENODEV&lt;/abbr&gt;&lt;/code&gt;s at the top are from a lack of modules on this first boot.)
(Also note how &lt;samp&gt;modprobe@efi_pstore.service&lt;/samp&gt; succeeds.
 I don't really know how or why, given that this system lacks EFI (and ACPI for that matter) and they're both configured away completely.)
And after a quick module installation, I'&lt;!--'--&gt;ve achieved
&lt;/p&gt;
&lt;h2 id=&quot;speedrun&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#speedrun&quot;&gt;#&lt;/a&gt; arm64 Chromebook Debian port any% 17-day RTA/#137 IGT WR&lt;/h2&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.21-DSCN0597c.JPG&quot;&gt;&lt;img alt=&quot;the chromebook screen showing a getty login prompt, then 'Linux chwast 6.6.11 #137 SMP Sun Jan 28 20:42:40 CET 2024 aarch64' from /etc/issue after login, with last login on ttyUSB0; also I'm in the reflection pulling a face&quot; src=&quot;/content/assets/blogn_t/012b.21-DSCN0597c.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
(I'&lt;!--'--&gt;m even in the clip!)
All these bundles listed above accumulate to 74 and I lost at most like 4 images, so a few sequence numbers were spent on QEMU pre-testing.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Even X.Org works!
&lt;/p&gt;
&lt;iframe width=&quot;640&quot; height=&quot;360&quot; src=&quot;//www.youtube.com/embed/uKeGmKpOosA&quot; title=&quot;Debian on the Lenovo 300e 2nd-gen MTK arm64 Chromebook (hana) (real)&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But there'&lt;!--'--&gt;s three obvious issues:
&lt;/p&gt;
&lt;ol&gt;
 &lt;li&gt;no local sound output devices (speakers or headphone jack) – well, they show up as
&lt;pre class=&quot;continuing&quot; style=&quot;white-space: pre-wrap;&quot;&gt;input: mtk-rt5650 Headset Jack as /devices/platform/sound/sound/card0/input8
input: mtk-rt5650 HDMI Jack as /devices/platform/sound/sound/card0/input9&lt;/pre&gt;
    in the dmesg but pipewire doesn'&lt;!--'--&gt;t see them
 &lt;/li&gt;
 &lt;li&gt;wi-fi driver still &lt;a href=&quot;//lore.kernel.org/linux-wireless/xebnh5c5rnfequ6khyhieugefrtt5mdftr6rsw522ocpg3yvln@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;backtraces with a warning&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;the fucking SD card is horrendous&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;indented continued&quot;&gt;
3. is the most pressing for both usability reasons (it'&lt;!--'--&gt;s bound to be slow, but not &lt;em&gt;that&lt;/em&gt; slow)
and because sometimes I/O will just, like, effectively hang, with kilobyte-sized mmaps taking seconds, and the dmesg complaining that the card is &quot;stuck busy&quot;,
all with a blatant culprit – &lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-fix-mmc1-speed.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-fix-mmc1-speed.patch&lt;/samp&gt;&lt;/a&gt;.
The SD card was solid under &lt;tt&gt;KERN-A&lt;/tt&gt; which has all the full-speed stuff this patch disables.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
By performing a speed-running trick called &quot;forwarding to the list while modules were building four days ago&quot;,
I already have a &lt;a href=&quot;//lore.kernel.org/linux-wireless/59378600-8d36-4958-8882-fa693fcad4d6@yandex.ru/t/#u&quot;&gt;prospective patch&lt;/a&gt; for 2.,
so I can be oh-so-brave (with only a &lt;em&gt;quick&lt;/em&gt; glance at if it'&lt;!--'--&gt;d be catastrophic!) and update the module while at it –
re-building &lt;samp&gt;dtbs modules&lt;/samp&gt; with &lt;em&gt;just&lt;/em&gt; &lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-higher-temps.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-higher-temps.patch&lt;/samp&gt;&lt;/a&gt; and the diff from the mail yields
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;18M 01-31 00:00 &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd&amp;mwifiex+mmc1.journalctl-b&quot; style=&quot;color: inherit;&quot;&gt;mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd&amp;mwifiex+mmc1.dtb&lt;/a&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and while the Wi-Fi warning &lt;a href=&quot;//lore.kernel.org/linux-wireless/dygt52o6wj4u7a2b4k7uew2g2hym7j5bxyavkafjk4vue6b2ue@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;goes away&lt;/a&gt;,
the SD card rootfs experience is as shit as ever.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
But this may well be because my SD card is not fast enough to qualify for any of the speed boosts – the two internal ones are
&lt;tt&gt;&lt;q&gt;new HS400 MMC card&lt;/q&gt;&lt;/tt&gt; and &lt;tt&gt;&lt;q&gt;new ultra high speed SDR104 SDIO card&lt;/q&gt;&lt;/tt&gt; but this one is just &lt;tt&gt;&lt;q&gt;new high speed SDHC card&lt;/q&gt;&lt;/tt&gt;;
maybe we need to actually install Debian because this is horrendous.
This may be fixable with an SD card worth as much as the laptop instead of my drawer special,
but that still kinda defeats the purpose of a laptop with an internal &lt;del&gt;disk&lt;/del&gt;rectangle.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Testing with such a card on the 4.19 ChromiumOS kernel,
I could reproduce the &quot;instability&quot; with a simple test (&lt;code&gt;b2sum /dev/mmcblk1&lt;/code&gt;),
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/4.19-SDR104-panic&quot;&gt;presenting itself as a kernel segfault&lt;/a&gt;
and &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/6.6.11-SDR104&quot;&gt;likewise on the 6.6.11 kernel&lt;/a&gt;.
Applying the patch fixes it (and runs the card at &quot;high speed&quot;).
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
The MMC ordering appears to already be stable, so while it was random with the original device tree,
that one'&lt;!--'--&gt;s for 4.19, so it may just be and old-device-tree issue?
The patch itself blames back to
&lt;a href=&quot;//github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/commit/01101e3501aef9191109e464af458f2382232ac5&quot;&gt;commit &lt;tt style=&quot;font-family: monospace;&quot;&gt;01101e3&lt;/tt&gt; (&lt;q&gt;&lt;cite&gt;promising experiments based on apline linux-elm apk&lt;/cite&gt;&lt;/q&gt;)&lt;/a&gt;
as &lt;samp class=&quot;path&quot;&gt;misc.cbm/patches/alpine/fix-mmc-order.patch&lt;/samp&gt;.
Not that &quot;identical device enumeration order&quot; is a sensible goal unto itself in a.d. 2020 regardless.
&lt;/p&gt;
&lt;blockquote class=&quot;continued&quot;&gt;&lt;pre style=&quot;white-space: pre-wrap;&quot; class=&quot;continued&quot;&gt;&lt;!--&quot;--&gt; rt5650 Playback: ASoC: no backend DAIs enabled for rt5650 Playback, possibly missing ALSA mixer-based routing or UCM profile&lt;!--&quot;--&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
is the lead for issue 1.
A quick &lt;a href=&quot;//packages.debian.org/search?suite=sid&amp;mode=filename&amp;searchon=contents&amp;keywords=rt5650&quot;&gt;search for files matching &lt;code&gt;*rt5650*&lt;/code&gt;&lt;/a&gt; in sid
shows an unbounded amount of linuxes but starts with &lt;a href=&quot;https://packages.debian.org/sid/firmware-sof-signed&quot;&gt;&lt;cite style=&quot;font-style: inherit;&quot;&gt;firmware-sof-signed&lt;/cite&gt;&lt;/a&gt;
and &lt;samp class=&quot;path&quot;&gt;/lib/firmware/intel/sof-tplg/sof-adl-rt5650.tplg&lt;/samp&gt;,
whose description says it
&lt;q&gt;Provides the Intel SOF audio firmware and topology needed for audio functionality on some Intel system.&lt;/q&gt;,
which this isn't, so it's not it (not that I didn'&lt;!--'--&gt;t try).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Searching locally instead via &lt;samp&gt;dpkg -S rt5650&lt;/samp&gt; actually reveals &lt;a href=&quot;https://packages.debian.org/sid/alsa-ucm-conf&quot;&gt;&lt;cite style=&quot;font-style: inherit;&quot;&gt;alsa-ucm-conf&lt;/cite&gt;&lt;/a&gt;, with
&lt;/p&gt;
&lt;ul style=&quot;padding-left: 1em;&quot;&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/usr/share/alsa/ucm2/MediaTek/mtk-rt5650/HDMI.conf&lt;/samp&gt;&lt;/li&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/usr/share/alsa/ucm2/MediaTek/mtk-rt5650/HiFi.conf&lt;/samp&gt;&lt;/li&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/usr/share/alsa/ucm2/MediaTek/mtk-rt5650/init.conf&lt;/samp&gt;&lt;/li&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/usr/share/alsa/ucm2/MediaTek/mtk-rt5650/mtk-rt5650.conf&lt;/samp&gt;&lt;/li&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/usr/share/alsa/ucm2/conf.d/mtk-rt5650/mtk-rt5650.conf&lt;/samp&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;continuing&quot;&gt;
which sure looks like it'&lt;!--'--&gt;d match what the driver complains about not having! but has.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
This kinda smells like the bluetooth situation where you need libspa-0.2-bluetooth to have bluetooth audio.
Indeed, &lt;code&gt;apt search pipewire&lt;/code&gt; reveals
&lt;/p&gt;
&lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token green&quot;&gt;&lt;a href=&quot;https://packages.debian.org/sid/pipewire-alsa&quot;&gt;&lt;cite style=&quot;font-style: inherit;&quot;&gt;pipewire-alsa&lt;/cite&gt;&lt;/a&gt;&lt;/span&gt;/unstable 1.0.1-2 arm64
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Pipewire ALSA plugin&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
but this is actually a plugin &lt;em&gt;for&lt;/em&gt; ALSA to output &lt;em&gt;to&lt;/em&gt; pipewire.
Not that you'&lt;!--'--&gt;d know this from the package description.
I know it from the damn arch wiki.
Reported as &lt;a href=&quot;//bugs.debian.org/1062262&quot;&gt;&lt;cite&gt;Bug#1062262: pipewire-alsa: adversarial description&lt;/cite&gt;&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Further &lt;code&gt;apt search alsa&lt;/code&gt;ing shows
&lt;/p&gt;
&lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token green&quot;&gt;&lt;a href=&quot;https://packages.debian.org/sid/alsa-tools&quot;&gt;&lt;cite style=&quot;font-style: inherit;&quot;&gt;alsa-tools&lt;/cite&gt;&lt;/a&gt;&lt;/span&gt;/unstable 1.2.5-3 arm64
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Console based ALSA utilities for specific hardware

&lt;span class=&quot;token green&quot;&gt;&lt;a href=&quot;https://packages.debian.org/sid/alsa-utils&quot;&gt;&lt;cite style=&quot;font-style: inherit;&quot;&gt;alsa-utils&lt;/cite&gt;&lt;/a&gt;&lt;/span&gt;/unstable 1.2.10-1.1 arm64
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Utilities for configuring and using ALSA&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
can you guess which one is a sussy baka amongus and which one is the chad taskpilled crewmatecel?
The latter lists
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;pre class=&quot;continuing&quot;&gt;&lt;tt&gt;Included tools:
 - alsaucm: alsa use case manager&lt;/tt&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
so if you voted for the latter you will not be ejected.
Amazingly, during the emergency meeting &lt;code&gt;aplay -l&lt;/code&gt; and &lt;code&gt;arecord -l&lt;/code&gt; corroborated &lt;samp&gt;mtkrt5650&lt;/samp&gt; venting:
&lt;/p&gt;
&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;**** List of PLAYBACK Hardware Devices ****
card 0: mtkrt5650 [mtk-rt5650], device 0: rt5650 Playback (*) []
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Subdevices: 1/1
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Subdevice #0: subdevice #0
card 0: mtkrt5650 [mtk-rt5650], device 2: HDMI PCM (*) []
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Subdevices: 1/1
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Subdevice #0: subdevice #0&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;**** List of CAPTURE Hardware Devices ****
card 0: mtkrt5650 [mtk-rt5650], device 1: rt5650 Capture (*) []
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Subdevices: 1/1
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Subdevice #0: subdevice #0&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
but &lt;code&gt;aplay&lt;/code&gt; doesn'&lt;!--'--&gt;t and &lt;code&gt;arecord&lt;/code&gt; records all zeroes.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;code&gt;alsaucm&lt;/code&gt; is one of those programs that definitely make sense to the authors.
But by clicking around –
running everything, in order, from &lt;a href=&quot;//manpages.debian.org/unstable/alsa-utils/alsaucm.1.en.html&quot;&gt;&lt;cite&gt;alsaucm(1)&lt;/cite&gt;&lt;/a&gt;
(only real science on da blog):
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm listcards&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0: hw:0
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;mtk-rt5650
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm &lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;ALSA lib main.c:1554:(snd_use_case_mgr_open) error: failed to import 0 use case configuration -2
alsaucm: error failed to open sound card 0: No such file or directory
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm &lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt; hw:0&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm list _verbs&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0: HiFi
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Default
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm list _devices&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;alsaucm: error failed to get list _devices: No such file or directory
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm list _devices/HiFi&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0: Speaker
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Speaker
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1: Headphones
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Headphones
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;2: Mic
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Internal Microphone
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;3: Headset
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Headset Microphone
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;4: HDMI
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;HDMI Audio
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm list _modifiers&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;alsaucm: error failed to get list _modifiers: No such file or directory
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm list _modifiers/HiFi&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;list is empty
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm get _verb&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;alsaucm: error failed to get _verb: No such file or directory
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm &lt;span class=&quot;token builtin class-name&quot;&gt;set&lt;/span&gt; _verb HiFi&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;alsaucm get _verb&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;alsaucm: error failed to get _verb: No such file or directory
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
(why the fuck does it all have underscores?
 why is &quot;HiFi&quot; a verb?
 why is the &quot;verb&quot; denoted as optional after &lt;code&gt;_devices&lt;/code&gt; and &lt;code&gt;_modifiers&lt;/code&gt; but isn'&lt;!--'--&gt;t?
 why can I not know what the current &quot;verb&quot; is?
 what would doing the verb even &lt;em&gt;do&lt;/em&gt;?)
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
and unloading and inserting every sound module (or rebooting! presumably the &quot;verb&quot; gets persisted somewhere up them guts)
now replaced &lt;a href=&quot;//bugs.debian.org/cgi-bin/bugreport.cgi?att=1;bug=1062213;msg=5&quot;&gt;&quot;Dummy Output&quot;&lt;/a&gt; in &lt;code&gt;wpctl status&lt;/code&gt; with
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside&quot;&gt;&lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;!--&quot;--&gt;Audio&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; ├─ Sinks:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; │      56. Built-in Audio HDMI Audio           [vol: 0.40]&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; │  *   57. Built-in Audio Headphones + Speaker [vol: 1.00]&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; │&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; └─ Sources:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;    *   58. Built-in Audio Headset Microphone + Internal Microphone [vol: 0.63]&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;Settings&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; └─ Default Configured Node Names:&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;         0. Audio/Sink    alsa_output.platform-sound.HiFi__hw_mtkrt5650_0__sink&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;         1. Audio/Source  alsa_input.platform-sound.HiFi__hw_mtkrt5650_1__source&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
(why are they grouped and not split?) and neither &lt;code&gt;aplay&lt;/code&gt; nor &lt;code&gt;pw-play&lt;/code&gt; do anything.
But at this time I noticed the tab expansion list for &lt;tt&gt;a&lt;/tt&gt; has an &lt;code&gt;alsamixer&lt;/code&gt; which has drip –
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.22-DSCN0608cvcc.JPG&quot;&gt;&lt;img alt=&quot;Curses menu titled AlsaMixer v1.2.10, noting Card: mtk-rt5650; there's a plethora of bars labelled Headphon, Speaker, Speaker, I2S2 Fun, Mono ADC, and Mono DAC&quot; src=&quot;/content/assets/blogn_t/012b.22-DSCN0608cvcc.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
– but more importantly has a &lt;tt&gt;Headphon&lt;/tt&gt; output with green &lt;tt&gt;OO&lt;/tt&gt; and a &lt;tt&gt;Speaker&lt;/tt&gt; one is &lt;tt&gt;MM&lt;/tt&gt;,
which is, respectively, not muted and muted, apparently.
Plugging in headphones actually plays to the headphones.
Amazing!
But recording gets just noise (it'&lt;!--'--&gt;s possible the mic is shot on the headphones but that the internal one is as well? no way).
And unmuting the &lt;tt&gt;Speaker&lt;/tt&gt; output doesn'&lt;!--'--&gt;t make it go.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The only solution to this is multivariable bisexion, defined as
&quot;going to the end of the like eight pages of increasingly-cryptically-named outputs, unmuting a few, then playing again&quot;.
This is how I know that unmuting the &lt;tt&gt;Ext Spk&lt;/tt&gt; output lets the internal speakers go.
It's also how I know that when you're expecting a tinny voice to say
&quot;&lt;a style=&quot;color: inherit;&quot; href=&quot;//hinfo.network&quot;&gt;The &lt;span class=&quot;sunfont&quot;&gt;HINFO&lt;/span&gt;&lt;span class=&quot;topaz&quot;&gt;.network.&lt;/span&gt;&lt;/a&gt;&quot; (which you should join!)
but get a square wave and a mild whiff of burning lacquer that shit'&lt;!--'--&gt;s fucking terrifying mang.
It'&lt;!--'--&gt;s also also how I know that expecting the same and getting a 600Hz whine also is.
At least I was ready on the reset that time.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Naturally, the mixer settings are persisted across reboots,
so fuck knows which ones of the other 10 outputs I toggled made it be a daemon,
or whether just flipping &lt;tt&gt;Ext Spk&lt;/tt&gt; will make it output cleanly to the speakers.
Or if some of those outputs start driving the speakers with a DC offset regardless of whether there'&lt;!--'--&gt;s audio playing.
I know I'&lt;!--'--&gt;m not trynna find out at 2am again.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
A quick purge of the ALSA state from &lt;samp class=&quot;path&quot;&gt;/var/lib/alsa/asound.state&lt;/samp&gt; thankfully reverted this, and also contained
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot;&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;control&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;iface &lt;span class=&quot;token constant&quot;&gt;MIXER&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;name &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;Ext Spk Switch'&lt;!--'--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;value &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;comment &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;access &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;read write'&lt;!--'--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;type &lt;span class=&quot;token constant&quot;&gt;BOOLEAN&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;count &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;control&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;iface &lt;span class=&quot;token constant&quot;&gt;MIXER&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;name &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;Int Mic Switch'&lt;!--'--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;value &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;comment &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;access &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;read write'&lt;!--'--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;type &lt;span class=&quot;token constant&quot;&gt;BOOLEAN&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;count &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
which &lt;code&gt;amixer&lt;/code&gt; lists as
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot; style=&quot;position: relative;&quot;&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/amixer.scontents&quot;&gt;&lt;aside&gt;full &lt;code&gt;amixer scontents&lt;/code&gt;&lt;/aside&gt;&lt;/a&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;Simple mixer control &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;Ext Spk'&lt;!--'--&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token literal-property property&quot;&gt;Capabilities&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; pswitch pswitch&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;joined
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Playback channels&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Mono
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token literal-property property&quot;&gt;Mono&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Playback &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;on&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
Simple mixer control &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;Int Mic'&lt;!--'--&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token literal-property property&quot;&gt;Capabilities&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; pswitch pswitch&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;joined
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Playback channels&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Mono
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token literal-property property&quot;&gt;Mono&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Playback &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;on&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and either pressing &lt;kbd&gt;m&lt;/kbd&gt; on it in &lt;code&gt;alsamixer&lt;/code&gt; or running &lt;code&gt;amixer sset 'Ext Spk',0 on&lt;/code&gt; (or &lt;code&gt;off&lt;/code&gt;)
made sound play from the speakers, with the counter-intuitive muted/&lt;samp&gt;off&lt;/samp&gt; ⇒ headphones and unmuted/&lt;samp&gt;on&lt;/samp&gt; ⇒ speakers.
If only there were a way to make this happen automatically like normal!
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
A quick peep with &lt;code&gt;amixer events&lt;/code&gt; yields
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot;&gt;&lt;pre class=&quot;continuing language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;event value: numid=&lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;,iface=&lt;span class=&quot;token string&quot;&gt;CARD&lt;/span&gt;,name=&lt;span class=&quot;token string&quot;&gt;'Headphone Jack'&lt;/span&gt;
event value: numid=&lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;,iface=&lt;span class=&quot;token string&quot;&gt;CARD&lt;/span&gt;,name=&lt;span class=&quot;token string&quot;&gt;'Headphone Jack'&lt;/span&gt;
event value: numid=&lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;,iface=&lt;span class=&quot;token string&quot;&gt;CARD&lt;/span&gt;,name=&lt;span class=&quot;token string&quot;&gt;'Headphone Jack'&lt;/span&gt;
event value: numid=&lt;span class=&quot;token number&quot;&gt;25&lt;/span&gt;,iface=&lt;span class=&quot;token string&quot;&gt;CARD&lt;/span&gt;,name=&lt;span class=&quot;token string&quot;&gt;'Headset Mic Jack'&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
with the first two corresponding to plugging/unplugging a TRS jack, and the latter two corresponding to plugging a TRRS jack.
&lt;code&gt;amixer contents&lt;/code&gt;, then:
&lt;/p&gt;
&lt;div class=&quot;continuing-inside&quot; style=&quot;position: relative;&quot;&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/amixer.contents&quot;&gt;&lt;aside&gt;full &lt;code&gt;amixer contents&lt;/code&gt;&lt;/aside&gt;&lt;/a&gt;
&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;numid&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;iface&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CARD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;Headphone Jack'&lt;!--'--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;BOOLEAN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;access&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;r&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;values&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; values&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;on
numid&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;25&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;iface&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CARD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;name&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;Headset Mic Jack'&lt;!--'--&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;BOOLEAN&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;access&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;r&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;values&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; values&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;on
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
(note that it does also have &lt;tt&gt;&lt;q&gt;Headphone Switch&lt;/q&gt;&lt;/tt&gt; and &lt;tt&gt;&lt;q&gt;Headphone Playback Switch&lt;/q&gt;&lt;/tt&gt; (and the same for &lt;tt&gt;Speaker&lt;/tt&gt;) as double-bools
 but they appear to be only readable as part of a full dump – reading/writing via &lt;code&gt;cget&lt;/code&gt;/&lt;code&gt;cset&lt;/code&gt; just hangs).
Unfortunately &lt;code&gt;amixer monitor&lt;/code&gt; doesn't include the new data and the on/off is inverted hence the crusty-ass xor, but it's nevertheless a trivial program:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside&quot;&gt;
&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;stdbuf &lt;span class=&quot;token parameter variable&quot;&gt;-oL&lt;/span&gt; amixer events &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-r&lt;/span&gt; event value &lt;span class=&quot;token function&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$event&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$value&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;event value:&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;continue&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$id&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;*&lt;span class=&quot;token string&quot;&gt;&quot;'&lt;!--'--&gt;Headphone Jack'&lt;!--'--&gt;&quot;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;ctl&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;Ext Spk'&lt;!--'--&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;inv&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;on&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;*&lt;span class=&quot;token string&quot;&gt;&quot;'&lt;!--'--&gt;Headset Mic Jack'&lt;!--'--&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;ctl&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;Headset Mic'&lt;!--'--&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;inv&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;off &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;*&lt;!--&quot;--&gt;                    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;continue&lt;/span&gt;&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;esac&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;amixer cget &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$id&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;&lt;span class=&quot;token environment constant&quot;&gt;IFS&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token environment constant&quot;&gt;$IFS&lt;/span&gt;=&quot;&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;read&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-r&lt;/span&gt; tp k &lt;span class=&quot;token function&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$tp&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$k&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;: values&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;continue&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$v&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$inv&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;onon&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;offoff&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;off &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;onoff&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;offon&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;on&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;esac&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;exec&lt;/span&gt; amixer sset &lt;span class=&quot;token string&quot;&gt;&quot;'&lt;!--'--&gt;&lt;span class=&quot;token variable&quot;&gt;$ctl&lt;/span&gt;'&lt;!--'--&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$v&lt;/span&gt;&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
Further testing shows that if the &lt;tt&gt;&lt;q&gt;Headset Mic&lt;/q&gt;&lt;/tt&gt; control is set to &lt;var&gt;off&lt;/var&gt; it expectedly cuts out the TRRS microphone,
and this yields an all-zero recording – I haven't managed to get any input from the internal microphone, but this isn't really a big feature loss for me personally.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
It'&lt;!--'--&gt;s rather quite likely something like this is possible within the ALSA config itself.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
I left both &lt;tt&gt;Headphon&lt;/tt&gt; and &lt;tt&gt;Speaker&lt;/tt&gt; at 33/59 (-12dB/0dB)
but dropped down the second &lt;tt&gt;Speaker&lt;/tt&gt; (full name &lt;tt&gt;&lt;q&gt;Speaker ClassD&lt;/q&gt;&lt;/tt&gt;) down from 92 (+1.58dB) to 72 (0dB).
There'&lt;!--'--&gt;s a whole lot of dynamic range in the pipewire volume control.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
And with all this we can
&lt;/p&gt;
&lt;iframe width=&quot;640&quot; height=&quot;360&quot; src=&quot;//www.youtube.com/embed/T8olJZWewI0&quot; title=&quot;enter the chrome zone&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p class=&quot;continued&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;indented&quot;&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 Further testing (triggered by wireplumber restarts causing &lt;tt&gt;&lt;q&gt;Speaker&lt;/q&gt;&lt;/tt&gt; and &lt;tt&gt;&lt;q&gt;Ext Spk&lt;/q&gt;&lt;/tt&gt; to mute again)
 reveals you need to select
 &lt;/p&gt;
 &lt;dl class=&quot;continuation linear&quot;&gt;
  &lt;dt&gt;Port&lt;/dt&gt; &lt;dd&gt;Speaker&lt;/dd&gt;
 &lt;/dl&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 from the default
 &lt;/p&gt;
 &lt;dl class=&quot;continuation linear&quot;&gt;
  &lt;dt&gt;Port&lt;/dt&gt; &lt;dd&gt;Headphones&lt;/dd&gt;
 &lt;/dl&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 in the pavucontrol Output Devices panel and it works.
 &lt;/p&gt;
&lt;/div&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.31-pavucontrol-output.png&quot;&gt;&lt;img alt='pavucontrol &quot;Volume Control&quot; window, &quot;Output Devices&quot; tab, &quot;Built-in Audio Headphones + Speaker&quot; device, Port: picker open, Speaker highlighted' src=&quot;/content/assets/blogn_t/012b.31-pavucontrol-output.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continued&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;indented&quot;&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 The HiFi &quot;verb&quot; appears to be
 &lt;/p&gt;
 &lt;dl class=&quot;continuation linear&quot;&gt;
  &lt;dt&gt;Profile&lt;/dt&gt; &lt;dd&gt;Default&lt;/dd&gt;
 &lt;/dl&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 and selecting &quot;Off&quot; showed just dummy devices, and &quot;Pro Audio&quot; – two real devices that don'&lt;!--'--&gt;t do anything.
 &lt;/p&gt;
&lt;/div&gt;
&lt;a href=&quot;/content/assets/blogn_t/012b.32-pavucontrol-configuration.png&quot;&gt;&lt;img alt='pavucontrol &quot;Volume Control&quot; window, &quot;Configuration&quot; tab, &quot;Built-in Audio&quot; device, Profile: picker open, Default highlighted' src=&quot;/content/assets/blogn_t/012b.32-pavucontrol-configuration.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;indented&quot;&gt;
The former does not appear to correspond to &lt;em&gt;anything&lt;/em&gt; visible via pipewire (nor do I see it in the ALSA state),
These settings are persistent (at last) but do not automatically switch when headphones are plugged in.
Still no mic though.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
All that'&lt;!--'--&gt;s left is
&lt;/p&gt;
&lt;h2 id=&quot;install&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#install&quot;&gt;#&lt;/a&gt; installing Debian&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
because running off an SD card still sucks ass and continues to defeat the purpose.
Thankfully, we'&lt;!--'--&gt;ve already analysed bootloader discovery and the lay-out of the internal flash in
&lt;a href=&quot;#kernal&quot;&gt;&lt;cite class=&quot;local-ref&quot;&gt;how is &lt;del&gt;pointar formed&lt;/del&gt; kernal loaded?&lt;/cite&gt;&lt;/a&gt;,
but out of the
&lt;a href=&quot;//chromium.googlesource.com/chromiumos/platform/vboot/+/2d30a2f5b1c81eb61de4bf82180a910d45f22e81/_vboot_reference/firmware/lib/vboot_api_kernel.c#339&quot;&gt;many shortcuts the developer menu understands&lt;/a&gt;
not one of them is &quot;boot kernel b actually&quot;,
which makes the ideal &quot;add debian kernel and rootfs as default priority, keep &lt;tt&gt;KERN-A&lt;/tt&gt;&amp;&lt;tt&gt;ROOT-A&lt;/tt&gt; with a downgraded priority as a recovery system&quot;
configuration unworkable.
Indeed, if
&lt;a href=&quot;//chromium.googlesource.com/chromiumos/docs/+/HEAD/disk_format.md#Selecting-the-kernel&quot;&gt;&lt;cite&gt;ChromiumOS Docs - Disk Format, Selecting the kernel&lt;/cite&gt;&lt;/a&gt;
is to be trusted, the entire &quot;ChromeOS Kernel&quot;-partition flag mechanism is used exclusively for effectively-one-time boot bundle verification after an update
and latches on the good kernel afterward.
This means two possibilities remain:
&lt;/p&gt;
&lt;ul style=&quot;padding-left: 1em;&quot;&gt;
 &lt;li&gt;having the rootfs on the eMMC and the kernel on a boot &lt;del&gt;floppy&lt;/del&gt;SD card – inherently funny and least invasive, but possibly the worst UX of all time&lt;/li&gt;
 &lt;li&gt;doing the ideal setup but keeping a kernel and minimal rootfs on an SD card to flip the priority bit manually for recovery 🙄&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;continuing&quot;&gt;
and the choice is obvious, since we already have that recovery image, and the path presents itself rather overtly:
&lt;/p&gt;
&lt;figure class=&quot;bigcode&quot; id=&quot;0init&quot;&gt;
 &lt;figcaption&gt;&lt;p class=&quot;indented continued&quot;&gt;Initial state&lt;/p&gt;&lt;/figcaption&gt;
 &lt;!--&quot;--&gt;&lt;a target=&quot;_blank&quot; href=&quot;/content/assets/blogn_t/012b.23-0init.png&quot;&gt;&lt;img class=&quot;dark-invert&quot; alt=&quot;Partition 11: RWFW, 8M
Partition 6: KERN-C, 512
Partition 7: ROOT-C, 512
Partition 9: ?, 512
Partition 10: ?, 512
2014k of empty space
Partition 2: KERN-A, 16M
Partition 4: KERN-B, 16M
Partition 8: OEM, 16M
64k of empty space
Partition 12: EFI-SYSTEM, 32M
Partition 5: ROOT-B, 2G
Partition 3: ROOT-A, 2G
Partition 1: STATE, 25G&quot; src=&quot;/content/assets/blogn_t/012b.23-0init-crop.png&quot;&gt;&lt;/a&gt;&lt;!--&quot;--&gt;
&lt;/figure&gt;
&lt;figure class=&quot;bigcode&quot; id=&quot;1killpurp&quot;&gt;
 &lt;figcaption&gt;
  &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; fdisk /dev/mmcblk0
Welcome to fdisk (util-linux 2.39.3).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

&lt;span class=&quot;token red&quot;&gt;GPT PMBR size mismatch (61063167 != 61071359) will be corrected by write.
The backup GPT table is not on the end of the device. This problem will be corrected by write.&lt;/span&gt;

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-12, default 12): 6

Partition 6 has been deleted.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-5,7-12, default 12): 7

Partition 7 has been deleted.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-5,8-12, default 12): 9

Partition 9 has been deleted.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-5,8,10-12, default 12): 10

Partition 10 has been deleted.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;span class=&quot;token bold&quot;&gt;Disk /dev/mmcblk0: 29.12 GiB, 31268536320 bytes, 61071360 sectors&lt;/span&gt;
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: gpt
Disk identifier: 8648551F-D8FC-AC44-AA00-C0CA32C4A9BC

&lt;!--&quot;--&gt;&lt;span class=&quot;token bold&quot;&gt;Device            Start      End  Sectors Size Type&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  8704000 61063119 52359120  25G Microsoft basic data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    20480    53247    32768  16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3  4509696  8703999  4194304   2G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p4    53248    86015    32768  16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p5   315392  4509695  4194304   2G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p8    86016   118783    32768  16M Microsoft basic data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11      64    16447    16384   8M ChromeOS firmware&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p12  249856   315391    65536  32M EFI System&lt;!--&quot;--&gt;

Partition table entries are not in disk order.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.&lt;/code&gt;&lt;/pre&gt;
  &lt;p class=&quot;continuing&quot;&gt;(these are all cruft)&lt;/p&gt;
 &lt;/figcaption&gt;
 &lt;a target=&quot;_blank&quot; href=&quot;/content/assets/blogn_t/012b.24-1killpurp.png&quot;&gt;&lt;img class=&quot;dark-invert&quot; alt=&quot;Partitions 6, 7, 9, 10 deleted, accrued together into 2016k of empty space&quot; src=&quot;/content/assets/blogn_t/012b.24-1killpurp-crop.png&quot;&gt;&lt;/a&gt;
&lt;/figure&gt;
&lt;figure class=&quot;bigcode&quot; id=&quot;2killgreen&quot;&gt;
 &lt;figcaption&gt;
  &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-5,8,11,12, default 12): 8
Partition 8 has been deleted.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-5,11,12, default 12):
Partition 12 has been deleted.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;&lt;span class=&quot;token bold&quot;&gt;Device            Start      End  Sectors Size Type&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  8704000 61063119 52359120  25G Microsoft basic data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    20480    53247    32768  16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3  4509696  8703999  4194304   2G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p4    53248    86015    32768  16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p5   315392  4509695  4194304   2G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11      64    16447    16384   8M ChromeOS firmware&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
  &lt;p class=&quot;continuing&quot;&gt;
   (neither of these have anything of interest;
    I did make &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p12.gz&quot;&gt;a backup of &lt;tt&gt;EFI-SYSTEM&lt;/tt&gt;&lt;/a&gt;
    for completeness'&lt;!--'--&gt; sake)
  &lt;/p&gt;
 &lt;/figcaption&gt;
 &lt;a target=&quot;_blank&quot; href=&quot;/content/assets/blogn_t/012b.25-2killgreen.png&quot;&gt;&lt;img class=&quot;dark-invert&quot; alt=&quot;Partitions 8 (OEM) and 12 (EFI-SYSTEM) deleted, accrued together into 48M of empty space&quot; src=&quot;/content/assets/blogn_t/012b.25-2killgreen-crop.png&quot;&gt;&lt;/a&gt;
&lt;/figure&gt;
&lt;figure class=&quot;bigcode&quot; id=&quot;3killB&quot;&gt;
 &lt;figcaption&gt;
  &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-5,11, default 11): 4
Partition 4 has been deleted.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-3,5,11, default 11): 5
Partition 5 has been deleted.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;&lt;span class=&quot;token bold&quot;&gt;Device            Start      End  Sectors Size Type&lt;/span&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  8704000 61063119 52359120  25G Microsoft basic data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    20480    53247    32768  16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3  4509696  8703999  4194304   2G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11      64    16447    16384   8M ChromeOS firmware&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
  &lt;p class=&quot;continuing&quot;&gt;(of course, kill &lt;tt&gt;KERN-A&lt;/tt&gt;/&lt;tt&gt;ROOT-A&lt;/tt&gt; instead if &lt;tt&gt;KERN-B&lt;/tt&gt; is the winner on your machine)&lt;/p&gt;
 &lt;/figcaption&gt;
 &lt;a target=&quot;_blank&quot; href=&quot;/content/assets/blogn_t/012b.26-3killB.png&quot;&gt;&lt;img class=&quot;dark-invert&quot; alt=&quot;Partitions 4 (KERN-B) and 5 (ROOT-B) deleted, accrued together into 2⅛M of empty space&quot; src=&quot;/content/assets/blogn_t/012b.26-3killB-crop.png&quot;&gt;&lt;/a&gt;
&lt;/figure&gt;
&lt;figure class=&quot;bigcode&quot; id=&quot;4expussy&quot;&gt;
 &lt;figcaption&gt;&lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot; style=&quot;tab-size: 8 !important; -moz-tab-size: 8 !important;&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; df -Th
&lt;!--&quot;--&gt;Filesystem              Type  Size  Used Avail Use% Mounted on&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/root               ext2  2.0G  1.6G  418M  79% /&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1          ext4   25G  659M   23G   2% /mnt/stateful_partition&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mapper/encstateful ext4  7.2G  145M  7.0G   2% /mnt/stateful_partition/encrypted&lt;!--&quot;--&gt;

&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; lsblk
&lt;!--&quot;--&gt;NAME          MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;loop1           7:1    0   7.3G  0 loop&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;`-encstateful 254:1    0   7.3G  0 dm   /home/chronos&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                                        /var&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;                                        /mnt/stateful_partition/encrypted&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;mmcblk0       179:0    0  29.1G  0 disk&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;|-mmcblk0p1   179:1    0    25G  0 part /var/cache/dlc-images&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;|                                       /usr/local&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;|                                       /home&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;|                                       /mnt/stateful_partition&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;`-mmcblk0p3   179:3    0     2G  0 part /&lt;!--&quot;--&gt;

&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; du -haxd1 /mnt/stateful_partition
&lt;!--&quot;--&gt;28K	/mnt/stateful_partition/etc&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;4.0K	/mnt/stateful_partition/dev_image&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;12K	/mnt/stateful_partition/shutdown_umount_failure.log&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;4.0K	/mnt/stateful_partition/encrypted.key&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;40K	/mnt/stateful_partition/home&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;33M	/mnt/stateful_partition/unencrypted&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;12K	/mnt/stateful_partition/var_overlay&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;0	/mnt/stateful_partition/.developer_mode&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;4.0K	/mnt/stateful_partition/umount-encrypted.log&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;16K	/mnt/stateful_partition/lost+found&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;8.0K	/mnt/stateful_partition/reboot_vault&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;489M	/mnt/stateful_partition/encrypted.block&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;522M	/mnt/stateful_partition&lt;!--&quot;--&gt;

&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; dmsetup table
encstateful: 0 15355208 crypt aes-cbc-essiv:sha256 :32:logon:dmcrypt:656e63737461746566756c 0 7:1 0 1 allow_discards&lt;/code&gt;&lt;/pre&gt;&lt;/figcaption&gt;
 &lt;!--&quot;--&gt;&lt;a target=&quot;_blank&quot; href=&quot;/content/assets/blogn_t/012b.27-4expussy.png&quot;&gt;&lt;img class=&quot;dark-invert&quot; alt=&quot;Partition 3 (ROOT-A): 1.6G/2G used, ext2, mounted on /
​
Partition 1 (STATE): 659M/25G used, ext4, mounted on /mnt/stateful_partition
on it: /encrypted.block and .key: 489M/7.4G allocated
from it derived /dev/loop1 through dmcrypt into /dev/mapper/encstateful
mounted on /mnt/stateful_partition/encrypted, ext4, 146M/7.2G used&quot; src=&quot;/content/assets/blogn_t/012b.27-4expussy.png&quot;&gt;&lt;/a&gt;&lt;!--&quot;--&gt;
&lt;/figure&gt;
&lt;figure class=&quot;bigcode&quot; id=&quot;5reduce&quot;&gt;
 &lt;figcaption&gt;
  &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; fstrim -v /mnt/stateful_partition/encrypted
/mnt/stateful_partition/encrypted: 7 GiB (7480754176 bytes) trimmed

&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; du -h /mnt/stateful_partition/encrypted.block
323M /mnt/stateful_partition/encrypted.block

&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; df -Th
&lt;!--&quot;--&gt;Filesystem     Type  Size  Used Avail Use% Mounted on&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1 ext4   25G  355M   23G   2% /mnt/stateful_partition&lt;!--&quot;--&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; e2fsck -f /dev/disk/by-partlabel/ROOT-A
e2fsck 1.47.0 (5-Feb-2023)
Filesystem did not have a UUID; generating one.
ROOT-A: 11702/32000 files (9.7% non-contiguous), 402764/509696 blocks
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; resize2fs /dev/disk/by-partlabel/ROOT-A 1.7G
resize2fs 1.47.0 (5-Feb-2023)
resize2fs: Invalid new size: 1.7G
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; resize2fs /dev/disk/by-partlabel/ROOT-A 1704M
resize2fs 1.47.0 (5-Feb-2023)
The filesystem on /dev/disk/by-partlabel/ROOT-A is now &lt;span class=&quot;token bold&quot;&gt;445440&lt;/span&gt; (4k) blocks long.

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; e2fsck -f /dev/disk/by-partlabel/STATE
Pass 1: Checking inodes, blocks, and sizes
Inode 14 extent tree (at level 2) could be narrower. Optimize&amp;lt;y&gt;? no
/dev/disk/by-partlabel/STATE: 152/1638400 files (2.0% non-contiguous), 238667/6544890 blocks
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; resize2fs /dev/disk/by-partlabel/STATE 384M
resize2fs: New size smaller than minimum (239160)&lt;/code&gt;&lt;/pre&gt;
  &lt;p class=&quot;continuing&quot;&gt;
   That's 940M! df and du agree on 355M used but e2fsck's block count also resolves to 932M!
   This means almost tripled usage of space vs the data inside; no fiddling around got me anywhere. How? What'&lt;!--'--&gt;s in those 577M?
  &lt;/p&gt;
&lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; resize2fs /dev/disk/by-partlabel/STATE 960M
The filesystem on /dev/disk/by-partlabel/STATE is now 245760 (4k) blocks long.
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; mount /dev/disk/by-partlabel/STATE /mnt
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; fstrim -v /mnt
/mnt/: 400.5 MiB (419946496 bytes) trimmed.
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; umount /dev/disk/by-partlabel/STATE /mnt
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; e2fsck -fy /dev/disk/by-partlabel/STATE
/dev/mmcblk0p1: 152/65536 files (1.3% non-contiguous), 129018/245760 blocks&lt;/code&gt;&lt;/pre&gt;
  &lt;p class=&quot;continuing&quot;&gt;
   And that'&lt;!--'--&gt;s 503M.
   Where did 437M go?
   Mysterium tytsei.
  &lt;/p&gt;
&lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; resize2fs /dev/disk/by-partlabel/STATE 512M -fz /tmp/undo
Overwriting existing filesystem; this can be undone using the command:
    e2undo /tmp/undo /dev/disk/by-partlabel/STATE
The filesystem on /dev/disk/by-partlabel/STATE is now &lt;span class=&quot;token bold&quot;&gt;131072&lt;/span&gt; (4k) blocks long.
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; e2fsck -fyz /tmp/undo2 /dev/disk/by-partlabel/STATE
/dev/mmcblk0p1: 152/32768 files (2.6% non-contiguous), 124912/&lt;span class=&quot;token bold&quot;&gt;131072&lt;/span&gt; blocks

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; resize2fs /dev/disk/by-partlabel/STATE 480M -fz /tmp/undo3
Overwriting existing filesystem; this can be undone using the command:
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;e2undo /tmp/undo3 /dev/disk/by-partlabel/STATE
Resizing the filesystem on /dev/disk/by-partlabel/STATE to 122880 (4k) blocks.
resize2fs: No space left on device while trying to resize /dev/disk/by-partlabel/STATE
Please run 'e2fsck -fy /dev/disk/by-partlabel/STATE' to fix the filesystem
after the aborted resize operation.
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; e2undo /tmp/undo3 /dev/disk/by-partlabel/STATE &amp;&amp; rm /tmp/undo3
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; mount -r /dev/disk/by-partlabel/STATE /mnt
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; df -h /mnt
&lt;!--&quot;--&gt;Filesystem      Size  Used Avail Use% Mounted on&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  364M  340M     0 100% /mnt&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
 &lt;/figcaption&gt;
 &lt;!--&quot;--&gt;&lt;a target=&quot;_blank&quot; href=&quot;/content/assets/blogn_t/012b.28-5reduce.png&quot;&gt;&lt;img class=&quot;dark-invert&quot; alt=&quot;ROOT-A resized to 1.7G
​
/encrypted.block discarded down to 323M
so STATE usage reduced to 355M and reduced 512M&quot; src=&quot;/content/assets/blogn_t/012b.28-5reduce.png&quot;&gt;&lt;/a&gt;&lt;!--&quot;--&gt;
&lt;/figure&gt;
&lt;figure class=&quot;bigcode&quot; id=&quot;6move&quot;&gt;
 &lt;figcaption&gt;
  &lt;p class=&quot;indented continuing&quot;&gt;
   Usually this would be a slightly more involved process because we'&lt;!--'--&gt;d want to keep it all on disk,
   but in this case they all easily fit in RAM, even all at once.
  &lt;/p&gt;
  &lt;dl class=&quot;guid-demo continuing&quot;&gt;
   &lt;dt&gt;&lt;tt&gt;KERN-A&lt;/tt&gt;&lt;/dt&gt;
   &lt;dd&gt;&lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; cp /dev/disk/by-partlabel/KERN-A .
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; cmp /dev/disk/by-partlabel/KERN-A KERN-A

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; fdisk /dev/mmcblk0
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device            Start      End  Sectors Size Type&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  8704000 61063119 52359120  25G Microsoft basic data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    20480    53247    &lt;!--&quot;--&gt;&lt;span class=&quot;token bold&quot;&gt;32768&lt;/span&gt;&lt;!--&quot;--&gt;  16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3  4509696  8703999  4194304   2G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11      64    16447    16384   8M ChromeOS firmware&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device            Start      End  Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name   Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  8704000 61063119 52359120 &lt;small&gt;EBD0A0A2-B9E5-4433-87C0-68B6B72699C7 D8331AD0-ED78-F442-87F4-78DF0130895A&lt;/small&gt; STATE&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    20480    53247    &lt;!--&quot;--&gt;&lt;span class=&quot;token bold&quot;&gt;32768&lt;/span&gt;&lt;!--&quot;--&gt; &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 CCFE5BD8-BBE4-A840-9C0B-BBA6427B6309&lt;/small&gt; KERN-A GUID:49,56&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3  4509696  8703999  4194304 &lt;small&gt;3CB8E202-3B7E-47DD-8A3C-7FF2A13CFCEC E71F6E02-1BC3-9D43-9EDD-2C7CA20D512A&lt;/small&gt; ROOT-A&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11      64    16447    16384 &lt;small&gt;CAB6E88E-ABF3-4102-A07A-D4BB9BE3C1D3 530A6C46-BDFA-7C40-A446-FC05001BDA82&lt;/small&gt; RWFW&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; r

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-3,11, default 11): 2
Partition 2 has been deleted.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; n
Partition number (2,4-10,12-128, default 2): 2
First sector (&lt;span class=&quot;token bold&quot;&gt;16448&lt;/span&gt;-61071326, default 18432): &lt;span class=&quot;token bold&quot;&gt;16448&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;# doesn'&lt;!--'--&gt;t need to be aligned&lt;/span&gt;
Last sector, +/-sectors or +/-size{K,M,G,T,P} (16448-4509695, default 4509695): +32767
&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token bold comment&quot;&gt;# &lt;span class=&quot;token bold&quot;&gt;32768&lt;/span&gt; − 1 for fdisk +-based arithmetic&lt;/span&gt;
Created a new partition 2 of type 'Linux filesystem' and of size 16 MiB.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; t
Partition number (1-3,11, default 11): 2
Partition type or alias (type L to list all): 180
Changed type of partition 'Linux filesystem' to 'ChromeOS kernel'.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; n
Partition number (1-3,11, default 11): 2
New name: KERN-A
Partition name changed from '' to 'KERN-A'.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; S
Partition number (1-3,11, default 11): 2
Enter GUID specific bit (48-63, default 48): 49
The GUID specific bit 49 on partition 2 is enabled now.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; S
Partition number (1-3,11, default 11): 2
Enter GUID specific bit (48-63, default 48): 56
The GUID specific bit 56 on partition 2 is enabled now.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device            Start      End  Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name   Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    16448    49215    32768 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B9393B88-B27F-438D-BF88-93BE6E66E4A9&lt;/small&gt; KERN-A GUID:49,56&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; r
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device            Start      End  Sectors Size Type&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    16448    49215    32768  16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; w
The partition table has been altered.
Calling ioctl() to re-read partition table.
Syncing disks.

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; cp KERN-A /dev/disk/by-partlabel/KERN-A
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; cmp KERN-A /dev/disk/by-partlabel/KERN-A&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;&lt;/dd&gt;
   &lt;dt&gt;&lt;p&gt;&lt;/p&gt;&lt;tt&gt;ROOT-A&lt;/tt&gt;&lt;/dt&gt;
   &lt;dd&gt;A properly-sized dd would also be fine, but e2image my beloved does it best.
    &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; e2image -rap /dev/disk/by-partlabel/ROOT-A ROOT-A
Copied 402500 / 402503 blocks (100%) in 00:00:08 at 196.53 MB/s
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; ls -lh ROOT-A
&lt;!--&quot;--&gt;-rw------- 1 root root 1.7G Feb  3 16:12 ROOT-A&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; du -h ROOT-A
1.6G ROOT-A
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; mount -r ROOT-A /mnt
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; ls /mnt
&lt;!--&quot;--&gt;bin  dev  etc  home  lib  &lt;small&gt;lost+found  media  mnt  opt  postinst  proc  root  run  sbin	sys  tmp  usr  var&lt;/small&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; df -h /mnt/
&lt;!--&quot;--&gt;Filesystem      Size  Used Avail Use% Mounted on&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3  1.7G  1.6G  168M  91% /mnt&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# all good!&lt;/span&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; umount /mnt/

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; fdisk /dev/mmcblk0
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-3,11, default 11): 3
Partition 3 has been deleted.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; n
Partition number (3-10,12-128, default 3): 3
First sector (49216-61071326, default 51200):&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;# &lt;em&gt;does&lt;/em&gt; need to be aligned&lt;/span&gt;
Last sector, +/-sectors or +/-size{K,M,G,T,P} (51200-8703999, default 8703999): +3563519
&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;# resize2fs said &quot;&lt;!--&quot;--&gt;&lt;span class=&quot;token bold&quot;&gt;445440&lt;/span&gt; (4k) blocks long&quot;&lt;!--&quot;--&gt; – 445440*4096/512 − 1&lt;/span&gt;
Created a new partition 3 of type 'Linux filesystem' and of size 1.7 GiB.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; t
Partition number (1-3,11, default 11): 3
Partition type or alias (type L to list all): 181
Changed type of partition 'Linux filesystem' to 'ChromeOS root fs'.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; n
Partition number (1-3,11, default 11): 3
New name: ROOT-A
Partition name changed from '' to 'ROOT-A'.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device            Start      End  Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name   Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3    51200  3614719  3563520 &lt;small&gt;3CB8E202-3B7E-47DD-8A3C-7FF2A13CFCEC ACB76082-35D1-46F0-A8E9-97006C40B632&lt;/small&gt; ROOT-A&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; r
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device            Start      End  Sectors Size Type&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3    51200  3614719  3563520  1.7G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; w

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; wc -c ROOT-A /dev/disk/by-partlabel/ROOT-A
1824522240 ROOT-A
1824522240 /dev/disk/by-partlabel/ROOT-A
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; cp ROOT-A /dev/disk/by-partlabel/ROOT-A

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; cmp ROOT-A /dev/disk/by-partlabel/ROOT-A
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; mount -r /dev/disk/by-partlabel/ROOT-A /mnt
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; ls /mnt
&lt;!--&quot;--&gt;bin  dev  etc  home  lib  &lt;small&gt;lost+found  media  mnt  opt  postinst  proc  root  run  sbin	sys  tmp  usr  var&lt;/small&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; df -h /mnt/
&lt;!--&quot;--&gt;Filesystem      Size  Used Avail Use% Mounted on&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  364M  340M     0 100% /mnt&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/dd&gt;
   &lt;dt&gt;&lt;p&gt;&lt;/p&gt;&lt;tt&gt;STATE&lt;/tt&gt;&lt;/dt&gt;
   &lt;dd&gt;likewise
    &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; e2image -rap /dev/disk/by-partlabel/STATE STATE
Copied 122867 / 122871 blocks (100%) in 00:00:02 at 239.97 MB/s
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; ls -lh STATE
-rw------- 1 root root 512M Feb 3 16:19 STATE
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; du -h STATE
355M STATE
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; mount -r STATE /mnt
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; ls /mnt
&lt;!--&quot;--&gt;dev_image  encrypted  encrypted.block  encrypted.key  &lt;small&gt;etc  home  lost+found  reboot_vault  shutdown_umount_failure.log	umount-encrypted.log  unencrypted  var_overlay&lt;/small&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; df -h /mnt/
&lt;!--&quot;--&gt;Filesystem      Size  Used Avail Use% Mounted on&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/loop0      364M  340M     0 100% /mnt&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# likewise!&lt;/span&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; umount /mnt/

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; fdisk /dev/mmcblk0
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; d
Partition number (1-3,11, default 11): 1
Partition 1 has been deleted.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; n
Partition number (1,4-10,12-128, default 1): 1
First sector (34-61071326, default 3614720):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (3614720-61071326, default 61069311): +1048575
&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;# resize2fs: &quot;&lt;!--&quot;--&gt;&lt;span class=&quot;token bold&quot;&gt;131072&lt;/span&gt;&quot;&lt;!--&quot;--&gt; – 131072*4096/512 − 1&lt;/span&gt;
Created a new partition 1 of type 'Linux filesystem' and of size 512 MiB.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; t
Partition number (1-3,11, default 11): 1
Partition type or alias (type L to list all): 11
Changed type of partition 'Linux filesystem' to 'Microsoft basic data'.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; n
Partition number (1-3,11, default 11): 1
New name: STATE
Partition name changed from '' to 'STATE'.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device            Start     End Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name   Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  3614720 4663295 1048576 &lt;small&gt;EBD0A0A2-B9E5-4433-87C0-68B6B72699C7 DE9260C7-B796-4681-82E1-6BF5E1DDC405&lt;/small&gt; STATE&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    16448   49215   32768 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B9393B88-B27F-438D-BF88-93BE6E66E4A9&lt;/small&gt; KERN-A GUID:49,56&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3    51200 3614719 3563520 &lt;small&gt;3CB8E202-3B7E-47DD-8A3C-7FF2A13CFCEC ACB76082-35D1-46F0-A8E9-97006C40B632&lt;/small&gt; ROOT-A&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11      64   16447   16384 &lt;small&gt;CAB6E88E-ABF3-4102-A07A-D4BB9BE3C1D3 530A6C46-BDFA-7C40-A446-FC05001BDA82&lt;/small&gt; RWFW&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; r
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device            Start     End Sectors Size Type&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1  3614720 4663295 1048576  512M Microsoft basic data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2    16448   49215   32768   16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3    51200 3614719 3563520  1.7G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11      64   16447   16384    8M ChromeOS firmware&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; w

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; cp STATE /dev/disk/by-partlabel/STATE
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast:/tmp#&lt;/span&gt; cmp STATE /dev/disk/by-partlabel/STATE&lt;/code&gt;&lt;/pre&gt;&lt;/dd&gt;
  &lt;/dl&gt;
  &lt;p class=&quot;continued&quot;&gt;
   And at this point booting to ChromeOS with &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;d&lt;/kbd&gt; still works!
   Amazing.
  &lt;/p&gt;
 &lt;/figcaption&gt;
 &lt;a target=&quot;_blank&quot; href=&quot;/content/assets/blogn_t/012b.29-6move.png&quot;&gt;&lt;img class=&quot;dark-invert&quot; alt=&quot;Partitions moved to the start of the disk, with a 26.5G accrued of empty space at the end&quot; src=&quot;/content/assets/blogn_t/012b.29-6move-crop.png&quot;&gt;&lt;/a&gt;
&lt;/figure&gt;
&lt;figure class=&quot;bigcode&quot; id=&quot;7install&quot;&gt;
 &lt;figcaption&gt;
  &lt;p class=&quot;indented continuing&quot;&gt;Rename the SD card – now recovery – rootfs so it doesn'&lt;!--'--&gt;t get picked up for booting later.&lt;/p&gt;
  &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; fdisk /dev/mmcblk1
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
Disk /dev/mmcblk1: 7.4 GiB, 7948206080 bytes, 15523840 sectors
&lt;!--&quot;--&gt;Device             Start      End Sectors   Size Type&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p1   4864000  5839843  975844 476.5M Microsoft basic data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p5    411648   444415   32768    16M Linux filesystem&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p6    444416  4638719 4194304     2G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p9   4638720  4843519  204800   100M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p10 11329502 15521791 4192290     2G Linux root (ARM-64)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p15  4843520  4863999   20480    10M Solaris alternate sector&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device             Start      End Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name        Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p1   4864000  5839843  975844 &lt;small&gt;EBD0A0A2-B9E5-4433-87C0-68B6B72699C7 90330FF3-B8B8-124F-8285-416E7A627F64&lt;/small&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p5    411648   444415   32768 &lt;small&gt;0FC63DAF-8483-4772-8E79-3D69D8477DE4 8865BF3D-D8EA-574A-9C55-3AABEFC1E84D&lt;/small&gt;             GUID:49,56&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p6    444416  4638719 4194304 &lt;small&gt;3CB8E202-3B7E-47DD-8A3C-7FF2A13CFCEC A0464221-9912-F146-AC7B-C6F489C25176&lt;/small&gt;&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p9   4638720  4843519  204800 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 1E061A8C-6159-4486-ADD1-988E88A06ACF&lt;/small&gt;             GUID:49,56&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p10 11329502 15521791 4192290 &lt;small&gt;B921B045-1DF0-41C3-AF44-4C6F280D3FAE 525C4783-84CA-B249-ABC8-4635B19103BF&lt;/small&gt; chwast-root&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk1p15  4843520  4863999   20480 &lt;small&gt;6A9283A5-1DD2-11B2-99A6-080020736631 D733780B-EC52-3B4A-B568-FEB45F3C4903&lt;/small&gt;&lt;!--&quot;--&gt;

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; n
Partition number (1,5,6,9,10,15, default 15): &lt;span class=&quot;token bold&quot;&gt;10&lt;/span&gt;
New name: chwast-recovery-root
Partition name changed from 'chwast-root' to 'chwast-recovery-root'.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; r
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; w
&lt;/code&gt;&lt;/pre&gt;
  &lt;p class=&quot;continued&quot;&gt;and install – by copying – to the eMMC:&lt;/p&gt;
  &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; fdisk /dev/mmcblk0
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; n
Partition number (4-10,12-128, default 4): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;100&lt;/kbd&gt;&lt;/span&gt;
First sector (4663296-61071326, default 4663296):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (4663296-61071326, default 61069311): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;+24M&lt;/kbd&gt;&lt;/span&gt;
Created a new partition 100 of type 'Linux filesystem' and of size 24 MiB.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; t
Partition number (1-3,11,100, default 100):
Partition type or alias (type L to list all): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;174&lt;/kbd&gt;&lt;/span&gt;
Changed type of partition 'Linux filesystem' to 'ChromeOS kernel'.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; n
Partition number (1-3,11,100, default 100):
New name: &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;chwast-kernel&lt;/kbd&gt;&lt;/span&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; S
Partition number (1-3,11,100, default 100):
Enter GUID specific bit (48-63, default 48): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;49&lt;/kbd&gt;&lt;/span&gt;
The GUID specific bit 49 on partition 100 is enabled now.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; S
Partition number (1-3,11,100, default 100):
Enter GUID specific bit (48-63, default 48): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;56&lt;/kbd&gt;&lt;/span&gt;
The GUID specific bit 56 on partition 100 is enabled now.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device             Start     End Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name          Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p100 4663296 4712447   49152 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B404D487-BF0B-A842-B93F-742DFB050BA5&lt;/small&gt; chwast-kernel GUID:49,56&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; r
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device             Start      End  Sectors   Size Type&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p100 4663296  4712447    49152   24M  ChromeOS kernel&lt;!--&quot;--&gt;

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; n
Partition number (4-10,12-99,101-128, default 4): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;101&lt;/kbd&gt;&lt;/span&gt;
First sector (4712448-61071326, default 4712448):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (4712448-61071326, default 61069311): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;-4G&lt;/kbd&gt;&lt;/span&gt;
Created a new partition 101 of type 'Linux filesystem' and of size 22.9 GiB.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; t
Partition number (1-3,11,100,101, default 101):
Partition type or alias (type L to list all): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;27&lt;/kbd&gt;&lt;/span&gt;
Changed type of partition 'Linux filesystem' to 'Linux root (ARM-64)'.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; n
Partition number (1-3,11,100,101, default 101):
New name: &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;chwast-root&lt;/kbd&gt;&lt;/span&gt;
Partition name changed from '' to 'chwast-root'.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device             Start      End  Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name          Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p101 4712448 52682751 47970304 &lt;small&gt;B921B045-1DF0-41C3-AF44-4C6F280D3FAE A1A44681-9DB6-5640-81F7-F469F51EAA7B&lt;/small&gt; chwast-root&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; r
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
Device Start End Sectors Size Type
/dev/mmcblk0p101 4712448 52682751 47970304 22.9G Linux root (ARM-64)

&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; n
Partition number (4-10,12-99,102-128, default 4): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;102&lt;/kbd&gt;&lt;/span&gt;
First sector (52682752-61071326, default 52682752):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (52682752-61071326, default 61069311):
Created a new partition 102 of type 'Linux filesystem' and of size 4 GiB.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; t
Partition number (1-3,11,100-102, default 102):
Partition type or alias (type L to list all): &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;swap&lt;/kbd&gt;&lt;/span&gt;
Changed type of partition 'Linux filesystem' to 'Linux swap'.
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; n
Partition number (1-3,11,100-102, default 102):
New name: &lt;span class=&quot;token bold&quot;&gt;&lt;kbd style=&quot;font-family: inherit;&quot;&gt;chwast-swap&lt;/kbd&gt;&lt;/span&gt;
Partition name changed from '' to 'chwast-swap'.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device              Start      End  Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name          Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1    3614720  4663295  1048576 &lt;small&gt;EBD0A0A2-B9E5-4433-87C0-68B6B72699C7 DE9260C7-B796-4681-82E1-6BF5E1DDC405&lt;/small&gt; STATE&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2      16448    49215    32768 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B9393B88-B27F-438D-BF88-93BE6E66E4A9&lt;/small&gt; KERN-A        GUID:48,56&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3      51200  3614719  3563520 &lt;small&gt;3CB8E202-3B7E-47DD-8A3C-7FF2A13CFCEC ACB76082-35D1-46F0-A8E9-97006C40B632&lt;/small&gt; ROOT-A&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11        64    16447    16384 &lt;small&gt;CAB6E88E-ABF3-4102-A07A-D4BB9BE3C1D3 530A6C46-BDFA-7C40-A446-FC05001BDA82&lt;/small&gt; RWFW&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p100  4663296  4712447    49152 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B404D487-BF0B-A842-B93F-742DFB050BA5&lt;/small&gt; chwast-kernel GUID:49,56&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p101  4712448 52682751 47970304 &lt;small&gt;B921B045-1DF0-41C3-AF44-4C6F280D3FAE A1A44681-9DB6-5640-81F7-F469F51EAA7B&lt;/small&gt; chwast-root&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p102 52682752 61069311  8386560 &lt;small&gt;0657FD6D-A4AB-43C4-84E5-0933C84B4F4F 0AAF87E8-B293-964A-8073-605103B71460&lt;/small&gt; chwast-swap&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; r
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device             Start       End  Sectors  Size Type&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p1    3614720  4663295  1048576  512M Microsoft basic data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2      16448    49215    32768   16M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p3      51200  3614719  3563520  1.7G ChromeOS root fs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p11        64    16447    16384    8M ChromeOS firmware&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p100  4663296  4712447    49152   24M ChromeOS kernel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p101  4712448 52682751 47970304 22.9G Linux root (ARM-64)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p102 52682752 61069311  8386560    4G Linux swap&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; w

&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; cp /dev/mmcblk1p9 /dev/disk/by-partlabel/chwast-kernel
cp: error writing '/dev/disk/by-partlabel/chwast-kernel': No space left on device
&lt;span class=&quot;token comment&quot;&gt;# benign: overprovisioned at 100M, the actual bundle is &lt;20M&lt;/span&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; blkdiscard /dev/disk/by-partlabel/chwast-root
&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; e2image -rap /dev/mmcblk1p10 /dev/disk/by-partlabel/chwast-root
e2image 1.46.5 (30-Dec-2021)
Scanning inodes...
&lt;!--&quot;--&gt;Copied 1852984 / 1852984 blocks (100%) in 00:01:56 at 15.60 MB/s       s&lt;!--&quot;--&gt;
&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; mkswap -L chwast-swap /dev/disk/by-partlabel/chwast-swap
Setting up swapspace version 1, size = 4 GiB (4293914624 bytes)
LABEL=chwast-swap, UUID=d88296c6-5438-41f2-866a-e1e9e01b77b3&lt;/code&gt;&lt;/pre&gt;
 &lt;/figcaption&gt;
 &lt;!--&quot;--&gt;&lt;a target=&quot;_blank&quot; href=&quot;/content/assets/blogn_t/012b.30-7install.png&quot;&gt;&lt;picture&gt;&lt;source srcset=&quot;/content/assets/blogn_t/012b.30-7install-crop+inv.png&quot; media=&quot;(prefers-color-scheme: dark)&quot;&gt;&lt;img alt=&quot;
Partition 100 (chrust-kernel): 24M
Partition 101 (chrust-root): 22.875G
Partition 100 (chrust-swap): 4G
added&quot; src=&quot;/content/assets/blogn_t/012b.30-7install-crop.png&quot;&gt;&lt;/picture&gt;&lt;/a&gt;&lt;!--&quot;--&gt;
&lt;/figure&gt;
&lt;p class=&quot;indented&quot;&gt;
&lt;tt&gt;chwast-kernel&lt;/tt&gt; on partition 100 has priority &lt;var&gt;2&lt;/var&gt; (49=&lt;var&gt;1&lt;/var&gt;, 48=&lt;var&gt;0&lt;/var&gt; ⇔ &lt;var&gt;0b10&lt;/var&gt;) with its &lt;q&gt;Successful Boot Flag&lt;/q&gt; set,
and will thus be chosen over &lt;tt&gt;&lt;q&gt;KERN-A&lt;/q&gt;&lt;/tt&gt; (partition 2) with priority &lt;var&gt;1&lt;/var&gt;.
&lt;/p&gt;
&lt;h2 id=&quot;speedrun-install&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#speedrun-install&quot;&gt;#&lt;/a&gt; arm64 Chromebook Debian port install% 23-day RTA/#137 IGT WR&lt;/h2&gt;
&lt;iframe width=&quot;640&quot; height=&quot;360&quot; src=&quot;//www.youtube.com/embed/gJilDg6ghq8&quot; title=&quot;arm64 Chromebook Debian port install% 23-day RTA/#137 IGT WR&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen&gt;&lt;/iframe&gt;
&lt;p&gt;&lt;/p&gt;
&lt;pre class=&quot;language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; resize2fs /dev/dev/disk/by-partlabel/chwast-root
resize2fs 1.47.0 (5-Feb-2023)
Filesystem at /dev/disk/by-partlabel/chwast-root is mounted on /; on-line resizing required
old_desc_blocks = 8, new_desc_blocks = 92
The filesystem on /dev/dev/disk/by-partlabel/chwast-root is now 5926272 (4k) blocks long.
&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; df -h
&lt;!--&quot;--&gt;Filesystem       Size  Used Avail Use% Mounted on&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p100  22G  1.7G   19G   8% /&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;recovery&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#recovery&quot;&gt;#&lt;/a&gt; ChromeOS as a recovery system&lt;/h3&gt;
&lt;p class=&quot;continuation&quot;&gt;
has a propensity to shuffle the priorities, but it'&lt;!--'--&gt;s nothing major.
&lt;/p&gt;
&lt;figure class=&quot;bigcode&quot;&gt;
 &lt;figcaption&gt;
  &lt;p class=&quot;indented continuing&quot;&gt;Disable the successful boot flag on the Debian kernel:&lt;/p&gt;
 &lt;/figcaption&gt;
 &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; fdisk /dev/mmcblk0
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device             Start     End Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name          Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2     16448   49215   32768 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B9393B88-B27F-438D-BF88-93BE6E66E4A9&lt;/small&gt; KERN-A        GUID:48,56&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p100 4663296 4712447   49152 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B404D487-BF0B-A842-B93F-742DFB050BA5&lt;/small&gt; chwast-kernel GUID:49,56&lt;!--&quot;--&gt;

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; S
Partition number (1-3,11,100-102, default 102): 100
Enter GUID specific bit (48-63, default 48): 56
The GUID specific bit 56 on partition 100 is disabled now.

&lt;span class=&quot;token shell-symbol important&quot;&gt;chwast#&lt;/span&gt; reboot &lt;/code&gt;&lt;/pre&gt;
&lt;/figure&gt;
&lt;figure class=&quot;bigcode&quot;&gt;
 &lt;figcaption&gt;
  &lt;p class=&quot;indented continuing&quot;&gt;After rebooting, now to ChromeOS, note how the priorities were automatically inverted.&lt;/p&gt;
 &lt;/figcaption&gt;
 &lt;pre class=&quot;continuing language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; fdisk /dev/mmcblk0
&lt;span class=&quot;token shell-symbol important&quot;&gt;Command (m for help):&lt;/span&gt; x
&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; p
&lt;!--&quot;--&gt;Device              Start      End  Sectors &lt;small&gt;Type-UUID                            UUID                                &lt;/small&gt; Name          Attrs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p2      16448    49215    32768 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B9393B88-B27F-438D-BF88-93BE6E66E4A9&lt;/small&gt; KERN-A        GUID:49,56&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/mmcblk0p100  4663296  4712447    49152 &lt;small&gt;FE3A2A5D-4F32-41A7-B725-ACCC3285A309 B404D487-BF0B-A842-B93F-742DFB050BA5&lt;/small&gt; chwast-kernel GUID:48&lt;!--&quot;--&gt;

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; S
Partition number (1-3,11,100-102, default 102): 100
Enter GUID specific bit (48-63, default 48): 56
The GUID specific bit 56 on partition 100 is enabled now.

&lt;span class=&quot;token shell-symbol important&quot;&gt;Expert command (m for help):&lt;/span&gt; S
Partition number (1-3,11,100-102, default 102): 2
Enter GUID specific bit (48-63, default 48): 49
The GUID specific bit 49 on partition 2 is disabled now.

&lt;span class=&quot;token shell-symbol important&quot;&gt;localhost#&lt;/span&gt; reboot &lt;/code&gt;&lt;/pre&gt;
&lt;/figure&gt;
&lt;p class=&quot;continued&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;indented&quot;&gt;
 &lt;p style=&quot;display: inline;&quot;&gt;
 And with
 &lt;/p&gt;
 &lt;dl class=&quot;linear&quot;&gt;
  &lt;dt&gt;&lt;tt&gt;KERN-A&lt;/tt&gt;&lt;/dt&gt; &lt;dd&gt;&lt;tt&gt;GUID:56&lt;/tt&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;tt&gt;chwast-kernel&lt;/tt&gt;&lt;/dt&gt; &lt;dd&gt;&lt;tt&gt;GUID:48,56&lt;/tt&gt;&lt;/dd&gt;
 &lt;/dl&gt;
 &lt;p style=&quot;display: inline;&quot;&gt;
 the re-boot chooses the Debian kernel again.
 For a subsequent recovery run, toggling &lt;tt&gt;KERN-A&lt;/tt&gt;'&lt;!--'--&gt;s bit 49 would also work.
 &lt;/p&gt;
&lt;/div&gt;
&lt;h2 id=&quot;hid&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#hid&quot;&gt;#&lt;/a&gt; they unfucked the HIDs bro its crazy&lt;/h2&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
In pointed contrast to
&lt;a href=&quot;012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html#installing-post-install-linux-general-qol-fixes-cros-keyboard-map&quot;&gt;&lt;cite&gt;&lt;samp&gt;012a. Installing Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen Chromebook (Intel)&lt;/samp&gt;, &lt;span class=&quot;local-ref&quot;&gt;Post Install&lt;/span&gt;, &lt;span class=&quot;local-ref&quot;&gt;General QOL Fixes&lt;/span&gt;, Run the cros-keyboard-map script&lt;del&gt;[…]&lt;/del&gt;&lt;/cite&gt;&lt;/a&gt;.
&lt;/p&gt;
&lt;dl class=&quot;keyboard continuing&quot;&gt;
  &lt;dt&gt;&lt;kbd&gt;esc&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;Escape&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;←&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F1&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;→&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F2&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;⟳&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F3&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle with chevrons in the top-left and bottom-right internal corners&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVR42u2azUoDMRDHF6TtRZ+gwnoQ8VXam3ZbkPoGem3foIf2qm/gIthWX0fEQwtKvasHWxbWCYwQYj5WTWYW24E/vXQz81uSyWSyUZ7n0Toq2oAX+bPeqqAO6Bo0Ay1BuSe9ge5x7A76+mYc4EegR4+gLglfx5zgW6AhIbCqIcZADs4JLcOTgieOgMQavwGdgPZM69Ji26BDfH7syBkJFbiAeLIEcgfaj/yaGO/W4O9ZxEQB3jUEkIH6UVjrox/V9ykF+MQAHhpahld9TynA5xrHEyW4gWZdLkANT/Dqy59TgH9oEtmuElhmmBULT+B15cUuKcBVmFRXSBn04nHKX8ljc4AnBcFF9m16BG9xg8cO8FAWc4PXmMCr3OA6y6TEF9JKBy62s3f8XStwKmMF3wkINsBGxKCMa/wgILgtV8Rl3Me9T+Uy7uMpEzh55fZaoFb/rTWwns8dSbSunBlIavUHTVBjT+ALS50v25jjdGY6j/cCgsvJrcd1Hrd1YM7/CN7EE5w87krazs44OzCunts0UM9tYjn11ai6rO0CXdYUtxzRZa38ELSCz7VwHFuXtU3dVx+VoK8+4rpJuWCEvuS6SZErKOq7s6QMl4ZfCa+LiW2GmdgX6ArHnKIPntvSzYcB/0CfmeytTddSfkMAAAAASUVORK5CYII=&quot;&gt;&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F4&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle, to its right are two vertical stripes&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAABy0lEQVR42u2ZX0rDQBDGA9L2RU+gGAURr6NNC1JvoK/NHdpXvYFFMIleQEofPISIDxb0BOpDW4Q4K/NQprvZJcn+gc3ARynMfskvZDezs0Ge54GPChrwBtxTcEG0QX3QHegdtATlJfUNekGvPnrXHnWAn4LeKoDKxLzPXALfAo00AlON8Jo0DkFTfFOm+F+aUwXcJPQ6PI0ZyXlWySkLHhXcHJvf96Bz0IFkjm6DTjA3UVwbIuJBx/xyrrORUwacgXwIbuoRdFRh6rGxDxLwT/IweTkbU5qqDPiAY8Seclzj2hOjpwj+wgZ4yjGKNXxx4gLwzAb4nJikgb5IBWBzG+ALspDtaQTfFSx4Sxvg6waTQH/cSuCsgEcGwLsugocGwEMXwTsGwNsugu/4Cn7s66vu7eLm1efsy3ABs3ClgHklJolG8MSlkpVXPw81QA9d26SItqVXNUJfurgtLWpEZDU0IlKFRkTHBjiLnqT1NMHPEGs9tQpAW5jTxTEqraeeDEonOIuxhWbjWAVKNzhr9V4bhL4RtJeNNRt5lZXuA4WiCvGJ5M9Ucuo8Qhrg4saOkFYVQFfokaGn7AhpH8F+8DdUyWkODRvwBvxffz5Mo4mV7gMcAAAAAElFTkSuQmCC&quot;&gt;&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F5&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;&lt;small&gt;☀️&lt;/small&gt;&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F6&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;☀️&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F7&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;🔇&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F8&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;🔉&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F9&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;🔊&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;F10&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;🔒&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86Sleep&lt;/code&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;continuing&quot;&gt;
(🔒 is the Suspend Key and handled by logind by default.)
Caps Lock is replaced with
&lt;/p&gt;
&lt;dl class=&quot;keyboard continuation&quot;&gt;
  &lt;dt&gt;&lt;kbd&gt;🔍&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;Super_L&lt;/code&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;indented&quot;&gt;
&lt;kbd&gt;esc&lt;/kbd&gt;, &lt;kbd&gt;🔒&lt;/kbd&gt;, and &lt;kbd&gt;🔍&lt;/kbd&gt; are the same as on the Intel 300e.
All the other ones aren'&lt;!--'--&gt;t, and this is for the best – you can switch VTs normally!
You almost wouldn't notice the keyboard's fucked! sans the usual omissions of Home/End/Delete of course.
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;indented&quot;&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 The clicky buttons on the side –
 &lt;/p&gt;
 &lt;dl class=&quot;continuation linear&quot;&gt;
   &lt;dt&gt;volume up&lt;/dt&gt; &lt;dd&gt;&lt;code&gt;XF86AudioRaiseVolume&lt;/code&gt;&lt;/dd&gt;
   &lt;dt&gt;volume down&lt;/dt&gt; &lt;dd&gt;&lt;code&gt;XF86AudioLowerVolume&lt;/code&gt;&lt;/dd&gt;
   &lt;dt&gt;power&lt;/dt&gt; &lt;dd&gt;power key logind understands&lt;/dd&gt;
 &lt;/dl&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 – are distinguished from &lt;kbd&gt;🔉&lt;/kbd&gt;/&lt;kbd&gt;🔊&lt;/kbd&gt; this time!
 Imagine!
 &lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
For these same inputs &lt;a href=&quot;//github.com/rvaiya/keyd&quot;&gt;keyd&lt;/a&gt; yields
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;overflow: auto;&quot;&gt;device added: 0000:0000 cros_ec (/dev/input/event0)
device added: 06cb:1a10 hid-over-i2c 06CB:1A10 (/dev/input/event1)
device added: 04f3:009f Elan Touchpad (/dev/input/event3)
cros_ec 0000:0000 esc down
cros_ec 0000:0000 f1 down
cros_ec 0000:0000 f2 down
cros_ec 0000:0000 f3 down
cros_ec 0000:0000 f4 down
cros_ec 0000:0000 f5 down
cros_ec 0000:0000 f6 down
cros_ec 0000:0000 f7 down
cros_ec 0000:0000 f8 down
cros_ec 0000:0000 f9 down
cros_ec 0000:0000 f10 down
cros_ec 0000:0000 sleep down
cros_ec 0000:0000 leftmeta down&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
– note that the side buttons don'&lt;!--'--&gt;t generate any input event!
But this agrees with our other findings, and thus,
for the &lt;a href=&quot;012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html#cros2.conf&quot;&gt;same mapping as last time&lt;/a&gt;,
a simple &lt;samp class=&quot;path&quot;&gt;/etc/keyd/cros_ec.conf&lt;/samp&gt; of
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside tab8-inside&quot;&gt;
&lt;pre class=&quot;language-ini&quot;&gt;&lt;code class=&quot;language-ini&quot;&gt;&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
0000:0000

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;left&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;home&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;right&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;up&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;pageup&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;down&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;pagedown&lt;/span&gt;

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# Don'&lt;!--'--&gt;t mangle these (https://github.com/rvaiya/keyd/issues/618)&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;rightcontrol&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;rightcontrol&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;rightshift&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;rightshift&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 🔒&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;sleep&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;delete&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 🔍 remains as leftmeta&lt;/span&gt;

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# ←&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f1&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;back&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# →&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f2&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;forward&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# ⟳&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f3&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;refresh&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# tableau&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f4&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;print&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# fast rectangle&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f5&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;scale&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# small ☀️&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f6&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;brightnessdown&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# ☀️&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f7&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;brightnessup&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 🔇&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f8&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;mute&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 🔉&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f9&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;volumedown&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 🔊&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f10&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;volumeup&lt;/span&gt;

&lt;span class=&quot;token key attr-name&quot;&gt;sleep&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;sleep&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
suffices.
&lt;/p&gt;
&lt;h3 id=&quot;hid-touchpad&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#hid-touchpad&quot;&gt;#&lt;/a&gt; naaah no they fuckin didn'&lt;!--'--&gt;t&lt;/h3&gt;
&lt;p class=&quot;indented&quot;&gt;
Yeah so the touchpad has one button.
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;indented&quot;&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 This by itself is baffling, but since the &quot;Tapping&quot; mode basically a necessity for the modern user anyway
 (the methodology in
  &lt;a href=&quot;012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html#xorg.conf.d&quot;&gt;&lt;cite&gt;&lt;samp&gt;012a. Installing Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen Chromebook (Intel)&lt;/samp&gt;, &lt;span class=&quot;local-ref&quot;&gt;Installing Linux&lt;/span&gt;, &lt;samp class=&quot;path&quot;&gt;/etc/X11/xorg.conf.d/touchpad.conf&lt;/samp&gt;&lt;/cite&gt;&lt;/a&gt;
  applies)
 it'&lt;!--'--&gt;s only an issue for the first 10min because clicking touchpads sucks on a good day
 so the
 &lt;/p&gt;
 &lt;dl class=&quot;continuation linear&quot;&gt;
   &lt;dt&gt;1 finger&lt;/dt&gt; &lt;dd&gt;left click&lt;/dd&gt;
   &lt;dt&gt;2 fingers&lt;/dt&gt; &lt;dd&gt;right click&lt;/dd&gt;
   &lt;dt&gt;3 fingers&lt;/dt&gt; &lt;dd&gt;middle click&lt;/dd&gt;
 &lt;/dl&gt;
 &lt;p style=&quot;display: inline&quot;&gt;
 mapping thus enabled is all-'round better than only having two buttons would've been.
 Plus, there'&lt;!--'--&gt;s already a 75-big pad for clicking just above.
 &lt;/p&gt;
&lt;/div&gt;
&lt;h2 id=&quot;hdmi&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#hdmi&quot;&gt;#&lt;/a&gt; &lt;abbr title=&quot;Horny Demon Mangling Interface&quot;&gt;HDMI&lt;/abbr&gt;&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Doesn'&lt;!--'--&gt;t work.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
But it &lt;em&gt;does&lt;/em&gt; work under ChromeOS, with &lt;code&gt;dmesg | grep -i hdmi&lt;/code&gt; yielding
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot; style=&quot;position: relative;&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/KERN-A.dmesg&quot;&gt;&lt;aside&gt;full dmesg&lt;/aside&gt;&lt;/a&gt;&lt;!--&quot;--&gt;[    0.130803]&lt;!--&quot;--&gt; mediatek-hdmi-phy 10209100.hdmi-phy: Using default TX DRV impedance: 4.2k/36
&lt;!--&quot;--&gt;[    0.131789]&lt;!--&quot;--&gt; mediatek-drm-hdmi 14025000.hdmi: Waiting for external bridge
&lt;!--&quot;--&gt;[    0.133463]&lt;!--&quot;--&gt; gpio-display-mux hdmi_mux: GPIO lookup for consumer detect
&lt;!--&quot;--&gt;[    0.133468]&lt;!--&quot;--&gt; gpio-display-mux hdmi_mux: using device tree for GPIO lookup
&lt;!--&quot;--&gt;[    0.133485]&lt;!--&quot;--&gt; of_get_named_gpiod_flags: parsed 'detect-gpios' property of node '/hdmi_mux[0]' - status (0)
&lt;!--&quot;--&gt;[    0.133519]&lt;!--&quot;--&gt; gpio-display-mux hdmi_mux: Waiting for external bridge anx7688
&lt;!--&quot;--&gt;[    0.960402]&lt;!--&quot;--&gt; mediatek-drm-hdmi 14025000.hdmi: Waiting for external bridge
&lt;!--&quot;--&gt;[    0.960636]&lt;!--&quot;--&gt; gpio-display-mux hdmi_mux: GPIO lookup for consumer detect
&lt;!--&quot;--&gt;[    0.960638]&lt;!--&quot;--&gt; gpio-display-mux hdmi_mux: using device tree for GPIO lookup
&lt;!--&quot;--&gt;[    0.960645]&lt;!--&quot;--&gt; of_get_named_gpiod_flags: parsed 'detect-gpios' property of node '/hdmi_mux[0]' - status (0)
&lt;!--&quot;--&gt;[    0.967421]&lt;!--&quot;--&gt; [drm] hdmi-audio-codec driver bound to HDMI
&lt;!--&quot;--&gt;[    0.968986]&lt;!--&quot;--&gt; mtk-rt5650 sound: snd-soc-dummy-dai &lt;-&gt; HDMI mapping ok
&lt;!--&quot;--&gt;[    0.969679]&lt;!--&quot;--&gt; mtk-rt5650 sound: i2s-hifi &lt;-&gt; HDMIO mapping ok
&lt;!--&quot;--&gt;[    1.025253]&lt;!--&quot;--&gt; input: mtk-rt5650 HDMI Jack as /devices/platform/sound/sound/card0/input6
&lt;!--&quot;--&gt;[    1.025521]&lt;!--&quot;--&gt; mediatek-dpi 1401d000.dpi: Found bridge node: /soc/hdmi@14025000
&lt;!--&quot;--&gt;[   11.742614]&lt;!--&quot;--&gt; udevd[2142]: Process '/usr/sbin/hdcp_pass_key.sh /devices/platform/soc/14025000.hdmi' failed with exit code 1.
&lt;!--&quot;--&gt;[   11.895324]&lt;!--&quot;--&gt; udevd[2145]: Process '/usr/sbin/hdcp_pass_key.sh /devices/platform/soc/14025000.hdmi/hdmi-audio-codec.11.auto' failed with exit code 1.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
whereas the same under 6.6.11 #137 is only
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;!--&quot;--&gt;[    18:20:17]&lt;!--&quot;--&gt; platform 14025000.hdmi: Fixed dependency cycle(s) with /soc/dpi@1401d000/port/endpoint
&lt;!--&quot;--&gt;[    18:20:17]&lt;!--&quot;--&gt; platform connector: Fixed dependency cycle(s) with /soc/hdmi@14025000/ports/port@1/endpoint
&lt;!--&quot;--&gt;[    18:20:17]&lt;!--&quot;--&gt; &lt;span class=&quot;token comment&quot;&gt;mediatek-hdmi-phy 10209100.hdmi-phy: Using default TX DRV impedance: 4.2k/36&lt;/span&gt;
&lt;!--&quot;--&gt;[    18:20:17]&lt;!--&quot;--&gt; &lt;span class=&quot;token comment&quot;&gt;[drm] hdmi-audio-codec driver bound to HDMI&lt;/span&gt;
&lt;!--&quot;--&gt;[    18:20:17]&lt;!--&quot;--&gt; &lt;span class=&quot;token comment&quot;&gt;mediatek-dpi 1401d000.dpi: Found bridge node: /soc/hdmi@14025000&lt;/span&gt;
&lt;!--&quot;--&gt;[    18:20:20]&lt;!--&quot;--&gt; &lt;span class=&quot;token comment&quot;&gt;input: mtk-rt5650 HDMI Jack as /devices/platform/sound/sound/card0/input9&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
(matching lines lowlighted).
So only the audio goop is common.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Fortuitously, while a grep for &lt;tt&gt;&lt;q&gt;of_get_named_gpiod_flags&lt;/q&gt;&lt;/tt&gt; was uneventful,
a grep for &lt;tt&gt;&lt;q&gt;gpio-display-mux&lt;/q&gt;&lt;/tt&gt; yielded nothing – not one single reult – in the 6.6.11 tree.
Well then!
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;tt&gt;&lt;q&gt;gpio-display-mux&lt;/q&gt;&lt;/tt&gt; figures in the
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.mt8173-elm-hana.dts&quot;&gt;ChromeOS device tree&lt;/a&gt; as
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside&quot; style=&quot;position: relative;&quot;&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.mt8173-elm-hana.dts&quot;&gt;&lt;aside&gt;full device tree&lt;/aside&gt;&lt;/a&gt;
&lt;pre class=&quot;language-dts&quot;&gt;&lt;code class=&quot;language-dts&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;hdmi_mux {
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;compatible = &lt;span class=&quot;token string&quot;&gt;&quot;gpio-display-mux&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;status = &lt;span class=&quot;token string&quot;&gt;&quot;okay&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;detect-gpios = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x15&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x24&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&gt;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and not at all in the 6.6.11 one;
the first google result is
&lt;a href=&quot;//patchwork.kernel.org/project/linux-mediatek/patch/20230218111712.2380225-5-treapking@chromium.org/&quot;&gt;&lt;cite&gt;[v3,4/5] dt-bindings: display: bridge: Add GPIO display mux binding&lt;/cite&gt;&lt;/a&gt;,
part of the
&lt;a href=&quot;//lore.kernel.org/all/20230218111712.2380225-1-treapking@chromium.org/t/&quot;&gt;&lt;cite&gt;[PATCH v3 0/5] Add generic-display-mux driver and bindings&lt;/cite&gt;&lt;/a&gt;,
series from 2023-02-18.
(Attentive readers may remember this is a 2019 device.)
All great,
except &lt;a href=&quot;//lore.kernel.org/all/20230218111712.2380225-1-treapking@chromium.org/t/#mb0efcb6d9c20529b7ffa234d68cf84c1de988130&quot;&gt;this series is dropped&lt;/a&gt;
because it doesn'&lt;!--'--&gt;t do something-or-other cromulently enough for the DRM subsystem.
If only you could'&lt;!--'--&gt;ve arrived at this &lt;em&gt;before&lt;/em&gt; you shipped hundreds of thousands of units!
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The &lt;a href=&quot;//patchwork.kernel.org/series/723172/mbox/&quot;&gt;series from patchwork&lt;/a&gt; applies with minimal fuzz;
this also references the &lt;tt&gt;analogix,anx7688&lt;/tt&gt; device –
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside&quot; style=&quot;position: relative;&quot;&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/mmcblk0p2.mt8173-elm-hana.dts&quot;&gt;&lt;aside&gt;full device tree&lt;/aside&gt;&lt;/a&gt;
&lt;pre class=&quot;language-dts&quot;&gt;&lt;code class=&quot;language-dts&quot;&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;spi@1100a000 {
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;ec@0 {
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;i2c-tunnel@1 {
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;compatible = &lt;span class=&quot;token string&quot;&gt;&quot;google,cros-ec-i2c-tunnel&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;google,remote-bus = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x01&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;#address-cells = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x01&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;#size-cells = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&gt;;

&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;anx7688@2c {
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;compatible = &lt;span class=&quot;token string&quot;&gt;&quot;analogix,anx7688&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;status = &lt;span class=&quot;token string&quot;&gt;&quot;okay&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;reg = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x2c&lt;/span&gt;&gt;;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
– also not present (incl. the tunnel) in the 6.6.11 device tree, also with no compatible module.
There'&lt;!--'--&gt;s &lt;a href=&quot;//lore.kernel.org/all/Zbt1dIByBZ2stzjm@mobian/t/#u&quot;&gt;an extrmely crusty patch&lt;/a&gt; for it (targetting the PinePhone) from &lt;em&gt;this Thursday&lt;/em&gt;;
it also applies with no fuzz.
&lt;/p&gt;
&lt;pre class=&quot;continued&quot; style=&quot;overflow: auto;&quot;&gt;$ make -j25 ARCH=arm64 LLVM=1 oldconfig
Generic GPIO-controlled mux (DRM_GENERIC_GPIO_MUX) [N/m/y/?] (NEW) y
Analogix ANX7688 Type-C DRP Port controller and mux driver (TYPEC_ANX7688) [N/m/y/?] (NEW) y&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
and it builds fine as well.
Neither of them change the device tree, however, so I
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/hdmi_mux+anx7688.dts&quot;&gt;carefully grafted both devices thereinto&lt;/a&gt;,
yielding
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;18M 02-04 19:44 mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd&amp;mwifiex+mmc1+gpio-display-mux.dtb
18M 02-04 19:53 mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd&amp;mwifiex+mmc1+gpio-display-mux2.dtb
18M 02-04 20:09 mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd&amp;mwifiex+mmc1+gpio-display-mux3.dtb
18M 02-04 20:29 mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd&amp;mwifiex+mmc1+gpio-display-mux3+anx.dtb&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
which boots to black screen, neither &lt;span style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔊&lt;/kbd&gt;+&lt;kbd&gt;r&lt;/kbd&gt;&lt;/span&gt; nor &lt;kbd&gt;⟳&lt;/kbd&gt;+power button leave anything in the pstore.
&lt;/p&gt;
&lt;h2 id=&quot;blob&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#blob&quot;&gt;#&lt;/a&gt; blob-free boot bundle real&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Heretofore the device trees to sign/bundle and boot were &lt;a href=&quot;#hifux&quot;&gt;a bastardised version of the ChromeOS boot bundle'&lt;!--'--&gt;s device tree&lt;/a&gt;.
This works, but is both plain odd &lt;em&gt;and&lt;/em&gt; existentially problematic –
what is the boot bundles contain &lt;a href=&quot;#kernal&quot;&gt;device trees without the right &lt;samp&gt;compatible =&lt;/samp&gt; stanza like in &lt;tt&gt;&lt;q&gt;EFI-SYSTEM&lt;/q&gt;&lt;/tt&gt;&lt;/a&gt;?
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Given that &lt;a href=&quot;#bootloader&quot;&gt;the bootloader coughs up&lt;/a&gt; to &lt;q&gt;&lt;tt&gt;Starting depthcharge on hana...&lt;/tt&gt;&lt;/q&gt;,
a quick &quot;site:manpages.debian.org depthcharge&quot; search yields
&lt;a href=&quot;//manpages.debian.org/unstable/depthcharge-tools/mkdepthcharge.1.en.html&quot;&gt;mkdepthcharge(1)&lt;/a&gt;
(as part of depthcharge-tools,
 which &lt;a href=&quot;//packages.debian.org/sid/all/depthcharge-tools/filelist&quot;&gt;also includes kernel/initrd hooks&lt;/a&gt;,
       &lt;a href=&quot;//packages.debian.org/sid/depthcharge-tools#pdeps&quot;&gt;pulls in a tremendous amount of dependencies&lt;/a&gt;,
   and &lt;a href=&quot;//sources.debian.org/src/depthcharge-tools/0.6.2-1/systemd/depthchargectl-bless.service/&quot;&gt;ships a service to massage the partition table on boot&lt;/a&gt;
 – absolutely not happening, sorry),
pointing at &lt;a href=&quot;//manpages.debian.org/unstable/u-boot-tools/mkimage.1.en.html&quot;&gt;mkimage(1)&lt;/a&gt; (u-boot-tools),
and &lt;code&gt;mkimage -l &lt;samp class=&quot;path&quot;&gt;mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd\&amp;mwifiex+mmc1-sdr.dtb&lt;/samp&gt;&lt;/code&gt; starts with
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;!--&quot;--&gt;Image contains unit addresses @, this will break signing&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;FIT description: Chrome OS kernel image with one or more FDT blobs&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Created:         Mon Apr 17 04:48:47 2023&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; Image 0 (kernel@1)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Description:  unavailable&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Created:      Mon Apr 17 04:48:47 2023&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Type:         Kernel Image (no loading done)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Compression:  lz4 compressed&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Data Size:    15550846 Bytes = 15186.37 KiB = 14.83 MiB&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; Image 1 (fdt@1)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Description:  mt2712-evb.dtb&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Created:      Mon Apr 17 04:48:47 2023&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Type:         Flat Device Tree&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Compression:  uncompressed&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Data Size:    8174 Bytes = 7.98 KiB = 0.01 MiB&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Architecture: AArch64&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Hash algo:    sha1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Hash value:   2cb3b42d319ed9579540b17d7c2c68863329e8fe&lt;!--&quot;--&gt;
…
&lt;!--&quot;--&gt; Configuration 0 (conf@1)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Description:  unavailable&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  Kernel:       kernel@1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  FDT:          fdt@1&lt;!--&quot;--&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
– certainly promising.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
By adapting an example from the manual,
&lt;samp&gt;mkimage -f auto -A arm64 -T kernel -C lz4 -d Image.lz4 -b mt8173-elm-hana.dtb Image.dtb&lt;/samp&gt;
(naturally, here the architecture defaults to PowerPC; the kernel must already be pre-LZ4ed &lt;em&gt;and&lt;/em&gt; not a pipe)
produces &lt;samp class=&quot;path&quot;&gt;Image.dtb&lt;/samp&gt;, which, after decompilation, looks like
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside&quot;&gt;
&lt;pre class=&quot;language-dts&quot;&gt;&lt;code class=&quot;language-dts&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;/dts-v1/&lt;/span&gt;;

/ {
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;timestamp = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x65c03b5b&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;description = &lt;span class=&quot;token string&quot;&gt;&quot;Kernel Image image with one or more FDT blobs&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;creator = &lt;span class=&quot;token string&quot;&gt;&quot;U-Boot mkimage 2023.01&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;#address-cells = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x01&lt;/span&gt;&gt;;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;images {

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;kernel-1 {
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;description = [00];
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;type = &lt;span class=&quot;token string&quot;&gt;&quot;kernel&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;arch = &lt;span class=&quot;token string&quot;&gt;&quot;arm64&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;os = &lt;span class=&quot;token string&quot;&gt;&quot;linux&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;compression = &lt;span class=&quot;token string&quot;&gt;&quot;lz4&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;load = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;entry = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;data = [04 22 4d 18 …];

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;hash-1 {
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;value = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0x9e4dfdd9&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;algo = &lt;span class=&quot;token string&quot;&gt;&quot;crc32&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;};
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;};

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;fdt-1 {
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;description = &lt;span class=&quot;token string&quot;&gt;&quot;mt8173-elm-hana&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;data = [d0 0d fe ed …];
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;type = &lt;span class=&quot;token string&quot;&gt;&quot;flat_dt&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;arch = &lt;span class=&quot;token string&quot;&gt;&quot;arm64&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;compression = &lt;span class=&quot;token string&quot;&gt;&quot;none&quot;&lt;/span&gt;;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;hash-1 {
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;value = &amp;lt;&lt;span class=&quot;token number&quot;&gt;0xae9f8591&lt;/span&gt;&gt;;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;algo = &lt;span class=&quot;token string&quot;&gt;&quot;crc32&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;};
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;};
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;};

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;configurations {
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;default = &lt;span class=&quot;token string&quot;&gt;&quot;conf-1&quot;&lt;/span&gt;;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;conf-1 {
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;description = &lt;span class=&quot;token string&quot;&gt;&quot;mt8173-elm-hana&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;kernel = &lt;span class=&quot;token string&quot;&gt;&quot;kernel-1&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;loadables = &lt;span class=&quot;token string&quot;&gt;&quot;kernel-1&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;fdt = &lt;span class=&quot;token string&quot;&gt;&quot;fdt-1&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;};
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;};
};
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
(note the differences from &lt;a href=&quot;#kernal&quot;&gt;ChromeOS'&lt;!--'--&gt;s&lt;/a&gt; –
 both are hashed, but with CRC32;
 IDs delimited with &lt;samp&gt;-&lt;/samp&gt;es instead of &lt;samp&gt;@&lt;/samp&gt;s).
The type is &lt;samp&gt;kernel&lt;/samp&gt; rather than &lt;samp&gt;kernel_noload&lt;/samp&gt; (&lt;q&gt;&lt;tt&gt;Kernel Image (no loading done)&lt;/tt&gt;&lt;/q&gt;)
because if you use &lt;samp&gt;kernel_noload&lt;/samp&gt; then it doesn'&lt;!--'--&gt;t boot because it calls the node &lt;tt&gt;kernel_noload-1&lt;/tt&gt;.
You could decompile/re-tag to &lt;samp&gt;type = &quot;kernel_noload&quot;&lt;/samp&gt;/recompile to match ChromeOS, which works,
and &lt;a href=&quot;//sources.debian.org/src/depthcharge-tools/0.6.2-1/depthcharge_tools/mkdepthcharge.py/#L860&quot;&gt;mkdepthcharge appears convinced is required&lt;/a&gt;,
but it doesn'&lt;!--'--&gt;t appear to change anything,
and &lt;samp&gt;-T kernel&lt;/samp&gt; just works.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This makes the final kernel installation look like
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing-inside&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;lz4 &lt;span class=&quot;token parameter variable&quot;&gt;-9&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;./arch/arm64/boot/Image &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; Image.lz4&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;mkimage &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt; auto &lt;span class=&quot;token parameter variable&quot;&gt;-A&lt;/span&gt; arm64 &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;-T&lt;/span&gt; kernel &lt;span class=&quot;token parameter variable&quot;&gt;-C&lt;/span&gt; lz4 &lt;span class=&quot;token parameter variable&quot;&gt;-d&lt;/span&gt; Image.lz4 &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;-b&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;./arch/arm64/boot/dts/mediatek/mt8173-elm-hana.dtb &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Image.dtb&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;FIT description: Kernel Image image with one or more FDT blobs
Created:&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;Mon Feb&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;5 01:17:41 2024
 Image 0 (kernel-1)
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Description:
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Created:&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;Mon Feb&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;5 01:17:41 2024
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Type:&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;Kernel Image
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Compression:&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;lz4 compressed
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Data Size:&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;12611929 Bytes = 12316.34 KiB = 12.03 MiB
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Architecture: AArch64
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;OS:&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;Linux
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Load Address: 0x00000000
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Entry Point:&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0x00000000
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Hash algo:&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;crc32
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Hash value:&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;03808745
 Image 1 (fdt-1)
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Description:&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;mt8173-elm-hana
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Created:&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;Mon Feb&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;5 01:17:41 2024
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Type:&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;Flat Device Tree
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Compression:&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;uncompressed
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Data Size:&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;43853 Bytes = 42.83 KiB = 0.04 MiB
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Architecture: AArch64
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Hash algo:&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;crc32
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Hash value:&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;ae9f8591
 Default Configuration: '&lt;!--'--&gt;conf-1'&lt;!--'--&gt;
 Configuration 0 (conf-1)
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Description:&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;mt8173-elm-hana
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Kernel:&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;kernel-1
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;FDT:&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;fdt-1
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Loadables:&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;kernel-1

&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;\0'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; bootloader&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token assign-left variable&quot;&gt;root&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;PARTLABEL&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;chwast-root rootwait &lt;span class=&quot;token assign-left variable&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;pstore-1 &lt;span class=&quot;token assign-left variable&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;tty1 &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; cmdline&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;vbutil_kernel &lt;span class=&quot;token parameter variable&quot;&gt;--pack&lt;/span&gt; /dev/disk/by-partlabel/chwast-root &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;--keyblock&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;/usr/share/vboot/devkeys/kernel.keyblock &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;--signprivate&lt;/span&gt; /usr/share/vboot/devkeys/kernel_data_key.vbprivk &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;--version&lt;/span&gt;&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;--vmlinuz&lt;/span&gt;&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;Image.dtb &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;--bootloader&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;bootloader &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;--config&lt;/span&gt;&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;cmdline &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token parameter variable&quot;&gt;--arch&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;arm64&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
which provides for a &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/boot/&quot;&gt;roughly-normal &lt;samp class=&quot;path&quot;&gt;/boot&lt;/samp&gt;&lt;/a&gt;
and a &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/boot/bundle&quot;&gt;simple installation script&lt;/a&gt;,
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;language-plaintext continuation&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;18M 02-04 21:36 mandeb+initrd+1+tabs2+reg+drm+adc+d_t_c-initrd&amp;mwifiex+mmc1-sdr.dtb
13M 02-05 04:24 6.6.11.bundle&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
The firmware, which logged
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot; style=&quot;position: relative;&quot;&gt;&lt;pre class=&quot;continuing language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/new.log&quot;&gt;&lt;aside&gt;full /sys/firmware/log&lt;/aside&gt;&lt;/a&gt;Boot policy: Match for type 0 with cmdline 1
Modified kernel command line: cros_secure console= loglevel=7 init=/sbin/init cros_secure drm.trace=0x106 root=PARTUUID=ccfe5bd8-bbe4-a840-9c0b-bba6427b6309/PARTNROFF=1 rootwait rw dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=0 dm=&quot;1 vroot none ro 1,0 4077568 verity payload=ROOT_DEV hashtree=#_DEV hashstart=4077568 alg=sha256 root_hexdigest=59f5ac907dd5cfa3f6fdef15b166c94065a41ef4abfd0d9c68db6ef4a2f62a68 salt=05e2c9a8dc172bc5efe0c899186b436bb89609a064eabcaeb5ec07441cf2a122&quot; noinitrd vt.global_cursor_default=0 kern_guid=ccfe5bd8-bbe4-a840-9c0b-bba6427b6309 cpuidle.governor=teo
Loading FIT.
Image fdt@54 has 61778 bytes.
…
Image fdt@1 has 8174 bytes.
Image kernel@1 has 8706585 bytes.
Compat preference: google,hana-rev5
Config conf@54, kernel kernel@1, fdt fdt@54, compat google,willow-sku1 google,willow mediatek,mt8183
…
Config conf@9, kernel kernel@1, fdt fdt@9, compat google,hana-rev6 google,hana-rev5 &lt;span class=&quot;token bold&quot;&gt;(match)&lt;/span&gt; google,hana-rev4 google,hana-rev3 google,hana-rev2 google,hana-rev1 google,hana mediatek,mt8173
…
Config conf@1, kernel kernel@1, fdt fdt@1, compat mediatek,mt2712-evb mediatek,mt2712
Choosing best match conf@9.
Shutting down all USB controllers.
Exiting depthcharge with code 4 at timestamp: 5889734
Decompressing LZ4 kernel to 0x40080000
jumping to kernel&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
now logs
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot; style=&quot;position: relative;&quot;&gt;&lt;pre class=&quot;continuation language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/newkernel/6.6.11.sys-firmware-log&quot;&gt;&lt;aside&gt;full /sys/firmware/log&lt;/aside&gt;&lt;/a&gt;&lt;span class=&quot;token comment&quot;&gt;Boot policy: Match for type 0 with cmdline 1&lt;/span&gt;
Modified kernel command line: cros_secure root=PARTLABEL=chwast-root rootwait console=pstore-1 console=tty1
&lt;span class=&quot;token comment&quot;&gt;Loading FIT.&lt;/span&gt;
Image fdt-1 has 43853 bytes.
Image kernel-1 has 12611929 bytes.
&lt;span class=&quot;token comment&quot;&gt;Compat preference: google,hana-rev5&lt;/span&gt;
Config conf-1 (default), kernel kernel-1, fdt fdt-1, compat google,hana-rev6 google,hana-rev5 &lt;span class=&quot;token bold&quot;&gt;(match)&lt;/span&gt; google,hana-rev4 google,hana-rev3 google,hana mediatek,mt8173
Choosing best match conf-1.
&lt;span class=&quot;token comment&quot;&gt;Shutting down all USB controllers.&lt;/span&gt;
Exiting depthcharge with code 4 at timestamp: 2759765
&lt;span class=&quot;token comment&quot;&gt;Decompressing LZ4 kernel to 0x40000000
jumping to kernel&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;miscellanea&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#miscellanea&quot;&gt;#&lt;/a&gt; Miscellanea:&lt;/h2&gt;
&lt;ul style=&quot;padding-left: 0;&quot;&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/dev/rtc0&lt;/samp&gt; wasn'&lt;!--'--&gt;t set to a physical time at all (2024-01-06 on 2024-01-31).
     It doesn't have to be, and it doesn't matter,
     but it was surprising when firefox complained it was too out-of-date to do TLS just days after recording the video where it did TLS.&lt;/li&gt;
 &lt;li&gt;If already suspended, shutting the lid switch wakes up.&lt;/li&gt;
 &lt;li&gt;The battery (SBS driver – &lt;code&gt;&quot;sbs-%s&quot;&lt;/code&gt;) reports time-to-empty and time-to-full in seconds.
     The APM driver (&lt;code&gt;&quot;BAT%d&quot;&lt;/code&gt;, commonly used on x86) reports them in minutes.
     As the only manifestation of the amd64 monoculture I really encountered,
     userspace software may not expect this,
     and &lt;a href=&quot;//github.com/i3/i3status/issues/521&quot;&gt;i3status reports 974 hours to drain and 1032:15 to charge&lt;/a&gt;.&lt;/li&gt;
 &lt;li&gt;In addition to the aforementioned, &lt;a href=&quot;//chromium.googlesource.com/chromiumos/docs/+/HEAD/debug_buttons.md#devices-with-keyboards&quot;&gt;&lt;cite&gt;Debug Button Shortcuts&lt;/cite&gt;&lt;/a&gt;'&lt;!--'--&gt; &lt;span style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔊&lt;/kbd&gt;+&lt;kbd&gt;h&lt;/kbd&gt;&lt;/span&gt; appears to power off the device instantly;
     none of the other shortcuts appear to do anything, and &lt;span style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔊&lt;/kbd&gt;&lt;/span&gt; doesn'&lt;!--'--&gt;t appear to be &lt;q&gt;the &lt;a href=&quot;//www.kernel.org/doc/html/latest/admin-guide/sysrq.html&quot;&gt;Magic SysRq&lt;/a&gt; key&lt;/q&gt; at all.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;install-guide&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#install-guide&quot;&gt;#&lt;/a&gt; How to get Debian on your Google Hana 2023 (real (working (no virus)))&lt;/h2&gt;
&lt;ol class=&quot;bigcode&quot; style=&quot;padding-left: 1em;&quot;&gt;
 &lt;li&gt;Partition an SD card with &lt;a href=&quot;#kernal&quot;&gt;a &quot;ChromeOS kernel&quot;-type partition with type-specific GUID bits 56 (Successful Boot Flag) and 48 (priority 1) set&lt;/a&gt;
    and some space for the rootfs
     (&lt;a href=&quot;#7install&quot;&gt;similarly to how the installed state looks&lt;/a&gt;)&lt;/li&gt;
 &lt;li&gt;Strap or install an arm64 to that rootfs (ext[234], or set &lt;code&gt;CONFIG_XFS=y&lt;/code&gt; or whatever in the config below); mount on &lt;samp class=&quot;path&quot;&gt;/mnt&lt;/samp&gt;&lt;/li&gt;
 &lt;li&gt;&lt;code&gt;apt source linux&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;Generate the Debian config (à la &lt;code&gt;cp /boot/config-6.6.11-arm64 .config&lt;/code&gt;; paths per &lt;samp class=&quot;path&quot;&gt;debian/rules.gen&lt;/samp&gt;):
     &lt;pre class=&quot;continuing&quot; style=&quot;padding-left: 1em; overflow: auto;&quot;&gt;&lt;code&gt;debian/bin/kconfig.py .config debian/config/config debian/config/arm64/config
make ARCH=arm64 olddefconfig &lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
 &lt;li&gt;&lt;code&gt;scripts/kconfig/merge_config.sh -m .config &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/boot/config-6.6.11.diff-m&quot;&gt;config-6.6.11.diff-m&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;&lt;code style=&quot;white-space: pre-wrap;&quot;&gt;patch -p1 &lt; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/patches/mwifiex.patch&quot;&gt;mwifiex.patch&lt;/a&gt;&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;# &lt;a href=&quot;#speedrun&quot;&gt;warning backtrace&lt;/a&gt;; from &lt;a href=&quot;//lore.kernel.org/lkml/59378600-8d36-4958-8882-fa693fcad4d6@yandex.ru/t/#u&quot;&gt;Dmitry Antipov&lt;/a&gt;, though the patch in the mail is damaged&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;&lt;code style=&quot;white-space: pre-wrap;&quot;&gt;patch -p1 &lt; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/patches/mt8173-fix-mmc1-speed.patch&quot;&gt;mt8173-fix-mmc1-speed.patch&lt;/a&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &lt;a href=&quot;#speedrun&quot;&gt;oops when using SDR104 cards&lt;/a&gt;; from &lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-fix-mmc1-speed.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-fix-mmc1-speed.patch&lt;/samp&gt;&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;&lt;code style=&quot;white-space: pre-wrap;&quot;&gt;patch -p1 &lt; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/patches/mt8173-higher-temps.patch&quot;&gt;mt8173-higher-temps.patch&lt;/a&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;# &lt;a href=&quot;#foreign-config&quot;&gt;&lt;q&gt;raise temps for elm a bit&lt;/q&gt;&lt;/a&gt;;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;from &lt;a href=&quot;https://github.com/hexdump0815/linux-mainline-mediatek-mt81xx-kernel/blob/ef833e9d47339e2841afc4638b87180fade207e0/misc.cbm/patches/v6.6/mt8173-higher-temps.patch&quot;&gt;&lt;samp class=&quot;path&quot;&gt;mt8173-higher-temps.patch&lt;/samp&gt;&lt;/a&gt;&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;&lt;code&gt;make ARCH=arm64 Image modules dtbs&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;&lt;code&gt;make ARCH=arm64 modules_install INSTALL_MOD_PATH=/mnt INSTALL_MOD_STRIP=1&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;&lt;code&gt;lz4 -9 &lt; arch/arm64/boot/Image &gt; /mnt/boot/Image-&lt;var&gt;6.6.11&lt;/var&gt;.lz4&lt;/code&gt; (or whatever the version)&lt;/li&gt;
 &lt;li&gt;&lt;code&gt;cp arch/arm64/boot/dts/mediatek/mt8173-elm-hana.dtb /mnt/boot/mt8173-elm-hana-&lt;var&gt;6.6.11&lt;/var&gt;.dtb&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;In &lt;samp class=&quot;path&quot;&gt;/mnt/boot&lt;/samp&gt;: &lt;code&gt;echo console=pstore-1 console=tty1 rootwait root=&lt;var&gt;as appropriate for the rootfs&lt;/var&gt; &gt; cmdline&lt;/code&gt; &amp;c.&lt;/li&gt;
 &lt;li&gt;With u-boot-tools and vboot-kernel-utils (very much &lt;samp&gt;--no-install-recommends&lt;/samp&gt;ed): &lt;code&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/boot/bundle&quot;&gt;./bundle&lt;/a&gt; &lt;var&gt;6.6.11&lt;/var&gt; &gt; /dev/&lt;var&gt;the-kernel-partition&lt;/var&gt;&lt;/code&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html#jailbreak&quot;&gt;Developer-mode-ify the Chromebook&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;Insert the SD card and press &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;u&lt;/kbd&gt; to boot&lt;/li&gt;
 &lt;li&gt;See the &lt;a href=&quot;#install&quot;&gt;&lt;cite class=&quot;local-ref&quot;&gt;installing Debian&lt;/cite&gt;&lt;/a&gt; sexion for booting the same from the eMMC&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;functional-summary&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#functional-summary&quot;&gt;#&lt;/a&gt; Funxional summary&lt;/h2&gt;
&lt;h3 id=&quot;functional-summary-functional&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#functional-summary-functional&quot;&gt;#&lt;/a&gt; Funxional&lt;/h3&gt;
&lt;ul style=&quot;padding-left: 0;&quot;&gt;
 &lt;li&gt;CPU/RAM/&amp;c.&lt;/li&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/sys/firmware/log&lt;/samp&gt; &amp; &lt;samp class=&quot;path&quot;&gt;/sys/fs/pstore&lt;/samp&gt;&lt;/li&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/sys/class/power_supply/sbs-6-000b&lt;/samp&gt; (the battery)&lt;/li&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/sys/class/power_supply/CROS_USBPD_CHARGER0&lt;/samp&gt; (the charger) @ 15V/2A (max 3A)&lt;/li&gt;
 &lt;li&gt;eMMC&lt;/li&gt;
 &lt;li&gt;SD card (with mt8173-fix-mmc1-speed.patch) to make SDR104-speed cards not oops)&lt;/li&gt;
 &lt;li&gt;USBs&lt;/li&gt;
 &lt;li&gt;Wi-Fi (WPA2 iwd)&lt;/li&gt;
 &lt;li&gt;Bluetooth&lt;/li&gt;
 &lt;li&gt;Audio: speakers, headphones (ALSA and pipewire)&lt;/li&gt;
 &lt;li&gt;framebuffer, X.Org, &amp;c.&lt;/li&gt;
 &lt;li&gt;screen (&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0018-debian-chromebook-lenovo-300e-gen2-mtk-real/probes/edid&quot;&gt;EDID&lt;/a&gt; says it'&lt;!--'--&gt;s the same exact device as the x86 platform) and accoutrements&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;hid&quot;&gt;keyboard and side buttons&lt;/a&gt;; &lt;a href=&quot;#miscellanea&quot;&gt;lid switch&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;touchpad (&lt;a href=&quot;#hid-touchpad&quot;&gt;one button only&lt;/a&gt;, 3-way multitouch)&lt;/li&gt;
 &lt;li&gt;touchscreen (10-way multitouch)&lt;/li&gt;
 &lt;li&gt;webcam (it'&lt;!--'--&gt;s the same exact device as the Intel-processor 300e)&lt;/li&gt;
 &lt;li&gt;&lt;samp class=&quot;path&quot;&gt;/dev/rtc0&lt;/samp&gt;&lt;/li&gt;
 &lt;li&gt;&lt;details&gt;
     &lt;summary&gt;sensors&lt;/summary&gt;
     &lt;pre class=&quot;continuing&quot;&gt;&lt;!--&quot;--&gt;sbs_6_000b-i2c-6-0b&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Adapter: cros-ec-i2c-tunnel&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;in0:          11.37 V&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;temp:         +22.6°C&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;curr1:       -386.00 mA (avg =  -0.38 A)&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;cpu_thermal-virtual-0&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Adapter: Virtual device&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;temp1:        +45.6°C&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;CROS_USBPD_CHARGER0-isa-0000&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;Adapter: ISA adapter&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;in0:           0.00 V&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;curr1:            N/A  (max =  +0.00 A)&lt;!--&quot;--&gt; &lt;/pre&gt;&lt;/details&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;functional-summary-dysfunctional&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#functional-summary-dysfunctional&quot;&gt;#&lt;/a&gt; Dysfunxional&lt;/h3&gt;
&lt;ul style=&quot;padding-left: 0;&quot;&gt;
 &lt;li&gt;Audio: internal mic (it'&lt;!--'--&gt;s possible mine is just broken), headset mic (when clicking the mic button on one headset I got clicks but nothing past that)&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;#hdmi&quot;&gt;&lt;cite class=&quot;local-ref&quot;&gt;&lt;abbr title=&quot;Horny Demon Mangling Interface&quot;&gt;HDMI&lt;/abbr&gt;&lt;/cite&gt;&lt;/a&gt; (shows up as a video and audio output, never pops up with any available resolutions, connected display never sees a signal); &lt;em id=&quot;update-2025-09-13&quot;&gt;actually&lt;/em&gt;: the &lt;code&gt;HDMI-1&lt;/code&gt; output corresponds to the USB Type-C DisplayPort alt-mode, which works (at least the video does, haven't tried audio)! this implies to me that a valid driver for &lt;samp&gt;gpio-display-mux&lt;/samp&gt; would probably fix this&lt;/li&gt;
 &lt;li&gt;Tablet mode switch (which would disable the keyboard) doesn'&lt;!--'--&gt;t seem to exist&lt;/li&gt;
 &lt;li&gt;Hibernation (loads image for a bit then blackscreens, no pstore)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;summary&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#summary&quot;&gt;#&lt;/a&gt; Summary&lt;/h2&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
A successful non-invasive reversible methodology to install Debian on a presently-still-novel ARM64 Chromebook platform,
all possible because the MT8173 platform is well-supported by Linux and because the elm/hana platform is reasonably-supported by Linux
(sans the &lt;a href=&quot;#hdmi&quot;&gt;&lt;cite class=&quot;local-ref&quot;&gt;&lt;abbr title=&quot;Horny Demon Mangling Interface&quot;&gt;HDMI&lt;/abbr&gt;&lt;/cite&gt;&lt;/a&gt; thing).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
A top-down and bottom-up analysis of the Chromebook bootloader stack with effectively no a priori knowledge,
and attempts at replication of various documentation showing mostly negative results.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
1.94W idle (at a reasonable indoor backlight brightess) is the lowest power consumption I'&lt;!--'--&gt;ve seen on a computer.
This is maintained at around 2.3W during static web browsing,
and extends to &gt;12h projected times-to-empty at around 70% battery capacity (~23h at ~100%)..
There are no hardware accelerators that Firefox understands; there'&lt;!--'--&gt;s no OpenGL; fullscreen glxgears (llvmpipe) gets 57FPS, half-screen gets 140FPS, both at around 7W.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Issues identified (chronological order):
&lt;/p&gt;
&lt;ol style=&quot;padding-left: 0;&quot;&gt;
 &lt;!--2024-01-13T22:35--&gt;&lt;li&gt;&lt;a href=&quot;//lore.kernel.org/util-linux/utso6yacwbluj5pou2vwllxfb5dxmhbly5qaumlshga3o5fbgg@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;[PATCH] libfdisk: fdisk_deassign_device: only sync(2) blockdevs&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-01-18T19:11--&gt;&lt;li&gt;&lt;a href=&quot;//lore.kernel.org/util-linux/utso6yacwbluj5pou2vwllxfb5dxmhbly5qaumlshga3o5fbgg@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;[PATCH] gpt-partnames: add &quot;ChromeOS firmware&quot; &amp; doc link&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-01-22T20:20--&gt;&lt;li&gt;&lt;a href=&quot;//bugs.debian.org/1061329&quot;&gt;Bug#1061329: /usr/bin/futility: &quot;FATAL: do_vbutil_kernel: Error reading bootloader file.&quot; when --bootloader points to empty file&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-01-26T03:46--&gt;&lt;li&gt;&lt;a href=&quot;//bugs.debian.org/1061537&quot;&gt;Bug#1061537: kexec-tools: non-text error output&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-01-26T19:47--&gt;&lt;li&gt;&lt;a href=&quot;//lore.kernel.org/lkml/xebnh5c5rnfequ6khyhieugefrtt5mdftr6rsw522ocpg3yvln@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;memcpy: detected field-spanning write (size 101) of single field &quot;ext_scan-&gt;tlv_buffer&quot; at drivers/net/wireless/marvell/mwifiex/scan.c:2251 (size 1)&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-01-28T05:53--&gt;&lt;li&gt;&lt;a href=&quot;//lore.kernel.org/lkml/lq6gstev3sd7i4iw2btiq3gg7lhsraj5w74fkbp6lpbl6nkyff@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;[PATCH] spi: Kconfig: cap[c]ability&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-01-31T19:23--&gt;&lt;li&gt;&lt;a href=&quot;//bugs.debian.org/1062208&quot;&gt;Bug#1062208: /usr/sbin/fsck: exits 0 with no output (just version) when it doesn'&lt;!--'--&gt;t find a type-specific fsck&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-01-31T19:47--&gt;&lt;li&gt;&lt;a href=&quot;//bugs.debian.org/1062213&quot;&gt;Bug#1062213: /usr/bin/wpctl: &quot;status&quot; draws output table with garbage&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-01-31T21:09--&gt;&lt;li&gt;&lt;a href=&quot;//bugs.debian.org/1062262&quot;&gt;Bug#1062262: pipewire-alsa: adversarial description&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-02-03T20:49--&gt;&lt;li&gt;&lt;a href=&quot;//github.com/systemd/systemd/issues/31199&quot;&gt;#31199: systemd-gpt-auto-generator automatically generates units, manual says it oughtn'&lt;!--'--&gt;t on the count of (a) not being EFI and (b) not/or having an ESP&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-02-04T02:35--&gt;&lt;li&gt;&lt;a href=&quot;//github.com/i3/i3status/issues/521&quot;&gt;#521: Bogus battery time left (nine hundred hours) – POWER_SUPPLY_TIME_TO_EMPTY_NOW taken as minutes when it is seconds: driver compatibility?&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-02-04T02:44--&gt;&lt;li&gt;&lt;a href=&quot;//github.com/i3/i3status/pull/522&quot;&gt;#522: man: . at end of sentence&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-02-04T03:00--&gt;&lt;li&gt;&lt;a href=&quot;//github.com/i3/i3status/issues/523&quot;&gt;#523: Neither &quot;battery all&quot; nor &quot;battery sbs-6-000b&quot; work&lt;/a&gt;&lt;/li&gt;
 &lt;!--2024-02-05T03:24--&gt;&lt;li&gt;&lt;a href=&quot;//bugs.debian.org/1063097&quot;&gt;Bug#1063097: /usr/bin/mkimage: opens image and device trees (-d, -b) O_RDONLY, then O_RDWR, and fails if they're read-only (it doesn't write to them)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;bigcode&quot;&gt;&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;13M 02-06 19:18 6.6.15.bundle&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p class=&quot;indented&quot;&gt;
25 straight days well spent on &lt;!-- 320h :v --&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/snappy-tools/commit/9628372ce87270213c7b4b3aacf869a5d063049c&quot;&gt;commit 9628372: Add hardware-accellerated crc32c() for ARM64&lt;/a&gt;.
&lt;br /&gt;
Buy &lt;a href=&quot;//nabijaczleweli.bandcamp.com/album/fluorescent-heart&quot;&gt;my album&lt;/a&gt; buy &lt;a href=&quot;//store.nabijaczleweli.xyz/&quot;&gt;my stickers&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/012b-debian-chromebook-lenovo-300e-gen2-mtk-real.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html" />
    <title> 012a. Installing Debian on the Lenovo 300e 2nd-gen Chromebook (Intel) — blognꞌt — nabijaczleweli </title>
    <updated>2024-01-11T04:04:28+01:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;012a. Installing Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen Chromebook (Intel)&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Thu, 11 Jan 2024 04:04:28 +0100&lt;/span&gt;, updated Thu, 11 Jan 2024 21:38:02 +0100&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#firmware'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/&quot;&gt;Firmware &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#firmware-finding-system-info'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/system-info.html&quot;&gt;Finding System Info &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#firmware-known-issues'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/known-issues.html&quot;&gt;Known Issues &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#firmware-known-issues-firmware'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/known-issues.html#firmware&quot;&gt;Firmware &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#firmware-enabling-developer-mode'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/developer-mode.html&quot;&gt;Enabling developer mode &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#firmware-disabling-write-protect'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/write-protect.html&quot;&gt;Disabling write protect &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#firmware-types-of-firmware'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/about.html&quot;&gt;Types of Firmware &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#firmware-types-of-firmware-RW_LEGACY'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/about.html#rw-legacy&quot;&gt;RW_LEGACY &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#firmware-types-of-firmware-UEFI'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/about.html#uefi-full-rom&quot;&gt;(UEFI) Full ROM &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#firmware-disabling-write-protect2'&gt;(Back to) Disabling write protect&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#firmware-disabling-write-protect-unplugging-the-battery'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/battery.html&quot;&gt;Disabling write protect via Battery &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#firmware-disabling-write-protect-unplugging-the-battery-step-1-open-the-device-and-disconnect-the-battery'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/battery.html#step-1-open-the-device-and-disconnect-the-battery&quot;&gt;Step 1: Open the device and disconnect the battery &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#firmware-disabling-write-protect-unplugging-the-battery-step-2-boot-using-ac-power-and-flash'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/battery.html#step-2-boot-using-ac-power-and-flash&quot;&gt;Step 2: Boot using AC power, and flash. &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#firmware-flashing-custom-firmware'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/flashing-firmware.html&quot;&gt;Flashing Custom Firmware &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#installing'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/&quot;&gt;Installing an OS &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#installing-known-issues'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/known-issues.html&quot;&gt;Known Issues &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#installing-known-issues-linux'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/known-issues.html#linux&quot;&gt;Linux &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#installing-making-a-bootable-usb'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/bootableusb.html&quot;&gt;Making a Bootable USB &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#installing-making-a-bootable-usb-flashing-with-dd-linux-macos'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/bootableusb.html#flashing-with-dd-linux-macos&quot;&gt;Flashing with dd (Linux/macOS) &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#installing-installing-linux'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html&quot;&gt;Installing Linux &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#installing-installing-linux-recommended-distributions'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html#recommended-distributions&quot;&gt;Recommended Distributions &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#installing-installing-linux-installation'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html#installation&quot;&gt;Installation &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#installing-installing-linux-fixing-audio'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html#fixing-audio&quot;&gt;Fixing Audio &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#installing-installing-linux-fixing-audio2'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html#fixing-audio-1&quot;&gt;Fixing Audio &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#installing-post-install'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/post-install.html&quot;&gt;Post Install &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#installing-post-install-linux'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/post-install.html#linux&quot;&gt;Linux &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#installing-post-install-linux-general-qol-fixes'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/post-install.html#general-qol-fixes&quot;&gt;General QOL Fixes &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#installing-post-install-linux-celes-post-install-workaround'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/post-install.html#celes-post-install-workaround-1&quot;&gt;CELES Post Install Workaround &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#installing-using-ectool'&gt;&lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/ectool.html&quot;&gt;Using Ectool &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#conclusions'&gt;Conclusions&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#conclusions-pog-moments'&gt;pog moments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#conclusions-cringe-moments'&gt;cringe-ass nae-nae baby moments&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#conclusions-funny-moments'&gt;family guy funny moments&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
This &lt;a href=&quot;//web.archive.org/web/20231113233836/sites.google.com/a/chromium.org/dev/chromium-os/developer-information-for-chrome-os-devices&quot;&gt;concerns&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div&gt;&lt;dt&gt;Release&lt;/dt&gt;&lt;dd &gt;1 March 2019&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;OEM&lt;/dt&gt;&lt;dd &gt;Lenovo&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Model&lt;/dt&gt;&lt;dd &gt;&lt;a href=&quot;//web.archive.org/web/20231113233836/sites.google.com/a/chromium.org/dev/chromium-os/Lenovo%20300e%20Chromebook%202nd%20Gen%20(Intel)&quot;&gt;Lenovo 300e Chromebook 2nd Gen (Intel)&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Code name&lt;/dt&gt;&lt;dd &gt;Phaser360&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Board name(s)&lt;/dt&gt;&lt;dd&gt;Octopus&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Base board&lt;/dt&gt;&lt;dd &gt;octopus&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;User ABI&lt;/dt&gt;&lt;dd &gt;x86_64&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Kernel&lt;/dt&gt;&lt;dd &gt;4.14&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Kernel ABI&lt;/dt&gt;&lt;dd &gt;x86_64&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Platform&lt;/dt&gt;&lt;dd &gt;Gemini Lake&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Form Factor&lt;/dt&gt;&lt;dd &gt;Convertible&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;First Release&lt;/dt&gt;&lt;dd&gt;R72&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
which Lenovo tricked me into getting in
&lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html&quot;&gt;&lt;samp&gt;012. Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen arm64 Chromebook&lt;/samp&gt;&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
But because it'&lt;!--'--&gt;s an Intel platform with a Celeron N4000 and 4G of LPDDR4-2400 you can install Debian on it, at least hypothetically.
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token output&quot;&gt;Script started on 2022-10-10 19:32:11+02:00 [TERM=&quot;xterm&quot; TTY=&quot;/dev/pts/1&quot; COLUMNS=&quot;170&quot; LINES=&quot;48&quot;]
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;uname&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-a&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Linux localhost 4.14.290-19334-gd1f3f46afcb0 #1 SMP PREEMPT Wed Oct 5 13:43:48 PDT 2022 x86_64 Intel(R) Celeron(R) N4000 CPU @ 1.10GHz GenuineIntel GNU/Linux
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;lscpu&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Architecture:&lt;!--&quot;--&gt;                    &lt;!--&quot;--&gt;x86_64
CPU op-mode(s):&lt;!--&quot;--&gt;                  &lt;!--&quot;--&gt;32-bit, 64-bit
Byte Order:&lt;!--&quot;--&gt;                      &lt;!--&quot;--&gt;Little Endian
Address sizes:&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;39 bits physical, 48 bits virtual
CPU(s):&lt;!--&quot;--&gt;                          &lt;!--&quot;--&gt;2
On-line CPU(s) list:&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;0,1
Thread(s) per core:&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;1
Core(s) per socket:&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;2
Socket(s):&lt;!--&quot;--&gt;                       &lt;!--&quot;--&gt;1
Vendor ID:&lt;!--&quot;--&gt;                       &lt;!--&quot;--&gt;GenuineIntel
CPU family:&lt;!--&quot;--&gt;                      &lt;!--&quot;--&gt;6
Model:&lt;!--&quot;--&gt;                           &lt;!--&quot;--&gt;122
Model name:&lt;!--&quot;--&gt;                      &lt;!--&quot;--&gt;Intel(R) Celeron(R) N4000 CPU @ 1.10GHz
Stepping:&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;1
CPU MHz:&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;2517.724
CPU max MHz:&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;2600.0000
CPU min MHz:&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;800.0000
BogoMIPS:&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;2188.80
Virtualization:&lt;!--&quot;--&gt;                  &lt;!--&quot;--&gt;VT-x
L1d cache:&lt;!--&quot;--&gt;                       &lt;!--&quot;--&gt;48 KiB
L1i cache:&lt;!--&quot;--&gt;                       &lt;!--&quot;--&gt;64 KiB
L2 cache:&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;4 MiB
Vulnerability Itlb multihit:&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;Not affected
Vulnerability L1tf:&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;Not affected
Vulnerability Mds:&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;Not affected
Vulnerability Meltdown:&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;Mitigation; PTI
Vulnerability Mmio stale data:&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;Not affected
Vulnerability Spec store bypass: Mitigation; Speculative Store Bypass disabled via prctl and seccomp
Vulnerability Spectre v1:&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;Mitigation; usercopy/swapgs barriers and __user pointer sanitization
Vulnerability Spectre v2:&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;Mitigation; Enhanced IBRS, IBPB conditional, RSB filling
Vulnerability Srbds:&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;Not affected
Vulnerability Tsx async abort:&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;Not affected
Flags:&lt;!--&quot;--&gt;                           &lt;!--&quot;--&gt;fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscp lm constant_tsc art arch_perfmon pebs bts rep_good nopl xtopology nonstop_tsc cpuid aperfmperf tsc_known_freq pni pclmulqdq dtes64 monitor ds_cpl vmx est tm2 ssse3 sdbg cx16 xtpr pdcm sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer aes xsave rdrand lahf_lm 3dnowprefetch cpuid_fault cat_l2 pti cdp_l2 ssbd ibrs ibpb stibp ibrs_enhanced tpr_shadow vnmi flexpriority ept vpid fsgsbase tsc_adjust smep erms mpx rdt_a rdseed smap clflushopt intel_pt sha_ni xsaveopt xsavec xgetbv1 xsaves dtherm ida arat pln pts umip rdpid md_clear arch_capabilities
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; /proc/cmdline&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;cros_secure console= loglevel=7 init=/sbin/init cros_secure drm.trace=0x106 root=PARTUUID=4b867d4a-3be5-4e4f-b215-69cb5aa8e633/PARTNROFF=1 rootwait rw dm_verity.error_behavior=3 dm_verity.max_bios=-1 dm_verity.dev_wait=0 dm=&quot;1 vroot none ro 1,0 5767168 verity payload=ROOT_DEV hashtree=#_DEV hashstart=5767168 alg=sha256 root_hexdigest=cc2fa57f4ecbb729a7eaf4dfb09b08fbdf81ceeb6405676935640336895953f6 salt=46019327766872fc31e9094de56e080cdd6bd6c3a33f950470861cd7f1faf1e8&quot; noinitrd vt.global_cursor_default=0 kern_guid=4b867d4a-3be5-4e4f-b215-69cb5aa8e633 add_efi_memmap boot=local noresume noswap i915.modeset=1 gsmi.s0ix_logging_enable=1 intel_idle.slp_s0_check=1 intel_idle.slp_s0_seed=15
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;findmnt&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;TARGET&lt;!--&quot;--&gt;                                &lt;!--&quot;--&gt;SOURCE&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;FSTYPE&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;OPTIONS
/&lt;!--&quot;--&gt;                                     &lt;!--&quot;--&gt;/dev/mmcblk0p5&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;ext2
|-/dev&lt;!--&quot;--&gt;                                &lt;!--&quot;--&gt;devtmpfs&lt;!--&quot;--&gt;                           &lt;!--&quot;--&gt;devtmpfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;seclabel,size=1946524k,nr_inodes=486631,mode=755
| |-/dev/shm&lt;!--&quot;--&gt;                          &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,size=1948668k
| `-/dev/pts&lt;!--&quot;--&gt;                          &lt;!--&quot;--&gt;devpts&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;devpts&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;seclabel,gid=5,mode=620,ptmxmode=666
|-/proc&lt;!--&quot;--&gt;                               &lt;!--&quot;--&gt;proc&lt;!--&quot;--&gt;                               &lt;!--&quot;--&gt;proc&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;relatime
|-/sys&lt;!--&quot;--&gt;                                &lt;!--&quot;--&gt;sysfs&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;sysfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel
| |-/sys/fs/selinux&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;selinuxfs&lt;!--&quot;--&gt;                          &lt;!--&quot;--&gt;selinuxfs relatime
| |-/sys/fs/pstore&lt;!--&quot;--&gt;                    &lt;!--&quot;--&gt;pstore&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;pstore&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;seclabel
| |-/sys/kernel/tracing&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;tracefs&lt;!--&quot;--&gt;                            &lt;!--&quot;--&gt;tracefs&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;seclabel
| |-/sys/kernel/debug&lt;!--&quot;--&gt;                 &lt;!--&quot;--&gt;debugfs&lt;!--&quot;--&gt;                            &lt;!--&quot;--&gt;debugfs&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;seclabel,gid=605,mode=750
| | `-/sys/kernel/debug/tracing&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;tracefs&lt;!--&quot;--&gt;                            &lt;!--&quot;--&gt;tracefs&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;seclabel
| |-/sys/kernel/config&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;configfs&lt;!--&quot;--&gt;                           &lt;!--&quot;--&gt;configfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;relatime
| `-/sys/fs/cgroup&lt;!--&quot;--&gt;                    &lt;!--&quot;--&gt;none&lt;!--&quot;--&gt;                               &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
|&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;|-/sys/fs/cgroup/cpu&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;cpu
|&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;|-/sys/fs/cgroup/freezer&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;freezer
|&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;|-/sys/fs/cgroup/devices&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;devices
|&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;|-/sys/fs/cgroup/cpuacct&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;cpuacct
|&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;|-/sys/fs/cgroup/cpuset&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;cpuset,noprefix,cpuset_v2_mode
|&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;`-/sys/fs/cgroup/net_cls&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;cgroup&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;net_cls
|-/tmp&lt;!--&quot;--&gt;                                &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;nosymfollow,seclabel
|-/run&lt;!--&quot;--&gt;                                &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/chromeos-config/private&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;/dev/loop0&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;seclabel
| |-/run/chromeos-config/v1&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;/dev/loop0[/v1/chromeos/configs/5] squashfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;seclabel
| |-/run/namespaces&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;tmpfs[/namespaces]&lt;!--&quot;--&gt;                 &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| | `-/run/namespaces/mnt_chrome&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;nsfs[mnt:[4026532626]]&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;nsfs
| |-/run/daemon-store/appsync-consent tmpfs[/daemon-store/appsync-consent]
| |&lt;!--&quot;--&gt;                                                                      &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/authpolicyd&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;tmpfs[/daemon-store/authpolicyd]&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/cdm-oemcrypto&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;tmpfs[/daemon-store/cdm-oemcrypto] tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/chaps&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;tmpfs[/daemon-store/chaps]&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/crash&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;tmpfs[/daemon-store/crash]&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/crosvm&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;tmpfs[/daemon-store/crosvm]&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/debugd&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;tmpfs[/daemon-store/debugd]&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/dlp&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;tmpfs[/daemon-store/dlp]&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/kerberosd&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;tmpfs[/daemon-store/kerberosd]&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/pvm&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;tmpfs[/daemon-store/pvm]&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/session_manager tmpfs[/daemon-store/session_manager]
| |&lt;!--&quot;--&gt;                                                                      &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/shill&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;tmpfs[/daemon-store/shill]&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/smbfs&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;tmpfs[/daemon-store/smbfs]&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/smbproviderd&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;tmpfs[/daemon-store/smbproviderd]&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/u2f&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;tmpfs[/daemon-store/u2f]&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/uma-consent&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;tmpfs[/daemon-store/uma-consent]&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/daemon-store/usb_bouncer&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;tmpfs[/daemon-store/usb_bouncer]&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/run/debugfs_gpu&lt;!--&quot;--&gt;                  &lt;!--&quot;--&gt;debugfs[/dri/0]&lt;!--&quot;--&gt;                    &lt;!--&quot;--&gt;debugfs&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;seclabel,gid=605,mode=750
| |-/run/imageloader&lt;!--&quot;--&gt;                  &lt;!--&quot;--&gt;imageloader&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| `-/run/netns&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;tmpfs[/netns]&lt;!--&quot;--&gt;                      &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
|&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;|-/run/netns/connected_netns_0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;nsfs[net:[4026532871]]&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;nsfs&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;rw
|&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;`-/run/netns/connected_netns_1&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;nsfs[net:[4026532944]]&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;nsfs&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;rw
|-/mnt/stateful_partition&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;/dev/mmcblk0p1&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;seclabel,discard,resgid=20119,commit=600,data=ordered
| `-/mnt/stateful_partition/encrypted /dev/mapper/encstateful&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;seclabel,discard,commit=600,data=ordered
|-/usr/share/oem&lt;!--&quot;--&gt;                      &lt;!--&quot;--&gt;/dev/mmcblk0p8&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;seclabel,data=ordered
|-/home&lt;!--&quot;--&gt;                               &lt;!--&quot;--&gt;/dev/mmcblk0p1[/home]&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;nosymfollow,seclabel,discard,resgid=20119,commit=600,dat
| `-/home/chronos&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;/dev/mapper/encstateful[/chronos]&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;seclabel,discard,commit=600,data=ordered
|-/var&lt;!--&quot;--&gt;                                &lt;!--&quot;--&gt;/dev/mapper/encstateful[/var]&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;seclabel,discard,commit=600,data=ordered
| |-/var/run&lt;!--&quot;--&gt;                          &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| |-/var/lock&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;tmpfs[/lock]&lt;!--&quot;--&gt;                       &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel,mode=755
| `-/var/cache/dlc-images&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;/dev/mmcblk0p1[/var_overlay/cache/dlc-images]
|&lt;!--&quot;--&gt;                                                                        &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;seclabel,discard,resgid=20119,commit=600,data=ordered
|-/media&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;media&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;seclabel
|-/usr/local&lt;!--&quot;--&gt;                          &lt;!--&quot;--&gt;/dev/mmcblk0p1[/dev_image]&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;rw,nodev,seclabel,discard,resgid=20119,commit=600,data=ordered
|-/usr/share/chromeos-assets/speech_synthesis/patts
|&lt;!--&quot;--&gt;                                     &lt;!--&quot;--&gt;/dev/loop2&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;seclabel
|-/usr/share/chromeos-assets/quickoffice/_platform_specific
|&lt;!--&quot;--&gt;                                     &lt;!--&quot;--&gt;/dev/loop3&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;seclabel
`-/usr/share/cros-camera/libfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;/dev/loop4&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;seclabel
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;df&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-hT&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Filesystem&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;Type&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;Size&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Used Avail Use% Mounted on
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token path&quot;&gt;/dev/root&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;ext2&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;2.8G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;2.4G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;358M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;88&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;/&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;devtmpfs&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;devtmpfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0% /dev
tmpfs&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;60M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.8G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;4% /dev/shm
tmpfs&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;72K&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;1% /tmp
tmpfs&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;704K&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;1% /run
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token path&quot;&gt;/dev/loop0&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;384K&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;384K&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0 100&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;/run/chromeos-config/private&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token path&quot;&gt;/dev/mmcblk0p1&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;21G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;173M&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;20G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;/mnt/stateful_partition&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token path&quot;&gt;/dev/mmcblk0p8&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;12M&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;24K&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;12M&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;/usr/share/oem&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token path&quot;&gt;/dev/mapper/encstateful ext4&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;6.0G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;14M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;6.0G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;/mnt/stateful_partition/encrypted&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;media&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0% /media
none&lt;!--&quot;--&gt;                    &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0% /sys/fs/cgroup
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token path&quot;&gt;/dev/loop2&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;98M&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;98M&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0 100&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;/usr/share/chromeos-assets/speech_synthesis/patts&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;imageloader&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;tmpfs&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.9G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0% /run/imageloader
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token path&quot;&gt;/dev/loop3&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;10M&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;10M&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0 100&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;/usr/share/chromeos-assets/quickoffice/_platform_specific&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token path&quot;&gt;/dev/loop4&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;6.0M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;6.0M&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0 100&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;/usr/share/cros-camera/libfs&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;lsblk&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;NAME&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;MAJ:MIN RM&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;SIZE RO TYPE MOUNTPOINT
loop0&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;7:0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;268K&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1 loop /run/chromeos-config/private
loop1&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;7:1&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;6.1G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 loop
`-encstateful 254:1&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;6.1G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 dm&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;/mnt/stateful_partition/encrypted
loop2&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;7:2&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0 97.3M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 loop /usr/share/chromeos-assets/speech_synthesis/patts
loop3&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;7:3&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;9.2M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 loop /usr/share/chromeos-assets/quickoffice/_platform_specific
loop4&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;7:4&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;6M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1 loop /usr/share/cros-camera/libfs
mmcblk0&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;179:0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0 29.1G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 disk
|-mmcblk0p1&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:1&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0 20.9G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part /mnt/stateful_partition
|-mmcblk0p2&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:2&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;32M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
|-mmcblk0p3&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:3&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;4G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
|-mmcblk0p4&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:4&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;32M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
|-mmcblk0p5&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:5&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;4G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part /
|-mmcblk0p6&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:6&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;512B&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
|-mmcblk0p7&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:7&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;512B&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
|-mmcblk0p8&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:8&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;16M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part /usr/share/oem
|-mmcblk0p9&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;179:9&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;512B&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
|-mmcblk0p10&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;179:10&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;512B&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
|-mmcblk0p11&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;179:11&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;8M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
`-mmcblk0p12&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;179:12&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;32M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 part
mmcblk0boot0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;179:16&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;4M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1 disk
mmcblk0boot1&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;179:32&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;4M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1 disk
zram0&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;253:0&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;5.4G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 disk [SWAP]
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;lsblk &lt;span class=&quot;token parameter variable&quot;&gt;-f&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;NAME&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;FSTYPE&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;LABEL&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;FSAVAIL FSUSE% MOUNTPOINT
loop0&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;100% /run/chromeos-config/private
loop1
`-encstateful ext4&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;5.9G&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0% /mnt/stateful_partition/encrypted
loop2&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;100% /usr/share/chromeos-assets/speech_synthesis/patts
loop3&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;100% /usr/share/chromeos-assets/quickoffice/_platform_specific
loop4&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;squashfs&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;100% /usr/share/cros-camera/libfs
mmcblk0
|-mmcblk0p1&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;19.2G&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;1% /mnt/stateful_partition
|-mmcblk0p2
|-mmcblk0p3&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;ROOT-A
|-mmcblk0p4
|-mmcblk0p5&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;ext2&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;ROOT-A&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;357.3M&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;87% /
|-mmcblk0p6
|-mmcblk0p7
|-mmcblk0p8&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;ext4&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;OEM&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;11.1M&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0% /usr/share/oem
|-mmcblk0p9
|-mmcblk0p10
|-mmcblk0p11
`-mmcblk0p12&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;vfat&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;EFI-SYSTEM
mmcblk0boot0
mmcblk0boot1
zram0&lt;!--&quot;--&gt;                                        &lt;!--&quot;--&gt;[SWAP]
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;losetup&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;NAME&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;AUTOCLEAR RO BACK-FILE&lt;!--&quot;--&gt;                                                 &lt;!--&quot;--&gt;DIO LOG-SEC
/dev/loop1&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 /mnt/stateful_partition/encrypted.block&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;1&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;512
/dev/loop4&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;1&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1 /usr/share/cros-camera/g3_libs.squash&lt;!--&quot;--&gt;                       &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;512
/dev/loop2&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;1&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 /usr/share/chromeos-assets/speech_synthesis/patts.squash&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;512
/dev/loop0&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;1&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1 /usr/share/chromeos-config/configfs.img&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;512
/dev/loop3&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;1&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;0 /usr/share/chromeos-assets/quickoffice/quickoffice.squash&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;512
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;blkid&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;/dev/loop0: TYPE=&quot;squashfs&quot;
/dev/loop2: TYPE=&quot;squashfs&quot;
/dev/loop3: TYPE=&quot;squashfs&quot;
/dev/loop4: TYPE=&quot;squashfs&quot;
/dev/mmcblk0p1: UUID=&quot;b3770f19-2ac7-402d-9e3c-5c04e3e157fa&quot; BLOCK_SIZE=&quot;4096&quot; TYPE=&quot;ext4&quot; PARTLABEL=&quot;STATE&quot; PARTUUID=&quot;65aa1ffe-16f2-b94d-a870-7292e5e5ec6f&quot;
/dev/mmcblk0p2: PARTLABEL=&quot;KERN-A&quot; PARTUUID=&quot;9b216b4b-ac57-c640-8eb7-d356af8426b7&quot;
/dev/mmcblk0p3: LABEL=&quot;ROOT-A&quot; SEC_TYPE=&quot;ext2&quot; BLOCK_SIZE=&quot;4096&quot; TYPE=&quot;ext4&quot; PARTLABEL=&quot;ROOT-A&quot; PARTUUID=&quot;3675549b-e624-9143-b3af-c414e1e02117&quot;
/dev/mmcblk0p4: PARTLABEL=&quot;KERN-B&quot; PARTUUID=&quot;4b867d4a-3be5-4e4f-b215-69cb5aa8e633&quot;
/dev/mmcblk0p5: LABEL=&quot;ROOT-A&quot; BLOCK_SIZE=&quot;4096&quot; TYPE=&quot;ext2&quot; PARTLABEL=&quot;ROOT-B&quot; PARTUUID=&quot;6c2204d6-92d1-2d4b-9ce4-1eced2227559&quot;
/dev/mmcblk0p8: LABEL=&quot;OEM&quot; UUID=&quot;9db5d778-0ac8-43be-b4dd-b8cd77248ba3&quot; BLOCK_SIZE=&quot;4096&quot; TYPE=&quot;ext4&quot; PARTLABEL=&quot;OEM&quot; PARTUUID=&quot;c89b9d8a-130a-1c42-903e-4a00373cbe78&quot;
/dev/mmcblk0p11: PARTLABEL=&quot;RWFW&quot; PARTUUID=&quot;49257a5e-f084-5d40-8655-7b44ce3aa92a&quot;
/dev/mmcblk0p12: SEC_TYPE=&quot;msdos&quot; LABEL_FATBOOT=&quot;EFI-SYSTEM&quot; LABEL=&quot;EFI-SYSTEM&quot; UUID=&quot;563B-40A9&quot; BLOCK_SIZE=&quot;512&quot; TYPE=&quot;vfat&quot; PARTLABEL=&quot;EFI-SYSTEM&quot; PARTUUID=&quot;e87e055b-5f6a-4647-8176-4f0f50bdadd6&quot;
/dev/mapper/encstateful: UUID=&quot;91e91d32-94d2-457f-a4a7-05db62492040&quot; BLOCK_SIZE=&quot;4096&quot; TYPE=&quot;ext4&quot;
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; /etc/os-release&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;ID_LIKE=chromiumos
GOOGLE_CRASH_ID=ChromeOS
NAME=Chrome OS
ID=chromeos
HOME_URL=https://www.chromium.org/chromium-os
BUG_REPORT_URL=https://crbug.com/new
VERSION=106
VERSION_ID=106
BUILD_ID=15054.98.0
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;cat&lt;/span&gt; /etc/fstab&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;^D&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token output&quot;&gt;exit

Script done on 2022-10-10 19:37:30+02:00 [COMMAND_EXIT_CODE=&quot;0&quot;]
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot; style=&quot;display: inline;&quot;&gt;
(all the boring common mountopts stripped; note also how the console login is somehow &lt;tt&gt;TERM=xterm&lt;/tt&gt;); the UUIDs amount to
&lt;/p&gt;
&lt;dl class=&quot;continuation linear&quot;&gt;
  &lt;dt&gt;&lt;code&gt;encstateful&lt;/code&gt;&lt;/dt&gt; &lt;dd&gt;&lt;tt&gt;91e91d32-94d2-457f-a4a7-05db62492040&lt;/tt&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;code&gt;mmcblk0p1&lt;/code&gt;&lt;/dt&gt; &lt;dd&gt;&lt;tt&gt;b3770f19-2ac7-402d-9e3c-5c04e3e157fa&lt;/tt&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;code&gt;mmcblk0p8&lt;/code&gt;&lt;/dt&gt; &lt;dd&gt;&lt;tt&gt;9db5d778-0ac8-43be-b4dd-b8cd77248ba3&lt;/tt&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;code&gt;mmcblk0p12&lt;/code&gt;&lt;/dt&gt; &lt;dd&gt;&lt;tt&gt;563B-40A9&lt;/tt&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//docs.chrultrabook.com/docs/firmware/supported-devices.html#:~:text=Lenovo%20300e%20Chromebook%20Gen%202&quot;&gt;Chrultrabook&lt;/a&gt;
lists this device as explicitly supported as
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div&gt;&lt;dt&gt;Device Name&lt;/dt&gt;&lt;dd &gt;Lenovo 300e Chromebook Gen 2/IdeaPad Flex 3&lt;br /&gt;
                                                   NEC Chromebook Y1&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Board Name&lt;/dt&gt;&lt;dd &gt;PHASER360&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;RW_LEGACY&lt;br /&gt;Firmware&lt;/dt&gt;&lt;dd &gt;✅&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;UEFI Firmware&lt;br /&gt;(Full ROM)&lt;/dt&gt;&lt;dd&gt;✅&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;WP Method&lt;/dt&gt;&lt;dd &gt;&lt;a href=&quot;//wiki.mrchromebox.tech/Firmware_Write_Protect#Hardware_Write_Protection&quot;&gt;CR50 (battery)&lt;/a&gt;&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Windows Notes&lt;/dt&gt;&lt;dd &gt;Audio driver is paid.&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Linux Notes&lt;/dt&gt;&lt;dd &gt;Supported&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;MacOS Notes&lt;/dt&gt;&lt;dd &gt;No MacOS support.&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
so this has been done before and this is thus largely a &lt;a href=&quot;/content/recipes/&quot;&gt;replication post&lt;/a&gt;, mirroring the chrultrabook documentation structure:
&lt;/p&gt;
&lt;ol id=&quot;explicit-contents&quot; class=&quot;continuation&quot; style=&quot;padding-left: 1em;&quot;&gt;
  &lt;a href=&quot;#firmware&quot;&gt;Firmware&lt;/a&gt;
  &lt;ol&gt;
    &lt;li&gt;&lt;a href=&quot;#firmware-finding-system-info&quot;&gt;Finding System Info&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#firmware-known-issues&quot;&gt;Known Issues&lt;/a&gt;&lt;/li&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#firmware-known-issues-firmware&quot;&gt;Firmware&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
    &lt;li&gt;&lt;a href=&quot;#firmware-enabling-developer-mode&quot;&gt;Enabling developer mode&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#firmware-disabling-write-protect&quot;&gt;Disabling write protect&lt;/a&gt;&lt;/li&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#firmware-types-of-firmware&quot;&gt;Types of Firmware&lt;/a&gt;&lt;/li&gt;
      &lt;ol&gt;
        &lt;li&gt;&lt;a href=&quot;#firmware-types-of-firmware-RW_LEGACY&quot;&gt;RW_LEGACY&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;#firmware-types-of-firmware-UEFI&quot;&gt;(UEFI) Full ROM&lt;/a&gt;&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/ol&gt;
    &lt;li&gt;&lt;a href=&quot;#firmware-disabling-write-protect2&quot;&gt;(Back to) Disabling write protect&lt;/a&gt;&lt;/li&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#firmware-disabling-write-protect-unplugging-the-battery&quot;&gt;Disabling write protect via Battery&lt;/a&gt;&lt;/li&gt;
      &lt;ol&gt;
        &lt;li&gt;&lt;a href=&quot;#firmware-disabling-write-protect-unplugging-the-battery-step-1-open-the-device-and-disconnect-the-battery&quot;&gt;Step 1: Open the device and disconnect the battery&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;#firmware-disabling-write-protect-unplugging-the-battery-step-2-boot-using-ac-power-and-flash&quot;&gt;Step 2: Boot using AC power, and flash.&lt;/a&gt;&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/ol&gt;
    &lt;li&gt;&lt;a href=&quot;#firmware-flashing-custom-firmware&quot;&gt;Flashing Custom Firmware&lt;/a&gt;&lt;/li&gt;
  &lt;/ol&gt;
  &lt;li&gt;&lt;a href=&quot;#installing&quot;&gt;Installing an OS&lt;/a&gt;&lt;/li&gt;
  &lt;ol&gt;
    &lt;li&gt;&lt;a href=&quot;#installing-known-issues&quot;&gt;Known Issues&lt;/a&gt;&lt;/li&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#installing-known-issues-linux&quot;&gt;Linux&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
    &lt;li&gt;&lt;a href=&quot;#installing-making-a-bootable-usb&quot;&gt;Making a Bootable USB&lt;/a&gt;&lt;/li&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#installing-making-a-bootable-usb-flashing-with-dd-linux-macos&quot;&gt;Flashing with dd (Linux/macOS)&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
    &lt;li&gt;&lt;a href=&quot;#installing-installing-linux&quot;&gt;Installing Linux&lt;/a&gt;&lt;/li&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#installing-installing-linux-recommended-distributions&quot;&gt;Recommended Distributions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#installing-installing-linux-installation&quot;&gt;Installation&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#installing-installing-linux-fixing-audio&quot;&gt;Fixing Audio&lt;/a&gt;&lt;/li&gt;
      &lt;ol&gt;
        &lt;li&gt;&lt;a href=&quot;#installing-installing-linux-fixing-audio2&quot;&gt;Fixing Audio&lt;/a&gt;&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/ol&gt;
    &lt;li&gt;&lt;a href=&quot;#installing-post-install&quot;&gt;Post Install&lt;/a&gt;&lt;/li&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#installing-post-install-linux&quot;&gt;Linux&lt;/a&gt;&lt;/li&gt;
      &lt;ol&gt;
        &lt;li&gt;&lt;a href=&quot;#installing-post-install-linux-general-qol-fixes&quot;&gt;General QOL Fixes&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=&quot;#installing-post-install-linux-celes-post-install-workaround&quot;&gt;CELES Post Install Workaround&lt;/a&gt;&lt;/li&gt;
      &lt;/ol&gt;
    &lt;/ol&gt;
    &lt;li&gt;&lt;a href=&quot;#installing-using-ectool&quot;&gt;Using Ectool&lt;/a&gt;&lt;/li&gt;
  &lt;/ol&gt;
  &lt;li&gt;&lt;a href=&quot;#conclusions&quot;&gt;Conclusions&lt;/a&gt;&lt;/li&gt;
  &lt;ol&gt;
    &lt;li&gt;&lt;a href=&quot;#conclusions-pog-moments&quot;&gt;pog moments&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#conclusions-cringe-moments&quot;&gt;cringe-ass nae-nae baby moments&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=&quot;#conclusions-funny-moments&quot;&gt;family guy funny moments&lt;/a&gt;&lt;/li&gt;
  &lt;/ol&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;firmware&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/&quot;&gt;Firmware &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&quot;firmware-finding-system-info&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-finding-system-info&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/system-info.html&quot;&gt;Finding System Info &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
All of these I found in &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html&quot;&gt;&lt;samp&gt;012. Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen arm64 Chromebook&lt;/samp&gt;&lt;/a&gt;,
sections &lt;a class=&quot;heading-ref&quot; href=&quot;012-debian-chromebook-lenovo-300e-gen2.html#jailbreak&quot;&gt;Save me from chromium (chrome os (chromium os(?)))&lt;/a&gt;
     and &lt;a class=&quot;heading-ref&quot; href=&quot;012-debian-chromebook-lenovo-300e-gen2.html#HFBITLAND&quot;&gt;Take me to &lt;span class=&quot;smallcaps&quot;&gt;hfbitland&lt;/span&gt;&lt;/a&gt;,
&lt;dl class=&quot;continuation&quot;&gt;
  &lt;div&gt;&lt;dt&gt;System Architecture&lt;/dt&gt;&lt;dd&gt;x86_64&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;Board Name&lt;/dt&gt;&lt;dd&gt;PHASER360&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;CPU Model and generation&lt;/dt&gt;&lt;dd&gt;&lt;tt&gt;Intel(R) Celeron(R) N4000 CPU @ 1.10GHz&lt;/tt&gt; and &lt;span class=&quot;chrultra-heading&quot;&gt;Geminilake&lt;/span&gt;&lt;/dd&gt;&lt;/div&gt;
&lt;/dl&gt;
&lt;p class=&quot;indented&quot;&gt;
Why the model is in the uname I cannot tell you, but it is there.
As seen above, it matches &lt;samp class=&quot;path&quot;&gt;/proc/cpuinfo&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a class=&quot;chrultra-heading&quot; href=&quot;//docs.chrultrabook.com/docs/firmware/system-info.html#system-architecture&quot;&gt;How to find your architecture&lt;/a&gt;
and
&lt;a class=&quot;chrultra-heading&quot; href=&quot;//docs.chrultrabook.com/docs/firmware/system-info.html#how-to-find-your-cpu-model&quot;&gt;How to find your CPU model&lt;/a&gt;
similarly recommend &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;t&lt;/kbd&gt; to open the &quot;de&lt;span class=&quot;smallcaps&quot;&gt;cro&lt;/span&gt;ded &lt;span class=&quot;smallcaps&quot;&gt;sh&lt;/span&gt;ell&quot;.
This still doesn'&lt;!--'--&gt;t do anything, and &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;→&lt;/kbd&gt; (not the arrow key) is required.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;a class=&quot;chrultra-heading&quot; href=&quot;//docs.chrultrabook.com/docs/firmware/system-info.html#how-to-find-your-cpu-model&quot;&gt;How to find your CPU model&lt;/a&gt;
recommends &lt;samp&gt;cat /proc/cpuinfo | grep &quot;model name&quot;&lt;/samp&gt;.
Why it'&lt;!--'--&gt;s not &lt;samp&gt;grep &quot;model name&quot; /proc/cpuinfo&lt;/samp&gt; is beyond me.
&lt;/p&gt;
&lt;h3 id=&quot;firmware-known-issues&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-known-issues&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/known-issues.html&quot;&gt;Known Issues &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&quot;firmware-known-issues-firmware&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-known-issues-firmware&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/known-issues.html#firmware&quot;&gt;Firmware &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
GeminiLake: Legacy boot mode/alternative firmware menu works but does not show payload list
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
which is irrelevant.
&lt;/p&gt;
&lt;h3 id=&quot;firmware-enabling-developer-mode&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-enabling-developer-mode&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/developer-mode.html&quot;&gt;Enabling developer mode &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p class=&quot;continuation&quot;&gt;
has already been done in &lt;a href=&quot;012-debian-chromebook-lenovo-300e-gen2.html&quot;&gt;&lt;samp&gt;012. Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen arm64 Chromebook&lt;/samp&gt;&lt;/a&gt;.
&lt;/p&gt;
&lt;h3 id=&quot;firmware-disabling-write-protect&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-disabling-write-protect&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/write-protect.html&quot;&gt;Disabling write protect &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;
  &lt;dl class=&quot;continuation&quot;&gt;
    &lt;div class=&quot;tipwarning tip&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Tip&lt;/dt&gt;&lt;dd&gt;You do not have to disable write protect if flashing &lt;a href=&quot;//docs.chrultrabook.com/docs/firmware/about.html#rw_legacy&quot;&gt;RW_Legacy&lt;/a&gt;.&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;firmware-types-of-firmware&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-types-of-firmware&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/about.html&quot;&gt;Types of Firmware &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;h5 id=&quot;firmware-types-of-firmware-RW_LEGACY&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-types-of-firmware-RW_LEGACY&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/about.html#rw-legacy&quot;&gt;RW_LEGACY &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h5&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div class=&quot;tipwarning warning&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Warning&lt;/dt&gt;&lt;dd&gt;The RW_LEGACY firmware is for users who want to dual-boot ChromeOS + Linux, or users who want to run Linux without having to open the device/disable the firmware write-protect (and are OK with the accompanying limitations).&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;h5 id=&quot;firmware-types-of-firmware-UEFI&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-types-of-firmware-UEFI&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/about.html#uefi-full-rom&quot;&gt;(UEFI) Full ROM &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h5&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
    &lt;li&gt;Removes the developer mode boot (&quot;OS verification is OFF&quot;) screen&lt;/li&gt;
    &lt;li&gt;UEFI firmware contains updated EC firmware as well, which brings additional fixes on most Chromebooks (mainly keyboard related)&lt;/li&gt;
  &lt;/ul&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div class=&quot;tipwarning tip&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Tip&lt;/dt&gt;&lt;dd&gt;The (UEFI) Full ROM firmware is the best option for all users who no longer need/want to run ChromeOS (ie, want to run Linux/Windows/macOS exclusively), and who don'&lt;!--'--&gt;t mind disabling write-protection on their device.&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
Unclear to me what &quot;ie&quot; means, but sign me up, brother.
Here'&lt;!--'--&gt;s hoping it also fixes the scandi keyboard.
&lt;/p&gt;
&lt;h3 id=&quot;firmware-disabling-write-protect2&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-disabling-write-protect2&quot;&gt;#&lt;/a&gt; (Back to) Disabling write protect&lt;/h3&gt;
&lt;h4 id=&quot;firmware-disabling-write-protect-unplugging-the-battery&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-disabling-write-protect-unplugging-the-battery&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/battery.html&quot;&gt;Disabling write protect via Battery &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;h5 id=&quot;firmware-disabling-write-protect-unplugging-the-battery-step-1-open-the-device-and-disconnect-the-battery&quot; class=&quot;continuation&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-disabling-write-protect-unplugging-the-battery-step-1-open-the-device-and-disconnect-the-battery&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/battery.html#step-1-open-the-device-and-disconnect-the-battery&quot;&gt;Step 1: Open the device and disconnect the battery &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h5&gt;
&lt;p class=&quot;indented&quot;&gt;
The &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/Lenovo%20300e%20Chromebook%202nd%20Gen%20(Intel)&quot;&gt;internal link from within google documentation&lt;/a&gt;
is a 404.
Obviously.
Neither the fake nor the
&lt;a href=&quot;//www.lenovo.com/us/en/p/laptops/lenovo/lenovo-edu-chromebooks/300e-chromebook-2nd-gen-(11.6-inch)-laptop/len101l0001&quot;&gt;real Lenovo product page&lt;/a&gt;
carry a manual of any sort, but a
&lt;a href=&quot;//support.lenovo.com/us/en/solutions/ht509430-removal-and-replacement-videos-lenovo-300e-chromebook-gen-2-81mb&quot;&gt;completely unrelated&lt;/a&gt;
Lenovo page &lt;a href=&quot;https://download.lenovo.com/consumer/mobiles_pub/300e500e_chromebook_2nd_gen_series_hmm_201901.pdf&quot;&gt;does&lt;/a&gt;,
and it also has videos-as-in-37-second-MP4s that show where the latches are,
because sexion &quot;1020 Base cover assembly&quot; of the manual says &quot;Pry up latches and remove the base cover assembly.&quot;
but doesn'&lt;!--'--&gt;t show where the latches are. But the video does.
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012a.04-DSC_0957cv.JPG&quot;&gt;&lt;img alt=&quot;the laptop in question, filleted &quot; src=&quot;/content/assets/blogn_t/012a.04-DSC_0957cv.JPG&quot;&gt;&lt;/a&gt;
One of my screws was missing, but another was in a loose insert, and I only broke one tab! And another pile fell out from previous service.
&lt;a href=&quot;/content/assets/blogn_t/012a.05-DSC_3011c.JPG&quot;&gt;&lt;img alt=&quot;it's a staggering pile of plastic&quot; src=&quot;/content/assets/blogn_t/012a.05-DSC_3011c.JPG&quot;&gt;&lt;/a&gt;
&lt;h5 id=&quot;firmware-disabling-write-protect-unplugging-the-battery-step-2-boot-using-ac-power-and-flash&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-disabling-write-protect-unplugging-the-battery-step-2-boot-using-ac-power-and-flash&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/battery.html#step-2-boot-using-ac-power-and-flash&quot;&gt;Step 2: Boot using AC power, and flash. &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h5&gt;
&lt;h3 id=&quot;firmware-flashing-custom-firmware&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#firmware-flashing-custom-firmware&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/firmware/flashing-firmware.html&quot;&gt;Flashing Custom Firmware &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;ol style=&quot;padding-left: 1em;&quot; start=3&gt;
    &lt;li&gt;Run &lt;a href=&quot;//mrchromebox.tech/#fwscript&quot;&gt;MrChromebox'&lt;!--'--&gt;s firmware utility script&lt;/a&gt; within VT-2 (&lt;kbd&gt;ctrl&lt;/kbd&gt; + &lt;kbd&gt;alt&lt;/kbd&gt; + &lt;kbd&gt;f2&lt;/kbd&gt; (right arrow)).
        &lt;ul&gt;
          &lt;li&gt;Type &lt;code&gt;cd; curl -LO mrchromebox.tech/firmware-util.sh &amp;&amp; sudo bash firmware-util.sh&lt;/code&gt; and press Enter.&lt;/li&gt;
        &lt;/ul&gt;&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
This is weird and borders on dangerous. Maybe?
The website says
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;h4 class=&quot;continuation&quot;&gt;IMPORTANT&lt;/h4&gt;
  &lt;p&gt;
    Due to recent changes in ChromeOS'&lt;!--'--&gt; security settings, you may need to use a new set of commands to run the Firmware Utility Script under ChromeOS. Running it under Linux can use the same old one-line command.&lt;br /&gt;
    Also, you must execute these commands **as a normal/non-root user**. Running them as root will break things. DO NOT RUN 'SUDO SU' BEFORE RUNNING THE SCRIPT CMD BELOW.
  &lt;/p&gt;
  …&lt;br/&gt;
  To download and run this script under ChromeOS or Linux, from a terminal/shell type:&lt;br/&gt;
  &lt;code&gt;cd; curl -LO mrchromebox.tech/firmware-util.sh &amp;&amp; sudo bash firmware-util.sh&lt;/code&gt;&lt;br/&gt;
  and press enter.&lt;br/&gt;
  …&lt;br/&gt;
  REALLY READ THIS: Under ChromeOS, starting with R117, this script must be run from a VT2 terminal (from login screen: CTRL+ALT+F2, login 'chronos'); it cannot be run from a crosh shell (CTRL+ALT+T when logged in) due to the removal of sudo, or from a crostini (penguin) terminal; […].
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
So: Are you supposed to run it as root under sudo? Run it as root straight from login? Or are you to &lt;em&gt;not&lt;/em&gt; do that because it'&lt;!--'--&gt;ll break your system?
How is it gonna flash anything as non-root? If you log in as &quot;chronos&quot; are you supposed to drop the sudo it specs?
Why does downstream Chrultrabook not comment on this at all and why does it not say which user you'&lt;!--'--&gt;re supposed to log in as if it matters?
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;a href=&quot;//forum.chrultrabook.com/t/general-mild-documentation-oddities-rollup/521/13&quot;&gt;According to upstream&lt;/a&gt; this is all intentionally misleading,
and the purpose of the huge bizarre paragraph with a random user is to find a R/W mountpoint.
Just download it and run it as root
(copy it off the USB (sure, maybe under &lt;samp class=&quot;path&quot;&gt;~chronos&lt;/samp&gt;, or &lt;code&gt;mount -o remount,rw /&lt;/code&gt;), since it wants to exclusively mount it)
instead of this rigamarole.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
I downloaded the thingy (which redirected me twice, last step at &lt;a href=&quot;//raw.githubusercontent.com/MrChromebox/scripts/master/firmware-util.sh&quot;&gt;pisshub&lt;/a&gt;)
onto removable media (unclear to me how you'&lt;!--'--&gt;d download it from the target system in a privacy-preserving way):
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token output&quot;&gt;localhost login: root
Password: root
localhost ~ # mount -r /dev/sda /media/removable
localhost ~ # cp /media/removable/firmware-util.sh ~chronos
'&lt;!--'--&gt;/media/removable/firmware-util.sh'&lt;!--'--&gt; -&gt; '&lt;!--'--&gt;/home/chronos/user/firmware-util.sh'&lt;!--'--&gt;
localhost ~ # umount /media/removable
localhost ~ # ^D
logout

localhost login: chronos
Password:
Login incorrect

localhost login: chronos
Password: chronos

Login incorrect
localhost login: root
Password: root
localhost ~ # chromeos-setdevpassswd
Password: chronos
Verifying - Password: chronos
localhost ~ # ^D
logout

localhost login: chronos
Password: chronos
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;chronos@localhost ~ &lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;bash&lt;/span&gt; firmware-util.sh&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;MrChromebox Firmware Utility Script starting up
Downloading supporting files...
Error downloading one or more required files; cannot continue
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The most natural question is &quot;how does &lt;samp&gt;chromeos-setdevpasswd&lt;/samp&gt; differ from &lt;samp&gt;passwd chronos&lt;/samp&gt;&quot;?
Significantly:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012a.02-DSCN0555cvcc.JPG&quot;&gt;&lt;!--'--&gt;&lt;img alt='# command -v chromeos-setdevpasswd
/usr/sbin/chromeos-setdevpasswd
# cat /usr/sbin/chromeos-setdevpasswd
PASSWD_FILE=/mnt/stateful_partition/etc/devmode.passwd
pass=$(openssl passwd -1)
mkdir -p &quot;${PASSWD_FILE%/*}&quot;
: &gt; &quot;${PASSWD_FILE}&quot;
chmod 600 &quot;${PASSWD_FILE}&quot;
echo &quot;chronos:${pass}&quot; &gt; &quot;${PASSWD_FILE}&quot;' src=&quot;/content/assets/blogn_t/012a.02-DSCN0555cvcc.JPG&quot;&gt;&lt;/a&gt;&lt;!--'--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The next-most natural question is &quot;great.&quot;.
Which isn'&lt;!--'--&gt;t a question but &quot;why the aren't there any errors?&quot; is.
Well, &quot;MrChromebox's firmware utility script&quot; is
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell&quot;&gt;&lt;code class=&quot;language-shell&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;#where the stuff is&lt;/span&gt;
&lt;span class=&quot;token assign-left variable&quot;&gt;script_url&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;https://raw.githubusercontent.com/MrChromebox/scripts/master/&quot;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# …&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;#get support scripts&lt;/span&gt;
&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token entity&quot; title=&quot;\n&quot;&gt;\n&lt;/span&gt;Downloading supporting files...&quot;&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-rf&lt;/span&gt; firmware.sh &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;/dev/null &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-rf&lt;/span&gt; functions.sh &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;/dev/null &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-rf&lt;/span&gt; sources.sh &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;/dev/null &lt;span class=&quot;token operator&quot;&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;2&lt;/span&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token file-descriptor important&quot;&gt;&amp;amp;1&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$CURL&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-sLO&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${script_url}&lt;/span&gt;firmware.sh
&lt;span class=&quot;token assign-left variable&quot;&gt;rc0&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$?&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$CURL&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-sLO&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${script_url}&lt;/span&gt;functions.sh
&lt;span class=&quot;token assign-left variable&quot;&gt;rc1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$?&lt;/span&gt;
&lt;span class=&quot;token variable&quot;&gt;$CURL&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-sLO&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;${script_url}&lt;/span&gt;sources.sh
&lt;span class=&quot;token assign-left variable&quot;&gt;rc2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$?&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$rc0&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-ne&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$rc1&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-ne&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$rc2&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-ne&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Error downloading one or more required files; cannot continue&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;exit&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fi&lt;/span&gt;

&lt;span class=&quot;token builtin class-name&quot;&gt;source&lt;/span&gt; ./sources.sh
&lt;span class=&quot;token builtin class-name&quot;&gt;source&lt;/span&gt; ./firmware.sh
&lt;span class=&quot;token builtin class-name&quot;&gt;source&lt;/span&gt; ./functions.sh

&lt;span class=&quot;token comment&quot;&gt;# …&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
which raises so many more questions (why are the curls &lt;em&gt;supposed&lt;/em&gt; to fail silently? why are the three &lt;code&gt;rm&lt;/code&gt;s not one? &amp;c. &amp;c. in the trimmed parts),
but that'&lt;!--'--&gt;s neither here nor there,
and just meant I had to download &lt;tt&gt;https://raw.githubusercontent.com/MrChromebox/scripts/master/{sources,firmware,functions}.sh&lt;/tt&gt;,
and, since all the other modules also run &lt;code&gt;$CURL -s…&lt;/code&gt;, apply
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot; id=&quot;firmware.diff&quot;&gt;
&lt;pre class=&quot;language-diff&quot;&gt;&lt;code class=&quot;language-diff&quot;&gt;&lt;span class=&quot;token coord&quot;&gt;--- firmware.orig/firmware-util.sh&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;+++ firmware/firmware-util.sh&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;@@ -16,6 +16,7 @@&lt;/span&gt;
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;#ensure output of system tools in en-us for parsing
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;export LC_ALL=C
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;curldir=&quot;$PWD&quot;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;#set working dir
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;if grep -q &quot;Chrom&quot; /etc/lsb-release ; then
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token coord&quot;&gt;@@ -31,28 +32,24 @@&lt;/span&gt;
&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;echo -e &quot;\nMrChromebox Firmware Utility Script starting up&quot;
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;#check for cmd line param, expired CrOS certs
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token deleted-sign deleted&quot;&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;if ! curl -sLo /dev/null https://mrchromebox.tech/index.html || [[ &quot;$1&quot; = &quot;-k&quot; ]]; then
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;export CURL=&quot;curl -k&quot;
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;else
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;export CURL=&quot;curl&quot;
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;fi
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;export CURL=curl
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;curl() {
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;printf '&lt;!--'--&gt;curl %s\n'&lt;!--'--&gt; &quot;$*&quot; | tee -a ~chronos/curls
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;OPTIND=1
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;curl_file=
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;while getopts sLOo: curl_flag; do
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;case &quot;$curl_flag&quot; in
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;[sLO]) ;;
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;o) curl_file=&quot;$OPTARG&quot; ;;
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;esac
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;done
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;shift &quot;$((OPTIND - 1))&quot;
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;[ -n &quot;$curl_file&quot; ] || curl_file=&quot;${1##*/}&quot;
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;[ -s &quot;$curldir/$curl_file&quot; ] &amp;amp;&amp;amp; cp -v &quot;$curldir/$curl_file&quot; .
&lt;/span&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token deleted-sign deleted&quot;&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;#get support scripts
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;echo -e &quot;\nDownloading supporting files...&quot;
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;rm -rf firmware.sh &gt;/dev/null 2&gt;&amp;amp;1
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;rm -rf functions.sh &gt;/dev/null 2&gt;&amp;amp;1
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;rm -rf sources.sh &gt;/dev/null 2&gt;&amp;amp;1
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;$CURL -sLO ${script_url}firmware.sh
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;rc0=$?
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;$CURL -sLO ${script_url}functions.sh
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;rc1=$?
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;$CURL -sLO ${script_url}sources.sh
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;rc2=$?
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;if [[ $rc0 -ne 0 || $rc1 -ne 0 || $rc2 -ne 0 ]]; then
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;echo -e &quot;Error downloading one or more required files; cannot continue&quot;
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;exit 1
&lt;/span&gt;&lt;span class=&quot;token prefix deleted&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;fi
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token inserted-sign inserted&quot;&gt;&lt;span class=&quot;token prefix inserted&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;cp &quot;$curldir/&quot;{sources,firmware,functions}.sh .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token unchanged&quot;&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;source ./sources.sh
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;source ./firmware.sh
&lt;/span&gt;&lt;span class=&quot;token prefix unchanged&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token line&quot;&gt;source ./functions.sh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
Which is possible due to the narrow flag vocabulary.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Some parts of &lt;code&gt;flash_rwlegacy()&lt;/code&gt;, like the boot order, degrade gracefully, which is not what we want.
Similarly, &lt;code&gt;downgrade_touchpad_fw()&lt;/code&gt;, which is meant to &quot;offer to downgrade touchpad firmware on EVE&quot; does the same.
But my laptop doesn'&lt;!--'--&gt;t have &quot;EVE&quot; anywhere in the board name so no issue there.
All other curl uses hard-fail, and I turned around twice, for
&lt;tt&gt;https://www.mrchromebox.tech/files/{util/cbfstool.tar.gz,firmware/full_rom/coreboot_edk2-phaser360-mrchromebox_20231222.rom{,.sha1}}&lt;/tt&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The first time I tried this, it told me
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;yellow bold&quot;&gt;WARNING: your device currently has software write-protect enabled.
If you plan to flash the UEFI firmware, you must first disable it and reboot before flashing.
Would you like to disable sofware WP and reboot your device?&lt;/span&gt;
Press Y (then enter) to disable software WP and reboot, or just press enter to skip and continue. &lt;kbd&gt;Y&lt;/kbd&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
and, naturally, rebooted instantly, so I lost the transcript.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But after the two expected errors, I got
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;Script started on 2022-10-06 00:00:07+02:00 [TERM=&quot;xterm&quot; TTY=&quot;/dev/pts/2&quot; COLUMNS=&quot;170&quot; LINES=&quot;48&quot;]
&lt;span class=&quot;token info punctuation&quot;&gt;chronos@localhost ~ &lt;/span&gt; &lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; bash firmware-util.sh&lt;/span&gt;
MrChromebox Firmware Utility Script starting up
Downloading supporting files...
&lt;span class=&quot;red&quot;&gt;You need to run this script as root; use '&lt;!--'--&gt;sudo bash &amp;lt;script name&gt;'&lt;!--'--&gt;&lt;/span&gt;
&lt;span class=&quot;token info punctuation&quot;&gt;chronos@localhost ~ &lt;/span&gt; &lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; sudo bash firmware-util.sh&lt;/span&gt;
Password:
MrChromebox Firmware Utility Script starting up

Downloading required tools...
curl -sLO https://www.mrchromebox.tech/files/util/cbfstool.tar.gz
'&lt;!--'--&gt;/home/chronos/user/cbfstool.tar.gz'&lt;!--'--&gt; -&gt; '&lt;!--'--&gt;./cbfstool.tar.gz'&lt;!--'--&gt;

Getting device/system info...

Checking WP state...
 ChromeOS Device Firmware Utility Script [2024-01-07]
 (c) Mr Chromebox &amp;lt;mrchromebox@gmail.com&gt;
&lt;span class=&quot;cyan&quot;&gt;*********************************************************&lt;/span&gt;
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;Device: &lt;/span&gt;Lenovo 300e/500e Chromebook 2nd Gen (PHASER360)
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt; Platform: &lt;/span&gt;Intel GeminiLake
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Fw Type: &lt;/span&gt;Stock ChromeOS w/RW_LEGACY
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;Fw Ver: &lt;/span&gt;Google_Phaser.11297.342.0 (12/24/2021)
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Fw WP: &lt;/span&gt;Disabled
&lt;span class=&quot;cyan&quot;&gt;*********************************************************&lt;/span&gt;
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;green&quot;&gt;&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt; 1)&lt;/span&gt;&lt;span class=&quot;cyan&quot;&gt; Install/Update RW_LEGACY Firmware&lt;/span&gt;
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;green&quot;&gt; [WP]&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt; 2)&lt;/span&gt;&lt;span class=&quot;cyan&quot;&gt; Install/Update UEFI (Full ROM) Firmware&lt;/span&gt;
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;green&quot;&gt; [WP]&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt; 3)&lt;/span&gt;&lt;span class=&quot;cyan&quot;&gt; Set Boot Options (GBB flags)&lt;/span&gt;
&lt;span class=&quot;cyan&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;green&quot;&gt; [WP]&lt;/span&gt;&lt;span class=&quot;yellow&quot;&gt; 4)&lt;/span&gt;&lt;span class=&quot;cyan&quot;&gt; Set Hardware ID (HWID)&lt;/span&gt;
&lt;span class=&quot;cyan&quot;&gt;*********************************************************&lt;/span&gt;
&lt;span class=&quot;cyan&quot;&gt;Select a numeric menu option or&lt;/span&gt;
&lt;span class=&quot;red&quot;&gt;R&lt;/span&gt; to reboot &lt;/span&gt; &lt;span class=&quot;red&quot;&gt;P&lt;/span&gt; to poweroff &lt;/span&gt; &lt;span class=&quot;red&quot;&gt;Q&lt;/span&gt; to quit
2
&lt;span class=&quot;green&quot;&gt;
Install/Update UEFI Full ROM Firmware&lt;/span&gt;

&lt;span class=&quot;bold yellow&quot;&gt;IMPORTANT: flashing the firmware has the potential to brick your device,
requiring relatively inexpensive hardware and some technical knowledge to
recover.Not all boards can be tested prior to release, and even then slight
differences in hardware can lead to unforseen failures.
If you don'&lt;!--'--&gt;t have the ability to recover from a bad flash, you'&lt;!--'--&gt;re taking a risk.

You have been warned.

Also, flashing Full ROM firmware will remove your ability to run ChromeOS.
&lt;/span&gt;
Do you wish to continue? [y/N] y

&lt;span class=&quot;bold yellow&quot;&gt;NOTICE: flashing your Chromebook is serious business.
To ensure recovery in case something goes wrong when flashing,
be sure to set the ccd capability '&lt;!--'--&gt;FlashAP Always'&lt;!--'--&gt; using your
USB-C debug cable, otherwise recovery will involve disassembling
your device (which is very difficult in some cases).

If you wish to continue, type: '&lt;!--'--&gt;I ACCEPT'&lt;!--'--&gt; and press enter.
&lt;/span&gt;
I ACCEPT

&lt;span class=&quot;bold yellow&quot;&gt;NOTE: After flashing UEFI firmware, you will need to install a UEFI-compatible
OS; ChromeOS will no longer be bootable. See https://mrchromebox.tech/#faq
&lt;/span&gt;
Press Y to continue or any other key to abort. Y

Connect the USB/SD device to store the firmware backup and press [Enter]
to continue.&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;This is non-destructive, but it is best to ensure no other
USB/SD devices are connected.

Devices available:

1) Generic STORAGE_DEVICE (7.4 GB)

Enter the number for the device to be used for firmware backup: 1

&lt;span class=&quot;bold yellow&quot;&gt;
Saving firmware backup as stock-firmware-PHASER360-20221006.rom
&lt;/span&gt;
&lt;span class=&quot;green&quot;&gt;Firmware backup complete. Remove the USB stick and press [Enter] to continue.
&lt;/span&gt;

&lt;span class=&quot;bold yellow&quot;&gt;
Downloading Full ROM firmware
(coreboot_edk2-phaser360-mrchromebox_20231222.rom)
&lt;/span&gt;
curl -sLO https://www.mrchromebox.tech/files/firmware/full_rom/coreboot_edk2-phaser360-mrchromebox_20231222.rom
'&lt;!--'--&gt;/home/chronos/user/coreboot_edk2-phaser360-mrchromebox_20231222.rom'&lt;!--'--&gt; -&gt; '&lt;!--'--&gt;./coreboot_edk2-phaser360-mrchromebox_20231222.rom'&lt;!--'--&gt;
curl -sLO https://www.mrchromebox.tech/files/firmware/full_rom/coreboot_edk2-phaser360-mrchromebox_20231222.rom.sha1
'&lt;!--'--&gt;/home/chronos/user/coreboot_edk2-phaser360-mrchromebox_20231222.rom.sha1'&lt;!--'--&gt; -&gt; '&lt;!--'--&gt;./coreboot_edk2-phaser360-mrchromebox_20231222.rom.sha1'&lt;!--'--&gt;
&lt;span class=&quot;bold yellow&quot;&gt;Persisting device HWID

VPD extracted from current firmware

Disabling software write-protect and clearing the WP range

Installing Full ROM firmware (may take up to 90s)&lt;/span&gt;

&lt;span class=&quot;green&quot;&gt;Full ROM firmware successfully installed/updated.&lt;/span&gt;

&lt;span class=&quot;bold yellow&quot;&gt;IMPORTANT:
The first boot after flashing may take substantially
longer than subsequent boots -- up to 30s or more.
Be patient and eventually your device will boot :)
&lt;/span&gt;
Press [Enter] to return to the main menu.

&lt;a href=&quot;/content/assets/blogn_t/012a.01-DSCN0556c2.JPG&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/012a.01-DSCN0556c2.JPG&quot;&gt;&lt;/a&gt;
Q

&lt;span class=&quot;token info punctuation&quot;&gt;chronos@localhost ~ &lt;/span&gt; &lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; ^D&lt;/span&gt;

exit

Script done on 2022-10-06 00:04:21+02:00 [COMMAND_EXIT_CODE=&quot;32&quot;]
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;blockquote class=&quot;continued&quot;&gt;
  &lt;dl class=&quot;continued&quot;&gt;
    &lt;div class=&quot;tipwarning tip&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Tip&lt;/dt&gt;&lt;dd&gt;If you unplugged the battery to &lt;a href=&quot;//docs.chrultrabook.com/docs/firmware/battery.html&quot;&gt;disable write protect&lt;/a&gt;, you can plug it back in now. All subsequent flashing won'&lt;!--'--&gt;t require it from now on.&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;UEFI&lt;/dt&gt;&lt;dd&gt;It can take up to a minute for display to come up on first POST. Do not interrupt the first boot.&lt;/dd&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
I'&lt;!--'--&gt;m not trying to be flipping the shit running with a cable plugged in, I plugged the battery back after rebooting and proof-booting d-i.
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
Yeah, it took about that long. But the updater explicitly says it won'&lt;!--'--&gt;t boot ChromeOS anymore. So I held off until I had a d-i image.
&lt;/p&gt;
&lt;h2 id=&quot;installing&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/&quot;&gt;Installing an OS &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;h3 id=&quot;installing-known-issues&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-known-issues&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/known-issues.html&quot;&gt;Known Issues &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&quot;installing-known-issues-linux&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-known-issues-linux&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/known-issues.html#linux&quot;&gt;Linux &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
    &lt;li&gt;Debian 12 (Bookworm) needs a custom kernel.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
No it doesn'&lt;!--'--&gt;t. Pretty sure. No one wants to document what they mean by this. And I got spam-blocked on the forum for no reason.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
And by that I mean this is not mentioned in the documentation, and not in
&lt;a href=&quot;//101010.pl/@elly@donotsta.re/111722941614342831&quot;&gt;one&lt;/a&gt; (&lt;a href=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmcAAAEBCAMAAAAKKfL5AAADAFBMVEX///8AAACmxdRYHQ4tLzp9mZU7Oj/6AJb006AfICc8PkRQRoA8QFCIpsRgNdl1dXU3dbyayuljZGnMVyRbLsbz/P41X4lXWmF1oc++nmyAg4bwrDbE7/1VVlvU0bKYczvRoTzx8fd0WewlIyfY4OdeMDocAgLhZbVmfLGSououLk5zicLI2+T+/9fW19ugxNq0TiJ0hb9NTU+tsrkzPpibNjvaLq7fy1GOjo6avM1TRZGJeHBsTB+/V7+wusSztLWgoKTCxMb967+LnOVJiMWnZ8TYuZE3Egnq9OtiVkp9fn/VmsXovYKoqKplRukyI5CQMxxkcqOBktPD3dvSrsxNTVKiyvChvfyBXjv44bXq2bnEy9TRjjmdr/VyhrB2eoJ+ueubpK7h7PYxSGtpSzrAj3Lo0qiKj5f726m+09ufeFB5OhmbjNqMr9A6aKqBfMLtgSvE4vVqam27xM3251AmCgiZvNjb29uryP2/uKTizaZMMiLg2/uEpNhfb6HxAZw6mtVnJBHKysqWrPcwKHjR0dNIFwqpYT7c7/j+/+yWnKO+pps9MDq9vb4qLDJwcYCEipRpUPfTlsNYOrSf0f+7ruTr8f16MDqqtsGSkpRMQ3CMouvD29V2MDr6AJjr5/ySts7sO6eSXyO8vMC1wswuBQJsrOOjrLHuxo/G07ini4GVfeWPSzt/anGEldu/spasknSMreRCKiVPUlpiYmWrzNz389qzll1qYljL1NzE5Nx7jcrNv9KukTvPyvp5JxYVAgLDiLBMP3RjPOOXifnd5e9pqd3T8voqGRi9zdHT3OOFhojJvczBizyKnKy31OQzNkDk5OUvMT3ylC1YRqs8DAbsHKKppPS4fTzl9P3Jz9hhZ4OXlOuenp/VeMK008hFRUnKsYcuLi+KamfGvPSxvslnSfEuLGDU2spiLiVnaXHJ3cbydSeAbPd9UDs3gsKBUh7Ep3uGcWDDz9iZl8js/f7+/v8yCwiTmZ+HpOyksrxPRYJUOKBHRVpAY4TW4+wsz5IUAAAAAXRSTlMAQObYZgAAAAFiS0dE9UXSG9sAAAAJcEhZcwAALiMAAC4jAXilP3YAACAASURBVHja7Z0NnBxlfcc7uF7YCIVEIjEmypiNQAhDmSA9AXNzJPJyeFCMkZcLiQlgCBKESZPDahpMObjE3CX4knoYFRww9QUVu0EPWrFSCNlpTc83SBXZTlvQUFFrGVKq0uf9ZV725e5293bv/3zuZmefeZ5nn3nmu8/rb//PH7W1gFuWAVeJ+5fI+6x0tf7oPwLOJq8DzoAz4Aw4A86q5+x1jXfA2WTgLGy0A86AM+AMOAPOgDPgDDgDzhrPmTkw1NU1NGACZ5OOsy1PDz29pU6YbZnVRdysLcDZJOPM6RgJRzqc+mDWJdwW4GxScbalg7x0iBqt3cAuzBtGe8iOHeSILrXhkAY+RRd6+TnxbzOMDn6uxmL+JKSJarOnMWToMMvUOet00MHvnB5OB85akTPnAvIyolVo7e29CA6jlx0NfETeBuYpj4nJE+7oOfXvCHsNdk5jsT/qT0MOdHU5+DAQOvigceZ3Yth8qM9alLOhUH+l4JBjWy89trdj8vB/G7/YpgZk/uQNP2/r7cUVW4cIhA9DpL0cGCDt55DO2fQQHcJEmrb0Fdvain2dCZwNAjOjcIMTpD7raFdoMxhjYW++l3PWgVpGwRz378jLc3wBYWpwfxqSd8xoNy3SP+v1SZ2G2s3pmFNcteFz5LUl7CsW+8ItCZzNBdBGgdncxvXPutURJ63IaNuIjrhv1dbOqijKGWoQyWVDVF3tRl6c07i9pGdG/RXOBkj7GefMcThb6M93EHN+r4N9UVUW9qG/YgJnWQBtbJjVjbMLhmLjzV5CRlu7OKKhQb4d12iyPmPVlEFrOlqfGb38HMcS7WYH7duxdhM1mlsIaJF2s216b1vvdMwZrs7CTvS206deGLREzBBn4MbojqqxY5xd8PQFW7qHuvu0UUCH0jljfvkOMgxti3Mm/GUYEgu3trTJJLSxccDTYWdXV2fCOAA3nL1tlDP6loDXS86LfYmYAWdjd/WpzxBm8VkujAklhB7xCQFJ1Gd4INnWIbpwyL8jZGNSfJ7nUfLtwp/Pazi4yXTi8xqo4QydNtpuOuQtbjXJbEeJ8SZwUjfOjjpqDJwlYUbHjbhmaqdHXGWFOmeo75UPVc6QB50/Q+csFm5tpb9Rdp6WTp2xcUAneVtuNg04axLO6u3Ge90JOAHOxraOLltx4Aw4a7QuCDgBzoAz4Aw4AwecAWfAGXAGnFXHWSv8fhM4mWCc3br1Kfxy7IsncM5a4vfowAlwBpwBZ8AZuJpzNn/mwdAEzsDVmLMvmOfdvwk4A1dbzs6Y/Tfbod0EVxvO+KTVCZlfvbgc+mfgalWfXXsIuVNQfUarNuAMXG3bzV9d8M+Ys2ILuDnAyYTvnwFn4Oox3gTOwNVj/gw4A5etwzp60nP7/Q8vvpO4iz9+F3AGnNWIs7vuVNxZwBlwVhvOUGX25n/85Z13/hIfnv09cAac1YKz1zz77C9nhOGTPw3D8MvPPnsWcAac1YKzs5599tvhk08S0r6tcxbm8Z/i8n3FkdSLyHWH2CRG1NFg+TCfj0UQV5P88ymX4pzN/dA555zz/o985FW3334+di9tuG/DhifmfmvW4VkXzj3/Lbq776Un5gJn9efs4os/vOviix+bQV/HwlnfADoMhZWSVI6ziuuzuef8+te/fj/i7Hbkzv8RwmzDhmBO+8L9u3fv3t89y567QQftvpfmAmeN4OxzlLExctbdjW1JdXcN1Juzcz7/+fc/gmqzV91OQXvpiQtn7cGQLV26G6PmHDO44TuYsO8ghzm77wngrO6cPfrohz+H/nfRf8pZPgxHGEojQ8Vi18iQ0hzGLjL/EUzawBBGERuK7MZm8sIB8YaCSb2KI2HYhVvZAexHEuxDSYVdxa4+Nf3KOEOYfQRj9ipM2o/u+9AxGLKlD3GHUPuic+ETCDHB2UvAWb05+z/K2ZvfTDl7DUUmXxwaoI8aEzYwpHIWu8ibzWJfvtjdhY+ol9YVimoPo5OX4GDaWJ0XknckQZTk0Eh3sXtITb8yzv7kzx55hIP2iwu/9A8XfexjF+nun3bv7jim7QmCGebsPuCs3pzd9eijn/yPR4nDr2SmtiskHXr6qEeKsrEseZE0qgOIM9rooX9s/raLvEG1FY1AvPKsD0fqsDxNMD+C4mJUtfQr5uwRjNovLmzfs/9nU6ZM+azuptyDK7VnnPzgBooZcFZ/zv5YdT+kKI0oXbDuoaFujbO0iwgSBNVQl+AM4zSic0a9GGdDAyQdliAmrQ9F1tKvkDPqzt7zzP7dS0+MYYY5W4r7avvvffWcJ95y3wbgrP6cHaVixkcB4ZB81Pk+1BCq7WbsInMDQ6gqQn9FzhmGBtdn3eiFtZvMa6SbtZo0HZJgd183+dfSx71B9leCM+yu/+gzS3HP/6ETY5gxzuiooOOYb7z0EvTP6r8ecBzi6y7qtLZRdJFwZ0rlLH6RNZ1htzpYxK1q2Ifrs4EwHOLgUK8ibj2x2dIR7EcTzCP+yJSZln4lnL32ta+94+kj1hKUMGfSMcw4Z8Ttf/mYb5xf4fNYmVtJXpf1uNlVC9NC5RaWSOJwbs7g+p3AGWk4f0dqtpR5BNQapjt8UYwEBnDXahRzGGNcD7jppjtOmrlp3ca9axcgzt59D3c/FpydKDg74m1HH330ym/oCfg9udzw4cF0zvKFnVmvZ7SctRVWAWfF4nePQ+7jHz/uuOTH2jVS4pmTi2GFgAyN1Gbd6Qc33f+uy6Y9MHPm3ach0sR8xkWbMWdTPjvlxxeRim7p0rWIsnV7b953hJbE4KKe6YPZZR3DU1M5K+3KcQbtJhMGnYUgO+53302usEpVQn1V1FD5cHyqswTOlu/46l9ddsstGzdtWnfEXtZ+9pDxAKJs8892P4QhQ5TdvW7jgX0vznjxwA41+rZOWpNtQ7j09KwqFNZks4d6coVVg4izPYXcoqnZObnD2YWoPusazuGr2Z2F3PAhdBW7w4SzZetzhcPIZ0d2es5F/13Mh3BWEsTJw1mz6xxvWr7j9MUnY9KmPcCaz4f+7h6EGPr77InvfohC9ra7N+69+SCi7ODqe30l9rLCnOyh4VzP1MFCMduT65jVkyu2FTqP35Zbg7gZ3rkNUcI4y+cW/e1ChJGPQxXals2aNatQIBgNDvfMQhHactsQWKuya3JF5gOctQ5nb1i+4wNfXYxIu+qWW96zcd2mdaet7bmHDAOmbP4YqdxoVdaPIEOUrV7w8gol9pr12amFnYO547OLVqL6DPXWcjvaittJc7gS1UvZRblBxtnU4iBBbv1wFlVZuEkdyg2RgH5uOqoMO7PrF2XXF3qyHT3CBzhrJc5Oevinixcv/vTJV6FK7T0PzPyfzaQum3LPMK7L9h6xbt1pNx8MUVWGKOsvrF+l9roWoipofbaIcFi4hnCGO2U70MiAcLaStHy83dw5LBpK4uYU1tP+2R7ShPZkVxXacn6u2LNH+ABnLcPZn//pyktPfxeq0RYvps3nk2fiRnPK5hPXsgYT98ooZY8Vhvcv0jjr9LPrV6FqChHnc87m5BZuz8Y5W5nbRqo2zs1gZ2EZ5awjNx1nLevmthWyw4dRNch9JidnLfk7YcLZw+/66iZGGsYMc/b2jXuP2Hj3xtMW8AZz9WOvDPesv/flVeo4oAfRdTi7A3HWM51zhvkajLebmJnjWbu5rGM6er+GjTfX5FCXb+pgti1XQJVbIVcUPrXm7CcJ7vvAWe04e/hhVqX979unkOrshgfWIcgO7JuBqrJdmLL+Vw78dv+99y56edUxeru5qLPYmRtc+a9ZztmhnDfLI5xp44CdZJRwmIwDOgtTjy/0oJHA8RijtuHCmp3De7LZ9Qivlai5FD7AWctw9oY3MM4oaDeQztnmn82ePfvm/hkh65at7n9swdr96++99z8Xvfw9Vx8HHF8o+Ityw8sEZ9k1hcKqHtxQrtHmNfCkB4ZmZyHXk0cI6fMaC6dms9tQVdZW2JMVPrXm7PsJbi5wVhvOdlx6+ikCtDPJSPPtV122YB+lbDWhrDD8W4JZlLO2QldFD3RhD6xvTnbOui49nVZoqJP2ZbwMMOXHN3z6qstunhHOIJStfiy3YG3PflqdIc7y2qR/YVsxO7XMxH/bTjK0BM4mNWdnX7oCc4YrtE20d/aOTYtPvuoW1DFb3d+POmYLhtf29LDq7FN7vvctLf6chYVcYX1bySczJ1c4Hjib3Jz94AdnX3oSaTgRaDeciTk784HFmLNdpP//WAFhhqqz9bQ6i3HW1A7GAY3h7AObSXX2acLZ6l1kYpZixqozzNmFwBlwNkrOGGjvwJxt/imtz/rxIOCVBUuH1/5W9M4+9XJLcQbjzbpxdtNNMc4eWMw424U506uzl1dtayHOoH9Wv/rspvv/EnFGQYtzlltKBwGsOkOcrQHOgLNR1Gf/9e9Rzk5WOCvI6mwRrs6Asxbk7BhwLe0mDGcmuBZ2wBk44AwccAacgRsFZ39YdyCX6/vaNcAZuBpytmTpB/Pbn/vDuuevB87A1YyzG3dfz3j74jWZ26Z9tNGcGRb+U5xlm0HqReR8wzDs2N3RYJZhWbEI4mqSPw1u++jg6KladvVlnPY5owk1Vlfdp2jFhkoYv8Uvzig5u23a6zPzZy7IdV4+//Fvone9zcaZ7WIkjOpKNZ0zXsroEHhj4ow8mXHjbOwsjiEFFNUJyItnjJKzY984L7Pk+W+dsfRN6HT7bdP+rck4833TNmzfc8eVM9N1TC/C1eTmjBd99alQzh4/L3PJgW9mLnnmTZkbvzjvtmm/aRxnlmEE7H4CVD17gdpwxS4y/wCThqjAFx3DQO2dbRiueENLh3qZgWF4uJV1sR9J0EZJGR5GSkkfJ4vStz3siRsKWb6Ga7CQ+I2HrtKP4QGVy/RzErJkJn0qyZtIRktYpmaJdovfHf08EkfLiI2PIqM08aS8oA/yeVnQSCgwLV5ZbCpnjgwX+eQynL339Zljn/9K5sbn/xqx9pmGchag23Dp/WDCXEflLHaRN5umbZm+h4+ol8aqdYO8sWjRMEIs2sLiU/KOJIiSdALf9B01fdYc26TILe17jAuUhsRv8Oe55DN5QO2yZcayRN8kfCrNG09GSVhNjV2mHy0+T8TBL/QdjSLi2jK7kbyg4L5SFsSx4hXFRo++TWC3TZOH03JbjrPnpv195leo6cScNbg+8wxyH/S5BqZsLEteJI2qizgT3zr09cLfXovUG+xbiL0sVhikNrFoglaA4mJUtfTpBzq0+GgissBZSFKf8c9UAiqXrYQskWTin0rzJpJRElZS45dZ2vzzZB5th72zWF1F41qGWimpeSGtgigLXivREhZBaW0asFESTs43tdyWaU1FfYY5W4L/z9veUM4CpQvmO45WF6detHH7Zjie4AwXRaBzRr1YcZOvIytiFMTCDaStp29GHqzOWRDtgOmcJVxWskSTiX1qhDOZsJpa5ZzhQbgn4mqcaXnhnAV85O7RLq/jK0Fl1w4XvS/CVccZ6p/d+NDXLz3w88tft/f6TEPbTcORj9qyUUOotpuxi6LDjr6N6E8UJH58+AvroxfWbjKvwGetJk2HJOjbPvnX0pePxeGNkSObETG0VyosQ2lgxWUvmiXxQOKfyvKmt9Milzw12W6KuxNxmA8PgoAQcVniCXlBZ47yKYQiVN0GalCNM5MnHs9tmfHm8y88NzP387M35fq+vr2xnHm8i06+m64+gRW/yL6Esg/KbjgwbPyFdXkXXnjh6t+zSRvAGjjctfbog9HS56lZtOFA7YcrOaMhdc5YQO2yS9NTsmTJab3op5K8qcmwfy01i7djyt2JONSHvsMNnpITU222tbywOyMhaSTRn5PFpnHmByJcJLelOXvuga9tn4jrm7ZXomuJL4qRgGuIAmrgLGh9XfyeRn2XllHjvLL1gNe9541nt2WufvU1E4ozLyiRc9qtqPA2ncAEzko4164PZ5mrv7c3l7M+OKE4s0sVm11FmVpGK1Zn48ZZULopGF+9BuiCwAFn4IAz4AwccAYOOEucpy3TlSUz+WJ1zVImdarrDoskKuhNJ6bHPR23RJhR6dXS82wE+qdbFXf8UwNGL5TIcEQnU9WgY6JyljrvRxYBbCtSUtVzJpJI5KyC9LinbdWNM6aFG40yJ/WGkjhLSXwycUaem/7wRsWZTGKMnPGE6sFZue8gcFbN+iYWMuElkIh2iwqEyAIAPjDRlGGpwcR6oBBDpSi6aDqqIguruITCiqaJfDSdFktG6tEClyZkCQGXIZIl+iw6LaV+bkyGxmJJNZqhas5wHkQYtoIUuWEuBJOyNz27arGyO+RLUXq+RZbEkppIkeVZ1/2pUjbmK8VuE58zKmQSq3u2kFIRzsht4AMTTfElXC0Wk2GZZqqiiyShKbJUTFmavvgWq7IuqUcjqgklL+yCLXuQhrwlV9FnaXotIRZjajQuCqOiNN9Ub0Cpz/gNy36mkL3p2RXFqix3M28935o0TU/RlOUidX9qeOYrQjdHu6mrFbiUivSEfXZgYpZIUOWFQJCm6CJJ6IosPRX+TpWxsWREanYkL0L2RasKX3KmrTNHZGg8Flej6ZozpuvlH6m3m0zuJAVjSiRFHSTiSPmOkAtH9EyarlFJUeRZ1f1FpWyBIrtrUs6EKkqMAkbFmQxoWxVxpsnYopzhVlPNi8YZzbER5cI0ozI0nhxXo+mas/KciaKRsrfx5CwwtTyruj9NykbkaiXWoycsZx6rB6iiiujubHUUwEVTllpdMI2YFGalKLpoEqoii0ui9TQjMjaWDE/NdSN5Ye0qq2Cw+CvOWUyGxmJJNZqqOeNPXG83PS3XXAgmZG9RFZrix+/QM+P5VrKkjGsdLc+q7k+TsjG5mtNsnGGllUs744ZDpVSIMxcXADlw0RQLqiupFGFWsqLLZQWptGCslYykqcnYWDIytSDQ8sKVYfiF6rMSOEuQobFUmRpN05zxQa28AVPTtKGeEV8EV5RsmgqN1XHUj+XUpR19Pd8yS66U1tEURZ657k+5LaZPI75S7NZs6wHa4NkK+ME0zTGIpqzxUglZE1JupJWZ64x38iVFgc267lRqkqbmoqkmdVqZGeOdujeq71bTclYP0VQrcDbutdnoUod1dHCg1wAHnAFn4IAzcMBZOc6sqruaVZk3S4tdobQimmz6x4y1Px69KzK5j2e6vHEaaNfx1znNpHOs0spUVaVIJrorejD14yyaBl6i9vBypu9XGK1MDoAz4CwhDTwr7ONJw/IzpcBZGc6E4YFy1r8UwRZRjvGrAWtyUhRhfBKIWgbjhsSEIkuIuWJWzfAVljkpwUoUcEnTaOS9YqgtRQynnmoCOpovmUCABQAGmXvlHyKLQdW1qUo15Tbl5whBWeBWasqtBeuzSqx/KYItXy6E86CpijDRAGmGxPgStRRzRa2aKdbMFAlWooBLNY1mqaHTxHDqqaWq05g9LZEAsSRoe7h7xj9EFoMZiRkrsYgOTkjoKjXl1pqclbP+FRVsaWbH0hVhpjjVDTzxNW0u5opaNWN6MstUJViJwhrd9pntiNCpYriI/kJ7IaRwxZfjei7qnPm+YtZMFIMTVQWYMTtWXlQ0ZqsW0sqZcmtNzspa/4oItjSzY+mKMFOcJnGmirkiRU71ZNSbS7CSOdN+k4S8eehUMVyygE5yJhRfVuBji7moeyY/hBeDrmtL5ixmiw1L6Co25dZinHmxsk+2/hUTbHm62bFkRZgAzVcNiQlFlibm0qya0SieqUuwkgRcMhNU8yVCp5o3s2ICOskZlgyRBEjNFhCtkqncKS+GmEmzeIkpHPHArlu5KbfW4syVBshKW/+KCrZc0rUwkpRVUhFG1VhUs6UYEuOKLE3MpVk1o1e48otLsBIFXJ7yOw7ykGzR60s2b6bbFnU1zki+uCky0yc/ayA9A/lbElYMmq7NTbSXZpkx+2dBULEpN1gPqNyNkxqrOgnWqARb45oArAfUmTNjXFKprs8y5h6O1wLG22B9cxTVS1Xzm/ZYZ0PtVjDeBpyBqx9nt4bIme+7BjgDV1POtl576CfrDl43DzgDV1POnsK7VZz6VuAMXB04u4OyduwFjeWspB2o8s6qRtghfn9rKceKYrIZtLTBIJ538tU5uSpGxVUY5pEZrlSElxzD4PsqoFzHhG5pO5Em7YSa/OmSs/kn9R85ryU4KxO1WjPV8mpCuCBtaovsnRL45FlaXhXZK8dZQiYq1VKVuhO+REV+Lx0VuqXtRFo1Z3gcEJ77QgY4q5Kz9N/9MfseFUx+TRTOxH9c6JayE2n19dm1hw6t2HfuZxrPmaVsBqlZ1UrReTELYZpkSmwmqaixqAdLXZOvWUyHJdc6VVtljiIBE+maEZNkQjAmFFxs7Z4YTZB3Fr0lmT1uX6aEoTHddpnyLJV1I6afi1lTI+nKcPEYZNGLL28pQjfWWKbtRCo2nFQfSaSoY/2zJTOWN54zbTNI1aqWpvOyeBC5s5MimZIXpRqLerDUNfka12HJolO2yGRPQOxGqSrcVNMqdkRUxiwi4LYmYMuLCbcUsfWmPLuIobG47bKEyk8aQ4tZU4uEi8cw+b5F5IoUuvFOWcpOpIIzVXoXKeoYZ8e+eELDOdM2g9Ssaun6G2x3iQfBX7NkEVhUmsatWUXka9SUmVZ0bFDA/akETBGXJZiK0kRlsj4z2X5vibeUsI6ebGgsalMqmTOun4uJ86Q4LSUGLUd+41LoJkc1KTuRqlIQVsiRoo7XZ+HyzONozJlZsrXhnNESVq1qxTgLtC5AoggsKk1Tbl6Vr1FTZnHOpOiMSsAUcVkKZ4oiwjOFpRnflauU+i1FOEs3NFYZZ4qdOE2cp4jT0mKQD/HEt5AL3WLjhJKcyUI2UzhD/bOjD6L+2bEHr7j/6INbG6o/k5tBqla1FFWUsO+l3kqSCCwmTWOpm7p8jemwEjjjojMhAZNiLb3dVLbC5DUINT3qeGxaIPmWePao8CzF0FjMdllkL25F98OGiBFxHk9XhIvEYB+oGM/iQjcxmZG2E6kmbWO3FSnq6LrTlZdnMvNn7gof/GQD+2fqZpCaVS1FFUV1XZqFMDNRBBaTpslNNFX5GtVhxTmTojMhAVN0X6pJMtXimmJylP0GxhYTarFb4tljGUs2NBazXRbhTNgrU3bF1MV5NF1p1ywSAyfGpXr0W8iFbhpnSTuRapzR24oWdbOuozdCv2B79c9SC8jOTOCsKlduFqwWWfJaac9Q4KyimqXcR9YgS3ZL7RkK+jNwwBk44Aw4AwecgQPOquBMN+uuT2SPvmMulGaOUesxnaFvv5gqb7Ptam4rLbFKbBlVP7woKVhpVs7KiGDGjzOx/Di6Uq+wyA2rokdEVwmq5Kz8XWvb6ABnDeNsNOVWE87YmjVwVlf7Z4rJLt0sGFuGY8ImqeVS1nyYHk017UUkaZpmjRU/W0NKTKdK02KWFHMlGGELTH3DTG0DTlKxWmJjtKi4Tvdgqchi4bbM6H6fyl2LYkou0sRtM+MW0Cy+zakpSz8wVVtyTVyfaSa7rKj9HKkhY1oufQGdaxykaS/ySLRdLSNWz5LSqdK0mCXFXDEjbOqmmHGRG5/6Dzxtr8+UnNuqAk+pLLlUTt611H8lWEHjsSLbZsYtoMltTnnpExWdO6r6jMq2kXtn5hPnfqbhnEVMKWmSGMNSBCdEoRVRqwjhoW9GZF7RXS2V/U4T0qnStJglxFxxI2zKppi6Fkxw4vpUPCT2dCyVc6GMUjf0ZFI5eddKMSVap0rcNjNmAU3ZfpKVPgmr2JKrhrOrDx06dMu59x86dGFzcUYUWimcKaa9YrbUopwlpWOOyrQYtqsWNcIWEStGN+BkvQWhm4iK62I5j3DG0qNSOXnXZThL3jYzZgEtzhkLq9iSq67dZIA1njPdZJcuveImwRxuid2OqaIEBtK0V8yWWpSzpHTMqkyLiUjUrpq4FSmlEwq1SGq8A8DBiYnr9Jyzq1LuxnPHdGTKXYtiSrKClrxtZoIFNJqK8gAcPnIZI2cn7wofvL6x9s8Uk12a9IrZa5XCJqLQ0lVRsroRpr1SdrVUOjgJ6ZhVmRajkaiYK2qETdsUU9WYiRzQisaxTbl3aFrOXf5jG8PRNvQUOjJx1/I+Eq2gJW6bGbeAxlKRhUvCVv+b1Bhn4blnr+i/oknWA8ZLoTWBlF4tpdIowdmpX8lkvnBqc3A2XgqtiaT0miyc4Zdbm4Oz8VJoTSilF3AG6+jggDNwwBlwBpwBZ+CAs1SRQoKxsuikTkI0PA8e+0V3NN1xEKWNx89WrJKmyypJNOqRfmPa7ouGYgohwdHrmqmbCtbVm0FPm8pZ7BlYXlzEErfwVIazYOyTaaWUOEl7K47LGLQsZ+k3poS0jDLqI7pIIBZGqNkNRxEFtDhnEXsbo+dsHGYWJiZnFe0U6kvzeonhsVTD9+mRx1aOTcOZprPSpFpC/CQta2nGyqQuLDmaqWqL3Og2mcL0mLIVJ1f3SI0WC0Q1bvSNp2/1qSapWyxTLKYlWXBL2h1TkbxF/JS4woKZGlkpI76HZsTOmpNop4xy5vLSimvl8HXHpUe6Lqsem4czzTKYqUqyhCpLU1YpOq5ANXgRj6ZwFt92UsdQ/ZrHNFqWtLmmyOGkwMtMsVim6ts0TZlvimy4kaxEJW/RXT6xoRhtz9BIrkxT2UNTrl6qQjndThlN29Vrf1Urh02yOS494qLxiaLIL7d14kTjTBdeSakWETMkKavUZojrIBKjqU9K33YybnqMDytID4Sp00hwzY4YeRPZG1ECGpUqxTdE1NRwCbtjaqBG/FTrb77WIKu5Yt4xNZsilIvYj8LIGK4vx0RRrZxan/FSt8SxeThThVeKVIsCk6Cs0ro7PjMrlBRN4Sxp20nN9JgpZV1cnRYonmqIsXAWRPuRSVnhJR2fbgAABv5JREFUcmndT42r7Rmq5YpzFlWzKUK5GGe4zvLE6DymlSM9M4ce+bqdJ49N026qwisu1RJqq5iySpVZU0NjVNGfFE1pGBO2ndRMj5mKrEuq00xViSbfaHtwsiRjFstMU1F0JanhknbHVCRvcT8lrrpnqJ4r01T20GT67YhQjuffio6onCCivFPGo/SI2k2PDPS9ssb0JxxnmvCKSbWE2iqqrNLqM2poDIutkqNp44D4tpOa6TGTi87IN1VqtKR2TITQ9uB0WM0Rs1hmCn2bK29Ps+CWtDumInmL+om40T1DtVyZ6h6arPmNCOWEtMwJeC5pclHlHbs3h9+ag7uuHrkpT735pp3XaLQrq06zxJh+nPb3bIgrl/ey91YqAHBW1pVXp7lisGU08dKQMcbrJQMAZ2VrszKzpEH1++pM5vVN4AwccAYOOAPOwAFn4ICzdM70iUOfLxFVLl6Izz3YZmTc6Bim0FGlnZtj/FRwTcQZmSd1jDJPvIwFqBhnAZFJ0Nn2tHPgbBJx5vumbdi+544vZ2S+R+io0s6BsxblTFgoEztQBviJk536FIti+j6cXNfF98sU4jGpvkqeVxS6g7Rz3dQYuJbhTEilhHUuYhrK9/BR13pxJZbQdQmBmHyR6qtEzqiOqsR5zNQYuJbgTEqlxA6UpMFzEWdmRIOjWVCSUiyp1jJV9ZWsLzkzldVnqqkxcC3DmSqwpjtQ2ngh23C88pyJ/TKleEyqrxLrM6GjSjsHzlq03ZSbbfIdKF1s3dAji4i61itmqcvk+2VG1FpOKmfi1z3J5xFTY+BahzMhlZI7UMqZLE3rFbHU5XKzXDG1lhfbu15wxtRUaefSHhlw1srrAUz55RqN00QAYK3P2USwSwactTxnE8IuGXA2CdpNcMAZcAYOOAMHnAFnwNkE268u7shqED44bJqrcvkYiapp2WohdFOzpxx9uuWJzW2tKDbEfFuEdJnRfpP7cyMt7FzEYv6OAZyNibNU6022RQ+jkI/ZVlTLVguhm5o99Yhh8S0y5cuOBl9/sHkYatiCh8f+3LAYXs53lB86O8zgCnBWG84smx+qlo/hWBEtWy2Ebkr2Ikf2ws1RcEtjvi/C8/lCg2bHFm/4ue1ZAU/BUFIGzqpf3+Qmv1RLYbiZIBa2yG+eXb48VJV8DMfStWw1ErqJ7EWOjmq+zrCYpTELb1VGw3huYAjmuD++bX7OjGwZ3B84Gz1n0uQXsxRmMXtdpGDJNz7gD68q+RiOpWrZaiZ0C8xkzgK625LPjszSWGAJzrBGwPZ53Ub8qWExHsaltHvS4FhzcUY24DTfd80EaTcV8yxUliNsfJEqgdcL1cnHSCxFy1YzoZvMnn6kqBCO6JFYGvMd01O7AeTbZBBVEvX3UM3HzondtoDZv/K4tqSZONt67aGfrDt43bwJypmw8cVHAWr/rEL5GI2qa9lqInST2dOPJEMRW2EuYZO0tgYlkX9VhD8KzM5ttvsh+wqRt83G2VPo+N5T3zpxOPOYhUOffXHRF99WRwHVysdoLFXLViOhm5I9/YibTUqIUJEzU3eip4WSsh0Ry+Pmxeg5i4vrM1/4Nydnd2QyN94chle+0HDOsIjMFRtOEmEZ4owYGmTWBquUj3EbhWIUWiuhm5o97WiwCTrUWJKjsDQmOfO4STbBGW+W0TmNhafYFP/m42z+Sf1Hzsvc2H/F/Sv6r5sw6wHa3AEe09NDxU6YIeSxkrVs4yd0swITXMlxQHjuC5nMzAe/giu2icnZKFxl8T2Ao27jgEMr9tGtdyYfZzaIzOrZP1syY3nmuZmrUc0G+4iBqx1nx754Qubxrb+5BvarA1fT+ixcTvera8j+6OBa2sn+2dEHEWNfMM+7dOOMBnBWA7csG3EZcEkum+4qTuOooyoJRdedrrw8k7l62ozwynVbgTPgrAacTYB1dOAMOAPOgDPgDDgDzoAz4Aw4AwecAWfAGXAGnAFnwBlwBpwBZ8AZcAacAWfAGXAGnAFnwBlwBpwBZ8AZcDbenK14JTT/4ppM5rl1u8IHX78dOAPOasHZkhffd/8pB4+cN3/a1i/tmGY+BZwBZzXgbP4nrpiXydx66h2XzD4vkzlj3zuBM+CsBpxdMvud6jvgDDirDWf7OGc3HpgRhiFwBpzVtD67ZPYV/70dvwPOgLNa9c+W9N6BfymcOQM4A85qN95c0X/kvDNmn/ulnbOh3QTOajR/dko/nT87qT/c+tGbr9sOnAFnsB4AnAFnwBlwBpyBA86AM+AMOAPOgDPgDDgDzoAz4AwccAacAWfAGXAGnAFnwBlwBpwBZ8AZcAacAWfAGXAGnAFnwFk9OQNXrQPOgDPgDDgDzoAzcMAZcAacAWfAGXAGnAFnwBlwluz+H9g+e7VRP9egAAAAAElFTkSuQmCC&quot;&gt;screenshot&lt;/a&gt;),
&lt;a href=&quot;//101010.pl/@weirdtreething@donotsta.re/111723029109242853&quot;&gt;two&lt;/a&gt;,
&lt;a href=&quot;//101010.pl/@weirdtreething@donotsta.re/111723748295321731&quot;&gt;three&lt;/a&gt;,
&lt;a href=&quot;//forum.chrultrabook.com/t/general-mild-documentation-oddities-rollup/521/8&quot;&gt;four&lt;/a&gt;,
&lt;a href=&quot;//101010.pl/@weirdtreething@donotsta.re/111723900288585374&quot;&gt;five&lt;/a&gt;
posts about this from Chrultrabook authors, in a few cases &lt;em&gt;while questioned directly&lt;/em&gt;.
Do &lt;em&gt;they&lt;/em&gt; even know why?
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
It turns out they do on the
&lt;a href=&quot;//101010.pl/@weirdtreething@donotsta.re/111724074322859319&quot;&gt;sixth&lt;/a&gt;
attempt: the catchily-designated &lt;a href=&quot;//salsa.debian.org/kernel-team/linux/-/merge_requests/768/&quot;&gt;MR!768 – [x86] Various drivers for ChromeOS devices&lt;/a&gt;.
A &lt;a href=&quot;//101010.pl/@nabijaczleweli/111724158873684896&quot;&gt;trivial analysis&lt;/a&gt; shows this actually wants a kernel at least &lt;samp&gt;6.6.3-1&lt;/samp&gt;,
so at time of writing &quot;current sid&quot;, but hopefully it'&lt;!--'--&gt;ll be in backports later.
&lt;/p&gt;
&lt;h3 id=&quot;installing-making-a-bootable-usb&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-making-a-bootable-usb&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/bootableusb.html&quot;&gt;Making a Bootable USB &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h4 id=&quot;installing-making-a-bootable-usb-flashing-with-dd-linux-macos&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-making-a-bootable-usb-flashing-with-dd-linux-macos&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/bootableusb.html#flashing-with-dd-linux-macos&quot;&gt;Flashing with dd (Linux/macOS) &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;p class=&quot;continuing&quot;&gt;
I'&lt;!--'--&gt;m snidely avoiding comment on the bit where it specs &lt;samp&gt;dd&lt;/samp&gt; but uses no flags that would make it do anything different than &lt;samp&gt;cp&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
No syncing of any kind is criminal, though.
&lt;/p&gt;
&lt;h3 id=&quot;installing-installing-linux&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-installing-linux&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html&quot;&gt;Installing Linux &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div class=&quot;tipwarning tip&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Tip&lt;/dt&gt;&lt;dd&gt;Only Linux kernel 6.4 or newer is supported.&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
It doesn'&lt;!--'--&gt;t say why. Well – why? (See above.)
&lt;/p&gt;
&lt;h4 id=&quot;installing-installing-linux-recommended-distributions&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-installing-linux-recommended-distributions&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html#recommended-distributions&quot;&gt;Recommended Distributions &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div class=&quot;tipwarning warning&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Warning&lt;/dt&gt;&lt;dd&gt;Debian versions older than Debian 12 (Bookworm) are &lt;strong&gt;not supported&lt;/strong&gt;. Debian 12 (Bookworm) requires a custom kernel, the &lt;a href=&quot;//docs.chrultrabook.com/docs/installing/installing-linux.html#fixing-audio&quot;&gt;audio script&lt;/a&gt; will automatically install it for you.&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;ol style=&quot;list-style: symbols(fixed '(a)' '(b)'); display: inline; padding-left: 0;&quot;&gt;
  &lt;li style=&quot;display: inline list-item;&quot;&gt;No the fuck it won'&lt;!--'--&gt;t.&lt;/li&gt;
  &lt;li style=&quot;display: inline list-item;&quot;&gt;Bookworm ships (at time of writing, from &lt;tt&gt;stable-security&lt;/tt&gt;) 6.1.69-1, and the &lt;a href=&quot;//deb.debian.org/debian/dists/bookworm/main/installer-amd64/current/images/netboot/mini.iso&quot;&gt;current d-i image&lt;/a&gt;'&lt;!--'--&gt;s kernel is branded &quot;6.1.66-1 (2023-12-09)&quot;. So it must work. (See above, again.)&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//paste.sr.ht/~nabijaczleweli/9cce0cbdf7a7874520cd8e3c08dde598a6c5e6be&quot;&gt;If it were up to me&lt;/a&gt;,
since this is just about some modules, this box would be
&lt;/p&gt;
&lt;dl class=&quot;continuing&quot;&gt;
  &lt;div class=&quot;tipwarning warning&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Warning&lt;/dt&gt;&lt;dd&gt;Debian versions older than Debian 12 (Bookworm) are &lt;strong&gt;not supported&lt;/strong&gt;. Debian 12 (Bookworm) itself requires the &lt;a href=&quot;//backports.debian.org/Instructions/&quot;&gt;backports kernel&lt;/a&gt; for &lt;a href=&quot;//salsa.debian.org/kernel-team/linux/-/merge_requests/768&quot;&gt;full functionality&lt;/a&gt;.&lt;/dd&gt;&lt;/div&gt;
  &lt;div class=&quot;tipwarning danger&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Danger&lt;/dt&gt;&lt;dd&gt;On Debian 12 (Bookworm), the &lt;a href=&quot;//docs.chrultrabook.com/docs/installing/installing-linux.html#fixing-audio&quot;&gt;audio script&lt;/a&gt; will try to download an install a third-party kernel image. Answer &lt;kbd style=&quot;font-weight: bold;&quot;&gt;N&lt;/kbd&gt; at the &quot;Would you like the script to automatically install this kernel?&quot; prompt!&lt;/dd&gt;&lt;/div&gt;
&lt;/dl&gt;
&lt;p class=&quot;continuation&quot;&gt;
But for now just install
&lt;a href=&quot;//snapshot.debian.org/archive/debian/20240103T032204Z/pool/main/l/linux-signed-amd64/linux-image-6.6.9-amd64_6.6.9-1_amd64.deb&quot;&gt;the sid kernel&lt;/a&gt;.
&lt;/p&gt;
&lt;h4 id=&quot;installing-installing-linux-installation&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-installing-linux-installation&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html#installation&quot;&gt;Installation &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;ol style=&quot;padding-left: 1em;&quot; start=4&gt;
    &lt;li&gt;Install as you would on any other computer.&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
I'm assuming this means you can safely dump the whole &lt;samp class=&quot;path&quot;&gt;/dev/mmcblk0&lt;/samp&gt;? Which I had pause about, but clearly I oughtn't've'd.
&lt;/p&gt;
&lt;h4 id=&quot;installing-installing-linux-fixing-audio&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-installing-linux-fixing-audio&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html#fixing-audio&quot;&gt;Fixing Audio &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;h5 id=&quot;installing-installing-linux-fixing-audio2&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-installing-linux-fixing-audio2&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/installing-linux.html#fixing-audio-1&quot;&gt;Fixing Audio &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h5&gt;
&lt;p class=&quot;continuing&quot;&gt;(yeah there'&lt;!--'--&gt;s two nested identical sexions)&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div class=&quot;tipwarning danger&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Danger&lt;/dt&gt;&lt;dd&gt;Using AVS on a device with max98357a will blow your speakers. You have been warned.&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
this machine does have this device
(apparently &lt;a href=&quot;//github.com/WeirdTreeThing/chromebook-linux-audio/blob/03e64fe3986039502183c953a5d12d14f2ef1c69/setup-audio#L135&quot;&gt;this&lt;/a&gt; is the check,
 and apparently this only affects output to the built-in speakers, and the &quot;audio script&quot; will disable it automatically, maybe),
and:
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;margin-left: 1em;&quot;&gt;&lt;code&gt;$ grep -w CONFIG_SND_SOC_INTEL_AVS /boot/config-6.1.0-9-amd64 /boot/config-6.6.9-amd64
/boot/config-6.1.0-9-amd64:# CONFIG_SND_SOC_INTEL_AVS is not set
/boot/config-6.6.9-amd64&lt;span id=&quot;spacespace&quot;&gt;&lt;/span&gt;:CONFIG_SND_SOC_INTEL_AVS=m&lt;/code&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
and, uncharacteristically,
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/sound/soc/intel/Kconfig?id=v6.6#n212&quot;&gt;Linux doesn'&lt;!--'--&gt;t spec what the modules are called&lt;/a&gt;,
but it &lt;a href=&quot;//web.archive.org/web/20240109135353/https://packages.debian.org/sid/amd64/linux-image-6.6.9-amd64/filelist&quot;&gt;looks like&lt;/a&gt; &lt;samp&gt;snd-soc-avs&lt;/samp&gt;,
so booting the bookworm kernel is safe, but booting a later kernel wants &lt;code&gt;modprobe.blacklist=snd-soc-avs&lt;/code&gt; in the cmdline.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
So, with no contraindications, and a very peculiar sense of drip
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012a.06-DSCN0560cv.JPG&quot;&gt;&lt;img alt=&quot;coreboot logo, below it Press ESC for Boot Options/Settings&quot; src=&quot;/content/assets/blogn_t/012a.06-DSCN0560cv.JPG&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;/content/assets/blogn_t/012a.07-DSCN0559cvcc.JPG&quot;&gt;&lt;img alt=&quot;70s-style text-mode BIOS&quot; src=&quot;/content/assets/blogn_t/012a.07-DSCN0559cvcc.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
(yes, that is a 4:3 EDK2 on an almost-16:9 monitor):
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012a.03-DSCN0557c.JPG&quot;&gt;&lt;img alt=&quot;It's GNU GRUB version 2.06-13+deb12u1 booting debian 12&quot; src=&quot;/content/assets/blogn_t/012a.03-DSCN0557c.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
and I installed sid &lt;a href=&quot;//101010.pl/@nabijaczleweli/111726416245752000&quot;&gt;normally&lt;/a&gt;.
ChromeOS used &lt;samp&gt;discard&lt;/samp&gt;, so I added this to the mount options as well.
Installing GRUB into the removable media path was not necessary.
This yields &lt;a href=&quot;//bugs.debian.org/1060325&quot;&gt;#1060325&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Apparently, pressing &lt;kbd&gt;alt&lt;/kbd&gt; and &lt;kbd&gt;˂&lt;/kbd&gt; or &lt;kbd&gt;˃&lt;/kbd&gt; (the arrow keys) cycles between the available VTs.
This is useful because there are no function keys, and &lt;kbd&gt;alt&lt;/kbd&gt; and &lt;kbd&gt;←&lt;/kbd&gt; or &lt;kbd&gt;→&lt;/kbd&gt; (not the arrow keys) doesn'&lt;!--'--&gt;t do anything.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
I also persisted the blacklist after first boot
and fixed the &lt;a href=&quot;//bugs.debian.org/1060331&quot;&gt;touch&lt;/a&gt;&lt;a href=&quot;//bugs.debian.org/1060332&quot;&gt;pad&lt;/a&gt;
because the default decroded-ass no-tap-to-click behaviour is more infuriating than you'&lt;!--'--&gt;d think in a.d. 2023.
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot; id=&quot;xorg.conf.d&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;chrust&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; cat /etc/modprobe.d/avs.conf&lt;/span&gt;
# https://docs.chrultrabook.com/docs/installing/installing-linux.html#fixing-audio-1
# DANGER: Using AVS on a device with max98357a will blow your speakers. You have been warned.
blacklist snd-soc-avs
&lt;span class=&quot;token info punctuation&quot;&gt;chrust&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; cat /etc/X11/xorg.conf.d/touchpad.conf&lt;/span&gt;
Section &quot;InputClass&quot;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;Identifier &quot;Touchpads normal&quot;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;MatchIsTouchpad &quot;on&quot;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;Option &quot;Tapping&quot; &quot;on&quot;
EndSection
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h3 id=&quot;installing-post-install&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-post-install&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/post-install.html&quot;&gt;Post Install &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div class=&quot;tipwarning tip&quot;&gt;&lt;dt class=&quot;smallcaps&quot;&gt;Tip&lt;/dt&gt;&lt;dd&gt;Install &lt;a href=&quot;//github.com/death7654/Chrultrabook-Controller/releases&quot;&gt;Chrultrabook Controller&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt; for fan controls, keyboard backlight controls, system information and more.&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
This machine has neither, and the &quot;system information&quot; in the screenshots appears to be the first three lines of dmesg.
&lt;/p&gt;
&lt;h4 id=&quot;installing-post-install-linux&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-post-install-linux&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/post-install.html#linux&quot;&gt;Linux &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt;
&lt;h5 id=&quot;installing-post-install-linux-general-qol-fixes&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-post-install-linux-general-qol-fixes&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/post-install.html#general-qol-fixes&quot;&gt;General QOL Fixes &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h5&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
    &lt;li&gt;Run the &lt;a href=&quot;//github.com/WeirdTreeThing/chromebook-linux-audio&quot;&gt;audio script&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt; if you haven'&lt;!--'--&gt;t already.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
Heed the &lt;a href=&quot;#installing-installing-linux-recommended-distributions&quot; class=&quot;smallcaps tipwarning danger&quot;&gt;Danger&lt;/a&gt;, of course, if you installed Bookworm.
The script checks if you have an audio daemon installed (in my case wireplumber), so make sure you do install it first.
But, yes, this does work:
&lt;button onclick='Array.from(document.querySelectorAll(&quot;#expandall-target details&quot;)).forEach(function(d) { d.open = !document.expandall_open; }); document.expandall_open = !document.expandall_open;'&gt;Expand/collapse all&lt;/button&gt;
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot; id=&quot;expandall-target&quot;&gt;
&lt;pre class=&quot;language-ANSI&quot;&gt;&lt;code class=&quot;language-ANSI&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;chrust:/tmp&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; git clone https://github.com/WeirdTreeThing/chromebook-linux-audio&lt;/span&gt;
Cloning into '&lt;!--'--&gt;chromebook-linux-audio'&lt;!--'--&gt;...
Resolving deltas: 100% (256/256), done.
&lt;span class=&quot;token info punctuation&quot;&gt;chrust:/tmp&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; cd chromebook-linux-audio/&lt;/span&gt;
&lt;span class=&quot;token info punctuation&quot;&gt;chrust:/tmp/chromebook-linux-audio&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; ./setup-audio&lt;/span&gt;
[sudo] password for nabijaczleweli:
&lt;span class=&quot;bright yellow&quot;&gt;WARNING: You may run into audio issues, even after running this script. Please report any issues on github.&lt;/span&gt;
&lt;span class=&quot;bright blue&quot;&gt;Installing SOF
Installing SOF firmware
Installing modprobe config
Installing UCM configuration&lt;/span&gt;
Cloning into '&lt;!--'--&gt;/tmp/chromebook-ucm-conf'&lt;!--'--&gt;...
Resolving deltas: 100% (614/614), done.
&lt;span class=&quot;bright blue&quot;&gt;Increasing alsa headroom (fixes instability)&lt;/span&gt;
&lt;span class=&quot;bright magenta&quot;&gt;Audio installed successfully! Reboot to finish setup.&lt;/span&gt;
&lt;span class=&quot;token info punctuation&quot;&gt;chrust:/tmp/chromebook-linux-audio&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; for f in $(zfs list -t snap -Ho name); do zfs diff -h $f; done&lt;/span&gt;
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/modprobe.d
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/modprobe.d/snd-sof.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/wireplumber
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/wireplumber/main.lua.d
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/wireplumber/main.lua.d/51-increase-headroom.lua
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/lintian/overrides
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/hda
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/common/pcm
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/acp3xalc5682m98
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-glkda7219ma
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/platforms
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/AMD/acp3xalc5682m98/acp3xalc5682m98.conf
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/Intel/sof-glkda7219max/sof-glkda7219max.conf
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/hda/hdmi.conf
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/common/pcm/split.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-apl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-cnl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-icl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-jsl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-tgl-h.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-tgl.ri&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-adl-n.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-adl-s.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-adl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-apl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-cnl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-ehl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-icl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-jsl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-tgl-h.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-tgl.ri&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-apl.ldc&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-bdw.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-bdw.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-byt.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-byt.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-cht.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-cht.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-cnl.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-icl.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-jsl.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-tgl-h.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-tgl.ldc&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-hda-generic-2ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-hda-generic-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-hda-generic-idisp.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-hda-generic.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-cs42l43-l0-cs35l56-l12.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-max98357a-rt5682-ssp2-ssp0-2ch-pdm1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-max98357a-rt5682-ssp2-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-max98357a-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-rt1019-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-rt1318-l12-rt714-l0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-rt711-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-rt711-l0-rt1316-l23-rt714-l1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-rt712-l0-rt1712-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-rt713-l0-rt1316-l12-rt1713-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-rt713-l0-rt1316-l12.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-rt722-l0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ace-tplg/sof-mtl-sdw-cs42l42-l0-max98363-l2.tplg&lt;/details&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ipc4
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ipc4/mtl
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ipc4/mtl/community
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ipc4/mtl/community/sof-mtl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ipc4/mtl/intel-signed
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ipc4/mtl/intel-signed/sof-mtl.ri
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-acp.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-cs35l41.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-dmic2ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-dmic2ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-dmic2ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-dmic4ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-dmic4ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-dmic4ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-ssp1-hdmi-ssp02.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-es8336.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98357a-rt5682-2way.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98357a-rt5682-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98357a-rt5682-rtnr.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98357a-rt5682-waves-2way.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98357a-rt5682-waves.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98357a-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98360a-da7219.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98360a-nau8825.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98360a-rt5682-2way.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98360a-rt5682-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98360a-rt5682-rtnr.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98360a-rt5682-waves.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98360a-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98373-nau8825-dts.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98373-nau8825.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98390-rt5682-google-aec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98390-rt5682-rtnr.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98390-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-max98390-ssp2-rt5682-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-nau8318-nau8825.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-nau8825.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-nocodec-ci.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-nocodec-hdmi-ssp02.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt1015-nau8825.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt1019-nau8825.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt1019-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt1316-l1-mono-rt714-l0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt1316-l12-rt714-l0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt1316-l2-mono-rt714-l0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt1316-l2-mono-rt714-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt5650.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-l0-rt1308-l12-rt715-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-l0-rt1316-l12-rt714-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-l0-rt1316-l13-rt714-l2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-l0-rt1316-l2-2ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-l0-rt1316-l2-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-l0-rt1316-l3-2ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-l2-rt1316-l01-rt714-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711-l2-rt1316-l01.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-rt711.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-adl-sdw-max98373-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-da7219.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-demux-pcm512x.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-dmic2ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-dmic2ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-dmic2ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-dmic2ch-ssp5.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-dmic4ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-dmic4ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-dmic4ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-dmic4ch-ssp5.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336-ssp5.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-es8336.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-keyword-detect.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-nocodec-ci.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-pcm512x-master-44100.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-pcm512x-master.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-pcm512x.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-rt298.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-tdf8532.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-apl-wm8804.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-bdw-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-bdw-rt286.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-bdw-rt5640.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-bdw-rt5677.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-cx2072x-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-cx2072x.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-da7213-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-da7213.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-es8316-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-es8316.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-max98090.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5640-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5640.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5645-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5645.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5651-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5651.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5670-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5670.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5682-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-byt-wm5102-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-cx2072x.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-da7213.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-es8316.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-max98090.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-nau8824.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-rt5640.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-rt5645.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-rt5651.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-rt5670.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cht-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-da7219-max98357a.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-da7219-max98390.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-demux-rt5682-max98357a.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-demux-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-dmic2ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-dmic2ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-dmic2ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-dmic4ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-dmic4ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-dmic4ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-es8336-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt1011-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt5682-kwd.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt5682-max98357a.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt700-2ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt700-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt700.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt711-rt1308-mono-rt715.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cml-rt711-rt1308-rt715.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cnl-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-cnl-rt274.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-ehl-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-ehl-rt5660-nohdmi.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-ehl-rt5660.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-cs42l42.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-da7219-kwd.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-da7219.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-dmic2ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-dmic2ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-dmic2ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-dmic2ch-ssp5.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-dmic4ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-dmic4ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-dmic4ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-dmic4ch-ssp5.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336-ssp5.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-es8336.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-glk-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-1ch-pdm1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-1ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-2ch-kwd.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-2ch-pdm1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-2ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-3ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-4ch-kwd.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-idisp-2ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-idisp-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic-idisp.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-hda-generic.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-dmic-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-dmic2ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-dmic2ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-dmic2ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-dmic4ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-dmic4ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-dmic4ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-es8336-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-rt5682-kwd.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-rt700-2ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-rt700-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-rt700.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-icl-rt711-rt1308-rt715.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-compr-wm8960-mixer.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-cs42888-mixer.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-cs42888.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-drc-wm8960.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-eq-fir-wm8960.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-eq-iir-wm8960.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-nocodec-sai.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-wm8960-kwd.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-wm8960-mixer.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8-wm8960.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8mp-compr-wm8960-mixer.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8mp-drc-wm8960.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8mp-eq-fir-wm8960.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8mp-eq-iir-wm8960.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8mp-wm8904.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8mp-wm8960-kwd.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8mp-wm8960-mixer.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8mp-wm8960.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8ulp-9x9-btsco.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-imx8ulp-btsco.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-cs42l42-mx98360a.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-da7219-mx98360a.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-da7219.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-dmic2ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-dmic2ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-dmic2ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-dmic4ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-dmic4ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-dmic4ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-es8336-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-rt5682-mx98360a.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-rt5682-rt1015-xperi.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-rt5682-rt1015.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-jsl-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-mt8186-mt6366-da7219-max98357.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-mt8186-mt6366-rt1019-rt5682s.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-mt8195-mt6359-max98390-rt5682-google-aec-rtnr.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-mt8195-mt6359-max98390-rt5682-rtnr.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-mt8195-mt6359-max98390-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-mt8195-mt6359-rt1019-rt5682-dts.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-mt8195-mt6359-rt1019-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rn-rt5682-max98360.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rn-rt5682-rt1019.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt1316-l12-rt714-l0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-l0-rt1316-l12-rt714-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-l0-rt1316-l12.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-l0-rt1318-l12-rt714-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-l0-rt1318-l12.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-l0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-l2-rt1316-l01-rt714-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-l2-rt1316-l01.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711-l2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-rpl-rt711.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-smart-amplifier-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-dmic2ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-dmic2ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-dmic2ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-dmic4ch-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-dmic4ch-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-dmic4ch-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-ssp0.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336-ssp1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-es8336.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-h-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-max98357a-rt5682-pdm1-drceq.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-max98357a-rt5682-pdm1-google-aec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-max98357a-rt5682-pdm1.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-max98357a-rt5682-rtnr.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-max98357a-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-max98373-rt5682-igonr.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-max98373-rt5682-xperi.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-max98373-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-nocodec-ci.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-nocodec-hdmi-ssp15.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-nocodec.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt1011-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt1308-ssp2-hdmi-ssp15.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt5682-ssp0-max98373-ssp2-xperi.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt5682-ssp0-max98373-ssp2.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt711-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt711-l0-rt1316-l1-mono-rt714-l3.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt711-rt1308-2ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt711-rt1308-4ch.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt711-rt1308-mono-rt715.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt711-rt1308-rt715.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt711-rt1316-rt714.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-rt715-rt711-rt1308-mono.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-tgl-sdw-max98373-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-whl-demux-rt5682.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-whl-rt5682-kwd.tplg
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-tplg/sof-whl-rt5682.tplg&lt;/details&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/doc/firmware-sof-signed
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/doc/firmware-sof-signed/changelog.Debian.gz
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/doc/firmware-sof-signed/copyright
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/lintian/overrides/firmware-sof-signed
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-adl-n.ri&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-adl-s.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-adl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-cfl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-cml.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-ehl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-glk.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-rpl-s.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/community/sof-rpl.ri&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-cfl.ri&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-cml.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-glk.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-rpl-s.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/intel-signed/sof-rpl.ri&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-adl-n.ldc&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-adl-n.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-adl-s.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-adl-s.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-adl.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-adl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-apl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-cfl.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-cfl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-cml.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-cml.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-cnl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-ehl.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-ehl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-glk.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-glk.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-icl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-jsl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-rpl-s.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-rpl-s.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-rpl.ldc
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-rpl.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-tgl-h.ri
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof/sof-tgl.ri&lt;/details&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/lib/firmware/intel/sof-ipc4/mtl/sof-mtl.ri
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-nau8825&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-nau8825/HiFi.kano.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-nau8825/HiFi.osiris.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-nau8825/sof-nau8825.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-ssp_amp&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-ssp_amp/HiFi.vell.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-ssp_amp/sof-ssp_amp.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-bxtda7219ma&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-bxtda7219ma/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-bxtda7219ma/sof-bxtda7219ma.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_da7219&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_da7219/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_da7219/avs_da7219.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_dmic&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_dmic/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_dmic/avs_dmic.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98357a&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98357a/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98357a/avs_max98357a.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98373&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98373/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98373/avs_max98373.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98927&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98927/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_max98927/avs_max98927.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_nau8825&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_nau8825/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_nau8825/avs_nau8825.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_rt5663&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_rt5663/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_rt5663/avs_rt5663.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_ssm4567-adi&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_ssm4567-adi/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/avs_ssm4567-adi/avs_ssm4567-adi.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/hdaudioB0D2&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/hdaudioB0D2/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/hdaudioB0D2/hdaudioB0D2.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682s-rt1&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682s-rt1/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682s-rt1/sof-rt5682s-rt1.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cml_max9839&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cml_max9839/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cml_max9839/sof-cml_max9839.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cml_rt1011_&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cml_rt1011_/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cml_rt1011_/sof-cml_rt1011_.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cmlda7219ma&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cmlda7219ma/HiFi.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cmlda7219ma/sof-cmlda7219ma.conf&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-glkda7219ma/HiFi.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-glkrt5682ma&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-glkrt5682ma/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-glkrt5682ma/sof-glkrt5682ma.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-da7219max98&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-da7219max98/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-da7219max98/sof-da7219max98.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682s-hs-&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682s-hs-/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682s-hs-/sof-rt5682s-hs-.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/mt8183_da7219_r&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/mt8183_da7219_r/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/mt8183_da7219_r/mt8183_da7219_rt1015p.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/mt8183_mt6358_t&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/mt8183_mt6358_t/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/mt8183_mt6358_t/mt8183_mt6358_ts3a227_max98357.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/HD-Audio Generic&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/HD-Audio Generic/HD-Audio Generic.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/HD-Audio Generic/HiFi.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/acp3xalc5682101&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/acp3xalc5682101/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/acp3xalc5682101/acp3xalc5682101.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/acp3xalc5682m98/HiFi.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/HDA ATI HDMI&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/HDA ATI HDMI/HDA ATI HDMI.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/HDA ATI HDMI/HiFi.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/acpd7219m98357&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/acpd7219m98357/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/acpd7219m98357/acpd7219m98357.conf&lt;/details&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/cs42l42
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/cs42l42/init.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/hda/hdmi234.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/hda/hdmi2345.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/hda/hdmi345.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/hda/hdmi567.conf
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/max98357a&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/max98357a/speaker.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/max98373&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/max98373/init.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/max98373/speaker.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/max98390&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/max98390/init.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1011&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1011/init.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1011/speaker.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1015&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1015/init.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1015/speaker.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1015p&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1015p/speaker.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1019&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1019/init.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1019p&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt1019p/speaker.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt5682s&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt5682s/headset.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/codecs/rt5682s/init.conf&lt;/details&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/platforms/intel-sof
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/platforms/intel-sof/platform.conf
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682/codecs.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682/rt5682-headset.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682/rt5682-init.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-rt5682/sof-rt5682.conf&lt;/details&gt;
&lt;details&gt;&lt;summary&gt;+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cs42l42&lt;/summary&gt;
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cs42l42/HiFi.conf
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/share/alsa/ucm2/conf.d/sof-cs42l42/sof-cs42l42.conf&lt;/details&gt;
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/cache/apt
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/cache/apt/archives
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/cache/apt/archives/partial
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/cache/apt/archives/firmware-sof-signed_2023.12-1_all.deb
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/lib/dpkg/info/firmware-sof-signed.md5sums
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/lib/dpkg/info/firmware-sof-signed.postinst
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/lib/dpkg/info/firmware-sof-signed.postrm
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/lib/dpkg/info/firmware-sof-signed.preinst
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/lib/dpkg/info/firmware-sof-signed.list
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/log/apt
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/log/apt/term.log
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/log/apt/history.log
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/var/log/dpkg.log
&lt;span class=&quot;token info punctuation&quot;&gt;chrust:/tmp/chromebook-linux-audio&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; cat /etc/modprobe.d/snd-sof.conf&lt;/span&gt;
options snd-intel-dspcfg dsp_driver=3
&lt;span class=&quot;token info punctuation&quot;&gt;chrust:/tmp/chromebook-linux-audio&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; cat /etc/wireplumber/main.lua.d/51-increase-headroom.lua&lt;/span&gt;
rule = {
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;matches = {
&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;{
&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;{ &quot;node.name&quot;, &quot;matches&quot;, &quot;alsa_output.*&quot; },
&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;},
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;},
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;apply_properties = {
&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;[&quot;api.alsa.headroom&quot;] = 4096,
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;},
}

table.insert(alsa_monitor.rules,rule)
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
And after a reboot I could play aloud
&lt;a href=&quot;//nabijaczleweli.itch.io/002-fluorescent-heart&quot;&gt;my&lt;/a&gt; &lt;a href=&quot;//nabijaczleweli.bandcamp.com/album/fluorescent-heart&quot;&gt;album&lt;/a&gt;,
all without the &lt;a href=&quot;#installing-installing-linux-fixing-audio2&quot; class=&quot;smallcaps tipwarning danger&quot;&gt;Danger&lt;/a&gt;ous driver.
&lt;/p&gt;
&lt;p id=&quot;installing-post-install-linux-general-qol-fixes-cros-keyboard-map&quot;&gt;&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
    &lt;li&gt;Run the &lt;a href=&quot;//github.com/WeirdTreeThing/cros-keyboard-map&quot;&gt;cros-keyboard-map&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt; script to remap top row FX keys.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
This is actually much less annoying than the Home/End/PgUp/PgDn situation,
which on normal small keyboards is Fn+←/→/↑/↓,
but this is not mapped to &lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;˂&lt;/kbd&gt;/&lt;kbd&gt;˃&lt;/kbd&gt;/&lt;kbd&gt;˄&lt;/kbd&gt;/&lt;kbd&gt;˅&lt;/kbd&gt; here,
which sucks shit.
No Delete is pretty bad as well.
The top row is, accd'&lt;!--'--&gt;g to &lt;code&gt;xev&lt;/code&gt;,
&lt;/p&gt;
&lt;dl class=&quot;keyboard continuing&quot;&gt;
  &lt;dt&gt;&lt;kbd&gt;esc&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;Escape&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;←&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86Back&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;→&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86Forward&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;⟳&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86Reload&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle with chevrons in the top-left and bottom-right internal corners&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVR42u2azUoDMRDHF6TtRZ+gwnoQ8VXam3ZbkPoGem3foIf2qm/gIthWX0fEQwtKvasHWxbWCYwQYj5WTWYW24E/vXQz81uSyWSyUZ7n0Toq2oAX+bPeqqAO6Bo0Ay1BuSe9ge5x7A76+mYc4EegR4+gLglfx5zgW6AhIbCqIcZADs4JLcOTgieOgMQavwGdgPZM69Ji26BDfH7syBkJFbiAeLIEcgfaj/yaGO/W4O9ZxEQB3jUEkIH6UVjrox/V9ykF+MQAHhpahld9TynA5xrHEyW4gWZdLkANT/Dqy59TgH9oEtmuElhmmBULT+B15cUuKcBVmFRXSBn04nHKX8ljc4AnBcFF9m16BG9xg8cO8FAWc4PXmMCr3OA6y6TEF9JKBy62s3f8XStwKmMF3wkINsBGxKCMa/wgILgtV8Rl3Me9T+Uy7uMpEzh55fZaoFb/rTWwns8dSbSunBlIavUHTVBjT+ALS50v25jjdGY6j/cCgsvJrcd1Hrd1YM7/CN7EE5w87krazs44OzCunts0UM9tYjn11ai6rO0CXdYUtxzRZa38ELSCz7VwHFuXtU3dVx+VoK8+4rpJuWCEvuS6SZErKOq7s6QMl4ZfCa+LiW2GmdgX6ArHnKIPntvSzYcB/0CfmeytTddSfkMAAAAASUVORK5CYII=&quot;&gt;&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;nothing?&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle, to its right are two vertical stripes&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAABy0lEQVR42u2ZX0rDQBDGA9L2RU+gGAURr6NNC1JvoK/NHdpXvYFFMIleQEofPISIDxb0BOpDW4Q4K/NQprvZJcn+gc3ARynMfskvZDezs0Ge54GPChrwBtxTcEG0QX3QHegdtATlJfUNekGvPnrXHnWAn4LeKoDKxLzPXALfAo00AlON8Jo0DkFTfFOm+F+aUwXcJPQ6PI0ZyXlWySkLHhXcHJvf96Bz0IFkjm6DTjA3UVwbIuJBx/xyrrORUwacgXwIbuoRdFRh6rGxDxLwT/IweTkbU5qqDPiAY8Seclzj2hOjpwj+wgZ4yjGKNXxx4gLwzAb4nJikgb5IBWBzG+ALspDtaQTfFSx4Sxvg6waTQH/cSuCsgEcGwLsugocGwEMXwTsGwNsugu/4Cn7s66vu7eLm1efsy3ABs3ClgHklJolG8MSlkpVXPw81QA9d26SItqVXNUJfurgtLWpEZDU0IlKFRkTHBjiLnqT1NMHPEGs9tQpAW5jTxTEqraeeDEonOIuxhWbjWAVKNzhr9V4bhL4RtJeNNRt5lZXuA4WiCvGJ5M9Ucuo8Qhrg4saOkFYVQFfokaGn7AhpH8F+8DdUyWkODRvwBvxffz5Mo4mV7gMcAAAAAElFTkSuQmCC&quot;&gt;&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86LaunchA&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;&lt;small&gt;☀️&lt;/small&gt;&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86MonBrightnessDown&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;☀️&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86MonBrightnessUp&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;🔇&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86AudioMute&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;🔉&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86AudioLowerVolume&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;🔊&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86AudioRaiseVolume&lt;/code&gt;&lt;/dd&gt;
  &lt;dt&gt;&lt;kbd&gt;🔒&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;XF86Sleep&lt;/code&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;continuing&quot;&gt;
(🔒 is the Suspend Key and handled by logind by default;
 to see it you need to unmap it in &lt;samp class=&quot;path&quot;&gt;/etc/systemd/logind.conf&lt;/samp&gt;;
 I &lt;a href=&quot;//bugs.debian.org/1060389&quot;&gt;settled on&lt;/a&gt;
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot; style=&quot;padding-left: 1em;&quot;&gt;&lt;!--
 --&gt;[Login]
HandlePowerKey=hibernate
HandleSuspendKey=ignore
HandleSuspendKeyLongPress=ignore&lt;!--
 --&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
.)
Caps Lock is replaced with
&lt;/p&gt;
&lt;dl class=&quot;keyboard continuing&quot;&gt;
  &lt;dt&gt;&lt;kbd&gt;🔍&lt;/kbd&gt;&lt;/dt&gt;&lt;dd&gt;&lt;code&gt;Super_L&lt;/code&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Why &lt;kbd&gt;🔉&lt;/kbd&gt;/&lt;kbd&gt;🔊&lt;/kbd&gt; are on the keyboard when there are physical buttons for them (or vice versa) is beyond me, too.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The upstream instructions say to run &lt;samp class=&quot;path&quot;&gt;install.sh&lt;/samp&gt;,
but on Debian
that installs &lt;a href=&quot;//github.com/rvaiya/keyd&quot;&gt;keyd&lt;/a&gt; off unchecked HEAD
(which until &lt;a href=&quot;//github.com/rvaiya/keyd/commit/03d4a27b83ac69bc6854f7759de6124cc5e74d6d&quot;&gt;three weeks ago&lt;/a&gt; dumped shit into &lt;samp class=&quot;path&quot;&gt;/usr&lt;/samp&gt;,
 and the installer checks for
 &lt;a href=&quot;//github.com/WeirdTreeThing/cros-keyboard-map/blob/25b0e9c2a10fc834d414b427c40d572fb38cda14/install.sh#L26&quot;&gt;&lt;samp class=&quot;path&quot;&gt;/usr/bin/keyd&lt;/samp&gt;&lt;/a&gt;
 and will do it again;
 it continues to run unadorned &lt;a href=&quot;//github.com/rvaiya/keyd/blob/dcbb68b12f71245121035b730b50872802a259b4/Makefile#L71&quot;&gt;&lt;code&gt;groupadd keyd&lt;/code&gt;&lt;/a&gt;
 to add a system group!),
first cloning it to no-where,
and &lt;a href=&quot;//github.com/WeirdTreeThing/cros-keyboard-map/blob/25b0e9c2a10fc834d414b427c40d572fb38cda14/cros-keyboard-map.py#L77&quot;&gt;generates a config&lt;/a&gt;
with
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;# make vivaldi keys act like vivaldi keys when super isn'&lt;!--'--&gt;t held&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; scancode &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; physmap&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;# Map zoom to f11 since most applications wont listen to zoom&lt;/span&gt;
&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; vivaldi_scancode_to_keyd&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scancode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;zoom&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;mapping &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;f11&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;mapping &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vivaldi_scancode_to_keyd&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scancode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;config &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string-interpolation&quot;&gt;&lt;span class=&quot;token string&quot;&gt;f&quot;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;vivaldi_scancode_to_keyd&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;scancode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; = &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;mapping&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\n&quot;&lt;/span&gt;&lt;/span&gt;

&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;# map lock button to coffee&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;config &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;\nf13=coffee\nsleep=coffee\n&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented&quot;&gt;
deadass
&lt;a href=&quot;//commons.wikimedia.org/wiki/File:Vivaldi.jpg&quot;&gt;&lt;img class=&quot;iconic&quot; alt=&quot;vivaldi&quot; src=&quot;data:image/png;base64,R0lGODlhQABAAOYAAAMBAbQvDW8KBdSsejcGBcGTXItbMa2BUHpEJNOxk6t7S4IyFVIjExMFBcKZdq5uQPbjtJ8fCOrOoFMIBsqaYuurd6NmO7KGXKNGInAnFK9WK3E5HZhGIBsFBcOUZNuMU+LBnD8UDZ07G9GHUJQZCAsEBNaibNKkeJFiPc+NXe68i9Kui7J9T+nNrnMcDN+bZF1ENZI8GUsHBZMuFaR2TeGWXSYFBY1ULIw5G9yTXLBIIruTbMp0RIsrE8uifIBMJO2zf1gWC9+tety/oGArFcNvQJxrPEMGBRQJCLqMX9B8TOCWZJI2Fe/CloIqEst6RqpcMqN0Q4wRB7qLVNyWYY0fDEoYD7xuPpVgM922jOOldSkLCe7YsvLNnpVLL92yhIJPLfC8guWiaYU4G4IQB797THsoEsqba7OLZcqcc9WSWTcNCsyni7g3E5xsRF0kEty4k6AqEGQ0GmQUChsKCbWEUbdiM6x9VF0JBdOsg3UjDnMUCerYwqNTJ8aVagAAACH5BAkAAH8ALAAAAABAAEAAAAf+gACCg4SFhoQlhyWLiYyOJQ2QdA2UkJSXlYmHm4iLhZqPoaIlSEiUSHR0ppgNnJyNngCwi0izo6GlqKm7pZSuio4NHQ2TkIuUdDY2w5G3jA25p9FIrpqdDTYhVlYhIQRrIVvKIW9vDNwhNpmhso6oubqb1rLtJR1rRBsbCGAICPrn3iC4ccOAPwREQjS7JQhSL2imfg06tuUIEYJYULihcYeGGzBgUHC8Y8HIDQQGwITowLChtEi+qgnqsCUEgw0ojNBAc+fChSQ+HFy4o0DBnSR1FHhEcWODFZYLQTUMdkqirC1WcNKwcIdNgqBpBuTxscNnEj8+/KTwgyaKGxT+G8JlojcxWAlVVhuEIAJmJxo0DtI48JElwZAVDhwcXvE1qIMkLIz8s7Il6rxH7SQ2yPoDBdckKRywyZMFzhDTQ3z4SJDghGo/fh4rhbuS3S1q1UKETOLgqI8TJxJkAcGFDxzGZ/wMaTEkD3APsXfQQIECgULLj5pFdNVBDgo0CRzsWOEDDogWcCRwGTKktZ8TK+CY/iIk6IoCdepEwbJhi6ipmLmyBgIoKLCDA6atxt4QTYBwAhsppHDCCy+ccUYaJ3wBx1dnUOCBAh9Z0UwnjNQSyyab/UADCxc4kEceA6xwGgggfOFHGSl8kQV9WQBBgYQgbJhAGmfUcYcbRPj+5wiAAR6CBD5YHJAEBT7koeMQfAQJh1pZcMFFF2CGqYIQZ5jW2glnJEGDSusc4w4pnNDBwA1RJIEYaSAs1wIIWWihRQt8tNBCmGE2AYSEpQ0QmAdrrkHMQiY2ecgWcujkA3nlsZcnHFoIoR4XLTRBaBdNhPFFDkWkcJxqadwBRpJtMtJOKSgyYEAULfI2XJ5ZCPGCFk0I2sSwohYKhBYj2PFAFis0S8GRcUViiKwnFrIFAkZd4EEdVZpWowkvECuuCkAAMSwQFSzxhAYYlOGgDxSoCQYDdNBV15KHhGCAAkkkcWF8WQz3BQVCDKvCweRWoPDBx6KKgQZ9mABCAh7+XECDAW/4dy87hxBhhAIeeHBhHnAEHOQZYRxscLkLq3BuDk8UUQQHZWzoh8VuRFtXPbJOywAWUdRBgWsD7JhnAn6EkXITEpCLbgUuN6FCBS9QkQMPIjyQRgJJ+LSmFXSc+OY8g3TwhgF3hJxHc0WbtkIdQKjQhQSlsgw1w0CIkUMKPGDQxwlD7JAUDVhYYQO1/xmyha00/HRGr0J88cUKaVwBRBik0lcBuloknMMDGhShRBEYMFEG10ncEcUNQVQ2SmaG2MAAgQrUUYAJQuQRORweXKE0EC9c8fAILwihwgt2BDEBBkVccYUGTHiRwrZKGRDO69US0gERP2Bh4Bn+HgwglnkPFBEGEEKMIIIAAmjwQrlX4HFEBhmMgYEOGnDAAnRG3mG965iRiuI2gAUaHEhtA9DQAG4wAiE4LwMy6MEMqHCwMEBhAhmwQAi8IIIe6MALDvhCeNrCujWwxBSiaIUhQjCQoPXLD3D4QgILwAExODAFJymCHURVqifsQQcRSoEddIiDJBQmDZG5QQZMiAkUZo8QIdjArWo3hcc5Rwh1qOGOPOcpqakgB0wgnhgopAUeVMELWjiBmpqSgRCErR5MyhcRbpWfJKQBRifgHQfCRSNyRc1lX+RACtCHrhfwoAcTKMMX1FQdIlCmFpmR1CC2wJcCJcEDJxBffJL+0IccYG5ccZPaBzDwBJaJ4QNFcEIQWMCGO2ABC686AkuccYgOMOAHtyqALhNopSn0YQQpQ9j5FlaBGuBPDGP8wLrMIAMa+CEJD8DCDzZgQmeQTRANuKX3zqAaISTwCzS0QwV+Vy4tLIFlxmTCB16QgxEIzwwEcEMa6vAANhIAO5KcyUWC5oevAIc+FLCABsaJLmRSIQU65EERXLAH932ABzpgQhDWgIWhvAUBb7jnIyL1RAA0gHsF3EHIzuCsAjwACi9Q2BitVoERPMAFApjAHjAwgiJoQAQzOEIINqIAC/RjidKiBUevCQAbcI+OSSgAlQYwBfxYYAQVGGMOciD+Bi2M8wpm6AETMGAHdokgBgQgABiMgAUjgOEGRFDHMfA5rTXIYaxS8oAPOkQBCtRhCjcoAtXUQLwXIJOdI7ipCESgAwyIAAc2IAAByQoSET3DiaXo6E0MgIYdHCgxdf0QC3Bgh7+OILAYwIELJDiHPezBCYMVQQbuMRCQbOANh7PLM+C0QgKh4QK2440DTjCFBzzACTSlAl9r+gAvQEEEEdiDAKrAhBkwQQRBaMAaNvDTNSjJmpuwAYHuUIAkoMEPSq2YUDjggiuMgK9UpZoSNBAHEjDhvT0QgRMIsIU1ZGUDEw2gLWhrLSkewAN/ScIUBsytM1hABjj4wFRfkIL+D7gztBgwbA8mLMt7WIEICGjjkjaML2u94QcKuAAaXlgAFtQhTRawwhF08ITPjiAF7GTnupjgAhfIgCUd6MYb8BtbxO13Urc0QhIs6wEKTEEBLMDPA4LQgSM4QQNPKMMIppqs/GVgDjJYBjbeEIIgpKMD9PDEfjtagiCERAF/ucAU6mDiOtCAddiQwRwWwAENQAF6GTCDC7CsDmzUlwDdcBTPQjGXfKHECFHg1wUO8IAoPMACGyBACWwggwlUusZzmMAEghCEIxBgGcOwgXXXUM2eDbrDhfjoDxBdh64RZT83mAMBOkCATTPU0pW2dFjDugxRW3cLGmNSiYKBIgL+ICA/dajYAdBAOP5M4AhHkIELzKAHPVx5DkHI9RGUQRNwkDpst4BGJWLyib1gQTxIOcABPGKSlGRbzmZwwgKYsABqK09+vOZGB5bhY3eAexWK+JkCfBCywdGArIdGQQY2rYcFxAAHC1iAHpQXhE8foRygNsaP3bTWTRDhlZbtrgKiAGs5/OAGU0gC/RYwhhhwQN56wDYewnoEkJR6FnWJ7CmIsQk5lHXZA1bdfvBLhAW4YQAWcAEOII4DDjBBzy6QH7Q3kAQ3xHbQg26iCj/xMzcsWik0ILkBfoAABszRBANgwQIgPgYOQBzT0JbBG5IABwQAaGOzhQmt446Hvo/+oay4vUNPLvAWNxghLmA4wwAk4AMO5HneEt+zDI4QhAwCZwudAFAzmigAMkjB8yQgARlc4Ntkd3cwaDAAdcAQBDlcoGgS8MMCVs4EJ+j52RMwww088IUdMGAqwjaGNEIf+giQIAJV2AMWBPybMxQgKHf4AUjeIAcafEECEvhCvfP83vfuAQ9B0AMCppBHHzAgqM4QdwTWz/71V6EHvDlBfXQZMmkagAiVWjwXsrAAJ+DA5UzQBxqwAHumB2NgAQNgJgygcbcRCVJwfBEQAOsXBxRIAw5gAhSAgfTnBilRdBbgAeqRBbbXdHVWBmUABS8XcVhwfcQBBqSATxvVd+z+UwXrFwABQAJe8HoUoFQFMAVGYARMEQQ/kHJ5AAESQF5N1wdlkANqUAZ2wAEcsAA3kAXYBwEwIAupEAyloAqqgAQEoG2VJgDK1QMPkIEDdmSI5gYIEG1e8HzqkXRO0Ad2MALgkgJl8GhN9wVcIAFWmAkm0kS5UAJkQIHN5QRSNwECwAF3tWYK8DEHEAVE4GmKdQYgIAEs4AJMwAFXUAZ+5QFN+AB9wARCAAFGiHnDIHyUMEslEgBt0Io6oANtEAcwhQcCgANAQ3JGcAAFYAQ0V2scsHhZ8ACZ+ABX4AEmYALtVAQoaAJcAAFoEFQdMEt0wAybhwQ2yIo26IptQAJpe+ACHGAEG3EAO5AEkRZtMsA+N6AeEOAHHAAFV5ACJiAGw/UAHACCVggJsoAKW5AKarUOrdiKrPiPsBgHPSCFuOIAZ4AFnZZrtCgAHtCMEGABffAAdChVVFAGfeABc+MfrUARMIEJLxgIADs=&quot;&gt;&lt;/a&gt;
☕
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This would be excessive, but we can'&lt;!--'--&gt;t actually even &lt;em&gt;see&lt;/em&gt; &lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle with chevrons in the top-left and bottom-right internal corners&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVR42u2azUoDMRDHF6TtRZ+gwnoQ8VXam3ZbkPoGem3foIf2qm/gIthWX0fEQwtKvasHWxbWCYwQYj5WTWYW24E/vXQz81uSyWSyUZ7n0Toq2oAX+bPeqqAO6Bo0Ay1BuSe9ge5x7A76+mYc4EegR4+gLglfx5zgW6AhIbCqIcZADs4JLcOTgieOgMQavwGdgPZM69Ji26BDfH7syBkJFbiAeLIEcgfaj/yaGO/W4O9ZxEQB3jUEkIH6UVjrox/V9ykF+MQAHhpahld9TynA5xrHEyW4gWZdLkANT/Dqy59TgH9oEtmuElhmmBULT+B15cUuKcBVmFRXSBn04nHKX8ljc4AnBcFF9m16BG9xg8cO8FAWc4PXmMCr3OA6y6TEF9JKBy62s3f8XStwKmMF3wkINsBGxKCMa/wgILgtV8Rl3Me9T+Uy7uMpEzh55fZaoFb/rTWwns8dSbSunBlIavUHTVBjT+ALS50v25jjdGY6j/cCgsvJrcd1Hrd1YM7/CN7EE5w87krazs44OzCunts0UM9tYjn11ai6rO0CXdYUtxzRZa38ELSCz7VwHFuXtU3dVx+VoK8+4rpJuWCEvuS6SZErKOq7s6QMl4ZfCa+LiW2GmdgX6ArHnKIPntvSzYcB/0CfmeytTddSfkMAAAAASUVORK5CYII=&quot;&gt;&lt;/kbd&gt; and the
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export/#1326260988811898883&quot;&gt;standard&lt;/a&gt;
remapping facilities are insufficiently expressive anyway.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
There'&lt;!--'--&gt;s a &lt;a href=&quot;//bugs.debian.org/1060023&quot;&gt;2024-01-04 ITP&lt;/a&gt; for keyd with no linked dsc,
but it features on &lt;a href=&quot;//mentors.debian.net/package/keyd/&quot;&gt;mentors.d.n&lt;/a&gt;,
which, well, if I posted I could never show my face in public again
(and it takes over a minute for one python program at 100% CPU on my &lt;a href=&quot;//man.sr.ht/~nabijaczleweli/snappy-tools/measurements/2024-01-03-mt.md#bookworme5645ddr3-1600-quottartaquot&quot;&gt;big host&lt;/a&gt;,
 so there's no way it'd ever finish building on a shitty Celeron),
but this is what mentors is for, so let'&lt;!--'--&gt;s accept keyd is not in Debian:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone http://github.com/rvaiya/keyd&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Cloning into '&lt;!--'--&gt;keyd'&lt;!--'--&gt;...
warning: redirecting to https://github.com/rvaiya/keyd/
Resolving deltas: 100% (2214/2214), done.
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mv&lt;/span&gt; keyd/ /usr/local/src/&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;[sudo] password for nabijaczleweli:
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; /usr/local/src/keyd/&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;/usr/local/src/keyd&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; log &lt;span class=&quot;token parameter variable&quot;&gt;-1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;commit dcbb68b12f71245121035b730b50872802a259b4
Author: Takahashi, Naoki &amp;lt;102382754+tkna91@users.noreply.github.com&gt;
Date:&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;Wed Dec 20 02:38:10 2023 +0900

&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Add description of KEYD_DEBUG
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;/usr/local/src/keyd&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;CFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;-march&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;native &lt;span class=&quot;token assign-left variable&quot;&gt;LDFLAGS&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;-flto &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;mkdir bin
cp scripts/keyd-application-mapper bin/
sed -e '&lt;!--'--&gt;s#@PREFIX@#/usr/local#'&lt;!--'--&gt; keyd.service.in &gt; keyd.service
cc -DVERSION=\&quot;v2.4.3\ \(dcbb68b\)\&quot; -I/usr/local/include -L/usr/local/lib -Wall -Wextra -Wno-unused -std=c11 -DSOCKET_PATH=\&quot;/var/run/keyd.socket\&quot; -DCONFIG_DIR=\&quot;/etc/keyd\&quot; -DDATA_DIR=\&quot;/usr/local/share/keyd\&quot; -D_FORTIFY_SOURCE=2 -D_DEFAULT_SOURCE -Werror=format-security -march=native -O3&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;src/*.c src/vkbd/uinput.c -lpthread -o bin/keyd -flto
src/daemon.c: In function ‘add_listener’:
src/daemon.c:84:33: warning: ignoring return value of ‘write’ declared with attribute ‘warn_unused_result’ [-Wunused-result]
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;84 |&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;write(con, layer-&gt;type == LT_LAYOUT ? &quot;/&quot; : &quot;+&quot;, 1);
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;|&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/daemon.c:85:33: warning: ignoring return value of ‘write’ declared with attribute ‘warn_unused_result’ [-Wunused-result]
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;85 |&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;write(con, layer-&gt;name, strlen(layer-&gt;name));
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;|&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
src/daemon.c:86:33: warning: ignoring return value of ‘write’ declared with attribute ‘warn_unused_result’ [-Wunused-result]
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;86 |&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;write(con, &quot;\n&quot;, 1);
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;|&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;^~~~~~~~~~~~~~~~~~~
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;/usr/local/src/keyd&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;make&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;mkdir -p /etc/keyd
mkdir -p /usr/local/bin/
mkdir -p /usr/local/share/keyd/
mkdir -p /usr/local/share/keyd/layouts/
mkdir -p /usr/local/share/man/man1/
mkdir -p /usr/local/share/doc/keyd/
mkdir -p /usr/local/share/doc/keyd/examples/
groupadd keyd
install -m755 bin/* /usr/local/bin/
install -m644 docs/*.md /usr/local/share/doc/keyd/
install -m644 examples/* /usr/local/share/doc/keyd/examples/
install -m644 layouts/* /usr/local/share/keyd/layouts
install -m644 data/*.1.gz /usr/local/share/man/man1/
install -m644 data/keyd.compose /usr/local/share/keyd/
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;/usr/local/src/keyd&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;getent group keyd&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;keyd:x:1001:
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;/usr/local/src/keyd&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; delgroup keyd&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;info: Removing group `keyd'&lt;!--'--&gt; ...
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;/usr/local/src/keyd&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; addgroup keyd&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;info: Selecting GID from range 100 to 999 ...
info: Adding group `keyd'&lt;!--'--&gt; (GID 109) ...
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;root@chrust:/usr/local/src/keyd# for f in $(zfs list -t snap -Ho name | grep keyd); do zfs diff -h $f; done
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/group-
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/gshadow-
-&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/group
-&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/gshadow
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/group
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/gshadow
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/keyd
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/systemd/system/sysinit.target.wants
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/etc/systemd/system/sysinit.target.wants/keyd.service
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/man
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/bin
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/lib
M&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/src
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/src/keyd&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;(&amp;amp;c.)
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/lib/systemd
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/lib/systemd/system
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/lib/systemd/system/keyd.service
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/man/man1
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/examples
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/bin/keyd
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/bin/keyd-application-mapper
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/keyd/layouts/af
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/keyd/layouts/al
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/keyd/layouts/am&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;(and hundreds more, elided for brevity here)
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/keyd
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/keyd/layouts
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/CHANGELOG.md
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/DESIGN.md
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/examples/capslock-esc-basic.conf
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/examples/capslock-escape-with-vim-mode.conf
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/examples/international-glyphs.conf
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/examples/macos.conf
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/examples/meta-esc.conf
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/doc/keyd/examples/nav-layer.conf
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/man/man1/keyd-application-mapper.1.gz
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/man/man1/keyd.1.gz
+&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/local/share/keyd/keyd.compose
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone http://github.com/WeirdTreeThing/cros-keyboard-map&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Cloning into '&lt;!--'--&gt;cros-keyboard-map'&lt;!--'--&gt;...
warning: redirecting to https://github.com/WeirdTreeThing/cros-keyboard-map/
Resolving deltas: 100% (26/26), done.
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;cd&lt;/span&gt; cros-keyboard-map/&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/cros-keyboard-map&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; log &lt;span class=&quot;token parameter variable&quot;&gt;-1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;commit 25b0e9c2a10fc834d414b427c40d572fb38cda14
Author: WeirdTreeThing &amp;lt;bradyn127@protonmail.com&gt;
Date:&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;Tue Dec 12 17:40:08 2023 -0500

&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Add support for Chimera Linux

&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/cros-keyboard-map&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n&lt;/span&gt; usr/bin/keyd install.sh&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;26:if ! [ -f /usr/bin/keyd ]; then
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/cros-keyboard-map&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-i&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;s:.*usr/bin/keyd.*:if false; then:'&lt;!--'--&gt;&lt;/span&gt; install.sh&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/cros-keyboard-map&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n&lt;/span&gt; 26p install.sh&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;if false; then
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/cros-keyboard-map&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;./install.sh&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Generating config
Installing config
[sudo] password for nabijaczleweli:
Enabling keyd
Created symlink /etc/systemd/system/sysinit.target.wants/keyd.service → /usr/local/lib/systemd/system/keyd.service.
Installing libinput configuration
Done
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@chrust&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/cros-keyboard-map&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mv&lt;/span&gt; &lt;span class=&quot;token environment constant&quot;&gt;$PWD&lt;/span&gt; /usr/local/src/&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;root@chrust:~/cros-keyboard-map# for f in $(zfs list -t snap -Ho name | grep keymap); do zfs diff -h $f; done
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/libinput
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/libinput/local-overrides.quirks
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/keyd
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/keyd/cros.conf
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/systemd/system/sysinit.target.wants
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/etc/systemd/system/sysinit.target.wants/keyd.service
M&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/local/src
+&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;/usr/local/src/cros-keyboard-map&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;(&amp;amp;c.)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Now that we've installed a key- and mouse-logger, it doesn't actually work,
Thankfully, there'&lt;!--'--&gt;s a monitoring interface in the form of &lt;code&gt;keyd monitor&lt;/code&gt;;
so, pressing all of the top row, then &lt;kbd&gt;🔍&lt;/kbd&gt;, then the side buttons (filtered for down events):
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
--&gt;device added: 0001:0001 AT Translated Set 2 keyboard (/dev/input/event0)
device added: 04f3:00be Elan Touchpad (/dev/input/event7)
device added: 06cb:1a10 SYTS7817:00 06CB:1A10 (/dev/input/event9)
&lt;a href=&quot;//github.com/rvaiya/keyd/issues/645&quot;&gt;+1041019475 ms&lt;/a&gt; AT Translated Set 2 keyboard 0001:0001 enter up
&lt;!--&quot;--&gt;+672 ms	AT Translated Set 2 keyboard  0001:0001  esc down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+201 ms	AT Translated Set 2 keyboard  0001:0001  back down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+192 ms	AT Translated Set 2 keyboard  0001:0001  forward down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+149 ms	AT Translated Set 2 keyboard  0001:0001  refresh down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+135 ms	AT Translated Set 2 keyboard  0001:0001  zoom down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+155 ms	AT Translated Set 2 keyboard  0001:0001  scale down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+128 ms	AT Translated Set 2 keyboard  0001:0001  brightnessdown down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+107 ms	AT Translated Set 2 keyboard  0001:0001  brightnessup down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+113 ms	AT Translated Set 2 keyboard  0001:0001  mute down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+175 ms	AT Translated Set 2 keyboard  0001:0001  volumedown down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+139 ms	AT Translated Set 2 keyboard  0001:0001  volumeup down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+519 ms	AT Translated Set 2 keyboard  0001:0001  sleep down&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;+191 ms	AT Translated Set 2 keyboard  0001:0001  leftmeta down&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;+173 ms	AT Translated Set 2 keyboard  0001:0001  volumedown down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+480 ms	AT Translated Set 2 keyboard  0001:0001  volumeup down&lt;!--&quot;--&gt;&lt;!--
--&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;code&gt;# &lt;kbd&gt;systemctl start keyd&lt;/kbd&gt;&lt;/code&gt;
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
--&gt;device added: 0fac:0ade keyd virtual keyboard (/dev/input/event14)
device added: 0fac:1ade keyd virtual pointer (/dev/input/event15)
&lt;!--&quot;--&gt;+324 ms	keyd virtual keyboard  0fac:0ade  esc down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+157 ms	keyd virtual keyboard  0fac:0ade  back down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+141 ms	keyd virtual keyboard  0fac:0ade  forward down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+124 ms	keyd virtual keyboard  0fac:0ade  refresh down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+87 ms	keyd virtual keyboard  0fac:0ade  f11 down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+104 ms	keyd virtual keyboard  0fac:0ade  scale down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+139 ms	keyd virtual keyboard  0fac:0ade  brightnessdown down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+129 ms	keyd virtual keyboard  0fac:0ade  brightnessup down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+147 ms	keyd virtual keyboard  0fac:0ade  mute down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+147 ms	keyd virtual keyboard  0fac:0ade  volumedown down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+316 ms	keyd virtual keyboard  0fac:0ade  volumeup down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+263 ms	keyd virtual keyboard  0fac:0ade  coffee down&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;+221 ms	keyd virtual keyboard  0fac:0ade  leftmeta down&lt;!--&quot;--&gt;

&lt;!--&quot;--&gt;+773 ms	keyd virtual keyboard  0fac:0ade  volumedown down&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+339 ms	keyd virtual keyboard  0fac:0ade  volumeup down&lt;!--&quot;--&gt;&lt;!--
--&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
So the only thing that changed was &lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle with chevrons in the top-left and bottom-right internal corners&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVR42u2azUoDMRDHF6TtRZ+gwnoQ8VXam3ZbkPoGem3foIf2qm/gIthWX0fEQwtKvasHWxbWCYwQYj5WTWYW24E/vXQz81uSyWSyUZ7n0Toq2oAX+bPeqqAO6Bo0Ay1BuSe9ge5x7A76+mYc4EegR4+gLglfx5zgW6AhIbCqIcZADs4JLcOTgieOgMQavwGdgPZM69Ji26BDfH7syBkJFbiAeLIEcgfaj/yaGO/W4O9ZxEQB3jUEkIH6UVjrox/V9ykF+MQAHhpahld9TynA5xrHEyW4gWZdLkANT/Dqy59TgH9oEtmuElhmmBULT+B15cUuKcBVmFRXSBn04nHKX8ljc4AnBcFF9m16BG9xg8cO8FAWc4PXmMCr3OA6y6TEF9JKBy62s3f8XStwKmMF3wkINsBGxKCMa/wgILgtV8Rl3Me9T+Uy7uMpEzh55fZaoFb/rTWwns8dSbSunBlIavUHTVBjT+ALS50v25jjdGY6j/cCgsvJrcd1Hrd1YM7/CN7EE5w87krazs44OzCunts0UM9tYjn11ai6rO0CXdYUtxzRZa38ELSCz7VwHFuXtU3dVx+VoK8+4rpJuWCEvuS6SZErKOq7s6QMl4ZfCa+LiW2GmdgX6ArHnKIPntvSzYcB/0CfmeytTddSfkMAAAAASUVORK5CYII=&quot;&gt;&lt;/kbd&gt; into F11,
And the volume buttons on the side are seemingly indistinguishable from &lt;kbd&gt;🔉&lt;/kbd&gt;/&lt;kbd&gt;🔊&lt;/kbd&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
After a debugging session where I thought my keyd was broken (it &lt;a href=&quot;//github.com/rvaiya/keyd/pull/646&quot;&gt;had been&lt;/a&gt;, but unrelatedly),
it turns out the generated mapping is just bonkers.
I wasn'&lt;!--'--&gt;t gonna include it here because it differs per-model, but the generated &lt;samp class=&quot;path&quot;&gt;/etc/keyd/cros.conf&lt;/samp&gt; is:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-ini&quot;&gt;&lt;code class=&quot;language-ini&quot;&gt;&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
0001:0001

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;back&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f2&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;forward&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f3&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;refresh&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f4&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f11&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f5&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;scale&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f6&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;brightnessdown&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f7&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;brightnessup&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f8&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;mute&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f9&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;volumedown&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f10&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;volumeup&lt;/span&gt;

&lt;span class=&quot;token key attr-name&quot;&gt;back&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;back&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;forward&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;forward&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;refresh&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;refresh&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;zoom&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f11&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;scale&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessdown&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;brightnessdown&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessup&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;brightnessup&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;mute&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;mute&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;volumedown&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;volumedown&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;volumeup&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;volumeup&lt;/span&gt;

&lt;span class=&quot;token key attr-name&quot;&gt;f13&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;coffee&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;sleep&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token value attr-value&quot;&gt;coffee&lt;/span&gt;

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f1&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f2&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f2&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f3&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f3&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f4&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f4&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f5&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f5&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f6&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f6&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f7&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f7&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f8&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f8&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f9&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f9&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f10&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f10&lt;/span&gt;

&lt;span class=&quot;token key attr-name&quot;&gt;back&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f1&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;forward&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f2&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;refresh&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f3&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;zoom&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f4&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f5&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessdown&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f6&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessup&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f7&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;mute&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f8&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;volumedown&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f9&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;volumeup&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f10&lt;/span&gt;

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;backspace&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;delete&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessdown&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;kbdillumdown&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessup&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;kbdillumup&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f6&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;kbdillumdown&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f7&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;kbdillumup&lt;/span&gt;

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;control&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;f5&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;print&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;scale&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;print&lt;/span&gt;

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;control+alt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;backspace&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;C-A-delete&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
(Rember that lines that start with &quot;&lt;code&gt;f&lt;var&gt;123&lt;/var&gt; =&lt;/code&gt;&quot; are no-ops, since the keyboard by default generates the special keys.)
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Yes: this has the ☕, but also identity-maps everything, and you unfuck it by holding &lt;kbd&gt;🔍&lt;/kbd&gt; (the objectively-incorrect mode).
Except &lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle with chevrons in the top-left and bottom-right internal corners&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVR42u2azUoDMRDHF6TtRZ+gwnoQ8VXam3ZbkPoGem3foIf2qm/gIthWX0fEQwtKvasHWxbWCYwQYj5WTWYW24E/vXQz81uSyWSyUZ7n0Toq2oAX+bPeqqAO6Bo0Ay1BuSe9ge5x7A76+mYc4EegR4+gLglfx5zgW6AhIbCqIcZADs4JLcOTgieOgMQavwGdgPZM69Ji26BDfH7syBkJFbiAeLIEcgfaj/yaGO/W4O9ZxEQB3jUEkIH6UVjrox/V9ykF+MQAHhpahld9TynA5xrHEyW4gWZdLkANT/Dqy59TgH9oEtmuElhmmBULT+B15cUuKcBVmFRXSBn04nHKX8ljc4AnBcFF9m16BG9xg8cO8FAWc4PXmMCr3OA6y6TEF9JKBy62s3f8XStwKmMF3wkINsBGxKCMa/wgILgtV8Rl3Me9T+Uy7uMpEzh55fZaoFb/rTWwns8dSbSunBlIavUHTVBjT+ALS50v25jjdGY6j/cCgsvJrcd1Hrd1YM7/CN7EE5w87krazs44OzCunts0UM9tYjn11ai6rO0CXdYUtxzRZa38ELSCz7VwHFuXtU3dVx+VoK8+4rpJuWCEvuS6SZErKOq7s6QMl4ZfCa+LiW2GmdgX6ArHnKIPntvSzYcB/0CfmeytTddSfkMAAAAASUVORK5CYII=&quot;&gt;&lt;/kbd&gt;, which is in the would-be-F4 position, but it'&lt;!--'--&gt;s mapped to F11.
&lt;kbd&gt;🔒&lt;/kbd&gt; is mapped to ☕ despite being where Delete usually is, and Delete is achieved with &lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;⟵&lt;/kbd&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;cros2.conf&quot;&gt;
I feel like I could do better with
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-ini&quot;&gt;&lt;code class=&quot;language-ini&quot;&gt;&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
0001:0001

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# ←&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;back&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f1&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# →&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;forward&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f2&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# ⟳&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;refresh&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f3&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# tableau&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;zoom&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f4&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# fast rectangle&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;scale&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f5&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# small ☀️&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessdown&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f6&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# ☀️&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessup&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f7&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 🔇&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;mute&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f8&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 🔉&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;volumedown&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f9&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 🔊&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;volumeup&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;f10&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 🔒&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;sleep&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;delete&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# 🔍 remains as leftmeta&lt;/span&gt;

&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;meta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# tableau&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;zoom&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;print&lt;/span&gt;

&lt;span class=&quot;token key attr-name&quot;&gt;back&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;back&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;forward&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;forward&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;refresh&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;refresh&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;scale&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;scale&lt;/span&gt;

&lt;span class=&quot;token key attr-name&quot;&gt;brightnessdown&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;brightnessdown&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;brightnessup&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;brightnessup&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;mute&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;mute&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;volumedown&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;volumedown&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;volumeup&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;volumeup&lt;/span&gt;

&lt;span class=&quot;token key attr-name&quot;&gt;sleep&lt;/span&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;sleep&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle with chevrons in the top-left and bottom-right internal corners&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVR42u2azUoDMRDHF6TtRZ+gwnoQ8VXam3ZbkPoGem3foIf2qm/gIthWX0fEQwtKvasHWxbWCYwQYj5WTWYW24E/vXQz81uSyWSyUZ7n0Toq2oAX+bPeqqAO6Bo0Ay1BuSe9ge5x7A76+mYc4EegR4+gLglfx5zgW6AhIbCqIcZADs4JLcOTgieOgMQavwGdgPZM69Ji26BDfH7syBkJFbiAeLIEcgfaj/yaGO/W4O9ZxEQB3jUEkIH6UVjrox/V9ykF+MQAHhpahld9TynA5xrHEyW4gWZdLkANT/Dqy59TgH9oEtmuElhmmBULT+B15cUuKcBVmFRXSBn04nHKX8ljc4AnBcFF9m16BG9xg8cO8FAWc4PXmMCr3OA6y6TEF9JKBy62s3f8XStwKmMF3wkINsBGxKCMa/wgILgtV8Rl3Me9T+Uy7uMpEzh55fZaoFb/rTWwns8dSbSunBlIavUHTVBjT+ALS50v25jjdGY6j/cCgsvJrcd1Hrd1YM7/CN7EE5w87krazs44OzCunts0UM9tYjn11ai6rO0CXdYUtxzRZa38ELSCz7VwHFuXtU3dVx+VoK8+4rpJuWCEvuS6SZErKOq7s6QMl4ZfCa+LiW2GmdgX6ArHnKIPntvSzYcB/0CfmeytTddSfkMAAAAASUVORK5CYII=&quot;&gt;&lt;/kbd&gt; looks the most like a screen, hence it'&lt;!--'--&gt;s mapped to PrtSc.
Specifically &lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle, to its right are two vertical stripes&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAABy0lEQVR42u2ZX0rDQBDGA9L2RU+gGAURr6NNC1JvoK/NHdpXvYFFMIleQEofPISIDxb0BOpDW4Q4K/NQprvZJcn+gc3ARynMfskvZDezs0Ge54GPChrwBtxTcEG0QX3QHegdtATlJfUNekGvPnrXHnWAn4LeKoDKxLzPXALfAo00AlON8Jo0DkFTfFOm+F+aUwXcJPQ6PI0ZyXlWySkLHhXcHJvf96Bz0IFkjm6DTjA3UVwbIuJBx/xyrrORUwacgXwIbuoRdFRh6rGxDxLwT/IweTkbU5qqDPiAY8Seclzj2hOjpwj+wgZ4yjGKNXxx4gLwzAb4nJikgb5IBWBzG+ALspDtaQTfFSx4Sxvg6waTQH/cSuCsgEcGwLsugocGwEMXwTsGwNsugu/4Cn7s66vu7eLm1efsy3ABs3ClgHklJolG8MSlkpVXPw81QA9d26SItqVXNUJfurgtLWpEZDU0IlKFRkTHBjiLnqT1NMHPEGs9tQpAW5jTxTEqraeeDEonOIuxhWbjWAVKNzhr9V4bhL4RtJeNNRt5lZXuA4WiCvGJ5M9Ucuo8Qhrg4saOkFYVQFfokaGn7AhpH8F+8DdUyWkODRvwBvxffz5Mo4mV7gMcAAAAAElFTkSuQmCC&quot;&gt;&lt;/kbd&gt;, but also &lt;kbd&gt;←&lt;/kbd&gt;, &lt;kbd&gt;→&lt;/kbd&gt;, and &lt;kbd&gt;⟳&lt;/kbd&gt; are prime real estate for mapping something useful to.
&lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;&lt;img class=&quot;iconic dark-invert&quot; alt=&quot;hollow rectangle, to its right are two vertical stripes&quot; src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAjCAYAAADMibkBAAAACXBIWXMAAAsTAAALEwEAmpwYAAABy0lEQVR42u2ZX0rDQBDGA9L2RU+gGAURr6NNC1JvoK/NHdpXvYFFMIleQEofPISIDxb0BOpDW4Q4K/NQprvZJcn+gc3ARynMfskvZDezs0Ge54GPChrwBtxTcEG0QX3QHegdtATlJfUNekGvPnrXHnWAn4LeKoDKxLzPXALfAo00AlON8Jo0DkFTfFOm+F+aUwXcJPQ6PI0ZyXlWySkLHhXcHJvf96Bz0IFkjm6DTjA3UVwbIuJBx/xyrrORUwacgXwIbuoRdFRh6rGxDxLwT/IweTkbU5qqDPiAY8Seclzj2hOjpwj+wgZ4yjGKNXxx4gLwzAb4nJikgb5IBWBzG+ALspDtaQTfFSx4Sxvg6waTQH/cSuCsgEcGwLsugocGwEMXwTsGwNsugu/4Cn7s66vu7eLm1efsy3ABs3ClgHklJolG8MSlkpVXPw81QA9d26SItqVXNUJfurgtLWpEZDU0IlKFRkTHBjiLnqT1NMHPEGs9tQpAW5jTxTEqraeeDEonOIuxhWbjWAVKNzhr9V4bhL4RtJeNNRt5lZXuA4WiCvGJ5M9Ucuo8Qhrg4saOkFYVQFfokaGn7AhpH8F+8DdUyWkODRvwBvxffz5Mo4mV7gMcAAAAAElFTkSuQmCC&quot;&gt;&lt;/kbd&gt; even works to switch to VT4, and &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;🔒&lt;/kbd&gt; to salute!
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
With this, the optimal &lt;samp class=&quot;path&quot;&gt;/etc/systemd/logind.conf&lt;/samp&gt; becomes just the usual
&lt;/p&gt;
&lt;pre class=&quot;continuation&quot;&gt;&lt;!--
 --&gt;[Login]
HandlePowerKey=hibernate&lt;!--
 --&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It'&lt;!--'--&gt;s also tempting to solve the Home/End/PgUp/PgDn situation here instead of with xmodmap,
so appending this to the updated &lt;samp class=&quot;path&quot;&gt;/etc/keyd/cros.conf&lt;/samp&gt; works like one'&lt;!--'--&gt;d expect
(but &lt;code&gt;[meta]&lt;/code&gt; is better for i3 usage;
 also note that you can'&lt;!--'--&gt;t make another file and have it patch the big one, because at most one file can match each device):
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-ini&quot;&gt;&lt;code class=&quot;language-ini&quot;&gt;&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;left&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;home&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;right&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;up&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;pageup&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;down&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;pagedown&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
I had to find out &lt;a href=&quot;//101010.pl/@nabijaczleweli/111739210958704043&quot;&gt;the hard way&lt;/a&gt; that keyd, &lt;em&gt;by default&lt;/em&gt;,
mangles Shift_R and Control_R into Shift_L and Control_L.
Appending this is necessary to make them work correctly:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-ini&quot;&gt;&lt;code class=&quot;language-ini&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# https://github.com/rvaiya/keyd/issues/618&lt;/span&gt;
&lt;span class=&quot;token section&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token section-name selector&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;rightcontrol&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;rightcontrol&lt;/span&gt;
&lt;span class=&quot;token key attr-name&quot;&gt;rightshift&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token value attr-value&quot;&gt;rightshift&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented&quot;&gt;
Overall, low value-add factor here.
The quirks file is nice though.
Let's hope it's upstreamed before it breaks,
like upstream &lt;a href=&quot;//wayland.freedesktop.org/libinput/doc/latest/device-quirks.html#device-quirks-local&quot;&gt;guarantees it will&lt;/a&gt;.
&lt;/p&gt;
&lt;h5 id=&quot;installing-post-install-linux-celes-post-install-workaround&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-post-install-linux-celes-post-install-workaround&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/post-install.html#celes-post-install-workaround-1&quot;&gt;CELES Post Install Workaround &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h5&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
If you experience issues in applications such as Parsec, or […]
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
Okay but that'&lt;!--'--&gt;s &lt;em&gt;so&lt;/em&gt; true though?
&lt;/p&gt;
&lt;h3 id=&quot;installing-using-ectool&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installing-using-ectool&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit; text-decoration: none;&quot; href=&quot;https://docs.chrultrabook.com/docs/installing/ectool.html&quot;&gt;Using Ectool &lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
&lt;tt&gt;ectool&lt;/tt&gt; is a utility that is used to interface with the ChromeOS Embedded Controller.
It is used to communicate with the embedded controller from userspace and vice versa.
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
Boy I sure hope to use this program to communicate with the embedded controller!
I would love to communicate with the ChromeOS Embedded Controller through this program.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Also: no link and it'&lt;!--'--&gt;s not in by that name in Debian.
Is it the same one as &lt;samp class=&quot;path&quot;&gt;/sbin/ectool&lt;/samp&gt; from &lt;a href=&quot;//packages.debian.org/bookworm/amd64/coreboot-utils/filelist&quot;&gt;coreboot-utils&lt;/a&gt;?
Unknowable.
&lt;/p&gt;
&lt;h2 id=&quot;conclusions&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#conclusions&quot;&gt;#&lt;/a&gt; Conclusions&lt;/h2&gt;
&lt;h3 id=&quot;conclusions-pog-moments&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#conclusions-pog-moments&quot;&gt;#&lt;/a&gt; pog moments&lt;/h3&gt;
&lt;ul style=&quot;padding-left: 0;&quot;&gt;
  &lt;li&gt;normal computer&lt;/li&gt;
  &lt;li&gt;normal debian just works&lt;/li&gt;
  &lt;li&gt;overall a sensible walk-through&lt;/li&gt;
  &lt;li&gt;privacy preserved (ChromeOS didn'&lt;!--'--&gt;t ever see the network)&lt;/li&gt;
  &lt;li&gt;fun bunny on POST&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;conclusions-cringe-moments&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#conclusions-cringe-moments&quot;&gt;#&lt;/a&gt; cringe-ass nae-nae baby moments&lt;/h3&gt;
&lt;ul style=&quot;padding-left: 0;&quot;&gt;
  &lt;li&gt;PXE-booting from a USB-C dongle doesn'&lt;!--'--&gt;t work&lt;/li&gt;
  &lt;li&gt;small patch and a few round-trips required to actually ensure privacy is preserved&lt;/li&gt;
  &lt;li&gt;the recommended keyboard mapping is so bizarre I straight-up thought keyd was broken&lt;/li&gt;
  &lt;li&gt;Chrultrabook stance is that users &lt;em&gt;should&lt;/em&gt; give up their privacy to make following the guide more convenient (this is used as a justification for a &lt;a href=&quot;//forum.chrultrabook.com/t/general-mild-documentation-oddities-rollup/521/6&quot;&gt;mild editorial oddity&lt;/a&gt; and the impetus to retain it is stronger than to simplify the page)&lt;/li&gt;
  &lt;li&gt;Chrultrabook and its upstreams appear allergic to actually documenting crucial security-sensitive and stated-as-device-bricking information in the text and actively avoid providing it when questioned&lt;/li&gt;
  &lt;li&gt;this extends to Chrultrabook authors posting &lt;a href=&quot;//forum.chrultrabook.com/t/general-mild-documentation-oddities-rollup/521/14&quot;&gt;misinformation&lt;/a&gt; at least &lt;a href=&quot;//101010.pl/@elly@donotsta.re/111722941614342831&quot;&gt;twice&lt;/a&gt; (&lt;a href=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmcAAAEBCAMAAAAKKfL5AAADAFBMVEX///8AAACmxdRYHQ4tLzp9mZU7Oj/6AJb006AfICc8PkRQRoA8QFCIpsRgNdl1dXU3dbyayuljZGnMVyRbLsbz/P41X4lXWmF1oc++nmyAg4bwrDbE7/1VVlvU0bKYczvRoTzx8fd0WewlIyfY4OdeMDocAgLhZbVmfLGSououLk5zicLI2+T+/9fW19ugxNq0TiJ0hb9NTU+tsrkzPpibNjvaLq7fy1GOjo6avM1TRZGJeHBsTB+/V7+wusSztLWgoKTCxMb967+LnOVJiMWnZ8TYuZE3Egnq9OtiVkp9fn/VmsXovYKoqKplRukyI5CQMxxkcqOBktPD3dvSrsxNTVKiyvChvfyBXjv44bXq2bnEy9TRjjmdr/VyhrB2eoJ+ueubpK7h7PYxSGtpSzrAj3Lo0qiKj5f726m+09ufeFB5OhmbjNqMr9A6aKqBfMLtgSvE4vVqam27xM3251AmCgiZvNjb29uryP2/uKTizaZMMiLg2/uEpNhfb6HxAZw6mtVnJBHKysqWrPcwKHjR0dNIFwqpYT7c7/j+/+yWnKO+pps9MDq9vb4qLDJwcYCEipRpUPfTlsNYOrSf0f+7ruTr8f16MDqqtsGSkpRMQ3CMouvD29V2MDr6AJjr5/ySts7sO6eSXyO8vMC1wswuBQJsrOOjrLHuxo/G07ini4GVfeWPSzt/anGEldu/spasknSMreRCKiVPUlpiYmWrzNz389qzll1qYljL1NzE5Nx7jcrNv9KukTvPyvp5JxYVAgLDiLBMP3RjPOOXifnd5e9pqd3T8voqGRi9zdHT3OOFhojJvczBizyKnKy31OQzNkDk5OUvMT3ylC1YRqs8DAbsHKKppPS4fTzl9P3Jz9hhZ4OXlOuenp/VeMK008hFRUnKsYcuLi+KamfGvPSxvslnSfEuLGDU2spiLiVnaXHJ3cbydSeAbPd9UDs3gsKBUh7Ep3uGcWDDz9iZl8js/f7+/v8yCwiTmZ+HpOyksrxPRYJUOKBHRVpAY4TW4+wsz5IUAAAAAXRSTlMAQObYZgAAAAFiS0dE9UXSG9sAAAAJcEhZcwAALiMAAC4jAXilP3YAACAASURBVHja7Z0NnBxlfcc7uF7YCIVEIjEmypiNQAhDmSA9AXNzJPJyeFCMkZcLiQlgCBKESZPDahpMObjE3CX4knoYFRww9QUVu0EPWrFSCNlpTc83SBXZTlvQUFFrGVKq0uf9ZV725e5293bv/3zuZmefeZ5nn3nmu8/rb//PH7W1gFuWAVeJ+5fI+6x0tf7oPwLOJq8DzoAz4Aw4A86q5+x1jXfA2WTgLGy0A86AM+AMOAPOgDPgDDgDzhrPmTkw1NU1NGACZ5OOsy1PDz29pU6YbZnVRdysLcDZJOPM6RgJRzqc+mDWJdwW4GxScbalg7x0iBqt3cAuzBtGe8iOHeSILrXhkAY+RRd6+TnxbzOMDn6uxmL+JKSJarOnMWToMMvUOet00MHvnB5OB85akTPnAvIyolVo7e29CA6jlx0NfETeBuYpj4nJE+7oOfXvCHsNdk5jsT/qT0MOdHU5+DAQOvigceZ3Yth8qM9alLOhUH+l4JBjWy89trdj8vB/G7/YpgZk/uQNP2/r7cUVW4cIhA9DpL0cGCDt55DO2fQQHcJEmrb0Fdvain2dCZwNAjOjcIMTpD7raFdoMxhjYW++l3PWgVpGwRz378jLc3wBYWpwfxqSd8xoNy3SP+v1SZ2G2s3pmFNcteFz5LUl7CsW+8ItCZzNBdBGgdncxvXPutURJ63IaNuIjrhv1dbOqijKGWoQyWVDVF3tRl6c07i9pGdG/RXOBkj7GefMcThb6M93EHN+r4N9UVUW9qG/YgJnWQBtbJjVjbMLhmLjzV5CRlu7OKKhQb4d12iyPmPVlEFrOlqfGb38HMcS7WYH7duxdhM1mlsIaJF2s216b1vvdMwZrs7CTvS206deGLREzBBn4MbojqqxY5xd8PQFW7qHuvu0UUCH0jljfvkOMgxti3Mm/GUYEgu3trTJJLSxccDTYWdXV2fCOAA3nL1tlDP6loDXS86LfYmYAWdjd/WpzxBm8VkujAklhB7xCQFJ1Gd4INnWIbpwyL8jZGNSfJ7nUfLtwp/Pazi4yXTi8xqo4QydNtpuOuQtbjXJbEeJ8SZwUjfOjjpqDJwlYUbHjbhmaqdHXGWFOmeo75UPVc6QB50/Q+csFm5tpb9Rdp6WTp2xcUAneVtuNg04axLO6u3Ge90JOAHOxraOLltx4Aw4a7QuCDgBzoAz4Aw4AwecAWfAGXAGnFXHWSv8fhM4mWCc3br1Kfxy7IsncM5a4vfowAlwBpwBZ8AZuJpzNn/mwdAEzsDVmLMvmOfdvwk4A1dbzs6Y/Tfbod0EVxvO+KTVCZlfvbgc+mfgalWfXXsIuVNQfUarNuAMXG3bzV9d8M+Ys2ILuDnAyYTvnwFn4Oox3gTOwNVj/gw4A5etwzp60nP7/Q8vvpO4iz9+F3AGnNWIs7vuVNxZwBlwVhvOUGX25n/85Z13/hIfnv09cAac1YKz1zz77C9nhOGTPw3D8MvPPnsWcAac1YKzs5599tvhk08S0r6tcxbm8Z/i8n3FkdSLyHWH2CRG1NFg+TCfj0UQV5P88ymX4pzN/dA555zz/o985FW3334+di9tuG/DhifmfmvW4VkXzj3/Lbq776Un5gJn9efs4os/vOviix+bQV/HwlnfADoMhZWSVI6ziuuzuef8+te/fj/i7Hbkzv8RwmzDhmBO+8L9u3fv3t89y567QQftvpfmAmeN4OxzlLExctbdjW1JdXcN1Juzcz7/+fc/gmqzV91OQXvpiQtn7cGQLV26G6PmHDO44TuYsO8ghzm77wngrO6cPfrohz+H/nfRf8pZPgxHGEojQ8Vi18iQ0hzGLjL/EUzawBBGERuK7MZm8sIB8YaCSb2KI2HYhVvZAexHEuxDSYVdxa4+Nf3KOEOYfQRj9ipM2o/u+9AxGLKlD3GHUPuic+ETCDHB2UvAWb05+z/K2ZvfTDl7DUUmXxwaoI8aEzYwpHIWu8ibzWJfvtjdhY+ol9YVimoPo5OX4GDaWJ0XknckQZTk0Eh3sXtITb8yzv7kzx55hIP2iwu/9A8XfexjF+nun3bv7jim7QmCGebsPuCs3pzd9eijn/yPR4nDr2SmtiskHXr6qEeKsrEseZE0qgOIM9rooX9s/raLvEG1FY1AvPKsD0fqsDxNMD+C4mJUtfQr5uwRjNovLmzfs/9nU6ZM+azuptyDK7VnnPzgBooZcFZ/zv5YdT+kKI0oXbDuoaFujbO0iwgSBNVQl+AM4zSic0a9GGdDAyQdliAmrQ9F1tKvkDPqzt7zzP7dS0+MYYY5W4r7avvvffWcJ95y3wbgrP6cHaVixkcB4ZB81Pk+1BCq7WbsInMDQ6gqQn9FzhmGBtdn3eiFtZvMa6SbtZo0HZJgd183+dfSx71B9leCM+yu/+gzS3HP/6ETY5gxzuiooOOYb7z0EvTP6r8ecBzi6y7qtLZRdJFwZ0rlLH6RNZ1htzpYxK1q2Ifrs4EwHOLgUK8ibj2x2dIR7EcTzCP+yJSZln4lnL32ta+94+kj1hKUMGfSMcw4Z8Ttf/mYb5xf4fNYmVtJXpf1uNlVC9NC5RaWSOJwbs7g+p3AGWk4f0dqtpR5BNQapjt8UYwEBnDXahRzGGNcD7jppjtOmrlp3ca9axcgzt59D3c/FpydKDg74m1HH330ym/oCfg9udzw4cF0zvKFnVmvZ7SctRVWAWfF4nePQ+7jHz/uuOTH2jVS4pmTi2GFgAyN1Gbd6Qc33f+uy6Y9MHPm3ach0sR8xkWbMWdTPjvlxxeRim7p0rWIsnV7b953hJbE4KKe6YPZZR3DU1M5K+3KcQbtJhMGnYUgO+53302usEpVQn1V1FD5cHyqswTOlu/46l9ddsstGzdtWnfEXtZ+9pDxAKJs8892P4QhQ5TdvW7jgX0vznjxwA41+rZOWpNtQ7j09KwqFNZks4d6coVVg4izPYXcoqnZObnD2YWoPusazuGr2Z2F3PAhdBW7w4SzZetzhcPIZ0d2es5F/13Mh3BWEsTJw1mz6xxvWr7j9MUnY9KmPcCaz4f+7h6EGPr77InvfohC9ra7N+69+SCi7ODqe30l9rLCnOyh4VzP1MFCMduT65jVkyu2FTqP35Zbg7gZ3rkNUcI4y+cW/e1ChJGPQxXals2aNatQIBgNDvfMQhHactsQWKuya3JF5gOctQ5nb1i+4wNfXYxIu+qWW96zcd2mdaet7bmHDAOmbP4YqdxoVdaPIEOUrV7w8gol9pr12amFnYO547OLVqL6DPXWcjvaittJc7gS1UvZRblBxtnU4iBBbv1wFlVZuEkdyg2RgH5uOqoMO7PrF2XXF3qyHT3CBzhrJc5Oevinixcv/vTJV6FK7T0PzPyfzaQum3LPMK7L9h6xbt1pNx8MUVWGKOsvrF+l9roWoipofbaIcFi4hnCGO2U70MiAcLaStHy83dw5LBpK4uYU1tP+2R7ShPZkVxXacn6u2LNH+ABnLcPZn//pyktPfxeq0RYvps3nk2fiRnPK5hPXsgYT98ooZY8Vhvcv0jjr9LPrV6FqChHnc87m5BZuz8Y5W5nbRqo2zs1gZ2EZ5awjNx1nLevmthWyw4dRNch9JidnLfk7YcLZw+/66iZGGsYMc/b2jXuP2Hj3xtMW8AZz9WOvDPesv/flVeo4oAfRdTi7A3HWM51zhvkajLebmJnjWbu5rGM6er+GjTfX5FCXb+pgti1XQJVbIVcUPrXm7CcJ7vvAWe04e/hhVqX979unkOrshgfWIcgO7JuBqrJdmLL+Vw78dv+99y56edUxeru5qLPYmRtc+a9ZztmhnDfLI5xp44CdZJRwmIwDOgtTjy/0oJHA8RijtuHCmp3De7LZ9Qivlai5FD7AWctw9oY3MM4oaDeQztnmn82ePfvm/hkh65at7n9swdr96++99z8Xvfw9Vx8HHF8o+Ityw8sEZ9k1hcKqHtxQrtHmNfCkB4ZmZyHXk0cI6fMaC6dms9tQVdZW2JMVPrXm7PsJbi5wVhvOdlx6+ikCtDPJSPPtV122YB+lbDWhrDD8W4JZlLO2QldFD3RhD6xvTnbOui49nVZoqJP2ZbwMMOXHN3z6qstunhHOIJStfiy3YG3PflqdIc7y2qR/YVsxO7XMxH/bTjK0BM4mNWdnX7oCc4YrtE20d/aOTYtPvuoW1DFb3d+POmYLhtf29LDq7FN7vvctLf6chYVcYX1bySczJ1c4Hjib3Jz94AdnX3oSaTgRaDeciTk784HFmLNdpP//WAFhhqqz9bQ6i3HW1A7GAY3h7AObSXX2acLZ6l1kYpZixqozzNmFwBlwNkrOGGjvwJxt/imtz/rxIOCVBUuH1/5W9M4+9XJLcQbjzbpxdtNNMc4eWMw424U506uzl1dtayHOoH9Wv/rspvv/EnFGQYtzlltKBwGsOkOcrQHOgLNR1Gf/9e9Rzk5WOCvI6mwRrs6Asxbk7BhwLe0mDGcmuBZ2wBk44AwccAacgRsFZ39YdyCX6/vaNcAZuBpytmTpB/Pbn/vDuuevB87A1YyzG3dfz3j74jWZ26Z9tNGcGRb+U5xlm0HqReR8wzDs2N3RYJZhWbEI4mqSPw1u++jg6KladvVlnPY5owk1Vlfdp2jFhkoYv8Uvzig5u23a6zPzZy7IdV4+//Fvone9zcaZ7WIkjOpKNZ0zXsroEHhj4ow8mXHjbOwsjiEFFNUJyItnjJKzY984L7Pk+W+dsfRN6HT7bdP+rck4833TNmzfc8eVM9N1TC/C1eTmjBd99alQzh4/L3PJgW9mLnnmTZkbvzjvtmm/aRxnlmEE7H4CVD17gdpwxS4y/wCThqjAFx3DQO2dbRiueENLh3qZgWF4uJV1sR9J0EZJGR5GSkkfJ4vStz3siRsKWb6Ga7CQ+I2HrtKP4QGVy/RzErJkJn0qyZtIRktYpmaJdovfHf08EkfLiI2PIqM08aS8oA/yeVnQSCgwLV5ZbCpnjgwX+eQynL339Zljn/9K5sbn/xqx9pmGchag23Dp/WDCXEflLHaRN5umbZm+h4+ol8aqdYO8sWjRMEIs2sLiU/KOJIiSdALf9B01fdYc26TILe17jAuUhsRv8Oe55DN5QO2yZcayRN8kfCrNG09GSVhNjV2mHy0+T8TBL/QdjSLi2jK7kbyg4L5SFsSx4hXFRo++TWC3TZOH03JbjrPnpv195leo6cScNbg+8wxyH/S5BqZsLEteJI2qizgT3zr09cLfXovUG+xbiL0sVhikNrFoglaA4mJUtfTpBzq0+GgissBZSFKf8c9UAiqXrYQskWTin0rzJpJRElZS45dZ2vzzZB5th72zWF1F41qGWimpeSGtgigLXivREhZBaW0asFESTs43tdyWaU1FfYY5W4L/z9veUM4CpQvmO45WF6detHH7Zjie4AwXRaBzRr1YcZOvIytiFMTCDaStp29GHqzOWRDtgOmcJVxWskSTiX1qhDOZsJpa5ZzhQbgn4mqcaXnhnAV85O7RLq/jK0Fl1w4XvS/CVccZ6p/d+NDXLz3w88tft/f6TEPbTcORj9qyUUOotpuxi6LDjr6N6E8UJH58+AvroxfWbjKvwGetJk2HJOjbPvnX0pePxeGNkSObETG0VyosQ2lgxWUvmiXxQOKfyvKmt9Milzw12W6KuxNxmA8PgoAQcVniCXlBZ47yKYQiVN0GalCNM5MnHs9tmfHm8y88NzP387M35fq+vr2xnHm8i06+m64+gRW/yL6Esg/KbjgwbPyFdXkXXnjh6t+zSRvAGjjctfbog9HS56lZtOFA7YcrOaMhdc5YQO2yS9NTsmTJab3op5K8qcmwfy01i7djyt2JONSHvsMNnpITU222tbywOyMhaSTRn5PFpnHmByJcJLelOXvuga9tn4jrm7ZXomuJL4qRgGuIAmrgLGh9XfyeRn2XllHjvLL1gNe9541nt2WufvU1E4ozLyiRc9qtqPA2ncAEzko4164PZ5mrv7c3l7M+OKE4s0sVm11FmVpGK1Zn48ZZULopGF+9BuiCwAFn4IAz4AwccAYOOEucpy3TlSUz+WJ1zVImdarrDoskKuhNJ6bHPR23RJhR6dXS82wE+qdbFXf8UwNGL5TIcEQnU9WgY6JyljrvRxYBbCtSUtVzJpJI5KyC9LinbdWNM6aFG40yJ/WGkjhLSXwycUaem/7wRsWZTGKMnPGE6sFZue8gcFbN+iYWMuElkIh2iwqEyAIAPjDRlGGpwcR6oBBDpSi6aDqqIguruITCiqaJfDSdFktG6tEClyZkCQGXIZIl+iw6LaV+bkyGxmJJNZqhas5wHkQYtoIUuWEuBJOyNz27arGyO+RLUXq+RZbEkppIkeVZ1/2pUjbmK8VuE58zKmQSq3u2kFIRzsht4AMTTfElXC0Wk2GZZqqiiyShKbJUTFmavvgWq7IuqUcjqgklL+yCLXuQhrwlV9FnaXotIRZjajQuCqOiNN9Ub0Cpz/gNy36mkL3p2RXFqix3M28935o0TU/RlOUidX9qeOYrQjdHu6mrFbiUivSEfXZgYpZIUOWFQJCm6CJJ6IosPRX+TpWxsWREanYkL0L2RasKX3KmrTNHZGg8Flej6ZozpuvlH6m3m0zuJAVjSiRFHSTiSPmOkAtH9EyarlFJUeRZ1f1FpWyBIrtrUs6EKkqMAkbFmQxoWxVxpsnYopzhVlPNi8YZzbER5cI0ozI0nhxXo+mas/KciaKRsrfx5CwwtTyruj9NykbkaiXWoycsZx6rB6iiiujubHUUwEVTllpdMI2YFGalKLpoEqoii0ui9TQjMjaWDE/NdSN5Ye0qq2Cw+CvOWUyGxmJJNZqqOeNPXG83PS3XXAgmZG9RFZrix+/QM+P5VrKkjGsdLc+q7k+TsjG5mtNsnGGllUs744ZDpVSIMxcXADlw0RQLqiupFGFWsqLLZQWptGCslYykqcnYWDIytSDQ8sKVYfiF6rMSOEuQobFUmRpN05zxQa28AVPTtKGeEV8EV5RsmgqN1XHUj+XUpR19Pd8yS66U1tEURZ657k+5LaZPI75S7NZs6wHa4NkK+ME0zTGIpqzxUglZE1JupJWZ64x38iVFgc267lRqkqbmoqkmdVqZGeOdujeq71bTclYP0VQrcDbutdnoUod1dHCg1wAHnAFn4IAzcMBZOc6sqruaVZk3S4tdobQimmz6x4y1Px69KzK5j2e6vHEaaNfx1znNpHOs0spUVaVIJrorejD14yyaBl6i9vBypu9XGK1MDoAz4CwhDTwr7ONJw/IzpcBZGc6E4YFy1r8UwRZRjvGrAWtyUhRhfBKIWgbjhsSEIkuIuWJWzfAVljkpwUoUcEnTaOS9YqgtRQynnmoCOpovmUCABQAGmXvlHyKLQdW1qUo15Tbl5whBWeBWasqtBeuzSqx/KYItXy6E86CpijDRAGmGxPgStRRzRa2aKdbMFAlWooBLNY1mqaHTxHDqqaWq05g9LZEAsSRoe7h7xj9EFoMZiRkrsYgOTkjoKjXl1pqclbP+FRVsaWbH0hVhpjjVDTzxNW0u5opaNWN6MstUJViJwhrd9pntiNCpYriI/kJ7IaRwxZfjei7qnPm+YtZMFIMTVQWYMTtWXlQ0ZqsW0sqZcmtNzspa/4oItjSzY+mKMFOcJnGmirkiRU71ZNSbS7CSOdN+k4S8eehUMVyygE5yJhRfVuBji7moeyY/hBeDrmtL5ixmiw1L6Co25dZinHmxsk+2/hUTbHm62bFkRZgAzVcNiQlFlibm0qya0SieqUuwkgRcMhNU8yVCp5o3s2ICOskZlgyRBEjNFhCtkqncKS+GmEmzeIkpHPHArlu5KbfW4syVBshKW/+KCrZc0rUwkpRVUhFG1VhUs6UYEuOKLE3MpVk1o1e48otLsBIFXJ7yOw7ykGzR60s2b6bbFnU1zki+uCky0yc/ayA9A/lbElYMmq7NTbSXZpkx+2dBULEpN1gPqNyNkxqrOgnWqARb45oArAfUmTNjXFKprs8y5h6O1wLG22B9cxTVS1Xzm/ZYZ0PtVjDeBpyBqx9nt4bIme+7BjgDV1POtl576CfrDl43DzgDV1POnsK7VZz6VuAMXB04u4OyduwFjeWspB2o8s6qRtghfn9rKceKYrIZtLTBIJ538tU5uSpGxVUY5pEZrlSElxzD4PsqoFzHhG5pO5Em7YSa/OmSs/kn9R85ryU4KxO1WjPV8mpCuCBtaovsnRL45FlaXhXZK8dZQiYq1VKVuhO+REV+Lx0VuqXtRFo1Z3gcEJ77QgY4q5Kz9N/9MfseFUx+TRTOxH9c6JayE2n19dm1hw6t2HfuZxrPmaVsBqlZ1UrReTELYZpkSmwmqaixqAdLXZOvWUyHJdc6VVtljiIBE+maEZNkQjAmFFxs7Z4YTZB3Fr0lmT1uX6aEoTHddpnyLJV1I6afi1lTI+nKcPEYZNGLL28pQjfWWKbtRCo2nFQfSaSoY/2zJTOWN54zbTNI1aqWpvOyeBC5s5MimZIXpRqLerDUNfka12HJolO2yGRPQOxGqSrcVNMqdkRUxiwi4LYmYMuLCbcUsfWmPLuIobG47bKEyk8aQ4tZU4uEi8cw+b5F5IoUuvFOWcpOpIIzVXoXKeoYZ8e+eELDOdM2g9Ssaun6G2x3iQfBX7NkEVhUmsatWUXka9SUmVZ0bFDA/akETBGXJZiK0kRlsj4z2X5vibeUsI6ebGgsalMqmTOun4uJ86Q4LSUGLUd+41LoJkc1KTuRqlIQVsiRoo7XZ+HyzONozJlZsrXhnNESVq1qxTgLtC5AoggsKk1Tbl6Vr1FTZnHOpOiMSsAUcVkKZ4oiwjOFpRnflauU+i1FOEs3NFYZZ4qdOE2cp4jT0mKQD/HEt5AL3WLjhJKcyUI2UzhD/bOjD6L+2bEHr7j/6INbG6o/k5tBqla1FFWUsO+l3kqSCCwmTWOpm7p8jemwEjjjojMhAZNiLb3dVLbC5DUINT3qeGxaIPmWePao8CzF0FjMdllkL25F98OGiBFxHk9XhIvEYB+oGM/iQjcxmZG2E6kmbWO3FSnq6LrTlZdnMvNn7gof/GQD+2fqZpCaVS1FFUV1XZqFMDNRBBaTpslNNFX5GtVhxTmTojMhAVN0X6pJMtXimmJylP0GxhYTarFb4tljGUs2NBazXRbhTNgrU3bF1MV5NF1p1ywSAyfGpXr0W8iFbhpnSTuRapzR24oWdbOuozdCv2B79c9SC8jOTOCsKlduFqwWWfJaac9Q4KyimqXcR9YgS3ZL7RkK+jNwwBk44Aw4AwecgQPOquBMN+uuT2SPvmMulGaOUesxnaFvv5gqb7Ptam4rLbFKbBlVP7woKVhpVs7KiGDGjzOx/Di6Uq+wyA2rokdEVwmq5Kz8XWvb6ABnDeNsNOVWE87YmjVwVlf7Z4rJLt0sGFuGY8ImqeVS1nyYHk017UUkaZpmjRU/W0NKTKdK02KWFHMlGGELTH3DTG0DTlKxWmJjtKi4Tvdgqchi4bbM6H6fyl2LYkou0sRtM+MW0Cy+zakpSz8wVVtyTVyfaSa7rKj9HKkhY1oufQGdaxykaS/ySLRdLSNWz5LSqdK0mCXFXDEjbOqmmHGRG5/6Dzxtr8+UnNuqAk+pLLlUTt611H8lWEHjsSLbZsYtoMltTnnpExWdO6r6jMq2kXtn5hPnfqbhnEVMKWmSGMNSBCdEoRVRqwjhoW9GZF7RXS2V/U4T0qnStJglxFxxI2zKppi6Fkxw4vpUPCT2dCyVc6GMUjf0ZFI5eddKMSVap0rcNjNmAU3ZfpKVPgmr2JKrhrOrDx06dMu59x86dGFzcUYUWimcKaa9YrbUopwlpWOOyrQYtqsWNcIWEStGN+BkvQWhm4iK62I5j3DG0qNSOXnXZThL3jYzZgEtzhkLq9iSq67dZIA1njPdZJcuveImwRxuid2OqaIEBtK0V8yWWpSzpHTMqkyLiUjUrpq4FSmlEwq1SGq8A8DBiYnr9Jyzq1LuxnPHdGTKXYtiSrKClrxtZoIFNJqK8gAcPnIZI2cn7wofvL6x9s8Uk12a9IrZa5XCJqLQ0lVRsroRpr1SdrVUOjgJ6ZhVmRajkaiYK2qETdsUU9WYiRzQisaxTbl3aFrOXf5jG8PRNvQUOjJx1/I+Eq2gJW6bGbeAxlKRhUvCVv+b1Bhn4blnr+i/oknWA8ZLoTWBlF4tpdIowdmpX8lkvnBqc3A2XgqtiaT0miyc4Zdbm4Oz8VJoTSilF3AG6+jggDNwwBlwBpwBZ+CAs1SRQoKxsuikTkI0PA8e+0V3NN1xEKWNx89WrJKmyypJNOqRfmPa7ouGYgohwdHrmqmbCtbVm0FPm8pZ7BlYXlzEErfwVIazYOyTaaWUOEl7K47LGLQsZ+k3poS0jDLqI7pIIBZGqNkNRxEFtDhnEXsbo+dsHGYWJiZnFe0U6kvzeonhsVTD9+mRx1aOTcOZprPSpFpC/CQta2nGyqQuLDmaqWqL3Og2mcL0mLIVJ1f3SI0WC0Q1bvSNp2/1qSapWyxTLKYlWXBL2h1TkbxF/JS4woKZGlkpI76HZsTOmpNop4xy5vLSimvl8HXHpUe6Lqsem4czzTKYqUqyhCpLU1YpOq5ANXgRj6ZwFt92UsdQ/ZrHNFqWtLmmyOGkwMtMsVim6ts0TZlvimy4kaxEJW/RXT6xoRhtz9BIrkxT2UNTrl6qQjndThlN29Vrf1Urh02yOS494qLxiaLIL7d14kTjTBdeSakWETMkKavUZojrIBKjqU9K33YybnqMDytID4Sp00hwzY4YeRPZG1ECGpUqxTdE1NRwCbtjaqBG/FTrb77WIKu5Yt4xNZsilIvYj8LIGK4vx0RRrZxan/FSt8SxeThThVeKVIsCk6Cs0ro7PjMrlBRN4Sxp20nN9JgpZV1cnRYonmqIsXAWRPuRSVnhJR2fbgAABv5JREFUcmndT42r7Rmq5YpzFlWzKUK5GGe4zvLE6DymlSM9M4ce+bqdJ49N026qwisu1RJqq5iySpVZU0NjVNGfFE1pGBO2ndRMj5mKrEuq00xViSbfaHtwsiRjFstMU1F0JanhknbHVCRvcT8lrrpnqJ4r01T20GT67YhQjuffio6onCCivFPGo/SI2k2PDPS9ssb0JxxnmvCKSbWE2iqqrNLqM2poDIutkqNp44D4tpOa6TGTi87IN1VqtKR2TITQ9uB0WM0Rs1hmCn2bK29Ps+CWtDumInmL+om40T1DtVyZ6h6arPmNCOWEtMwJeC5pclHlHbs3h9+ag7uuHrkpT735pp3XaLQrq06zxJh+nPb3bIgrl/ey91YqAHBW1pVXp7lisGU08dKQMcbrJQMAZ2VrszKzpEH1++pM5vVN4AwccAYOOAPOwAFn4ICzdM70iUOfLxFVLl6Izz3YZmTc6Bim0FGlnZtj/FRwTcQZmSd1jDJPvIwFqBhnAZFJ0Nn2tHPgbBJx5vumbdi+544vZ2S+R+io0s6BsxblTFgoEztQBviJk536FIti+j6cXNfF98sU4jGpvkqeVxS6g7Rz3dQYuJbhTEilhHUuYhrK9/BR13pxJZbQdQmBmHyR6qtEzqiOqsR5zNQYuJbgTEqlxA6UpMFzEWdmRIOjWVCSUiyp1jJV9ZWsLzkzldVnqqkxcC3DmSqwpjtQ2ngh23C88pyJ/TKleEyqrxLrM6GjSjsHzlq03ZSbbfIdKF1s3dAji4i61itmqcvk+2VG1FpOKmfi1z3J5xFTY+BahzMhlZI7UMqZLE3rFbHU5XKzXDG1lhfbu15wxtRUaefSHhlw1srrAUz55RqN00QAYK3P2USwSwactTxnE8IuGXA2CdpNcMAZcAYOOAMHnAFnwNkE268u7shqED44bJqrcvkYiapp2WohdFOzpxx9uuWJzW2tKDbEfFuEdJnRfpP7cyMt7FzEYv6OAZyNibNU6022RQ+jkI/ZVlTLVguhm5o99Yhh8S0y5cuOBl9/sHkYatiCh8f+3LAYXs53lB86O8zgCnBWG84smx+qlo/hWBEtWy2Ebkr2Ikf2ws1RcEtjvi/C8/lCg2bHFm/4ue1ZAU/BUFIGzqpf3+Qmv1RLYbiZIBa2yG+eXb48VJV8DMfStWw1ErqJ7EWOjmq+zrCYpTELb1VGw3huYAjmuD++bX7OjGwZ3B84Gz1n0uQXsxRmMXtdpGDJNz7gD68q+RiOpWrZaiZ0C8xkzgK625LPjszSWGAJzrBGwPZ53Ub8qWExHsaltHvS4FhzcUY24DTfd80EaTcV8yxUliNsfJEqgdcL1cnHSCxFy1YzoZvMnn6kqBCO6JFYGvMd01O7AeTbZBBVEvX3UM3HzondtoDZv/K4tqSZONt67aGfrDt43bwJypmw8cVHAWr/rEL5GI2qa9lqInST2dOPJEMRW2EuYZO0tgYlkX9VhD8KzM5ttvsh+wqRt83G2VPo+N5T3zpxOPOYhUOffXHRF99WRwHVysdoLFXLViOhm5I9/YibTUqIUJEzU3eip4WSsh0Ry+Pmxeg5i4vrM1/4Nydnd2QyN94chle+0HDOsIjMFRtOEmEZ4owYGmTWBquUj3EbhWIUWiuhm5o97WiwCTrUWJKjsDQmOfO4STbBGW+W0TmNhafYFP/m42z+Sf1Hzsvc2H/F/Sv6r5sw6wHa3AEe09NDxU6YIeSxkrVs4yd0swITXMlxQHjuC5nMzAe/giu2icnZKFxl8T2Ao27jgEMr9tGtdyYfZzaIzOrZP1syY3nmuZmrUc0G+4iBqx1nx754Qubxrb+5BvarA1fT+ixcTvera8j+6OBa2sn+2dEHEWNfMM+7dOOMBnBWA7csG3EZcEkum+4qTuOooyoJRdedrrw8k7l62ozwynVbgTPgrAacTYB1dOAMOAPOgDPgDDgDzoAz4Aw4AwecAWfAGXAGnAFnwBlwBpwBZ8AZcAacAWfAGXAGnAFnwBlwBpwBZ8AZcDbenK14JTT/4ppM5rl1u8IHX78dOAPOasHZkhffd/8pB4+cN3/a1i/tmGY+BZwBZzXgbP4nrpiXydx66h2XzD4vkzlj3zuBM+CsBpxdMvud6jvgDDirDWf7OGc3HpgRhiFwBpzVtD67ZPYV/70dvwPOgLNa9c+W9N6BfymcOQM4A85qN95c0X/kvDNmn/ulnbOh3QTOajR/dko/nT87qT/c+tGbr9sOnAFnsB4AnAFnwBlwBpyBA86AM+AMOAPOgDPgDDgDzoAz4AwccAacAWfAGXAGnAFnwBlwBpwBZ8AZcAacAWfAGXAGnAFnwFk9OQNXrQPOgDPgDDgDzoAzcMAZcAacAWfAGXAGnAFnwBlwluz+H9g+e7VRP9egAAAAAElFTkSuQmCC&quot;&gt;screenshot&lt;/a&gt;), presumably because of this lack of documentation&lt;/li&gt;
  &lt;li&gt;were I to guess, this is also probably why they consider users &lt;a href=&quot;//forum.chrultrabook.com/t/general-mild-documentation-oddities-rollup/521/4&quot;&gt;&quot;not technical enough&quot;&lt;/a&gt; 🤢 to follow a longer thing they may understand than a magical one-liner&lt;/li&gt;
  &lt;li&gt;forum'&lt;!--'--&gt;s &lt;a href=&quot;//101010.pl/@nabijaczleweli/111722108722210068&quot;&gt;fucking&lt;/a&gt; &lt;a href=&quot;//101010.pl/@nabijaczleweli/111723601116129102&quot;&gt;Discourse&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;I ran out of &lt;a href=&quot;//101010.pl/@nabijaczleweli/111733977710166096&quot;&gt;words&lt;/a&gt; to put &lt;a href=&quot;//101010.pl/@nabijaczleweli/111734016113409806&quot;&gt;links&lt;/a&gt; on for the last one&lt;/li&gt;
  &lt;li&gt;I liked her &lt;a href=&quot;//media.ccc.de/v/37c3-11929-turning_chromebooks_into_regular_laptops&quot;&gt;talk&lt;/a&gt; but elly &lt;a href=&quot;//101010.pl/@elly@donotsta.re/111734258473806402&quot;&gt;threatened to ban me&lt;/a&gt; for
      &lt;blockquote class=&quot;continuing&quot;&gt;
        Shitting all over the non-profit project, documentation written by community and mentality &quot;I know better than you&quot; is exactly the kind of toxicity we don'&lt;!--'--&gt;t want in our community.
      &lt;/blockquote&gt;
      ; one will do well to note we've interacted once on the forum and at most twice off the forum (of her accord) and both of those went fine. Odd behaviour, given that she's the one with the misinformation above, and, well, you've seen this post and you can click through to my &lt;a href=&quot;//101010.pl/@nabijaczleweli/111721710968221669&quot;&gt;mastussy thread&lt;/a&gt; and the &lt;a href=&quot;//forum.chrultrabook.com/t/general-mild-documentation-oddities-rollup/521&quot;&gt;forum post&lt;/a&gt;, none of these are particularly &quot;shitting on&quot;, much less toxic. I don't even think I exhibit that mentality, really. Maybe this is a language barrier (we're both polish), seeing as I haven't gotten an actual warning or anything before (except for automatic Discourse bullshit), and another user with admin powers &lt;a href=&quot;//101010.pl/@BluRaf@donotsta.re/111734014889040333&quot;&gt;gladly unblocked me&lt;/a&gt; (also unprompted and of his own volition) more than once, well.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;conclusions-funny-moments&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#conclusions-funny-moments&quot;&gt;#&lt;/a&gt; family guy funny moments&lt;/h3&gt;
&lt;ul style=&quot;padding-left: 0;&quot;&gt;
  &lt;li&gt;guide sections are randomly-cased&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;//forum.chrultrabook.com/t/help-me-please-i-buyed-incorrect-drivers/218&quot;&gt;paid drivers&lt;/a&gt; meme real&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;indented&quot;&gt;
Most of the issues out-lined above have been &lt;a href=&quot;//forum.chrultrabook.com/t/general-mild-documentation-oddities-rollup/521&quot;&gt;forwarded&lt;/a&gt;.
That is also the reason for most of them having been discovered.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
&lt;a href=&quot;//linux-hardware.org/?probe=7402fc6e46&quot;&gt;hw-probe of my result.&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
A good bug report never goes unpunished.
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/012a-installing-debian-chromebook-lenovo-300e-gen2-intel.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/012-debian-chromebook-lenovo-300e-gen2.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/012-debian-chromebook-lenovo-300e-gen2.html" />
    <title> 012. Debian on the Lenovo 300e 2nd-gen arm64 Chromebook — blognꞌt — nabijaczleweli </title>
    <updated>2024-01-08T16:06:34+01:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;012. Debian on the Lenovo 300e 2&lt;sup&gt;nd&lt;/sup&gt;-gen arm64 Chromebook&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Mon, 08 Jan 2024 16:06:34 +0100&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#jpeg'&gt;peep da nose cam&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#jailbreak'&gt;Save me from chromium (chrome os (chromium os(?)))&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#HFBITLAND'&gt;Take me to &lt;span class=&quot;smallcaps&quot;&gt;hfbitland&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#kms'&gt;fuckin kms i s'&lt;!--'--&gt;pose&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
On 2024-01-04 I bought the titular laptop for 120+11.6zł (100+10zł sometimes available, 70+8.5zł for one with a busted-ass screen; resp. 30.26€, 25.29€, 18.05€; all well under 20kg of kefir)
because it &lt;a href=&quot;//www.lenovo.com/us/en/p/laptops/lenovo/lenovo-edu-chromebooks/lenovo-300e-chromebook-2nd-gen-mtk/88elc1s9988#tech_specs&quot;&gt;has&lt;/a&gt; a &lt;a href=&quot;//www.mediatek.com/products/tablets/mt8173&quot;&gt;MediaTek MT8173&lt;/a&gt; (which Lenovo calls &quot;8713&lt;strong&gt;C&lt;/strong&gt;&quot;), which &lt;a href=&quot;//allegrolokalnie.pl/oferta/lenovo-chromebook-300e-ap7&quot;&gt;is arm64&lt;/a&gt; (image 5),
as a &quot;real&quot; — frankly, only realistic — platform to test &lt;a href=&quot;//sr.ht/~nabijaczleweli/snappy-tools&quot;&gt;snappy-tools&lt;/a&gt; hardware-accelerated CRC32C for ARM.
&lt;/p&gt;
&lt;!-- Image 5: https://a.allegroimg.com/original/1e84c6/57cc67824cf38e53a2c30638d52a; archived locally if the link dies --&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Now that I re-analyse the image,
it clearly says &quot;&lt;span lang=&quot;pl&quot;&gt;Instrukcje: crc32&lt;/span&gt;&quot;, which is great because I thought I was taking a gamble on an
&lt;a href=&quot;//developer.arm.com/documentation/100076/0100/A32-T32-Instruction-Set-Reference/A32-and-T32-Instructions/CRC32?lang=en&quot;&gt;optional-in-ARMv8-A&lt;/a&gt; feature.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
According to a page under the authority of &quot;sites.google.com/a/chromium.org&quot; (what does this mean?) page titled
This &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/&quot;&gt;&lt;cite&gt;Chromium OS &gt; &lt;b&gt;Developer Information for Chrome OS Devices&lt;/b&gt;&lt;/cite&gt;&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;
(what the fuck does &lt;em&gt;that&lt;/em&gt; mean?)
this machine is:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div&gt;&lt;dt&gt;Release&lt;/dt&gt;&lt;dd &gt;27 February 2019&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;OEM&lt;/dt&gt;&lt;dd &gt;Lenovo&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Model&lt;/dt&gt;&lt;dd &gt;&lt;a href=&quot;//www.lenovo.com/us/en/laptops/lenovo/student-chromebooks/Lenovo-300e-Chromebook-2nd-Gen-MTK/p/88ELC1S9988&quot;&gt;Lenovo 300e Chromebook 2nd Gen (MTK)&lt;/a&gt;&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Code name&lt;/dt&gt;&lt;dd &gt;Sycamore360&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Board name(s)&lt;/dt&gt;&lt;dd&gt;hana&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Base board&lt;/dt&gt;&lt;dd &gt;oak&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;User ABI&lt;/dt&gt;&lt;dd &gt;arm&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Kernel&lt;/dt&gt;&lt;dd &gt;3.18&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Kernel ABI&lt;/dt&gt;&lt;dd &gt;aarch64&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Platform&lt;/dt&gt;&lt;dd &gt;MT8173&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Form Factor&lt;/dt&gt;&lt;dd &gt;Chromebook&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;First Release&lt;/dt&gt;&lt;dd&gt;R72&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
which appears to also be exactly identical to a &quot;&lt;strong&gt;1&lt;/strong&gt;00e&quot; but &quot;Sycamore&quot;.
Presumably the &lt;em&gt;only&lt;/em&gt; difference is that this one goes &lt;del&gt;sicko&lt;/del&gt;tablet mode and has a touch-screen.
Well, mine goes but doesn'&lt;!--'--&gt;t.
&lt;/p&gt;
&lt;p class=&quot;continuing indented&quot;&gt;
Note also that it disagrees with Lenovo about the &lt;strong&gt;C&lt;/strong&gt;.
And that &lt;a href=&quot;//www.lenovo.com/us/en/p/laptops/lenovo/lenovo-edu-chromebooks/lenovo-300e-chromebook-2nd-gen-mtk/88elc1s9988#tech_specs&quot;&gt;the product page&lt;/a&gt;'&lt;!--'--&gt;s URL
has an &lt;tt&gt;mtk&lt;/tt&gt; in it, but the title itself doesn'&lt;!--'--&gt;t, and neither does the label on the bottom:
&lt;/p&gt;
&lt;!--&quot;--&gt;&lt;a href=&quot;/content/assets/blogn_t/012.01-label.jpg&quot;&gt;&lt;img class=&quot;continuation&quot; alt=&quot;Lenovo 300e Chromebook 2nd Gen
Model Name (型號):81MB
INPUT (電壓/電流):15V DC 3A
Mfg Date:19/06/02
S/N:P205WM6Z MTM:81MB0008MX
Manufactured for Lenovo
Made in China 中國製造
MO:P2N0B960200M Factory ID: HFBITLAND&quot; src=&quot;/content/assets/blogn_t/012.01-label.jpg&quot;&gt;&lt;/a&gt;&lt;!--&quot;--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This is largely precipitated by &lt;a href=&quot;//media.ccc.de/v/37c3-11929-turning_chromebooks_into_regular_laptops&quot;&gt;the chrultrabook talk&lt;/a&gt;,
but naturally, this being ARM, it'&lt;!--'--&gt;s yet impossible to install Debian.
This is more &lt;a href=&quot;//wiki.debian.org/InstallingDebianOn/Samsung/ARMChromebook&quot;&gt;InstallingDebianOn/Samsung/ARMChromebook&lt;/a&gt;
— &quot;running debian on the chromebook from the μ&lt;small&gt;SD&lt;/small&gt; card&quot; —
than an installation.
This is why I dastardlily omitted &quot;installing&quot; from the title,
&lt;a href=&quot;//archlinuxarm.org/platforms/armv7/samsung/samsung-chromebook-2&quot;&gt;neither&lt;/a&gt; article for my first prospective pick giving me the same courtesy.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Also, neither appear to actually demonstrate any of the interesting platform-specific layout,
and instead opt for baffling and unprecedented-in-the-text shell programs using software suites and methodologies
that definitely make sense to the authors to get to the precise point they'&lt;!--'--&gt;re trying to get to in the minimum article space, but.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Also, for some reason, every, as in &lt;em&gt;every&lt;/em&gt;, Chromebook on the market has both a scandinavian keyboard and an asset tag (mine is bar-coded &lt;tt&gt;005441279&lt;/tt&gt;).
Sometimes the latter also means the swedish coat of arms printed on the lid (indeed, my specimen booted at &quot;8:00 SE&quot;).
Where are these coming from?
Do swedish libraries cycle through these yearly (the claimed 2019-06-02 manufactury makes it rather recent) and dump them for less-than-free?
Are literal wagon-loads of these being imported into Poland of all places?
&lt;/p&gt;
&lt;h2 id=&quot;jpeg&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#jpeg&quot;&gt;#&lt;/a&gt; peep da nose cam&lt;/h2&gt;
&lt;a href=&quot;//101010.pl/@nabijaczleweli/111710881591330749&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Chromebook open, I'm sitting pretty in the reflexion; there's a camera above the screen and above the keyboard; the keyboard itself is swedish and decroted: there are two extrmely wide keys to the left of the space bar (ctrl and alt), the ISO enter is half a key thin, the caps lock has a 🔍 on it, and the top row has an esc key, then a series of 11 icons&quot; src=&quot;//storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/710/877/371/207/609/original/52442a5465b2f7ce.jpeg&quot;&gt;&lt;/a&gt; &lt;!-- DSC_3008.JPG --&gt;
&lt;p class=&quot;continuation&quot;&gt;
(This is after a thorough washing with water due to normal sugar stickiness,
isopropanol because of tacky resin stains somehow,
and it'&lt;!--'--&gt;s still kinda goopy on the sides because despite being only 4.5 years old the rubbery edging is starting to approach rotting somehow?)
&lt;/p&gt;
&lt;h2 id=&quot;jailbreak&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#jailbreak&quot;&gt;#&lt;/a&gt; Save me from chromium (chrome os (chromium os(?)))&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
because naturally the only control available on the above &quot;Welcome&quot; screen it boots to in OOBE is &quot;&lt;b&gt;Connect to network&lt;/b&gt;&quot;,
which opens what amounts to the Android &quot;Connect to Wi-Fi&quot; screen,
except you can'&lt;!--'--&gt;t skip it (unlike the Android OOBE),
and the subtitle is &quot;To restore your data, connect to the internet&quot;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Restore from where? what data? mf on the pack fr fr?
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Of course, the &lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/samsung-arm-chromebook/&quot;&gt;guide&lt;/a&gt;&lt;sup&gt;[&lt;abbr title=&quot;original version, archived&quot;&gt;orig. arch.&lt;/abbr&gt;]&lt;/sup&gt;s say
&quot;enter recovery and then developer mode&quot;.
So to enter recovery you hold &lt;kbd&gt;esc&lt;/kbd&gt; and &lt;kbd&gt;⟳&lt;/kbd&gt; (natch) and click the power button and
&lt;/p&gt;
&lt;a href=&quot;//storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/716/834/732/367/499/original/2eed806f02a084e9.jpeg&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Title line: chrome, English; Main body: Please insert a recovery USB stick or SD card.; Footer: For help visit https://google.com/chromeos/recovery  Model PHASER360 D4J-B3K-B4Q-H6V-52A-Y2B-A47&quot; src=&quot;//storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/716/834/732/367/499/original/2eed806f02a084e9.jpeg&quot;&gt;&lt;/a&gt; &lt;!-- DSCN0541cc.JPG --&gt;
&lt;p class=&quot;continuation&quot;&gt;
That'&lt;!--'--&gt;s not Sycamore360 now, is it? What does that mean.
Also, what's that card? It sure as hell ain't SD. It looks like an MMC-but-I-forgor-💀-how-many-pins-it-has, but.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Note also how it's white and hasn't respected my colour inversion setting, which it itself groups as accessibility.
After you get over getting flash-banged, press &lt;kbd&gt;ctrl&lt;/kbd&gt; and &lt;kbd&gt;d&lt;/kbd&gt;:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.02-DSCN0542ccr.JPG&quot; &gt;&lt;img class=&quot;continuing&quot; alt=&quot;Main body: To turn OS verification OFF, press ENTER. Your system will reboot and local data will be cleared.  To go back, press ESC.&quot; src=&quot;/content/assets/blogn_t/012.02-DSCN0542ccr.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
No prompt, why would there be.
Just like there'&lt;!--'--&gt;s no prompt for (or, really, nothing to even remotely imply! those are &lt;em&gt;·&lt;/em&gt;s, not arrows!) &lt;kbd&gt;˃&lt;/kbd&gt; and &lt;kbd&gt;˂&lt;/kbd&gt;
(the arrow keys, which aren'&lt;!--'--&gt;t labelled with arrows now) change the language.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Confirm with &lt;kbd&gt;↵&lt;/kbd&gt; and it reboots and
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.03-DSCN0543ccr.JPG&quot; &gt;&lt;img class=&quot;continuing&quot; alt=&quot;Main body: laptop icon with an orange exclamation mark. OS verification is OFF  Press SPACE to re-enable.&quot; src=&quot;/content/assets/blogn_t/012.03-DSCN0543ccr.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
and it'&lt;!--'--&gt;s not booting.
Why? Doesn'&lt;!--'--&gt;t say.
The only control appears to be re-enabling, but no!
You can press &lt;kbd&gt;ctrl&lt;/kbd&gt; and &lt;kbd&gt;d&lt;/kbd&gt; again to boot.
Why?
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Also the punctuation is inconsistent with every other string here. Why?
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
After booting manually 🙄 I got
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.04-DSCN0545vccr.JPG&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Top-left corner: Starting in 30 second(s)...; Title line: chrome; Main body: Yout system is transitioning to Developer Mode. Local data has been cleared.  Modifications you make to the system are not supported by Google, may cause hardware issues and may void warranty.  To cancel, turn you computer off now.&quot; src=&quot;/content/assets/blogn_t/012.04-DSCN0545vccr.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
which after 30s falls through to
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.05-DSCN0546vccr.JPG&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Top-left corner: 4:41; Main body: spinner, Preparing system for Developer Mode. This may take a while. Do not turn your computer off until it has restarted.&quot; src=&quot;/content/assets/blogn_t/012.05-DSCN0546vccr.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
which is a hard five-fucking-minute secondised countdown.
Which I guarantee is a &lt;code&gt;mkfs&lt;/code&gt; call that completed in 2s at most.
Why?
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
And after another reboot, and another manually-confirmed boot 🙄 there'&lt;!--'--&gt;s magically a new control in the OOBE!
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.06-DSCN0547vccr.JPG&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Welcome to your Chomebook screen, an 'Enable debugging features' link was added&quot; src=&quot;/content/assets/blogn_t/012.06-DSCN0547vccr.JPG&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.07-DSCN0548r.JPG&quot; &gt;&lt;img class=&quot;continuing&quot; alt=&quot;(exclamation mark in a circle); Title: Enable debugging features, Subtitle: A removal of rootfs protection and restart is required before enabling other debugging features. Learn more.; Buttons: Cancel and Proceed&quot; src=&quot;/content/assets/blogn_t/012.07-DSCN0548r.JPG&quot;&gt;&lt;/a&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.08-DSCN0549vccr.JPG&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;'Learn more.' clicked. It's a big popup titled Debugging Features with a load of irrelevant text.&quot; src=&quot;/content/assets/blogn_t/012.08-DSCN0549vccr.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
And this is somehow times new roman. Everything else is in Roboto and this is deadass &lt;code&gt;font-family: initial;&lt;/code&gt;.
Also the URLs are not clickable? I didn't try selecting them, but I wouldn't put them being uncopiable past this.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
You can tell no-one has ever read this
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.09-DSCN0550r.JPG&quot; &gt;&lt;img class=&quot;continuing&quot; alt=&quot;Still 'Enable debugging features', but Subtitle: You are enabling ChromeOS debugging features which will set up sshd daemon and enable booting from USB drives.  On the right half of the screen there's a form with fields called 'root password' and 'confirm password', and a grey comment 'leave empty if you want to set the root password to the default test image value'. The buttons are Cancel and Enable now. Enable is in a big bright coloured circle.&quot; src=&quot;/content/assets/blogn_t/012.09-DSCN0550r.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
but you can also tell that in the most accessible system in the world you
&lt;em&gt;can'&lt;!--'--&gt;t confirm entry and operate the huge fuckoff brightly-high-lit button by pressing &lt;kbd&gt;↵&lt;/kbd&gt;&lt;/em&gt;,
you need to unironically go to it with the cursor and click it.
Truly insane shit.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But the screen you get after is even better somehow, because it'&lt;!--'--&gt;s a complete de novo re-imagining of the branding:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.10-DSCN0551r.JPG&quot; &gt;&lt;img class=&quot;continuing&quot; alt=&quot;The subtitle changed to 'You have successfully enabled debugging features on this Chrome device.' and the form on the right is replaced with a big green check-mark.&quot; src=&quot;/content/assets/blogn_t/012.10-DSCN0551r.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
&quot;&lt;em&gt;Chrome device&lt;/em&gt;&quot;‽
Somehow mixing both &quot;ChromeOS&quot; and &quot;ChromiumOS&quot; in consecutive paragraphs in the same pop-up is bad enough,
&quot;ChromeOS Device&quot; as a derivative of those is reasonable,
somehow turning it into &quot;Chrome OS&quot; or &quot;Chromium OS&quot; is baffling,
and the &quot;Chromebook&quot; branding is too cutesy as it is,
but &quot;Chrome device&quot; is unprecedented, as in &quot;never figures in user-facing branding&quot;-level internal nomenclature AFAICT.
Except in this subtitle.
&lt;/p&gt;
&lt;h2 id=&quot;HFBITLAND&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#HFBITLAND&quot;&gt;#&lt;/a&gt; Take me to &lt;span class=&quot;smallcaps&quot;&gt;hfbitland&lt;/span&gt;&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Now one can switch to VT2 with the usual combination of &lt;kbd&gt;ctrl&lt;/kbd&gt;, &lt;kbd&gt;alt&lt;/kbd&gt;, and &lt;kbd&gt;→&lt;/kbd&gt; (not the arrow key),
and get an a-little-fucked-up &lt;samp style=&quot;font-style: italic;&quot;&gt;/etc/issue&lt;/samp&gt; and a getty prompt where the root creds set above work.
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/012.11.DSCN0554cc.JPG&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Developer Console, then some bollocks, then a successful login prompt for root at localhost; then uname -a which says Linux localhost 4.14.290-19334-gd1f3f46afcb0 #1 SMP PREEMPT Wed Oct 5 13:43:48 PDT 2022 x86_64 Intel(R) Celeron(R) N4000 CPU @ 1.10GHz GenuineIntel GNU/Linux&quot; src=&quot;/content/assets/blogn_t/012.11.DSCN0554cc.JPG&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
The guides recommend &lt;kbd&gt;ctrl&lt;/kbd&gt;+&lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;t&lt;/kbd&gt; to start the &quot;de&lt;span class=&quot;smallcaps&quot;&gt;cro&lt;/span&gt;ded &lt;span class=&quot;smallcaps&quot;&gt;sh&lt;/span&gt;ell&quot;, but this hasn'&lt;!--'--&gt;t worked for me.
The &lt;a href=&quot;//docs.chrultrabook.com/docs/firmware/flashing-firmware.html&quot;&gt;chrultrabook manual&lt;/a&gt; agrees with me on this, however.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
A nicety: pressing &lt;kbd&gt;alt&lt;/kbd&gt;+&lt;kbd&gt;shift&lt;/kbd&gt;+&lt;kbd&gt;˄&lt;/kbd&gt; or &lt;kbd&gt;˅&lt;/kbd&gt; (the arrow keys) scrolls up and down. But by one line only.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
But the fucking keymap is wrong.
Admittedly it's ergonomic to me personally to be able to mostly use the scandi keyboard, but the keymap doesn't match what the keyboard is, like, at all.
Also not having Home/End is agony.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Maybe the recovery says &quot;PHASER360&quot; instead of &quot;Sycamore360&quot; because
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
  &lt;dl class=&quot;continuing&quot;&gt;
    &lt;div&gt;&lt;dt&gt;Release&lt;/dt&gt;&lt;dd &gt;27 February 2019&lt;/dd&gt;&lt;dd&gt;1 March 2019&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;OEM&lt;/dt&gt;&lt;dd &gt;Lenovo&lt;/dd&gt;&lt;dd &gt;Lenovo&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Model&lt;/dt&gt;&lt;dd &gt;&lt;a href=&quot;//www.lenovo.com/us/en/laptops/lenovo/student-chromebooks/Lenovo-300e-Chromebook-2nd-Gen-MTK/p/88ELC1S9988&quot;&gt;Lenovo 300e Chromebook 2nd Gen (MTK)&lt;/a&gt;&lt;/dd&gt;&lt;dd&gt;&lt;a href=&quot;//www.chromium.org/chromium-os/developer-library/reference/development/developer-information-for-chrome-os-devices/Lenovo%20300e%20Chromebook%202nd%20Gen%20(Intel)&quot;&gt;Lenovo 300e Chromebook 2nd Gen (Intel)&lt;/a&gt;&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Code name&lt;/dt&gt;&lt;dd &gt;Sycamore360&lt;/dd&gt;&lt;dd &gt;Phaser360&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Board name(s)&lt;/dt&gt;&lt;dd&gt;hana&lt;/dd&gt;&lt;dd &gt;Octopus&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Base board&lt;/dt&gt;&lt;dd &gt;oak&lt;/dd&gt;&lt;dd &gt;octopus&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;User ABI&lt;/dt&gt;&lt;dd &gt;arm&lt;/dd&gt;&lt;dd &gt;x86_64&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Kernel&lt;/dt&gt;&lt;dd &gt;3.18&lt;/dd&gt;&lt;dd &gt;4.14&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Kernel ABI&lt;/dt&gt;&lt;dd &gt;aarch64&lt;/dd&gt;&lt;dd &gt;x86_64&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Platform&lt;/dt&gt;&lt;dd &gt;MT8173&lt;/dd&gt;&lt;dd &gt;Gemini Lake&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;Form Factor&lt;/dt&gt;&lt;dd &gt;Chromebook&lt;/dd&gt;&lt;dd &gt;Convertible&lt;/dd&gt;&lt;/div&gt;
    &lt;div&gt;&lt;dt&gt;First Release&lt;/dt&gt;&lt;dd&gt;R72&lt;/dd&gt;&lt;dd &gt;R72&lt;/dd&gt;&lt;/div&gt;
  &lt;/dl&gt;
&lt;/blockquote&gt;
&lt;p class=&quot;continuation&quot;&gt;
which is, yes, a second &lt;em&gt;identical&lt;/em&gt; laptop, released days apart, differing only by &quot;(MTK)&quot; at the end of the branding
which &lt;em&gt;isn'&lt;!--'--&gt;t actually branded onto the product&lt;/em&gt;,
but one has a Celeron N4000 and the other an MT8173.
(Also the form factor for the ARM variant being &quot;Chromebook&quot;?)
&lt;/p&gt;
&lt;h2 id=&quot;kms&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#kms&quot;&gt;#&lt;/a&gt; fuckin kms i s'&lt;!--'--&gt;pose&lt;/h2&gt;
&lt;a href=&quot;//101010.pl/@nabijaczleweli/111715350612107659&quot;&gt;&lt;img class=&quot;continuation&quot; alt=&quot;the chromebook on its side. both halves have holes out (two USB 3s, two USB-Cs, one of which charge-capable, one micro-SD card, one kensington lock, and volume up/down and power buttons), implying both halves are the keyboard half&quot; src=&quot;//storage.waw.cloud.ovh.net/v1/AUTH_74714a37e6e24c7fb695d79be309da62/101010public/media_attachments/files/111/715/765/596/303/398/original/947dc76b7942ba6b.jpeg&quot;&gt;&lt;/a&gt; &lt;!-- DSCN0539+40.JPG --&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/012-debian-chromebook-lenovo-300e-gen2.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/011-linux-splice-exclusion.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/011-linux-splice-exclusion.html" />
    <title> 011. pipe exclusion with splice() under Linux — blognꞌt — nabijaczleweli </title>
    <updated>2023-07-07T01:42:34+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;011. pipe exclusion with splice() under Linux&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Fri, 07 Jul 2023 01:42:34 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#how'&gt;how?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#notty'&gt;I'&lt;!--'--&gt;m not at a teletype‽&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#bisexion'&gt;Bisexion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#why'&gt;why'&lt;!--'--&gt;d I care?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#timeline'&gt;timeline&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Since apparently I'&lt;!--'--&gt;m
&lt;a href=&quot;//lore.kernel.org/linux-fsdevel/jbyihkyk5dtaohdwjyivambb2gffyjs3dodpofafnkkunxq7bu@jngkdxx65pux/t/#u&quot;&gt;the only &lt;code&gt;splice&lt;/code&gt;(2) user&lt;/a&gt;,
herein I demonstrate a &lt;a href=&quot;//lore.kernel.org/linux-fsdevel/qk6hjuam54khlaikf2ssom6custxf5is2ekkaequf4hvode3ls@zgf7j5j4ubvw/t/#u&quot;&gt;fun Linux BKL moment&lt;/a&gt;
(but the BKL is on a pipe).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
If you use a &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/voreutils/tree/trunk/item/cmd/cat.cpp&quot;&gt;splicing &lt;code&gt;cat&lt;/code&gt;&lt;/a&gt;,
you can do this right now from your teletype: just
&lt;/p&gt;
&lt;pre class=&quot;continuing inline&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;cat | whatever&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
and &lt;code&gt;whatever&lt;/code&gt; will sleep forever on reads from its standard input stream, even if it set &lt;code&gt;O_NONBLOCK&lt;/code&gt; on it.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
That'&lt;!--'--&gt;s boring tho, since anonymous pipes are, well, anonymous. What about
&lt;/p&gt;
&lt;pre class=&quot;continuing inline&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;mkfifo fifo&lt;/kbd&gt;
$ &lt;kbd&gt;whatever &amp;lt; fifo &amp;&lt;/kbd&gt;
$ &lt;kbd&gt;cat &gt; fifo&lt;/kbd&gt;
&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
? The same applies! Even better:
&lt;/p&gt;
&lt;pre class=&quot;continuing inline&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;&gt; fifo&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
from another teletype sleeps forever as well.
So does the &lt;code&gt;&amp;lt;&lt;/code&gt; direxion.
And &lt;code&gt;O_NONBLOCK&lt;/code&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
And &lt;em&gt;any&lt;/em&gt; operation on that pipe.
Try sending a deadly signal to any of the afflicted (non-&lt;code&gt;cat&lt;/code&gt;) processes, too!.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
If you don'&lt;!--'--&gt;t, then
&lt;/p&gt;
&lt;div class=&quot;bigcode inline continuing&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;_GNU_SOURCE&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;fcntl.h&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;stdio.h&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;ssize_t&lt;/span&gt; rd&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; acc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rd &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;splice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1024&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;acc &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; rd&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;fprintf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;stderr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;sp=%zd: %m\n&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
can function as the pro-verbial &lt;code&gt;cat&lt;/code&gt;.
You can also substitute the &lt;code&gt;splice(…)&lt;/code&gt; for a &lt;code&gt;sendfile(1, 0, 0, 128 * 1024 * 1024);&lt;/code&gt;,
since, as a special case since 5.12,
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/fs/read_write.c?id=b964bf53e540262f2d12672b3cca10842c0172e7&quot;&gt;sendfile(any→pipe) is legal and equivalent to splice() of the same&lt;/a&gt;,
even though otherwise it
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/splice.c?id=6995e2de6891c724bfeb2db33d7b87775f913ad1#n905&quot;&gt;only allows seekable→any&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But
&lt;/p&gt;
&lt;h2 id=&quot;how&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#how&quot;&gt;#&lt;/a&gt; how?&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
Quite easily —
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/splice.c?id=6995e2de6891c724bfeb2db33d7b87775f913ad1#n1111&quot;&gt;&lt;code&gt;splice_file_to_pipe()&lt;/code&gt;&lt;/a&gt;,
which, shockingly, runs when splicing
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/splice.c?id=6995e2de6891c724bfeb2db33d7b87775f913ad1#n1131&quot;&gt;from a non-pipe to a pipe&lt;/a&gt;,
locks the output pipe, then does I/O, then unlocks it.
Locking the pipe naturally excludes concurrent
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/pipe.c?id=6995e2de6891c724bfeb2db33d7b87775f913ad1#n1098&quot;&gt;&lt;code&gt;open()&lt;/code&gt;s&lt;/a&gt;,
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/pipe.c?id=6995e2de6891c724bfeb2db33d7b87775f913ad1#n231&quot;&gt;&lt;code&gt;read()&lt;/code&gt;s&lt;/a&gt;,
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/pipe.c?id=6995e2de6891c724bfeb2db33d7b87775f913ad1#n417&quot;&gt;&lt;code&gt;write()&lt;/code&gt;s&lt;/a&gt;.
and
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/pipe.c?id=6995e2de6891c724bfeb2db33d7b87775f913ad1#n717&quot;&gt;final &lt;code&gt;close()&lt;/code&gt;s&lt;/a&gt;
(incl. implicit ones on death).
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Usually you wouldn'&lt;!--'--&gt;t think this to be a huge issue, since most I/O completes within some reasonably-bounded time,
but teletype I/O, by design, never does
&lt;a href=&quot;//ra.ws.co.ls/~nabijaczleweli/voreutils/blob/man/man1/stty.1.html#ATTRIBUTES&quot;&gt;until a newline/&lt;code&gt;eof&lt;/code&gt;/&lt;code&gt;eol&lt;/code&gt;/&lt;code&gt;eol2&lt;/code&gt;&lt;/a&gt;.
And, thus, QED.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Additionally, for splicing from a pipe to a socket,
if the &lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/splice.c?id=v6.6#n871&quot;&gt;write to the socket&lt;/a&gt; would block,
that sleep is taken &lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/splice.c?id=v6.6#n801&quot;&gt;with the pipe lock held&lt;/a&gt;.
The &lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/splice.c?id=v6.6#n683&quot;&gt;same&lt;/a&gt; applies
to the &lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/splice.c?id=v6.6#n735&quot;&gt;generic implementation&lt;/a&gt;,
which is only an issue for teletypes and FUSE.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But
&lt;/p&gt;
&lt;h2 id=&quot;notty&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#notty&quot;&gt;#&lt;/a&gt; I'&lt;!--'--&gt;m not at a teletype‽&lt;/h2&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;_GNU_SOURCE&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;fcntl.h&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;stdlib.h&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; pt &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;posix_openpt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;O_RDWR&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;grantpt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pt&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;unlockpt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pt&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; cl &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ptsname&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pt&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; O_RDONLY&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;splice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cl&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1024&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
or even
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;_GNU_SOURCE&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;fcntl.h&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;sys/socket.h&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; sp&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;socketpair&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;AF_UNIX&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; SOCK_STREAM&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;splice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sp&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1024&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id=&quot;bisexion&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#bisexion&quot;&gt;#&lt;/a&gt; Bisexion&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
By rough-bisecting off snapshot.d.o kernel packages – since
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1787015-two-hours-babysittin&quot;&gt;4.0, and even 5.0, don'&lt;!--'--&gt;t build on bookworm&lt;/a&gt; –
to between
&lt;code&gt;4.8.15-2&lt;/code&gt; and &lt;code&gt;4.9.1-1~exp1&lt;/code&gt;,
&lt;!--
3.16.36-1+deb8u1 is ok
Linux (none) 4.5.0-2-amd64 #1 SMP Debian 4.5.5-1 (2016-05-29) x86_64 GNU/Linux is ok
Linux (none) 4.8.0-2-amd64 #1 SMP Debian 4.8.15-2 (2017-01-04) x86_64 GNU/Linux is ok
Linux (none) 4.9.0-trunk-rt-amd64 #1 SMP PREEMPT RT Debian 4.9.1-1~exp1 (2017-01-07) x86_64 GNU/Linux is borken
vmlinuz-4.19.0-9-amd64 is borken
--&gt;
then manually bisecting between &lt;code&gt;v4.8&lt;/code&gt; and &lt;code&gt;v4.9&lt;/code&gt; – in a stretch chroot, naturally,
since images built on buster hard-rebooted QEMU in a tight loop just after the decompressor and ELF parsing;
strapping the chroot took two hours of baby-sitting due to the current state of s.d.o, and most revisions only build
&lt;a href=&quot;//lists.ubuntu.com/archives/kernel-team/2016-May/077178.html&quot;&gt;with an ubuntu patch&lt;/a&gt;;
so much for never breaking fucking userspace –
&lt;/p&gt;
&lt;pre class=&quot;continuing inline&quot;&gt;&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=8924feff66f35fe22ce77aafe3f21eb8e5cff881&quot;&gt;commit 8924feff66f35fe22ce77aafe3f21eb8e5cff881 (&quot;splice: lift pipe_lock out of splice_to_pipe()&quot;)&lt;/a&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
is the first bad commit.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
(The smoketest is:
&lt;/p&gt;
&lt;pre class=&quot;continuing inline&quot;&gt;
./v &gt; fifo &amp;
read -r _ &lt; fifo &amp;
echo zupa &gt; fifo
&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
&lt;code&gt;good&lt;/code&gt; is it completes; &lt;code&gt;bad&lt;/code&gt; is it hangs.)
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
This aligns with the origin of the modern &lt;code&gt;pipe_lock()&lt;/code&gt; placement I got by recursive &lt;code&gt;blame&lt;/code&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But
&lt;/p&gt;
&lt;h2 id=&quot;why&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#why&quot;&gt;#&lt;/a&gt; why'&lt;!--'--&gt;d I care?&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
Depends if you'&lt;!--'--&gt;re running, like, nullmailer, in which case
&lt;a href=&quot;//lore.kernel.org/linux-fsdevel/qk6hjuam54khlaikf2ssom6custxf5is2ekkaequf4hvode3ls@zgf7j5j4ubvw/t/#m69ed72a7e0ffa7da3ba9f8800cd85bb63f6da715&quot;&gt;&lt;code&gt;./v &gt; /var/spool/nullmailer/trigger&lt;/code&gt;&lt;/a&gt;
makes it ⇒ any subsequent MUA ⇒ any subsequent sender (if &lt;code&gt;wait()&lt;/code&gt;ing synchronously) enter the signal-impervious mutex-sleeping state,
which can only be recovered from by killing the splicing process.
Good luck finding that, since this affects any ptracing process as well.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Or any other message or log collection system where – especially unprivileged – users write stuff to a pipe,
since they'&lt;!--'--&gt;ve now been granted a total exclusion thereon.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Even in inocuous situations like QEMU with &lt;samp&gt;-chardev pipe,id=pipe,path=$HOME/uwu/q -serial chardev:pipe&lt;/samp&gt;, &lt;code&gt;cat&lt;/code&gt;ting to &lt;code&gt;~/uwu/q.in&lt;/code&gt;
(besides only waking up every second line, which is just business as usual), excludes emulation.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
I'&lt;!--'--&gt;ve always wanted to have a
&lt;/p&gt;
&lt;h2 id=&quot;timeline&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#timeline&quot;&gt;#&lt;/a&gt; timeline&lt;/h2&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
sexion.
&lt;/p&gt;
&lt;dl&gt;
  &lt;div&gt;&lt;dt&gt;2023-06-26T00:17:33&lt;/dt&gt;&lt;dd&gt;I &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/1756793-hm-linux-bug-moment&quot;&gt;confusion-post&lt;/a&gt; that &lt;code&gt;splice()&lt;/code&gt; breaks &lt;code&gt;O_NONBLOCK&lt;/code&gt; (in &lt;code&gt;tail -f&lt;/code&gt;).&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-06-26T03:12:10&lt;/dt&gt;&lt;dd&gt;This is &lt;a href=&quot;//lore.kernel.org/linux-fsdevel/qk6hjuam54khlaikf2ssom6custxf5is2ekkaequf4hvode3ls@zgf7j5j4ubvw/t/#u&quot;&gt;re-posted to &lt;samp&gt;linux-fsdevel@&lt;/samp&gt;&lt;/a&gt; with a &quot;rudimentary analysis&quot;.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-06-26T13:59:09&lt;/dt&gt;&lt;dd&gt;In reply to Christian I discover that this does actually fully exclude &lt;code&gt;read()&lt;/code&gt;s/&lt;code&gt;write()&lt;/code&gt;s/&lt;code&gt;open()&lt;/code&gt;s.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-07-05T23:19:22&lt;/dt&gt;&lt;dd&gt;I mail &lt;samp&gt;security@&lt;/samp&gt; with, effectively, the contents of this post (sans the sendfile tidbit).&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-07-06T19:18:13&lt;/dt&gt;&lt;dd&gt;In reply to Christian I discover the sendfile thing; variously-broken and -untested patches are circulating.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-07-06T23:56:45&lt;/dt&gt;&lt;dd&gt;Linus posts the &quot;slightly tested version&quot;.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-07-08T22:06:56&lt;/dt&gt;&lt;dd&gt;After a few more rounds of patches, Linus &lt;a href=&quot;//lore.kernel.org/linux-fsdevel/qk6hjuam54khlaikf2ssom6custxf5is2ekkaequf4hvode3ls@zgf7j5j4ubvw/t/#me67de5a9ec18886c434113637d7eff6cd7acac4b&quot;&gt;concedes&lt;/a&gt; that potentially &quot;we need to just bite the bullet and say »copy_splice_read() needs to use a non-blocking kiocb for the IO«.&quot;.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-07-09T03:03:22&lt;/dt&gt;&lt;dd&gt;I &lt;a href=&quot;//lore.kernel.org/linux-fsdevel/qk6hjuam54khlaikf2ssom6custxf5is2ekkaequf4hvode3ls@zgf7j5j4ubvw/t/#maf55a5e6d086565e4e2c5014c3fc3914434c9761&quot;&gt;post&lt;/a&gt; a summary diff that does that.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-10-16T22:35:28&lt;/dt&gt;&lt;dd&gt;I &lt;a href=&quot;//lore.kernel.org/lkml/cover.1697486714.git.nabijaczleweli@nabijaczleweli.xyz/t/#u&quot;&gt;post&lt;/a&gt; a re-based and itemised patchset that does the same thing, and also find similar conditions in the pipe → file direxion for sockets.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-12-12T11:12:28&lt;/dt&gt;&lt;dd&gt;I &lt;a href=&quot;//lore.kernel.org/lkml/1cover.1697486714.git.nabijaczleweli@nabijaczleweli.xyz/t/#u&quot;&gt;RESEND&lt;/a&gt;.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-12-14T19:44:42&lt;/dt&gt;&lt;dd&gt;After &lt;a href=&quot;//lore.kernel.org/lkml/20231213162854.4acfbd9f@kernel.org/t/#u&quot;&gt;consternation&lt;/a&gt; w.r.t. &quot;who's gonna take this?&quot; (how would I know) and &quot;I do wish the CC list had been setup a bit more deliberately&quot; (&lt;samp&gt;D&lt;span style=&quot;font-size: 0.7em;&quot;&gt;ocumentation&lt;/span&gt;/p&lt;span style=&quot;font-size: 0.7em;&quot;&gt;rocess&lt;/span&gt;/&lt;span style=&quot;white-space: nowrap;&quot;&gt;submitting-patches.rst&lt;/span&gt;&lt;/samp&gt; says &quot;paste &lt;code&gt;get_maintainer.pl&lt;/code&gt; into Cc:&quot;, in as many words, which is probably better-suited for &quot;here's 5 patches for the memfrob driver&quot; instead of &quot;here's an identical diff against 11 modules&quot;; too bad I keep finding issues that are the latter), I &lt;a href=&quot;//lore.kernel.org/lkml/2cover.1697486714.git.nabijaczleweli@nabijaczleweli.xyz/t/#u&quot;&gt;RERESEND&lt;/a&gt;.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-12-19T23:24:14&lt;/dt&gt;&lt;dd&gt;I &lt;a href=&quot;//lore.kernel.org/lkml/dtexwpw6zcdx7dkx3xj5gyjp5syxmyretdcbcdtvrnukd4vvuh@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;post&lt;/a&gt; an extracted removal of fully-dead-and-no-one-noticed-since-2016 &lt;code&gt;relay_file_splice_read()&lt;/code&gt; (-162!).&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-12-21T04:08:41&lt;/dt&gt;&lt;dd&gt;I &lt;a href=&quot;//lore.kernel.org/lkml/cover.1703126594.git.nabijaczleweli@nabijaczleweli.xyz/t/#u&quot;&gt;post&lt;/a&gt; a fully-tested v2 with reproducers and a fixed (via disabling) teletype handling, new FUSE code, and most importantly a re-imagined framing in terms of a security model derived from only the real root being allowed to mount filesystems and an attack being possible if any other files sleep.&lt;/dd&gt;&lt;/div&gt;
  &lt;div&gt;&lt;dt&gt;2023-12-24T06:01:49&lt;/dt&gt;&lt;dd&gt;I &lt;a href=&quot;//lore.kernel.org/lkml/fvxufyqixohx65lcusrkkfoxs5cnlsuv7kajv6bnngcoewsodx@tarta.nabijaczleweli.xyz/t/#u&quot;&gt;append&lt;/a&gt; a fix for splice(pipe→tty) and splice(pipe→FUSE).&lt;/dd&gt;&lt;/div&gt;
&lt;/dl&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/011-linux-splice-exclusion.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/010-tme-Sun-2-SunOS3-2023.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/010-tme-Sun-2-SunOS3-2023.html" />
    <title> 010. tme booting SunOS 3 on Sun-2 in 2023 — blognꞌt — nabijaczleweli </title>
    <updated>2023-06-21T23:56:00+02:00</updated>
    <published>2023-06-19T23:53:58+02:00</published>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;010. tme booting SunOS 3 on Sun-2 in 2023&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Mon, 19 Jun 2023 23:53:58 +0200&lt;/span&gt;, &lt;a href=&quot;#sun4c&quot;&gt;Solaris on Sun-4c&lt;/a&gt; on &lt;span style=&quot;white-space: nowrap&quot;&gt;Wed, 21 Jun 2023 23:56:00 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#sun4c'&gt;SunOS 4 (Solaris) on Sun-4c &lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
As usual, some program has seen disproportionate development on SunOS.
This was (relatively-)easily-handled for &lt;a href=&quot;//ra.ws.co.ls/~nabijaczleweli/voreutils/blob/man/man1/hostid.1.html&quot;&gt;&lt;code&gt;hostid&lt;/code&gt;&lt;/a&gt;.
Text processing is impossible to guess from foreign-arch binaries, however, especially since all manuals consist primarily of lies;
&lt;code&gt;fmt&lt;/code&gt; being part of the Mail package doesn'&lt;!--'--&gt;t help.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;em&gt;The&lt;/em&gt; Sun-2 emulator is, fittingly, &lt;a href=&quot;//people.csail.mit.edu/fredette/tme/&quot;&gt;&lt;code&gt;tme&lt;/code&gt;&lt;/a&gt;.
This is great, since there'&lt;!--'--&gt;s not a dozen of half-broken emulators.
This is bad, because 0.8 was published in 2010 and targets exclusively NetBSD through 2007-era autohell.
This is good, since it seems to be &lt;em&gt;the&lt;/em&gt; porterbox for NetBSD/sun&lt;var&gt;?&lt;/var&gt;.
This is sub-optimal, because the &lt;em&gt;only&lt;/em&gt; working guest is NetBSD.
&lt;/p&gt;
&lt;pre class=&quot;bigcode continued&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;curl https://people.csail.mit.edu/fredette/tme/tme-0.8.tar.gz | tar -xz&lt;/kbd&gt;
$ &lt;kbd&gt;cd tme-0.8&lt;/kbd&gt;
$ &lt;kbd&gt;./configure&lt;/kbd&gt;
$ &lt;kbd&gt;find -name Makefile -exec sed -i s/-Werror// {} +&lt;/kbd&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;# the author's &quot;reasonably fast machine&quot; is a 500MHz Pentium III
$ &lt;kbd&gt;find -name Makefile -exec sed -i 's/^all-local:/&amp; $(pkglib_LTLIBRARIES)/' {} +&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# unclear if this has ever worked or if the author had simply only ever ran single-job &lt;code&gt;make&lt;/code&gt;s
$ &lt;kbd&gt;make -j25&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
If you have &lt;code&gt;libltdl-dev&lt;/code&gt; installed, you'&lt;!--'--&gt;ll get
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;
&lt;!--&quot;--&gt;module.c:93:3: error: use of undeclared identifier 'lt_preloaded_symbols'&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   93 |   LTDL_SET_PRELOADED_SYMBOLS();&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;      |   ^&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/usr/include/ltdl.h:109:23: note: expanded from macro 'LTDL_SET_PRELOADED_SYMBOLS'&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  109 |         lt_dlpreload_default(lt_preloaded_symbols)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;      |                              ^&lt;!--&quot;--&gt;
&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
because for some reason the system – instead of the embedded – &lt;code&gt;libltdl&lt;/code&gt; is used.
This is remedied by just commenting it out with
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;&lt;samp&gt;$ &lt;kbd&gt;ed libtme/module.c&lt;/kbd&gt;&lt;/samp&gt;&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;&lt;samp&gt;&lt;kbd&gt;93s:^://:&lt;/kbd&gt;&lt;/samp&gt;&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Usually, this ought to be enough; however, in this state it only boots NetBSD; thankfully,
&lt;a href=&quot;//www.giga.nl/walter/computers/sun2-install.html&quot;&gt;other&lt;/a&gt;
&lt;a href=&quot;//www.heeltoe.com/index.php?n=Retro.Sun2&quot;&gt;users&lt;/a&gt;
have come up with patchsets that fix &lt;code&gt;tme&lt;/code&gt; enough to boot SunOS 3.
SunOS 2 doesn'&lt;!--'--&gt;t bootstrap (and even if installed from SunOS 3, it still
&lt;a href=&quot;//nabijaczleweli.xyz/content/assets/blogn_t/010.6-sunos2.png&quot;&gt;just but errors&lt;/a&gt;).
The only SunOS 3 that worked for me was 3.5; earlier installation tapes were broken to varying extents.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Additionally, during SunOS 3 installation,
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0016-cohost-export/https:///nabijaczleweli/post/1709365-real-innovation-has#post-1706872&quot;&gt;the emulator will &lt;code&gt;SIGABRT&lt;/code&gt; in the tape driver&lt;/a&gt;,
since WRITE MARKS is unimplemented.
This is trivially fixed by turning it into a no-op instead.
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuation&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;curl http://www.heeltoe.com/download/sun2/diffs-20111125 | patch -p1&lt;/kbd&gt;
patching file bus/multibus/sun-mie.c
patching file generic/bus.c
patching file generic/bus-el.c
patching file host/posix/posix-memory.c
patching file ic/i825x6.c
patching file ic/m68k/m68010.c
patching file ic/m68k/m68k-execute.c
patching file ic/m68k/m68k-impl.h
patching file ic/m68k/m68k-insns-auto.c
patching file ic/m68k/m68k-misc.c
patching file libtme/module.c
patching file machine/sun/sun-bwtwo.c
patching file machine/sun2/sun2-mainbus.c
patching file machine/sun2/sun2-mmu.c
patching file machine/sun3/sun3-mainbus.c
patching file machine/sun4/sun4-mainbus.c
patching file scsi/emulexmt02.c
patching file tmesh/tmesh.c
patching file tmesh/tmesh-cmds.c
patching file tmesh/tmesh-input.y
$ &lt;kbd&gt;ed scsi/scsi-tape.c&lt;/kbd&gt;
38495
&lt;kbd&gt;585&lt;/kbd&gt;
  abort();
&lt;kbd&gt;s:^://:&lt;/kbd&gt;
&lt;kbd&gt;w&lt;/kbd&gt;
38497
&lt;kbd&gt;q&lt;/kbd&gt;
$ &lt;kbd&gt;make -j25&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continued&quot;&gt;
With this, the &lt;a href=&quot;//people.csail.mit.edu/fredette/tme/sun2-120-nbsd.html&quot;&gt;official Sun-2 instructions&lt;/a&gt; may continue.
Well.
It'&lt;!--'--&gt;s said that when configuring with &lt;samp&gt;--disable-shared&lt;/samp&gt;, plugins will be linked in statically:
this doesn'&lt;!--'--&gt;t hold (and I needed to manually edit the final linker run).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
It'&lt;!--'--&gt;s also said that to run &lt;code&gt;tme&lt;/code&gt; from the build directory, you can just export &lt;code&gt;LTDL_LIBRARY_PATH=$PWD&lt;/code&gt;;
this almost works except it doesn'&lt;!--'--&gt;t (presumably because bookworm libtool lays the output out differently,
and the final binary is still linked to the embedded libltdl(?)).
Thus, on the first run, no system component will be loaded to a choir of ENOENTs.
To save you some round-trips between
&lt;kbd&gt;strace -oss tmesh/tmesh MY-SUN2&lt;/kbd&gt;,
&lt;kbd&gt;grep 'tme_.*so' ss | grep ENOENT&lt;/kbd&gt;, and
&lt;kbd&gt;find $PWD -name whatever.so.0&lt;/kbd&gt;,
I found this sufficient for &lt;samp style=&quot;white-space: nowrap;&quot;&gt;SUN2-MULTIBUS&lt;/samp&gt;:
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;&lt;samp&gt;$ &lt;kbd&gt;ln -s $PWD/bus/multibus/.libs/tme_bus_multibus.so.0 $PWD/generic/.libs/tme_generic.so.0 $PWD/host/gtk/.libs/tme_host_gtk.so.0 $PWD/host/posix/.libs/tme_host_posix.so.0 $PWD/ic/.libs/tme_ic_am9513.so.0 $PWD/ic/.libs/tme_ic_mm58167.so.0 $PWD/ic/.libs/tme_ic_z8530.so.0 $PWD/ic/m68k/.libs/tme_ic_m68k.so.0 $PWD/machine/sun2/.libs/tme_machine_sun2.so.0 $PWD/scsi/.libs/tme_scsi.so.0 $PWD/serial/.libs/tme_serial_kb.so.0 tme&lt;/kbd&gt;&lt;/samp&gt;&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
With this, the &lt;a href=&quot;//people.csail.mit.edu/fredette/tme/sun2-120-nbsd.html&quot;&gt;official Sun-2 instructions&lt;/a&gt; may continue:
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuing&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;curl -O https://people.csail.mit.edu/fredette/tme/sun2-multi-rev-R.bin&lt;/kbd&gt;
$ &lt;kbd&gt;cp $(find -name SUN2-MULTIBUS) MY-SUN2&lt;/kbd&gt;
+ cp ./machine/sun2/SUN2-MULTIBUS MY-SUN2
$ &lt;kbd&gt;perl -w $(find -name tme-sun-idprom) 2/120 8:0:20:0:0:0 &gt; my-sun2-idprom.bin&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# s/0:0:0/&lt;var&gt;whatever&lt;/var&gt;/ if you have other sunmicro hosts
+ perl -w ./machine/sun/tme-sun-idprom 2/120 8:0:20:0:0:0
$ &lt;kbd&gt;find -name sun-keyboards.txt&lt;/kbd&gt;
./machine/sun/sun-keyboards.txt
$ &lt;kbd&gt;cp ./machine/sun/sun-keyboards.txt ./machine/sun/my-sun-macros.txt .&lt;/kbd&gt;
$ &lt;kbd&gt;truncate -s 40G my-sun2-disk.img&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# fun: the emulator &lt;code&gt;SIGBUS&lt;/code&gt;ses if the guest reads past the end here!&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Thankfully, customisation points for SunOS enjoyers and auto-boot are outlined explicitly:
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuing&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;grep -nC3 SunOS MY-SUN2&lt;/kbd&gt;
82-## a SCSI disk:
83-##
84:# if you'&lt;!--'--&gt;re using SunOS, change the disk type from tme-scsi-1 to
85-# acb4000, to get an Adaptec ACB-4000 compatible disk:
86-#
87-sd0 at scsibus0: tme/scsi/disk id 0 type tme-scsi-1
--
90-## a SCSI tape:
91-##
92:# if you'&lt;!--'--&gt;re using SunOS, remove the vendor EMULEX and product &quot;MT-02 QIC&quot;
93-# to get a 100% Emulex MT-02 compatible tape:
94-#
95-st0 at scsibus0: tme/scsi/tape id 4 type emulex-mt02 vendor EMULEX product &quot;MT-02 QIC&quot;
$ &lt;kbd&gt;ed MY-SUN2&lt;/kbd&gt;
3579
&lt;kbd&gt;87s/tme-scsi-1/acb4000/p&lt;/kbd&gt;
sd0 at scsibus0: tme/scsi/disk id 0 type acb4000
&lt;kbd&gt;95s/ ve.*//p&lt;/kbd&gt;
st0 at scsibus0: tme/scsi/tape id 4 type emulex-mt02
&lt;kbd&gt;$s/# //p&lt;/kbd&gt;
command mainbus0 power up
&lt;kbd&gt;w&lt;/kbd&gt;
3540
&lt;kbd&gt;q&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
By default, the emulator boots with the GTK display.
This is fine, it works the most; however, for the purposes of transcribing this tutorialisation I took advantage of the
&lt;a href=&quot;//people.csail.mit.edu/fredette/tme/#system-tty&quot;&gt;serial I/O capability&lt;/a&gt;
— which can be toggled by inverting the comments on both mentions of &quot;GTK&quot; in &lt;code&gt;MY-SUN2&lt;/code&gt; —
to use my preferred xterm, which I can copy from, as the head.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Naturally, it only supports BSD PTYs, which Debian hasn'&lt;!--'--&gt;t configured with on &lt;em&gt;any&lt;/em&gt; arch since &lt;a href=&quot;//bugs.debian.org/338404&quot;&gt;&lt;em&gt;2007&lt;/em&gt;&lt;/a&gt;.
Thankfully, all &lt;samp&gt;/dev/ptmx&lt;/samp&gt; support needs is
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
&quot;--&gt;--- host/posix/posix-serial.c	2007-08-24 02:57:01.000000000 +0200&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+++ host/posix/posix-serial.c	2023-06-19 01:26:46.891606875 +0200&lt;!--&quot;--&gt;
@@ -34,4 +34,5 @@
  */
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;
+#define _GNU_SOURCE
 #include &amp;lt;tme/common.h&gt;
 _TME_RCSID(&quot;$Id: posix-serial.c,v 1.11 2007/08/24 00:57:01 fredette Exp $&quot;);
@@ -43,4 +44,5 @@
 #include &amp;lt;fcntl.h&gt;
 #include &amp;lt;stdio.h&gt;
+#include &amp;lt;signal.h&gt;
 #include &amp;lt;termios.h&gt;
 #include &amp;lt;sys/types.h&gt;
@@ -342,4 +344,6 @@
     if (rc &lt; 0) {
       /* XXX diagnostic */
&lt;!--&quot;--&gt;+      if (errno == EIO)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+        raise(SIGHUP);&lt;!--&quot;--&gt;
       continue;
     }
@@ -842,4 +846,5 @@
   const char *filename_in;
   const char *filename_out;
&lt;!--&quot;--&gt;+  char *vt;&lt;!--&quot;--&gt;
   int fd_in, fd_out;
   int usage;
@@ -943,4 +948,9 @@
       return (errno);
     }
&lt;!--&quot;--&gt;+    if (vt = ptsname(fd_in)) {&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+      printf(&quot;opened %s\n&quot;, vt);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+      grantpt(fd_in);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+      unlockpt(fd_in);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+    }&lt;!--&quot;--&gt;
   }
   if (fd_out &lt; 0) {&lt;!--
--&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
I'&lt;!--'--&gt;ve personally added
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;
      if (!fork())
        _exit(execlp(&quot;st&quot;, &quot;st&quot;, &quot;-l&quot;, vt, (char *)0));
&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
after the &lt;code&gt;unlockpt()&lt;/code&gt;, yielding an upgraded-over-stock UX of an xterm showing up on boot and closing the xterm killing the emulator
(set &lt;var&gt;device&lt;/var&gt; to &lt;code&gt;/dev/ptmx&lt;/code&gt;).
Strictly, this ought to be &lt;code&gt;st -l &lt;var&gt;vt&lt;/var&gt; -- -parenb 9600 clocal&lt;/code&gt; to match the author'&lt;!--'--&gt;s remote(5) line, but none of these do anything on a PTY.
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuation&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;curl https://nabijaczleweli.xyz/content/assets/blogn_t/010.1-tme-0.8-ptmx | patch -p0&lt;/kbd&gt;
$ &lt;kbd&gt;make -j25&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;em&gt;Now&lt;/em&gt;
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuing&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;LTDL_LIBRARY_PATH=$PWD tmesh/tmesh MY-SUN2&lt;/kbd&gt;
[/display0.0]: cannot generate keysym 'Meta_R' directly, or through a macro: No such file or directory
&lt;em&gt;# ...&lt;/em&gt;
[/display0.0]: cannot generate keysym 'R1' directly, or through a macro: No such file or directory
lt-tmesh&gt; &lt;kbd&gt;ls&lt;/kbd&gt;
mainbus0: tme/machine/sun2 multibus my-sun2-idprom.bin
cpu0 at mainbus0: tme/ic/m68010
obio0 at mainbus0 obio: tme/generic/bus size 8MB
obmem0 at mainbus0 obmem: tme/generic/bus size 16MB
ram0 at obmem0 addr 0x0: tme/host/posix/memory ram 4MB
rom0 at obmem0 addr 0xef0000: tme/host/posix/memory rom sun2-multi-rev-R.bin
rom0 at obmem0 addr 0xef8000
clock0 at obio0 addr 0x2800: tme/machine/sun2/clock
tod0 at obio0 addr 0x3800: tme/machine/sun2/tod
zs0 at obio0 addr 0x2000 ipl 6: tme/machine/sun2/zs
mbio0 at mainbus0 mbio: tme/generic/bus size 8MB
mbmem0 addr 0x00000 at mainbus0 mbmem: tme/generic/bus size 8MB
sc0 at mbmem0 addr 0x80000 ipl 2: tme/bus/multibus/sun-sc
scsibus0 at sc0: tme/scsi/bus
bwtwo0 at obmem0 addr 0x700000 ipl 4: tme/machine/sun2/bwtwo type multibus
zs1 at obmem0 addr 0x780000 ipl 6: tme/machine/sun2/zs
kbd0 at zs1 channel A: tme/serial/keyboard type sun-type-2 macros my-sun-macros.txt map sun-keyboards.txt rate 20
ms0 at zs1 channel B: tme/serial/mouse type mousesystems-5
display0 at bwtwo0: tme/host/gtk/display
display0 at kbd0
display0 at ms0
sd0 at scsibus0: tme/scsi/disk id 0 type acb4000
disk0 at sd0: tme/host/posix/disk file my-sun2-disk.img
st0 at scsibus0: tme/scsi/tape id 4 type emulex-mt02
tape0 at st0: tme/host/posix/tape&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
or
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuing&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;LTDL_LIBRARY_PATH=$PWD tmesh/tmesh MY-SUN2&lt;/kbd&gt;
opened /dev/pts/0
lt-tmesh&gt; &lt;kbd&gt;ls&lt;/kbd&gt;
mainbus0: tme/machine/sun2 multibus my-sun2-idprom.bin
cpu0 at mainbus0: tme/ic/m68010
obio0 at mainbus0 obio: tme/generic/bus size 8MB
obmem0 at mainbus0 obmem: tme/generic/bus size 16MB
ram0 at obmem0 addr 0x0: tme/host/posix/memory ram 4MB
rom0 at obmem0 addr 0xef0000: tme/host/posix/memory rom sun2-multi-rev-R.bin
rom0 at obmem0 addr 0xef8000
clock0 at obio0 addr 0x2800: tme/machine/sun2/clock
tod0 at obio0 addr 0x3800: tme/machine/sun2/tod
zs0 at obio0 addr 0x2000 ipl 6: tme/machine/sun2/zs
mbio0 at mainbus0 mbio: tme/generic/bus size 8MB
mbmem0 addr 0x00000 at mainbus0 mbmem: tme/generic/bus size 8MB
sc0 at mbmem0 addr 0x80000 ipl 2: tme/bus/multibus/sun-sc
scsibus0 at sc0: tme/scsi/bus
console0 at zs0 channel A: tme/host/posix/serial device /dev/ptmx break-carats
sd0 at scsibus0: tme/scsi/disk id 0 type acb4000
disk0 at sd0: tme/host/posix/disk file my-sun2-disk.img
st0 at scsibus0: tme/scsi/tape id 4 type emulex-mt02
tape0 at st0: tme/host/posix/tape&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
should hold.
If you get any &lt;code&gt;ENOENT&lt;/code&gt;s that aren't due to keysyms, you're missing some plugins that need to be linked to &lt;code&gt;tme/&lt;/code&gt;.
Since &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; is an exercise in writing programs for your programs in your programs, the &lt;code&gt;tmesh&lt;/code&gt; process is, per nom, a shell;
unlike &lt;span class=&quot;smallcaps&quot;&gt;dec&lt;/span&gt;tapes everyone'&lt;!--'--&gt;s familiar with, tapes here consist of indexed partitions;
thus, running &lt;kbd&gt;command tape0 load part0 part1 …&lt;/kbd&gt; inserts a tape consisting of &lt;var&gt;part&lt;/var&gt;s into &lt;code&gt;st0&lt;/code&gt;,
&lt;kbd&gt;command tape0 unload&lt;/kbd&gt; does the obverse, and &lt;code&gt;load&lt;/code&gt;ing twice in a row yields a sensible error.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Conversely, &lt;kbd&gt;^D&lt;/kbd&gt;ing segfaults the emulator.
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/010.2-plain.png&quot;&gt;&lt;img alt=&quot;&quot; class=&quot;main-screenshot dark-invert&quot; src=&quot;/content/assets/blogn_t/010.2-plain.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The hard(-to-bear) part (other people'&lt;!--'--&gt;s C) is largely over, and can be followed by the hard(-to-bear) part of unpacking &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt;.
Western Electric and UCB licensees may obtain the SunOS 3.5/Sun-2 tape set from &lt;a href=&quot;//winworldpc.com/product/sunos/3x&quot;&gt;WinWorld&lt;/a&gt;,
extract it somewhere, and ease their lives by running &lt;kbd&gt;ln -s &lt;var&gt;$somewhere&lt;/var&gt;/'Sun UNIX 4.2 Release 3.5 (Tape) [Sun-2]'/tape? .&lt;/kbd&gt;.
All SunOS 3 tapes, contrary to their predecessors, have a TOC as the second partition:
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuation&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;cat tape1/02&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# Inter-tape distances enlarged to show texture
TABLE OF CONTENTS
MC68010 tape 1
1 1 tape boot block
1 2 toc
1 3 copyright
1 4 diag
1 5 copy
1 6 mini-root
1 7 root
1 8 pub
1 9 client image
1 10 copyright

2 1 copyright
2 2 toc
2 3 Sys
2 4 Networking tools and programs
2 5 Debugging tools
2 6 usr
2 7 copyright

3 1 copyright
3 2 toc
3 3 SunView User Programs
3 4 SunView Programmers Files
3 5 SunView and Demo Program source
3 6 Text Processing tools
3 7 Setup tools
3 8 Standalone Diagnostics
3 9 Fortran Compiler &amp; Libraries
3 10 User Level Diagnostics
3 11 SunCore &amp; CGI Libraries
3 12 Pascal Interpreter &amp; Compiler
3 13 Profiled Libraries
3 14 uucp programs
3 15 copyright

4 1 copyright
4 2 toc
4 3 System V programs and libraries
4 4 Manual Pages
4 5 Demonstration Programs
4 6 Games
4 7 SunPro
4 8 copyright

5 1 copyright
5 2 toc
5 3 Versatec Printer Software
5 4 copyright
# This is, thus, not relevant, but is nevertheless humourous
$ &lt;kbd&gt;paste &amp;lt;(ls -l tape?/* | cut -c35-) &amp;lt;(file tape?/* | cut -d: -f2-)&lt;/kbd&gt;
&lt;!--&quot;--&gt;  30720 Mar 28  1994 tape1/01	data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;   1024 Mar 28  1994 tape1/02	GTA in-game text (GXT), version 3, used in GTA VC/LS/VCS&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;    512 Mar 28  1994 tape1/03	data&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  98816 Mar 28  1994 tape1/04	a.out SunOS mc68010 executable&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  41472 Mar 28  1994 tape1/05	a.out SunOS mc68010 executable not stripped&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;4718592 Mar 28  1994 tape1/06	Unix Fast File system [v1] (big-endian), last mounted on /mnt, last written at Wed Dec  2 18:02:04 1987, clean flag 0, number of blocks 4608, number of data blocks 4303, number of cylinder groups 3, block size 8192, fragment size 1024, minimum percentage of free blocks 0, rotational delay 4ms, disk rotational speed 60rps, TIME optimization&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1843200 Mar 28  1994 tape1/07	tar archive&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;4198400 Mar 28  1994 tape1/08	tar archive&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;1740800 Mar 28  1994 tape1/09	tar archive&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;    512 Mar 28  1994 tape1/10	data&lt;!--&quot;--&gt;
$ &lt;kbd&gt;echo tape1/*; echo tape2/*; echo tape3/*; echo tape4/*; echo tape5/*&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# and this is useful for later
tape1/01 tape1/02 tape1/03 tape1/04 tape1/05 tape1/06 tape1/07 tape1/08 tape1/09 tape1/10
tape2/01 tape2/02 tape2/03 tape2/04 tape2/05 tape2/06 tape2/07
tape3/01 tape3/02 tape3/03 tape3/04 tape3/05 tape3/06 tape3/07 tape3/08 tape3/09 tape3/10 tape3/11 tape3/12 tape3/13 tape3/14 tape3/15
tape4/01 tape4/02 tape4/03 tape4/04 tape4/05 tape4/06 tape4/07 tape4/08
tape5/01 tape5/02 tape5/03 tape5/04&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Therefore
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuing&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;lt-tmesh&gt; &lt;kbd&gt;command tape0 load tape1/01 tape1/02 tape1/03 tape1/04 tape1/05 tape1/06 tape1/07 tape1/08 tape1/09 tape1/10&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
and on the console:
&lt;/p&gt;
&lt;pre class=&quot;bigcode continuing&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;Self Test completed successfully.

Sun Workstation, Model Sun-2/120 or Sun-2/170, Sun-2 keyboard
ROM Rev R, 4MB memory installed
Serial #83661, Ethernet address 8:0:20:0:0:0

Probing Multibus: sd
Auto-boot in progress...
Boot: sd(0,0,0)vmunix

Exception 2C at 006000
&gt;&lt;kbd&gt;b st()&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# equivalent to st(0,0,0)
Boot: st(0,0,0)
Boot: &lt;kbd&gt;st(0,0,3)&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &quot;1 4 diag&quot;
Size: 58636+33256+29072 bytes

Version 1.3 86/07/25
Disk Initialization and Diagnosis

When asked if you are sure, respond with 'y' or 'Y'

specify controller:
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;0 - Interphase SMD-2180
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;1 - Xylogics 440 (prom set 926)
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;2 - Xylogics 450/451
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;3 - Adaptec ACB 4000 - SCSI/ST506
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;4 - Emulex MD21 - SCSI/ESDI
which one? &lt;kbd&gt;4&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# even though the configuration includes the &lt;code&gt;acb4000&lt;/code&gt;; the &lt;span class=&quot;smallcaps&quot;&gt;emulex&lt;/span&gt; appears to be functionally equivalent but it has bigger disks available
Specify controller address on the mainbus (in hex): &lt;kbd&gt;80000&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &lt;code&gt;disk0 at sd0 at scsibus0 at sc0 at mbmem0 addr 0x80000&lt;/code&gt;
Device address: 80000

Which target? &lt;kbd&gt;0&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# for a second disk, duplicate both lines mentioning &lt;code&gt;sd0&lt;/code&gt;, rename to &lt;code&gt;sd1&lt;/code&gt;, &lt;code&gt;disk1&lt;/code&gt;, &lt;code&gt;id 1&lt;/code&gt; and use &lt;kbd&gt;1&lt;/kbd&gt; here; this ends up being &lt;code&gt;/dev/sd2&lt;/code&gt;

Which unit? &lt;kbd&gt;0&lt;/kbd&gt;

Specify drive:
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;0 - Micropolis 1355
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;1 - Toshiba MK 156F
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;2 - Micropolis 1558
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;3 - Other
which one? &lt;kbd&gt;2&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# this is the largest disk available; the 1355 is the second-largest, and the 1558 is not available on earlier systems

ncyl 1218 acyl 2 nhead 15 nsect 35 interleave 1
reset the SCSI bus...
diag&gt; &lt;kbd&gt;label&lt;/kbd&gt;
label this disk...
OK to use logical partition map 'Micropolis 1558'? &lt;kbd&gt;y&lt;/kbd&gt;
Are you sure you want to write? &lt;kbd&gt;y&lt;/kbd&gt;
verify label
id: &amp;lt;Micropolis 1558 cyl 1218 alt 2 hd 15 sec 35&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;Partition a: starting cyl=0, # blocks=16275
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;Partition b: starting cyl=31, # blocks=32550
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;Partition c: starting cyl=0, # blocks=639450
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;Partition g: starting cyl=93, # blocks=590625
diag&gt; &lt;kbd&gt;q&lt;/kbd&gt;
Boot: &lt;kbd&gt;st(,,4)&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &quot;1 5 copy&quot;
Size: 23088+5248+113452 bytes
Standalone Copy
From: &lt;kbd&gt;st(0,0,5)&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &quot;1 6 mini-root&quot;
To: &lt;kbd&gt;sd(0,0,1)&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# sd0b, conventionally swap
Copy completed - 4720640 bytes
Boot: &lt;kbd&gt;sd(0,0,1)vmunix -as&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# -a to prompt for /; -s for single-user
Size: 481704+76100+64288 bytes
Sun UNIX 4.2 Release 3.5 (GENERIC) #1: Tue Dec 1 16:56:07 PST 1987
Copyright (c) 1986 by Sun Microsystems, Inc.
mem = 4096K (0x400000)
avail mem = 3280896
Ethernet address = 8:0:20:0:0:0
sc0 at mbmem 80000 pri 2
sd0 at sc0 slave 0
sd0:&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&amp;lt;Micropolis 1558 cyl 1218 alt 2 hd 15 sec 35&gt;
sd1 at sc0 slave 1
st0 at sc0 slave 32
sd2 at sc0 slave 8
st1 at sc0 slave 40
zs0 at obio 2000 pri 3
pi0 at obio 1800
tod0 at obio 3800
root device? &lt;kbd&gt;sd0*&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &lt;a href=&quot;/content/assets/blogn_t/010.3-setconf.png&quot;&gt;the &lt;code&gt;*&lt;/code&gt; enables cooperative swap-on-root&lt;/a&gt; (instead of normally dumping to sd0b, which instantly destroys the filesystem there); this doesn'&lt;!--'--&gt;t appear to be documented
using 100 buffers containing 366592 bytes of main memory
WARNING: TOD clock not initialized -- CHECK AND RESET THE DATE!
Singleuser boot -- fsck not done
# &lt;kbd&gt;stty erase \^H&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# (&lt;code&gt;^&lt;/code&gt; is special in the bourne shell) if using the graphical console; the keyboard mapping appears to match &lt;a href=&quot;//github.com/delan/usb3sun/blob/default/src/bindings.h#L132&quot;&gt;actual keyboards&lt;/a&gt; in backspace being ^H; the miniroot has no way of checking whether it'&lt;!--'--&gt;s run on /dev/console and always runs &lt;code&gt;stty dec&lt;/code&gt;; the installed system does, but also still does
# &lt;kbd&gt;cd dev&lt;/kbd&gt;
# &lt;kbd&gt;MAKEDEV st0&lt;/kbd&gt;
# &lt;kbd&gt;newfs /dev/rsd0a&lt;/kbd&gt;
/dev/rsd0a:&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;16274 sectors in 31 cylinders of 15 tracks, 35 sectors
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;8.3Mb in 2 cyl groups (16 c/g, 4.30Mb/g, 1920 i/g)
super-block backups (for fsck -b#) at:
 32, 8480,
# &lt;kbd&gt;newfs /dev/rsd0g&lt;/kbd&gt;
/dev/rsd0g:&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;590624 sectors in 1125 cylinders of 15 tracks, 35 sectors
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;302.4Mb in 71 cyl groups (16 c/g, 4.30Mb/g, 1984 i/g)
super-block backups (for fsck -b#) at:
 32, 8480, 16928, 25376, 33824, 42272, 50720, 59168, 67616, 76064,
 84512, 92960, 101408, 109856, 118304, 126752, 134432, 142880, 151328, 159776,
 168224, 176672, 185120, 193568, 202016, 210464, 218912, 227360, 235808, 244256,
 252704, 261152, 268832, 277280, 285728, 294176, 302624, 311072, 319520, 327968,
 336416, 344864, 353312, 361760, 370208, 378656, 387104, 395552, 403232, 411680,
 420128, 428576, 437024, 445472, 453920, 462368, 470816, 479264, 487712, 496160,
 504608, 513056, 521504, 529952, 537632, 546080, 554528, 562976, 571424, 579872,
 588320,
# &lt;kbd&gt;mount sd0a /a&lt;/kbd&gt;
# &lt;kbd&gt;cd /a&lt;/kbd&gt;
# &lt;kbd&gt;mm() { mt -f /dev/nrst0 $*; }&lt;/kbd&gt;
# &lt;kbd&gt;unp() { mm rew; mm fsf $i; tar xvpf /dev/nrst0; }&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# I'm pretty sure the bourne shell on this system doesn't have scoped variables, because using &lt;code&gt;mm fsf $*&lt;/code&gt; or &lt;code&gt;$1&lt;/code&gt; here always runs &lt;code&gt;mm fsf rew&lt;/code&gt;
# &lt;kbd&gt;set -x&lt;/kbd&gt;
# &lt;kbd&gt;for i in 6 7 8; do unp; done&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &quot;1 7 root&quot;, &quot;1 8 pub&quot;, &quot;1 9 client image&quot;
+ unp
+ mm rew
+ mt -f /dev/nrst0 rew
+ mm fsf 6
+ mt -f /dev/nrst0 fsf 6
+ tar xvpf /dev/nrst0
x ./etc/nd.local, 270 bytes, 1 tape blocks
x ./etc/dkinfo, 24576 bytes, 48 tape blocks
x ./etc/nd, 49152 bytes, 96 tape blocks
&lt;em&gt;# ...&lt;/em&gt;
x ./pub/bin/sh, 65536 bytes, 128 tape blocks
x ./.cshrc, 15 bytes, 1 tape blocks
x ./.login, 84 bytes, 1 tape blocks
x ./.profile, 70 bytes, 1 tape blocks
x ./.rhosts, 0 bytes, 0 tape blocks
x ./boot, 35020 bytes, 69 tape blocks
# &lt;kbd&gt;cd dev&lt;/kbd&gt;
# &lt;kbd&gt;MAKEDEV std ttys pty0 win0 sd0 st0&lt;/kbd&gt;
# &lt;kbd&gt;mount sd0g /a/usr&lt;/kbd&gt;
# &lt;kbd&gt;cd ../etc&lt;/kbd&gt;
# &lt;kbd&gt;cat &gt; fstab&lt;/kbd&gt;
&lt;!--&quot;--&gt;&lt;kbd&gt;/dev/sd0a	/	4.2	rw,noquota	1	1&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;/dev/sd0g	/usr	4.2	rw,noquota	1	2&lt;!--&quot;--&gt;
^D&lt;/kbd&gt;
# &lt;kbd&gt;mv ypbind ypbind_&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# this disables ypbind(8), cf. rc.local
lt-tmesh&gt; &lt;kbd&gt;command tape0 unload&lt;/kbd&gt;
lt-tmesh&gt; &lt;kbd&gt;command tape0 load tape2/01 tape2/02 tape2/03 tape2/04 tape2/05 tape2/06 tape2/07&lt;/kbd&gt;
# &lt;kbd&gt;cd ../usr&lt;/kbd&gt;
# &lt;kbd&gt;for i in 2 3 4 5; do unp; done&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &quot;2 3 Sys&quot;, &quot;2 4 Networking tools and programs&quot;, &quot;2 5 Debugging tools&quot;, &quot;2 6 usr&quot;
+ unp
+ mm rew
+ mt -f /dev/nrst0 rew
+ mm fsf 2
+ mt -f /dev/nrst0 fsf 2
+ tar xvpf /dev/nrst0
x ./sys/OBJ/addupc.o, 354 bytes, 1 tape blocks
x ./sys/OBJ/af.o, 526 bytes, 2 tape blocks
x ./sys/OBJ/ar.h, 14 bytes, 1 tape blocks
&lt;em&gt;# ...&lt;/em&gt;
x ./sccs/helpdir/un, 559 bytes, 2 tape blocks
x ./sccs/helpdir/ut, 2070 bytes, 5 tape blocks
x ./sccs/helpdir/va, 101 bytes, 1 tape blocks
x ./sccs/helpdir/vc, 2417 bytes, 5 tape blocks
lt-tmesh&gt; &lt;kbd&gt;command tape0 unload&lt;/kbd&gt;
lt-tmesh&gt; &lt;kbd&gt;command tape0 load tape3/01 tape3/02 tape3/03 tape3/04 tape3/05 tape3/06 tape3/07 tape3/08 tape3/09 tape3/10 tape3/11 tape3/12 tape3/13 tape3/14 tape3/15&lt;/kbd&gt;
# &lt;kbd&gt;for i in 2 3 4 5 6 7 8 9 10 11 12 13; do unp; done&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &quot;3 3 SunView User Programs&quot;, &quot;3 4 SunView Programmers Files&quot;, &quot;3 5 SunView and Demo Program source&quot;, &quot;3 6 Text Processing tools&quot;, &quot;3 7 Setup tools&quot;, &quot;3 8 Standalone Diagnostics&quot;, &quot;3 9 Fortran Compiler &amp; Libraries&quot;, &quot;3 10 User Level Diagnostics&quot;, &quot;3 11 SunCore &amp; CGI Libraries&quot;, &quot;3 12 Pascal Interpreter &amp; Compiler&quot;, &quot;3 13 Profiled Libraries&quot;, &quot;3 14 uucp programs&quot;
+ unp
+ mm rew
+ mt -f /dev/nrst0 rew
+ mm fsf 2
+ mt -f /dev/nrst0 fsf 2
+ tar xvpf /dev/nrst0
x ./bin/adjacentscreens symbolic link to othertools
x ./bin/align_equals symbolic link to suntools
&lt;em&gt;# ...&lt;/em&gt;
x ./spool/uucp/LOGFILE, 0 bytes, 0 tape blocks
x ./spool/uucp/SYSLOG, 0 bytes, 0 tape blocks
lt-tmesh&gt; &lt;kbd&gt;command tape0 unload&lt;/kbd&gt;
lt-tmesh&gt; &lt;kbd&gt;command tape0 load tape4/01 tape4/02 tape4/03 tape4/04 tape4/05 tape4/06 tape4/07 tape4/08&lt;/kbd&gt;
# &lt;kbd&gt;for i in 2 3 4 5 6; do unp; done&lt;/kbd&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;# &quot;4 3 System V programs and libraries&quot;, &quot;4 4 Manual Pages&quot;, &quot;4 5 Demonstration Programs&quot;, &quot;4 6 Games&quot;, &quot;4 7 SunPro&quot;
&lt;em&gt;# ...&lt;/em&gt;
+ unp
+ mm rew
+ mt -f /dev/nrst0 rew
+ mm fsf 6
+ mt -f /dev/nrst0 fsf 6
+ tar xvpf /dev/nrst0
x ./sunpro/install_sunpro, 472 bytes, 1 tape blocks
x ./sunpro/compile, 73728 bytes, 144 tape blocks
x ./sunpro/cpp, 49152 bytes, 96 tape blocks
x ./sunpro/ld, 57344 bytes, 112 tape blocks
x ./sunpro/m4, 40960 bytes, 80 tape blocks
x ./sunpro/make, 98304 bytes, 192 tape blocks
x ./sunpro/make.1, 39910 bytes, 78 tape blocks
x ./sunpro/default.mk, 3351 bytes, 7 tape blocks
x ./sunpro/filemerge, 638976 bytes, 1248 tape blocks
x ./sunpro/filemerge.1, 7165 bytes, 14 tape blocks
# &lt;kbd&gt;cd /&lt;/kbd&gt;
# &lt;kbd&gt;umount /a/usr&lt;/kbd&gt;
# &lt;kbd&gt;umount /a&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
and kill the emulator: the miniroot doesn'&lt;!--'--&gt;t have &lt;code&gt;halt&lt;/code&gt;, not that it potentially getting corrupted matters.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
At this point we have SunOS, and it Just Boots.
The miniroot environment didn'&lt;!--'--&gt;t have curses programs, but your fully-unpacked 46MiB system (more if you also unpacked the printer drivers) does;
&lt;code&gt;TERM=sun&lt;/code&gt; works for the graphical console; termcap is hell, &lt;code&gt;TERM=ansi&lt;/code&gt;
(&lt;samp&gt;sx|ansi|any ansi terminal with pessimistic assumptions:\&lt;/samp&gt;)
doesn'&lt;!--'--&gt;t work under my preferred xterm, and I have neither the patience or the will to try others.
Unless you're an ed fiend, I'd recommend just using the graphical console.
(If you won't, you'll need to also fight getty to produce a sane login prompt.)
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/010.4-fresh.png&quot;&gt;&lt;img alt=&quot;&quot; class=&quot;main-screenshot dark-invert&quot; src=&quot;/content/assets/blogn_t/010.4-fresh.png&quot; /&gt;&lt;/a&gt;
&lt;pre class=&quot;bigcode continued&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;LTDL_LIBRARY_PATH=$PWD tmesh/tmesh MY-SUN2&lt;/kbd&gt;
Self Test completed successfully.

Sun Workstation, Model Sun-2/120 or Sun-2/170, Sun-2 keyboard
ROM Rev R, 4MB memory installed
Serial #83661, Ethernet address 8:0:20:0:0:0

Probing Multibus: sd
Auto-boot in progress...
Boot: sd(0,0,0)vmunix
Load: sd(0,0,0)boot
Boot: sd(0,0,0)vmunix
Size: 481704+76100+64288 bytes
Sun UNIX 4.2 Release 3.5 (GENERIC) #1: Tue Dec 1 16:56:07 PST 1987
Copyright (c) 1986 by Sun Microsystems, Inc.
mem = 4096K (0x400000)
avail mem = 3280896
Ethernet address = 8:0:20:0:0:0
sc0 at mbmem 80000 pri 2
sd0 at sc0 slave 0
sd0:&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&amp;lt;Micropolis 1558 cyl 1218 alt 2 hd 15 sec 35&gt;
sd1 at sc0 slave 1
st0 at sc0 slave 32
sd2 at sc0 slave 8
st1 at sc0 slave 40
zs0 at obio 2000 pri 3
pi0 at obio 1800
root on sd0
using 100 buffers containing 366592 bytes of main memory
WARNING: no TOD clock -- CHECK AND RESET THE DATE!
/dev/sd0a: 257 files, 5903 used, 1705 free (1 frags, 213 blocks)
/dev/rsd0g: 4749 files, 47151 used, 229399 free (311 frags, 28636 blocks)
Automatic reboot in progress...
Wed Dec&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;2 10:13:37 PST 1987
starting rpc and net services: portmap router biod.
local daemons: sendmail statd lockd.
preserving editor files
clearing /tmp
standard daemons: update cron printer uucp.
starting network: inet.
Wed Dec&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;2 10:13:38 PST 1987
�
 �o���e�lo�i�:��
                �o���e�lo�i�:��
                               �o���e�lo�i�:�
                                             �
                                              �o���e�lo�i�:�t��t�re�et
Password:
Login incorrect
login: &lt;kbd&gt;root&lt;/kbd&gt;
Sun UNIX 4.2 Release 3.5 (GENERIC) #1: Tue Dec 1 16:56:07 PST 1987
noname# &lt;kbd&gt;cat .login&lt;/kbd&gt;
stty dec
set path=($path /etc /usr/etc)
set noglob; eval `tset -Q -s`; unset noglob
noname# &lt;kbd&gt;ed .login&lt;/kbd&gt;
84
&lt;kbd&gt;1a
if (`tty` = /dev/console) stty erase ^H
.
w&lt;/kbd&gt;
126
&lt;kbd&gt;q&lt;/kbd&gt;
noname# &lt;kbd&gt;cd /etc&lt;/kbd&gt;
noname# &lt;kbd&gt;ed rc.boot&lt;/kbd&gt;
1439
&lt;kbd&gt;/host/&lt;/kbd&gt;
hostname=noname
&lt;kbd&gt;s/noname/&lt;var&gt;sunos3&lt;/var&gt;/
w&lt;/kbd&gt;
1439
&lt;kbd&gt;q&lt;/kbd&gt;
noname# &lt;kbd&gt;ed rc.local&lt;/kbd&gt;
3079
&lt;kbd&gt;/nona/&lt;/kbd&gt;
/bin/domainname noname
&lt;kbd&gt;s/noname/&lt;var&gt;nabijaczleweli.xyz&lt;/var&gt;/&lt;/kbd&gt;
&lt;kbd&gt;w&lt;/kbd&gt;
3091
&lt;kbd&gt;q&lt;/kbd&gt;
noname# &lt;kbd&gt;halt&lt;/kbd&gt;
syncing disks... done
Unix Halted

&gt;&lt;kbd&gt;b&lt;/kbd&gt;
Boot: sd(0,0,0)vmunix
Load: sd(0,0,0)boot
Boot: sd(0,0,0)vmunix
Size: 481704+76100+64288 bytes
Sun UNIX 4.2 Release 3.5 (GENERIC) #1: Tue Dec 1 16:56:07 PST 1987
Copyright (c) 1986 by Sun Microsystems, Inc.
mem = 4096K (0x400000)
avail mem = 3280896
Ethernet address = 8:0:20:0:0:0
&lt;em&gt;# ...&lt;/em&gt;
standard daemons: update cron printer uucp.
starting network: inet.
Wed Dec&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;2 10:16:12 PST 1987
�
 ���o�3�lo�i�:��
                ���o�3�lo�i�:��
                               ���o�3�lo�i�:����
Password:
Login incorrect
login: &lt;kbd&gt;root&lt;/kbd&gt;
Last login: Wed Dec&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;2 10:14:09 on console
Sun UNIX 4.2 Release 3.5 (GENERIC) #1: Tue Dec 1 16:56:07 PST 1987
sunos3# &lt;kbd&gt;suntools&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;indented continued&quot;&gt;
starts &lt;del&gt;X&lt;/del&gt; (hover over the text that says &quot;Mouse is off&quot; in the bottom left and press something on the keyboard to capture the mouse):
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/010.5-suntools.png&quot;&gt;&lt;img alt=&quot;Graphical console screenshot, showing the suntools interface with a text editor and an xterm with a process listing&quot; class=&quot;main-screenshot continuation dark-invert&quot; src=&quot;/content/assets/blogn_t/010.5-suntools.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;del&gt;X&lt;/del&gt; (and the console in general) achieve single-digit refresh rates on bookworm;
this is likely related to the emulator being in a tight &lt;code&gt;poll()&lt;/code&gt; loop with a zero &lt;var&gt;timeout&lt;/var&gt;.
I'&lt;!--'--&gt;d attribute this to a GDK incompatibility probably (or the intrusive user-space scheduler), idk what else it could be doing.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The emulator supposedly sleeps when kNetBSD does.
This may be true even for kSunOS, but due to the above it sits at a constant 100% CPU always.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Host networking is only available via the BSD &lt;samp&gt;/dev/bpf&lt;var&gt;*&lt;/var&gt;&lt;/samp&gt; interface.
That said, &lt;samp&gt;host/bsd/bsd-bpf.c&lt;/samp&gt; is just 1200 lines and most of that is likely able to be duplicated directly.
OTOH it'&lt;!--'--&gt;s unclear if the &lt;code&gt;ie&lt;/code&gt; device itself would work under SunOS.
&lt;/p&gt;
&lt;h2 id=&quot;sun4c&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#sun4c&quot;&gt;#&lt;/a&gt; SunOS 4 (Solaris) on Sun-4c&lt;/h2&gt;
&lt;pre class=&quot;bigcode continuing&quot;&gt;&lt;samp&gt;&lt;!--
--&gt;$ &lt;kbd&gt;curl https://nabijaczleweli.xyz/content/assets/blogn_t/010.7-tme-0.8-sun4 | patch -p0&lt;/kbd&gt;
$ &lt;kbd&gt;make -j25&lt;/kbd&gt;
$ &lt;kbd&gt;ln -s $PWD/bus/sbus/.libs/tme_bus_sbus.so.0 $PWD/ic/.libs/tme_ic_am7930.so.0 $PWD/ic/.libs/tme_ic_am7990.so.0 $PWD/ic/.libs/tme_ic_lsi64854.so.0 $PWD/ic/.libs/tme_ic_mk48txx.so.0 $PWD/ic/.libs/tme_ic_ncr53c9x.so.0 $PWD/ic/.libs/tme_ic_nec765.so.0 $PWD/ic/sparc/.libs/tme_ic_sparc.so.0 $PWD/machine/sun4/.libs/tme_machine_sun4.so.0 tme&lt;/kbd&gt;&lt;!--
--&gt;&lt;/samp&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
wherein
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
&quot;--&gt;--- libtme/log-prf.c	2009-08-30 18:56:42.000000000 +0200&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+++ libtme/log-prf.c	2023-06-21 18:23:33.286882822 +0200&lt;!--&quot;--&gt;
@@ -205,7 +205,7 @@
&lt;!--&quot;--&gt;       case 's':&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; 	prf_value_s = va_arg(prf_args, const char *);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; 	PRF_OUT_ARG_CODE(TME_LOG_ARG_CODE_STRING);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;-	PRF_OUT_MEM(prf_value_s, strlen(prf_value_s));&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+	PRF_OUT_MEM(prf_value_s, prf_value_s ? strlen(prf_value_s) : (size_t)0);&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; 	/* enter state zero: */&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt; 	prf_agg = prf_format;&lt;!--&quot;
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuing&quot;&gt;
fixes a &lt;samp&gt;printf(&quot;%s&quot;)&lt;/samp&gt; implementation (why doess &lt;code&gt;tme&lt;/code&gt; ship its own printf body?) to not segfault when passed a null pointer,
and
&lt;/p&gt;
&lt;pre class=&quot;continuing&quot;&gt;&lt;!--
&quot;--&gt;--- libtme/host/x86/misc-x86.c	2009-11-08 18:21:18.000000000 +0100&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;+++ libtme/host/x86/misc-x86.c	2023-06-21 21:39:26.322610998 +0200&lt;!--&quot;--&gt;
@@ -49,10 +49,14 @@
   unsigned long reg_d;
   union tme_value64 value;
&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;
+#if 0
   asm(&quot;	rdtsc	\n&quot;
       : &quot;=a&quot; (reg_a), &quot;=d&quot; (reg_d));
   value.tme_value64_uint32_lo = reg_a;
   value.tme_value64_uint32_hi = reg_d;
+#else
&lt;!--&quot;--&gt;+  value.tme_value64_uint = __builtin_ia32_rdtsc();&lt;!--&quot;--&gt;
+#endif
   return (value);
 }
 #define TME_HAVE_MISC_CYCLES&lt;!--
--&gt;&lt;/pre&gt;
&lt;p class=&quot;continuation&quot;&gt;
fixes the instruction counter being truncated to 32 bits ⇒ no forward progress when measuring ⇒ tickrate estimation estimating zero ticks per second ⇒
faulting &lt;code&gt;cpu0&lt;/code&gt; with an error on creation.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
With this, I could boot a Sun-4c machine as in &lt;a href=&quot;//people.csail.mit.edu/fredette/tme/sun4-75-nbsd.html&quot;&gt;the upstream instruxions&lt;/a&gt;
(the &lt;code&gt;idle-type&lt;/code&gt; bit in the config may be adjusted for SunOS and the emulator does actually sleep;
 the graphical console still updates at the same rate, and the serial variant doesn'&lt;!--'--&gt;t seem to work at all after the initial POST)
with &lt;a href=&quot;//vetusware.com/download/Solaris%201.1.2%201.1.2/?id=8931&quot;&gt;&lt;code&gt;solaris1.1.2.7z&lt;/code&gt;&lt;/a&gt; from my good friend Juliano
and install by following the script (you want &lt;kbd&gt;suninstall&lt;/kbd&gt; after rebooting to the miniroot).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
I got to the &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0016-cohost-export/https:///nabijaczleweli/post/1728522-the-9-genders-briti&quot;&gt;funniest time-zone selection menu in history&lt;/a&gt;:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/010.8-sunos4-timezone.png&quot;&gt;&lt;img alt=&quot;SYSTEM CONFIGURATION EUROPE  GB-Eire  Great Britain and Eire; WET  Western Europe time; Iceland  Iceland; MET  Middle European time also called Central European time; Poland  Poland; EET  Eastern European time; Turkey  Turkey; Israel  Israel; W-SU  Western Soviet Union&quot; class=&quot;main-screenshot continuing dark-invert&quot; src=&quot;/content/assets/blogn_t/010.8-sunos4-timezone.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
in the third-stage setup (and the hardware clock does work! &lt;code&gt;Poland&lt;/code&gt;, at least, appears to be accurate still.
Haven'&lt;!--'--&gt;t checked whether &quot;euro-bit-of-the-СССР&quot; matches any part of the РФ).
The UID entry box is broken, and doesn'&lt;!--'--&gt;t accept the entered line: do not answer yes to making a new user in sys-setup.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
I have found that the system is — regardless of disklabel — very liable to just hang when when quota-checking or fscking on boot,
unpacking a bigger preset,
or simply &lt;kbd&gt;cd /usr/etc/install; ls -l&lt;/kbd&gt;ling to recover from the above.
In many ways I haven'&lt;!--'--&gt;t actually gotten the system to boot cleanly (indeed, at all) after the final post-installation reboot,
so the time-zone selection menu is all you really get.
Or just &lt;kbd&gt;^C&lt;/kbd&gt;ing it and hoping it doesn'&lt;!--'--&gt;t break before you manage to test what you need,
but at that point you might as well just chroot after installing from the miniroot.
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/010-tme-Sun-2-SunOS3-2023.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/009-XEROX-SIGMA-9-balls.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/009-XEROX-SIGMA-9-balls.html" />
    <title> 009. XEROX SIGMA 9 balls — blognꞌt — nabijaczleweli </title>
    <updated>2022-12-01T17:16:50+01:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;009. XEROX SIGMA 9 balls&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Thu, 01 Dec 2022 17:16:50 +0100&lt;/span&gt;; &lt;a href=&quot;//store.nabijaczleweli.xyz/002-XEROX-SIGMA-9-tape-deck.html&quot;&gt;get one&lt;/a&gt; &lt;a href=&quot;//store.nabijaczleweli.xyz/002-XEROX-SIGMA-9-tape-deck.html&quot;&gt;&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p class=&quot;indented&quot;&gt;
I was quite taken by the &lt;span class=&quot;smallcaps&quot;&gt;xerox sigma 9&lt;/span&gt; tape decks, in particular the right one from
&lt;a href=&quot;//www.livingcomputers.org/Computer-Collection/Vintage-Computers/Mainframes/Xerox-Sigma-9.aspx&quot;&gt;&lt;span class=&quot;smallcaps&quot;&gt;lcm+l&lt;/span&gt;'s collection&lt;/a&gt;.  &lt;!--'--&gt;
Naturally, it was gonna be for a different thing, but after spending &gt;10h modeling it in everyone's favourite  &lt;!--'--&gt;
&lt;span style=&quot;white-space: nowrap;&quot;&gt;Computer-Hindered&lt;/span&gt; Modelling suite (Illustrator),
it's no longer fit for purpose therefor.  &lt;!--'--&gt;
&lt;/p&gt;
&lt;center class=&quot;side-by-each&quot;&gt;
   &lt;img src=&quot;/content/assets/blogn_t/009-ref1.png&quot; alt=&quot;LCM+L attachment 1, cropped to just the right tape-deck&quot; /&gt;&lt;!--
--&gt;&lt;div class=&quot;overlay&quot;&gt;
    &lt;img src=&quot;/content/assets/blogn_t/009-ref2a.png&quot; alt=&quot;&quot; /&gt;
    &lt;img src=&quot;/content/assets/blogn_t/009-ref2b.png&quot; class=&quot;overlaid&quot; alt=&quot;LCM+L attachment 3, cropped to just the right tape-deck, construction lines visible&quot; /&gt;
   &lt;/div&gt;
   The references.
&lt;/center&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Some may call this &quot;shit&quot;, and it is, but it's also sufficient, if you dis-count the text, any details below the fold, and perfect dimensional accuracy:  &lt;!--'--&gt;
&lt;/p&gt;
&lt;center class=&quot;continuation&quot;&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/unmarred/sigma balls.svg&quot;&gt;&lt;img src=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/unmarred/sigma balls.svg&quot; alt=&quot;The tape-deck from above, but rendered as an idealised vector rendering&quot; class=&quot;main-screenshot&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The keen-eyed viewer might also notice that the text above the buttons is missing.
I've also just noticed, so call this an erratum.  &lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The only very obvious text is the big &lt;span class=&quot;smallcaps&quot;&gt;xds&lt;/span&gt; branding
(represented by &lt;span class=&quot;topaz&quot;&gt;AMIX topaz&lt;/span&gt;,
previously featured &lt;a href=&quot;008-amix-fonts.html&quot;&gt;on this blog&lt;/a&gt;,
with squished kerning and horizontal scaling),
and the &lt;span class=&quot;smallcaps&quot;&gt;3m&lt;/span&gt; on the removable spool (likewise, but nominal proportions).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The text on the name-plate is, naturally, just rectangles, but both pieces of text on the spool are
(represented by &lt;span class=&quot;sunfont&quot;&gt;AMIX sunfont&lt;/span&gt;,
&lt;a href=&quot;008-amix-fonts.html&quot;&gt;likewise&lt;/a&gt;, nominal proportions.
They are sensibly lorem ipsumed to reproduce the average colour of the original.
I overfit to &quot;&lt;!--&quot;--&gt;&lt;span class=&quot;smallcaps&quot;&gt;tops-10&lt;/span&gt;&lt;!--&quot;--&gt;&quot; for some reason in my late-hour delirium.
Given that this isn'&lt;!--'--&gt;t a &lt;span class=&quot;smallcaps&quot;&gt;dec&lt;/span&gt; system, it definitely isn'&lt;!--'--&gt;t that; but it fits dimensionally, so.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
One bit that may not be obvious (well, I know from looking at it that it isn't, especially in blue winter lighting)  &lt;!--'--&gt;
is that the tape itself has a ferric tint, which doesn't come out all that amazingly when actually printing, and I appear to've been mis-led by the deCMYKer.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Naturally, I hesitate to call Illustrator a CAM program not for no good reason:
the cut-outs on the permanent spool, well,
aren't, because you only get &lt;em&gt;one&lt;/em&gt; level of booleans at any time, so it's actually just the back-drop repeated on top of it.
Like-wise, the tape going from that spool to the vacuum column is two different chunks, because the bottom one is at a layer below the spool,
and the top one is at the front.
Booleaning that correctly turned out to be impossible as well, so the clip mask consists of vertices cut out from the intersection
of the rhombus that limits the circumferences and the double-circle that defines the radial dimension, and pasted together.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Originally, my complaints were limited to &quot;waa why can't I actually spec any dimensions&quot;, but maybe I'&lt;!--'--&gt;m spoiled by actual parametric CAMs,
or &quot;why do I have to bang in the &lt;code&gt;sin&lt;/code&gt;/&lt;code&gt;cos&lt;/code&gt; to get a line with a precise angle or length&quot;,
or &quot;why can't make a line's stroke be on one side&quot;
(you may notice that the tape coming off the removable spool actually leaves it from within the body, rather than tangentially, for this reason),
but this is, frankly, embarrassing; is this really what the monopoly's Best (only?) Vector Lay-out Product is capable of?  &lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This can then be scaled to a height of 85 (derived, naturally, from &quot;what'd fit on my palmtop&quot;), yielding a width of 44.13.
Given the five natural columns and the 5-character length of &lt;span class=&quot;smallcaps&quot;&gt;xerox&lt;/span&gt; and &lt;span class=&quot;smallcaps&quot;&gt;sigma&lt;/span&gt;, the obvious ligma can be added, as well
(&lt;span class=&quot;sunfont&quot;&gt;AMIX sunfont&lt;/span&gt;, even ⅑&lt;sup&gt;th&lt;/sup&gt; font-height, nominal proportions won the popular vote):
&lt;/p&gt;
&lt;center class=&quot;side-by-each continuing&quot;&gt;
   &lt;img src=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/for-print-notext.png&quot; alt=&quot;same as above&quot; /&gt;&lt;!--
--&gt;&lt;img src=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/for-print-yestext.png&quot; alt='likewise, but with &quot;XEROX SIGMA 9 BALLS&quot; in an archaic font across the bottom half' /&gt;
&lt;/center&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Yes, these are PNGs; post-scaling, the &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/for-print-yestext.svg&quot;&gt;SVG export&lt;/a&gt; suffers horrific precision loss,
esp. on the name-plate.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Print-ready CMYK PDFs, raw Illustrator models, &amp;c. can be had &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls&quot;&gt;here&lt;/a&gt;. CC BY 4.0.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
But, if printing, and scaling text that's supposed to be normally-readable on a roll with a, like, 400 physical dimension or whatever,  &lt;!--'--&gt;
just how small is it gonna be?
Thankfully, all is possible through the power of НАТУРАЛИСТ микроскоп детский 60&lt;sup&gt;×&lt;/sup&gt;,
which passed its factory QC in &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0016-cohost-export/https://cohost.org/nabijaczleweli/post/460108-nevermind-im-a-lyin#post-439952&quot;&gt;January 1987&lt;/a&gt;.
&lt;/p&gt;
&lt;center class=&quot;grid-by-each continued&quot; style=&quot;line-height: 0;&quot;&gt;
   &lt;a href=&quot;/content/assets/blogn_t/009-micro-date.png&quot; &gt;&lt;img class=&quot;grid-by-each&quot; src=&quot;/content/assets/blogn_t/009-micro-date.png&quot; alt=&quot;A microscopic section of the printed model, including a sector of the spool with the manufacturer's branding in center frame, incl. 'date' in very blurry single-ink-dot text&quot; /&gt;&lt;/a&gt;&lt;!--
--&gt;&lt;a href=&quot;/content/assets/blogn_t/009-micro-date+dimms.png&quot; &gt;&lt;img class=&quot;grid-by-each&quot; src=&quot;/content/assets/blogn_t/009-micro-date+dimms.png&quot; alt=&quot;Likewise, but dimensions drawn atop – 200μm for 'a', 293μm for 'd', 584μm for the width of the white circle&quot; /&gt;&lt;/a&gt;
&lt;/center&gt;
&lt;center class=&quot;grid-by-each continued&quot; style=&quot;line-height: 0;&quot;&gt;
   &lt;a href=&quot;/content/assets/blogn_t/009-micro-label.png&quot; &gt;&lt;img class=&quot;grid-by-each&quot; src=&quot;/content/assets/blogn_t/009-micro-label.png&quot; alt=&quot;A microscopic section of the printed model, including a vertical slice of a sector of the spool with the user's label; barely anything is visible; the text appears to be an 'i', but it consists of a total of 5+1 lone dark dots in a sea of yellow&quot; /&gt;&lt;/a&gt;&lt;!--
--&gt;&lt;a href=&quot;/content/assets/blogn_t/009-micro-label+dimms.png&quot;&gt;&lt;img class=&quot;grid-by-each&quot; src=&quot;/content/assets/blogn_t/009-micro-label+dimms.png&quot; alt=&quot;Likewise, but a dimension drawn across most of the dots, being the ı part, of 150μm&quot; /&gt;&lt;/a&gt;
&lt;/center&gt;
&lt;center class=&quot;grid-by-each continued&quot;&gt;
   &lt;a href=&quot;/content/assets/blogn_t/009-micro-knob.png&quot; &gt;&lt;img class=&quot;grid-by-each&quot; src=&quot;/content/assets/blogn_t/009-micro-knob.png&quot; alt=&quot;A microscopic section of the printed model, including the top half of the control panel, with most of the knob in frame&quot; /&gt;&lt;/a&gt;&lt;!--
--&gt;&lt;a href=&quot;/content/assets/blogn_t/009-micro-knob+dimms.png&quot; &gt;&lt;img class=&quot;grid-by-each&quot; src=&quot;/content/assets/blogn_t/009-micro-knob+dimms.png&quot; alt=&quot;Likewise, but dimensions drawn atop – 375μm between the top of the control panel and the knob legend, 50μm for the legend, and 369μm for the black bit of the knob, for a total of 794μm&quot; /&gt;&lt;/a&gt;
   Resp. the manufacturer's label on the removable spool (200-micron x-height), the user's label (150-micron x-height), and the knob at the top control panel.
&lt;/center&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The manufacturer's label is just about sharp enough to read it with the naked eye  &lt;!--'--&gt;
(undoubtedly assisted by taking my glasses off, since comparative analysis against mother's fresh surgically-implanted zeroed lenses shows that she can't see shit).
Conversely, the 50-micron drop and black-on-white to beige-grey-on-beige contrast downgrade yields absolutely nothing, it's a wisp, and that's better.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Given this analysis, we can make another observation, namely that the top resolution of this process ends up at appx. 50μm.
The nominal advertised resolution is 300-350DPI, which is 85-72.5μm, for a ⅔&lt;sup&gt;rds'&lt;/sup&gt; bump of black-on-white resolution over advertised; pretty good.  &lt;!--'--&gt;
Additionally, we can observe on &lt;a href=&quot;//www.copyshop.krakow.pl/produkt/kalkulator-naklejek/#tab-technology&quot;&gt;my print shop's process listing&lt;/a&gt;  &lt;!--'--&gt;
that they printed this on a &lt;span class=&quot;smallcaps&quot;&gt;xerox versant 180 press&lt;/span&gt;, which funi.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Anyway, glam shots.
&lt;/p&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/glam/DSC_0803ccc.JPG&quot;&gt;&lt;img class=&quot;continuing main-screenshot&quot; alt=&quot;A small black anodised aluminium laptop on a light wood floor in over-cast winter lighting. The outline of the sticker cuts sharply out of the back-ground, losing a large amount of dynamic range, but the text, which ends up roughly the same size as other stickers &amp;a. on the back of the laptop, is equally as sharp. If you really try you can just about make out the microscopic text on the roll&quot; src=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/glam/DSC_0803ccc.JPG&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/glam/DSC_0792ccc.JPG&quot;&gt;&lt;img class=&quot;continuing main-screenshot&quot; alt=&quot;Same laptop, but the image of the sky washes out the colours, highlighting the very slight ferric tint on the tape itself&quot; src=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/glam/DSC_0792ccc.JPG&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/glam/DSC_0807cc.JPG&quot;&gt;&lt;img class=&quot;continuing main-screenshot&quot; alt=&quot;Likewise, but this time under incandescent lighting on a dark wood surface; it does show a bit more I think&quot; src=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/glam/DSC_0807cc.JPG&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/glam/DSC_0780cc.JPG&quot;&gt;&lt;img class=&quot;continuation main-screenshot&quot; alt='Two SRA4 sheets with the XDS XEROX SIGMA 9 stickers, side-by-each so as to produce a single SRA3 one; the only difference between them is that the left half has &quot;XEROX SIGMA 9 BALLS&quot; written on it' src=&quot;//lfs.nabijaczleweli.xyz/0014-sigma-balls/glam/DSC_0780cc.JPG&quot; /&gt;&lt;/a&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/009-XEROX-SIGMA-9-balls.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/008-amix-fonts.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/008-amix-fonts.html" />
    <title> 008. AMIX fonts — blognꞌt — nabijaczleweli </title>
    <updated>2022-11-17T22:36:33+01:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;008. &lt;span class=&quot;topaz&quot;&gt;AMIX&lt;/span&gt; &lt;span class=&quot;sunfont&quot;&gt;fonts&lt;/span&gt;&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Thu, 17 Nov 2022 22:36:33 +0100&lt;/span&gt;; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/&quot;&gt;go wild&lt;/a&gt; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/&quot;&gt;&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Have been
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1297339377786511360&quot;&gt;featured&lt;/a&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1590177344467390465&quot;&gt;before&lt;/a&gt;,
even
&lt;a href=&quot;006-UNIX-r-ATT.html&quot;&gt;on this blog&lt;/a&gt;,
but never in such style:
&lt;/p&gt;
&lt;center&gt;
&lt;a href=&quot;/content/assets/blogn_t/008.02-sunfont-allchars-freetype.png&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Terminal screenshot with sunfont's all 96 glyphs displayed alongside the Unicode characters they represent in 2 columns&quot; src=&quot;/content/assets/blogn_t/008.02-sunfont-allchars-freetype.png&quot; /&gt;&lt;/a&gt;
&lt;a href=&quot;/content/assets/blogn_t/008.03-topaz-allchars-freetype.png&quot;&gt;&lt;img class=&quot;continuing&quot; alt=&quot;Terminal screenshot with topaz's all 224 glyphs displayed alongside the Unicode characters they represent in 2 columns&quot; src=&quot;/content/assets/blogn_t/008.03-topaz-allchars-freetype.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
As rendered by libfreetype 2.10.4+dfsg-1+deb11u1/libfontconfig 2.13.1-4.2.
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/008.04-winword.png&quot;&gt;&lt;img class=&quot;continued dark-invert&quot; alt=&quot;Microsoft Word screenshot with lowercase vowels and uppercase consonants in both fonts&quot; src=&quot;/content/assets/blogn_t/008.04-winword.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
As rendered by &lt;tt&gt;WINWORD.EXE&lt;/tt&gt; (yes, they're kinda goopy here; needs a skilled operator probably).  &lt;!--'--&gt;
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/008.05-photoshop.png&quot;&gt;&lt;img class=&quot;continued&quot; alt=&quot;Blocks of all characters in topaz and sunfont, surrounded in an ellipse by /* THIS IS UNPUBLISHED PROPRIETARY SOURCE CODE OF */ in topaz /* UNIX System Laboratories, Inc. */ in sunfont&quot; src=&quot;/content/assets/blogn_t/008.05-photoshop.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
As rendered by Photoshop CS6
(AA disabled; the lines/checker-board from SYMBOLS FOR LEGACY COMPUTING got turned into flat squares, presumably because they post-date this product).
&lt;/p&gt;
&lt;p class=&quot;sunfont continued&quot; style=&quot;font-size: 3em; overflow-wrap: anywhere;&quot;&gt;
&amp;nbsp;!&quot;#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?&lt;br /&gt; &lt;!--&quot;--&gt;
@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_&lt;br /&gt;
`abcdefghijklmnopqrstuvwxyz{|}~▁&lt;br /&gt;
&lt;/p&gt;
&lt;p class=&quot;topaz continued&quot; style=&quot;font-size: 1.5em; overflow-wrap: anywhere;&quot;&gt;
&amp;nbsp;!&quot;#$%&amp;'()*+,-./0123456789:;&lt;=&gt;?&lt;br /&gt; &lt;!--&quot;--&gt;
@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_&lt;br /&gt;
`abcdefghijklmnopqrstuvwxyz{|}~🮕&lt;br /&gt;
▯¡¢£¤¥¦§¨©ª«¬―®¯˚±²³´µ¶·¸¹º»¼½¾¿&lt;br /&gt;
ÀÁÂÃÄÅÆÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞß&lt;br /&gt;
àáâãäåæçèéêëìíîïðñòóôõö÷øùúûüýþÿ&lt;br /&gt;
◆■␉␌␍␊°∓␤␋┘┐┌└┼▔🭷🭸🭺▁├┤┴┬│≤≥ ≠₤⋅▒
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
As rendered by your browser, hopefully.
&lt;/p&gt;
&lt;/center&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The procedure can be found &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/amix.fonts&quot;&gt;here&lt;/a&gt;,
and is pretty much the same as I used in &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/amix.x&quot;&gt;2020&lt;/a&gt;,
and generally uninteresting, except that it uses a &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/amix.fonts/tree/trunk/item/02imagise.blk&quot;&gt;novel&lt;/a&gt; (instead of awful) approach to integer-scaling the images, so if you disagree with my design/assignment decisions, you can trivially re-generate them.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Not that I expect those to matter much, given that these fonts suck shit for normal use.
sunfont only covers 7-bit &lt;span class=&quot;smallcaps&quot;&gt;ascii&lt;/span&gt;; topaz mostly covers the Latin-1 Supplement
+ box-drawing and &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/amix.fonts/tree/trunk/item/07strike.map-topaz&quot;&gt;some dupes&lt;/a&gt;,
which sounds great except that means no slavic languages, no greek, no…
It's fun, the ducky &lt;span class=&quot;topaz&quot;&gt;g&lt;/span&gt; is cute, it's an art font, it's unsuitable for general use.  &lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This distribution is made possible by potrace being configurable to not attempt to fix the paths,
and generate 1:1 traces, including hard corners.
It is additionally made easier by the image formats involved being entirely text, which makes hard-integer-scaling them trivial.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The distribution contains:
&lt;/p&gt;
&lt;center&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/sunfont-montage.png&quot;&gt;&lt;img class=&quot;continuing&quot; src=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/sunfont-montage.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
sunfont, a 96-character monospace 25x12px font, with baseline at 20px.
(&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/sunfont-montage.svg&quot;&gt;SVG&lt;/a&gt;)
&lt;/p&gt;
&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/topaz-montage.png&quot;&gt;&lt;img class=&quot;continued&quot; src=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/topaz-montage.png&quot;&gt;&lt;/a&gt;
&lt;p class=&quot;continuation&quot;&gt;
topaz, a 224-character monospace 8x8px font, with baseline at 7px.
(&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/topaz-montage.svg&quot;&gt;SVG&lt;/a&gt;)
&lt;/p&gt;
&lt;/center&gt;
&lt;p class=&quot;continued&quot;&gt;
Both fonts include:
&lt;/p&gt;
&lt;ul class=&quot;continuation&quot;&gt;
&lt;li&gt;Bitmap strikes at integer increments of [1, 16]x their original size, embedded in their respective OTFs.&lt;/li&gt;
&lt;li&gt;BDFs of all of the above are also exported, if of dubious usefulness.&lt;/li&gt;
&lt;li&gt;The original FontForge &lt;tt&gt;.sfd&lt;/tt&gt; files are also included, for export to other formats.&lt;/li&gt;
&lt;li&gt;Images of the bitmap strikes at all sizes (in PBM P1 format, understood globally by all tooling).&lt;/li&gt;
&lt;li&gt;A montage of all the characters in the fonts (from 4x scale), and an SVG tracing thereof.&lt;/li&gt;
&lt;li&gt;FontForge demo PDFs.&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;indented&quot;&gt;
It is worth-while to note that the &lt;a class=&quot;topaz&quot; style=&quot;color: white; background: black; text-decoration: none; padding: 1.5mm;&quot; href=&quot;006-UNIX-r-ATT.html&quot;&gt;¹UNIX® is a registered trademark of AT&amp;T.&lt;/a&gt;
stickers consist of pasted-together PNGs from &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/amix.x&quot;&gt;the first iteration&lt;/a&gt; of this extraction,
and this technique is both sufficient and superiour, if you don't need to drag these along a path in Photoshop.  &lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Go wild: &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/&quot;&gt;https://lfs.nabijaczleweli.xyz/0013-AMIX-fonts/&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
For the purposes of traceability, these were generated with bullseye programs, with the exception of patched FontForge,
see the &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0013-AMIX-fonts/amix.fonts.fulldump/typescript&quot;&gt;generation transcript&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/008-amix-fonts.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/005-low-curse-zfs-on-root.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/005-low-curse-zfs-on-root.html" />
    <title> 005. Low-curse ZFS-on-root for new Debian installations on multi-disk systems — blognꞌt — nabijaczleweli </title>
    <updated>2022-06-11T00:19:37+02:00</updated>
    <published>2020-09-14T00:20:20+02:00</published>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;005. Low-curse ZFS-on-root for new Debian installations on multi-disk systems&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Mon, 14 Sep 2020 00:20:20 +0200&lt;/span&gt;, updated Tue, 15 Sep 2020 20:08:12 +0200, Tue, 29 Sep 2020 23:06:46 +0200, Sat, 12 Dec 2020 01:22:52 +0100, Mon, 15 Mar 2021 23:49:31 +0100, with thanks to &lt;a href=&quot;//github.com/ik5pvx&quot;&gt;Pierfrancesco&lt;/a&gt; for many pre-bullseye bugs! and Sat, 11 Jun 2022 00:19:37 +0200&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#toc'&gt;Contents&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#setup'&gt;Set-up&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#installation'&gt;Installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#bootloader'&gt;Bootloader&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#zfs'&gt;The ZFS bit&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#layout'&gt;Layout&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
In a brief departure from microcomputing saprophagia, imagine you'&lt;!--'--&gt;re &lt;a href=&quot;//github.com/griwes&quot;&gt;an american&lt;/a&gt; and acquiring a ThinkPad P15,
sporting two two-terabyte drives and, naturally, you'&lt;!--'--&gt;d like to have a single continuous volume spanning both of them to do whatever your heart desires.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
After the shock at willingly staying in the American empire and paying it for the privilege wears off, two approaches reveal themselves:
&lt;/p&gt;
&lt;ol class=&quot;continuing&quot;&gt;
 &lt;li&gt;LVM, with its native &lt;samp&gt;debian-installer&lt;/samp&gt; support, and&lt;/li&gt;
 &lt;li&gt;ZFS, without it,
    but with the ability to do &lt;samp&gt;&lt;a href=&quot;//manpages.debian.org/bullseye/zfsutils-linux/zfs.8.en.html&quot;&gt;zfs(8)&lt;/a&gt;-send&lt;/samp&gt; backups,
    live-mirroring to an external enclosure with a &lt;samp&gt;[mirror[internal, external], mirror[internal, external]]&lt;/samp&gt; topology, and
     me egging you on to do it.&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;continuing&quot;&gt;
Now, I also wanted to do a ZFS-on-root for my own nefarious uses, and so it was decided:
&lt;/p&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;
 &lt;!-- https://discord.com/channels/145079846832308224/150317232239542272/752226540808437770 --&gt;
 Good, do it before I buy the p15 and report back &lt;a href=&quot;//wiki.jvflux.fr/Noel&quot;&gt;&lt;img src=&quot;/content/assets/noel.gif&quot; alt=&quot;:noel:&quot; title=&quot;:noel:&quot; style=&quot;margin-bottom: -5px;&quot; /&gt;&lt;/a&gt;
&lt;/blockquote&gt;
&lt;!--
&lt;h2 id=&quot;toc&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#toc&quot;&gt;#&lt;/a&gt; Contents&lt;/h2&gt;
&lt;ol class=&quot;continuation&quot;&gt;
 &lt;li&gt;&lt;a href=&quot;#setup&quot; &gt;Set-up&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;#installation&quot;&gt;Installation&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;#bootloader&quot; &gt;Bootloader&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;#zfs&quot; &gt;The ZFS bit&lt;/a&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;#layout&quot; &gt;Layout&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt; --&gt;
&lt;h2 id=&quot;setup&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#setup&quot;&gt;#&lt;/a&gt; Set-up&lt;/h2&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
To minimise how cursed this is, the following restrixions are in place:
&lt;/p&gt;
&lt;ul class=&quot;continuing&quot;&gt;
 &lt;li&gt;EFI booting, because GRUB'&lt;!--'--&gt;s ZFS detexion and handling blows ass, and&lt;/li&gt;
 &lt;li&gt;a normal &lt;samp&gt;d-i&lt;/samp&gt; installation and no external computer &lt;em&gt;nor&lt;/em&gt; drives required,
     since doing &lt;samp&gt;d-i&lt;/samp&gt;'s job by hand was covered previously in &lt;a href=&quot;001-x32-in-2020.html&quot;&gt;Installing Debian's x32 port in 2020&lt;/a&gt;,
     and it'&lt;!--'--&gt;s a similarly good experience (plus building the modules in a chroot is a good time at any rate).&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;continuing&quot;&gt;
This means that all you need is an EFI-compatible multi-disk platform and some way to EFI boot it into &lt;samp&gt;d-i&lt;/samp&gt; —
the bootloader will be fixed, ZFS installed normally, and the rootfs &lt;samp&gt;dump&lt;/samp&gt;ed/&lt;samp&gt;restore&lt;/samp&gt;d thereonto after normally booting into the target system.
&lt;/p&gt;
&lt;!-- For reference:
 qemu-system-x86_64 -enable-kvm -bios /usr/share/qemu/OVMF.fd -smp 6 -m 4g -drive file=vda,format=raw,id=vda,if=none -drive file=vdb,format=raw,id=vdb,if=none -drive file=vdc,format=raw,id=vdc,if=none -device virtio-blk-pci,drive=vda -device virtio-blk-pci,drive=vdb -device virtio-blk-pci,drive=vdc
 qemu-system-x86_64 -enable-kvm -bios /usr/share/qemu/OVMF.fd -smp 6 -m 4g -drive file=vda,format=raw -drive file=vdb,format=raw -net user,hostfwd=tcp::10023-:22 -net nic,model=virtio-net-pci --&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The test setup is QEMU &lt;code&gt;-bios OVMF.fd&lt;/code&gt; and two 8G drives, one of which is designated as primary.
Filesystem tuning is not covered, encryption is supported, SecureBoot is not covered because I haven'&lt;!--'--&gt;t figured it out yet,
most-all gotchas are hopefully explained,
there'&lt;!--'--&gt;s a &lt;a href=&quot;//openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Buster%20Root%20on%20ZFS.html&quot;&gt;prior art&lt;/a&gt; that was of little help, and
&lt;code&gt;zfs-{initramfs,dracut}&lt;/code&gt; are full of &lt;a href=&quot;//github.com/openzfs/zfs/issues/10908&quot;&gt;problems&lt;/a&gt; that I try to work around here:
&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1303858705788801024&quot;&gt;
 &lt;img class=&quot;main-screenshot continuation&quot; alt=&quot;Excerpt from zfs-initramfs, function load_module_initrd that starts with 'if [ $variable &gt; 0 ]'&quot;
      src=&quot;/content/assets/blogn_t/005.01-zfs-initramfs-gt-0.png&quot; style=&quot;min-width: 75%;&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;h2 id=&quot;installation&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installation&quot;&gt;#&lt;/a&gt; Installation&lt;/h2&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The restrixions to the original installation are all during the partitioning phase and as follows:
&lt;/p&gt;
&lt;ol class=&quot;continuing&quot;&gt;
 &lt;li&gt;Stick to just the primary drive,&lt;/li&gt;
 &lt;li&gt;pick an EFI partition large enough for a few kernels and initrds, and&lt;/li&gt;
 &lt;li&gt;stuff everything onto the rootfs:&lt;/li&gt;
&lt;/ol&gt;
&lt;center&gt;&lt;a href=&quot;/content/assets/blogn_t/005.02-i-t-partitioning.png&quot;&gt;
 &lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;initramfs-tools partitioning screen showing one of two disks used with a 250MB EFI System Partiition marked 'zoot-EFI' and rest for the root FS, marked 'zoot-root'&quot;
      src=&quot;/content/assets/blogn_t/005.02-i-t-partitioning.png&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;indented&quot;&gt;
Either installing sid or enabling backports for buster is required,
since &lt;a href=&quot;//manpages.debian.org/bullseye/zfsutils-linux/zfs-mount-generator.8.en.html&quot;&gt;&lt;code&gt;zfs-mount-generator(8)&lt;/code&gt;&lt;/a&gt; appeared in 0.8.0;
if you don't install GRUB you'll have to boot
&lt;a href=&quot;//git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/plain/Documentation/admin-guide/efi-stub.rst?h=v5.8&quot;&gt;manually&lt;/a&gt;
from the EFI shell after copying the kernel and initrd from &lt;code&gt;target/boot/&lt;/code&gt; to &lt;code&gt;target/boot/efi/&lt;/code&gt;.
&lt;/p&gt;
&lt;h2 id=&quot;bootloader&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#bootloader&quot;&gt;#&lt;/a&gt; Bootloader&lt;/h2&gt;
&lt;p class=&quot;continuing indented&quot;&gt;
Using GRUB and a unified boot-on-root is, for better or for worse, not possible;
GRUB &lt;a href=&quot;//git.savannah.gnu.org/cgit/grub.git/tree/grub-core/fs/zfs/zfs.c?id=3f05d693d1274965ffbe4ba99080dc2c570944c6#n280&quot;&gt;supports&lt;/a&gt; these
non-R/O zpool features:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-c&quot;&gt;&lt;code class=&quot;language-c&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;/*
 * List of pool features that the grub implementation of ZFS supports for
 * read. Note that features that are only required for write do not need
 * to be listed here since grub opens pools in read-only mode.
 */&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;MAX_SUPPORTED_FEATURE_STRLEN&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;spa_feature_names&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.illumos:lz4_compress&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token string&quot;&gt;&quot;com.delphix:hole_birth&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token string&quot;&gt;&quot;com.delphix:embedded_data&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token string&quot;&gt;&quot;com.delphix:extensible_dataset&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org.open-zfs:large_blocks&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token constant&quot;&gt;NULL&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
Which means that these, as of OpenZFS 0.8.4, are the ones that it doesn'&lt;!--'--&gt;t support:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@tarta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;man&lt;/span&gt; zpool-features &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; READ-ONLY.*no &lt;span class=&quot;token parameter variable&quot;&gt;-B4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sed&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;s/GUID//'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;
&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;awk&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;!/^$/ &amp;amp;&amp;amp; !/COMPATIBLE/ &amp;amp;&amp;amp; !/--/ \
&lt;!--&quot;--&gt;                             &lt;!--&quot;--&gt;{if(last == &quot;&quot;) last = $1; else {print last &quot;\t&quot; $1; last = &quot;&quot;}}'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;grep -v '&lt;!--'--&gt;lz4_compress|hole_birth|embedded_data|extensible_dataset|large_blocks'&lt;!--'--&gt; | column -t
bookmark_v2&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;com.datto:bookmark_v2
device_removal&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;com.delphix:device_removal
edonr&lt;!--&quot;--&gt;                  &lt;!--&quot;--&gt;org.illumos:edonr
encryption&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;com.datto:encryption
large_dnode&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;org.zfsonlinux:large_dnode
multi_vdev_crash_dump&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;com.joyent:multi_vdev_crash_dump
sha512&lt;!--&quot;--&gt;                 &lt;!--&quot;--&gt;org.illumos:sha512
skein&lt;!--&quot;--&gt;                  &lt;!--&quot;--&gt;org.illumos:skein
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
Confer &lt;a href=&quot;//manpages.debian.org/buster-backports/zfsutils-linux/zpool-features.5.en.html&quot;&gt;&lt;samp&gt;zpool-features(5)&lt;/samp&gt;&lt;/a&gt;
for details so as to why this is not acceptable
(remember: you couldn't any of these even by accident on your root pool, and most of them can't ever be turned off).
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Using a separate &lt;code&gt;/boot&lt;/code&gt; on ZFS required a lot of dicking around with the options for GRUB to recognise the filesystem at all
(confer &lt;a href=&quot;//openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Buster%20Root%20on%20ZFS.html#step-2-disk-formatting&quot;&gt;prior art&lt;/a&gt;,
 Step 2: Disk Formatting, 4. Create the boot pool, with its 12 lines of options for pool features alone)
&lt;!-- In case that goes away:
zpool create -o ashift=12 -d -o feature@async_destroy=enabled -o feature@bookmarks=enabled -o feature@embedded_data=enabled -o feature@empty_bpobj=enabled -o feature@enabled_txg=enabled -o feature@extensible_dataset=enabled -o feature@filesystem_limits=enabled -o feature@hole_birth=enabled -o feature@large_blocks=enabled -o feature@lz4_compress=enabled -o feature@spacemap_histogram=enabled -o feature@zpool_checkpoint=enabled -O acltype=posixacl -O canmount=off -O compression=lz4 -O devices=off -O normalization=formD -O relatime=on -O xattr=sa -O mountpoint=/boot -R /mnt bpool ${DISK}-part3
--&gt;
and GRUB has &lt;a href=&quot;https://bugs.debian.org/848945#30&quot;&gt;difficulties&lt;/a&gt; generating the right &lt;code&gt;root=&lt;/code&gt; cmdline options for a normal pool anyway
(but it does work if you convince it hard enough and have no other options, like on EFI-less systems).
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Using a separate &lt;code&gt;/boot&lt;/code&gt; on ext*/FAT didn'&lt;!--'--&gt;t make much sense for booting on EFI, either,
so cutting GRUB out was a simple way to berid of a lot of bollocks.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Boot into your freshly installed system, become root, and:
&lt;/p&gt;
&lt;table class=&quot;bigtable&quot;&gt;
 &lt;tr&gt;&lt;td&gt;Get rid of GRUB, optionally keeping EFI tools.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;apt-mark manual efibootmgr mokutil&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
          &lt;samp&gt;efibootmgr, mokutil set to manually installed.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;apt autopurge grub*&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;The following packages will be REMOVED:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  grub-common* grub-efi-amd64* grub-efi-amd64-bin* grub-efi-amd64-signed*&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  grub2-common* os-prober* shim-signed* gettext-base* libbrotli1* libfreetype6*&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  libfuse2* libpng16-16* shim-helpers-amd64-signed* shim-signed-common* shim-unsigned*&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;0 upgraded, 0 newly installed, 15 to remove and 0 not upgraded.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;After this operation, 44.9 MB disk space will be freed.&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Verify that you only have GRUB here before cleaning it out!&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;tree /boot/efi/&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;/boot/efi/&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;├── EFI&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   └── debian&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       ├── BOOTX64.CSV&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       ├── fbx64.efi&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       ├── grub.cfg&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       ├── grubx64.efi&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       ├── mmx64.efi&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       └── shimx64.efi&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;└── NvVars&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;rm -rf /boot/efi/EFI/&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Depending on the firmware state there may be a lot of boot entries, but the GRUB one is very likely the &lt;samp&gt;BootCurrent&lt;/samp&gt; and called &quot;debian&quot;.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;efibootmgr -v&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;BootCurrent: 0001&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;BootOrder: 0001,0000,0002,…&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;Boot0000*: UiApp FvVol(GUID)/FvFile(GUID)&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;Boot0001*: debian        HD(1,GPT,GUID)/File(\EFI\debian\shimx64.efi)&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;Boot0002*: UEFI QEMU DVD-ROM QM00003     PciRoot(0x0)/…&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;efibootmgr -Bb 1&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;BootCurrent: 0001&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Boot0000*: UiApp FvVol(GUID)/FvFile(GUID)&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Boot0002*: UEFI QEMU DVD-ROM QM00003&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Install &lt;samp&gt;systemd-boot&lt;/samp&gt; and enable a timeout.&lt;br /&gt;
         This &lt;em&gt;might&lt;/em&gt; not be required on platforms that support the systemd &lt;a href=&quot;//systemd.io/BOOT_LOADER_SPECIFICATION/&quot;&gt;Boot Loader Specification&lt;/a&gt;
         (are there any?).&lt;br /&gt;
         Since systemd 251.2-3 (Wed, 08 Jun 2022 23:56:04 +0100), &lt;samp&gt;systemd-boot&lt;/samp&gt; resides in its own homonymous package.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;apt install systemd-boot&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;The following NEW packages will be installed:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  systemd-boot systemd-boot-efi&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
          &lt;samp&gt;0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.&lt;/samp&gt;&lt;br /&gt;
          &lt;samp&gt;After this operation, 739 kB of additional disk space will be used.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;bootctl install&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Created &quot;/boot/efi/EFI&quot;, other directories.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Copied &quot;/usr/lib/systemd/boot/efi/systemd-bootx64.efi&quot; to &quot;/boot/efi/EFI/{systemd/systemd-bootx64.efi,BOOT/BOOTX64.EFI}&quot;.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Random seed file /boot/efi/loader/random-seed successfully written (512 bytes).&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Created EFI boot entry &quot;Linux Boot Manager&quot;.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;sed -i 's/#timeout/timeout/' /boot/efi/loader/loader.conf&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;del&gt;Add kernel version to loader entry.&lt;/del&gt;
        This is &lt;a href=&quot;https://github.com/systemd/systemd/pull/17072&quot;&gt;not required&lt;/a&gt; for a normal installation,
        since sd-boot will disambugate entries by version as needed, but may be useful to distinguish monokernel VM installs or something.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;cp /{usr/lib,etc}/kernel/install.d/90-loaderentry.install&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;diff -U2 /{usr/lib,etc}/kernel/install.d/90-loaderentry.install&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;--- /usr/lib/kernel/install.d/90-loaderentry.install    2020-09-02 11:49:08.000000000 +0200&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;+++ /etc/kernel/install.d/90-loaderentry.install        2020-09-13 05:06:49.541120128 +0200&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;@@ -44,4 +44,6 @@&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt; if ! [[ $PRETTY_NAME ]]; then&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;     PRETTY_NAME=&quot;Linux $KERNEL_VERSION&quot;&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;+else&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;+    PRETTY_NAME+=&quot; with Linux $KERNEL_VERSION&quot;&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt; fi&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;del&gt;Disable a
         &lt;a href=&quot;https://salsa.debian.org/systemd-team/systemd/-/blob/3e2db72b37d72527eca2474a4e08f44fa3f342e8/debian/extra/kernel-install.d/85-initrd.install&quot;&gt;Debian&lt;/a&gt;
         &lt;code&gt;.install&lt;/code&gt; hook, which copies the initrd into &lt;code&gt;\MID\VER\initrd&lt;/code&gt;
         despite that being handled by &lt;code&gt;90-loaderentry.install&lt;/code&gt;, which copies it into &lt;code&gt;\MID\VER\BASENAME&lt;/code&gt;,
         thereby duplicating it. This will &lt;a href=&quot;//bugs.debian.org/970213&quot;&gt;not be required&lt;/a&gt; in the future.&lt;/del&gt;&lt;br /&gt;
         This hook was &lt;a href=&quot;//bugs.debian.org/970213#27&quot;&gt;fixed&lt;/a&gt; in 247.1-4 (Fri, 11 Dec 2020 20:48:44 +0000);
         this step is detrimental to modern systems.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;ln -s /dev/null /etc/kernel/install.d/85-initrd.install&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;
 &lt;tr&gt;&lt;td&gt;&lt;del&gt;Add sd-boot hooks, for integration with the normal kernel installation/removal flow.&lt;br /&gt;
         GRUB installs these as &lt;code&gt;zz-update-grub&lt;/code&gt;, but &lt;code&gt;kernel-install&lt;/code&gt; sorts later than any other thing I saw there myself.
         I hope to integrate this and make it not required in the future.&lt;/del&gt;&lt;br /&gt;
         &lt;a href=&quot;//bugs.debian.org/826045&quot;&gt;Integrated&lt;/a&gt; into base and &lt;a href=&quot;//bugs.debian.org/1020396#25&quot;&gt;fixed&lt;/a&gt; in 251.5-1 (Sun, 02 Oct 2022 21:23:49 +0200).&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;cat &gt; /etc/kernel/postinst.d/kernel-install&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;#!/bin/sh&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;bootctl is-installed &gt; /dev/null || exit 0&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;exec kernel-install add &quot;$1&quot; &quot;/boot/vmlinuz-$1&quot; &quot;/boot/initrd.img-$1&quot;&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;^D&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;cat &gt; /etc/kernel/postrm.d/kernel-install&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;#!/bin/sh&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;bootctl is-installed &gt; /dev/null || exit 0&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;exec kernel-install remove &quot;$1&quot;&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;^D&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;chmod +x /etc/kernel/post{inst,rm}.d/kernel-install&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Install the kernel.&lt;br /&gt;
         The initial run takes a long time, hence the &lt;code&gt;-v&lt;/code&gt;; &lt;code&gt;62dd03a4928c412180b3024ac6c03a90&lt;/code&gt; is this machine'&lt;!--'--&gt;s ID.&lt;br /&gt;
         sd-boot wouldn'&lt;!--'--&gt;t make &lt;samp&gt;\&amp;lt;MID&amp;gt;&lt;/samp&gt; for
           &lt;a href=&quot;https://github.com/systemd/systemd/commit/31e57550b552e113bd3d44355b237c41e42beb58&quot;&gt;some&lt;/a&gt;
           &lt;a href=&quot;https://github.com/systemd/systemd/pull/19006&quot;&gt;time&lt;/a&gt; –
           if you don'&lt;!--'--&gt;t get the &quot;Installing&quot; and &quot;Creating&quot; lines on a systemd pre-&lt;a href=&quot;https://github.com/systemd/systemd/commit/641e2124de6047e6010cd2925ea22fba29b25309#diff-b225531058df363300d2d0d824bbbe7d16397269d9d225a9e7d6d2dfd548706bR95&quot;&gt;v250&lt;/a&gt; system,
           you'&lt;!--'--&gt;ll need to &lt;samp style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;mkdir /boot/efi/Default&lt;/kbd&gt;&lt;/samp&gt;
           (or &lt;samp style=&quot;white-space: nowrap;&quot;&gt;&lt;kbd&gt;&quot;/boot/efi/$(&lt; /etc/machine-id)&quot;&lt;/kbd&gt;&lt;/samp&gt;) manually
           and &lt;samp&gt;&lt;kbd&gt;kernel-install&lt;/kbd&gt;&lt;/samp&gt; again.&lt;br /&gt;
         The current cmdline will be used for the boot entry, overridable with &lt;code&gt;/etc/kernel/cmdline&lt;/code&gt;.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;kernel-install -v add $(uname -r) /boot/vml&amp;lt;TAB&amp;gt; /boot/ini&amp;lt;TAB&amp;gt;&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Running depmod -a 5.8.0-1-amd64&lt;/samp&gt;&lt;br /&gt;
         &lt;samp style=&quot;word-break: break-all;&quot;&gt;Installing /boot/efi/62dd03a4928c412180b3024ac6c03a90/5.8.0-1-amd64/vmlinuz-5.8.0-1-amd64&lt;/samp&gt;&lt;br /&gt;
         &lt;samp style=&quot;word-break: break-all;&quot;&gt;Creating /boot/efi/loader/entries/62dd03a4928c412180b3024ac6c03a90-5.8.0-1-amd64.conf&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;tree /boot/efi/&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;/boot/efi/&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;├── 62dd03a4928c412180b3024ac6c03a90&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   └── 5.8.0-1-amd64&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       ├── initrd-5.8.0-1-amd64&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       └── linux&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;├── EFI&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   ├── BOOT&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   │   └── BOOTX64.EFI&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   ├── Linux&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   └── systemd&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│       └── systemd-bootx64.efi&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;├── loader&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   ├── entries&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp style=&quot;word-break: break-all;&quot;&gt;&lt;!--&quot;--&gt;│   │   └── 62dd03a4928c412180b3024ac6c03a90-5.8.0-1-amd64.conf&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   ├── loader.conf&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;│   └── random-seed&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;└── NvVars&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;8 directories, 9 files&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;indented continued&quot;&gt;
I'&lt;!--'--&gt;d recommend rebooting now to verify that this works, which should look like this:
&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;/content/assets/blogn_t/005.03-sd-boot.png&quot;&gt;
 &lt;img class=&quot;main-screenshot continuation&quot; alt=&quot;text-mode QEMU window with two centered lines, the first one, selected, saying 'Debian GNU/Linux bullseye/sid with Linux 5.8.0-1-amd64', the second saying 'Reboot Into Firmware Interface'&quot;
      src=&quot;/content/assets/blogn_t/005.03-sd-boot.png&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
If not, and &lt;code&gt;sd-boot&lt;/code&gt; shows errors or doesn'&lt;!--'--&gt;t start at all; boot into the EFI shell,
&lt;kbd&gt;fs0:&lt;/kbd&gt;, and &lt;kbd&gt;\&amp;lt;MID&amp;gt;\&amp;lt;VER&amp;gt;\linux initrd=\&amp;lt;MID&amp;gt;\&amp;lt;VER&amp;gt;\initrd.img-&amp;lt;VER&amp;gt; root=/dev/sda2&lt;/kbd&gt;
(the shell should support tab-completion, you might need to add a space before completing the initrd)
(the &lt;code&gt;root=&lt;/code&gt; option assumes you installed to the second partition of the first SCSI drive, as I did; adjust to taste),
then write me an &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz&quot;&gt;e-mail&lt;/a&gt; or a &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;DM&lt;/a&gt;
or whatever else is listed &lt;a href=&quot;/&quot;&gt;here&lt;/a&gt; so I can issue a correxion; thanks in advance, &amp;c.:
&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;/content/assets/blogn_t/005.04-EFI-shell.png&quot;&gt;
 &lt;img class=&quot;main-screenshot continuation&quot; alt=&quot;EFI shell, demonstrating the above command&quot;
      src=&quot;/content/assets/blogn_t/005.04-EFI-shell.png&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Now we can boot without dealing with GRUB. On to the ZFS bit:
&lt;/p&gt;
&lt;h2 id=&quot;zfs&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#zfs&quot;&gt;#&lt;/a&gt; The ZFS bit&lt;/h2&gt;
&lt;table class=&quot;bigtable&quot;&gt;
 &lt;tr&gt;&lt;td&gt;Install the prerequisites, remember to match the headers to your kernel!&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;apt install --no-install-recommends linux-headers-amd64 build-essential&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;The following NEW packages will be installed:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  binutils binutils-common binutils-x86-64-linux-gnu build-essential dpkg-dev&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  g++ g++-10 gcc gcc-10 libasan6 libatomic1 libbinutils libc-dev-bin libc6-dev&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  libcc1-0 libcrypt-dev libctf-nobfd0 libctf0 libdpkg-perl libgcc-10-dev&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  libgdbm-compat4 libgdbm6 libgomp1 libitm1 liblsan0 libperl5.30 libquadmath0&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  libstdc++-10-dev libtsan0 libubsan1 linux-compiler-gcc-10-x86&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  linux-headers-5.8.0-1-amd64 linux-headers-5.8.0-1-common linux-headers-amd64&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  linux-kbuild-5.8 linux-libc-dev make patch perl perl-modules-5.30&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;0 upgraded, 40 newly installed, 0 to remove and 0 not upgraded.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;After this operation, 286 MB of additional disk space will be used.&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;And ZFS.&lt;br /&gt;
         Depending on dependency ordering, starting the services sometimes fails; simply re-running the command will fix it.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;apt install zfs-dkms&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;The following NEW packages will be installed:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  distro-info-data dkms fakeroot libfakeroot libnvpair1linux libuutil1linux&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  libzfs2linux libzpool2linux lsb-release python3-distutils python3-lib2to3&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  zfs-dkms zfs-zed zfsutils-linux&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;After this operation, 22.3 MB of additional disk space will be used.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Building for 5.8.0-1-amd64&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Building initial module for 5.8.0-1-amd64&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Done.&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;zfs.ko:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;Running module version sanity check.&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt; - Original module&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;   - No original module exists within this kernel&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt; - Installation&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;   - Installing to /lib/modules/5.8.0-1-amd64/updates/dkms/&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&amp;c.&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;DKMS: install completed.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zpool list&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;no pools available&lt;/samp&gt;&lt;br /&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Here'&lt;!--'--&gt;s the thing: &lt;code&gt;zfs-initramfs&lt;/code&gt; is much more broken than &lt;code&gt;zfs-dracut&lt;/code&gt;;
        I've made sure that what follows works with both of them, but I'd recommend using dracut anyway.&lt;br /&gt;
        If you want to be really sure after this, you can reboot, add &lt;code&gt;break&lt;/code&gt; or &lt;code&gt;rd.break&lt;/code&gt; to the cmdline,
        and run a ZFS command in the initrd.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;apt install zfs-initramfs&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;The following NEW packages will be installed:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  zfs-initramfs&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;After this operation, 108 kB of additional disk space will be used.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;apt install --no-install-recommends dracut zfs-dracut &amp;&amp; apt autopurge initramfs-tools&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;The following packages will be REMOVED:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  initramfs-tools* initramfs-tools-core* klibc-utils* libklibc*&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;The following NEW packages will be installed:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  dracut dracut-core kpartx libglib2.0-0 pkg-config zfs-dracut&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;After this operation, 4,644 kB of additional disk space will be used.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;/etc/kernel/postinst.d/kernel-install $(uname -r)&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;indented continued&quot;&gt;
And now a brief interlude on the layout of ZFS datasets in the VFS.
&lt;/p&gt;
&lt;h2 id=&quot;layout&quot; class=&quot;continuation&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#layout&quot;&gt;#&lt;/a&gt; Layout&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Buster%20Root%20on%20ZFS.html#step-3-system-installation&quot;&gt;Prior art&lt;/a&gt;,
Step 3: System Installation issues a lot of commands and doesn'&lt;!--'--&gt;t really explain why.
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
The final mount tree is as such:
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;zoot/
/&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;zoot/root
├── boot&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;zoot/boot
├── home&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;zoot/home
│&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;└── nab&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;zoot/home/nab
├── root&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;zoot/home/root
├── opt&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;zoot/opt
├── srv&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;zoot/srv
│&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;zoot/usr
├── usr/local&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;zoot/usr/local
│&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;zoot/var
├── var/cache&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;zoot/var/cache
│&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;zoot/var/lib
├── var/log&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;zoot/var/log
└── var/tmp&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;zoot/var/tmp
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Why?
&lt;/p&gt;
&lt;ul class=&quot;continuation&quot;&gt;
 &lt;li&gt;The root dataset is not mounted, because the explicit initrd'&lt;!--'--&gt;s &lt;code&gt;root=&lt;/code&gt; parameter requires a dataset to mount,
     and the scripts don'&lt;!--'--&gt;t behave too well when the detected bootfs is the root; &lt;code&gt;zoot/root&lt;/code&gt; is filling that role instead;&lt;/li&gt;
 &lt;li&gt;&lt;code&gt;/var&lt;/code&gt;, &lt;code&gt;/var/lib&lt;/code&gt;, and &lt;code&gt;/usr&lt;/code&gt; are all required for the system to boot
     (I didn't try a split-&lt;code&gt;/usr&lt;/code&gt; system, but don't have much hope either way),
     and the initrd
     &lt;a href=&quot;//github.com/openzfs/zfs/blob/8e7fe49b25d63e855a8d230d2775f99d722818ff/contrib/dracut/90zfs/mount-zfs.sh.in#L80&quot;&gt;only&lt;/a&gt;
     &lt;a href=&quot;//github.com/openzfs/zfs/blob/8e7fe49b25d63e855a8d230d2775f99d722818ff/contrib/initramfs/scripts/zfs#L966&quot;&gt;mounts&lt;/a&gt;
     the root filesystem — things don't go well when these aren't there,
     but the descendant filesystems are only used after the real init remounts everything;&lt;/li&gt;
 &lt;li&gt;additionally, &lt;code&gt;/var/log&lt;/code&gt; needs POSIX ACLs for &lt;code&gt;sd-journald&lt;/code&gt; and &lt;code&gt;/var/tmp&lt;/code&gt; needs to be sticky &lt;code&gt;a+rwx&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;indented continued&quot;&gt;
And so:
&lt;/p&gt;
&lt;table class=&quot;bigtable&quot;&gt;
 &lt;tr&gt;&lt;td&gt;Move &lt;code&gt;/tmp&lt;/code&gt; to tmpfs.
         The Debian default is to keep it on &lt;code&gt;/&lt;/code&gt;; if you, for some reason, prefer this, you can treat it like &lt;code&gt;/var/tmp&lt;/code&gt; later.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;ln -s /usr/share/systemd/tmp.mount /etc/systemd/system/&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;systemctl enable tmp.mount&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Created symlink /etc/systemd/system/local-fs.target.wants/tmp.mount → /usr/share/systemd/tmp.mount.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;mv /tmp{,_} &amp;&amp; systemctl start tmp.mount &amp;&amp; mv /tmp{_,}&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Now the pool on the &lt;em&gt;second&lt;/em&gt;, heretofor unused, disk
         (note that virtio devices don'&lt;!--'--&gt;t have standard SCSI IDs, but are otherwise stably ordered).&lt;br /&gt;
        &lt;br /&gt;
        As promised, filesystem tuning is not included, so I'&lt;!--'--&gt;m not speccing &lt;samp&gt;&lt;kbd&gt;-o ashift=12 -O relatime=on -O compress=zstd&lt;/kbd&gt;&lt;/samp&gt;
         and whateverelse, but I am adding encryption with &lt;samp&gt;&lt;kbd&gt;-O encryption=on -O keyformat=passphrase&lt;/kbd&gt;&lt;/samp&gt;.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;ls -l /dev/disk/by-id/&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;ata-QEMU_DVD-ROM_QM00003 -&gt; ../../sr0&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;ata-QEMU_HARDDISK_QM00001 -&gt; ../../sda&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;ata-QEMU_HARDDISK_QM00001-part1 -&gt; ../../sda1&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;ata-QEMU_HARDDISK_QM00001-part2 -&gt; ../../sda2&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;ata-QEMU_HARDDISK_QM00002 -&gt; ../../sdb&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zpool create -O mountpoint=/ -O canmount=off -R /mnt zoot ata-QEMU_HARDDISK_QM00002&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# zpool list&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;NAME   SIZE  ALLOC   FREE  CKPOINT  EXPANDSZ   FRAG    CAP  DEDUP    HEALTH  ALTROOT&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot  7.50G   564K  7.50G        -         -     0%     0%  1.00x    ONLINE  /mnt&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# zfs list&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;NAME   USED  AVAIL     REFER  MOUNTPOINT&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot   492K  7.27G      192K  /mnt&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Enable &lt;a href=&quot;//manpages.debian.org/bullseye/zfsutils-linux/zfs-mount-generator.8.en.html&quot;&gt;&lt;code&gt;zfs-mount-generator(8)&lt;/code&gt;&lt;/a&gt;
         via &lt;a href=&quot;//manpages.debian.org/bullseye/zfsutils-linux/zed.8.en.html&quot;&gt;&lt;code&gt;zed(8)&lt;/code&gt;&lt;/a&gt; for mount ordering; this makes systemd aware of,
         i.a., &lt;code&gt;/boot/efi&lt;/code&gt; depending on &lt;code&gt;/boot&lt;/code&gt; and mount &lt;code&gt;/var/log&lt;/code&gt; before starting journald there,
         making both mounts both (a) behave as expected and (b) work.&lt;br /&gt;
         &lt;samp&gt;history_event-zfs-list-cacher.sh&lt;/samp&gt; is enabled by default sinze zfs-zed 2.0.1-1&lt;/td&gt;
     &lt;td&gt;&lt;del&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;ln -s /usr/lib/zfs-linux/zed.d/history_event-zfs-list-cacher.sh /etc/zfs/zed.d/&lt;/kbd&gt;&lt;/samp&gt;&lt;/del&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;mkdir -p /etc/zfs/zfs-list.cache&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;touch /etc/zfs/zfs-list.cache/zoot&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;systemctl restart zfs-zed&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;And the filesystems, as discussed above.&lt;br /&gt;
         &lt;a href=&quot;//openzfs.github.io/openzfs-docs/Getting%20Started/Debian/Debian%20Buster%20Root%20on%20ZFS.html#step-3-system-installation&quot;&gt;Prior art&lt;/a&gt;,
         Step 3: System Installation, 3. Create datasets uses the &lt;code&gt;com.sun:auto-snapshot&lt;/code&gt; property,
         but as far as I can tell it'&lt;!--'--&gt;s used only by third-party tools.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;zfs create -o mountpoint=/ zoot/root&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;for f in zoot/{home{,/nab},boot,var{,/lib,/log,/cache,/tmp},opt,srv,usr{,/local}}; do zfs create $f; done&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zfs create -o mountpoint=/root zoot/home/root&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zfs set canmount=off zoot/{usr,var{,/lib}}&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zfs set com.sun:auto-snapshot=false zoot/var/{cache,tmp}&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zfs set acltype=posixacl xattr=sa zoot/var/log&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;chmod 1777 /mnt/var/tmp&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zfs list -o name,mountpoint,canmount&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;NAME            MOUNTPOINT      CANMOUNT&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot            /mnt                 off&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/boot       /mnt/boot             on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/home       /mnt/home             on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/home/nab   /mnt/home/nab         on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/home/root  /mnt/root             on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/opt        /mnt/opt              on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/root       /mnt                  on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/srv        /mnt/srv              on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/usr        /mnt/usr             off&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/usr/local  /mnt/usr/local        on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/var        /mnt/var             off&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/var/cache  /mnt/var/cache        on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/var/lib    /mnt/var/lib         off&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/var/log    /mnt/var/log          on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;zoot/var/tmp    /mnt/var/tmp          on&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;systemctl stop zfs-zed&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;sed -Ei 's;/mnt/?;/;' /etc/zfs/zfs-list.cache/zoot&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;a href=&quot;//github.com/openzfs/zfs/blob/8e7fe49b25d63e855a8d230d2775f99d722818ff/contrib/initramfs/scripts/zfs#L751&quot;&gt;These&lt;/a&gt; or
         &lt;a href=&quot;//github.com/openzfs/zfs/blob/8e7fe49b25d63e855a8d230d2775f99d722818ff/contrib/dracut/90zfs/parse-zfs.sh.in#L22&quot;&gt;these&lt;/a&gt;
         are all the valid forms.&lt;br /&gt;
         If &lt;code&gt;bootfs=&lt;/code&gt; is set, &lt;code&gt;root=zfs:AUTO&lt;/code&gt; becomes valid, but an explicit pool can always be specified.
         The documentation mentions no &lt;code&gt;root=&lt;/code&gt; at all,
         but dracut hangs waiting for &lt;code&gt;/dev/gpt-auto-root&lt;/code&gt; if one isn'&lt;!--'--&gt;t specified.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;zpool set bootfs=zoot/root zoot&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;cp /proc/cmdline /etc/kernel/&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;# Then trim out initrd= and add root=ZFS=zoot/root or root=zfs:AUTO to taste, and/or&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;echo 'root=zfs:zoot/root' &gt; /etc/kernel/cmdline&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Comment out the old rootfs to prevent re-mounting it on top of the new one and regenerate+reinstall initrds.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;sed -i 's;.* / .*ext.*;#&amp;;' /etc/fstab&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;run-parts --arg={,/boot/vmlinuz-}$(uname -r) /etc/kernel/postinst.d/&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;And now copy the system to the pool; this is the cursed bit.&lt;br /&gt;
         Note the CWD and ignore the few &quot;file exists&quot; errors for the directories — those are by design.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;apt install dump&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;The following NEW packages will be installed:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  dump liblzo2-2&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;After this operation, 539 kB of additional disk space will be used.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:/mnt# &lt;kbd&gt;dump -f - / | restore rf -&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  DUMP: Date of this level 0 dump: Sat Sep 12 02:11:03 2020&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  DUMP: Dumping /dev/sda2 (/) to standard output&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  DUMP: Label: zoot-root&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;restore: ./boot, ./var, ./&amp;c.: File exists&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  DUMP: 1357080 blocks (1325.27MB)&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  DUMP: finished in 50 seconds, throughput 27141 kBytes/sec&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  DUMP: Date of this level 0 dump: Sat Sep 12 02:11:03 2020&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  DUMP: Date this dump completed:  Sat Sep 12 02:11:53 2020&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  DUMP: DUMP IS DONE&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:/mnt# &lt;kbd&gt;rm restoresymtable&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:/mnt# &lt;kbd&gt;reboot&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
       &lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;indented continued&quot;&gt;
If all went well, the system should now prompt for a password:
&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;/content/assets/blogn_t/005.05-type-password.png&quot;&gt;
 &lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;'Encrypted ZFS password for zoot/root' prompt after boot with many messages&quot;
      src=&quot;/content/assets/blogn_t/005.05-type-password.png&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;continuation&quot;&gt;
dracut might try to use a stored mount option like &lt;code&gt;errors=remount-ro&lt;/code&gt; for the rootfs;
in that case &lt;kbd&gt;mount -t zfs -o zfsutil zoot/root /sysroot&lt;/kbd&gt; and regenerating the initrd (then committing it to the ESP!) will help.
&lt;/p&gt;
&lt;del&gt;&lt;p class=&quot;indented continued&quot;&gt;
If it says something to the effect of
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;samp&gt;[FAILED] Failed to start Import ZFS pools by cache file.&lt;/samp&gt;&lt;br /&gt;
&lt;samp&gt;See 'systemctl status zfs-import-cache.service' for details.&lt;/samp&gt;
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
instead, it'&lt;!--'--&gt;s likely that &lt;code&gt;/etc/zfs/zpool.cache&lt;/code&gt; exists and is zero-length, and was copied like this from the real root,
which is like this for god-knows-why.
&lt;kbd&gt;zpool import zoot&lt;/kbd&gt; and the same &lt;kbd&gt;mount&lt;/kbd&gt; invocation will let it boot,
then removing the file and regenerating the initrd should fix the problem permanently.
&lt;/p&gt;&lt;/del&gt;
&lt;p class=&quot;continuation&quot;&gt;
This was &lt;a href=&quot;https://github.com/openzfs/zfs/pull/11568&quot;&gt;fixed&lt;/a&gt; in
&lt;a href=&quot;https://github.com/openzfs/zfs/releases/tag/zfs-2.0.3&quot;&gt;OpenZFS 2.0.3&lt;/a&gt; (Fri, 12 Feb 2021 16:30:01 +0800).
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Post-login, the mounts should now be all ZFS:
&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;/content/assets/blogn_t/005.06-findmnt.png&quot;&gt;
 &lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;findmnt output, showing that all filesystems that should be ZFS (/, /home, &amp;c.) are&quot;
      src=&quot;/content/assets/blogn_t/005.06-findmnt.png&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Or:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nab@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;findmnt &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;grep&lt;/span&gt; zfs&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;/&lt;!--&quot;--&gt;                              &lt;!--&quot;--&gt;zoot/root&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
├─/home&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;zoot/home&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
│ └─/home/nab&lt;!--&quot;--&gt;                  &lt;!--&quot;--&gt;zoot/home/nab&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
├─/opt&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;zoot/opt&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
├─/boot&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;zoot/boot&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
├─/srv&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;zoot/srv&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
├─/var/cache&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;zoot/var/cache zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
├─/root&lt;!--&quot;--&gt;                        &lt;!--&quot;--&gt;zoot/home/root zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
├─/var/log&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;zoot/var/log&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,posixacl
├─/usr/local&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;zoot/usr/local zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
└─/var/tmp&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;zoot/var/tmp&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;zfs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;rw,relatime,xattr,noacl
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
And, yes, the chrome of the windows changed from Windows 10 to i3, this is a goddamn mess of a post.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
One last part now, to actually use both disks:
&lt;/p&gt;
&lt;table class=&quot;bigtable&quot;&gt;
 &lt;tr&gt;&lt;td&gt;I'm specifying the primary disk's rootfs partition by &lt;a href=&quot;#installation&quot;&gt;its partlabel&lt;/a&gt;,
         but &lt;code style=&quot;white-space: nowrap;&quot;&gt;ata-QEMU_HARDDISK_QM00001-part2&lt;/code&gt; would also work in this case.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@zoot:~# &lt;kbd&gt;gdisk -l /dev/disk/by-id/ata-QEMU_HARDDISK_QM00001&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Disk /dev/disk/by-id/ata-QEMU_HARDDISK_QM00001: 16777216 sectors, 8.0 GiB&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Disk identifier (GUID): 0D47FC01-7947-4DDE-9506-3BBBCFF572FF&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;Number  Start (sector)    End (sector)  Size       Code  Name&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;   1            2048          487423   237.0 MiB   EF00  zoot-EFI&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;   2          487424        16775167   7.8 GiB     8300  zoot-root&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zpool add zoot zoot-root&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;invalid vdev specification&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;use '-f' to override the following errors:&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;/dev/disk/by-partlabel/zoot-root contains a filesystem of type 'ext4'&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;dd if=/dev/zero of=/dev/disk/by-partlabel/zoot-root count=16&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@zoot:~# &lt;kbd&gt;zpool add zoot zoot-root&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
&lt;/table&gt;
&lt;p class=&quot;indented continued&quot;&gt;
And that's it. There ain't much fan-fare to it, since this took only the very best part of a week to get right.
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;zpool list&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;NAME&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;SIZE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ALLOC&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;FREE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;CKPOINT&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;EXPANDSZ&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;FRAG&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;CAP&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;DEDUP&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;HEALTH&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ALTROOT
zoot&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;15G&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;777M&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;14.2G&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0%&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;5%&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.00x&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;ONLINE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;-
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;zpool status&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;pool: zoot
 state: ONLINE
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;scan: none requested
config:

&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;NAME&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;STATE&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;READ WRITE CKSUM
&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;zoot&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;ONLINE&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0
&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;ata-QEMU_HARDDISK_QM00002&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ONLINE&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0
&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;zoot-root&lt;!--&quot;--&gt;                  &lt;!--&quot;--&gt;ONLINE&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;0

errors: No known data errors
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Or, as was succinctly put by the instigator of all this mess:
&lt;/p&gt;
&lt;!-- https://discord.com/channels/145079846832308224/150317232239542272/754853633031536670 --&gt;
&lt;center&gt;&lt;a href=&quot;/content/assets/blogn_t/005.07-final-review.png&quot;&gt;
 &lt;img class=&quot;main-screenshot continuation&quot; alt=&quot;[01:58] Griwes: okay, *to be fair* this looks less cursed than I thought it would be, so kudos :noel:&quot;
      src=&quot;/content/assets/blogn_t/005.07-final-review.png&quot; style=&quot;min-width: 75%;&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;indented continued&quot;&gt;
On Tue, 29 Sep 2020 22:16 -0800, after minor hiccups, the deed has finally been done, with a recommendation of the highest order:
&lt;/p&gt;
&lt;!-- https://discordapp.com/channels/145079846832308224/150317232239542272/760731829304688640 --&gt;
&lt;center&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1311318328510644225&quot;&gt;
 &lt;img class=&quot;main-screenshot continuation&quot; alt=&quot;[07:16] Griwes: @((наб *)(войд)())() I'll have you know that everything worked, and I did indeed hit the dracut issue of using a weird option on first reboot and that it did indeed resolve itself after rebuilding initrd, it felt like black magic&quot;
      src=&quot;/content/assets/blogn_t/005.08-success.png&quot; style=&quot;min-width: 75%;&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/005-low-curse-zfs-on-root.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/007-groff-Tps-cyrillic-et-al.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/007-groff-Tps-cyrillic-et-al.html" />
    <title> 007. Cleanly enabling Cyrillic and broad Unicode output in groff -Tps — blognꞌt — nabijaczleweli </title>
    <updated>2021-08-28T18:36:44+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;007. Cleanly enabling Cyrillic and broad Unicode output in groff -Tps&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Sat, 28 Aug 2021 18:36:44 +0200&lt;/span&gt;, updated Thu, 02 Sep 2021 20:41:02 +0200, Wed, 22 Jun 2022 18:33:54 +0200, Wed, 14 Jun 2023 14:46:03 +0200, and &lt;a href=&quot;//101010.pl/@nabijaczleweli/112717795133736568&quot;&gt;Tue, 02 Jul 2024 18:58:00 +0200&lt;/a&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#prior-art'&gt;Prior art&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#current-art'&gt;Current art&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#alternative-art'&gt;Alternative art&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#alternative-art-foreign-font'&gt;A foreign font&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#alternative-art-distribution-font'&gt;A distribution font&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#jajco'&gt;&lt;a style=&quot;color: inherit;&quot; href=&quot;//web.archive.org/web/20210823140236/twitter.com/kgbcatboy/status/1429605955994533889&quot;&gt;\nЯЙЦО&lt;/a&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#jajco'&gt;\nЯЙЦО--&gt; &lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p&gt;
 (This produced favourable results pre-bookworm, with &lt;a href=&quot;//packages.debian.org/bullseye/gsfonts&quot;&gt;&lt;tt&gt;gsfonts&lt;/tt&gt;&lt;/a&gt; fonts.
  Since, with &lt;tt&gt;fonts-urw-base35&lt;/tt&gt; fonts, the font quality is drastically reduced –
  the metrics appear to be off for groff &lt;code&gt;.Bl&lt;/code&gt; use, the arrows are horrific, &lt;tt&gt;*&lt;/tt&gt; appears broken entirely, &amp;c.;
  &lt;tt&gt;afmtodit&lt;/tt&gt; complains even when compiling.
  I'&lt;!--'--&gt;m continuing to use the &lt;a href=&quot;/content/assets/blogn_t/007.11-bullseye.tar.zst&quot;&gt;bullseye fonts&lt;/a&gt; for the bookworm release cycle.)
&lt;/p&gt;
&lt;!-- With manual corrections and welding the separately-highlit AWK bits:
for f in {C,T}{R,B,I,BI}; do
 in=&quot;$(awk '$1 == &quot;internalname&quot; {print $2; exit}' &quot;/usr/share/groff/current/font/devps/$f&quot;)&quot;;
 echo $f: $in;
 src=&quot;$(awk -v cur=&quot;/$in&quot; '   #&quot;
  $1 ~ /^\// &amp;&amp; $2 ~ /^[\/\(]/ {
   if($2 ~ /^\//)
    aliases[$1] = $2;
   else
    paths[$1] = $2;
  }
  END {
   while(cur in aliases)
    cur = aliases[cur];
   if(cur in paths) {
    sub(/^\(/, &quot;&quot;, paths[cur]);
    sub(/(pfb|t1)?\)$/, &quot;&quot;, paths[cur]);
    print paths[cur]
   } else {
    print &quot;last: &quot; cur &gt; &quot;/dev/stderr&quot;;
    exit 1
   }
  }' /var/lib/ghostscript/fonts/Fontmap)&quot;;  #'
 echo &quot;${src}afm; $(expr &quot;$f&quot; : C &gt; /dev/null &amp;&amp; echo -nk)&quot;
 afmtodit $([ &quot;${f#C}&quot; = &quot;$f&quot; ] || echo -nk) -cmi0 -d /usr/share/groff/current/font/devps/DESC -e /usr/share/groff/current/font/devps/text.enc &quot;${src}afm&quot; /usr/share/groff/current/font/devps/generate/textmap &quot;$f&quot;;
done
--&gt;
&lt;div class=&quot;bigcode continued&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; devps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;cd&lt;/span&gt; devps&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;C,T&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;R,B,I,BI&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token info punctuation&quot;&gt;&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;in=&quot;&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;awk &lt;span class=&quot;token string&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;language-awk&quot;&gt;$1 == &lt;span class=&quot;token string&quot;&gt;&quot;internalname&quot;&lt;/span&gt; {&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; $2; &lt;span class=&quot;token keyword&quot;&gt;exit&lt;/span&gt;}&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/usr/share/groff/current/font/devps/&lt;span class=&quot;token variable&quot;&gt;$f&lt;/span&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token bash language-bash&quot;&gt;f: &lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt;in&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token info punctuation&quot;&gt;&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;&lt;/span&gt;src=&quot;&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;awk -v &lt;span class=&quot;token assign-left variable&quot;&gt;cur&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&lt;span class=&quot;token variable&quot;&gt;$in&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&lt;/span&gt;&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;&lt;!--&quot;--&gt;
&lt;span class=&quot;language-awk&quot;&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;$1 ~ &lt;span class=&quot;token regex&quot;&gt;/^\//&lt;/span&gt; &amp;amp;&amp;amp; $2 ~ &lt;span class=&quot;token regex&quot;&gt;/^[\/\(]/&lt;/span&gt; {
&lt;!--&quot;--&gt;  			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;($2 ~ &lt;span class=&quot;token regex&quot;&gt;/^\//&lt;/span&gt;)
&lt;!--&quot;--&gt;  				&lt;!--&quot;--&gt;aliases[$1] = $2;
&lt;!--&quot;--&gt;  			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
&lt;!--&quot;--&gt;  				&lt;!--&quot;--&gt;paths[$1] = $2;
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;}
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;END&lt;/span&gt; {
&lt;!--&quot;--&gt;  			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt;(cur &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; aliases)
&lt;!--&quot;--&gt;  				&lt;!--&quot;--&gt;cur = aliases[cur];
&lt;!--&quot;--&gt;  			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;(cur &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; paths) {
&lt;!--&quot;--&gt;  				&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;sub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/^\(/&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;, paths[cur]);
&lt;!--&quot;--&gt;  				&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;sub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/(pfb|t1)?\)$/&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;, paths[cur]);
&lt;!--&quot;--&gt;  				&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; paths[cur]
&lt;!--&quot;--&gt;  			&lt;!--&quot;--&gt;} &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; {
&lt;!--&quot;--&gt;  				&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;last: &quot;&lt;/span&gt; cur &gt; &lt;span class=&quot;token string&quot;&gt;&quot;/dev/stderr&quot;&lt;/span&gt;;
&lt;!--&quot;--&gt;  				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;exit&lt;/span&gt; 1
&lt;!--&quot;--&gt;  			&lt;!--&quot;--&gt;}
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;}&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'&lt;/span&gt; /var/lib/ghostscript/fonts/Fontmap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;!--'--&gt;
&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;src&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;afm&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;afmtodit &lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;${f#C}&lt;/span&gt;&quot;&lt;/span&gt; = &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$f&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; -kn&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; -cmi&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;-d /usr/share/groff/current/font/devps/DESC \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;-e /usr/share/groff/current/font/devps/text.enc \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;${src}&lt;/span&gt;afm&quot;&lt;/span&gt; /usr/share/groff/current/font/devps/generate/textmap &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token variable&quot;&gt;$f&lt;/span&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
CR: Courier
/usr/share/fonts/type1/gsfonts/n022003l.afm
CB: Courier-Bold
/usr/share/fonts/type1/gsfonts/n022004l.afm
CI: Courier-Oblique
/usr/share/fonts/type1/gsfonts/n022023l.afm
CBI: Courier-BoldOblique
/usr/share/fonts/type1/gsfonts/n022024l.afm
TR: Times-Roman
/usr/share/fonts/type1/gsfonts/n021003l.afm
TB: Times-Bold
/usr/share/fonts/type1/gsfonts/n021004l.afm
TI: Times-Italic
/usr/share/fonts/type1/gsfonts/n021023l.afm
TBI: Times-BoldItalic
/usr/share/fonts/type1/gsfonts/n021024l.afm
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;ln&lt;/span&gt; -s /usr/local/share/groff/site-font /usr/share/groff&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;mkdir&lt;/span&gt; -p /usr/local/share/groff/site-font&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; -r ../devps /usr/local/share/groff/site-font&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/code&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
That's it. Same exact fonts as groff was already using, but with the appropriate metrics;  &lt;!--'--&gt;
on Debian — where all of these are Nimbus variants — this includes Cyrillic and the extended Latin planes, among others,
because unlike &lt;code&gt;Times&lt;/code&gt;, Nimbus is an actual font.
&lt;a href=&quot;/content/assets/blogn_t/007.01-result.pdf&quot;&gt;Render&lt;/a&gt; with &lt;code&gt;groff -Kutf8 …&lt;/code&gt;:
&lt;/p&gt;
&lt;!-- gs -d{Text,Graphics}AlphaBits=4 -dSAFER -dBATCH -dNOPAUSE -sDEVICE=pngmono -r600 -sOutputFile=976.png ~/PDF/job_976-stdin___jaczleweli_PDF.pdf --&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.01-result.png&quot;&gt;&lt;img class=&quot;continuation main-font dark-invert&quot; alt=&quot;Example manual page with Cyrillic and Polish characters&quot; src=&quot;/content/assets/blogn_t/007.01-result.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;indented&quot;&gt;
Versions of this document prior to
Wed, 22 Jun 2022 18:33:54 +0200
didn't specify  &lt;!--'--&gt;
&lt;kbd&gt;-k&lt;/kbd&gt;
to remove kerning on fixed-width fonts,
which &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1539638664548044800&quot;&gt;broke&lt;/a&gt; alignment in space-delimited tables.
We apologise for the error.
&lt;/p&gt;
&lt;h2 id=&quot;prior-art&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#prior-art&quot;&gt;#&lt;/a&gt; Prior art&lt;/h2&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
We've all been there, writing a manual that needs example text wider than US-ASCII, or to accredit a Russian.  &lt;!--'--&gt;
groff provides &lt;samp&gt;ć&lt;/samp&gt; as &lt;kbd&gt;\['c]&lt;/kbd&gt; and &lt;samp&gt;ł&lt;/samp&gt; as &lt;kbd&gt;\[/l]&lt;/kbd&gt;, gracefully noting that the latter is Polish, and that's about it.
It, of course, is rather tempting to, then, &quot;just write something&quot;, as it is, after all, anno domini twenty twenty.
This yields:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@tarta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/uwu&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;groff &lt;span class=&quot;token parameter variable&quot;&gt;-Tps&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-mdoc&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-tp&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; frag.1 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; lp &lt;span class=&quot;token parameter variable&quot;&gt;-dPDF&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;pic:&amp;lt;standard input&gt;:10: invalid input character code 128
pic:&amp;lt;standard input&gt;:14: invalid input character code 128
pic:&amp;lt;standard input&gt;:52: invalid input character code 129
pic:&amp;lt;standard input&gt;:52: invalid input character code 132
pic:&amp;lt;standard input&gt;:52: invalid input character code 152
pic:&amp;lt;standard input&gt;:52: invalid input character code 134
pic:&amp;lt;standard input&gt;:52: invalid input character code 131
pic:&amp;lt;standard input&gt;:52: invalid input character code 130
pic:&amp;lt;standard input&gt;:52: invalid input character code 133
pic:&amp;lt;standard input&gt;:52: invalid input character code 153
pic:&amp;lt;standard input&gt;:52: invalid input character code 135
pic:&amp;lt;standard input&gt;:52: invalid input character code 132
pic:&amp;lt;standard input&gt;:54: invalid input character code 128
pic:&amp;lt;standard input&gt;:82: invalid input character code 143
pic:&amp;lt;standard input&gt;:82: invalid input character code 134
pic:&amp;lt;standard input&gt;:82: invalid input character code 153
pic:&amp;lt;standard input&gt;:82: invalid input character code 158
pic:&amp;lt;standard input&gt;:82: invalid input character code 143
pic:&amp;lt;standard input&gt;:82: invalid input character code 134
pic:&amp;lt;standard input&gt;:82: invalid input character code 153
pic:&amp;lt;standard input&gt;:82: invalid input character code 158
pic:&amp;lt;standard input&gt;:82: invalid input character code 143
pic:&amp;lt;standard input&gt;:82: invalid input character code 134
pic:&amp;lt;standard input&gt;:82: invalid input character code 153
pic:&amp;lt;standard input&gt;:82: invalid input character code 158
pic:&amp;lt;standard input&gt;:82: invalid input character code 143
pic:&amp;lt;standard input&gt;:82: invalid input character code 134
pic:&amp;lt;standard input&gt;:82: invalid input character code 153
pic:&amp;lt;standard input&gt;:82: invalid input character code 158
pic:&amp;lt;standard input&gt;:82: invalid input character code 143
pic:&amp;lt;standard input&gt;:82: invalid input character code 134
pic:&amp;lt;standard input&gt;:82: invalid input character code 153
pic:&amp;lt;standard input&gt;:82: invalid input character code 158
pic:&amp;lt;standard input&gt;:82: invalid input character code 143
pic:&amp;lt;standard input&gt;:82: invalid input character code 134
pic:&amp;lt;standard input&gt;:82: invalid input character code 153
pic:&amp;lt;standard input&gt;:82: invalid input character code 158
pic:&amp;lt;standard input&gt;:83: invalid input character code 143
pic:&amp;lt;standard input&gt;:83: invalid input character code 134
pic:&amp;lt;standard input&gt;:83: invalid input character code 143
pic:&amp;lt;standard input&gt;:83: invalid input character code 134
pic:&amp;lt;standard input&gt;:83: invalid input character code 143
pic:&amp;lt;standard input&gt;:83: invalid input character code 134
pic:&amp;lt;standard input&gt;:83: invalid input character code 143
pic:&amp;lt;standard input&gt;:83: invalid input character code 134
pic:&amp;lt;standard input&gt;:83: invalid input character code 143
pic:&amp;lt;standard input&gt;:83: invalid input character code 134
pic:&amp;lt;standard input&gt;:84: invalid input character code 158
pic:&amp;lt;standard input&gt;:84: invalid input character code 158
pic:&amp;lt;standard input&gt;:84: invalid input character code 158
pic:&amp;lt;standard input&gt;:84: invalid input character code 158
pic:&amp;lt;standard input&gt;:84: invalid input character code 158
pic:&amp;lt;standard input&gt;:100: invalid input character code 129
pic:&amp;lt;standard input&gt;:100: invalid input character code 132
pic:&amp;lt;standard input&gt;:100: invalid input character code 152
pic:&amp;lt;standard input&gt;:100: invalid input character code 134
pic:&amp;lt;standard input&gt;:100: invalid input character code 131
pic:&amp;lt;standard input&gt;:100: invalid input character code 130
pic:&amp;lt;standard input&gt;:100: invalid input character code 133
pic:&amp;lt;standard input&gt;:100: invalid input character code 153
pic:&amp;lt;standard input&gt;:100: invalid input character code 135
pic:&amp;lt;standard input&gt;:100: invalid input character code 132
request id is PDF-978 (0 file(s))
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.02-original.pdf&quot;&gt;And&lt;/a&gt;:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.02-original.png&quot;&gt;&lt;img class=&quot;continuation main-font dark-invert&quot; alt=&quot;Same page, but non-ASCII characters are replaced with garbage, usually variant on the 'Å'&quot; src=&quot;/content/assets/blogn_t/007.02-original.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;indented continued&quot;&gt;
A great time!
The Arch Wiki says that to &lt;a href=&quot;//wiki.archlinux.org/title/Groff#Correctly_display_Polish_diacritics&quot;&gt;&quot;Correctly display Polish diacritics&quot;&lt;/a&gt;,
you can &lt;code&gt;groff -Kutf8 -Tdvi -mec -ms test.ms &gt; test.dvi&lt;/code&gt;, so:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@tarta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/uwu&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;groff &lt;span class=&quot;token parameter variable&quot;&gt;-Kutf8&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Tps&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-mdoc&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-tp&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; frag.1 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; lp &lt;span class=&quot;token parameter variable&quot;&gt;-dPDF&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0041_0328'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0045_0328'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u005A_0307'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u005A_0301'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u004E_0301'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0061_0328'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0065_0328'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u007A_0307'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u007A_0301'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:52: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u006E_0301'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u044F'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0438_0306'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0446'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u043E'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u042F'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0418_0306'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0426'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u041E'&lt;!--'--&gt;
request id is PDF-979 (0 file(s))
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.03-Kutf8.pdf&quot;&gt;And&lt;/a&gt;:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.03-Kutf8.png&quot;&gt;&lt;img class=&quot;continuation main-font dark-invert&quot; alt=&quot;Same page, the ellipsis is rendered, but non-ASCII characters apart from ŁĆ are entirely missing&quot; src=&quot;/content/assets/blogn_t/007.03-Kutf8.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;indented&quot;&gt;
This is, arguably, not better – &lt;kbd&gt;ł&lt;/kbd&gt;, &lt;kbd&gt;ć&lt;/kbd&gt;, and the ellipsis have appeared, but everything else &lt;em&gt;dis&lt;/em&gt;appeared.
It's unclear why exactly those three, considering the ellipsis can't be reached by a classic &lt;samp&gt;groff_char(7)&lt;/samp&gt; escape,
and all three become &lt;code&gt;\[uXXXX]&lt;/code&gt;-style escapes after passing through preconv.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The same Arch Wiki article says that as part of &quot;Adding support for cyrillic fonts&quot;,
you can preprocess with &lt;code&gt;iconv -f utf-8 -t koi8-r&lt;/code&gt;.
&lt;!-- ftp://ftp.kapella.gpi.ru/pub/cyrillic/psfonts --&gt;
This is preceded by downloading an unspecified font pack out of about 8 from a Russian FTP,
aided by the READMEs therein also being in KOI8-R (i.e. '&lt;samp&gt;�&lt;/samp&gt;' in UTF-8),
and mangling the Ghostscript font map into pointing at that font for &lt;samp&gt;Times-Roman&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
It's impossible to tell how the author expects literally any other Times variant (&lt;samp&gt;TI&lt;/samp&gt;, &lt;samp&gt;TB&lt;/samp&gt;, &lt;samp&gt;TBI&lt;/samp&gt;),  &lt;!--'--&gt;
or any of the four fixed-width fonts, to render Cyrillic.
And it ignores the obvious point that it &lt;em&gt;replaces the font&lt;/em&gt;, which means the pages &lt;em&gt;will&lt;/em&gt; look different.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It's only reasonable to expect the Russosphere to have some sort of answer to this, and,   &lt;!--'--&gt;
indeed, &lt;a href=&quot;//linuxtravel.blogspot.com/2015/03/cygwin-groff-cyrillic-russian-fonts.html&quot;&gt;a 2015 post&lt;/a&gt; has a workable solution;
it rambles and arrives at its point round-aboutly, converting to &lt;em&gt;and&lt;/em&gt; from KOI8-R, as well as requiring a &lt;code&gt;ru.tmac&lt;/code&gt; package
(not included, but can be found on the groff mailing list, as can a plethora of other hacks of varying insanity) which isn't required at all; however:  &lt;!--'--&gt;
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
More formally, &lt;b&gt;groff&lt;/b&gt; does not have metrics for russian fonts. But I do have! I have metrics for Times fonts and I need to put them into /usr/share/groff/current/font/devps, replacing already existing. My metrics are in &lt;u&gt;devps.tar&lt;/u&gt; attach.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
Indeed! &lt;code&gt;devps.tar&lt;/code&gt; contains a perfectly serviceable set of &lt;code&gt;usr/share/groff/current/font/devps/T{R,B,I,BI}&lt;/code&gt; metrics:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@tarta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/uwu&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;groff &lt;span class=&quot;token parameter variable&quot;&gt;-Kutf8&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Tps&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-mdoc&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-tp&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; frag.1 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; lp &lt;span class=&quot;token parameter variable&quot;&gt;-dPDF&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u044F'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0438_0306'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0446'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u043E'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u042F'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0418_0306'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0426'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:82: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u041E'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0041_0328'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0045_0328'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u005A_0307'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u005A_0301'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u004E_0301'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0061_0328'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u0065_0328'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u007A_0307'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u007A_0301'&lt;!--'--&gt;
troff: &amp;lt;standard input&gt;:100: warning: can'&lt;!--'--&gt;t find special character '&lt;!--'--&gt;u006E_0301'&lt;!--'--&gt;
request id is PDF-980 (0 file(s))
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.04-linuxtravels.pdf&quot;&gt;Rendering to&lt;/a&gt;:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.04-linuxtravels.png&quot;&gt;&lt;img class=&quot;continuation main-font dark-invert&quot; alt=&quot;Same page, proportional non-ASCII characters rendered, monospace ones missing&quot; src=&quot;/content/assets/blogn_t/007.04-linuxtravels.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;indented&quot;&gt;
A cursory inspection of the metric reveals that they're for &lt;code&gt;internalname NimbusRomNo9L-Regu&lt;/code&gt; and friends,  &lt;!--'--&gt;
generated Thu Aug 2 13:14:49 2007, as was the Nimbus in Buster;
a cursory correlation with the provided &lt;code&gt;Fontmap&lt;/code&gt; reveals that the mappings are as today.
But it's still undistributable, still missing the Courier variants, and, regardless, still quite different from a metric generated with up-to-date groff.  &lt;!--'--&gt;
&lt;/p&gt;
&lt;h2 id=&quot;current-art&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#current-art&quot;&gt;#&lt;/a&gt; Current art&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
This is the bit where I vaguely explain how that big hunk at the top generates the unsolvable:
&lt;/p&gt;
&lt;ol class=&quot;wide-explanation continuation&quot;&gt;
 &lt;li&gt;&lt;code&gt;/usr/share/groff/current/font/devps/DESC&lt;/code&gt; says that there's the usual four styles  &lt;!--'--&gt;
     (&lt;code&gt;R&lt;/code&gt;, &lt;code&gt;B&lt;/code&gt;, &lt;code&gt;I&lt;/code&gt;, and &lt;code&gt;BI&lt;/code&gt;),
     and that the default family is &lt;code&gt;T&lt;/code&gt;; there's no point in getting cute and parsing this.&lt;/li&gt;  &lt;!--'--&gt;
 &lt;li&gt;groff font metrics have an &lt;code&gt;internalname&lt;/code&gt; directive, corresponding to the PostScript font requested
     (for &lt;code&gt;TI&lt;/code&gt; it's &lt;code&gt;Times-Italic&lt;/code&gt;, for &lt;code&gt;CI&lt;/code&gt; it's &lt;code&gt;Courier-Oblique&lt;/code&gt;, &amp;amp;c.).&lt;/li&gt;
 &lt;li&gt;The Ghostscript font map (&lt;code&gt;/var/lib/ghostscript/fonts/Fontmap&lt;/code&gt; from &lt;code&gt;/etc/ghostscript/fontmap.d/*&lt;/code&gt; by &lt;code&gt;update-gsfontmap&lt;/code&gt;)
     is used to override font paths and alias fonts to others (well, it's arbitrary Ghostscript code that happens to match font names,  &lt;!--'--&gt;
     but doing anything besides name/alias/path mapping has thankfully &lt;a href=&quot;//wiki.debian.org/gs-undefoma#line-254&quot;&gt;died down&lt;/a&gt; as a practice),
     with the interesting mappings being in the format:
   &lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;/NimbusRomNo9L-ReguItal (/usr/share/fonts/type1/gsfonts/n021023l.pfb) ;
/Times-Italic /NimbusRomNo9L-ReguItal ;
/NimbusMonL-ReguObli (/usr/share/fonts/type1/gsfonts/n022023l.pfb) ;
/Courier-Oblique /NimbusMonL-ReguObli ;
&lt;/code&gt;&lt;/pre&gt;
 &lt;/div&gt;
     This can be trivially walked by first exhausting all name/name mappings, then resolving the final name/path mapping.&lt;/li&gt;
 &lt;li&gt;For each font in &lt;code&gt;/usr/share/fonts/type1/gsfonts/&lt;/code&gt;, there are three files:
     &lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@tarta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/uwu/devps&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt; /usr/share/fonts/type1/gsfonts/&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;n022004l,n022023l&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;.*&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;/usr/share/fonts/type1/gsfonts/n022004l.afm: ASCII font metrics
/usr/share/fonts/type1/gsfonts/n022004l.pfb: PostScript Type 1 font program data
/usr/share/fonts/type1/gsfonts/n022004l.pfm: Printer Font Metrics NimbusMonL-Bold, 2738 bytes, Nimbus Mono L bold

/usr/share/fonts/type1/gsfonts/n022023l.afm: ASCII font metrics
/usr/share/fonts/type1/gsfonts/n022023l.pfb: PostScript Type 1 font program data
/usr/share/fonts/type1/gsfonts/n022023l.pfm: Printer Font Metrics NimbusMonL-ReguObli, 2742 bytes, Nimbus Mono L italic
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
 &lt;/div&gt;
     The second is the actual font, the other two are metrics.&lt;/li&gt;
 &lt;li&gt;These metrics must be converted to groff's internal format,  &lt;!--'--&gt;
     the flags gracefully provided by &lt;code&gt;/usr/share/groff/current/font/devps/generate/Makefile&lt;/code&gt;;
     &lt;code&gt;-n&lt;/code&gt;, disabling &lt;code&gt;ligature&lt;/code&gt; output, only applies to monospace fonts, because ligaturised tables are nightmarish:
&lt;a href=&quot;/content/assets/blogn_t/007.07-ligaturised.png&quot;&gt;&lt;img class=&quot;fragment dark-invert&quot; alt=&quot;Tab-aligned /etc/passwd, one of the usernames is 'fifl', both pairs ligaturised throwing the second through fourth columns two columns left out of alignment, and the fifth four&quot; src=&quot;/content/assets/blogn_t/007.07-ligaturised.png&quot; /&gt;&lt;/a&gt;
     ).&lt;/li&gt;
 &lt;li&gt;groff searches for site-specific fonts in &lt;code&gt;/usr/share/groff/site-font/dev&lt;em&gt;DEV&lt;/em&gt;&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;continued&quot;&gt;
This is not without its own delta from the original:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.08-diff.png&quot;&gt;&lt;img class=&quot;continuing main-font dark-invert&quot; alt=&quot;Visual diff between the page with no non-ASCII characters and the one with them; the differences stack up most toward the end of the line on about half of the lines, and are within antialiasing noise on the other half&quot; src=&quot;/content/assets/blogn_t/007.08-diff.png&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;continuing&quot;&gt;
But these differences are not only minute even at their worst (1.92pt in the synopsis line, 0.96pt in the third description line),
but a result of the tighter kerning matching the font better.
&lt;/p&gt;
&lt;h2 id=&quot;alternative-art&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#alternative-art&quot;&gt;#&lt;/a&gt; Alternative art&lt;/h2&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
In the three-day process of &quot;printing a cyrillic document in 2020&quot;, I've also done what &lt;code&gt;grops(1)&lt;/code&gt; says you can,  &lt;!--'--&gt;
but is clasically unhelpful in achieving, so:
&lt;/p&gt;
&lt;h3 id=&quot;alternative-art-foreign-font&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#alternative-art-foreign-font&quot;&gt;#&lt;/a&gt; A foreign font&lt;/h3&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
In this case: &lt;a href=&quot;//dimkanovikov.pro/courierprime/&quot;&gt;Курьер Прайм&lt;/a&gt;, a Courier Prime with Cyrillic characters, that, unlike the latter,
isn't in Debian (merging them is an &lt;a href=&quot;//bugs.debian.org/992739&quot;&gt;ongoing adventure&lt;/a&gt;).  &lt;!--'--&gt;
Note the glyph name correction: groff calls big characters PostScript doesn'&lt;!--'--&gt;t have a name for &lt;samp&gt;u&lt;var&gt;240A&lt;/var&gt;&lt;/samp&gt;,
but depending on what'&lt;!--'--&gt;s embedded in the font, fontforge calls them &lt;samp&gt;uni&lt;var&gt;240A&lt;/var&gt;&lt;/samp&gt; or &lt;samp&gt;glyph&lt;var&gt;123&lt;/var&gt;&lt;/samp&gt;,
which makes them unreachable as &lt;q&gt;warning: can'&lt;!--'--&gt;t find special character 'u240A'&lt;/q&gt;.
Sometimes the &lt;samp&gt;uni&lt;/samp&gt; prefix is correct though, so idk.
Also, outputting a &quot;&lt;samp&gt;t4a&lt;/samp&gt;&quot; instead of a &quot;&lt;samp&gt;pfa&lt;/samp&gt;&quot; may work better.
&lt;/p&gt;
&lt;!-- This, but manually fixed:
$ unzip ../courierprime.zip
Archive: ../courierprime.zip
  inflating: Courier-Prime-Italic.ttf
  inflating: Courier-Prime-Bold.ttf
  inflating: Courier-Prime.ttf
  inflating: Courier-Prime-Bold-Italic.ttf
$ for v in &quot;&quot; -Bold -Italic -Bold-Italic; do
  fontforge -c '    // '
import sys
f = fontforge.open(sys.argv[1] + &quot;.ttf&quot;)
for g in f.glyphs():
 if (g.glyphname.startswith(&quot;glyph&quot;) or (False and g.glyphname.startswith(&quot;uni&quot;))) and g.unicode &gt; 0:
  g.glyphname = hex(g.unicode).upper().replace(&quot;0X&quot;, &quot;u&quot;)
for ext in [&quot;afm&quot;, &quot;pfa&quot;]:
 f.generate(sys.argv[1] + &quot;.&quot; + ext)' \  // '
   Courier-Prime$v &amp;
  done
‌# ...
Warning: Mac and Windows entries in the 'name' table differ for the
 Fullname string in the language English (US)
 Mac String: Courier Prime Bold Italic
Windows String: CourierPrime-BoldItalic
‌# cp *.pfa /usr/local/share/groff/site-font/devps/
$ for v in &quot;&quot; -Bold -Italic -Bold-Italic; do
   afmtodit -ncmi0 -d /usr/share/groff/current/font/devps/DESC -e /usr/share/groff/current/font/devps/text.enc Courier-Prime$v.afm /usr/share/groff/current/font/devps/generate/textmap &quot;C$(expr &quot;$(echo $v | tr -d '[:lower:]-')&quot; \| R)&quot;;
  done
‌# cp C{R,B,I,BI} /usr/local/share/groff/site-font/devps/
‌# {
   cat /usr/share/groff/current/font/devps/download; echo;
   for v in &quot;&quot; -Bold -Italic -Bold-Italic; do
    printf &quot;%s\t%s\n&quot; CourierPrime${v/d-I/dI} Courier-Prime$v.pfa;
   done;
  } | tee /usr/local/share/groff/site-font/devps/download
‌# List of downloadable fonts
‌# PostScript-name Filename
Symbol-Slanted symbolsl.pfa
ZapfDingbats-Reverse zapfdr.pfa
FreeEuro freeeuro.pfa
CourierPrime Courier-Prime.pfa
CourierPrime-Bold Courier-Prime-Bold.pfa
CourierPrime-Italic Courier-Prime-Italic.pfa
CourierPrime-BoldItalic Courier-Prime-Bold-Italic.pfa
--&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;unzip&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;/courierprime.zip&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Archive:&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;../courierprime.zip
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;inflating: Courier-Prime-Italic.ttf
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;inflating: Courier-Prime-Bold.ttf
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;inflating: Courier-Prime.ttf
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;inflating: Courier-Prime-Bold-Italic.ttf
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt; -Bold -Italic -Bold-Italic&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/span&gt;&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;&lt;span class=&quot;token bash language-bash&quot;&gt;fontforge -c &lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; sys
f &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fontforge&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argv&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.ttf&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; g &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;glyphs&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;g&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;glyphname&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startswith&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;glyph&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;or&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;glyphname&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startswith&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;uni&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;and&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;unicode&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;g&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;glyphname &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;hex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;g&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;unicode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;upper&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;0X&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;u&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; ext &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;afm&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;pfa&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;generate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sys&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argv&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; ext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'&lt;!--'--&gt;&lt;/span&gt; &lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token output&quot;&gt;\
&lt;/span&gt;&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;&lt;span class=&quot;token string&quot;&gt;Courier-Prime$v&lt;/span&gt; &lt;span class=&quot;token shell-symbol important&quot;&gt;&amp;amp;&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;token output&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# ...&lt;/span&gt;
Warning: Mac and Windows entries in the 'name' table differ for the
 Fullname string in the language English (US)
 Mac String: Courier Prime Bold Italic
Windows String: CourierPrime-BoldItalic
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;cp *.pfa /usr/local/share/groff/site-font/devps/&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt; -Bold -Italic -Bold-Italic&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;afmtodit -ncmi&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;-d /usr/share/groff/current/font/devps/DESC \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;-e /usr/share/groff/current/font/devps/text.enc \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;&lt;span class=&quot;token string&quot;&gt;Courier-Prime&lt;span class=&quot;token variable&quot;&gt;$v&lt;/span&gt;.afm&lt;/span&gt; /usr/share/groff/current/font/devps/generate/textmap &lt;span class=&quot;token string&quot;&gt;&quot;C$(expr &quot;&lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; $v &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;tr&lt;/span&gt; -d &lt;span class=&quot;token string&quot;&gt;'[:lower:]-'&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;\&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; R&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;cp C{R,B,I,BI} /usr/local/share/groff/site-font/devps/&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;cat /usr/share/groff/current/font/devps/download&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;echo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt; -Bold -Italic -Bold-Italic&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;%s&lt;span class=&quot;token entity&quot; title=&quot;\t&quot;&gt;\t&lt;/span&gt;%s&lt;span class=&quot;token entity&quot; title=&quot;\n&quot;&gt;\n&lt;/span&gt;&quot;&lt;/span&gt; CourierPrime&lt;span class=&quot;token variable&quot;&gt;${v&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;d-I&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;dI}&lt;/span&gt; Courier-Prime&lt;span class=&quot;token variable&quot;&gt;$v&lt;/span&gt;.pfa&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;done&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; tee /usr/local/share/groff/site-font/devps/download
&lt;/span&gt;&lt;span class=&quot;token output&quot;&gt;# List of downloadable fonts
# PostScript-name&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;Filename
Symbol-Slanted&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;symbolsl.pfa
ZapfDingbats-Reverse&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;zapfdr.pfa
FreeEuro&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;freeeuro.pfa
CourierPrime&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;Courier-Prime.pfa
CourierPrime-Bold&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;Courier-Prime-Bold.pfa
CourierPrime-Italic&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;Courier-Prime-Italic.pfa
CourierPrime-BoldItalic Courier-Prime-Bold-Italic.pfa
&lt;/span&gt;&lt;/pre&gt;&lt;/code&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.09-Курьер.pdf&quot;&gt;Yielding&lt;/a&gt;:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.09-Курьер.png&quot;&gt;&lt;img class=&quot;continuation main-font dark-invert&quot; alt=&quot;Same page, monospace non-ASCII characters rendered in a different, rounder, heavier font, with a long f, and proportional ones missing&quot; src=&quot;/content/assets/blogn_t/007.09-Курьер.png&quot; /&gt;&lt;/a&gt;
&lt;h3 id=&quot;alternative-art-distribution-font&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#alternative-art-distribution-font&quot;&gt;#&lt;/a&gt; A distribution font&lt;/h3&gt;
&lt;p class=&quot;continuing indented&quot;&gt;
GhostScript can directly load TrueType and OpenType fonts, so for a properly-packaged one all that's needed is:  &lt;!--'--&gt;
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;apt&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; fonts-liberation2&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token for-or-select variable&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; Regular Bold Italic BoldItalic&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;fontforge -c '&lt;!--'--&gt;import sys; fontforge.open(sys.argv[1]).generate(sys.argv[2])'&lt;!--'--&gt; /usr/share/fonts/truetype/liberation2/LiberatSans-$v.ttf LiberatSans-$v.afm;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  	&lt;!--&quot;--&gt;afmtodit -cmi0 \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;-d /usr/share/groff/current/font/devps/DESC \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;-e /usr/share/groff/current/font/devps/text.enc \
&lt;!--&quot;--&gt;  		&lt;!--&quot;--&gt;LiberationSans-$v.afm /usr/share/groff/current/font/devps/generate/textmap &quot;T$(echo $v | tr -d '&lt;!--'--&gt;[:lower:]-'&lt;!--'--&gt;)&quot;;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;done
This font contains both a '&lt;!--'--&gt;kern'&lt;!--'--&gt; table and a '&lt;!--'--&gt;GPOS'&lt;!--'--&gt; table.
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;The '&lt;!--'--&gt;kern'&lt;!--'--&gt; table will only be read if there is no '&lt;!--'--&gt;kern'&lt;!--'--&gt; feature in '&lt;!--'--&gt;GPOS'&lt;!--'--&gt;.
The glyph named macron is mapped to U+02C9.
But its name indicates it should be mapped to U+00AF.
The glyph named Delta is mapped to U+0394.
But its name indicates it should be mapped to U+2206.
The glyph named Omega is mapped to U+03A9.
But its name indicates it should be mapped to U+2126.
The glyph named mu is mapped to U+03BC.
But its name indicates it should be mapped to U+00B5.
The glyph named periodcentered is mapped to U+2219.
But its name indicates it should be mapped to U+00B7.

both S_BE and S_PE map to u0053 at /bin/afmtodit line 6519.
both S_BE and S_TE map to u0053 at /bin/afmtodit line 6519.
both anoteleia and middot map to u00B7 at /bin/afmtodit line 6519.
both mu and mu1 map to mc at /bin/afmtodit line 6411.
both hookabovecomb and uni0309 map to u0309 at /bin/afmtodit line 6519.
both gravecomb and uni0340 map to u0300 at /bin/afmtodit line 6519.
both acutecomb and uni0341 map to u0301 at /bin/afmtodit line 6519.
both uni0313 and uni0343 map to u0313 at /bin/afmtodit line 6519.
both uni02B9 and uni0374 map to u02B9 at /bin/afmtodit line 6519.
both alphatonos and uni1F71 map to u03B1_0301 at /bin/afmtodit line 6519.
both epsilontonos and uni1F73 map to u03B5_0301 at /bin/afmtodit line 6519.
both etatonos and uni1F75 map to u03B7_0301 at /bin/afmtodit line 6519.
both iotatonos and uni1F77 map to u03B9_0301 at /bin/afmtodit line 6519.
both omicrontonos and uni1F79 map to u03BF_0301 at /bin/afmtodit line 6519.
both omegatonos and uni1F7D map to u03C9_0301 at /bin/afmtodit line 6519.
both Alphatonos and uni1FBB map to u0391_0301 at /bin/afmtodit line 6519.
both Epsilontonos and uni1FC9 map to u0395_0301 at /bin/afmtodit line 6519.
both Etatonos and uni1FCB map to u0397_0301 at /bin/afmtodit line 6519.
both iotadieresistonos and uni1FD3 map to u03B9_0308_0301 at /bin/afmtodit line 6519.
both Iotatonos and uni1FDB map to u0399_0301 at /bin/afmtodit line 6519.
both Upsilontonos and uni1FEB map to u03A5_0301 at /bin/afmtodit line 6519.
both dieresistonos and uni1FEE map to u00A8_0301 at /bin/afmtodit line 6519.
both Omicrontonos and uni1FF9 map to u039F_0301 at /bin/afmtodit line 6519.
both Omegatonos and uni1FFB map to u03A9_0301 at /bin/afmtodit line 6519.
both uni2000 and uni2002 map to u2002 at /bin/afmtodit line 6519.
both uni2001 and uni2003 map to u2003 at /bin/afmtodit line 6519.
both uni1FE3 and upsilondieresistonos map to u03C5_0308_0301 at /bin/afmtodit line 6519.
both uni1F7B and upsilontonos map to u03C5_0301 at /bin/afmtodit line 6519.
both patah and yodyod_patah map to u05B7 at /bin/afmtodit line 6519.

&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;cp&lt;/span&gt; T* /usr/local/share/groff/site-font/devps/&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.10-liberation2.pdf&quot;&gt;And just like that&lt;/a&gt;:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/blogn_t/007.10-liberation2.png&quot;&gt;&lt;img class=&quot;continuation main-font dark-invert&quot; alt=&quot;Same page, proportional non-ASCII characters rendered in a serifless font with busted kerning and regular and bold-italic cyrillic replaced by boxes, and monospace ones missing&quot; src=&quot;/content/assets/blogn_t/007.10-liberation2.png&quot; /&gt;&lt;/a&gt;
&lt;!-- https://lfs.nabijaczleweli.xyz/0017-twitter-export#1429503115947020297 --&gt;
&lt;h2 id=&quot;jajco&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#jajco&quot;&gt;#&lt;/a&gt; &lt;a style=&quot;color: inherit;&quot; href=&quot;//web.archive.org/web/20210823140236/twitter.com/kgbcatboy/status/1429605955994533889&quot;&gt;\nЯЙЦО&lt;/a&gt;&lt;/h2&gt;
&lt;!-- &lt;h2 id=&quot;jajco&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#jajco&quot;&gt;#&lt;/a&gt; \nЯЙЦО&lt;/h2&gt;
&lt;p class=&quot;continuing indented&quot;&gt;
A &lt;del&gt;powerful&lt;/del&gt; sufficient diagnostic tool can also be plainly piping groff into Ghostscript:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@tarta&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~/uwu&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;groff &lt;span class=&quot;token parameter variable&quot;&gt;-Kutf8&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-Tps&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-mdoc&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-tp&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; frag.1 &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; gs&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&amp;lt;1&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;3&gt;GS&amp;lt;1&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&amp;lt;2&gt;GS&amp;lt;5&gt;GS&amp;lt;13&gt;GS&amp;lt;22&gt;GS&amp;lt;31&gt;GS&amp;lt;40&gt;GS&amp;lt;48&gt;GS&amp;lt;61&gt;GS&amp;lt;82&gt;GS&amp;lt;97&gt;GS&amp;lt;124&gt;GS&amp;lt;132&gt;GS&amp;lt;139&gt;GS&amp;lt;150&gt;GS&amp;lt;159&gt;GS&amp;lt;168&gt;GS&amp;lt;174&gt;GS&amp;lt;181&gt;GS&amp;lt;188&gt;GS&amp;lt;193&gt;GS&amp;lt;201&gt;GS&amp;lt;209&gt;GS&amp;lt;217&gt;GS&amp;lt;225&gt;GS&amp;lt;234&gt;GS&amp;lt;242&gt;GS&amp;lt;251&gt;GS&gt;Querying operating system for font files...
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file /usr/share/ghostscript/9.27/Resource/Font/CourierPrime-BoldItalic.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file CourierPrime-BoldItalic.
Didn'&lt;!--'--&gt;t find this font on the system!
Substituting font Courier-BoldOblique for CourierPrime-BoldItalic.
Loading NimbusMonoPS-BoldItalic font from /usr/share/ghostscript/9.27/Resource/Font/NimbusMonoPS-BoldItalic... 4371456 2971386 7864932 6531275 1 done.
GS&gt;Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file /usr/share/ghostscript/9.27/Resource/Font/LiberationSans-Italic.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file LiberationSans-Italic.
Loading LiberationSans-Italic font from /usr/share/fonts/truetype/liberation2/LiberationSans-Italic.ttf... 4572808 3202292 8735964 7377991 1 done.
GS&amp;lt;1&gt;Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file /usr/share/ghostscript/9.27/Resource/Font/CourierPrime.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file CourierPrime.
Didn'&lt;!--'--&gt;t find this font on the system!
Substituting font Courier for CourierPrime.
Loading NimbusMonoPS-Regular font from /usr/share/ghostscript/9.27/Resource/Font/NimbusMonoPS-Regular... 4707152 3390954 8777444 7417724 1 done.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file /usr/share/ghostscript/9.27/Resource/Font/CourierPrime-Italic.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file CourierPrime-Italic.
Didn'&lt;!--'--&gt;t find this font on the system!
Substituting font Courier-Oblique for CourierPrime-Italic.
Loading NimbusMonoPS-Italic font from /usr/share/ghostscript/9.27/Resource/Font/NimbusMonoPS-Italic... 4955064 3635291 8797644 7430341 1 done.
GS&gt;Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file /usr/share/ghostscript/9.27/Resource/Font/CourierPrime-Bold.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file CourierPrime-Bold.
Didn'&lt;!--'--&gt;t find this font on the system!
Substituting font Courier-Bold for CourierPrime-Bold.
Loading NimbusMonoPS-Bold font from /usr/share/ghostscript/9.27/Resource/Font/NimbusMonoPS-Bold... 5223176 3896909 8797644 7439279 1 done.
GS&amp;lt;1&gt;Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file /usr/share/ghostscript/9.27/Resource/Font/LiberationSans-Bold.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file LiberationSans-Bold.
Loading LiberationSans-Bold font from /usr/share/fonts/truetype/liberation2/LiberationSans-Bold.ttf... 5255944 3939182 9686752 8286341 1 done.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file /usr/share/ghostscript/9.27/Resource/Font/LiberationSans.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file LiberationSans.
Loading LiberationSans font from /usr/share/fonts/truetype/liberation/LiberationSans-Regular.ttf... 5313240 3985493 10080064 8668213 1 done.
GS&gt;GS&amp;lt;9&gt;GS&amp;lt;18&gt;GS&amp;lt;27&gt;GS&amp;lt;36&gt;GS&amp;lt;45&gt;GS&amp;lt;54&gt;GS&amp;lt;63&gt;GS&amp;lt;72&gt;GS&amp;lt;81&gt;GS&amp;lt;90&gt;GS&amp;lt;99&gt;GS&amp;lt;108&gt;GS&amp;lt;117&gt;GS&amp;lt;126&gt;GS&amp;lt;135&gt;GS&amp;lt;144&gt;GS&amp;lt;153&gt;GS&amp;lt;162&gt;GS&amp;lt;171&gt;GS&amp;lt;180&gt;GS&amp;lt;189&gt;GS&amp;lt;198&gt;GS&amp;lt;207&gt;GS&amp;lt;216&gt;GS&amp;lt;225&gt;GS&amp;lt;234&gt;GS&amp;lt;243&gt;GS&amp;lt;252&gt;GS&gt;Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file /usr/share/ghostscript/9.27/Resource/Font/LiberationSans-BoldItalic.
Can'&lt;!--'--&gt;t find (or can'&lt;!--'--&gt;t open) font file LiberationSans-BoldItalic.
Loading LiberationSans-BoldItalic font from /usr/share/fonts/truetype/liberation/LiberationSans-BoldItalic.ttf... 5333440 4004198 10467904 9033893 1 done.
GS&gt;GS&amp;lt;9&gt;GS&amp;lt;18&gt;GS&amp;lt;27&gt;GS&amp;lt;36&gt;GS&amp;lt;45&gt;GS&amp;lt;54&gt;GS&amp;lt;63&gt;GS&amp;lt;72&gt;GS&amp;lt;81&gt;GS&amp;lt;90&gt;GS&amp;lt;99&gt;GS&amp;lt;108&gt;GS&amp;lt;117&gt;GS&amp;lt;126&gt;GS&amp;lt;135&gt;GS&amp;lt;144&gt;GS&amp;lt;153&gt;GS&amp;lt;162&gt;GS&amp;lt;171&gt;GS&amp;lt;180&gt;GS&amp;lt;189&gt;GS&amp;lt;198&gt;GS&amp;lt;207&gt;GS&amp;lt;216&gt;GS&amp;lt;225&gt;GS&amp;lt;234&gt;GS&amp;lt;243&gt;GS&amp;lt;252&gt;GS&gt;GS&amp;lt;2&gt;GS&amp;lt;11&gt;GS&amp;lt;20&gt;GS&amp;lt;29&gt;GS&amp;lt;38&gt;GS&amp;lt;47&gt;GS&amp;lt;56&gt;GS&amp;lt;65&gt;GS&amp;lt;74&gt;GS&amp;lt;83&gt;GS&amp;lt;92&gt;GS&amp;lt;101&gt;GS&amp;lt;110&gt;GS&amp;lt;119&gt;GS&amp;lt;128&gt;GS&amp;lt;137&gt;GS&amp;lt;146&gt;GS&amp;lt;155&gt;GS&amp;lt;164&gt;GS&amp;lt;173&gt;GS&amp;lt;182&gt;GS&amp;lt;191&gt;GS&amp;lt;200&gt;GS&amp;lt;209&gt;GS&amp;lt;218&gt;GS&amp;lt;227&gt;GS&amp;lt;236&gt;GS&amp;lt;245&gt;GS&amp;lt;254&gt;GS&amp;lt;2&gt;GS&amp;lt;7&gt;GS&amp;lt;16&gt;GS&amp;lt;25&gt;GS&amp;lt;34&gt;GS&amp;lt;43&gt;GS&amp;lt;52&gt;GS&amp;lt;61&gt;GS&amp;lt;70&gt;GS&amp;lt;79&gt;GS&amp;lt;88&gt;GS&amp;lt;97&gt;GS&amp;lt;106&gt;GS&amp;lt;115&gt;GS&amp;lt;124&gt;GS&amp;lt;133&gt;GS&amp;lt;142&gt;GS&amp;lt;151&gt;GS&amp;lt;160&gt;GS&amp;lt;169&gt;GS&amp;lt;178&gt;GS&amp;lt;187&gt;GS&amp;lt;196&gt;GS&amp;lt;205&gt;GS&amp;lt;214&gt;GS&amp;lt;223&gt;GS&amp;lt;232&gt;GS&amp;lt;241&gt;GS&amp;lt;250&gt;GS&gt;GS&amp;lt;4&gt;GS&amp;lt;13&gt;GS&amp;lt;22&gt;GS&amp;lt;31&gt;GS&amp;lt;40&gt;GS&amp;lt;49&gt;GS&amp;lt;58&gt;GS&amp;lt;67&gt;GS&amp;lt;76&gt;GS&amp;lt;84&gt;GS&amp;lt;92&gt;GS&amp;lt;100&gt;GS&amp;lt;108&gt;GS&amp;lt;117&gt;GS&amp;lt;125&gt;GS&amp;lt;133&gt;GS&amp;lt;141&gt;GS&amp;lt;149&gt;GS&amp;lt;158&gt;GS&amp;lt;167&gt;GS&amp;lt;176&gt;GS&amp;lt;185&gt;GS&amp;lt;194&gt;GS&amp;lt;203&gt;GS&amp;lt;212&gt;GS&amp;lt;221&gt;GS&amp;lt;230&gt;GS&amp;lt;239&gt;GS&amp;lt;248&gt;GS&amp;lt;257&gt;GS&amp;lt;3&gt;GS&amp;lt;9&gt;GS&amp;lt;18&gt;GS&amp;lt;27&gt;GS&amp;lt;36&gt;GS&amp;lt;45&gt;GS&amp;lt;54&gt;GS&amp;lt;63&gt;GS&amp;lt;72&gt;GS&amp;lt;80&gt;GS&amp;lt;88&gt;GS&amp;lt;96&gt;GS&amp;lt;104&gt;GS&amp;lt;113&gt;GS&amp;lt;122&gt;GS&amp;lt;130&gt;GS&amp;lt;138&gt;GS&amp;lt;146&gt;GS&amp;lt;154&gt;GS&amp;lt;163&gt;GS&amp;lt;172&gt;GS&amp;lt;181&gt;GS&amp;lt;190&gt;GS&amp;lt;199&gt;GS&amp;lt;208&gt;GS&amp;lt;217&gt;GS&amp;lt;226&gt;GS&amp;lt;235&gt;GS&amp;lt;244&gt;GS&amp;lt;253&gt;GS&amp;lt;1&gt;GS&amp;lt;6&gt;GS&amp;lt;15&gt;GS&amp;lt;24&gt;GS&amp;lt;33&gt;GS&amp;lt;42&gt;GS&amp;lt;51&gt;GS&amp;lt;60&gt;GS&amp;lt;69&gt;GS&amp;lt;78&gt;GS&amp;lt;86&gt;GS&amp;lt;94&gt;GS&amp;lt;102&gt;GS&amp;lt;111&gt;GS&amp;lt;120&gt;GS&amp;lt;128&gt;GS&amp;lt;136&gt;GS&amp;lt;144&gt;GS&amp;lt;152&gt;GS&amp;lt;161&gt;GS&amp;lt;170&gt;GS&amp;lt;179&gt;GS&amp;lt;188&gt;GS&amp;lt;197&gt;GS&amp;lt;206&gt;GS&amp;lt;215&gt;GS&amp;lt;224&gt;GS&amp;lt;233&gt;GS&amp;lt;242&gt;GS&amp;lt;251&gt;GS&gt;GS&amp;lt;3&gt;GS&amp;lt;12&gt;GS&amp;lt;21&gt;GS&amp;lt;30&gt;GS&amp;lt;39&gt;GS&amp;lt;48&gt;GS&amp;lt;57&gt;GS&amp;lt;66&gt;GS&amp;lt;74&gt;GS&amp;lt;82&gt;GS&amp;lt;90&gt;GS&amp;lt;98&gt;GS&amp;lt;106&gt;GS&amp;lt;115&gt;GS&amp;lt;124&gt;GS&amp;lt;132&gt;GS&amp;lt;140&gt;GS&amp;lt;148&gt;GS&amp;lt;157&gt;GS&amp;lt;166&gt;GS&amp;lt;175&gt;GS&amp;lt;184&gt;GS&amp;lt;193&gt;GS&amp;lt;202&gt;GS&amp;lt;211&gt;GS&amp;lt;220&gt;GS&amp;lt;229&gt;GS&amp;lt;238&gt;GS&amp;lt;247&gt;GS&amp;lt;255&gt;GS&gt;GS&amp;lt;9&gt;GS&amp;lt;18&gt;GS&amp;lt;27&gt;GS&amp;lt;36&gt;GS&amp;lt;45&gt;GS&amp;lt;54&gt;GS&amp;lt;63&gt;GS&amp;lt;72&gt;GS&amp;lt;81&gt;GS&amp;lt;90&gt;GS&amp;lt;99&gt;GS&amp;lt;108&gt;GS&amp;lt;117&gt;GS&amp;lt;126&gt;GS&amp;lt;135&gt;GS&amp;lt;144&gt;GS&amp;lt;153&gt;GS&amp;lt;162&gt;GS&amp;lt;171&gt;GS&amp;lt;180&gt;GS&amp;lt;189&gt;GS&amp;lt;198&gt;GS&amp;lt;207&gt;GS&amp;lt;216&gt;GS&amp;lt;225&gt;GS&amp;lt;234&gt;GS&amp;lt;243&gt;GS&amp;lt;252&gt;GS&amp;lt;1&gt;GS&amp;lt;6&gt;GS&amp;lt;15&gt;GS&amp;lt;24&gt;GS&amp;lt;33&gt;GS&amp;lt;42&gt;GS&amp;lt;51&gt;GS&amp;lt;60&gt;GS&amp;lt;68&gt;GS&amp;lt;77&gt;GS&amp;lt;86&gt;GS&amp;lt;95&gt;GS&amp;lt;104&gt;GS&amp;lt;113&gt;GS&amp;lt;122&gt;GS&amp;lt;131&gt;GS&amp;lt;140&gt;GS&amp;lt;149&gt;GS&amp;lt;158&gt;GS&amp;lt;167&gt;GS&amp;lt;176&gt;GS&amp;lt;185&gt;GS&amp;lt;194&gt;GS&amp;lt;203&gt;GS&amp;lt;212&gt;GS&amp;lt;221&gt;GS&amp;lt;230&gt;GS&amp;lt;239&gt;GS&amp;lt;248&gt;GS&amp;lt;257&gt;GS&gt;GS&amp;lt;9&gt;GS&amp;lt;18&gt;GS&amp;lt;27&gt;GS&amp;lt;36&gt;GS&amp;lt;45&gt;GS&amp;lt;54&gt;GS&amp;lt;63&gt;GS&amp;lt;72&gt;GS&amp;lt;81&gt;GS&amp;lt;90&gt;GS&amp;lt;99&gt;GS&amp;lt;108&gt;GS&amp;lt;117&gt;GS&amp;lt;126&gt;GS&amp;lt;135&gt;GS&amp;lt;144&gt;GS&amp;lt;153&gt;GS&amp;lt;162&gt;GS&amp;lt;171&gt;GS&amp;lt;180&gt;GS&amp;lt;189&gt;GS&amp;lt;198&gt;GS&amp;lt;207&gt;GS&amp;lt;216&gt;GS&amp;lt;225&gt;GS&amp;lt;234&gt;GS&amp;lt;243&gt;GS&amp;lt;252&gt;GS&gt;GS&amp;lt;3&gt;GS&amp;lt;12&gt;GS&amp;lt;21&gt;GS&amp;lt;30&gt;GS&amp;lt;39&gt;GS&amp;lt;48&gt;GS&amp;lt;57&gt;GS&amp;lt;66&gt;GS&amp;lt;75&gt;GS&amp;lt;84&gt;GS&amp;lt;93&gt;GS&amp;lt;102&gt;GS&amp;lt;111&gt;GS&amp;lt;120&gt;GS&amp;lt;129&gt;GS&amp;lt;138&gt;GS&amp;lt;147&gt;GS&amp;lt;155&gt;GS&amp;lt;164&gt;GS&amp;lt;173&gt;GS&amp;lt;182&gt;GS&amp;lt;191&gt;GS&amp;lt;200&gt;GS&amp;lt;209&gt;GS&amp;lt;218&gt;GS&amp;lt;227&gt;GS&amp;lt;236&gt;GS&amp;lt;245&gt;GS&amp;lt;254&gt;GS&amp;lt;2&gt;GS&amp;lt;7&gt;GS&amp;lt;16&gt;GS&amp;lt;25&gt;GS&amp;lt;33&gt;GS&amp;lt;42&gt;GS&amp;lt;51&gt;GS&amp;lt;60&gt;GS&amp;lt;69&gt;GS&amp;lt;78&gt;GS&amp;lt;87&gt;GS&amp;lt;96&gt;GS&amp;lt;104&gt;GS&amp;lt;113&gt;GS&amp;lt;122&gt;GS&amp;lt;131&gt;GS&amp;lt;140&gt;GS&amp;lt;149&gt;GS&amp;lt;158&gt;GS&amp;lt;167&gt;GS&amp;lt;176&gt;GS&amp;lt;185&gt;GS&amp;lt;194&gt;GS&amp;lt;203&gt;GS&amp;lt;212&gt;GS&amp;lt;221&gt;GS&amp;lt;230&gt;GS&amp;lt;239&gt;GS&amp;lt;248&gt;GS&amp;lt;257&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&gt;GS&amp;lt;2&gt;GS&amp;lt;1&gt;GS&amp;lt;1&gt;GS&amp;lt;2&gt;GS&amp;lt;2&gt;GS&amp;lt;2&gt;GS&amp;lt;1&gt;GS&amp;lt;1&gt;GS&amp;lt;1&gt;GS&gt;GS&gt;GS&gt;GS&amp;lt;2&gt;GS&amp;lt;1&gt;GS&gt;GS&amp;lt;1&gt;GS&gt;GS&gt;GS&amp;lt;1&gt;GS&gt;GS&amp;lt;1&gt;GS&gt;GS&amp;lt;1&gt;GS&amp;lt;2&gt;GS&amp;lt;1&gt;GS&gt;GS&gt;GS&gt;GS&amp;lt;2&gt;GS&gt;GS&amp;lt;1&gt;GS&amp;lt;1&gt;GS&gt;GS&amp;lt;2&gt;GS&gt;GS&gt;GS&gt;GS&amp;lt;1&gt;GS&gt;GS&amp;lt;1&gt;GS&amp;lt;2&gt;GS&gt;GS&gt;GS&amp;lt;1&gt;GS&amp;lt;1&gt;GS&gt;GS&amp;lt;2&gt;GS&amp;lt;1&gt;GS&gt;GS&amp;lt;1&gt;GS&amp;lt;1&gt;GS&gt;GS&gt;GS&amp;lt;2&gt;GS&gt;GS&amp;lt;2&gt;GS&amp;lt;2&gt;GS&gt;GS&amp;lt;1&gt;GS&gt;GS&amp;lt;2&gt;GS&amp;lt;1&gt;GS&gt;GS&gt;GS&amp;lt;2&gt;GS&gt;GS&amp;lt;1&gt;GS&amp;lt;4&gt;GS&amp;lt;2&gt;GS&gt;GS&gt;GS&amp;lt;1&gt;GS&amp;lt;1&gt;GS&amp;lt;1&gt;GS&gt;&gt;&gt;showpage, press &amp;lt;return&gt; to continue&amp;lt;&amp;lt;
GS&gt;GS&gt;GS&gt;GS&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continued indented&quot;&gt;
&lt;code&gt;frag.1&lt;/code&gt; in question, as minimised from &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/voreutils&quot;&gt;voreutils&lt;/a&gt;'  &lt;!--'--&gt;
&lt;a href=&quot;//ra.ws.co.ls/~nabijaczleweli/voreutils/blob/man/man1/cut.1.html&quot;&gt;&lt;code&gt;cut.1&lt;/code&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;.Dd
.Dt CUT 1
.Os
.
.Sh NAME
.Nm cut
.Nd extract bytes, characters, or fields
.Sh SYNOPSIS
.Nm
.Fl f Ar range Ns Oo , Ns Ar range Oc Ns …
.Op Fl Czs
.Op Fl d Ar elimiter
.Op Fl O Ar out-delimiter
.Oo Ar file Oc Ns …
.
.Sh DESCRIPTION
Copies bytes, characters, or fieflds specified by
.Ar range Ns s
from each line of the input
.Ar file Ns s Pq standard input stream if none or Sq Ar -
to the standard output stream.
.Pp
.Ar range Ns s
can be separated by commas or spaces, and each can be in the format:
.Bl -tag -compact -offset Ds -width &quot;from-to&quot;
.It Ar number
.Brq Ar number
.It Ar from Ns Cm -
.Ar [ from , No \[if] )
.It Ar from Ns Cm - Ns Ar to
.Ar [ number , to ]
.It Li &quot;&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;&quot; Cm - Ns Ar to
.Li [ 1 , Ar to ]
.El
Indices are
.Em 1 Ns -based ,
and a union is taken of all
.Ar range Ns s .
.Pp
With
.Fl b ,
bytes are extracted; with
.Fl n
characters are never interrupted mid-sequence, with rounding preferred down
.Pq see Sx EXAMPLES .
.Pp
The newline
.Pq NUL with Fl z
is never matched and always printed
.Pq unless the entire line was removed with Fl fs .
.
.Sh OPTIONS (ŁĄĘĆŻŹŃ łąęćżźń)
.Bl -tag -compact -width &quot;-O, --output-delimiter=out-delim&quot;
.It Fl b , -bytes Ns = Ns Ar range Ns Oo , Ns Ar range Oc Ns …
Extract bytes.
.It Fl n
Don'&lt;!--'--&gt;t interrupt multi-byte character sequences.
.Pp
.It Fl C , -complement
Invert
.Ar range Ns s :
select all
.Em but
what they match
.Pq \&amp;amp;[ Ns Sy 1 , No \[if] ) \- \[*S] Ns Ar range .
.\&quot; TODO?: this should be a Big Union, but, well
For the purposes of
.Fl n ,
the most minimal set of
.Ar range Ns s
is constructed.
.El
.
.Sh EXAMPLES
.Bd -literal -compact
.Li $ Nm printf Li '&lt;!--'--&gt;\ex01\ex02\ex03\ex04\e0\ex05\ex06\ex07'&lt;!--'--&gt; \&amp;amp;| Nm&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;Fl zb Ar 1,3- Li \&amp;amp;| Nm hexdump Fl C
00000000&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;01 03 04 00 05 07 00&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;|.......|
00000007
.Ed
.Pp
.Bd -literal -compact
.Li $ Nm printf Li '&lt;!--'--&gt;яйцо\enЯЙЦО'&lt;!--'--&gt;\f(CB'&lt;!--'--&gt;яйцо\enЯЙЦО'&lt;!--'--&gt;\fP\f(CI'&lt;!--'--&gt;яйцо\enЯЙЦО'&lt;!--'--&gt;\fP\f[CBI]'&lt;!--'--&gt;яйцо\enЯЙЦО'&lt;!--'--&gt;\fP \&amp;amp;| Nm&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;Fl c Ar 1,3-
яцо\fRяцо\fP\fBяцо\fP\fIяцо\fP\f(BIяцо\fP
ЯЦО\fRЯЦО\fP\fBЯЦО\fP\fIЯЦО\fP\f(BIЯЦО\fP
.Ed
.Pp
.Bd -literal -compact
# name, IDs, homedir, shell, ...
.Li $ Nm Fl f Ar 1,3-4,6- Fl d Ns Ar \&amp;amp;: Fl O Ns Li \&amp;amp;&quot;$( Ns Nm printf Li '&lt;!--'--&gt;\et'&lt;!--'--&gt;)&quot; Pa /etc/passwd
root&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;0&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/root&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/bin/bash
bin&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;2&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;2&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/bin&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/sbin/nologin
irc&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;39&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;39&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/var/run/ircd&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/sbin/nologin
cicada&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;1000&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;100&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/home/cicada&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/bin/bash
nobody&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;65534&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;65534&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/nonexistent&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;/usr/sbin/nologin
# Everything else: password and GNATS
.Li $ Nm Fl Cf Ar 1,3-4,6- Fl d Ns Ar \&amp;amp;: Fl O Ns Li \&amp;amp;&quot;$( Ns Nm printf Li '&lt;!--'--&gt;\et'&lt;!--'--&gt;)&quot; Pa /etc/passwd
x&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;root
x&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;bin
x&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;ircd
x&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;ŁĄĘĆŻŹŃ łąęćżźń,,,
x&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;nobody
.Ed
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/007-groff-Tps-cyrillic-et-al.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/006-UNIX-r-ATT.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/006-UNIX-r-ATT.html" />
    <title> 006. ¹UNIX® is a registered trademark of AT&amp;T. — blognꞌt — nabijaczleweli </title>
    <updated>2021-07-08T20:26:38+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;006. ¹UNIX® is a registered trademark of AT&amp;T.&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Thu, 08 Jul 2021 20:26:38 +0200&lt;/span&gt;; &lt;a href=&quot;//store.nabijaczleweli.xyz/001-UNIX-r-ATT.html&quot;&gt;get one&lt;/a&gt; &lt;a href=&quot;//store.nabijaczleweli.xyz/001-UNIX-r-ATT.html&quot;&gt;&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p class=&quot;indented&quot;&gt;
It isn'&lt;!--'--&gt;t, of course – &lt;span class=&quot;smallcaps&quot;&gt;unix&lt;/span&gt; belongs to the Open Group nowadays,
but it wouldn'&lt;!--'--&gt;t be unheard of to have a note like this on the first page of a document in the bad old days,
and the concept of unironically encountering this in the wild in year of the hog 2020 was too hilarious to pass up
as a terrible urge &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1408975129707794434&quot;&gt;came over&lt;/a&gt; me.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Indeed, what better font to celebrate with than with something from the &lt;span class=&quot;smallcaps&quot;&gt;amix&lt;/span&gt; distribution
(this will be a link when I finally publish those).
My first thought was, of course, &lt;samp&gt;sunfont.s&lt;/samp&gt;:
&lt;/p&gt;
&lt;img class=&quot;continuing main-font dark-invert&quot; alt=&quot;'UNIX is a registered trademark of AT&amp;T.' in a tall, proportional, narrow-stroke font with typewriter-like typography and a really goofy ampersand.&quot; src=&quot;/content/assets/blogn_t/006.01-isunfont-tp.png&quot; /&gt;
&lt;p class=&quot;continuation&quot;&gt;
but it'&lt;!--'--&gt;s way too thin, and lacks both &lt;samp&gt;®&lt;/samp&gt; and &lt;samp&gt;¹&lt;/samp&gt;.
The latter could be emulated, of course, but it'&lt;!--'--&gt;d render the already-hardly-legible digit unreadable and the width would just scream off
(and it's a difficult problem to solve in an obviously-correct mechanical fashion; I'm assembling these with ImageMagick in stitch mode on individual 4x glyphs).
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The next obvious direxion to go (rather, the last font before I fell back to trying something with cursed groff invocations) was &lt;samp&gt;topaz.s&lt;/samp&gt;:
&lt;/p&gt;
&lt;img class=&quot;continuing main-font dark-invert&quot; alt=&quot;'UNIX is a registered trademark of AT&amp;T.' in a square, thick-stroke 8x8 font, the g is kinda goofy&quot; src=&quot;/content/assets/blogn_t/006.02-itopaz-tp.png&quot; /&gt;
&lt;p class=&quot;continuing&quot;&gt;
or, rather,
&lt;/p&gt;
&lt;img class=&quot;continuing main-font dark-invert&quot; alt=&quot;'¹UNIX® is a registered trademark of AT&amp;T.' in that same font.&quot; src=&quot;/content/assets/blogn_t/006.03-itopaz-tp+r-sp.png&quot; /&gt;
&lt;p class=&quot;continuation&quot;&gt;
Now, if that ain'&lt;!--'--&gt;t perfect.
&lt;/p&gt;
&lt;img class=&quot;main-screenshot&quot; alt=&quot;Variations of UNIX is a registered trademark of AT&amp;T printed in multiple orientations and fonts on an A4 sheet&quot; src=&quot;/content/assets/blogn_t/006.04-preprints.jpg&quot; /&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The final dimensions are 3.5mm text + 3mm padding, based on 12dpmm,
as that worked out well for the native resolution and the 300-350dpi restrixion from my local print shop,
pictured here with 1px(=1pt) cut line and 3mm padding:
&lt;/p&gt;
&lt;!-- Firefox does not like (any/multilayer/CMYK) TIFFs; yes, it's a JPEG: no other browser format supports CMYK '--&gt;
&lt;img class=&quot;continuing main-font&quot; alt=&quot;'¹UNIX® is a registered trademark of AT&amp;T.' in that same font, white on black, surrounded by green, a single-pixel black line, and another layer of red&quot; src=&quot;/content/assets/blogn_t/006.05-UNIX-tp+r-sp-120dpcm+3mm.jpg&quot; /&gt;
&lt;p class=&quot;continuation&quot;&gt;
Properly-dimensioned print-ready CMYK TIFFs and measurements can be had &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0009-UNIX-r-ATT&quot;&gt;here&lt;/a&gt;. CC BY 4.0.
Works out to 9.5x149.5, which my shop tiled to 40 stickers to SRA3 sheet.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Anyway, glam shots.
&lt;/p&gt;
&lt;img class=&quot;continuing main-screenshot&quot; alt=&quot;A small black anodised aluminium laptop on a light wood floor, a window very softly reflects on the chassis, which has a OneMix logo stickered over with a neon orange BONELESS sticker, and a ¹UNIX® is a registered trademark of AT&amp;T. sticker in the bottom left, crooked, near the hinge&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0009-UNIX-r-ATT/glam/DSC_7479ccc.png&quot; /&gt;
&lt;img class=&quot;continuing main-screenshot&quot; alt=&quot;Same laptop, but on a dark wood floor in direct hard summer sun. The edges of the sticker meld into the texture of the chassis in the highlight, and are lost in the shadow&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0009-UNIX-r-ATT/glam/DSC_7491ccc.png&quot; /&gt;
&lt;img class=&quot;continuation main-screenshot&quot; alt=&quot;Two matt SRA3 sheets in the same spot, one on top of the other, at a slight angle, with ¹UNIX® is a registered trademark of AT&amp;T. stickers tiled on them. The left is entirely opaque, but shows a tiny bit through the right.&quot; src=&quot;https://lfs.nabijaczleweli.xyz/0009-UNIX-r-ATT/glam/DSC_7497ccc.png&quot; /&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/006-UNIX-r-ATT.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/005a-zfs-on-root-single-disk-corollary.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/005a-zfs-on-root-single-disk-corollary.html" />
    <title> 005a. A single-disk but slightly more cursed ZFS-on-root corollary — blognꞌt — nabijaczleweli </title>
    <updated>2020-11-05T22:06:30+01:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;005a. A single-disk but slightly more cursed ZFS-on-root corollary&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Thu, 05 Nov 2020 22:06:30 +0100&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#installation'&gt;Installation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#layout'&gt;Physical layout&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#cleanup'&gt;Clean-up&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Fujitsu's employed me, which means I'm empowered to make &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1321625051771375616&quot;&gt;bad financial decisions&lt;/a&gt;
at a larger scale than previous — in this case, a &lt;a href=&quot;//droix.net/products/one-netbook-mix-3-pro-ultrabook&quot;&gt;OneMix 3 Pro&lt;/a&gt;,
which has only one disk in it, but I'&lt;!--'--&gt;d still prefer to zoot it in less than twenty hours over USB or whatever.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Thankfully, I'&lt;!--'--&gt;ve finally figured out how
&lt;samp&gt;&lt;a href=&quot;//manpages.debian.org/bullseye/zfsutils-linux/zpool.8.en.html&quot;&gt;zpool(8)&lt;/a&gt; import -e&lt;/samp&gt;/&lt;samp&gt;autoexpand=on&lt;/samp&gt; works.
This is not for lack of trying – indeed, this is not my first or third attempt, but, well,
the manpage &lt;a href=&quot;//github.com/openzfs/zfs/blob/a4246bce5024df202e7c41a682c3f74555777197/man/man8/zpoolprops.8#L54&quot;&gt;said&lt;/a&gt;
&lt;/p&gt;
&lt;!-- embedding instead of formatting a hlpp here because language-markdown leaves the `**`s --&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;expandsize:
  Amount of uninitialized space within the pool or device
  that can be used to increase the total capacity of the pool.
  Uninitialized space consists of any space on an EFI labeled vdev
  which has not been brought online (e.g, using &lt;strong&gt;zpool online -e&lt;/strong&gt;).
  This space occurs when a LUN is dynamically expanded.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
Which, frankly, makes no fucking sense, especially, since that invocation didn'&lt;!--'--&gt;t claim unpartitioned space inside the GPT.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
However, what it did do was handle expanding entire drives (i.e. ones with space &lt;em&gt;beyond&lt;/em&gt; the GPT), as well as manually grown partitions.
And so, I'&lt;!--'--&gt;ve &lt;a href=&quot;//github.com/openzfs/zfs/pull/11158&quot;&gt;updated&lt;/a&gt; the manpage, which should land in 2.0.0-rc6 to some semblance of sense:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;&lt;pre class=&quot;language-markdown&quot;&gt;&lt;code class=&quot;language-markdown&quot;&gt;expandsize:
  Amount of uninitialized space within the pool or device
  that can be used to increase the total capacity of the pool.
  On whole-disk vdevs, this is the space beyond the end of the GPT –
  typically occurring when a LUN is dynamically expanded
  or a disk replaced with a larger one.
  On partition vdevs, this is the space appended to the partition
  after it was added to the pool – most likely by resizing it in-place.
  The space can be claimed for the pool by bringing it online
  with &lt;strong&gt;autoexpand=on&lt;/strong&gt; or using &lt;strong&gt;zpool online -e&lt;/strong&gt;.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
That doesn't mean I'm quite sure what a LUN is, but it gets the point across much better.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This doesn'&lt;!--'--&gt;t change much during
&lt;/p&gt;
&lt;h2 id=&quot;installation&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installation&quot;&gt;#&lt;/a&gt; Installation&lt;/h2&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Except that the initial destination filesystem must go at the &lt;em&gt;end&lt;/em&gt; of the free space, leaving a hole big enough to fit the initial pool at the beginning.
&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;/content/assets/blogn_t/005a.01-i-t-partitioning.png&quot;&gt;
 &lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;initramfs-tools partitioning screen showing an 8GB disk with a 250MB EFI System Partiition marked 'zoot-EFI', then 6GB of empty space, then 2GB ext4 filesystem for the root FS, marked 'zoot-root'&quot;
      src=&quot;/content/assets/blogn_t/005a.01-i-t-partitioning.png&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;indented continued&quot;&gt;
What does change significantly, though, is the
&lt;/p&gt;
&lt;h2 id=&quot;layout&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#layout&quot;&gt;#&lt;/a&gt; Physical layout&lt;/h2&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Since currently there'&lt;!--'--&gt;s no partition for the pool to occupy:
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;fdisk&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-l&lt;/span&gt; /dev/sda&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Disk /dev/sda: 8 GiB, 8589934592 bytes, 16777216 sectors
Units: sectors of 1 * 512 = 512 bytes
Disk identifier: 7CA96D41-9F58-41BB-8867-BC2FF8A7CBCC

Device&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;Start&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;End Sectors&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Size Type
/dev/sda1&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;2048&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;487423&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;485376&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;237M EFI System
/dev/sda2&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;9940992 16775167 6834176&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;3.3G Linux filesystem
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
I'&lt;!--'--&gt;m using &lt;code&gt;&lt;a href=&quot;//manpages.debian.org/bullseye/fdisk/fdisk.8.en.html&quot;&gt;fdisk(8)&lt;/a&gt;&lt;/code&gt;
(mainly because I'&lt;!--'--&gt;m too small-brain for &lt;code&gt;&lt;a href=&quot;//manpages.debian.org/bullseye/parted/parted.8.en.html&quot;&gt;parted(8)&lt;/a&gt;&lt;/code&gt;),
other home nations are available.
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;fdisk&lt;/span&gt; /dev/sda&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Welcome to fdisk (util-linux 2.36).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Command (m for help): n
Partition number (3-128, default 3):
First sector (487424-16777182, default 487424):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (487424-9940991, default 9940991):
Created a new partition 3 of type '&lt;!--'--&gt;Linux filesystem'&lt;!--'--&gt; and of size 4.5 GiB.

Command (m for help): x

Expert command (m for help): n
Partition number (1-3, default 3):
New name: zoot-zoot
Partition name changed from '&lt;!--'--&gt;'&lt;!--'--&gt; to '&lt;!--'--&gt;zoot-zoot'&lt;!--'--&gt;.

Expert command (m for help): f
Partitions order fixed.

Expert command (m for help): r

Command (m for help): t
Partition number (1-3, default 3):
Partition type or alias (type L to list all): 24
Changed type of partition '&lt;!--'--&gt;Linux filesystem'&lt;!--'--&gt; to '&lt;!--'--&gt;Linux root (x86-64)'&lt;!--'--&gt;.

Command (m for help): w
The partition table has been altered.
Failed to remove partition 2 from system: Device or resource busy
Failed to add partition 2 to system: Device or resource busy
Failed to add partition 3 to system: Device or resource busy
The kernel still uses the old partitions. The new table will be used at the next reboot.
Syncing disks.

Command (m for help): w
The partition table has been altered.
Syncing disks.
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
Of note:
&lt;/p&gt;
&lt;ol class=&quot;continuation&quot;&gt;
 &lt;li&gt;if reordering, a reboot is required afterward, as indicated by the kernel using old partition tables, because&lt;/li&gt;
 &lt;li&gt;using &lt;code&gt;PARTLABEL=&lt;/code&gt; or &quot;Partition name&quot; is the hardest to fuck up way to spec a partition vdev.&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;continued&quot;&gt;
The table is as follows for now:
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;fdisk&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-x&lt;/span&gt; /dev/sda&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Disk /dev/sda: 8 GiB, 8589934592 bytes, 16777216 sectors
Units: sectors of 1 * 512 = 512 bytes
Disk identifier: 7CA96D41-9F58-41BB-8867-BC2FF8A7CBCC

Device&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;Start&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;End Sectors Type&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;Name&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;Attrs
/dev/sda1&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;2048&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;487423&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;485376 EFI System&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;zoot-EFI
/dev/sda2&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;487424&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;9940991 9453568 Linux root (x86-64) zoot-zoot
/dev/sda3&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;9940992 16775167 6834176 Linux filesystem&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;zoot-root
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
This means, that the creation command turns into
&lt;/p&gt;
&lt;pre class=&quot;continuation indented roboto-unscale&quot;&gt;zpool create -O mountpoint=/ -O canmount=off -R /mnt zoot zoot-zoot&lt;/pre&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Besides this, everything continues as previous until rebooted with ZFS as rootfs, when it'&lt;!--'--&gt;s time for
&lt;/p&gt;
&lt;h2 id=&quot;cleanup&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#cleanup&quot;&gt;#&lt;/a&gt; Clean-up&lt;/h2&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Which consists of removing the partition with the previous rootfs and expanding the one with the vdev, being sure to not wipe it:
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;fdisk&lt;/span&gt; /dev/sda&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Welcome to fdisk (util-linux 2.36).
Changes will remain in memory only, until you decide to write them.
Be careful before using the write command.

Command (m for help): d
Partition number (1-3, default 3):
Partition 3 has been deleted.

Command (m for help): d
Partition number (1,2, default 2):
Partition 2 has been deleted.

Command (m for help): n
Partition number (2-128, default 2):
First sector (487424-16777182, default 487424):
Last sector, +/-sectors or +/-size{K,M,G,T,P} (487424-16777182, default 16777182):
Created a new partition 2 of type '&lt;!--'--&gt;Linux filesystem'&lt;!--'--&gt; and of size 7.8 GiB.

Partition #2 contains a zfs_member signature.
Do you want to remove the signature? [Y]es/[N]o: n

Command (m for help): x

Expert command (m for help): n
Partition number (1,2, default 2):
New name: zoot-zoot
Partition name changed from '&lt;!--'--&gt;'&lt;!--'--&gt; to '&lt;!--'--&gt;zoot-zoot'&lt;!--'--&gt;.

Expert command (m for help): r

Command (m for help): t
Partition number (1,2, default 2):
Partition type or alias (type L to list all): 24
Changed type of partition '&lt;!--'--&gt;Linux filesystem'&lt;!--'--&gt; to '&lt;!--'--&gt;Linux root (x86-64)'&lt;!--'--&gt;.

Command (m for help): w
The partition table has been altered.
Syncing disks.
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Which yields a vdev partition the size of the rest of the disk, but ZFS will not recognise it until after a reboot:
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;fdisk&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-l&lt;/span&gt; /dev/sda&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Disk /dev/sda: 8 GiB, 8589934592 bytes, 16777216 sectors
Units: sectors of 1 * 512 = 512 bytes
Disk identifier: 7CA96D41-9F58-41BB-8867-BC2FF8A7CBCC

Device&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;Start&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;End&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Sectors&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Size Type
/dev/sda1&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;2048&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;487423&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;485376&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;237M EFI System
/dev/sda2&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;487424 16777182 16289759&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;7.8G Linux root (x86-64)

&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;zpool list&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;NAME&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;SIZE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ALLOC&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;FREE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;CKPOINT&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;EXPANDSZ&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;FRAG&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;CAP&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;DEDUP&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;HEALTH&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ALTROOT
zoot&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;4.50G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.20G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;3.30G&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;3%&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;26%&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.00x&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;ONLINE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;-
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
But after one, the rest of the partition is recognised and can be claimed:
&lt;/p&gt;
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;zpool list&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;NAME&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;SIZE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ALLOC&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;FREE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;CKPOINT&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;EXPANDSZ&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;FRAG&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;CAP&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;DEDUP&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;HEALTH&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ALTROOT
zoot&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;4.50G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.20G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;3.30G&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;3G&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;3%&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;26%&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.00x&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;ONLINE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;-
&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;zpool online &lt;span class=&quot;token parameter variable&quot;&gt;-e&lt;/span&gt; zoot zoot-zoot&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;root@zoot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;#&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;zpool list&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;NAME&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;SIZE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ALLOC&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;FREE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;CKPOINT&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;EXPANDSZ&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;FRAG&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;CAP&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;DEDUP&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;HEALTH&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;ALTROOT
zoot&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;7.50G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.20G&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;6.30G&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;2%&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;15%&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;1.00x&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;ONLINE&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;-
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/005a-zfs-on-root-single-disk-corollary.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/004-cinque.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/004-cinque.html" />
    <title> 004. New album: cinque — blognꞌt — nabijaczleweli </title>
    <updated>2020-07-18T22:14:33+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;004. New album: cinque&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Sat, 18 Jul 2020 22:14:33 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p class=&quot;indented&quot;&gt;
At &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1284582399838478339&quot;&gt;10:14 pm · 18 Jul 2020&lt;/a&gt; I released my third album: &lt;samp&gt;cinque&lt;/samp&gt;!
&lt;/p&gt;
&lt;a href=&quot;//nabijaczleweli.bandcamp.com/album/cinque&quot;&gt;&lt;img src=&quot;//lfs.nabijaczleweli.xyz/0004-cinque/hill-all+2160x.png&quot; alt=&quot;cinque album art&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;indented&quot;&gt;
Go get it on &lt;a href=&quot;//nabijaczleweli.bandcamp.com/album/cinque&quot;&gt;Bandcamp&lt;/a&gt;!&lt;br /&gt;
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
You can find assorted extras (full-sized track and album art, programs to make them) &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0004-cinque&quot;&gt;here&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/004-cinque.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/003-maircl-poc.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/003-maircl-poc.html" />
    <title> 003. A proof-of-concept IRC/mail bridge — blognꞌt — nabijaczleweli </title>
    <updated>2020-07-11T00:34:50+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;003. A proof-of-concept IRC/mail bridge&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Sat, 11 Jul 2020 00:34:50 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#what'&gt;What?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#why'&gt;Why‽&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#how'&gt;How?&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#how-irc'&gt;The IRC&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#how-mbox'&gt;The mbox&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#how-postfix'&gt;The MX&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#conclusion'&gt;Conclusion?&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
As seen on &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1281342937226510342&quot;&gt;Twitter&lt;/a&gt;.
&lt;h2 id=&quot;what&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#what&quot;&gt;#&lt;/a&gt; What?&lt;/h2&gt;
&lt;p class=&quot;indented&quot;&gt;
A video'&lt;!--'--&gt;s worth a few interrobangs, so:
&lt;video src=&quot;/content/assets/blogn_t/003.01-2020-07-10_01-42-57.mp4&quot;
      poster=&quot;/content/assets/blogn_t/003.02-2020-07-10_01-42-57.mp4_snapshot_00.04_[2020.07.10_15.53.59].png&quot; alt=&quot;Demo video&quot; controls preload&gt;&lt;/video&gt;
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;
Herein we can see:
&lt;/p&gt;
&lt;ul class=&quot;continuation&quot;&gt;
  &lt;li&gt;In the back: freenode'&lt;!--'--&gt;s web client, with username &quot;hasix&quot;, focused on the DM to &quot;nabijaczleweli&quot;,&lt;/li&gt;
  &lt;li&gt;At the center: neomutt open on &lt;code&gt;~/uwu/mbox&lt;/code&gt;,&lt;/li&gt;
  &lt;li&gt;Near the top-right: output of &lt;code&gt;journalctl -fu postfix@-&lt;/code&gt;,&lt;/li&gt;
  &lt;li&gt;Toward the bottom-right: a tee of mails going into &lt;code&gt;~/uwu/mbox&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;continued&quot;&gt;
The play-by-play:
&lt;/p&gt;
&lt;ul class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;code&gt;0:05&lt;/code&gt;: mail is composed to &quot;hasix@irc.&quot; with subject &quot;hewwo&quot;,&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;0:15&lt;/code&gt;: mail is sent, with activity in the journal window and one new mail showing up both in neomutt and the mail tee window (from &quot;hasix@irc.&quot;, subject &quot;&amp;lt;nabijaczleweli&amp;gt; hewwo&quot;), the message shows up in the web client to a click sound,&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;0:23&lt;/code&gt;: message &quot;стинкы&quot; is sent from the web client,&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;0:25&lt;/code&gt;: the tee window comes back into view, it lists a new mail (from &quot;nabijaczleweli@irc.&quot;, subject &quot;&amp;lt;hasix&amp;gt; стинкы&quot;),&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;0:28&lt;/code&gt;: neomutt index is scrolled, revealing the new mail,&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;0:48&lt;/code&gt;: mail is composed to &quot;hasix@irc&quot; with subject &quot;thank you very cool :)&quot;,&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;1:01&lt;/code&gt;: mail is sent, with activity in the journal window and one new mail showing up both in neomutt and the mail tee window (from &quot;hasix@irc.&quot;, subject &quot;&amp;lt;nabijaczleweli&amp;gt; thank you very cool :)&quot;), the message shows up in the web client to a click sound,&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;1:05&lt;/code&gt;: a tired voice proclaims &quot;oh, I hate this!&quot;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;why&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#why&quot;&gt;#&lt;/a&gt; Why‽&lt;/h2&gt;
&lt;p class=&quot;indented&quot;&gt;
Intrusive thought when I noticed that messages from whitenotifier hit &lt;a href=&quot;//freenode.irclog.whitequark.org/solvespace/2020-07-09&quot;&gt;#solvespace&lt;/a&gt;
  slightly sooner than my e-mail notifications.
The gin helped.
&lt;/p&gt;
&lt;h2 id=&quot;how&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#how&quot;&gt;#&lt;/a&gt; How?&lt;/h2&gt;
&lt;p class=&quot;continued&quot;&gt;
Apart from blatant disregard for common decency:
&lt;/p&gt;
&lt;ul class=&quot;continuation&quot;&gt;
  &lt;li&gt;&lt;code&gt;1&lt;/code&gt; postfix smarthost&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;1&lt;/code&gt; &lt;a href=&quot;//tools.suckless.org/sic&quot;&gt;sic(1)&lt;/a&gt; process&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;1&lt;/code&gt; MUA that handles a continuously-updating mbox gracefully&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;2&lt;/code&gt; FIFOs&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;11&lt;/code&gt; lines of AWK to &quot;deliver&quot; messages from sic to a mbox&lt;/li&gt;
  &lt;li&gt;&lt;code&gt;10&lt;/code&gt; lines of AWK to deliver messages from postfix to sic&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;how-irc&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#how-irc&quot;&gt;#&lt;/a&gt; The IRC&lt;/h3&gt;
&lt;p class=&quot;continued&quot;&gt;
Start with a simple connection:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token output&quot;&gt;mkfifo input output
sic -h irc.freenode.net &amp;lt; input &gt; output &amp;amp;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented&quot;&gt;
Now &lt;kbd&gt;cat &amp;lt; output &amp;&lt;/kbd&gt; to see what'&lt;!--'--&gt;s up and &lt;kbd&gt;cat &amp;gt;&amp;gt; input&lt;/kbd&gt; to open the connection, something like
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;verne.freenode.net: 07/10/20 16:05 &gt;&amp;lt; 372 (nabijaczleweli): -
verne.freenode.net: 07/10/20 16:05 &gt;&amp;lt; 372 (nabijaczleweli): - Thank you for using freenode!
verne.freenode.net: 07/10/20 16:05 &gt;&amp;lt; 376 (nabijaczleweli): End of /MOTD command.
nabijaczleweli: 07/10/20 16:05 &gt;&amp;lt; MODE (nabijaczleweli): +i
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
should appear, and typing &quot;&lt;kbd&gt;:m hasix owo&lt;/kbd&gt;&quot; should produce a message in the web client and:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
  &lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;hasix&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;: 07/10/20 16:07 &amp;lt;nabijaczleweli&amp;gt; owo&lt;/pre&gt;&lt;/code&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
a message that comes back should show up as well:
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
  &lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;nabijaczleweli: 07/10/20 16:09 &amp;lt;hasix&amp;gt; :)&lt;/pre&gt;&lt;/code&gt;
&lt;/div&gt;
&lt;h3 id=&quot;how-mbox&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#how-mbox&quot;&gt;#&lt;/a&gt; The mbox&lt;/h3&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Great. Suspend the input &lt;code&gt;cat&lt;/code&gt; (killing it will slam &lt;code&gt;sic&lt;/code&gt;'&lt;!--'--&gt;s pipe and kill it) and kill the output &lt;code&gt;cat&lt;/code&gt;,
  replacing it with a (GNU) AWK process running this
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-awk&quot;&gt;&lt;code class=&quot;language-awk&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# /(?&amp;lt;poster&gt;[^:]+): (?&amp;lt;month&gt;[[:digit:]]{2})\/(?&amp;lt;day&gt;[[:digit:]]{2})\/(?&amp;lt;year&gt;[[:digit:]]{2}) (?&amp;lt;hour&gt;[[:digit:]]{2}):(?&amp;lt;monute&gt;[[:digit:]]{2}) &amp;lt;(?&amp;lt;channel&gt;[^&gt;]+)&gt; (?&amp;lt;message&gt;.+)/ {&lt;/span&gt;
&lt;span class=&quot;token regex&quot;&gt;/([^:]+): [[:digit:]]{2}\/[[:digit:]]{2}\/[[:digit:]]{2} [[:digit:]]{2}:[[:digit:]]{2} &amp;lt;([^&gt;]+)&gt; (.+)/&lt;/span&gt; {
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;poster = &lt;span class=&quot;token builtin&quot;&gt;gensub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/([^:]+): [[:digit:]]{2}\/[[:digit:]]{2}\/[[:digit:]]{2} [[:digit:]]{2}:[[:digit:]]{2} &amp;lt;([^&gt;]+)&gt; (.+)/&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;\\1&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;g&quot;&lt;/span&gt;)
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;channel = &lt;span class=&quot;token builtin&quot;&gt;gensub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/([^:]+): [[:digit:]]{2}\/[[:digit:]]{2}\/[[:digit:]]{2} [[:digit:]]{2}:[[:digit:]]{2} &amp;lt;([^&gt;]+)&gt; (.+)/&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;\\2&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;g&quot;&lt;/span&gt;)
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;message = &lt;span class=&quot;token builtin&quot;&gt;gensub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/([^:]+): [[:digit:]]{2}\/[[:digit:]]{2}\/[[:digit:]]{2} [[:digit:]]{2}:[[:digit:]]{2} &amp;lt;([^&gt;]+)&gt; (.+)/&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;\\3&quot;&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;g&quot;&lt;/span&gt;)
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;From &quot;&lt;/span&gt; poster &lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;strftime&lt;/span&gt;(&lt;span class=&quot;token string&quot;&gt;&quot;%a %b %e %H:%M:%S %Y&quot;&lt;/span&gt;)
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;From: &quot;&lt;/span&gt; poster &lt;span class=&quot;token string&quot;&gt;&quot;@irc.&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Date: &quot;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;strftime&lt;/span&gt;(&lt;span class=&quot;token string&quot;&gt;&quot;%a, %d %b %Y %T %z&quot;&lt;/span&gt;)
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Subject: &amp;lt;&quot;&lt;/span&gt; channel &lt;span class=&quot;token string&quot;&gt;&quot;&gt; &quot;&lt;/span&gt; message
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;fflush&lt;/span&gt;()
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
i.e.
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
  &lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;gawk &lt;span class=&quot;token string&quot;&gt;'&amp;lt;&amp;lt;that&amp;gt;&amp;gt;'&lt;/span&gt; output | tee -a mbox &amp;&lt;/pre&gt;&lt;/code&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Now if a message arrives (from the web client) or is sent (&quot;:m hasix msg&quot;), it should show up with
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;From nabijaczleweli Fri Jul 10 16:17:13 2020
From: nabijaczleweli@irc.
Date: Fri, 10 Jul 2020 16:17:13 +0200
Subject: &amp;lt;hasix&gt; owo

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
both in the teletype and the mailbox. At this point pointing the MUA at it should work and the messages should show up:
&lt;/p&gt;
&lt;img class=&quot;continuing&quot; src=&quot;/content/assets/blogn_t/003.03-should_show_up.png&quot;
     alt=&quot;neomutt window showing two messages, one from nabijaczleweli@irc. with subject '&lt;hasix&gt; owo'; second from hasix@irc. with subject '&lt;nabijaczleweli&gt; owo'&quot; /&gt;
&lt;p class=&quot;continuation&quot;&gt;
If they don'&lt;!--'--&gt;t, see if the messages are flushed, or if the MUA handles this in general.
&lt;/p&gt;
&lt;h3 id=&quot;how-postfix&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#how-postfix&quot;&gt;#&lt;/a&gt; The MX&lt;/h3&gt;
&lt;p class=&quot;continued&quot;&gt;
Now it'&lt;!--'--&gt;s time to convince postfix to do a big crime, by:
&lt;/p&gt;
&lt;ul class=&quot;continuation&quot;&gt;
  &lt;li&gt;adding &quot;irc&quot; to &lt;code&gt;mydestination&lt;/code&gt; in &lt;code&gt;/etc/postfix/main.cf&lt;/code&gt; and ensuring &lt;code&gt;transport_maps = hash:/etc/postfix/transport&lt;/code&gt; therein,&lt;/li&gt;
  &lt;li&gt;appending &quot;irc  irc:&quot; to &lt;code&gt;/etc/postfix/transport&lt;/code&gt; (and running &lt;code&gt;postmap&lt;/code&gt; on it),
      which will make messages to &lt;kbd&gt;@irc.&lt;/kbd&gt; use the &lt;kbd&gt;irc:&lt;/kbd&gt; protocol,&lt;/li&gt;
  &lt;li&gt;appending what follows to &lt;code&gt;/etc/postfix/master.cf&lt;/code&gt; (I stole this from the internet,
      &lt;a href=&quot;//manpages.debian.org/buster/postfix/pipe.8postfix.en.html&quot;&gt;pipe(8postfix)&lt;/a&gt; or
      &lt;a href=&quot;//manpages.debian.org/buster/postfix/master.5.en.html&quot;&gt; master(5)&lt;/a&gt; will probably be very insightful):
      &lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# service type&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;private unpriv&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;chroot&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;wakeup&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;maxproc command + args&lt;/span&gt;
irc&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;unix&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;n&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;n&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;-&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;pipe
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token assign-left variable&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;nabijaczleweli &lt;span class=&quot;token assign-left variable&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;/home/nabijaczleweli/uwu/ircmail
&lt;/code&gt;&lt;/pre&gt;
 &lt;/div&gt;
      &lt;/li&gt;
  &lt;li&gt;reloading postfix.&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;code&gt;ircmail&lt;/code&gt; should be executable and something like this
  (note that the From: parsing is entirely superfluous, but might be useful for scaling this to multi-user):
&lt;/p&gt;
&lt;div class=&quot;bigcode continuation&quot;&gt;
&lt;pre class=&quot;language-awk&quot;&gt;&lt;code class=&quot;language-awk&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;#!/bin/gawk -f&lt;/span&gt;
&lt;span class=&quot;token regex&quot;&gt;/^From: ([^ ]+)( .+)?/&lt;/span&gt; {
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &gt;&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/home/nabijaczleweli/uwu/ircmaillog&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;from = &lt;span class=&quot;token builtin&quot;&gt;gensub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/^From: ([^ ]+)( .+)?/&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;\\1&quot;&lt;/span&gt;, 1)
}
&lt;span class=&quot;token regex&quot;&gt;/^To: ([^@]+)(@.+)?/&lt;/span&gt; {
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &gt;&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/home/nabijaczleweli/uwu/ircmaillog&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;to = &lt;span class=&quot;token builtin&quot;&gt;gensub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/^To: ([^@]+)(@.+)?/&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;\\1&quot;&lt;/span&gt;, 1)
}
&lt;span class=&quot;token regex&quot;&gt;/^Subject: /&lt;/span&gt; {
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &gt;&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/home/nabijaczleweli/uwu/ircmaillog&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;:m &quot;&lt;/span&gt; to &lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;gensub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/^Subject: /&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;, 1) &gt;&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/home/nabijaczleweli/uwu/ircmaillog&quot;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token builtin&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;:m &quot;&lt;/span&gt; to &lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;gensub&lt;/span&gt;(&lt;span class=&quot;token regex&quot;&gt;/^Subject: /&lt;/span&gt;, &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;, 1) &gt;&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/home/nabijaczleweli/uwu/input&quot;&lt;/span&gt;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Now, sending a mail to &quot;hasix@irc&quot;, &quot;##test@irc&quot;, &amp;c. should yield something like
&lt;/p&gt;
&lt;div class=&quot;bigcode continuing&quot;&gt;
&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;Jul 10 14:43:11 tarta postfix/submission/smtpd[32260]: connect from unknown[192.168.1.250]
Jul 10 14:43:12 tarta postfix/submission/smtpd[32260]: E291B360636: client=unknown[192.168.1.250], sasl_method=PLAIN, sasl_username=nabijaczleweli
Jul 10 14:43:12 tarta postfix/cleanup[32270]: E291B360636: message-id=&amp;lt;20200710124311.m26cki7rgslw6deg@tarta.local.nabijaczleweli.xyz&gt;
Jul 10 14:43:12 tarta postfix/qmgr[32125]: E291B360636: from=&amp;lt;nabijaczleweli@nabijaczleweli.xyz&gt;, size=596, nrcpt=1 (queue active)
Jul 10 14:43:12 tarta postfix/submission/smtpd[32260]: disconnect from unknown[192.168.1.250] ehlo=2 starttls=1 auth=1 mail=1 rcpt=1 data=1 quit=1 commands=8
Jul 10 14:43:13 tarta postfix/pipe[32271]: E291B360636: to=&amp;lt;nabijaczleweli@irc&gt;, orig_to=&amp;lt;nabijaczleweli@irc.&gt;, relay=irc, delay=0.09, delays=0.07/0.01/0/0, dsn=2.0.0, status=sent (delivered via irc service)
Jul 10 14:43:13 tarta postfix/qmgr[32125]: E291B360636: removed
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
in the journal, and the corresponding commands in sic'&lt;!--'--&gt;s input.
&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#conclusion&quot;&gt;#&lt;/a&gt; Conclusion?&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Despite this technically making an open IRC relay, since anyone can connect on port 25 with &lt;code&gt;RCPT TO:&amp;lt;whomever@irc&amp;gt;&lt;/code&gt;,
  this is perfect and I wholeheartedly recommend it for when your workflow includes a MUA but not IRC!
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
I am, as ever, morbidly curious so as to scaling this to a multi-user/auto-join solution, but, well, even I have my limits.
Okay, I don't, but I don't really have much of a reason to Be On™ IRC. Watch me eat my words in, like, a year, I guess?
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/003-maircl-poc.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/002-ncurses-gpm-segfault.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/002-ncurses-gpm-segfault.html" />
    <title> 002. An overlong analysis of ^Z+fg crashing ncurses programs for gpm users — blognꞌt — nabijaczleweli </title>
    <updated>2020-05-25T00:12:30+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;002. An overlong analysis of ^Z+fg crashing ncurses programs for gpm users&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Mon, 25 May 2020 00:12:30 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The post I made for &lt;a href=&quot;//bugs.debian.org/961097#35&quot;&gt;#961097&lt;/a&gt;,
 which went through three packages (
&lt;/p&gt;
&lt;ol class=&quot;continuing&quot;&gt;
 &lt;li&gt;htop: segfaults after ^Z+fg on x32&lt;/li&gt;
 &lt;li&gt;gpm: SIGTSTP handler segfaults programs&lt;/li&gt;
 &lt;li&gt;libncurses6: unloads libgpm2 in SIGTSTP handler, process returns to unmapped address on resume&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;continuing&quot;&gt;
 ) is roughly the length of a blog post and something I would read as a blog post, so it may be interesting to other viewers as well.
&lt;p class=&quot;indented continuation&quot;&gt;
Plus, it took me an entire day to write and the better part of a week to hunt down (by god it'&lt;!--'--&gt;s bigger than either of the screenshots),
 so it definitely qualifies.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
You can read it on &lt;a href=&quot;//bugs.debian.org/961097#35&quot;&gt;debbugs&lt;/a&gt;, since reproducing plaintext with boxes in HTML is a massive pain
 (plus there'&lt;!--'--&gt;s context there).
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
You may also be interested in the corresponding &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1263652757803724800&quot;&gt;twitter thread&lt;/a&gt;.
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/002-ncurses-gpm-segfault.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/001-x32-in-2020.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/001-x32-in-2020.html" />
    <title> 001. Installing Debianꞌs x32 port in 2020 — blognꞌt — nabijaczleweli </title>
    <updated>2020-04-28T02:54:07+02:00</updated>
    <published>2020-04-09T01:44:47+02:00</published>
    <content type="html">
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;001. Installing Debian'&lt;!--'--&gt;s x32 port in 2020&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Thu, 9 Apr 2020 01:44:47 +0200&lt;/span&gt;, last updated &lt;span style=&quot;white-space: nowrap&quot;&gt;Tue, 28 Apr 2020 02:54:07 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#requirements'&gt;What you'&lt;!--'--&gt;ll need&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#target_requirements'&gt;What you'&lt;!--'--&gt;ll want&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#building'&gt;Assembling the system&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Some time ago I bought an &lt;a href=&quot;//support.hp.com/us-en/product/hp-rp5700-desktop-pc/4257406/model/4257455&quot;&gt;HP rp5700&lt;/a&gt; &lt;del&gt;Piece of Shit&lt;/del&gt; Point of Sale system
  with a 2.13GHz Core 2 Duo E6400, fascinating OEM assembly, and FreeDOS, fourth-hand –
 follow &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1204465652628672512&quot;&gt;this Twitter thread&lt;/a&gt; to experience this machine as its story'&lt;!--'--&gt;d unravelled.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Some time later, I decided to make a router out of it, and, having heard of &lt;code&gt;x32&lt;/code&gt; – 32-bit ABI/userland, with a long-mode kernel/CPU –
 some time prior, that had become the architecture of choice.
&lt;code&gt;x32&lt;/code&gt;'s proponents tout increased performance compared to &lt;code&gt;amd64&lt;/code&gt;, but I couldn't care less;
 if you're looking for performance comparisons, this ain't it, I did this entirely because it was weird and rife with funny corner cases.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The Debian wiki &lt;a href=&quot;//wiki.debian.org/X32Port&quot;&gt;X32Port&lt;/a&gt; page dates back to around when &lt;code&gt;x32&lt;/code&gt; was introduced in 2012 with such beautiful excerpts as:
&lt;/p&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;
The second [system] is the QEMU/Chroot guest, and it &lt;em&gt;must&lt;/em&gt; run Debian 8/Jessie Unstable.
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
Which, while amusing, isn'&lt;!--'--&gt;t very conducive to getting an &lt;code&gt;x32&lt;/code&gt; system up, nor are the outdated-at-best instructions.
So this is the combination of the things I'&lt;!--'--&gt;ve read and tried in order to install Debian &quot;bullseye/sid&quot; &lt;code&gt;x32&lt;/code&gt; &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1245500423370309632&quot;&gt;on &lt;samp style=&quot;white-space: nowrap;&quot;&gt;Wed Apr &amp;nbsp;1 22:02:50 UTC 2020&lt;samp&gt;&lt;/a&gt; (it was already &lt;samp&gt;0:02:50&lt;/samp&gt; the next day in my timezone but I forgot to set it; oh well):
&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1245500423370309632&quot;&gt;
 &lt;!-- DSCN0443.JPG --&gt;
 &lt;!-- This used to be &quot;//pbs.twimg.com/media/EUjn9pPWsAAsTVT.jpg:large&quot;, but that link only worked if you were logged into twitter, somehow --&gt;
 &lt;!-- https://lfs.nabijaczleweli.xyz/0017-twitter-export/parser-output/media/1245500423370309632-EUjn9pPWsAAsTVT.jpg --&gt;
 &lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;Login screen showing the aforementioned date and dpkg --print-architecture returning x32&quot;
      src=&quot;/content/assets/blogn_t/001.01-success.jpg&quot; /&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p class=&quot;continuation&quot;&gt;&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;code&gt;debian-installer&lt;/code&gt; existing for x32 would have solved most (all) of the problems with this install,
 but &lt;a href=&quot;//bugs.debian.org/778195&quot;&gt;&lt;code&gt;#778195&lt;/code&gt;&lt;/a&gt; is open since Feb 2015, and dead as of that very November.
The &lt;a href=&quot;//bugs.debian.org/cgi-bin/bugreport.cgi?att=1;bug=778195;filename=0001-Add-x32-support.patch;msg=15&quot;&gt;patch&lt;/a&gt;
 from message #15 applied (relatively) cleanly on top of &lt;code&gt;1ab40c5&lt;/code&gt; from &lt;a href=&quot;//salsa.debian.org/installer-team/debian-installer&quot;&gt;Salsa&lt;/a&gt;,
 barring one trivial conflict in &lt;code&gt;debian/control&lt;/code&gt;, but I couldn'&lt;!--'--&gt;t figure out how to build it for &lt;code&gt;x32&lt;/code&gt; on my &lt;code&gt;amd64&lt;/code&gt; machine
 (or in general, frankly).
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
Just for the fucks, I also tried to add and build a kernel config for &lt;code&gt;x32&lt;/code&gt;, which ended exactly like all my kernel-building endeavours of the past
 (plus, tracking and building Debian updates ad infinitum sounds like a horrible time).
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
I also tried to &lt;a href=&quot;//wiki.debian.org/CrossGrading&quot;&gt;cross-grade&lt;/a&gt; an installed &lt;code&gt;amd64&lt;/code&gt; system,
 but doing it through buster-to-sid just™ refused to work,
 and sid-to-sid broke on &lt;code&gt;+b2&lt;/code&gt; &quot;Rebuild with ruby2.5 support dropped&quot; &lt;a href=&quot;//wiki.debian.org/binNMU&quot;&gt;binNMUs&lt;/a&gt;
 existing for &lt;code&gt;i386&lt;/code&gt; and &lt;code&gt;amd64&lt;/code&gt; but not for &lt;code&gt;x32&lt;/code&gt;
 (being a few versions behind on some packages didn'&lt;!--'--&gt;t help, either),
 although, in the few days it's taken me to write this, it'd started to look like the rest of the architectures are catching up.
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
And so, it came time to install Debian without &lt;code&gt;d-i&lt;/code&gt;, like some sort of Arch user.
&lt;/p&gt;
&lt;h2 id=&quot;requirements&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#requirements&quot;&gt;#&lt;/a&gt; What you'&lt;!--'--&gt;ll need&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//manpages.debian.org/stretch/debootstrap/debootstrap.8.en.html&quot;&gt;&lt;code&gt;debootstrap&lt;/code&gt;&lt;/a&gt; and root privileges.
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
Also a kernel that can run &lt;code&gt;x32&lt;/code&gt; binaries; Debian &lt;code&gt;amd64&lt;/code&gt; kernels &lt;em&gt;can&lt;/em&gt;,
 but have it &lt;a href=&quot;//salsa.debian.org/kernel-team/linux/-/blob/6ae9ea8461605132b4628b5fbedd558ac1df10f7/debian/patches/features/x86/x86-make-x32-syscall-support-conditional.patch&quot;&gt;disabled by default&lt;/a&gt;, and need a &lt;code&gt;syscall.x32=y&lt;/code&gt; parameter to do so
 (I looked, out of curiosity:
  Arch &lt;a href=&quot;//git.archlinux.org/svntogit/packages.git/tree/trunk/config?h=packages/linux&amp;id=a794e88873fed3637d98563f73629651b1faf1b1#n672&quot;&gt;
  doesn'&lt;!--'--&gt;t support &lt;code&gt;x32&lt;/code&gt; at all&lt;/a&gt;, Gentoo
  &lt;a href=&quot;//gitweb.gentoo.org/repo/gentoo.git/tree/sys-kernel/vanilla-kernel/vanilla-kernel-5.5.14.ebuild?id=d193a0f3de9e106971405c3acb27d5ca90f8bc21#n55&quot;&gt;does&lt;/a&gt;,
  Fedora and RHEL &lt;a href=&quot;//src.fedoraproject.org/rpms/kernel/blob/2703d9b16cc4a0cf8b5c25c8af390663092f455b/f/kernel-x86_64-fedora.config#_6885&quot;&gt;don'&lt;!--'--&gt;t&lt;/a&gt;;
  FreeBSD'&lt;!--'--&gt;s &lt;a href=&quot;//www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/linuxemu.html&quot;&gt;&quot;Linux® Binary Compatibility&quot;&lt;/a&gt;
               does &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1246919228877426688&quot;&gt;not&lt;/a&gt; (as of 12.1)).
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
I used &lt;code&gt;d-i&lt;/code&gt;'&lt;!--'--&gt;s rescue mode (&lt;code&gt;rescue/enable=true&lt;/code&gt; parameter) and added &lt;code&gt;syscall.x32=y&lt;/code&gt; in the bootloader manually,
 this allowed me to use &lt;code&gt;d-i&lt;/code&gt; for some of the annoying config parts (hostname, network), and PXE-booting it was the most convenient for me.
&lt;/p&gt;
&lt;h2 id=&quot;target_requirements&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#target_requirements&quot;&gt;#&lt;/a&gt; What you'&lt;!--'--&gt;ll want&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
In (reverse-)chronological order: a disklabel, a bootloader, an initramfs (generator),
 a kernel (at time of writing this means Linux, since
           FreeBSD is &lt;a href=&quot;//www.freebsd.org/cgi/man.cgi?query=arch&amp;manpath=FreeBSD+12-current&quot;&gt;&lt;code&gt;i386&lt;/code&gt;/&lt;code&gt;amd64&lt;/code&gt;-only&lt;/a&gt; on x86,
           Hurd is &lt;a href=&quot;//git.savannah.gnu.org/cgit/hurd/hurd.git/tree/README?id=f9cb35bcb40fd9a2a553469242189871fd558f87&quot;&gt;&lt;code&gt;i386&lt;/code&gt;-only&lt;/a&gt;),
 an init, a user, configs –
 &lt;code&gt;/etc/fstab&lt;/code&gt;, &lt;code&gt;/etc/hosts&lt;/code&gt;, timezone.
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
My target disklabel is a standard GPT-on-BIOS setup with a separate &lt;code&gt;/boot&lt;/code&gt;
(this helps by allowing the use of partlabels throughout, since &lt;kbd&gt;SZAROTKA-BOOT&lt;/kbd&gt; is longer than the &lt;code&gt;vfat&lt;/code&gt; maximum of 11):
&lt;div class=&quot;bigcode&quot;&gt;
&lt;pre class=&quot;language-shell-session&quot;&gt;&lt;code class=&quot;language-shell-session&quot;&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@szarotka&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fdisk&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-l&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;Disk /dev/sda: 149.5 GiB, 160041885696 bytes, 312581808 sectors
Disk model: WDC WD1600AAJS-6
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: gpt
Disk identifier: 22C172F7-4E1F-D244-A6DC-260DEE716A5F

Device&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;Start&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;End&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;Sectors&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;Size Type
/dev/sda1&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;2048&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;4095&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;2048&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;1M BIOS boot
/dev/sda2&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;4096 312377343 312373248&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;149G Linux root (x86-64)
/dev/sda3&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;312377344 312581774&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;204431 99.8M Linux extended boot

&lt;/span&gt;&lt;span class=&quot;token command&quot;&gt;&lt;span class=&quot;token info punctuation&quot;&gt;&lt;span class=&quot;token user&quot;&gt;nabijaczleweli@szarotka&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token path&quot;&gt;~&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token shell-symbol important&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;token bash language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; blkid&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token output&quot;&gt;/dev/sda1: PARTLABEL=&quot;szarotka-bios-boot&quot; PARTUUID=&quot;a331980b-475a-1f43-b985-0849341df04b&quot;
/dev/sda2: LABEL=&quot;szarotka-root-ng&quot; UUID=&quot;d9e8441a-1a97-47af-b002-d764ac46121b&quot; TYPE=&quot;ext4&quot;
&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;PARTLABEL=&quot;szarotka-root&quot; PARTUUID=&quot;52695edc-4993-654c-9e04-e30d9cc1e367&quot;
/dev/sda3: SEC_TYPE=&quot;msdos&quot; LABEL_FATBOOT=&quot;SZAROTKA-BO&quot; LABEL=&quot;SZAROTKA-BO&quot; UUID=&quot;F4E6-9A90&quot;
&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;TYPE=&quot;vfat&quot; PARTLABEL=&quot;szarotka-boot&quot; PARTUUID=&quot;c817f3e5-e3e5-2449-b0f2-23dbb523a239&quot;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;/p&gt;
&lt;h2 id=&quot;building&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#building&quot;&gt;#&lt;/a&gt; Assembling the system&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Pressing &lt;kbd&gt;Tab&lt;/kbd&gt; in ISOLINUX et al. pops up the command-line, which looks vaguely like this:
&lt;/p&gt;
&lt;center&gt;&lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;ISOLINUX boot menu, showing Expert Install, Rescue Mode, and Automated Install; below it a editing prompt to edit the kernel command-line, the last element being syscall.x32=y&quot;
            src=&quot;/content/assets/blogn_t/001.02-ISOLINUX.png&quot; /&gt;&lt;/center&gt;
&lt;p class=&quot;continuing&quot;&gt;
Going through the rescue up to this menu ensures all the small annoying things are configured:
&lt;/p&gt;
&lt;center&gt;&lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;Two QEMU windows, both showing a debian-installer 'Enter rescue mode' screen; the one at the top says that 'The installer could not find any partitions' with a &lt;Go Back&gt; and &lt;Continue&gt; buttons; the one at the bottom says to 'Enter a device you wish to use as your root file system' with a list of drives between /dev/sda1 and /dev/sda3, an 'Assemble RAID array' and 'Do not use a root file system' options as well as a &lt;Go Back&gt; button&quot;
            src=&quot;/content/assets/blogn_t/001.03-enter-rescue-mode.png&quot; /&gt;&lt;/center&gt;
&lt;p class=&quot;continuation&quot;&gt;
You can press &lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;F2&lt;/kbd&gt;/&lt;kbd&gt;F3&lt;/kbd&gt; to switch to a virtual terminal with a usable background and &lt;code&gt;$TERM&lt;/code&gt;.
&lt;/p&gt;
&lt;table class=&quot;bigtable&quot;&gt;
 &lt;tr&gt;&lt;td&gt;Prepare the target VFS with all the partitions mounted first.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;~ # &lt;kbd&gt;mkdir target&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;~ # &lt;kbd&gt;mount /dev/disk/by-partlabel/szarotka-root target&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;~ # &lt;kbd&gt;mkdir target/boot&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;~ # &lt;kbd&gt;mount /dev/disk/by-partlabel/szarotka-boot target/boot&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Start off with a simple chroot.&lt;br /&gt;
         Note the ill-advised &lt;samp&gt;--no-check-gpg&lt;/samp&gt;,
         but finding/downloading/extracting that &lt;code&gt;.deb&lt;/code&gt; in a bare *X environment is too annoying to warrant itself.&lt;br /&gt;
         Note also the &lt;samp&gt;sid&lt;/samp&gt; suite — no &lt;samp&gt;stable&lt;/samp&gt; for as long as &lt;code&gt;x32&lt;/code&gt; is a port.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;~ # &lt;kbd&gt;debootstrap --arch=x32 --variant=minbase --include=debian-ports-archive-keyring --no-check-gpg sid target https://deb.debian.org/debian-ports&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Now you can (try to) chroot into the new system; if you see &lt;samp style=&quot;white-space: nowrap;&quot;&gt;chroot: can'&lt;!--'--&gt;t execute '/bin/sh': exec format error&lt;/samp&gt;,
         your kernel doesn'&lt;!--'--&gt;t support &lt;code&gt;x32&lt;/code&gt; executables.
         On Debian kernels, verify that you have &lt;samp&gt;syscall.x32=y&lt;/samp&gt; in &lt;code&gt;/proc/cmdline&lt;/code&gt;.&lt;br /&gt;
         The bind-mounts of &lt;samp&gt;/dev&lt;/samp&gt;, &lt;samp&gt;/sys&lt;/samp&gt;, and &lt;samp&gt;/proc&lt;/samp&gt; are there for the GRUB install and &lt;samp&gt;dracut&lt;/samp&gt;'&lt;!--'--&gt;s host-only mode;
         of &lt;samp&gt;/tmp&lt;/samp&gt; and &lt;samp&gt;/run&lt;/samp&gt; – to avoid leaving some mounted-over garbage in the target system.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;~ # &lt;kbd&gt;mount --bind /dev target/dev&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;~ # &lt;kbd&gt;mount --bind /sys target/sys&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;~ # &lt;kbd&gt;mount --bind /proc target/proc&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;~ # &lt;kbd&gt;mount --bind /run target/run&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;~ # &lt;kbd&gt;mount -t tmpfs tmpfs target/tmp&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;~ # &lt;kbd&gt;chroot target /bin/bash&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;# Huzzah!&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Sprinkle in your favourite init and initramfs generator.&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@szarotka:/# &lt;kbd&gt;apt install systemd-sysv&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;apt install dracut --no-install-recommends&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;The time has come to add a kernel, which is the only &lt;em&gt;required&lt;/em&gt; &lt;code&gt;amd64&lt;/code&gt; part of the system
         (if you need something from the &lt;code style=&quot;white-space: nowrap;&quot;&gt;non-free&lt;/code&gt; or &lt;code&gt;contrib&lt;/code&gt; components (e.g. microcode tools),
          you'&lt;!--'--&gt;ll still need the &lt;code&gt;amd64&lt;/code&gt; packages, or to &lt;samp&gt;apt source&lt;/samp&gt; and rebuild them for &lt;code&gt;x32&lt;/code&gt;).&lt;br /&gt;
         Note the &lt;a href=&quot;//manpages.debian.org/buster/apt/sources.list.5.en.html#THE_DEB_AND_DEB-SRC_TYPES:_OPTIONS&quot;&gt;&lt;code&gt;[arch]&lt;/code&gt;&lt;/a&gt; options –
         those are to avoid errors from &lt;code&gt;apt&lt;/code&gt; as it tries to find &lt;code&gt;x32&lt;/code&gt; in the non-ports repositories, and vice versa.&lt;br /&gt;
         Note also lack of &lt;code&gt;deb-src&lt;/code&gt; spec for the ports repository,
         as it &lt;a href=&quot;//deb.debian.org/debian-ports/dists/sid/Release&quot;&gt;doesn'&lt;!--'--&gt;t&lt;/a&gt; have sources at all
         (&lt;a href=&quot;//deb.debian.org/debian/dists/sid/Release&quot;&gt;compare&lt;/a&gt;).&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@szarotka:/# &lt;kbd&gt;sed -i 's/deb/deb [arch=x32]/' /etc/apt/sources.list&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;cat &gt;&gt; /etc/apt/sources.list&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;&lt;!--&quot;--&gt;deb     [arch=amd64] https://deb.debian.org/debian sid main contrib non-free&lt;!--&quot;--&gt;&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;&lt;!--&quot;--&gt;deb-src              https://deb.debian.org/debian sid main contrib non-free&lt;!--&quot;--&gt;&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;^D&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;dpkg --add-architecture amd64&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;apt update&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;apt install linux-image-amd64 --no-install-recommends&lt;/kbd&gt;&lt;/samp&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;And a bootloader (at time of writing &lt;samp&gt;grub2&lt;/samp&gt; recommends &lt;samp style=&quot;white-space: nowrap;&quot;&gt;os-prober&lt;/samp&gt; –
         if you don'&lt;!--'--&gt;t plan on running other OSs this can be &lt;kbd&gt;--no-install-recommends&lt;/kbd&gt;ed).&lt;br /&gt;
         Remember: at the prompt, if unsure about the choice offered by GRUB,
         you can switch VTs again (&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;F2&lt;/kbd&gt;/&lt;kbd&gt;F3&lt;/kbd&gt;) and use &lt;samp&gt;blkid&lt;/samp&gt; or &lt;samp&gt;lsblk&lt;/samp&gt;.&lt;br /&gt;
         The &lt;samp&gt;sed&lt;/samp&gt; adds the syscall toggle inside &lt;code&gt;GRUB_CMDLINE_LINUX&lt;/code&gt;, rather than &lt;code&gt;_DEFAULT&lt;/code&gt;,
         since it'&lt;!--'--&gt;s required to boot the system at all
         (not using a text editor because, despite &lt;samp&gt;ed&lt;/samp&gt; being the standard text editor,
          using &lt;samp&gt;sed&lt;/samp&gt;/&lt;samp&gt;awk&lt;/samp&gt;/&lt;samp&gt;cat&lt;/samp&gt; is less annoying and easier to spec like this
          (also, the normal &lt;samp&gt;vi&lt;/samp&gt; derivatives were broken due to the aforementioned &lt;samp&gt;ruby2.5&lt;/samp&gt;-related problem
           (I ended up using &lt;samp&gt;nvi&lt;/samp&gt;))).&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@szarotka:/# &lt;kbd&gt;apt install grub2&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Configuring grub-pc&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;-------------------&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  1. /dev/sda (??? MB; ???)  2. - /dev/sda2 (??? MB; /)  3. - /dev/sda3 (??? MB; /boot)&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;GRUB install devices: &lt;kbd&gt;&lt;strong&gt;/dev/sda&lt;/strong&gt;&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;Installing for i386-pc platform.&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;sed -ri 's/(CMDLINE_LINUX=)&quot;&quot;/\1&quot;syscall.x32=y&quot;/' /etc/default/grub&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;update-grub&lt;/kbd&gt;&lt;/samp&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;Various bits and bobs; &lt;samp&gt;/etc/resolv.conf&lt;/samp&gt; was already set up during &lt;samp&gt;debootstrap&lt;/samp&gt;.&lt;br /&gt;
         If using &lt;code&gt;vfat&lt;/code&gt; for your &lt;code&gt;/boot&lt;/code&gt;, check if your kernel sets &lt;code&gt;FAT_DEFAULT_UTF8=y&lt;/code&gt;,
         or specify &lt;code&gt;utf8=y&lt;/code&gt; instead of &lt;code&gt;defaults&lt;/code&gt;.&lt;br /&gt;
         This &lt;code&gt;/etc/hosts&lt;/code&gt; is really bare-bones and the &lt;samp&gt;d-i&lt;/samp&gt; one is too long to reproduce here in full;
         I'&lt;!--'--&gt;d recommend copying and modifying one from another host on your network.&lt;br /&gt;
         Previously this paragraph contained some ill-advised init-specific bollocks about setting timezones, reproduced below,
         instead of the &lt;samp&gt;dpkg-reconfigure&lt;/samp&gt;; mistakes of my youth slash two weeks ago I guess.&lt;br /&gt;
         &lt;del&gt;If you're not using systemd, here is where you'd link &lt;samp&gt;/etc/localtime&lt;/samp&gt; to somewhere in &lt;samp&gt;/usr/share/zoneinfo&lt;/samp&gt;
         (see &lt;samp&gt;&lt;a href=&quot;//manpages.debian.org/buster/systemd/localtime.5.en.html&quot;&gt;localtime(5)&lt;/a&gt;&lt;/samp&gt;), otherwise run
         &lt;samp style=&quot;white-space: nowrap;&quot;&gt;&lt;a href=&quot;//manpages.debian.org/buster/systemd/timedatectl.1.en.html&quot;&gt;timedatectl(1)&lt;/a&gt; set-timezone CET&lt;/samp&gt;
         after rebooting.&lt;/del&gt;&lt;/td&gt;
     &lt;td&gt;&lt;samp&gt;root@szarotka:/# &lt;kbd&gt;cat &gt; /etc/fstab&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;PARTLABEL=szarotka-root  /      ext4  noatime   0  1&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;PARTLABEL=szarotka-boot  /boot  vfat  defaults  0  2&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;^D&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;cat &gt; /etc/hosts&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;127.0.0.1 localhost&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;127.0.1.1 szarotka szarotka.local.nabijaczleweli.xyz&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;kbd&gt;^D&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;dpkg-reconfigure tzdata&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;Configuring tzdata&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;------------------&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  1. Africa  […]  7. Atlantic  8. Europe  9. Indian  10. Pacific  11. SystemV  […]&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br &gt;
         &lt;samp&gt;Geographic area: &lt;kbd&gt;&lt;strong&gt;8&lt;/strong&gt;&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;  4. Athens  […]  32. Minsk  39. Prague  46. Simferopol  53. Ulyanovsk  60. Warsaw&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br &gt;
         &lt;samp&gt;Time zone: &lt;kbd&gt;&lt;strong&gt;60&lt;/strong&gt;&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;br /&gt;
         &lt;samp&gt;Current default time zone: 'Europe/Warsaw'&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;Local time is now:      Tue Apr 28 02:25:44 CEST 2020.&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;&lt;!--&quot;--&gt;Universal Time is now:  Tue Apr 28 00:25:44 UTC 2020.&lt;!--&quot;--&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;apt install sudo&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;adduser --ingroup users nabijaczleweli&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;samp&gt;root@szarotka:/# &lt;kbd&gt;adduser nabijaczleweli sudo&lt;/kbd&gt;&lt;/samp&gt;&lt;br /&gt;
         &lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This should ensure the system boots and is usable enough after doing so — press &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Del&lt;/kbd&gt; and find out!
&lt;/p&gt;
&lt;center&gt;&lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;Linux console in QEMU window, showing a login, uname output of 'Linux szarotka 5.5.0-1-amd64', dpkg --print-architecture yielding 'x32', dpkg listing of amd64 packages yielding just two kernel packages, and the output of file on a system executable starting with 'ELF 32-bit LSB shared object, x86-64'&quot;
            src=&quot;/content/assets/blogn_t/001.04-live-terminal.png&quot; /&gt;&lt;/center&gt;
&lt;p class=&quot;continuation&quot;&gt;
If that didn't get your system to boot, please do &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz&quot;&gt;shoot me an e-mail&lt;/a&gt;, but if it did, then that's all from me for today,
except, maybe, one last thing?
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Ever wondered what'd happen if you had inits but the kernel couldn't execute them? &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0017-twitter-export#1246438561735413760&quot;&gt;So did I&lt;/a&gt;:
&lt;/p&gt;
&lt;center&gt;&lt;img class=&quot;main-screenshot continuing&quot; alt=&quot;Linux console during init in QEMU windows, first complaining about 'modprobe bindfmt-464c' not being processable, then 'Starting init: /sbin/init exists but couldn't execute it (error: -8)', then 'Run /etc/init as init process', then /bin/init, then /bin/sh, yielding the same error as /sbin/init, finishing with a kernel panic 'not syncing: No working init found.  Try passing init= option to kernel.'&quot;
            src=&quot;/content/assets/blogn_t/001.05-kernel-death.png&quot; /&gt;&lt;/center&gt;
&lt;p class=&quot;continuation&quot;&gt;
Alright, bye!
&lt;/p&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/001-x32-in-2020.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/maths/wiggly-circle.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/maths/wiggly-circle.html" />
    <title> wiggly-circle — nabijaczleweli </title>
    <updated>2019-05-09T22:54:19+02:00</updated>
    <content type="html">
&lt;div class=&quot;art-box&quot;&gt;
 &lt;span id=&quot;top&quot;&gt;&lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; wiggly-circle &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt;&lt;/span&gt;
 &lt;p class=&quot;merriweather&quot;&gt;
  Inspired by &lt;a href=&quot;//inconvergent.net&quot;&gt;Inconvergent&lt;/a&gt;'s &lt;a href=&quot;//twitter.com/inconvergent/status/1122463283586510848&quot;&gt;&quot;path test&quot;&lt;/a&gt;.&lt;!--'--&gt;
 &lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#lines&quot;&gt;the return to the fight&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_lines_2x_w1.5.png&quot;&gt; 
 &lt;img id=&quot;lines&quot; src=&quot;/content/assets/wiggly-circle/output_lines_2x_w1.5.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_pts&quot;&gt;centrism&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_pts.png&quot;&gt; 
 &lt;img id=&quot;r0_pts&quot; src=&quot;/content/assets/wiggly-circle/output_r0_pts.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_lines&quot;&gt;pointless breadth&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5.png&quot;&gt; 
 &lt;img id=&quot;r0_lines&quot; src=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_lines_40__2&quot;&gt;volumous&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_40__2.png&quot;&gt; 
 &lt;img id=&quot;r0_lines_40__2&quot; src=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_40__2.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_lines_1600x900_40&quot;&gt;breathe&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_1600x900_40.png&quot;&gt; 
 &lt;img id=&quot;r0_lines_1600x900_40&quot; src=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_1600x900_40.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_pts_o.8_1600x900_60&quot;&gt;pointedly degenerative&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_pts_2x_w1.5_o.8_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_pts_o.8_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_pts_2x_w1.5_o.8_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_lines_rgba_1600x900_60&quot;&gt;trans-gressive&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_rgba_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_lines_rgba_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_rgba_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_sngllines_rgba_1600x900_60&quot;&gt;pointedly home-of-sexual&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_sngllines_2x_w1.5_rgba_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_sngllines_rgba_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_sngllines_2x_w1.5_rgba_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_skiplines_rgba_1600x900_60&quot;&gt;drop-ped&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_skiplines_2x_w1.5_rgba_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_skiplines_rgba_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_skiplines_2x_w1.5_rgba_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_skiplines_comp-step_rgba_1600x900_60__2&quot;&gt;c o m p e n s a t e&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_skiplines_2x_w1.5_comp-step_rgba_1600x900_60__2.png&quot;&gt; 
 &lt;img id=&quot;r0_skiplines_comp-step_rgba_1600x900_60__2&quot; src=&quot;/content/assets/wiggly-circle/output_r0_skiplines_2x_w1.5_comp-step_rgba_1600x900_60__2.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_skiplines2..4_comp-step_rgba_1600x900_60&quot;&gt;{2,3,4}-drop&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_skiplines2..4_2x_w1.5_comp-step_rgba_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_skiplines2..4_comp-step_rgba_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_skiplines2..4_2x_w1.5_comp-step_rgba_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_lines_flagtrans_1600x900_60&quot;&gt;back and ready for more trans jokes&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_flagtrans_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_lines_flagtrans_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_flagtrans_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_lines_flagbi-wgh_1600x900_60&quot;&gt;from beyond the bilines&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_flagbi-wgh_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_lines_flagbi-wgh_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_lines_2x_w1.5_flagbi-wgh_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_sngllines2_flagpan_1600x900_60&quot;&gt;pancontinental&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_sngllines2_2x_w1.5_flagpan_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_sngllines2_flagpan_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_sngllines2_2x_w1.5_flagpan_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_skiplines2..4_flagace_1600x900_60&quot;&gt;amorphous&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_skiplines2..4_2x_w1.5_flagace_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_skiplines2..4_flagace_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_skiplines2..4_2x_w1.5_flagace_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_skiplines2..4_flaggay_alpha_1600x900_60&quot;&gt;re-homing&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_skiplines2..4_2x_w1.5_flaggay_alpha_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_skiplines2..4_flaggay_alpha_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_skiplines2..4_2x_w1.5_flaggay_alpha_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt; 
 &lt;h4 class=&quot;merriweather label&quot;&gt;&lt;a href=&quot;#r0_sngllines7_comp-step_flagace_alpha.5_1600x900_60&quot;&gt;anachronistic&lt;/a&gt;&lt;/h4&gt; 
 
 &lt;a href=&quot;/content/assets/wiggly-circle/output_r0_sngllines7_2x_w1.5_comp-step_flagace_alpha.5_1600x900_60.png&quot;&gt; 
 &lt;img id=&quot;r0_sngllines7_comp-step_flagace_alpha.5_1600x900_60&quot; src=&quot;/content/assets/wiggly-circle/output_r0_sngllines7_2x_w1.5_comp-step_flagace_alpha.5_1600x900_60.png&quot; /&gt; 
 &lt;/a&gt; 
 &lt;/div&gt;
&lt;div class=&quot;art-box&quot;&gt;
 &lt;h2 class=&quot;merriweather label&quot; id=&quot;code&quot;&gt;&lt;a href=&quot;#code&quot;&gt;Code&lt;/a&gt;&lt;/h2&gt;
&lt;pre class=&quot;language-cpp&quot;&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// The MIT License (MIT)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Copyright (c) 2019 nabijaczleweli&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Permission is hereby granted, free of charge, to any person obtaining a copy of&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// this software and associated documentation files (the &quot;Software&quot;), to deal in&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// the Software without restriction, including without limitation the rights to&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// the Software, and to permit persons to whom the Software is furnished to do so,&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// subject to the following conditions:&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// The above copyright notice and this permission notice shall be included in all&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// copies or substantial portions of the Software.&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.&lt;/span&gt;


&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;SFML/Graphics.hpp&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;cmath&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;cstdlib&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;iostream&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;random&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive-hash&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;token directive keyword&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&amp;lt;vector&gt;&lt;/span&gt;&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; tau&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;acos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; increase&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10.&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; wiggle&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2.&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; min_opacity &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;.3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; sf&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;Color colour_set&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0x75&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x07&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x87&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x4d&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xff&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x80&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x26&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0xff&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0xff&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x8c&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x00&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0xe4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x03&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x03&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;clog &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Pre-c\n&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;sf&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;RenderTexture img&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1600&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;900&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;clog &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Created\n&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; img_s&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img_s &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2u&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; radius &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//(((img_s.x + img_s.y) / 2.) / 2.) * .6;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;srand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;mt19937 rng&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token generic-function&quot;&gt;&lt;span class=&quot;token function&quot;&gt;static_cast&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rand&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;uniform_real_distribution&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; wiggle_dist&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;wiggle&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;wiggle&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;uniform_real_distribution&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; opacity_dist&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;min_opacity&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;uniform_int_distribution&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;size_t&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; colour_idx_dist&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;colour_set&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;colour_set&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;


&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;vector&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;sf&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;Vertex&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; points&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;points&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reserve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1'&lt;!--'--&gt;000&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0u&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;clog &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token char&quot;&gt;'&lt;!--'--&gt;/'&lt;!--'--&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token char&quot;&gt;'&lt;!--'--&gt;\n'&lt;!--'--&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// for(auto alpha = 0.; alpha &amp;lt;= tau; alpha += tau / (1'&lt;!--'--&gt;000 * (i / 60.))) {&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; alpha &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; alpha &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; tau&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; alpha &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; tau &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1'&lt;!--'--&gt;000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; radius &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;wiggle_dist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rng&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; increase &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; alpha &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; tau&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; colour &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; colour_set&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;colour_idx_dist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rng&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;colour&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;r&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;opacity_dist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rng&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;colour&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;g&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;opacity_dist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rng&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;colour&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;opacity_dist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rng&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;colour&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;opacity_dist&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rng&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;sf&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;Vertex v&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token generic-function&quot;&gt;&lt;span class=&quot;token function&quot;&gt;static_cast&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;alpha&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token generic-function&quot;&gt;&lt;span class=&quot;token function&quot;&gt;static_cast&lt;/span&gt;&lt;span class=&quot;token generic class-name&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;alpha&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; colour&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;points&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;emplace_back&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;std&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;move&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// std::cout &amp;lt;&amp;lt; v.position.x &amp;lt;&amp;lt; '&lt;!--'--&gt; '&lt;!--'--&gt; &amp;lt;&amp;lt; v.position.y &amp;lt;&amp;lt; &quot;: &quot; &amp;lt;&amp;lt; r &amp;lt;&amp;lt; &quot;, &quot; &amp;lt;&amp;lt; static_cast&amp;lt;unsigned int&gt;(colour.a) &amp;lt;&amp;lt; '&lt;!--'--&gt;\n'&lt;!--'--&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// img.draw(&amp;amp;v, 1, sf::PrimitiveType::Points);&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// for(auto skip = 2u; skip &amp;lt;= 3; ++skip)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt; for(auto i = 0ull; i &amp;lt; points.size() - skip; ++i) {&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt; sf::Vertex pts[]{points[i], points[i + skip]};&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt; img.draw(pts, sizeof(pts) / sizeof(*pts), sf::PrimitiveType::LinesStrip);&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;//&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt; }&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;auto&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0ull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; points&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;points&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sf&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;PrimitiveType&lt;span class=&quot;token double-colon punctuation&quot;&gt;::&lt;/span&gt;LinesStrip&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// img.draw(points.data(), points.size(), sf::PrimitiveType::LinesStrip);&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;img&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTexture&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;copyToImage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;saveToFile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;output.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;
&lt;span id=&quot;arrow&quot;&gt;&lt;/span&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing/poetry/ПИПА/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing/poetry/ПИПА/" />
    <title> ПИПА – Dzieła zebrane — nabijaczleweli </title>
    <updated>2018-11-03T21:03:25+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Strona Tytułowa&quot; --&gt;

 &lt;div style=&quot;display: table; width: 100%;&quot;&gt;
  &lt;div style=&quot;display: table-cell; vertical-align: middle; text-align: center;&quot;&gt;
   &lt;div style=&quot;display: inline-block;&quot;&gt;
&lt;h2 class=&quot;writing merriweather continued&quot;&gt;ПИПА&lt;/h2&gt;
&lt;h3 class=&quot;writing merriweather continuation&quot;&gt;&lt;em&gt;Поезия Интригующия Поетов Анахронических&lt;/em&gt;&lt;/h3&gt;
&lt;h4 class=&quot;merriweather&quot;&gt;&amp;nbsp;&lt;/h4&gt;
&lt;h4 class=&quot;writing merriweather smallcaps&quot;&gt;Dzieła zebrane&lt;/h4&gt;
   &lt;/div&gt;
  &lt;/div&gt;
  &lt;/div&gt;

&lt;h1&gt;&amp;nbsp;&lt;/h1&gt;

&lt;!-- ePub title: &quot;Spis Treści&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h2 class=&quot;merriweather&quot;&gt;Spis Treści&lt;/h2&gt;&lt;/center&gt;
&lt;p class=&quot;writing roboto indented&quot;&gt;
&lt;a href=&quot;#introduction&quot; class=&quot;content-link&quot;&gt;Wprowadzenie&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto continued&quot;&gt;
&lt;strong&gt;&lt;a href=&quot;#2018.11.02-Homoseksualizm&quot; class=&quot;content-link&quot;&gt; 2018.11.02 Homoseksualizm&lt;/a&gt;&lt;/strong&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto indented continuing&quot;&gt;
&lt;a href=&quot;#2018.11.02-Homoseksualizm/Zawadzka&quot; class=&quot;content-link&quot;&gt; 2018.11.02 – Zawadzka&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto indented continuing&quot;&gt;
&lt;a href=&quot;#2018.11.02-Homoseksualizm/Micherda&quot; class=&quot;content-link&quot;&gt; 2018.11.02 „HOMOsapiens” – Micherda&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto indented continuing&quot;&gt;
&lt;a href=&quot;#2018.11.02-Homoseksualizm/Bujak&quot; class=&quot;content-link&quot;&gt; 2018.11.02 – Bujak&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto indented continuation&quot;&gt;
&lt;a href=&quot;#2018.11.02-Homoseksualizm/наб&quot; class=&quot;content-link&quot;&gt;2018.11.02 – наб&lt;/a&gt;
&lt;/p&gt;

&lt;!--​--&gt;
&lt;h1&gt;&amp;nbsp;&lt;/h1&gt;

&lt;!-- ePub title: &quot;Wprowadzenie&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h2 id=&quot;introduction&quot; class=&quot;merriweather main-heading&quot;&gt;&lt;a href=&quot;#introduction&quot;&gt;Wprowadzenie&lt;/a&gt;&lt;/h2&gt;&lt;/center&gt;
&lt;p class=&quot;writing roboto indented continued&quot;&gt;
Przedstawiamy Wam, szanowny czytelniku,
czynnie rozwijający się zbiór twórczości Felicji –
grupy wytwórczej &lt;em class=&quot;roboto-em&quot;&gt;Поезия Интригующия Поетов Анахронических&lt;/em&gt;.
&lt;/p&gt;
&lt;!-- TODO: history, members, kolejność, more verbosity --&gt;

&lt;!--​--&gt;
&lt;h1&gt;&amp;nbsp;&lt;/h1&gt;

&lt;!-- ePub title: &quot;2018.11.02 „Homoseksualizm”&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h2 id=&quot;2018.11.02-Homoseksualizm&quot; class=&quot;merriweather main-heading&quot;&gt;
 &lt;a href=&quot;#2018.11.02-Homoseksualizm&quot;&gt;2018.11.02 „Homoseksualizm”&lt;/a&gt;
&lt;/h2&gt;&lt;/center&gt;
&lt;p class=&quot;writing roboto indented&quot;&gt;
&lt;span class=&quot;math-font-normal roboto-unscale&quot;&gt;2018.11.02&lt;/span&gt; &lt;em class=&quot;roboto-em&quot;&gt;nastąpiło pierwsze spotkanie wkrótce-Felicji 
 i z sugestii П. Zawadzkiej – pierwsza runda wytwórstwa.&lt;/em&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto indented&quot;&gt;
&lt;em class=&quot;roboto-em&quot;&gt;Słowo przewodnie:&lt;/em&gt; &lt;strong&gt;&lt;span class=&quot;smallcaps&quot;&gt;homoseksualizm&lt;/span&gt;&lt;/strong&gt;&lt;em class=&quot;roboto-em&quot;&gt;.&lt;/em&gt;
&lt;/p&gt;

&lt;!--​--&gt;

&lt;!-- ePub title: &quot;2018.11.02 – Zawadzka&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h3 id=&quot;2018.11.02-Homoseksualizm/Zawadzka&quot; class=&quot;merriweather main-heading&quot;&gt;
 &lt;a href=&quot;#2018.11.02-Homoseksualizm/Zawadzka&quot;&gt;2018.11.02 – Zawadzka&lt;/a&gt;
&lt;/h3&gt;&lt;/center&gt;
&lt;p class=&quot;writing roboto&quot;&gt;
okropnie trzeszczy&lt;br /&gt;
łóżko kochanków na górze&lt;br /&gt;
ach, gdybym tylko mogła dać jej to&lt;br /&gt;
co on dał&lt;br /&gt;
nie musiałabym pokutować&lt;br /&gt;
za grzech &quot;nie zabijaj&quot;&lt;br /&gt;
a teraz pozostaje mi tylko&lt;br /&gt;
stukać kijem od miotły&lt;br /&gt;
w sufit&lt;br /&gt;
piekła
&lt;/p&gt;

&lt;!--​--&gt;

&lt;!-- ePub title: &quot;2018.11.02 „HOMOsapiens” – Micherda&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h3 id=&quot;2018.11.02-Homoseksualizm/Micherda&quot; class=&quot;merriweather main-heading&quot;&gt;
 &lt;a href=&quot;#2018.11.02-Homoseksualizm/Micherda&quot;&gt;2018.11.02 „HOMOsapiens” – Micherda&lt;/a&gt;
&lt;/h3&gt;&lt;/center&gt;
&lt;p class=&quot;writing roboto&quot;&gt;
O homosapiens ze wszystkich świata stron&lt;br /&gt;
W waszą stronę wyciągam dziś dłoń&lt;br /&gt;
Prowadzę przez me wzburzone myśli i słowa&lt;br /&gt;
Bo jaka`ś lesbijska się we mnie obudziła mowa&lt;br /&gt;
I głosić piękno kobiet bym chciała&lt;br /&gt;
Ach, gdyby tak któraś mnie wyruchała!&lt;br /&gt;
Gdy leżąc wśród trawy przy pagórku zboczu&lt;br /&gt;
Obudziłabym się ze wzrokiem utkwionym w jej kroczu&lt;br /&gt;
I gdyby tak chętnie usta rozchylała&lt;br /&gt;
Nie wiele myśląc bym je całowała.&lt;br /&gt;
Lecz cóż to człowieku zrobisz w tym kraju?&lt;br /&gt;
Prędzej ogień cię wchłonie, niż pójdziesz do raju.&lt;br /&gt;
Choć nie ma raju bez jej waginy,&lt;br /&gt;
Której wchłaniałabym wydzieliny&lt;br /&gt;
Więc pochłoń mnie płomieniu żałosny,&lt;br /&gt;
Bo jeszcze porucham do końca tej wiosny.
&lt;/p&gt;

&lt;!--​--&gt;

&lt;!-- ePub title: &quot;2018.11.02 – Bujak&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h3 id=&quot;2018.11.02-Homoseksualizm/Bujak&quot; class=&quot;merriweather main-heading&quot;&gt;
 &lt;a href=&quot;#2018.11.02-Homoseksualizm/Bujak&quot;&gt;2018.11.02 – Bujak&lt;/a&gt;
&lt;/h3&gt;&lt;/center&gt;
&lt;!-- alien drawing --&gt;
&lt;p class=&quot;writing roboto&quot;&gt;
Po cierpieniach losu dnia codziennego,&lt;br /&gt;
Gdy żadna akcja nei jest warta uwagi;&lt;br /&gt;
Widzisz istotę nieludzką z okna otwartego,&lt;br /&gt;
I chcesz wyskoczyć z niego w celu najwyższej wagi;&lt;br /&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto continued&quot;&gt;
&lt;em class=&quot;roboto-em&quot;&gt;Bo jak to możliwe,&lt;br /&gt; 
 że dzieci uczciwe;&lt;br /&gt; 
 chodzą pewnie&lt;br /&gt; 
 i gadają wylewnie&lt;/em&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto indented continuing&quot;&gt;
&lt;em class=&quot;roboto-em&quot;&gt;o ludziach karalnych,&lt;/em&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto indented continuation&quot;&gt;
&lt;em class=&quot;roboto-em&quot;&gt;heteroseksualnych.&lt;/em&gt;
&lt;/p&gt;
&lt;p class=&quot;writing roboto indented&quot; style=&quot;font-size: calc(10em / 15);&quot;&gt;
&lt;em class=&quot;roboto-em&quot;&gt;hetero&lt;br /&gt; 
 to zero.&lt;/em&gt;
&lt;/p&gt;

&lt;!--​--&gt;

&lt;!-- ePub title: &quot;2018.11.02 – наб&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h3 id=&quot;2018.11.02-Homoseksualizm/наб&quot; class=&quot;merriweather main-heading&quot;&gt;
 &lt;a href=&quot;#2018.11.02-Homoseksualizm/наб&quot;&gt;2018.11.02 – наб&lt;/a&gt;
&lt;/h3&gt;&lt;/center&gt;
&lt;p class=&quot;writing roboto continued&quot;&gt;
Widzę dwóch takich
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing indented&quot;&gt;
I mi się nóż w kieszeni otwiera
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing&quot;&gt;
Lecz nie na nich
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuation indented&quot;&gt;
A na społeczeństwo, co ich sponiewiera
&lt;/p&gt;
&lt;p class=&quot;writing roboto continued&quot;&gt;
I dwie takie widzę
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing indented&quot;&gt;
Lecz nie jestem pewna
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing&quot;&gt;
Bo znikną te rydze
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuation indented&quot;&gt;
Tak jak one – tego jestem pewna
&lt;/p&gt;
&lt;p class=&quot;writing roboto continued&quot;&gt;
Bo czyjaś krew kapie
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing indented&quot;&gt;
Dawczynią zostałaby niejedna
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing&quot;&gt;
Ale to krasny punkt na mapie
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuation indented&quot;&gt;
Liczby nie dotrą nigdy do sedna
&lt;/p&gt;
&lt;p class=&quot;writing roboto continued&quot;&gt;
Pozywa stan i przegrywa
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing indented&quot;&gt;
„Ot – system felerny”
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing&quot;&gt;
Tutaj liczby nie kłamią, ba –
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuation indented&quot;&gt;
Wyrok wyrokiem – &lt;strong style=&quot;text-decoration: underline;&quot;&gt;śmiertelny&lt;/strong&gt;
&lt;/p&gt;

&lt;!--​--&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing/наган/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing/наган/" />
    <title> Наган — nabijaczleweli </title>
    <updated>2018-10-24T20:12:57+02:00</updated>
    <content type="html">
&lt;!-- xx.5.16
     or xx.4.16 --&gt;
&lt;!-- ePub title: &quot;Preface&quot; --&gt;


&lt;p class=&quot;indented roboto&quot;&gt;
The following work is a product of its own time,&lt;!--SOFT_BR--&gt;
and as such doesn't represent the author's current views&lt;!--SOFT_BR--&gt;
and skillset. It also references context from that time,&lt;!--SOFT_BR--&gt;
and as such is kept in the same state as it was in&lt;!--SOFT_BR--&gt;
when it was turned over to a potential third-party at&lt;!--SOFT_BR--&gt;
that specific time, in that specific context.
&lt;/p&gt;

&lt;br /&gt;
&lt;!-- ePub title: &quot;Наган&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h2 class=&quot;merriweather&quot; id=&quot;наган&quot;&gt;Наган&lt;/h2&gt;&lt;/center&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Batalistyka w trzech aktach, przez Jędrzeja
Aleksandra Łopacińskiego spisana, w światowych wojen
czasach ustawiona.
&lt;/p&gt;
&lt;!--​--&gt;
&lt;!-- ePub title: &quot;Non Possumus&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h2 class=&quot;merriweather&quot; id=&quot;non-possumus&quot;&gt;Non Possumus&lt;/h2&gt;&lt;/center&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Бетровка Мосина, powszechnie zwana Mosin-Nagant, to
karabin bitewny cudownego, zaiste implementu (takoż, jako i bohatyr
istoryi naszej), i od groma można dalej kupić ich
za około $100 (śmiesznie tanio), a strzelają piękie; komora na
amunicję 7.62mm (imperialne .308).
Warto również zaznaczć, zę na karabinach, poza snajperskimi,
nie montowano optyki prawie w ogóle.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Ludmiła pawliczenko wyskoczyła przez burtę standardowej
sowieckiej półciężarówki wojskowej i poczekała na Rozę
Gioergiewną, wysiadającą, jak Bóg przykazał, z tyłu.
Roza dołączyła do swojej Towarzyszki, i razem, chichocząc,
poszły na briefing.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Słuszajtie, parzausta — Powiedział gromkim głosem
 Komandir — faszystowskie kurwie syny idą z zachodu
 za… — spojrzał na zegarek — …dokładnie dwie godziny
 dwadzieścia trzy minuty, taka ich mać.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Podbiegł do niego chłopiec lat koło szesnastu i,
po salucie, podał mu papier kiliś, szepcąc
mu coś na ucho i uciekł.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Mamy rozpoznanie — ciągnął, psztykając w papier
 podany mu przez chłopca — będzie trzy do pięciu
 czołgó i jakieś czterysta piechoty.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
W kompanii rozległy się odgłosy zadowolenia, parę posób pokiwało
wolko głowami.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Niestety wiemy też, że jakaś trzecia z nich ma
 ef gie czterdzieści — dodał, jakby z obawą.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— блять!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Хуие неми!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Ale, ale! — uspokajał — Dlatego mamy z nami —
 proszę powitać — snajperów z nami — z kolumny
 rozległy się odgłosy ogólnej aprobaty — Wystąpcie, proszsz!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Wystąpiły, zasalutowały, usłyszały pomruk aprobaty i
wróciły na miejsce. W sumie, to nie tylko
pomruk usłyszały, ale i gwizdów a okrzyków parę, lecz nic
z tego nei robiły sobie, a yedynie iz pobłażaniem
głowami pokręciły y spojrzały na siebie. W pojrzeniu
ienim coś, co na ten chmiast gwizdy i okrzyk uciszyło,
żar, ba, ogień jakiś, żarliwy a gorący, ale o tem reszta przepomniała
później sobie jedynie, w czasach innych, lepszych.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Dobro! — podjął Kommandir, dziwnie… zmieszany? —
 Pole bitwy przedstawia się jak następuje:
 Szkopy idą z zachodu i wychodzą zza winkla tu —
 wskazał na pospiesznie narysowaną, lecz dokładną,
 sztabówkę — tu — przejechał palcem — między
 „winklem” a linią pobliskich domostw —
 mamy jakieś trzysta-pięśćset metrów. Plan jest taki:
 rozstawiamy się tu, tu i tu — trzy równoległe
 linie wyznaczone palcem przecięły papier, żarząc
 się w pamięci piechoty — Nu, dobro! Paszli po
 broń i amunicję.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Zapanował ogólnie ukierunkowany w jedną stronę rozgardiasz,
a Ludmiła i Roza poczekąły chwilę z tyłu po
geście Kommandira. Podeszli do siebie, dziewczyny skinęły głowami,
tyle, że do góry, pytająco.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Dziołchy, wiem, że sobie miejsca znajdziecie same, ale
 tu — wskazał na pobieżnie narysowane
 budynki — jest dwuipółpiętrowiec, a tu —
 wskazał na niewielki prostokąt, oznaczony dużym „T” —
 jest wieża kościelna z niezłą widocznością, niestety
 jednomiejscowa.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Fajnie — głęboko, z zastanowieniem, kiwnęła Roza.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— A tu i tu? — Ludmiła wskazała na krzywo zacieniowane
 fragmenty.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Tam nie wiemy; zabudowanie, zapewne, ale może tam
 być cokolwiek.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Obie skinęły szybko głowami.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Coś jeszcze? Nie? No, to poszli po ekwipunek!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Poszły, tam, gdzie reszta tłumy parędziesiąt sekund wcześniej,
już dostały po Nagancie z optyką (phi, się wykosztowali) i
12 stripperclipów pospieszyły się rozstawić.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Te minus dwie godziny.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Piechota ustawiona, wychodzi i ustawia się, większość
z pistoletami maszynowymi ППШ (PPSz), reszta ze
szturmowymi AK-47.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Te minus dziewięćdziesiąt minut.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Ludmiła i Roza rozdzieliły się, by przeszukać zacieniowanie
fragmenty sztabówki, i nie znalazły nic godnego uwagi,
więc spoktały się pod dwuipółpiętrowcami.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Masz coś?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Nie.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Ja też nie. To Roza, pójdziesz do budynku, a ja
 się kopsnę na wieżę, może?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Haraszo.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Rozdzieliły się jak uzgodniły, i wkrótce
obie były rozstawione.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Te minus pięć minut.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Ładowanie ostatnich magazynków. Ostatnie repetowanie
zamków, koniec rozmów. Rozkaz: cisza i pełna
gotowość, mają dojść do ⅔ przed otwarciem ognia.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Te zero.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Szkopy wyszły zza winkla akompaniowane
przez parę czołgów. Zaterkotały radiostacje.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Czołgi u czoła kolumny, po jednym z
 prawa i lewa, jeden środkiem,
 dwadzieścia pięć metrów za czołem, dwa znowu
 po bokach, pięćdziesiąt metrów
 dalej.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Operatorzy Panzerschercków zaczęli
przemieszczać się na wcześniej upatrzone
miejsca z których trafią potem, na razie
głęboko za linią budynków.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Yenerał w dwóch trzecich kolumny,
 nisko, dwa metry od pierwszego brzegu.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Ludmiła odłożyła lornetkę i śledzić
genrała poczęła; Roza, natomiast, wiedząc, że
jej partnerka ma lepszy, ostrzejszy, kąt, powzięła na
cel ciężarówkę z amunicją, którą wypatrzyła przez
binokular, uprzednio jednak cyklując zamek i
unieszczając na górze magazynka wyciągniętą z szarego
przytroczonego do pasa
woreczka odręcznie piórem podpisanego
„новинки” nabój, w którem pocisk zakończony był
na białoszaro; zamykając zamek uśmiechnęła
się paskudnie, tworząc sobą obraz, na któregoż
widok wielu szwabób uciekaćby poczęło,
a hyżo.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Czekać na rozkaz, ogień automatyczny
 otworzyć po Panzerschrekach — Panzerschrecki
 i snajperzy dają pierwszy ogień.
&lt;/p&gt;
&lt;p class=&quot;writing roboto continuing&quot;&gt;
… &lt;!-- TODO: replace with vspace? --&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Pajechali!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Operatorzy Panzerschrecków i dość zatenczas
zdążyli bezszelestnie do pozycyi i wymierzyli.
Teraz, po rozkazie posłali rakiety
prosto w Niemiecie czołgi. Cichy świst nie
zaalarmował nikogo.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
W paraleli z niemi, Roza, po ujrzeniu lecących
rakiet i opóźnieniu, wyliczonym
już wcześniej w leżącym niepodal
notatniku również pociągnęła za spust.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Odgłos pięciu ekplozyi,
gdzie wszystkie zmieściły się w
jednej dziesiątej sekundy był dezorientującym
zaskoczeniem dla szwabów. Jednak to, co nastąpiło
kolejną dziesiątą później ogłuszyło
prawie wszystkich, a wszystkim podświadomie
kazało paść i odczołgać się pod osłonę.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
&lt;!-- one line crossed out --&gt;
Wiedzieć wam, albowiem, należy, iże
pociski ze srebrną końcówką to pociski
zapalające, a w zetknięciu z amunicją w dużych
ilościach jest to „Świetna zabawa dla
parunastu szwabów – potężne
PIERDUT gwarantowane!”
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Później do zabawy wkroczyła Ludmiła z
esencjonalną dla operacji rolą – zdjęciem
Generała, a że ogłuszony, na ziemi i rozglądający się
za osłoną szkop tdudnny do trafienia nie jest, to
dokładnie dlatego trafiła za trzecim
razem dopiero, równo z ognia automatycznego rozpoczęciem.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Psiamać, za stara na to jestem — mruknęła, lobując
 fraga tam, gdzie dojcze wyglądały na najbardziej
 skoncentrowane.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
W tak zwanem międzyczasie piechota pruła, a równo.
Y rozpruła już niemców by doszczętnie,
gdyby nie nagły dym z Niemieckich granatow i
związany z niemi brak widoczności. Ludmiła jedynie
i Roza, trochę, widziały co się święci. Roza zareagowała
pierwsza.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Na ziemię! I uszy, a skoro!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Nikt jednak na dole nie zdążył. Świat stał się tylko
bielą i dzwonieniem. Bielą i dzwonieniem. &lt;em&gt;Bielą i dzwonieniem…&lt;!--*--&gt;&lt;/em&gt;
&lt;/p&gt;
&lt;!-- Interludium --&gt;
&lt;!-- „Świat to kilka pokoi” --&gt;
&lt;!-- &amp;c. --&gt;
&lt;!-- Obvious reference to „Bzu i agrestu” --&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Nad pobojowiskiem wstawał poranek, &lt;!-- 12.8.16 --&gt;
przed wygranych oczami y nad trupami przegranech &lt;!-- 30.9.16 --&gt;
wstaje słońce poranne i przygrzewać miło poczyna.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Kommandir zgromadzenia przed sobą woaków
gromkiem głosem gratuluje, rozdaje kiszki,
by porządną rosyjską wódką choć trochę przytłumić
świadomość utraty towarzyszy. Brakuje jednego głosu,
miękkiego y chichoczącego na myśl o eksplodującej ciężarówce i
rozpryskujących się głowach szwabskich.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Nie ma cię z resztą tego tałatajstwa, to gdzie
 jesteś, jebiem ti majku?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Szukała rozpaczliwie, najpierw lunetą na
karabinie, potem przypomniała sobie, że ma przecież
lornetkę. Spróbowała jeszcze raz w grupie pod
Kommandirem, potem przez otwarte pole i zabrała
się do skanowania okien ponownego, dokładniej
tem razem. Nie miała stąd widoku na wieżę,
ale przecież zeszła już chyba, nie?!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Nie wiedziała jeszcze, jak bardzo miała rację li; i jak
bardzo jej mieć nie chciała.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Słońce grzało porzącnie, rozpięła mundur ukazując
misterny otwierany medalik w
kształcie serca, jedną ręką, drugą dalej frantycznie
wypatrując.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Krew zasychając staje się świetnym spoiwem, od biedy
utrzyma parędziesiąt kilogramów, po rozgrzaniu jednak,
traci na tych właściwościach, tym bardziej jeśli
jedynym adherentem jest stal.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
A drugim skóra. Trafem – im wyżej, tym bardziej
grzeje i szybciej puszcza.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Wiedziała, kogo zobaczyła. I zrozumiała, że wypatrywanie
nie miało sensu. Lecące ciało bezwładne układa
się zawsze tak samo. Widziała, ba, powodowała
wiele takich widoków. Włosy Ludmiły lśniły złotem,
targane przez wiatr w okrutnym pośmiertnym
portrecie.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Rosą, mimo wieloeletniego zatwardzenie szarpnął
szloch, w medaliku ich zdjęcie zszarzało
po dotknięciu przez łzę
skapniętą ze szczęki Rosy. Trzęsącą się ręką po raz
ostatni sięgnęła po karabin.
Siedemdziesiąt
osiem milimetrów od siebie, dziewięćdziesiąt
stopni w lewo. Spiust poddaje się pod pięcioma
funtami. Huk ogłusza, ale to nie ma znaczenia.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Już nie…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Parędziesiąt metrów dalej Kommandir
huk posłyszał. Pochyla głowę i przez dłuższy
zas jej nie podnosi. Gdy to zrobi, jednak, szeregowcy
zobaczą na jego twarzy paskudny gorzki uśmiech.
Tym bardziej gorzki, że on zrozumiał to, co oni
zrozumieją dopiero w czasach innych, lepszych.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— I za nasze panie snajperki, bo
 pięknemi były! — toastuje i leje jeszcze jedną
 kolejkę.
&lt;/p&gt;
 &lt;!-- --&gt;
&lt;!--​--&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing/translations/funeral_blues.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing/translations/funeral_blues.html" />
    <title> Funeral Blues (ew. Pogrzebowy Blues) — nabijaczleweli </title>
    <updated>2018-04-29T04:28:25+02:00</updated>
    <content type="html">
&lt;span class=&quot;roboto&quot;&gt;
&lt;h2 class=&quot;merriweather&quot;&gt;Funeral Blues (ew. Pogrzebowy Blues)&lt;/h2&gt;
&lt;p&gt;
Zatrzymaj zegary wsze, telefon oderżnij, &lt;br /&gt;
Mordę psu soczystą kością zawrzyj, &lt;br /&gt;
Ucisz fortepiano, i z cichym bębna biciem &lt;br /&gt;
Wystaw trumnę na żałosne żałobników wycie. &lt;br /&gt;
&lt;/p&gt;
&lt;p&gt;
Pozwól planom powietrznym ciągiem nad głowami pijać &lt;br /&gt;
„Martwy jest” niebieską czcionką pisać. &lt;br /&gt;
Kokardami białe szyje gołębic udekoruj, &lt;br /&gt;
Drogowej policji z czarnej wełny rękawice rozdaj. &lt;br /&gt;
&lt;/p&gt;
&lt;p&gt;
Był mą północą, południem, wschodem i zachodem, &lt;br /&gt;
Tygodniem mym i odpoczynkiem niedzielnem, &lt;br /&gt;
Pieśnią mą i mową, północą i południem; &lt;br /&gt;
&lt;span style=&quot;display: inline-block;&quot;&gt;
 Że wiecznie miłość trwać będzie myślałam: &lt;br /&gt;
 &lt;span style=&quot;float: right;&quot;&gt;
  Jak się myliłam!
 &lt;/span&gt;
 &lt;br /&gt;
 &lt;span style=&quot;float: right;&quot;&gt;
  W jakimż błędzie byłam!
 &lt;/span&gt;
 &lt;br /&gt;
&lt;/span&gt;
&lt;/p&gt;
&lt;p&gt;
Gwiazdy niechcianymi już; każdą pochowaj, &lt;br /&gt;
Słońce rozłóż i księżyc spakuj, &lt;br /&gt;
Ocean wylej i lasy zmieć, &lt;br /&gt;
Bo nic już dobrym nie może być. &lt;br /&gt;
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
A. Łopacińska, Kraków, &lt;span class=&quot;math-font-normal roboto-unscale&quot;&gt;18.04.2018&lt;/span&gt;
&lt;/p&gt;
&lt;/span&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/gen-epub-book/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/gen-epub-book/" />
    <title> gen-epub-book general — nabijaczleweli </title>
    <updated>2017-08-30T03:38:21+02:00</updated>
    <content type="html">
&lt;div class=&quot;roboto&quot;&gt;&lt;span class=&quot;roboto-unscale&quot;&gt;
&lt;!-- Style based on https://daringfireball.net/projects/markdown/ --&gt;
&lt;p&gt;&lt;/p&gt;
&lt;h1 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;..&quot;&gt;↩&lt;/a&gt; &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;..&quot;&gt;↩&lt;/a&gt;&lt;/h1&gt;
&lt;h2 id=&quot;description&quot; class=&quot;smallcaps&quot; style=&quot;margin-top: initial;&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#description&quot;&gt;#&lt;/a&gt; Description&lt;/h2&gt;
&lt;p id=&quot;description-paragraph&quot;&gt;
&lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt; is a loose file to ePub assembly/conversion tool for everyone not afraid of not using Word.
&lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt; allows you to assemble ePub e-books using an easy-to-read, easy-to-write plaintext format.
&lt;/p&gt;
&lt;p id=&quot;description-what-is-it-paragraph&quot;&gt;
Thus, &quot;&lt;!--&quot;--&gt;&lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt;&lt;!--&quot;--&gt;&quot; is two things:
(1) a plaintext descriptor syntax; and
(2) a software tool, that assembles that descriptor and files referenced thereby into an ePub e-book.
&lt;/p&gt;
&lt;p id=&quot;description-inspiration-paragraph&quot;&gt;
The &quot;design goal&quot; of &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt;’s descriptor syntax is to make it as consistent and obvious at the first sight as possible.
The idea is that a &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt; descriptor should be writable by any person with &lt;em&gt;minimal&lt;/em&gt; technical knowledge.
&lt;/p&gt;
&lt;p id=&quot;description-for-whom-paragraph&quot;&gt;
This guide is designated for non-programmers. If you're a programmer, see the more in-depth &lt;a href=&quot;programmer.html&quot;&gt;programmer's version&lt;/a&gt;.
&lt;/p&gt;
&lt;p id=&quot;description-license-paragraph&quot;&gt;
&lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt; is free software, available under the MIT open source license.
See the &lt;a href=&quot;#license&quot;&gt;License&lt;/a&gt; heading for more information.
&lt;/p&gt;
&lt;h2 id=&quot;discussion&quot; class=&quot;smallcaps&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#discussion&quot;&gt;#&lt;/a&gt; Discussion&lt;/h2&gt;
&lt;p id=&quot;discussion-paragraph&quot;&gt;
Any topic related to &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt; – both the descriptor syntax and the software –
is fair game for discussion over at &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt;'s and this webpage's issue trackers
 &lt;a href=&quot;https://github.com/nabijaczleweli/gen-epub-book.rs/issues&quot;&gt;&lt;i class=&quot;icon-rust&quot; &gt;&lt;/i&gt;&lt;/a&gt;
 &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues&quot; class=&quot;icon&quot;&gt;&lt;i class=&quot;devicon-html5-plain&quot; &gt;&lt;/i&gt;&lt;/a&gt;.
I'&lt;!--'--&gt;ve also set up a &lt;a href=&quot;https://github.com/nabijaczleweli/gen-epub-book/issues/1&quot;&gt;GitHub issue for simple questions and clarifications&lt;/a&gt;.
If you don'&lt;!--'--&gt;t have a GitHub account, you can &lt;a href=&quot;mailto:nabijaczleweli@gmail.com&quot;&gt;shoot me an e-mail &lt;i class=&quot;far fa-envelope-open&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;/a&gt;.
&lt;/p&gt;
&lt;p id=&quot;discussion-hopes-paragraph&quot;&gt;
I hope that these facilities will lead to good ideas for future improvements to &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt;.
&lt;/p&gt;
&lt;h2 id=&quot;installation&quot; class=&quot;smallcaps&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#installation&quot;&gt;#&lt;/a&gt; Installation&lt;/h2&gt;
&lt;p id=&quot;installation-paragraph&quot;&gt;
If you'&lt;!--'--&gt;re running Ubuntu or Windows, you can simply grab a &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​.rs&lt;/code&gt; executable from the &lt;a href=&quot;https://github.com/nabijaczleweli/gen-epub-book.rs/releases&quot;&gt;releases&lt;/a&gt; page.
Those executables should work when ran from anywhere and without any external dependencies.
&lt;/p&gt;
&lt;h2 id=&quot;getting-started&quot; class=&quot;smallcaps&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#getting-started&quot;&gt;#&lt;/a&gt; Getting started&lt;/h2&gt;
&lt;h3 id=&quot;getting-started-syntax&quot; class=&quot;smallcaps&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#getting-started-syntax&quot;&gt;#&lt;/a&gt; Descriptor&lt;/h3&gt;
&lt;div id=&quot;getting-started-syntax-paragraph&quot;&gt;
&lt;p&gt;&lt;/p&gt;
&lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt;'&lt;!--'--&gt;s descriptor syntax is &lt;em&gt;line-based&lt;/em&gt; – each &lt;em&gt;line&lt;/em&gt; in the file specifies one element of the e-book.
Here'&lt;!--'--&gt;s an example of how a descriptor for a simple book can look:
&lt;kbd&gt;&lt;pre class=&quot;highlit-code numberise&quot;&gt;
&lt;span class=&quot;keyword&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;A Widow'&lt;!--'--&gt;s Trace&lt;/span&gt;
​
&lt;span class=&quot;keyword&quot;&gt;Include&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;../indent.css&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Include&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;effects.css&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Content&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;moments/book.html&lt;/span&gt;
​
&lt;span class=&quot;keyword&quot;&gt;Author&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;Aleksandra Łopacińska&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;2017-04-23T03:38:52+02:00&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Language&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;pl&lt;/span&gt;
&lt;/pre&gt;&lt;/kbd&gt;
And here's another one, but this time with comments explaining what's what:
&lt;kbd&gt;&lt;pre class=&quot;highlit-code numberise&quot;&gt;
&lt;span class=&quot;comment&quot;&gt;# This e-book'&lt;!--'--&gt;s title or name&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Name&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;Writing prompt collection&lt;/span&gt;
&lt;span class=&quot;comment&quot;&gt;# Relative path to image file used for cover&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Cover&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;writing_prompts/cover.png&lt;/span&gt;
​
&lt;span class=&quot;comment&quot;&gt;# Relative path to image file to put in the e-book on its own&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Image-Content&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;writing_prompts/no_the.png&lt;/span&gt;
&lt;span class=&quot;comment&quot;&gt;# HTML file to put in the e-book after the previous line&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Content&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;writing_prompts/theless.html&lt;/span&gt;
​
&lt;span class=&quot;comment&quot;&gt;# URL to image file on the internet to put in the e-book on its own&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Network-Image-Content&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;https://i.imgur.com/gkevfag.jpg&lt;/span&gt;
&lt;span class=&quot;comment&quot;&gt;# URL to HTML file on the internet to put in the e-book&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Network-Content&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;https://nabijaczleweli.xyz/content/writing_prompts/dead_santa.html&lt;/span&gt;
​
&lt;span class=&quot;comment&quot;&gt;# Relative path to a file to pack in the e-book (without displaying it)&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Include&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;indent.css&lt;/span&gt;
&lt;span class=&quot;comment&quot;&gt;# URL to a file on the internet to pack in the e-book (without displaying it)&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Network-Include&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;https://nabijaczleweli.xyz/content/assets/common.css&lt;/span&gt;
​
&lt;span class=&quot;comment&quot;&gt;# e-book'&lt;!--'--&gt;s author (that'&lt;!--'--&gt;s you!)&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Author&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;nabijaczleweli&lt;/span&gt;
&lt;span class=&quot;comment&quot;&gt;# e-book'&lt;!--'--&gt;s publication date (in &lt;a href=&quot;//tools.ietf.org/html/rfc3339&quot;&gt;RFC3339&lt;/a&gt; format, see below)&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;2017-02-02T13:45:47+01:00&lt;/span&gt;
&lt;span class=&quot;comment&quot;&gt;# e-book content'&lt;!--'--&gt;s language (in &lt;a href=&quot;//tools.ietf.org/html/bcp47&quot;&gt;BCP47&lt;/a&gt; format, see below)&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;Language&lt;/span&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;en-GB&lt;/span&gt;
&lt;/pre&gt;&lt;/kbd&gt;
&lt;p&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p id=&quot;getting-started-syntax-explanation-paragraph&quot;&gt;
As you can see, there are four required &lt;em&gt;lines&lt;/em&gt;:
 &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Name&lt;/span&gt;&lt;/kbd&gt;, &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Author&lt;/span&gt;&lt;/kbd&gt;, &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Date&lt;/span&gt;&lt;/kbd&gt; and &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Language&lt;/span&gt;&lt;/kbd&gt;,
 one or none &lt;span class=&quot;keyword&quot;&gt;Cover&lt;/span&gt; &lt;em&gt;line&lt;/em&gt;, and any number of &lt;span class=&quot;keyword&quot;&gt;Content&lt;/span&gt; and &lt;span class=&quot;keyword&quot;&gt;Image&lt;/span&gt; keys.
For a complete rundown of all accepted &lt;em&gt;lines&lt;/em&gt;, see &lt;a href=&quot;programmer.html#getting-the-gist-elements-list-paragraph&quot;&gt;this table&lt;/a&gt;.
&lt;/p&gt;
&lt;div id=&quot;getting-started-syntax-explanation-path-paragraph&quot;&gt;
&lt;p&gt;&lt;/p&gt;
All local paths are relative to the descriptor file.
The comments in the following directory tree show the paths to the files, relative to &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;string&quot;&gt;geb/special/book.epupp&lt;/span&gt;&lt;/kbd&gt;:
&lt;kbd&gt;&lt;pre class=&quot;highlit-code numberise&quot;&gt;
&lt;span class=&quot;string&quot;&gt;first-book&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;├──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;rendered&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;│ ​ ​ ​└──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;output&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;│ ​ ​ ​ ​ ​ ​ ​├──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;intro.html&lt;/span&gt; ​ ​ ​ ​ ​ ​&lt;span class=&quot;comment&quot;&gt;# ../../rendered/output/intro.html&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;│ ​ ​ ​ ​ ​ ​ ​├──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;main.html&lt;/span&gt; ​ ​ ​ ​ ​ ​ ​&lt;span class=&quot;comment&quot;&gt;# ../../rendered/output/main.html&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;│ ​ ​ ​ ​ ​ ​ ​└──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;ending.html&lt;/span&gt; ​ ​ ​ ​ ​​&lt;span class=&quot;comment&quot;&gt;# ../../rendered/output/ending.html&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;├──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;previews&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;│ ​ ​ ​└──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;generated&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;│ ​ ​ ​ ​ ​ ​ ​└──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;out&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;│ ​ ​ ​ ​ ​ ​ ​ ​ ​ ​ ├──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;intro.html&lt;/span&gt; ​ ​&lt;span class=&quot;comment&quot;&gt;# ../../previews/generated/out/intro.html&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;│ ​ ​ ​ ​ ​ ​ ​ ​ ​ ​ └──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;main.html&lt;/span&gt; ​ ​ ​&lt;span class=&quot;comment&quot;&gt;# ../../previews/generated/out/main.html&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;└──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;geb&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;​ ​ ​ ​└──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;first&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;​ ​ ​ ​ ​ ​ ​ ​├──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;intro.html&lt;/span&gt; ​ ​ ​ ​ ​ ​ ​&lt;span class=&quot;comment&quot;&gt;# intro.html&lt;/span&gt;
&lt;span class=&quot;punctuation&quot;&gt;​ ​ ​ ​ ​ ​ ​ ​└──&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;book.epupp&lt;/span&gt; ​ ​ ​ ​ ​ ​ ​&lt;span class=&quot;comment&quot;&gt;# book.epupp&lt;/span&gt;
&lt;/pre&gt;&lt;/kbd&gt;
When referenced from HTML, their names must be known.
The specified names are processed and packed under the names resulting from
 &lt;a href=&quot;programmer.html#getting-the-gist-naming-local-paragraph&quot;&gt;this&lt;/a&gt; algorithm.
Packed names of files from the internet is their URL name.
&lt;p&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p id=&quot;getting-started-syntax-explanation-date-paragraph&quot;&gt;
The &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Date&lt;/span&gt;&lt;/kbd&gt; &lt;em&gt;line&lt;/em&gt; must be in the &lt;a href=&quot;//tools.ietf.org/html/rfc3339&quot;&gt;RFC3339&lt;/a&gt; format,
 which, while sounding scary, can be summarised as
 &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;YYYY&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;-&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;MM&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;-&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;DD&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;T&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;HH&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;MM&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;SS&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;+/-&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;TH&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;TM&lt;/span&gt;&lt;/kbd&gt;.
Okay, that still looks scary.
You can just use the online &lt;a href=&quot;//infobyip.com/epochtimeconverter.php&quot;&gt;epoch time converter&lt;/a&gt; to convert any date to RFC3339.
&lt;/p&gt;
&lt;p id=&quot;getting-started-syntax-explanation-date-free-paragraph&quot;&gt;
If you specify the &lt;code&gt;--free-date&lt;/code&gt; switch as an argument on the command-line, &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt; will also accept
 &lt;a href=&quot;//tools.ietf.org/html/rfc2822&quot;&gt;RFC2822&lt;/a&gt; and
 &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;Unix timestamp&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;+&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;TH&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;punctuation&quot;&gt;:&lt;/span&gt;&lt;!--
 --&gt;&lt;span class=&quot;string&quot;&gt;TM&lt;/span&gt;&lt;!--
 --&gt;&lt;/kbd&gt;,
 since these formats might be easier to use,
&lt;/p&gt;
&lt;p id=&quot;getting-started-syntax-explanation-language-paragraph&quot;&gt;
The &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;Language&lt;/span&gt;&lt;/kbd&gt; &lt;em&gt;line&lt;/em&gt; must be in the &lt;a href=&quot;//tools.ietf.org/html/bcp47&quot;&gt;BCP47&lt;/a&gt; format,
 which effectively means a shorthand for the language in lowercase (&lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;string&quot;&gt;en&lt;/span&gt;&lt;/kbd&gt;, &lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;string&quot;&gt;pl&lt;/span&gt;&lt;/kbd&gt;),
 optionally followed by a hyphen and the language'&lt;!--'--&gt;s variant (&lt;kbd class=&quot;highlit-code nowrap&quot;&gt;&lt;span class=&quot;string&quot;&gt;en-GB&lt;/span&gt;&lt;/kbd&gt;).
&lt;/p&gt;
&lt;h3 id=&quot;getting-started-running&quot; class=&quot;smallcaps&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#getting-started-running&quot;&gt;#&lt;/a&gt; Running&amp;amp;assembling&lt;/h3&gt;
&lt;div id=&quot;getting-started-explanation-language-paragraph&quot;&gt;
If you have your descriptor and are ready to assemble it into an e-book open the console and run:
&lt;kbd&gt;&lt;pre class=&quot;highlit-code numberise&quot;&gt;
&lt;span class=&quot;punctuation&quot;&gt;$&lt;/span&gt; gen-epub-book &lt;span class=&quot;string&quot;&gt;first-book.epupp&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;first-book.epub&lt;/span&gt;
&lt;/pre&gt;&lt;/kbd&gt;
After which, if you did everything right and &lt;code class=&quot;nowrap&quot; style=&quot;font-variant: normal;&quot;&gt;gen-epub-book​&lt;/code&gt; didn't throw you an error, you should now have a file called &lt;code&gt;first-book.epub&lt;/code&gt;. &lt;!--'--&gt;
Congratulations! You can now read, verify and convert it using, e.g., &lt;a href=&quot;//calibre-ebook.com/&quot;&gt;Calibre&lt;/a&gt;.
&lt;/div&gt;
&lt;h2 id=&quot;license&quot; class=&quot;smallcaps&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#license&quot;&gt;#&lt;/a&gt; License&lt;/h2&gt;
&lt;pre id=&quot;license-paragraph&quot;&gt;
The MIT License (MIT)
​
Copyright (c) 2017 nabijaczleweli
​
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
​
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
​
THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
&lt;/pre&gt;
&lt;h2 id=&quot;afterword&quot; class=&quot;smallcaps&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#afterword&quot;&gt;#&lt;/a&gt; Afterword&lt;/h2&gt;
&lt;p id=&quot;afterword-paragraph&quot;&gt;
Thank you for making it this far.
I hope that this document is clear and/or informative, if not,
 why don'&lt;!--'--&gt;t you pop into the &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues&quot; class=&quot;icon&quot;&gt;issues &lt;i class=&quot;devicon-html5-plain&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;/a&gt;
 or slide &lt;del&gt;into the DMs&lt;/del&gt; me an &lt;a href=&quot;mailto:nabijaczleweli@gmail.com&quot; class=&quot;icon&quot;&gt;e-mail &lt;i class=&quot;fa fa-envelope&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt;&lt;/a&gt;?
&lt;/p&gt;
&lt;/span&gt;&lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing/the_taste_of_mi/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing/the_taste_of_mi/" />
    <title> The Taste of MI — nabijaczleweli </title>
    <updated>2017-08-16T19:15:09+02:00</updated>
    <content type="html">

&lt;!-- ePub title: &quot;The Taste of MI&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h2 class=&quot;merriweather&quot;&gt;The Taste of MI&lt;/h2&gt;&lt;/center&gt;
&lt;!-- Page 01/12 --&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt; &lt;!-- * ctx: Ася - 24 lata (8 lat po kl. 1 liceum) --&gt;
Noc. Asia rzuca ostatnie spojrzenie na smyrofon, marszczy &lt;!-- 30.6.17 -&gt; --&gt;
nos, i wzdycha, po czem pada na łóżko. Jest zmęczona, przysypia
prawie natychmiast. Odpływa jeszcze szybciej.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Stoi na wzgórzu, włosy ma wyblakłe, nie, szare. Dwa skórzane
pasy krzyżują się na mostku, przyjemnie ciąży…
Gubi słowo, wysila się, łapie je na powrót.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Pochwa. — Mruczy pod nosem, uśmiech marszczy jej
twarz na ułamek sekundy.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
…ciąży pochwa, inkrustowana stalą z jednej–, srebrem z
drugiej strony, opalizują runy – na stali krasnoludzkie, na
srebrze elfickie. Znad barków wystają głownie – z prawej
ciemniejsza, z resztą rękojeści owiniętą skórą, dalej
nową, niewybłyszczałą, z lewej srebro świeci delikatnie
nad mikrohaczykowatą skórą Rai. Odwraca się w
półpiruecie i z rosnącą euforią biegnie prez las po
oślizgłych belkach nad jarami pełnymi kości, wiotkich
kładkach i podstępnych żwirowiskach. Rozmywa się
w skokach nad jarami, sięgając po miecze dla
zachowania równowagi w biegu i locie. Zza drzew zaczyna
wyłaniać się warownia, a Asia, po horrendalnie skomplikowanym
przeskoku z zawisem i podwójnym saltem zrywa z
oczu opaskę i nim dotknie dotknie ziemi, siłą lądowania wpychając ją
do skórzanej kurty. Ostatni odcinek pokonuje na bezdechu, ot tak,
żeby sprawdzić czy jeszcze umie. Umie. Przstaje. Oddycha spokojnie,
ale to normalne, kiedy jest jedną z niewielu, którzy
umieją trafić do &lt;span class=&quot;roboto-em&quot;&gt;Kaer Morhen&lt;/span&gt;. Schyla
głowę, wzdychając nad widokiem, ale…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Czoło, miast na łopatkę, albo przynajmniej na
obręcz barkową, trafia w pustkę, i Asia budzi
&lt;!-- Page 02/12 --&gt;
się, z frustracją odpycha z powrotem na plecy i próbuje
dokończyć wzdech, ale niewiele się może równać orgazmicznemu
niemal wzdechnięciu po przebiegnięciu paru kilometrów w
krystalicznym górskim powietrzu, więc, jeszcze bardziej sfrustrowana,
unosi się na łokciu i mruży oczy w stronę zegarka, po czym
zrezygnowana opada na łóżko. Nie zaśnie, to pewne. Obraca się
do okna i bierze głęboki wdech. Wspomina.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Tłum, ot – jak tłum. Tam jakie dresy, tam jaki wyrzutek
społeczny z za długim włosem i aurą niepewnostrachu, tam jakaś, &lt;!-- * hey, it me --&gt;
a, nie, to skarlała nauczycielka. Ups.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Klasa pierwsza „A” prosz tutaj. — W synapsy wbiło jej się coś mniej mniejszego,
ale za to parokrotnie szerszego, w sweterku nieporadnie
kryjącym linię talii (cynicy powiedzieliby, że nie było
czego kryć, co daleko od prawdy nie było), za to odjechanego
w kosmos bardziej niż wyrzutek społeczny, który, po zaklasyfikowaniu
zadania jako niewarte włożone weń energii z
szalonym wyrazem twarzy coś liczył, mamrocząc. To musi
być Lucyna O… No ni cholery o niej imieniem i nazwiskiem,
Lucynka, bardziej.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Niezła zabawa się szykuje… — Mruknęła pod prowerbialnym
wąsem, łypiąc na swoją wychowawczynię, która sama wyglądała
jak potrzebująca opieki, ale zaraz przestała werbalizować swoje
uwagi, bo „się zaczęło”.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Witajcie, kochani, na inauguracji roku dwa-tysiące-&lt;!--
--&gt;szesnaście-dwa-tysiące-siedemnaście. — Zaczęła dyrektorka. —
W szczególności witamy pierwsze klasy…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Dzieeeeeeń Doooo⸗bryyyy! — Wybełkotali mało składnie.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Dyrektorka pewnie dronowała dalej, ale została wycięta.
Natychmiast przez większość gremium, i wykładniczo w
&lt;!-- Page 03/12 --&gt;
czasie, po zorientowaniu się, że jest to dokładnie to
samo, co przez ostatnie dziesięć lat.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Początek roku w pierwszej klasie liceum
(„To już osiem lat temu? Jezu, ale ja stara jestem…”)
wyjaśniałoby, czemu jest o te parę cali niższa i brak… A, nie, nie brak. &lt;!-- * nie wiem cz dualizm Asiowo-asiowy --&gt;
&lt;/p&gt; &lt;!-- jest wystarczająco oczywisty --&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Po odfiltrowaniu &lt;span class=&quot;roboto-em&quot;&gt;Szanownego Grona&lt;/span&gt; zabrała się za dalszą &lt;!-- &lt;- 2.7.17 --&gt;
motłochobserwację – tam jakiś (pół)wyrzutek społeczny numer &lt;!-- 2.7.17 -&gt; --&gt;
dwa ubrany „na górala” – czarna kamizelka narzucona na białą
koszulę, do tego jeansy, co w połączeniu z ewidentnym
przez ciemne, kręcone, sięgające do pasa włosy faktem
bycia Żydówką stawiało obserwatora przed dylematem, czy
kontrast ten wynika z ramieniowzruszu na ubiór, czy z głębokiego
zamysłu autorki; tam jakaś z grubsza normalna dziewczyna obraca &lt;!-- * MI --&gt;
głowę, z roztargnieniem&lt;!--*--&gt; rozglądając się po sali. Po chwili &lt;!-- * absent-mindedly --&gt;
napotyka wzrok Asi i uśmiecha się. Prawdziwie, szeroko, słodko
mrużąc oczy. Asia czuje, jak, przspieszając, jej serce gubi &lt;!-- ** misses a beat --&gt;
jedno uderzenie. Odruchowo uśmiecha się półgębkiem w odpowiedzi, ale
jej myśli galopują. Wyuczonym ruchem starego fotografa
zaciska powieki na jakieś pół sekundy, coby &lt;del&gt;matrycę&lt;/del&gt;
siatkówkę, przeczyścić, i otwiera je, by stwierdzić, że widok dalej
wywołuje na niej efekt prowokująco-przyspieszający.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— &lt;span class=&quot;roboto-em&quot;&gt;O, kurwa.&lt;/span&gt; — Skomentowała bezgłośnie,
bo na wiele więcej nie boło ją
w tym momencie stać.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Resztę apelu spędziła na doprowadzaniu się do stanu zgrubszej używalności,
więc z ulgą dała się porwać tłumowi, który usłyszał dyrektywę
Lucynki i zdążał na zapoznawczo-organizacyjną część
dnia. W grupie swoich dziesięcioklasistów udało ustawić
się jej za zniewalająco-pobudzającą współklasowiczką.
&lt;!-- Page 04/12 --&gt;
Korciło ją, co prawda, władowanie się jej prosto w
biznes, a szczególnie dokonanie nosowłośnej transakcji zapachowej,
ale resztki rozsądku oznaczyły ten manewr jako „&lt;strong&gt;NIE&lt;/strong&gt;”, więc się,
z trudem, powstrzymała. Dzięki swojej sprytnie wybranej pozycji
udało się jej usiąść w ławce z… W sumie dobre pytanie,
bo jeszcze do siebie się nic nie powiedziały, no i usiłowała na
nią nie patrzeć, żęby zachować samokontrolę i nie strzelić
jakiegoś głupstwa. Ale już niedługo, bo…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— No, to zaczynamy z listą obecności, kochani. Dziś bez
nazwisk, bo one nie sprzyjają &lt;span class=&quot;roboto-em&quot;&gt;atmosferze&lt;/span&gt;… — Lucynka
wykazała się jednak szczątkowym rozgarnięciem. —
Kuba!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Jestem! — Ktoś przed nimi podniósł dłoń.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Rus… łan? — Lucynce szło jak &lt;em class=&quot;roboto-em&quot;&gt;dress sense&lt;/em&gt; półwyrzutki
społecznej, znaczy nie bardzo.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Jezdem! — Z bliskowschodnim zaśpiewem zgłosił się
dres.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Asia skupiała się, żeby nie przegapić imienia dziewczyny
z lewej, że na własne imię zareagowała dopiero za drugim razem.
Ale skupianie opłaciło się:
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Emilia!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Tutaj! — Z entuzjazmem, któru chyba nigdy jej nie opuszczał,
współławkowiczka Asi zamachała.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Asia obróciła się, i nadstawiając pół ucha próbowała połączyć słuchanie
Lucynki z dyskretną observacją Emilii, ale nie udało
jej się, bo…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;hejka-paragraph&quot;&gt;
— Hejka! — Towarzyszka Lucynkowej niedoli odezwała się
pierwsza, a z takim metaforycznym bananem, że niemożliwym
było nieodebranie nieskończonych pokładów pozytywizmu​&lt;a href=&quot;#endnote-1&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;1&lt;/sup&gt;&lt;/a&gt;
&lt;!-- Page 05/12 --&gt;
emanującego z każdego poru jej skóry; Asia bezoporowo
poddała się jego działaniu.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Cześć! — Zaczęła, promieniejąc coraz bardziej — &lt;!-- ~9.7.17 -&gt; --&gt;
Więc…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot; id=&quot;ruby-paragraph&quot;&gt;
Reszta rozmowy nie zapisała się w żaden sposób w
jej pamięci, bo następnym, co pamiętała było wstawanie
zza ławki i udawanie się w stronę wyjścia
z resztą tłuszczy połączone z gorącem policzków
niemającym wiele wspólnego z wysokostojącym wrześniowym
słońcem. Jakby jej głowa gorącą nie była, zaczął kiełkować w
niej plan, kryptonim „Amo”NOTE(2), wraz z harmonogramem,
który w większości miejsc pobłyskiwał rubinowym &lt;strong class=&quot;ruby&quot;&gt;ASAP&lt;/strong&gt;.
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
A potem cały świat złożył się na dwa, na cztery, na osiem,
na szesnaście, i znowu leży w łóżku, patrzy na na falującą
światłami panoramę miasta. Uśmiecha się lekko. Nastepny
rok (dobra, dziesięć miesięcy) był zdecydowanie ciekawy – jak
poderwać kogoś, żeby ten ktoś nie zorientował się, że jest podrywany?
A co za filozofia?&lt;!--*--&gt; Toż z człowiekiem jak z jego uchem – małych &lt;!-- * Kuzynki :) --&gt;
liniowych zmian nie zauważa, nawet jeśli skokowa
sumaryczna zmiana byłaby szokiem. Kręci głową. Takie
porównania to zdecydowane nie jej działka, ale, jak się postara
to potrafi. Nie po to psuła parokrotnie słuchawki, żeby &lt;!-- * hue hue hue --&gt;
nie potrafić.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Odwraca się z powrotem na plecy i kładzie ręce pod karkiem,
wpatrywałaby się w gwiazdy, gdyby nie parę warstw
cegieł, papy i blachy. Z błąkającym się uśmiechem &lt;!-- * pl.wikipedia.org/wiki/Kamienica_(architektura) --&gt;
poddaje się napływającym obrazom. Wspomina.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot; id=&quot;stoned-paragraph&quot;&gt;
Ostry aromat płonącej sosny i ciche huczenie ognia uspokajało.
A może to nie ogień huczał, tylko te dwa, trzy?, drinki
&lt;!-- Page 06/12 --&gt;
robiły swoje? Obraz co chwilę tracił ostrość, i, jak to
właśnie zrobił, urywał się. („Tak się kończy zalewanie sobie płata
skroniowego neuroinhibitorami…”NOTE(3))
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot; id=&quot;asphalt-paragraph&quot;&gt;
Asfalt pod stopami. Czerwcowe słońce grzeje, ale nie tak
bardzo jak wyczuwalna szóstym zmysłem​&lt;a href=&quot;#endnote-4&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;4&lt;/sup&gt;&lt;/a&gt; obecność Emilii (wyczuwalna
większością innych zmysłów obecność lokalnego emola była
pomijalna, lecz okazała się kluczowa w identyfikacji czasoprzestrzennej
– ognisko częścioklasowe zwołane w celu celebracji zakończenia &lt;!-- 15.07.17 -&gt; --&gt;
dziesiątej klasy, czyli kulminacja całego roku (okej, dziesięciu
miesięcy) intensywnej pracy nad biologiczną siecią neuronową &lt;!-- 16.07.17 -&gt; --&gt;
pod pseudonimem MI&lt;!--*--&gt;; „Don't fuck it up…”, mruknęła,                                   &lt;!-- * title reference '--&gt;
mimo, że wiedziała przecież, jak ta scena się rozegra). Zostawiły
już za sobą większość paskudnych pseudowioskowych „posiadłości”, &lt;!-- 17.07.17 -&gt; --&gt;
i tylko zdezelowane &lt;span class=&quot;roboto-em&quot;&gt;Prawdziwe Wiejskie Domy™&lt;/span&gt; malowniczo
straszyły ubiegłowiecznymi wykuszami zza świerków, na któryżto widok
&lt;span class=&quot;roboto-em&quot;&gt;Павлов&lt;/span&gt;owym​&lt;a href=&quot;#endnote-5&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;5&lt;/sup&gt;&lt;/a&gt; gestem sięgnęła po aparat, którego tam nie
było (yeah, grupa mało trzeźwych nastolatków + sprzęt
warty parę(naście) kilozłotych to mniej więcej tak dobry pomysł
jak najeżdżanie Rosji w lecie bez uprzedniego adekwatnego
przygotowania na tameczną zimę), co spowodowało
zaplątanie się w emilię kończyną górną, co spowodowało &lt;!-- 21.7.17 -&gt; --&gt;
wypadnięcie z rytmu lokonomicznego, co spowodowało
współrozdeptanie, co, po następnych kilku sekundach
rodeptywania i ogólnego postępującego gubienia
równowagi, spowodowało malowniczą &lt;em class=&quot;roboto-em&quot;&gt;biglebę poplątaną&lt;/em&gt;
(gatunek chroniony we wszystkich pięćdziesięciu stanach
poza &lt;span class=&quot;roboto-em&quot;&gt;New Hampshire&lt;/span&gt;), szczęśliwie na trawę obok
asfaltu miast na asfalt sam w sobie, bo, miast
przerzucania winy, łatania się i samobójstwa w
&lt;!-- Page 07/12 --&gt;
perspektywie następnych dwóch lat, siedziały
bark w bark na trawie i chichrały się niemożebnie,
w zasadzie z niczego
(niepomierna jest moc neuroinhibitorów). Gdy &lt;!-- 23.7.17 -&gt; --&gt;
ocierając łzę, podniosła wzrok na Emilię, pchnięta
impulsem…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— Kocham cię, psiamać. — Rozbrzmiało w… No właśnie,
i tutaj problem, bo, po werbalizacji, struny głosowe
pozostały nieruchome, a idea spseudowerbalizowała
się tylko między nosem a potylicą. I tam też odbijało &lt;!-- 24.7.17 -&gt; --&gt;
się teraz &lt;span class=&quot;roboto-em&quot;&gt;Bardzo Dużo&lt;/span&gt; mało sładnych, ale ogólnie
panicznych wątków, które, wytracając energię formwały jedną,
perfekcyjnie klarowną myśl — kategoryczny imperatyw
wokalizacji. Ale, pomyślała, opierając skroń na ramieniu
Emilii, nie teraz. I z tymi dwoma walczącymi o wszechogarniającość
konceptami, obraz rozmył się, aż one były jedynymi
odczuwalnymi bodźcami.
&lt;/p&gt;
&lt;!-- Three lines painted over here. --&gt; &lt;!-- 26.7.17 -&gt; --&gt;
&lt;!-- Three lines painted over here. --&gt;
&lt;!-- Three lines painted over here. --&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Pierwszą zauważalną rzeczą była horyzontalizacja,
drugą – domowy (i więcej, &lt;em class=&quot;roboto-em&quot;&gt;wink wink nudge nudge&lt;/em&gt;)
zapach, trzecią – błyszczące zdjęcie Emilii (plus &lt;!-- 3.8.17 -&gt; --&gt;
rodziny), lampa, polaroid z rodziną (plus palcem
Emilii), sufit, zdjęcie gór (plus świerków, &lt;!-- 5.8.17 -&gt; --&gt;
miejscami nawet podobnych do rodziny), wysoce
apetyczny bark, odbitka bliżej nieokreślonego, a dalej
rozmazanego czegoś, a, nie, to tylko podłoże zafalowało
w unisonie z barkiem wapetyczniającym
&lt;!-- Page 08/12 --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
&lt;!-- Nine lines taken up by maths here. --&gt;
się weń wraz z resztą współprzymiotnikowej osoby,
no to powtórka z rozrywki i reklasyfikacja bliży-dali-&lt;!--
--&gt;mni-bardzi-nieokreślono-rozmytego na Emiliję,
&lt;em class=&quot;roboto-em&quot;&gt;sans&lt;/em&gt; rodzina, &lt;em class=&quot;roboto-em&quot;&gt;avec&lt;/em&gt;&lt;!--*--&gt; niżej
podpisana. Ta, więc, kupka obejrzana, należy zbadać zatem kupkę polimerów opartych
na węglu („Na taki cynizm dostaniesz zezwolenie
po piątym krzyżyku dopiero.” Zaśmiała się. „No, ewentualnie
jak z różowym papierkiem »smutni« przyjdą,
ale to nie Чечня.” Po wspomnieniu o Чечне zaśmiewała
się zdeka mniej, ale co na starego cynika poradzisz…),
toteż tytanicznym wysiłkiem woli &lt;!-- 6.8.17 -&gt; --&gt;
obróciła czaszkę o dziewięćdziesiąt stopni w
lewo, i na tamten tychmiast skorygowała
o minus dzisięć po wtwarzowaniu się w prosty
blondwłos, należący, jeżeli nos jej nie mylił, ani,
po korekcie, również oczy – i jej, i te srebrnobłękitne,
trzy cale przed &lt;!-- ** bardziej 3.5 ale v0v --&gt;
nimi uśmiechające
się szelmowsko w komitywie z większością
swojego jestestwa, do Emilli Zet&lt;span class=&quot;smol&quot;&gt;(kropka)&lt;/span&gt;,
&lt;!-- Page 09/12 --&gt;
która zareagowała na operacje płucnonosowe &lt;!-- 7.8.17 -&gt; --&gt;
w własnymi, i, marszcząc nosek…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Hibiskus? — Zapytała.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Jaki, &lt;span class=&quot;roboto-em&quot;&gt;kuna&lt;/span&gt;, Ibiskus? — Asia uniosła brew.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Coś ty Gibiskusa w życiu nie wąchała? — Ton dalej
poważny jak, nie przymierzając, świeżo upieczony
grabarz przymuszony do przeszukania trumny denata
po „wypadku” z prasą do kształtek żelazowęglowych.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;alexandrov-paragraph&quot;&gt;
Mrużąc powiekę (tą z drugiej strony,
aż taka dobra nie była) szukała w pamięci i
powietrzu kontekstu z hibiskusem w roli niepośledniej i/&lt;!--
--&gt;lub aromatycznej, czego nie ułatwiało niezerowe
&lt;span class=&quot;math-font-italic roboto-unscale&quot;&gt;n&lt;/span&gt; col z wódką (wódek z colą?)
przepuszczonych przez jelito cienkie, ani –
może nie do końca obezwładniająca, ale zdecydowanie utrudniająca
koherentne myślenie – obecność w.w. Emilii
(dla przyjaciół „Emi”, dla osób jeszcze &lt;em class=&quot;roboto-em&quot;&gt;*cough*&lt;/em&gt;
bliższych &lt;em class=&quot;roboto-em&quot;&gt;*cough*&lt;/em&gt;… cóż, jak jej dobrze pójdzie to
do rana się dowie; nu, precedens uzyska
przynajmniej), jednak, nim zdążyła się dobrze naszukać, &lt;!-- 8.8.17 -&gt; --&gt;
wyrwał ją z głębi płata skroniowego tłumiony bulgot
przechodzący w gorzej tłumiony chichot, i potem
obie rychnęły śmiechem serdecznym, słowiańskim,
a po tych circa &lt;span class=&quot;math-font-normal roboto-unscale&quot;&gt;.789&lt;/span&gt;&lt;!--*--&gt; &lt;!-- * mogłem się pieprznąć; --&gt;
gramach etanolu na kilogram to tylko wołać chór &lt;!-- swoją drogą taka jest gęstość etanolu --&gt;
&lt;!-- Four lines taken up by futile attempts at writing Greek here. --&gt;
&lt;!-- Four lines taken up by futile attempts at writing Greek here. --&gt;
&lt;!-- Four lines taken up by futile attempts at writing Greek here. --&gt;
&lt;!-- Four lines taken up by futile attempts at writing Greek here. --&gt;
&lt;!-- Page 10/12 --&gt;
&lt;!-- Five lines taken up biscale drawing here. --&gt;
&lt;!-- Five lines taken up biscale drawing here. --&gt;
&lt;!-- Five lines taken up biscale drawing here. --&gt;
&lt;!-- Five lines taken up biscale drawing here. --&gt;
&lt;!-- Five lines taken up biscale drawing here. --&gt;
Aleksandrowa​&lt;a href=&quot;#endnote-6&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;6&lt;/sup&gt;&lt;/a&gt; i certyfikaty lepić. Wszystkie,
jednak, śmiechy, nawet te symptomatyczne
w dziewiętnastym jeszcze wieku „histerii”,
muszą się skończyć, więc, po osiągnięciu szczytu,
kiedy serio myślała, że jedna przynajmniej z nich się
uduśnie (ale, co oczywiste, udało się nie), nastąpiła
krawędź opadająca, czyli coraz głębsze
wdechy, coraz rzadsze i wolniejsze
kurcze wydechu, coraz lepszy kontekst &lt;!-- 9.8.17 -&gt; --&gt;
do rzucenia czegokolwiek, żeby spotkało się ono z rozważeniem
rychłymi i szybkim, ale głębokim,
toteż, nie zastanawiając się głębiej (tak tak, zalewanie
się wódą w wieku lat &lt;span class=&quot;math-font-normal roboto-unscale&quot;&gt;17&lt;/span&gt; (ledwo,
&lt;em class=&quot;roboto-em&quot;&gt;yadda yadda yadda&lt;/em&gt; jednym, ale intuicja psychologa drugim).
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— I za to cię, &lt;span class=&quot;roboto-em&quot;&gt;cholera&lt;/span&gt;, kocham. — Palnęła.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;memory-paragraph&quot;&gt;
— Za co? — Chociaż w sumie równie dobrze mogło było &lt;!-- 10.8.17 -&gt; --&gt;
to być „Że co”, ale liczyła na pamięć natychmiastową​&lt;a href=&quot;#endnote-7&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;7&lt;/sup&gt;&lt;/a&gt;
żeby się nie powtarzać (nomen omen nie przeszłoby jej to przez gardło).
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Za ten humor, no.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot; id=&quot;bessemer-paragraph&quot;&gt;
Emilia trawiła. I o ile przeważnie procesy trawienne
nie są przewaćnie bardziej interesujące
niż &lt;span class=&quot;roboto-em&quot;&gt;Proces Bessemera&lt;/span&gt;&lt;a href=&quot;#endnote-8&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;8&lt;/sup&gt;&lt;/a&gt;, ale
teraz trawiła uprzednią wymianę zdań, i,
mimo, że na nią wychodzi(ło) te &lt;span class=&quot;math-font-normal roboto-unscale&quot;&gt;9&lt;/span&gt;
&lt;!-- Page 11/12 --&gt;
procent więcej, to wychodziło jej to zdecydowanie za wolno, I już,
kiedy Asia zaczęła dopuszczać
do siebie myśl, że może kompletnie spieprzyła sprawę,
Emi sprężyła się w sobie
i, zdecydowanie tym razem za szybko, zamnęła dystans między
ich wargami, zwiększyła między swoimi, i zwyczajnie
ją wzięła pocałowała. Smakowała, hmmm, mlaskanie było
w tej sytuacji nie tylko utrudnione, ale również wysoce
niestosowne, ale
&lt;em class=&quot;roboto-em&quot;&gt;tertio&lt;/em&gt; wódą, &lt;em class=&quot;roboto-em&quot;&gt;secundo&lt;/em&gt; po prostu
Emilką, a &lt;em class=&quot;roboto-em&quot;&gt;primo&lt;/em&gt;…
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
— Hibiskusem. — Parska śmiechem i otwiera oczy na
sufit ich apartamentu na starym mieście.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Tak, bycie udaną malarką zdecydowanie miało swoje
plusy, ale, jak powiedziałby każdy weekendowy &lt;!-- 11.8.17 -&gt; --&gt;
powieściopisarz&lt;!--*--&gt;, ma też swoje minusy, jak, na przykład, tłuczenie &lt;!-- * hue hue hue, to ja --&gt;
się z Sopotu po nocy – ot, wystawa jakich dużo.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Asia wzrusza ramionami i oddycha głęboko. Wspomina.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot; id=&quot;ian-morris-paragraph&quot;&gt;
Sewencja obrazów: Studniówka, wybory
&lt;span class=&quot;roboto-em&quot;&gt;Jaśnie Oświeconego Z Bożego Nadania&lt;/span&gt; (bo i o tym
aspekcie bycia władcą absolutnym nie należy zapominać, bo
jest on szczególnie ważny do jej utrzymania​&lt;a href=&quot;#endnote-9&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;9&lt;/sup&gt;&lt;/a&gt;) &lt;span class=&quot;roboto-em&quot;&gt;Władcy
Jedynego &lt;del&gt;Rzplitej Nam Drogiej Wielce&lt;/del&gt; Balu
Wielce Pięknego (Z Małżonką)&lt;/span&gt; ze zdjęciem;
taki sam szelmowski uśmiech, gdy
ciągnie ją na wernisaż, taki
z werwą, i adekwatnie, bo inaugurował wystawę
„jednego z największych talentów nowożytności”NOTE(10)
(rozważania, której z nich trafiło sięlepiej, zostawiała
&lt;!-- Page 12/12 --&gt;
w.w. emolowi); oddanie do użytku jej praktyki​&lt;a href=&quot;#endnote-11&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;11&lt;/sup&gt;&lt;/a&gt; psychologicznej;
mikrowystawa fotograficzna z jej
„odważnymi prezentacjami klasycznych zagadnień”NOTE(10),
co w pseudomowie paradziennikarskiej
jest nulem werbalnym (i, w połączeniu z resztą
artykułu, testamentem rażącej niekompetencji
autora) brzmiącym na tyle pompatycznie, żeby
„koneserzy sztuki nowoczesnej” czyli &lt;span class=&quot;roboto-em&quot;&gt;„Bufoniaste
Pedały”&lt;/span&gt;, jak ich nazywały, pokiwali w udawanym
zadumaniu durnymi łbami; zamieszczenie
jej zdjęć w &lt;em class=&quot;roboto-em&quot;&gt;Photo Camera&lt;/em&gt; i &lt;!-- 12.8.17 -&gt; --&gt;
&lt;em class=&quot;roboto-em&quot;&gt;National Geographic&lt;/em&gt;. Hej, dobre czasy.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Z zamyślenia wyrywa ją chrobot zamków
i metaliczne
trzaśnięcie klamki, słyszy
zrzucane buty i szelest odwieszanego płaszca,
marszczy nos na długi, zmęczony wydech i
przesuwa się nieznacznie
gdy EmI pada obok niej na łóżko. W jej
objęciu, przy jej obręczy barkowej czuje się
bezpiecznie. Ich wargi
odnajdują się na ułamek chwili, ale na języku
zostaje jej aromat kawy ze stacji
benzynowej, hibiskusa i czegoś jeszcze, czego nie
potrafi nazwać.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Jednak z uśmiechem zasypia w objęciach
Emilii, bo wie, że Emi, &lt;em class=&quot;roboto-em&quot;&gt;jej&lt;/em&gt; Emi smakuje, jak nikt
inny.
&lt;/p&gt;
&lt;!-- One line taken up by dates and places here. --&gt;

&lt;!--​--&gt;

&lt;!-- ePub title: &quot;Przypisy&quot; --&gt;

&lt;center&gt;&lt;h4 class=&quot;merriweather&quot;&gt;Przypisy&lt;/h4&gt;&lt;/center&gt;
&lt;p class=&quot;writing indented roboto continued&quot; id=&quot;endnote-1&quot;&gt;
&lt;a href=&quot;#hejka-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;1&lt;/sup&gt;&lt;/a&gt; Pokłady pozytywizmu –
 pozytywizm to co prawda ruch renesansowy, ale dobrze to brzmi, więc weszło do mowy potocznej.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-2&quot;&gt;
&lt;a href=&quot;#ruby-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;2&lt;/sup&gt;&lt;/a&gt; &lt;em class=&quot;roboto-em&quot;&gt;Amo&lt;/em&gt; –
 łac. „kocham”
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-3&quot;&gt;
&lt;a href=&quot;#stoned-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;3&lt;/sup&gt;&lt;/a&gt; Płat skroniowy –
 odbywa znaczącą rolę w formowaniu pamięci długoterminowej.
 &lt;a href=&quot;http://human-memory.net/brain_parts.html&quot;&gt;Źródło.&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-4&quot;&gt;
&lt;a href=&quot;#asphalt-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;4&lt;/sup&gt;&lt;/a&gt; Szósty zmysł –
 ludzie mają &lt;a href=&quot;https://en.wikipedia.org/wiki/Sense#Non-traditional_senses&quot;&gt;zdecydowanie więcej zmysłów&lt;/a&gt; ale proverbium jest jakie jest.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-5&quot;&gt;
&lt;a href=&quot;#asphalt-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;5&lt;/sup&gt;&lt;/a&gt; Иван Петрович Павлов –
 Rosyjski uczony prowadzący badania nad &lt;a href=&quot;https://en.wikipedia.org/wiki/Classical_conditioning&quot;&gt;warunkowaniem klasycznym (pawłowowskim)&lt;/a&gt;.
 &lt;a href=&quot;https://ru.wikipedia.org/wiki/Павлов,_Иван_Петрович&quot;&gt;Więcej.&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-6&quot;&gt;
&lt;a href=&quot;#alexandrov-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;6&lt;/sup&gt;&lt;/a&gt; Chór Aleksandrowa –
 męski chór Armii Rosyjskiej.
 &lt;a href=&quot;https://pl.wikipedia.org/wiki/Ch%C3%B3r_Aleksandrowa&quot;&gt;Więcej.&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-7&quot;&gt;
&lt;a href=&quot;#memory-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;7&lt;/sup&gt;&lt;/a&gt; Pamięć natychmiastowa –
 eng. &lt;a href=&quot;https://en.wikipedia.org/wiki/Working_memory&quot;&gt;working/immediate memory&lt;/a&gt;, pamięć o długości rzędu paru sekund,
 z niej podpowiadane jest przeważnie w sytuacji gdy natychmiast po niedosłyszeniu odpowiedzi pyta się „Co?” i,
 do czasu wypowiedzenia go, się przypomina.
 &lt;!-- Zakładam że to to https://pl.wikipedia.org/wiki/Neurologia#Badanie_neurologiczne_obejmuje --&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-8&quot;&gt;
&lt;a href=&quot;#bessemer-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;8&lt;/sup&gt;&lt;/a&gt; Proces Bessemera –
 eng. na, po prostu, &lt;a href=&quot;https://pl.wikipedia.org/wiki/Konwertorowanie&quot;&gt;Konwertorowanie&lt;/a&gt;,
 ale &lt;em class=&quot;roboto-em&quot;&gt;Bessemer Steel Process&lt;/em&gt; brzmi znacznie lepiej.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-9&quot;&gt;
&lt;a href=&quot;#ian-morris-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;9&lt;/sup&gt;&lt;/a&gt; Władcy absolutni –
 na podstawie &lt;a href=&quot;https://www.amazon.com/dp/0312611692&quot;&gt;Why the West Rules--for Now: The Patterns of History, and What They Reveal About the Future,
                                                             Ian Morris 2011&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-10&quot;&gt;
&lt;a href=&quot;#ian-morris-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;10&lt;/sup&gt;&lt;/a&gt; „Cytaty” –
 byłyby za GW gdybym ich nie wymyślił.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot; id=&quot;endnote-11&quot;&gt;
&lt;a href=&quot;#ian-morris-paragraph&quot;&gt;&lt;sup class=&quot;math-font-normal&quot;&gt;11&lt;/sup&gt;&lt;/a&gt; Praktyka psychologiczna –
 wiem na temat dokładnie &lt;span class=&quot;math-font-normal&quot;&gt;∅&lt;/span&gt;, więc nie ręczę, za istnienie czegoś takiego.
&lt;/p&gt;


&lt;p class=&quot;roboto&quot;&gt;
30.06.2017-12.08.2017&lt;br /&gt;
Kraków–&lt;span class=&quot;nowrap&quot;&gt;Wysowa-Zdrój&lt;/span&gt;–&lt;span class=&quot;nowrap&quot;&gt;Παλαιό Τρίκερι&lt;/span&gt;–Βόλος–&lt;span class=&quot;nowrap&quot;&gt;Grecka przestrzeń powietrzna&lt;/span&gt;&lt;br /&gt;
A. Łopacińska
&lt;/p&gt;

&lt;p&gt;​&lt;/p&gt;

&lt;p class=&quot;indented&quot;&gt;
This is a work of fiction.
Names, characters, businesses, places, events and incidents
 are either the products of the author's imagination or used in a fictitious manner. &lt;!--'--&gt;
Any resemblance to actual persons, living or dead, or actual events is purely coincidental.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
Ten utwór jest utworem fikcji.
Imiona, postacie, biznesy, miejsca, zdarzenia i wypadki
 są wynikiem wyobraźni autora lub są użyte w sposób fikcyjny.
Jakiekolwiek podobieństwo do osób rzeczywistych, żywych lub martwych,
 lub zdarzeń rzeczywistych jest czysto przypadkowe.
&lt;/p&gt;

</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/maths/mandalas.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/maths/mandalas.html" />
    <title> Mandalas — nabijaczleweli </title>
    <updated>2017-06-13T22:42:51+02:00</updated>
    <content type="html">
&lt;span class=&quot;roboto&quot;&gt;
&lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; Tonči Juričev-Grgin mandalas &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;intro&quot;&gt;
The Tonči Juričev-Grgin mandala generation algorithm can be used to, &lt;em&gt;drumroll please&lt;/em&gt;, generate mandalas like this one:
&lt;/p&gt;
&lt;a href=&quot;/content/assets/mandalas/900x900.png&quot; target=&quot;_blank&quot;&gt;
 &lt;img src=&quot;/content/assets/mandalas/900x900.png&quot; alt=&quot;Two-dimensional RGB mandala&quot; class=&quot;bigimage zoomable&quot; /&gt;&lt;/a&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;small&gt;Click for big version.&lt;/small&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It uses a very simple process (see &lt;a href=&quot;#algorithm&quot;&gt;below&lt;/a&gt;), which can be used in any
[​[​beta in NN ∖ {0}​]​]-dimensional space, so, as an example, the same-sized mandala,
but in one more dimension (also with classical music atop it because it'd be unbearably bloody boring otherwise):&lt;!--'--&gt;
&lt;/p&gt;
&lt;div class=&quot;indented continuation&quot;&gt;
&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;//youtube.com/embed/D2Xk6O9x-yk?list=PL3chI5PWwNA_c1nG57ittUq4op7ZmIveC&quot; frameborder=&quot;0&quot; allowfullscreen style=&quot;max-width: 100%;&quot;&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;render-time&quot;&gt;
&lt;strong&gt;&quot;How long does rendering a thing such as this take?&quot;&lt;/strong&gt;, one might ask.
 Two answers, the short one - too sodding long, the not-quite-as-short one is that due to the process' inherent randomness&lt;!--'--&gt;
  one need run the algorithm body many times, an acceptable amount I found was:
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
 [​[​log(n_max) = |~log(prod_i size_i)~| + 1​]​],
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
 (which still doesn't perfectly fill more complex corner setups), so for&lt;!--'--&gt;
 [​[​size = [900, 900, 900] =&gt; n_max = 10^10​]​],
 which takes about [​[​7 1/2 h​]​] on my PC if I try to not cook it (and I generally do).
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;code&quot;&gt;
A different question to be asked is
 &lt;strong&gt;&quot;How does one&lt;/strong&gt;&lt;!--&quot;--&gt;
 &lt;span style=&quot;text-decoration: line-through;&quot;&gt;laugh at the shitty code&lt;/span&gt;
 &lt;strong&gt;play around with the code that generates these myself?&quot;&lt;/strong&gt;.&lt;!--&quot;--&gt;
 Well, thanks to the wonders of the [​[​fr &quot;Internet&quot;​]​], you can! In most-to-least bad order:
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//github.com/nabijaczleweli/mandalas&quot; target=&quot;_blank&quot;&gt;Here&lt;/a&gt;'s an early version in C++,&lt;!--'--&gt;
 featuring layers upon layers of terrible code from late-2015/early-2016. You probably don't want to try to build it, headaches afore.&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;/content/assets/mandalas/mandalas-js/mandele.html&quot;&gt;Here&lt;/a&gt;'s the very first version, in JavaScript, &lt;!--'--&gt;
 used to demostrate as PoC to Tonči himself. You probably want to fuck around, if at all, in that version
 (&lt;a href=&quot;javascript:pack_specified_fileset('/content/assets/mandalas/mandalas-js.json')&quot;&gt;download as ZIP&lt;/a&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;a href=&quot;//github.com/nabijaczleweli/mandalas-rs&quot; target=&quot;_blank&quot;&gt;Here&lt;/a&gt;'s a pretty-much release version in Rust,&lt;!--'--&gt;
 used to generate all here-featured examples. You probably want to use this if you want to generate your own mandalas or
 make things based on the algorithm. Will work and build pretty much anywhere.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot; id=&quot;more&quot;&gt;
&lt;strong&gt;&quot;I don't care, I just wanna look at more cool shit!&quot;&lt;/strong&gt; — I got you covered on this front, too:
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//gist.github.com/nabijaczleweli/8c408e706c097850f5b7b4260035f45c&quot; target=&quot;_blank&quot;&gt;Here&lt;/a&gt;'s&lt;!--'--&gt;
 just a lot of mandalas in various sizes, colours, and shapes. Make sure to be on Wi-Fi, because they get really,
 &lt;em&gt;really&lt;/em&gt; big in a couple places.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//youtu.be/D2Xk6O9x-yk&amp;list=PL3chI5PWwNA_c1nG57ittUq4op7ZmIveC&quot; target=&quot;_blank&quot;&gt;Here&lt;/a&gt;'s&lt;!--'--&gt;
 a playlist with some 3-dimensional mandalas and classical music atop.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
I'm out of things to put here, because I'm not a cool person &lt;em&gt;en general&lt;/em&gt;.
 &lt;small&gt;(What else did you expect, I do maths for fun)&lt;/small&gt;
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;contact&quot;&gt;
&lt;strong&gt;&quot;I like/don't like this thing and/or would like to tell/contact you about it/something else.&quot;&lt;/strong&gt;,
 then reach me over at anything listed &lt;a href=&quot;/&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;. I don't have a life so I'll probably respond uncannily quickly.
&lt;/p&gt;
&lt;p class=&quot;indented&quot; id=&quot;algorithm&quot;&gt;
&lt;strong&gt;&quot;But where's the &lt;em&gt;algorithm&lt;/em&gt;?&quot;&lt;/strong&gt; – Here's the raw version: &lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
[​[​sf &quot;Mandala Generation - Ton&quot; hat(sf &quot;c&quot;) sf &quot;i Juri&quot; hat(sf &quot;c&quot;) sf &quot;ev-Grgin&quot;​]​]
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;
[​[​alpha in NN ∖ {0} - sf &quot;colour space dimensionality (e.g. 3 for RGB, 4 for CMYK, 1 for LUMA)&quot;​]​]
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
[​[​c nn (: 3, +oo ) - sf &quot;amount of corners in c-gonal mandala base&quot;​]​]
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
[​[​C - sf &quot;set of point&quot; - sf &quot;corner points of c-gon mandala base&quot;​]​]
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
[​[​bar C = c​]​]
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;
[​[​n in NN nn (: alpha + 2; +oo ) - sf &quot;current point number&quot;​]​]
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
[​[​d = ra\nd((:0, c) nn NN) - sf &quot;current chosen corner&quot;​]​]
&lt;/p&gt;
&lt;p&gt;
[​[​P_n = (C_d + P_(n-1)) / 2 =&gt; a = |C_d P_(n-1)| and b = a/2 = |C_d P_n| = |P_(n-1) P_n|​]​]
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;
[​[​e_m = |P_n P_(n-m)|​]​]
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
[​[​E = so\rt(map(f(x) = e_x, NN nn (: 1; alpha + 1 :)))​]​]
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;
[​[​colour P_n = map(f(x) = E_x / E_alpha; E ∖ {E_alpha})​]​]
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
[​[​or​]​]
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
[​[​f = max E​]​]
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
[​[​colour P_n = map(f(x) = x / f; E ∖ {f}) =&gt; bar(E ∖ {f}) = alpha​]​]
&lt;/p&gt;
&lt;p&gt;
(I'm not a real mathematician, so it's most likely not done properly.)
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;
And &lt;span id=&quot;show-scans&quot;&gt;here&lt;/span&gt;'s a scanned hand-drawn version with examples &lt;!--'--&gt;
 (warning: &lt;em&gt;very&lt;/em&gt; big, expand at own risk)&lt;span id=&quot;show-scans-punctuation&quot;&gt;.&lt;/span&gt;
&lt;/p&gt;
&lt;div id=&quot;scans&quot; class=&quot;continuation hidden&quot;&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;/content/assets/mandalas/scan-page1.jpg&quot; target=&quot;_blank&quot;&gt;
 &lt;img src=&quot;/content/assets/mandalas/scan-page1.jpg&quot; alt=&quot;Page 1 of mandala generation algorithm, including hand-drawn step-by-step sketches&quot; class=&quot;zoomable&quot; /&gt;&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;/content/assets/mandalas/scan-page2.jpg&quot; target=&quot;_blank&quot;&gt;
 &lt;img src=&quot;/content/assets/mandalas/scan-page2.jpg&quot; alt=&quot;Page 2 of mandala generation algorithm, including hand-drawn step-by-step sketches&quot; class=&quot;zoomable&quot; /&gt;&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
&lt;small&gt;Click for big version.&lt;/small&gt;
&lt;/p&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot; id=&quot;colourspace&quot;&gt;
&lt;strong&gt;On some of the more arbitrary colourspaces.&lt;/strong&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Since the output image format (PNG) and the video format (H.264) only support RGB
 (&lt;em&gt;nota bene&lt;/em&gt;: I am omitting a scheissload of detail and specificites I either do not know or that are not relevant
 &lt;!-- (I mean, there's probably some gamut narrowing depending on the output colour range of your display device, but that is really not useful data) --&gt; &lt;!--'--&gt;
 because &lt;a href=&quot;//xkcd.com/1882&quot; target=&quot;_blank&quot;&gt;colours are hard&lt;/a&gt;)
 a conversion is required when going from e.g. CMYK or YUV thereto.
 More often than not (which is to say, in all spaces but LUMA), that conversion is lossy, which means that &quot;in &lt;code class=&quot;roboto-unscale&quot;&gt;colourspace&lt;/code&gt;&quot; is a lie,
 whereas the non-lie version is closer to &quot;in an RGB approximation to &lt;code class=&quot;roboto-unscale&quot;&gt;colourspace&lt;/code&gt;&quot;.
 However, most conversions were already set in stone well before I was born and are therefore widely accepted as accurate enough.
 Some, however, like ROYGBP or, &lt;em&gt;ahem&lt;/em&gt;, RPPDIBLCTGLLYAODBGB, have been made up by yours truly upon the following basis:
&lt;/p&gt;
&lt;p class=&quot;continued&quot;&gt;
[​[​S - sf &quot;set of 3-dimensional vectors&quot; - sf &quot;RGB samples of each colour in a space&quot;​]​]
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
[​[​bar S = alpha​]​]
&lt;/p&gt;
&lt;p class=&quot;continuation&quot;&gt;
[​[​colour P_n - sf &quot;as above&quot;​]​]
&lt;/p&gt;
&lt;p&gt;
[​[​AA c in {r,g,b} : C_(out_c) = (sum_(theta=1)^alpha colour P_(ntheta) S_(theta_c))/(sum_(theta=1)^alpha S_(theta_c))​]​]
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
A full list of conversions and their implementations can be found at the
 &lt;a href=&quot;//rawcdn.githack.com/nabijaczleweli/mandalas-rs/doc/mandalas/util/index.html&quot; target=&quot;_blank&quot;&gt;mandalas-rs API documentation&lt;/a&gt;.
&lt;/p&gt;
&lt;/span&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing/poetry/the_east_wind/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing/poetry/the_east_wind/" />
    <title> Poetry — nabijaczleweli </title>
    <updated>2017-05-19T12:25:37+02:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Introduction&quot; --&gt;
&lt;a style=&quot;color: initial; text-decoration: none;&quot; href=&quot;#introduction&quot;&gt;&lt;h3 id=&quot;introduction&quot;&gt;Editorial comment&lt;/h3&gt;&lt;/a&gt;
&lt;p class=&quot;writing&quot;&gt;
&amp;emsp;Some might argue that this garbage ain't poetry, and I agree it's not much &lt;em&gt;good&lt;/em&gt;, but,
according to everyone's favourite unreliable source of knowledge, &lt;a href=&quot;https://en.wikipedia.org/wiki/Poetry&quot;&gt;Wikipedia&lt;/a&gt;:&lt;!--'--&gt;
&lt;/p&gt;
&lt;div&gt;
&lt;blockquote cite=&quot;https://en.wikipedia.org/wiki/Poetry&quot;&gt;
Poetry is a form of literature that uses aesthetic and rhythmic qualities of language to evoke meanings in addition to,
or in place of, the prosaic ostensible meaning.
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;p class=&quot;writing&quot;&gt;
&amp;emsp;Which makes this &lt;em&gt;technically&lt;/em&gt; actually poetry, despite not meaning it's any good at all, really.&lt;!--'--&gt;
&lt;/p&gt;
&lt;!-- ePub title: &quot;The East Wind&quot; --&gt;
&lt;a style=&quot;color: initial; text-decoration: none;&quot; href=&quot;#east_wind&quot;&gt;
&lt;h3 id=&quot;east_wind&quot;&gt;The East Wind,&lt;br /&gt;
&lt;span style=&quot;font-size: 90%;&quot;&gt;A front-line letter&lt;/span&gt;&lt;/h3&gt;
&lt;/a&gt;
&lt;div class=&quot;writing&quot;&gt;
&lt;p&gt;&lt;/p&gt;
&amp;emsp;My loving Emily,&lt;br /&gt;
&amp;emsp;I am afraid this is my last letter to you,
for we are the last remaining of our
squadron, with no rounds to spare.
As I write these words, the last of our
bretheren pass into eternal sleep, we are
now only three of living souls.
Until morning, we shall be none, and
will join our ancestors in their eternal vigil
for our people.&lt;br /&gt;
&amp;emsp;We were ambushed, deep in the siberian
taiga, worse than ever before. So we dug,
through bodies and brass, blood, and lead.
No matter the aspects we capitalise
on on, they keep coming. We have our
last, the last ambush scheduled by
0300, and so we pray to save
our souls, for our earthly vigil's&lt;!--'--&gt;
swift end, and external vigil's start.&lt;br /&gt;&lt;!--'--&gt;
&amp;emsp;And by the lord, Emily, warn everyone.
Warn them, that the East wind is coming, and
it can't be stopped.&lt;br /&gt;&lt;!--'--&gt;
&amp;emsp;&amp;emsp;For the best of times,&lt;br /&gt;
&amp;emsp;&amp;emsp;Your loving,&lt;br /&gt;
&amp;emsp;&amp;emsp;Maggie
&lt;p&gt;&lt;/p&gt;
&lt;/div&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing/moments/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing/moments/" />
    <title> A Widowꞌs Trace — nabijaczleweli </title>
    <updated>2017-04-23T03:37:41+02:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;A Widow's Trace&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h2 class=&quot;merriweather&quot;&gt;A Widow's Trace&lt;/h2&gt;&lt;/center&gt;&lt;!--'--&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
— &lt;em&gt;Tien, tien.&lt;/em&gt; Looks like we'&lt;!--'--&gt;&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;e wo&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;king rogethe&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;. —
&lt;em&gt;Some&lt;/em&gt;thing made Widowmaker say, as it always did, ruining her
chances. From her standpoint, anyway.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Don't think I'm happy about that! — Tracer exclaimed
back, the same &lt;em&gt;some&lt;/em&gt;thing making her so. And ruining
&lt;em&gt;her&lt;/em&gt; chances, too. Or, from her standpoint, at least.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
&quot;Attack commences in 30 seconds.&quot; A cold
female voice interrupted their bickering&lt;br /&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— We both know that's not quite true, is it? — Mercy's whisper
sent a wave of electricity through Tracer's body.&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Tracer checked for Widow, but she was reassembling her
beloved rifle on a table next to them, facing away in
total concentration, so she nodded, very deeply, lost
in her own world of fantasy.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
&quot;Five&quot; Tracer snapped back to reality.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
&quot;Four&quot; Widowmaker cycles the bolt on her rifle.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
&quot;Three&quot; Seven-Six checks his utility belt.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
&quot;Two&quot; McCree pulls out and cocks his Peacekeeper
incredibly tense.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
&quot;One&quot; Zenyatta wakes from meditation.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
&quot;Attack&quot; Everyone dashes out. Except that Tracer
trails behind Widow, who aims her Grapple. Tracer's&lt;!--'--&gt;
eyes start glowing; figuratively, of course.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Oi, before you get up there, grab me!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— &lt;em&gt;H&lt;/em&gt;what?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Come on, just do it! — Tracer first got hold of Widow's&lt;!--'--&gt;
waist, to which she reciprocated. — Right, now grapple us up
there!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
The sharp yank wasn't as sharp as she expected and rather&lt;!--'--&gt;
soon they were stood on a narrow passage made of sandstone.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Y'ready? Hold me very tight now, this thing is...&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
But she didn't finish and was navigating the air,&lt;!--'--&gt;
which you hafta admit is hard, if you can only maneuver
horizontally. A couple terrifying seconds later they
landed way behind enemy lines, with a clear view on all of
them.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— Now's your opening, luv!&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Widow hoisted the firearm to her shoulder, aimed in, and
fired. Reaper's head seemed to have exploded. She leaned&lt;!--'--&gt;
leftward, sighted in and fired again. Reinhardt befell
upon his knees; then collapsed fully as the second shot sounded.
Tracer was humming some melody, leaned back against a wall.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Ssh! — Widow raised her free hand.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Tracer froze mid-hum and mid-headsway as Widow's&lt;!--'--&gt;
head locked at an extraordinary angle,
listening to the faintest of sounds.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— Get &lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;eady to get us out of 'e&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;e. — She alerted&lt;!--'--&gt;
and grappled directly upwards.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
On the way down she sighted in and last time on Symmetra;
she lost precision due to a very narrow
angle of opening, though, so she just started crawling
around with her knee in shatters. Widow landed next
to Tracer perfectly quietly.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Ready, luv?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Widow just nodded as she grasped for Tracer's torso. She didn't
feel the yank of Tracer's Chronal Accelerator – she&lt;!--'--&gt;
passed out. Tracer stroked her hair and somehow navigated
the air with much more ease than even when she was alone.
She had to cease quite shortly, though, as Widowmaker woke just
seconds after passing out.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
— Ah, magnifique. — She sighed, looking at the battlefield,
or at Tracer (it was rather hard to tell, especially from Tracer's&lt;!--'--&gt;
perspective).
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Aye, that was a most impressive display.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— &lt;em&gt;H&lt;/em&gt;what? — Widow was still somewhat confounded,
then noticed the ambiguity in her statement and
suddenly became flustered. Tracer didn't notice, as&lt;!--'--&gt;
she was cherishing how Widow was confused enough
not to let her go.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
And so they lasted, seemingly endlessly, cherishing a moment&lt;!--SOFT_BR--&gt;
tranquil as very few are for soldiers at war. Then it all&lt;!--SOFT_BR--&gt;
came down crashing like a broken mirror as adrenaline&lt;!--SOFT_BR--&gt;
made way for endorphins and endorphins – for exhaustion.&lt;!--SOFT_BR--&gt;
As many of these moments, this one was saved by the party&lt;!--SOFT_BR--&gt;
returning with figurative spoils.&lt;!--SOFT_BR--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
— Hey, aren't these our lost gals? — McCree,&lt;!--'--&gt;
suddenly alert, re-holstered
his Peacekeeper.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— It would seem that they are. — Zenyatta send out
his Orb to (a) treat their potential injuries and
(b) to harvest data about the situation. — I suggest
a delicate approach.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Well, they did a magnificent job out there, made our
work exceedingly easy. — Growled Seven-Six. —
We've gotta congratulate and/or thank them.&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— No medical assistance necessary, I presume? —
Inquired Mercy to Zenyatta.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— Indeed.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
By this time they'd approached Tracer&amp;amp;Widow to&lt;!--'--&gt;
a distance at which a converstaion could
be held comfortably.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Nice work out there; innovative in the ery deed. Our
job was just cleanup duty after that. — Seven-Six broke the silence
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Cheers, mate. — Tracer smiled and looked at Widow to see why
she was being so uncharacteristically
quiet and reacted not to the compliment, and quite a big one
at that, coming from Seven-Six. — Oh, she's&lt;!--'--&gt;
asleep, the poor thing — She gently poked Widow
and wispered in her ear. — Soldier here says you
did a good job.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Widowmaker woke. — Ah, merci.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Yaes? — Mercy tilted her head away from her conversation
with McCree. Then, realising her mistake,
giggled softly.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Y'all fancy a drink? All this Peacekeeping's making me
thirsty
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— I don't see why not. — Vocalised his approval&lt;!--'--&gt;
Seven-Six as everyone else nodded.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
As everyone was getting settled, Zen noted,
that Lena wasn't, as was usual, avoiding&lt;!--'--&gt;
Amélie, and, indeed, didn't as much as flinch when she&lt;!--'--&gt;
took a seat next to her.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Four whiskeys, please. — Inquired McCree the barman.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Upon receiving the order, and many orders thereafter,
unsurprisingly, everyone was rather intoxicated, yet
was holding strong (okay, barring Zenyatta, who vacated the
scene after Angela stopped being coherent). Even Amélie
and Lena, temporarily forgoing their differences, were leaning upon
each other, chanting a French-Brit love song. After
yet another round, Lena lost the delicate balance and fell onto
Amélie's thighs, fast asleep. Amélie shuddered, she&lt;!--'--&gt;
yearned for this, ever since Gérard died.
She sat Lena (mostly) upright, managed to
stand up herself, waved at the remaining party, someway
lifted Lena from under the table, where she managed to
slide, and thanking some lord for leaving her with perfect
motoric function despite her drunkedness, going up several
flights of stairs and fishng out the key to her room from
her vest. Having semi-sat-semi-laid Lena on her bed,
she untied both sets of shoes and slid them off,
wrangled the duvet from under Lena, laid next to her and then
it atop them. For the first time in however many years
she fell asleep quickly and without longing for Gérard;
as if knowingly, Lena's&lt;!--'--&gt;
head found her back and remained there. And that was the last thing
she remembered.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Sunlight hit the window blinds, dimly illuminating the small hotel
room as it did. The brightness, however suppressed, had woken
Lena, who lay against a back, eyes closed, reveling
in the sensation she'd been longing for ever since Emily's
passing. But, as such moments often are, this one needed to be interrupted,
this time but the need to dull out Lena's growing hangover headache by consuming&lt;!--'--&gt;
a sizeable amount of water, a task of monumental
difficulty, (a) because the headache got worse as she
moved and moving itself was already heavily impaired and (b) she was
extremely comfortable, and at the moment cared naught for
whose back her forehead was against. Eventually,
though, the moment had to be broken, for if she didn't&lt;!--'--&gt;
move at once she'd deface the shoulderblades in front of her,&lt;!--'--&gt;
herself and what she presumed to be the bed shie lie on with
the contents of her stomach. Somehow she managed to roll
off onto the floor and stumbled towards the nearest sink,
located in the bathroom, where she drank vigorously and
managed to keep her stomach in check, and began
to crawl back to where she lie before and froze temporarily as
her gaze fell upon Amélie. &quot;So she's gone and bloody&lt;!--&quot;--&gt;
done it.&quot; She thought. &quot;Oh well.&quot; And&lt;!--&quot;--&gt;
continuted along, as she did. Laying back down and
re-emplacing her forehead at Amélie's back, but, alas (or&lt;!--'--&gt;
not?) the temperature difference was enough to wake her.
Lena intook a breath sharplyand exhaled slowly,
shutting her eyes, making the moment last as logg as possible,
expecting it to be broken as soon as Amélie shifted over to face
her, but, instead, she just grabbed her and
hugged her closed to her chest.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Moments like this don't last; this&lt;!--'--&gt;
one did. It wasn't broken, it just transformed&lt;!--'--&gt;
when Lena felt Amélie's hot tears upon her face.&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— What's wrong, luv?&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— I don't know... Eve&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;ything's coming back to me... I 'aven't
felt this way since Gérard died. May I? — She interrupted,
pulling Lena in for a kiss. Lena reciprocated
with the highest degree of passion. Suddenly, she
couldn't wait any longer. She reached down to Amélie's waist and
put her hand under her shirt against the cold blue
back, sending shivers through both of them,
using it to slide the shirt off while Amélie
scrambled for the zipper on Lena's jacket, being&lt;!--'--&gt;
interrupted, however, by her shirt sliding past her eyes,
then pleasantly surprised the jacket having
slod off while her vision was obscured. As she
reached for Lena's trouser button, she was stopped&lt;!--'--&gt;
by her surprisingly strong, yet gentle, hands. Their
eyes met.&lt;/span&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— One more thing, luv.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— &lt;em&gt;Hmmmm&lt;/em&gt;? — Amélie was having problems with phrasing
anything coherent.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— I'm still pissed. — Lena's tone was hard to decypher
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— I know, I know, I know. — Her hands were set free and
felt her tears being butterfly kissed away by Lena's&lt;!--'--&gt;
soft lips, somehow managing to undo the button she
was struggling with &amp;amp; sliding the trousers down, finding
Lena's hands doing the same to hers. Soon they were&lt;!--'--&gt;
both relieved of their trousers, and adequately, Lena
was the first to plunge her fingers inside Amélie, implanting her
mouth on the Frenchie's, swallowing her moan as she reciprocated.&lt;!--'--&gt;
Both of them came fast and hard,
starved almost beyond belief (or, well, beforehand),
their moans melding into one as they did. No words were uttered
no sounds were made, a moment eternally
tranquil; moments like that aren't made to last,&lt;!--'--&gt;
yet this one, again, did, and drifted off as they fell asleep.
in each other's arms.&lt;!--'--&gt;
&lt;!--On placement of the apostrophe here: https://jakubmarian.com/each-others-vs-each-others-in-english--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
The sun set and they awoke again, conscious now of
everthing they had together. Or, well, most of it, anyway.
Some things needed to still be sorted out and made sure
about.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— So...
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Yaes?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Aren't you hungry, luv?&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— For you... — Amélie smiled. — But othe&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;wise, no.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Well, then, you obviously have something on your mind, so go first
first.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— &lt;em&gt;H&lt;/em&gt;why now, afte&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt; all this time? When did you stop to despise
me? — Amélie flushed, or, well, as best as she could.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— That purple's really cute, you should do that more&lt;!--'--&gt;
often. Or I guess I could. — Lena's mind suggested the view of&lt;!--'--&gt;
Amélie's cheeks as she came. — But, anyway, there&lt;!--'--&gt;
was something in you passing out in my arms, your body
against mine, in the withering Egyptian heat that made me finally
crack. As for my despising you... Shortly after I got out of the
black void my filfe became after Emily's death. I realised&lt;!--'--&gt;
you're just acting on orders and, well, you did get brainwashed&lt;!--'--&gt;
by Talon... — Lena sighed. — You fancy a cuppa?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Su&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;e. You 'ave questions, too?&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Ya, how'd you know to take me up here yesterday?&lt;!--'--&gt;
When'd you know you dig me?&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Pfh, did you &lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;eally think I passed out fo&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt; so long? — Now it was
Lena's turn to flush, which had nothing to do with the steam&lt;!--'--&gt;
from the Earl Grey she was making, Amélie grinned. — Not 'a&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;d&lt;!--'--&gt;
to p&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;etend to be &lt;em&gt;h&lt;/em&gt;when you&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt; pulse is almost as good as dead.
As fo&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt; shoveling, I always 'ad a wild c&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;ush on you, especially&lt;!--'--&gt;
afte&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt; I out of &lt;em&gt;my&lt;/em&gt; black void afte&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt; I killed Gérard.
But must of all, it was you, afte&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt; I passed out,
you made me feel – fo&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt; the fi&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;st time in a long time
ca&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;ed fo&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;, loved, even, I guess. — Lena leaned in with
the tea. — Ah, merci. — She took a sip. — Merdé, chaud!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Oi? It's obviously hot, (a) because it's how you do it
properly. — Lena looked temporarily stuck with love
to her homeland and the Queen, but composed herself
quickly – and (b) &lt;em&gt;you're&lt;/em&gt; hot, so it seemed appropriate.&lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Oh, you. — Amélie took another sip. — D&lt;span class=&quot;inv-r&quot;&gt;ʁ&lt;/span&gt;inkable.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Heyyy, you like it. Pass the test,
you did. — Lena giggled softly. — Also, I'd hoped that if I gave&lt;!--'--&gt;
you very hot tea you'll blush again, the purple's much
beter a colour than your usual blue.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Seeing that Amélie's finished her tea, Lena leaned in again&lt;!--'--&gt;
to kiss her, snatching the saucer&amp;amp;cup and setting
them down in relative safety. Into a kiss they pertained.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Moments like that aren't made to last, but sometimes,&lt;!--'--&gt;
just timetimes, they do. And they change the world.
&lt;/p&gt;
&lt;!--​--&gt;

&lt;p class=&quot;roboto&quot;&gt;
~10-20.03.2017&lt;br /&gt;
Kraków&lt;br /&gt;
A. Łopacińska
&lt;/p&gt;

</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/eye_see.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/eye_see.html" />
    <title> The Last Eye — nabijaczleweli </title>
    <updated>2017-02-02T13:45:35+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;The Last Eye&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5qfb3c/cw_write_a_story_in_the_firstperson_in_which_the&quot;&gt;&quot;The Last Eye&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;This is it, then, ay?&quot; A rhetorical question to a person long gone lingers in the air.&lt;br /&gt;
&lt;em&gt;*Sigh.*&lt;/em&gt; &quot;The big day...&quot; Muttering to myself was quite a weakness of mine. So was not checking my surroundings before rolling about in bed.&lt;br /&gt;
Smashing upon the floor wasn't the most pleasant thing, less so physically (it is but a 'bout a foot, after all).&lt;br /&gt;
&quot;&lt;em&gt;Don't&lt;/em&gt; keep rollin'...&quot; My banterous murmur and temporary grin trailed off into the void that filled my heart.&lt;br /&gt;
More so mentally, as that reminded me of my wife'&lt;!--'--&gt;s recent passing, as normally she was the one who slept at this side of the bed.
So no, the mutter was not to myself, it was to my late wife.
She's still here, y'know, talking to her doesn'&lt;!--'--&gt;t make me &lt;em&gt;crazy&lt;/em&gt;.
Well okay, maybe a little; or, given other more-less related effects, quite a lot.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Grasping at semi-literal straws (seeing as my mattress substitute was a lot lower-tech than a modern-day mattress),
  some degree of verticalism was achieved without much more damage to my bottom.
Then came the time for acquisition of carbon-based polymers, which today would be &lt;a href=&quot;http://uscilab.github.io/cereal&quot;&gt;cereal&lt;/a&gt;.
Or, rather, would &lt;em&gt;have been&lt;/em&gt; cereal, had it not been for the fact that the milk, which is essential for assembly of my dish of choice for the morning,
  had &quot;gone bad&quot;, as the youngsters call it, and was now emitting a stench so horrid the only place it deserved to visit was the facilities,
  wherein it was promptly baptised in roughly 1.32 gallons of wаtеr along with what was left of the contents of my stomach and intestines.
Upon returning to the kitchen, feelling surprisingly tranquil after being purged of all that was impure, my breakfast was now cancelled.
That decision wasn'&lt;!--'--&gt;t uninfluenced by the hallucination of my wife remarking &quot;You always did say you think better on an empty stomach.&quot;&lt;br /&gt;
&quot;S'pose yer righ'&quot; My response was mangled by a yawn, which caused my imminent fall backwards to be noticed much too late.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
The parquet never did hit my back, as the world around me vanished when my fall still had around 20° to go.
Okay, maybe &quot;vanished&quot; wasn'&lt;!--'--&gt;t quite the right word for it, a better phrase would be &quot;replaced by various images of nation-affecting catastrophes&quot;:
  the 9/11 attack, Чернобыль, Black Death, Canterbury TV, et caetera.
Soon enough, patterns started to appear, seemingly out of nowhere (probably another hallucination, oh well),
  connecting the seemingly unrelated and subtracting the images themselves, until...
The image was deeply unsettling, as if something that existed in more than the cosy three dimensions was sliding through the perception,
  but the conclusion could only be one: there was not a strand of hope, and boy would it be painful.
Seeing the choice between a death slow and painful and death swift and borderline painless, there really was no contest.
One last text, to a contact named &quot;Denise 💕&quot;: &quot;Love you.&quot;, and another one: &quot;Evacuate.&quot;.
Then, it was a simple matter of puncturing the veins around my wrists.
The world faded away in darkness.
&lt;/p&gt;
&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;What happened to my wife?&quot; Denise Abernathy yelled into the phone in panic. &quot;Just received a text from her phone!&quot;&lt;br /&gt;
&quot;But madam, you know as well as we do that is impossible. Your wife's phone hasn't been touched in three months and, lemme check, yep, it's still here.&lt;!--&quot;--&gt;
 The battery is dead, there is no way it&lt;!--'--&gt;'s been used.&quot; A very agitated hospital man puffed back into his phone.&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;Going there to investigate myself.&quot; Denise snarled back.&lt;br /&gt;
&quot;As is within your rights, you can visit your coma-affected relatives at any time.&quot;&lt;br /&gt;
&quot;As shall be done.&quot; Denise put away her phone and rushed past hospital man to the room her wife has been occupying for the past three months.&lt;br /&gt;
She was stopped at the door by doctor man that was assigned to the case.&lt;br /&gt;
&quot;How'd you know to get here?&quot; He asked, pretty startled. &quot;Was just going to the nearest phone to notify you...&quot;&lt;br /&gt;
&quot;Got these.&quot; Denise stuck her phone with opened text view into doctor man's hand and squeezed past him in the tight doorframe. &quot;But she's...&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;Yes, dead. We assessed her as such barely twenty minutes ago.&quot; He looked at Denise'&lt;!--'--&gt;s phone. &quot;Which coincides with the time of...&quot; &lt;em&gt;*Gasp.*&lt;/em&gt;
  &quot;Mrs. Abernathy, you don't think...&quot;&lt;br /&gt;
&quot;You know what she was, what she was capable of.&quot; She snapped. &quot;But if this is right, boy are we in trouble.&quot;&lt;br /&gt;
&quot;Like this?&quot; Doctor man pointed at the window with a sad grin, where the sky was being covered with hunks of steel. &quot;Ten more minutes, give-take?&quot;&lt;br /&gt;
Denise collapsed at the side of her wife'&lt;!--'--&gt;s bed, grasping her hand and brought it to her face, tears wetting their pale skin.
  She cried and whispered more to herself than her late wife's body. &quot;Why, Ciri? it wasn't supposed to go like this... The old blood, the sight...
  They were supposed to save us... Save you!&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
She felt a rush of blood through her temples. Ten seconds before doctor man and hospital man would, she vanished.
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/laser_cats.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/laser_cats.html" />
    <title> Ghostly Lasers — nabijaczleweli </title>
    <updated>2017-01-30T00:07:59+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Ghostly Lasers&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5qv165/wp_cats_interpret_laser_pointers_the_same_way&quot;&gt;&quot;Ghostly Lasers&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;Speak to me, father&quot;, I called loudly, &quot;for I am in need of advice.&quot;&lt;br /&gt;
&lt;em&gt;&quot;Oh what is it with this bloody cat, it's getting louder by the day!&quot; *Sigh.* &quot;Might as well try calm it down with this, eh?&quot;&lt;/em&gt;&lt;br /&gt;
My calls were answered: &quot;Right, let's get over this quick, I don't've much time for this advice shit.&quot;
  Must'&lt;!--'--&gt;ve caught him mid-something, a pity. I liked to chat with him when he had time.&lt;br /&gt;
&lt;em&gt;&quot;Shouldn't he be chasing the laser instead of meowing at it?&quot;&lt;br /&gt;
    &quot;No idea. Do continue meowing, though, seems to calm him down faster.&quot;&lt;/em&gt;&lt;br /&gt;
&quot;Father, I turn to you for advice once again, for I am facing a conundrum of the century&quot;&lt;br /&gt;
&lt;em&gt;*Sigh.*&lt;/em&gt; &quot;And that'd be?&quot;&lt;br /&gt;
&quot;I was wondering, whether, should I find myself in a situation...&quot; My father'&lt;!--'--&gt;s image flickered. &quot;Are you listening?&quot;&lt;br /&gt;
&lt;em&gt;&quot;Don't unclick the pointer! Is your hand shaking?&quot;&lt;br /&gt;
    &quot;I just get excited by science in any and all forms, and you've got a notepad, so we're no longer just fucking around with our cat.&quot;&lt;/em&gt;&lt;br /&gt;
&quot;I am listening.&quot;&lt;br /&gt;
&quot;Should I find myself in a situation that presents itself as providing me two food sources, one of which is not meant for me,&lt;!--&quot;--&gt;
  is it acceptable to consume food from both sources?&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
My father'&lt;!--'--&gt;s image seems to have steadied slightly as his voice was no longer bored.
&quot;Indeed, that is the question for a lifetime. I shall discuss it with the elders. I will get back to you tomorrow.&quot;&lt;br /&gt;
&lt;em&gt;&quot;My hand's shaking too much, take the pointer and I'll meow and take notes instead.&quot;&lt;/em&gt;&lt;br /&gt;
&quot;Farewell, father.&quot; I bid and backed out of the room.&lt;br /&gt;
&lt;em&gt;&quot;So that's just it, eh? It just meows for the last time and leaves?&quot;&lt;br /&gt;
    &quot;As is clearly evident. So what should we do with the notes?&quot;&lt;br /&gt;
    &quot;No earthly idea, let's stash them somewhere and append to them next time.&quot;&lt;/em&gt;
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/degenerate.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/degenerate.html" />
    <title> Degenerate Watch — nabijaczleweli </title>
    <updated>2017-01-08T04:00:46+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Degenerate Watch&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5l09xc/wp_write_a_story_where_the_plot_is_based_on_some&quot;&gt;&quot;Degenerate Watch&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Degenerate call 2016, the biggest annual source of income for many governmental workers, including me.
Hell, it'&lt;!--'--&gt;s not even that the job'&lt;!--'--&gt;s hard or requires special training, which it doesn'&lt;!--'--&gt;t,
  it'&lt;!--'--&gt;s just that there'&lt;!--'--&gt;s a tremendous amount of degenerates to be handled in a three-day period.
Thankfully enough, my departament handles the stage 2 of degenerate handling process, so we already get them presorted as the music-listening kind.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
The process is really not that bad, for the most of them.
Just the usual questions about sexual activity, influence of certain artists over the individual degenerate'&lt;!--'--&gt;s life, et cetera; routine stuff, really.
Then come the head-splintering verification tests. That sounds scary but it'&lt;!--'--&gt;s basically a polygraph that lets us gleam a little bit more information.
If you answered truthfully you'&lt;!--'--&gt;ll have no problems and we ask you to come again next year.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
If, however, you lied or you otherwise confessed to being heavily influenced by &lt;em&gt;&lt;strong&gt;REDACTED&lt;/strong&gt;&lt;/em&gt;,
  not that there'&lt;!--'--&gt;s anything inherently wrong with that (some would even call you an innocent victim),
  there'&lt;!--'--&gt;s a good chance your family will not ever see you again.&lt;br /&gt;
...And recognise you.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Our national theatre hosts an annual life-sized puppet show.
The strings that hold up the puppets are made of shoelaces, and there'&lt;!--'--&gt;s probably some historical reason for that, not that I'&lt;!--'--&gt;d care.
Regardless of how obvious that makes the puppetry,
  it'&lt;!--'--&gt;s highly praised for &quot;incredible life-likeness&quot; and &quot;movement fluent as if the puppets had a life of their own&quot;, but I already said too much...
&lt;em&gt;*Vocal scratch.*&lt;/em&gt;
&lt;/p&gt;
&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&lt;em&gt;There'&lt;!--'--&gt;s no time for that, it matters naught, now the only relief is in dance.
Dance and fly, high as a kite. The highest praise – the sighs of amazement from the crowd.&lt;/em&gt;
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/trucks_a_cash.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/trucks_a_cash.html" />
    <title> Utopian Assassin — nabijaczleweli </title>
    <updated>2016-12-31T18:30:49+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Utopian Assassin&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5l4iqi/wp_in_a_futuristic_utopia_the_government_mails&quot;&gt;&quot;Utopian Assassin&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Life'&lt;!--'--&gt;s easy. For ordinary people. You do something good, you get money in up to 7 days processing time plus postal service delays.
You make someone happy, you get money in up to 7 days processing time plus postal service delays. You get the idea.
Here'&lt;!--'--&gt;s another simple-to-get idea: the better the thing you do, or the happier you make someone the more money you get
  (in up to 7 days processing time plus postal service delays).
I met one of the guys that make the formulas for payout calculations, they'&lt;!--'--&gt;re &lt;em&gt;crazy&lt;/em&gt;, lemme tell ya.
The whole money-for-good-stuff business reflected positively on human happiness and economical growth in the last couple of years,
 all more the reason to rejoice, right?
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Locally, yes. Globally, not quite.
You see, the whole utopian government business works on a medium scale, but doesn'&lt;!--'--&gt;t quite scale up to the level of the whole continent.
Also, the system doesn'&lt;!--'--&gt;t actually &lt;em&gt;punish&lt;/em&gt; bad behaviour, so, naturally, people have taken to exploiting it.
How to exploit the system? Keep slaves and sometimes don'&lt;!--'--&gt;t beat them! Magnificent. Fucking. Job. Extraordinary, utopian government.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
That'&lt;!--'--&gt;s where I come in. I'&lt;!--'--&gt;m an official governmental assassin.
That means that not only do I get to murder people and get paid for it, which is pretty sick,
  but I also work for the government so I need not worry about the bodies.
The guy that was keeping slaves? Fucking slaughtered, thanks to our utopian government law enforcement'&lt;!--'--&gt;s demographics department.
Maybe you'&lt;!--'--&gt;re not as bad, utopian government.
The downside is I legally can'&lt;!--'--&gt;t claim happiness money for killing people that were causing dishappiness,
  much like a detective can'&lt;!--'--&gt;t claim money for bringing a sought fugutive to justice.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
So, one day I'&lt;!--'--&gt;m woken up by a courier ringing at my door.&lt;br /&gt;
&quot;Comiiiiiiiiiing!&quot; I yelled to get him off the damned bell.&lt;br /&gt;
&quot;Sir, there's a delivery for you. You need to sign &lt;em&gt;here&lt;/em&gt; and &lt;em&gt;here&lt;/em&gt;.&quot; He gestured at dotted areas as I started to read the delivery bill.&lt;br /&gt;
&quot;This can't be right...&quot; I muttered to myself. &quot;A'ight, thanks, mate. Dump it there.&quot;
 I gestured over in the general direction of the old German bunker I had cleaned up in my back yard.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Yawning and examining the delivery bill closer, I stumbled back in. Three hundred thousand dollars. In fifty-cent coins. From the government.
Labeled &quot;happiness money&quot;. Couldn'&lt;!--'--&gt;t be right.
I failed to recall any recent non-government-contracted murders of this magnitude, so I called my handler (of course I have a handler).&lt;br /&gt;
&quot;Yo, I just got a delivery of three hundred thousand dollars in halves.&quot; I started, still perplexed.&lt;br /&gt;
&quot;So what's the problem?&quot;&lt;br /&gt;
&quot;It's labeled 'happiness money' and I haven't done any off-the-books contracts recently.&quot;&lt;br /&gt;
&quot;You know well and good that we have no knowledge as to the cause. And I checked that transfer personally, it's correct.&quot;&lt;br /&gt;
&quot;Righty ho'...&quot; I tried to end the conversation, but I got interrupted.&lt;br /&gt;
&quot;You should turn on the news.&quot;&lt;br /&gt;
And so I did. &quot;&lt;em&gt;Recent reports suggest that the leader of the communist Cuba was assassinated yesterday and the people have started a coup.&lt;/em&gt;&quot;&lt;br /&gt;
&quot;I guess they'll be able to overthrow the government, but how does that factor into...&quot;&lt;br /&gt;
&quot;Think! Who killed the guy?&quot;&lt;br /&gt;
&quot;I did, and you know that. But I can't receive happiness money for that because you, as in the government, contracted it.&quot;&lt;br /&gt;
&lt;em&gt;*Slapping sound.*&lt;/em&gt; &quot;Oh god, I just remembered.&quot;&lt;br /&gt;
&quot;Did you just facepalm &lt;em&gt;in real life&lt;/em&gt;?&quot;&lt;br /&gt;
&quot;Yes. But I remembered why you got that money.&quot;&lt;br /&gt;
&quot;And?&quot;&lt;br /&gt;
&quot;The legislation says you can't collect happiness money resulting from your governmental contracts &lt;em&gt;in the country&lt;/em&gt;.&quot;&lt;br /&gt;
&quot;Well, that's an oversight, right?&quot;&lt;br /&gt;
&quot;Yep, I'll take it up with the higher-ups. But for now, enjoy your new-found wealth.&quot;&lt;br /&gt;
&quot;A'ight, see ya, mate.&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Life'&lt;!--'--&gt;s easy. Now for Cubans and me, too.
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/not_dead_yet.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/not_dead_yet.html" />
    <title> Get up，soldier — nabijaczleweli </title>
    <updated>2016-12-29T21:51:50+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Get up，soldier&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5ks29s/wp_get_up_soldier_youre_not_dead_yet&quot;&gt;&quot;Get up，soldier&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Pain, left shoulder. Reocurring every three seconds.
Inhalation. Sharp pain in back of right lung and dull, dry pain in throat.
Facial muscles, all roughed up, but functional.
Left thigh. &quot;Aaaagh!&quot; Shot, definitely shot.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;Oh, you're awake. Magnificent.&quot; One more kick to the left shoulder.
  &quot;Get up, soldier. There's work for you to do.&quot; Raspy voice. His CO? Close. His CO'&lt;!--'--&gt;s superior, more like it.&lt;br /&gt;
&quot;Aaaaai got shot.&quot; &lt;em&gt;Wheezing.&lt;/em&gt; &quot;And died.&quot;&lt;br /&gt;
&quot;Old. Soldiers. NEVER! DIE!&quot; Each word was accented with another kick. &quot;Now. &lt;em&gt;&lt;strong&gt;GET UP!&lt;/strong&gt;&lt;/em&gt;&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Memories came flooding. The CO'&lt;!--'--&gt;s brain splattering upon his uniform. Ripping off his mags, rifle and sidearm.
Bob stepping on a landmine. Scavenging his corpse for spare rounds.
Getting surrounded by seven al-Quaeda riflemen. They were low on ammo, too.
Managing to shoot four of them dead before catching a bullet in his left thigh, then finishing the rest.
Bleeding out on his face in the middle of some Yemenian desert. Being left to die.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
But two details didn'&lt;!--'--&gt;t quite match up. One, how the &lt;em&gt;fuck&lt;/em&gt; was he alive?
He definitely remembered bleeding out through two bullet holes in his left thigh and being able to do naught about it,
  not to omit the excruciating pain caused by his shattered left femur.&lt;br /&gt;
Now, his thigh was still hurting, but not as excruciatingly as back then, and he was able to put his full body weight on it,
  which would be rather tricky if his bones were shattered.
And it seemed to be getting better by the hour.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;So, what's all this about? Me being back from the dead and all? And before you say something,&lt;!--&quot;--&gt;
  I &lt;em&gt;remember&lt;/em&gt; bleeding out in the middle of a desert after getting shot.&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;You see, mate, you never really died. I mean, you did &lt;em&gt;die&lt;/em&gt;, just... Y'know you never committed to being dead,&lt;!--&quot;--&gt;
 and you'&lt;!--'--&gt;ve been in the force for numerous years. Can I also assume you didn'&lt;!--'--&gt;t &lt;em&gt;want&lt;/em&gt; to die?
 That you wanted to give those motherfuckers what they deserve and finish your mission despite 'bleeding out in the middle of a desert'?&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;Yes, and... Yes. But what does that...&quot;&lt;br /&gt;
&quot;You seriously don't get it?&quot; His CO'&lt;!--'--&gt;s superior interrupted him. &quot;Your family is soldiers all the way down to six generations back.&lt;!--&quot;--&gt;
 You'&lt;!--'--&gt;ve never been told stories of this as a child?&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;Evidently not, so cut to the chase, would ya'? You said there's some work for me.&quot;&lt;br /&gt;
&quot;'Attaboy! So, as you can see, you're back and kickin'. How's yer leg?&quot;&lt;br /&gt;
&quot;Suspiciously not shattered, I can tell you that.&quot;&lt;br /&gt;
&quot;So that, too, checks out. Neat. It's the first time I've attended the process in person.&quot; An unreadable nod and grin.
 &quot;You're probably asking yourself how this came to transpire.&lt;!--&quot;--&gt;
 Well, it all began around the thirteenth century before current era when king Menelaus of Sparta prayed to the gods
 to ask them how he could prevent his best warriors from dying on the battlefield. Since his best men were also the oldest, he phrased it like so.
 After many a day of negotiations he struck a deal, so old soldiers, when gravely injured on the field of battle, could be brought back to active duty,
 so long, of course, as you'&lt;!--'--&gt;re able to piece the solid pieces back together.&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;So I'm guessing that's why both my CO and Bob aren't here?&quot;&lt;br /&gt;
&quot;Well, it's hard to put someone back together after they stepped on a landmine, yeah. As for your CO, he was a Russian spy so we wouldn't even try to.&quot;&lt;br /&gt;
&lt;em&gt;*Sigh.*&lt;/em&gt; &quot;Right. But since that was a deal that that Greek guy struck, what's the catch?&quot;&lt;br /&gt;
&quot;You can and will die irreversibly of old age and/or when you get out of active service, whichever comes first.&quot; Glance at watch.
 &quot;Your thigh should be fully recovered by now. Come on kick me with your left leg. Give me your best shit.&quot; Stumble backwards.
 &quot;Not bad. How's the output?&quot;&lt;br /&gt;
&quot;&lt;em&gt;Within norm, sir.&lt;/em&gt;&quot; A metallic female voice responded.&lt;br /&gt;
&quot;Magnificent. Cheers, Athena. So, if you don't have any questions let's get right to the briefing, shall we?&quot;&lt;br /&gt;
&quot;Lead the way.&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
After the briefing and out on the field once again, he realised what the second detail was.
He should have felt joy when he was told he'&lt;!--'--&gt;d return to active duty and sorrow after Bob and (less so, but still) his CO.
It was too late before he realised that he was turning into an equivalent of a remorseless and feelings-lacking CIA zombie-merc like on the news,
 just for the U.S. Military; and that he was surprisingly okay with that.&lt;br /&gt;
He smiled and muttered to himself. &quot;Old soldiers never die.&quot; That was his last conscious thought.
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/green_ass_dog.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/green_ass_dog.html" />
    <title> Cucumber Dog — nabijaczleweli </title>
    <updated>2016-12-29T15:37:19+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Cucumber Dog&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5kt8x0/wp_you_meet_a_dog_who_stands_upright_with_his&quot;&gt;&quot;Cucumber Dog&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Jakub was returning from the pub when he stumbled upon a stray.
Normally he'&lt;!--'--&gt;d just kick it and stumble forward but this thing had a toxic-green knapsack and was somehow resilient to his multiple kicks.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;Kurde, what was I drinking?&quot;, he muttered to himself, &quot;I'm supposed to be seeing white mice and/or elephants, not poodles with backpacks.&quot;&lt;br /&gt;
&quot;I am on a journey looking for Ass, Potatoes, &amp;amp; Cucumbers. Can you assist me?&quot;, responded the dog.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
There were, however, two problems. First, the dog'&lt;!--'--&gt;s voice was rather high-pitched and quiet.
That was quickly fixed by Jakub stumbling and falling upon a bump in the road and the dog utilising that opportunity to repeat its line.
The second, however, was much greater – Jakub understood not a &lt;em&gt;word&lt;/em&gt; of English.
He recognised that the dog spoke the language, though, as that sounded rather similarly to what his grandson tried to teach him over the summer holidays.
He struggled for a Very Long While as he searched for a single word of English his grandson managed to teach him.
It was proving elusive, until...
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;Okej&quot;, that was the only word he could remeber in this state.&lt;br /&gt;
&quot;Magnificent. I'll just follow you, then&quot;, the dog responded, not that Jakub understood. Or, for that matter, listened at all.&lt;br /&gt;
&quot;Okej&quot;, Jakub confirmed again.&lt;br /&gt;
The dog was still babbling but Jakub cut it out and forced himself to attempt to walk in a roughly straight line. The dog, thankfully, followed.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
By the time he arrived at his house Jakub was sober enough to regain the nimbleness of his fingers.
He pulled out his trusty brake cord with a loop on the end, and, like many before, made short work of the dog.&lt;br /&gt;
Assessing his haul, he nodded affirmatively: a couple days'&lt;!--'--&gt; worth of fresh meat and an unused toxic-green knapsack,
  a perfect gift for his grandson when he comes over for holidays.
&lt;/p&gt;
&lt;br /&gt;
&lt;p&gt;
This is based upon &lt;a href=&quot;https://pl.wikipedia.org/wiki/Andrzej_Pilipiuk&quot;&gt;Andrzej Pilipiuk&lt;/a&gt;'&lt;!--'--&gt;s
  book series about &lt;a href=&quot;https://pl.wikipedia.org/wiki/Jakub_W%C4%99drowycz&quot;&gt;Jakub Wędrowycz&lt;/a&gt;.
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/six_minutes.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/six_minutes.html" />
    <title> Six Minutes — nabijaczleweli </title>
    <updated>2016-12-28T01:54:52+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Six Minutes&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5kb0q6/cw_two_people_talking_the_scene_only_lasts_a_few&quot;&gt;&quot;Six Minutes&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;'Ello, luv! What can do for ya'?&quot;&lt;br /&gt;
&lt;em&gt;Pfft.&lt;/em&gt; &quot;Drop the damn pretense. Glad you're here. Pass me that pouch, would ya'?&quot;&lt;br /&gt;
&quot;Heavy stuff; what's in there? 'Новинки'&lt;a href=&quot;#asterix1&quot;&gt;*&lt;/a&gt;?&quot;&lt;br /&gt;
&quot;Heh, look at this one, for example.&quot; &lt;em&gt;*Metal-metal clang.* *Click.* *Metal-metal clang.*&lt;/em&gt; &quot;Ready? Observe!&quot; &lt;em&gt;*Explosion.*&lt;/em&gt;&lt;br /&gt;
&quot;What happened to that guy's &lt;em&gt;face&lt;/em&gt;?&quot;&lt;br /&gt;
&quot;Oh, y'know. It just kind of... ceased to exist.&quot;&lt;br /&gt;
&quot;What's &lt;em&gt;in&lt;/em&gt; these rounds?&quot;&lt;br /&gt;
&quot;Oh, various things. Observe!&quot; &lt;em&gt;*Metal-metal clang.* *Click.* *Metal-metal clang.* *Explosion.*&lt;/em&gt;&lt;br /&gt;
&quot;That tank... just...&quot;&lt;br /&gt;
&quot;Exploded, yes.&quot;&lt;br /&gt;
&quot;But you're not supposed to be able to do that with a &lt;em&gt;bullet&lt;/em&gt;.&quot;&lt;br /&gt;
&quot;Those are not ordinary rounds. They're manufactured by our capitalist 'friends' over in America.&lt;!--&quot;--&gt;
 That'&lt;!--'--&gt;s what they call an '&lt;!--'--&gt;ayy-pee-aii'&lt;!--'--&gt;, I think that stands for Armour-Piercing-Incendiary?&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;It pierces even tank-grade armour?&quot;&lt;br /&gt;
&quot;Clearly, yes. But you came here to discuss...?&quot;&lt;br /&gt;
&quot;You. Me. Us.&quot;&lt;br /&gt;
&quot;Oh?&quot; &lt;em&gt;*Explosion.*&lt;/em&gt;&lt;br /&gt;
&quot;You can stop accenting everything you say by shooting your rifle, y'know?&quot;&lt;br /&gt;
&quot;Fine.&quot; &lt;em&gt;*Explosion.* Giggle.&lt;/em&gt; &quot;A'ight, I'll stop. You were saying...&quot;&lt;br /&gt;
&quot;Yes, us.&quot;&lt;br /&gt;
&lt;em&gt;*Encouraging silence.* *Explosion.*&lt;/em&gt;&lt;br /&gt;
&quot;We can't stay here. Not for much longer, anyway. You &lt;em&gt;know&lt;/em&gt; what they do to the likes of us, and they're growing suspicious already.&quot;&lt;br /&gt;
&quot;You can rule me out of the equa-&quot; &lt;em&gt;*Explosion.*&lt;/em&gt; &quot;-tion.&quot;&lt;br /&gt;
&quot;Why? What's happened, luv? I thought you joined the army, and I followed, to finance our escape to your, as you called them,&lt;!--&quot;--&gt;
 capitalist 'friends' over in the Americas.&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;Well, yes. That &lt;em&gt;was&lt;/em&gt; the plan at the time. And still &lt;em&gt;is&lt;/em&gt; for you. As for me...&quot; &lt;em&gt;*Explosion.*&lt;/em&gt; &quot;Good shit.&lt;!--&quot;--&gt;
 ...as for me, I can'&lt;!--'--&gt;t do that.&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;Why, love? What happened? Can I help?&quot;&lt;br /&gt;
&quot;Guessing that's one way to break the news to you. I'm dying. I'm practically dead as is. Cancer, terminal. The doctor gave me a month or two.&lt;!--&quot;--&gt;
 Increasing calcification, first of...&quot; &lt;em&gt;*Explosion.*&lt;/em&gt; &quot;Meh. ...first of the skeleton, originating in my right shoulder,
 then spreading all the way to my brain&lt;a href=&quot;#asterix2&quot;&gt;**&lt;/a&gt;, and that'&lt;!--'--&gt;s probably what'&lt;!--'--&gt;s gonna kill me.&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&lt;em&gt;Sobbing.&lt;/em&gt; &quot;No way to save you?&quot;&lt;br /&gt;
&quot;Nah, I enlisted with the army because if I die here it'll be probably less painful than what'd occur 'naturally'.&quot; &lt;em&gt;*Explosion.*&lt;/em&gt;&lt;br /&gt;
&lt;em&gt;Deepened sobbing.&lt;/em&gt;&lt;br /&gt;
&quot;Oh come on, not even a faint smile for that?&quot; &lt;em&gt;Sigh.&lt;/em&gt; &quot;I have a plan for you. After I die and your deployment ends you take my money,&lt;!--&quot;--&gt;
 you have the account details, right?&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&lt;em&gt;Nod.&lt;/em&gt;&lt;br /&gt;
&quot;You take my money, you should have enough, fly to America and find yourself a nice lass, alright?&quot;&lt;br /&gt;
&quot;Y- yes.&quot;&lt;br /&gt;
&lt;em&gt;Growl.&lt;/em&gt; &quot;Goddammit, soldier! How are you to respond to a higher-ranked officer!&quot; &lt;em&gt;*Explosion.*&lt;/em&gt;&lt;br /&gt;
&lt;em&gt;Faint smile.&lt;/em&gt; &quot;&lt;strong&gt;Yes, sir!&lt;/strong&gt;&quot;&lt;br /&gt;
&quot;I knew I could get something out of you t'day. Gimme a hug and run. Save yourself. They've broken through our defences.&lt;!--&quot;--&gt;
 Tell the others that I say that we won'&lt;!--'--&gt;t hold up much longer.&quot;&lt;br /&gt;&lt;!--&quot;--&gt;
&lt;em&gt;*Hugging.*&lt;/em&gt; &quot;I love you.&quot;&lt;br /&gt;
&quot;I know. Now &lt;em&gt;&lt;strong&gt;GO&lt;/strong&gt;&lt;/em&gt;! See you in hell!&quot;&lt;br /&gt;
&lt;em&gt;Reassured. Determined.&lt;/em&gt; &quot;Make Satan sorry he's met you!&quot; &lt;em&gt;*Distant sound of bootsteps.*&lt;/em&gt;&lt;br /&gt;
&lt;em&gt;*Brass clatters in a leather pouch.*&lt;/em&gt;
&lt;/p&gt;
&lt;p&gt;
&lt;span id=&quot;asterix1&quot;&gt;*Новинка &lt;sub&gt;(rus)&lt;/sub&gt;&lt;/span&gt; – novelty/gimmick.&lt;br /&gt;
&lt;span id=&quot;asterix2&quot;&gt;**Cancer in the form of full brain calcification&lt;/span&gt; – I'&lt;!--'--&gt;m not a doctor but I think I heard that'&lt;!--'--&gt;s possible?
&lt;/p&gt;
&lt;p&gt;
I took the liberty of considering nonverbal parts of a conversation &quot;dialogue&quot;, too.
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/dead_santa.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/dead_santa.html" />
    <title> No gifts this year — nabijaczleweli </title>
    <updated>2016-12-26T02:01:20+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;No gifts this year&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5j7m3m/ip_no_gifts_this_year&quot;&gt;&quot;No gifts this year&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;&lt;em&gt;Fuck&lt;/em&gt;, this one was supposed to be Othala, not Jera!&quot;&lt;br /&gt;
&quot;Well, it's too late now... Run for your goddamn lives!&quot;&lt;br /&gt;
&quot;What about the old man? Won't he get mad?&quot;&lt;br /&gt;
&quot;Whatever he'll do to us is better than what this one's gonna do if we don't run now. Now get a move on, you two!&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&amp;emsp;&quot;Where are the cherubs? Haven't heard them in a while.&quot;&lt;br /&gt;
&quot;Oh, they're out summoning Stan; that's what they told &lt;em&gt;me&lt;/em&gt;, anyway.&lt;!--&quot;--&gt;
  They get so lonely in the season, wouldn'&lt;!--'--&gt;t you say?
  Hard for them to get a friend anywhere close to &lt;em&gt;here&lt;/em&gt;, eh?&quot;&lt;!--&quot;--&gt;
  &lt;em&gt;*Sigh.*&lt;/em&gt;&lt;br /&gt;
&quot;Well, as long as they're having fun...&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;Check who lives there, I remember his neighbourhood being pretty terrible.&quot;&lt;br /&gt;
&quot;You're right. More than you'd ever want to.&quot;&lt;br /&gt;
&lt;em&gt;*Encouraging silence.*&lt;/em&gt;&lt;br /&gt;
&quot;We got...&quot; &lt;em&gt;*Deep breath.*&lt;/em&gt; &quot;Satan.&quot;&lt;br /&gt;
&quot;What the fuck should we do &lt;em&gt;now&lt;/em&gt;? Tell the old man? He'll kill us.&quot;&lt;br /&gt;
&quot;Well, so will goddamn &lt;em&gt;Satan&lt;/em&gt; if we don't get away from here &lt;em&gt;now&lt;/em&gt;.&quot;&lt;br /&gt;
&quot;Alright, let's go. South.&quot;&lt;br /&gt;
&quot;Too late... That's him.&quot;&lt;br /&gt;
&quot;&lt;em&gt;&lt;strong&gt;HIDE, THEN, YOU RETARDS!&lt;/strong&gt;&lt;/em&gt;&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;What is it, luv? Anything bothe...&quot;&lt;br /&gt;
&quot;&lt;em&gt;Hush!&lt;/em&gt; What's that?&quot;&lt;br /&gt;
&quot;Can't hear anything...&quot;&lt;br /&gt;
&quot;By the nine... Stay here. Better yet, hide somewhere smell-proof!&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;So, we meet again, old 'friend'.&quot;&lt;br /&gt;
&quot;&lt;em&gt;You were hiding right. Not anymore. Your death is imminent.&lt;/em&gt;&quot;&lt;br /&gt;
&quot;Would it surprise you to hear that I learned a couple of tricks, too?&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;Old man's tricks didn't do him much good, did they?&quot;&lt;br /&gt;
&quot;Not much you can do when your opponent moves faster than you can perceive it&lt;!--&quot;--&gt;
  and interrupts the old-as-world cliché of pre-decisive-battle hero-villain conversation, is there?&quot;&lt;!--&quot;--&gt;&lt;br /&gt;
&quot;At least he killed the thing...&quot;&lt;br /&gt;
&quot;...but it mutilated him first. Let's get out of here. Shit makes me queasy.&quot;
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/start_eq_end.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/start_eq_end.html" />
    <title> End = Start — nabijaczleweli </title>
    <updated>2016-12-24T15:00:32+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;End = Start&quot; --&gt;

&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5jor6i/cw_you_must_start_and_end_your_story_by_using_the&quot;&gt;&quot;End = Start&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Not ever would she expect this.&lt;br /&gt;
She was supposed to be dead weeks ago,&lt;br /&gt;
A dead woman walking.&lt;br /&gt;
Not the whole of her was dead, though.&lt;br /&gt;
She was carrying life.&lt;br /&gt;
Her last words: &quot;run, while you still can&quot;.&lt;br /&gt;
And there she stood, reborn; and hungry for blood.&lt;br /&gt;
The procedure worked.&lt;br /&gt;
Not ever would she expect this.
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing_prompts/theless.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing_prompts/theless.html" />
    <title> The-less — nabijaczleweli </title>
    <updated>2016-12-24T02:04:36+01:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;The-less&quot; --&gt;


&lt;a href=&quot;https://www.reddit.com/r/WritingPrompts/comments/5ihrpc/cw_write_a_story_without_using_the_word_the&quot;&gt;&quot;The-less&quot;&lt;/a&gt;&lt;br /&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Now, she didn'&lt;!--'--&gt;t want &lt;em&gt;any&lt;/em&gt; of this. All that Queen&amp;amp;Country service was putting a tax on her.
No, she wasn'&lt;!--'--&gt;t exactly unhappy with it, as her salary was surprisingly high for a governmental worker,
  but she had a family and spending upwards of ten hours at her office wasn'&lt;!--'--&gt;t exactly something her wife and proverbial kids appreciated.
Not that she had much choice, anyway. There were certain forces at play that would notify much more certain authorities of some
  high-treason-sentence-worthy activity from her past should she leave or do anything untoward with regards to her work.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Capitalist ventures like that of Mrs. Burnham are commonplace around Britain.
What is much less common is for them to be undiscovered foreign government spy outposts, still quite like that of Mrs. Burnham.
Having a close relative (like, for example, a spouse) in a governmental position doesn'&lt;!--'--&gt;t help keeping up a front like that (regular background checks),
  but having an easy, regular access to said government'&lt;!--'--&gt;s secrets greatly outweighs ever increasing risk of discovery.
&lt;/p&gt;
&lt;p class=&quot;writing indented continued&quot;&gt;
— You?! But... Why? – Sarah broke down
&lt;/p&gt;
&lt;p class=&quot;writing indented continuing&quot;&gt;
— Oh, you didn'&lt;!--'--&gt;t catch on? You were even more stupid than I thought. –
  Fenella shrugged, now affixing a silencer to a run-down pistol with numbers sanded off.
&lt;/p&gt;
&lt;p class=&quot;writing indented continuing&quot;&gt;
— So that'&lt;!--'--&gt;s all I was to you? A tool?, a means to an end? – She regained her composure.
&lt;/p&gt;
&lt;p class=&quot;writing indented continuing&quot;&gt;
— Mostly, yes. I mean, your coital expertise is extraordinary, too, but it was just a bonus, really.
&lt;/p&gt;
&lt;p class=&quot;writing indented continuing&quot;&gt;
— So, before you kill me, just one more thing, luv. My so-called last words, if you will?
&lt;/p&gt;
&lt;p class=&quot;writing indented continuing&quot;&gt;
— Sure, I guess it &lt;em&gt;is&lt;/em&gt; your priviledge as an executee.
&lt;/p&gt;
&lt;p class=&quot;writing indented continuation&quot;&gt;
— &quot;Painted Black&quot;
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
Snipers fire.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;Here lies Fenella Burnham, 1983-2016. Beloved wife and dedicated merchant.&quot;&lt;br /&gt;
Much lower, were you normally wouldn'&lt;!--'--&gt;t look, a Maltan flag is engraved.
&lt;/p&gt;
&lt;p class=&quot;writing indented&quot;&gt;
&quot;Here lies Sarah Burnham, 1984-2057. Beloved wife and selfless defender of Queen And Country.&quot;
&lt;/p&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing/każdy_koniec_to_nowy_początek/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing/każdy_koniec_to_nowy_początek/" />
    <title> Każdy koniec to nowy początek — nabijaczleweli </title>
    <updated>2016-09-22T01:20:31+02:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Preface&quot; --&gt;


&lt;p class=&quot;indented roboto&quot;&gt;
The following work is a product of its own time,&lt;!--SOFT_BR--&gt;
and as such doesn't represent the author's current views&lt;!--SOFT_BR--&gt;
and skillset. It also references context from that time,&lt;!--SOFT_BR--&gt;
and as such is kept in the same state as it was in&lt;!--SOFT_BR--&gt;
when it was turned over to a potential third-party at&lt;!--SOFT_BR--&gt;
that specific time, in that specific context.
&lt;/p&gt;

&lt;br /&gt;
&lt;!-- ePub title: &quot;Każdy koniec to nowy początek&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center&gt;&lt;h2 class=&quot;merriweather&quot;&gt;Każdy koniec to nowy początek&lt;/h2&gt;&lt;/center&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok&lt;a href=&quot;#asterix1&quot;&gt;*&lt;/a&gt; 238 po Powstaniu. Kapitalizm rosprzestrzenia się po
Þyffenþarru terenach, i, как то kapitalizm, egoizm
szerząc i propagując. Jakkolwiek negatywne konotacje słowo
to posiadać się wydaje, wielce jest to rzeczą pozytowną,
jako, że egoizm (i, co za tem idzie, przetrwanie własne)
przeżyć naszemu gatunkowi przez lat milijony pozwalał.
Cóż, naszemu; Naszemu (przez duże 'N'), jed-
nakowóż, nie. Niektórzy twierdzą że atrybutować
przynależy ową właściwość innemu mózgowi i układowi
jego, ja jednak, iże ubocznem produktem jest
ona psionicznem&lt;a href=&quot;#asterix2&quot;&gt;**&lt;/a&gt; właściwościom Naszem,
co też powoduje naturalny
ciąg do socjalizmu i innych unitarnych
społecznych systemów. Sprawia to,
wraz z tradycją, że kapitalism jest czemś nowem i
od czegokolwiek innego przez Nas znanego innem,
toteż szedł lat opornie przez pierwszych lat parę,
więc i ruchy pseudopolityczne utworzyły się, ale wkrótce
rozpadły się pod Naciskiem y po logicznemu rozumowaniu.
Do czasu, anyway.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 1328 po Powstaniu. Wraz z kapitalizmem rozwijają
się psioniczne właściwości Nasze. U niektórych (&lt;em&gt;nota bene&lt;/em&gt;
głównie w klasie średniej i wyższej) moc psioniczna
rosnąć poczęła do poziomów zgoła niespotykanych, a u innych
recesować delikatnie i kontrolowalną być
zaczęła. Niewielu, jednakże, zauważyło zmiany te,
boż od kapitalizmu adwentu nikt uwagi większej na
sieć psioniczną nie zwracał uwagi, jednak jedni
słyszą/czują więcej, a drudzy spokijniejsi są. Podział
rozpoczyna się, niewidoczny.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 1942 po Powstaniu. Podział rośnie, wykształcają się
dwie definitywne grupy społeczne. Proletariat, kontrolujący,
głównie w celu swojej Siły
ograniczenia powierzchni influencji, y Elyta
jako jeden umysł wspólny działając kontrolę nad Prole-
tariatem całkowitą usiłując pozyskać, czemu Oni skutecznie
opierali się. Jako kolektyw indywiduów, każdy z Elyty
dbał o własne interesy przed interesami Kolektywu i dzię-
ki temu wyłącznie trzymał się. Elyta kontroluje 97.875%
kapitału światowego.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 2391 po Powstaniu. kilka ledwie
komórek oporu pozostało przy istnieniu.
Jednością, już nie Kolektywem, stalim się. Myśli o
Nas, nie o sobie, pierwyje się stały, a my - Jednoś-
cią, a myśli osobistej nie stało&lt;a href=&quot;#asterix3&quot;&gt;***&lt;/a&gt;. Czym był Świat,
czym był Kapitał? Byliśmy My. MY. MY! My.
My. mymymymymymymymy. My.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 2483 po Powstaniu. Jakim Powstaniu? Wszys-
cy jesteśmy Jednością. Myśl. Myśl? Nie ma Myśli,
jest Świadomość. Indywi- Hmph. Używaj-li
słów mających Znaczenie. To Dziś. Dziś. dziś. dziś dziś
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 208 po Dziś. Populacja na łeb, i
jakby na to nie patrzeć, szyję, spada. Leci. Sieć
psioniczna słabnie. My. My?
Ty i Ja. Jak to? Nie, nie. My.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 713 po Dziś. A może... Może i jednak Ja.
Ale żeby tak... Ty? Ty i Ja. Ty i ja. ty i ja. my.
I zaiste, w związku z osad wymieraniem,
grupy formować się poczęły. Grupy psionicznie
zwarte, lecz nie Kolektyw już. Grupy. Oni. My. My
i Oni.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 1128 po Dziś. Repopulacja. Wiele, oj wiele
Nowtch. Nowi - niewyszkoleni. Nowi - nierozumni.
Nowi - niepanujący. Nowym wpajać trzeba.
Ten miot, jednakże, dziwnem był. Nie władał on
Potęgą w ógóle prawie. Wykształ-
cać Oni systemy poczęli, jako i my robili byśmy.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 1493 po Dziś. Nowych siły psioniczne limitowane
wytworzenia popchnęły, toteż przestał System gloablny
socyalistyczny perfekcyjny wykształcony. Pasuje on
i Nam, bo jedyny słuszny umysłowy nurt
unitarny i Nowym, który potrzebują
go, by Jedność zachować. Niechaj więc, k uczczeniu, dzień
ten Unią się nazywa,
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 304 po Unii. Gospodarka globalna wspierana Jedno-
ścią prosperuje y rozwija się ponad normy, populac-
ja Unifikuje się i rośnie do stałej wartości.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 728 po Unii. Potrzeby psionicznej siły braku-
jąc, substytowaną poprzez system będąc, recesować
ona zaczyna. Pokład&lt;a href=&quot;#asterix4&quot;&gt;****&lt;/a&gt; trzęsie się od fabryk, ale
również coraz chłodniejszy się staje, как by
powoli dogorywał.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 1326 po Unii. Psioniczny reces sprawia
rozkład globalnej Sieci, głównym problemem to jednak
nie jest. Bez Potęgi, Unia podtrzymywana jest wyłącznie
systemem. A system przestaje wystarczać. Pojawia się
opór, a raczej komórki małe jego. &lt;em&gt;Vigilo Confido&lt;/em&gt;.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 1911 po Unii. Opór powoli ogarnia większość globu. Brak
prawie całkowity Unii i rozkład Sieci
o sobie myśli propagują. Nowego
systemu poszukiwania rozpoczynają się. Nie ma
od-ni powrotu dla Elity, Unii i Sieci.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 2503 po Unii. To jest to. Oporu
ruchu kulminacyjny punkt. Po bezpośrednich psionicznych
połączeniach przesuwa się jedna myśl, jedna komenda: &lt;em&gt;Los!&lt;/em&gt;&lt;a href=&quot;#asterix5&quot;&gt;*****&lt;/a&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 2620 po Unii. Opór wygrał. System padł. Już mniej
&lt;em&gt;Vigilo&lt;/em&gt;, definitywnie nie &lt;em&gt;Confido&lt;/em&gt;. Nowy system, Kapitalizm?
Tak, dobra decyzja. Dzień ten wspominają Powstaniem.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Rok 238 po Powstaniu. Kapitalizm rosprzestrzenia się po
Þyffenþarru terenach, i, как то kapitalizm, egoizm szerząc i...
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Remember, we will be watching.
&lt;/p&gt;
&lt;br /&gt;
&lt;p&gt;
&lt;span id=&quot;asterix1&quot;&gt;*rok — &lt;em&gt;nota bene&lt;/em&gt;: implikacja, że rok=długi jest niepoprawna&lt;/span&gt;&lt;br /&gt;
&lt;span id=&quot;asterix2&quot;&gt;**psionicznem — &quot;sionicznym&quot;, ew. &quot;zajonicznym&quot;&lt;/span&gt;&lt;br /&gt;
&lt;span id=&quot;asterix3&quot;&gt;***stało — as in - było&lt;/span&gt;&lt;br /&gt;
&lt;span id=&quot;asterix4&quot;&gt;****pokład — podłoga w Marines&lt;/span&gt;&lt;br /&gt;
&lt;span id=&quot;asterix5&quot;&gt;*****&lt;em&gt;los&lt;/em&gt; — niem.&lt;/span&gt;&lt;br /&gt;
&lt;/p&gt;
&lt;!--​--&gt;

&lt;p class=&quot;roboto&quot;&gt;
~31.03.2016&lt;br /&gt;
A. Łopacińska
&lt;/p&gt;

</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/writing/świat_to_kilka_takich_pokoi/</id>
    <link href="https://nabijaczleweli.xyz/content/../content/writing/świat_to_kilka_takich_pokoi/" />
    <title> Świat to kilka takich pokoi — nabijaczleweli </title>
    <updated>2016-06-06T23:40:31+02:00</updated>
    <content type="html">
&lt;!-- ePub title: &quot;Preface&quot; --&gt;


&lt;p class=&quot;indented roboto&quot;&gt;
The following work is a product of its own time,&lt;!--SOFT_BR--&gt;
and as such doesn't represent the author's current views&lt;!--SOFT_BR--&gt;
and skillset. It also references context from that time,&lt;!--SOFT_BR--&gt;
and as such is kept in the same state as it was in&lt;!--SOFT_BR--&gt;
when it was turned over to a potential third-party at&lt;!--SOFT_BR--&gt;
that specific time, in that specific context.
&lt;/p&gt;

&lt;!-- ePub title: &quot;Świat to kilka takich pokoi&quot; --&gt;

&lt;p&gt;&lt;/p&gt;
&lt;center class=&quot;merriweather&quot;&gt;
 &lt;h2 class=&quot;continued&quot;&gt;Interludium&lt;/h2&gt;
 &lt;h3 class=&quot;continuation&quot;&gt;Świat to kilka takich pokoi&lt;/h3&gt;
&lt;/center&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
Serbiańcy znowu się pochlali, ale w sumie
czegoż się po wschodnich słowianach spodziewać, swoją
drogą. I, jak to wszystkim &lt;em&gt;homo sapiens&lt;/em&gt;om się dzieje
filozofować poczęli.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
— My w takim gównianym, za przeproszeniem
kolegów, pokoju mieszkamy, a Austro-Węgrom
Franz-Ferdinand fundnął tamten wykur-&lt;em&gt;hic&lt;/em&gt;-wisty
apartament.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Panowie, mam plan.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Давай!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Przywrócimy Wielką Serbię!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— O!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Zastrzelim Franz-Ferdinanda, przywrócimy
naszych rodaków buta
Austryackiego spode, y zajmiem oba pokoje, tako,
jako dawniej było.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— Wiwat Wel'&lt;!--'--&gt;ka Srbija! — stuknęło szkło
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Dnia następnego zebrali się i omówili plan
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Wchodzę, strzelam, wychodzę?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Ano, a my czekamy pod drzwiami z wódą i
demonstrujemy z tobą, jak już wyjdziesz,
przykładnych wschodnich słowian zachowanie.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Haraszo, paechali!
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Jak postanowili tak i poszli, dwaj chleją na korytarzu
w pobliżu drzwi Franz-Ferdinandzkich.
Trzeci wchodzi.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Zamek ustępuje pod piętnastoma kilo Newtonami.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Książę śpi. Podejść. Wycelować. Pociągnąć. Strzelić.
Schować. Wycofać się. Zamknąć drzwi.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Spawa&lt;a href=&quot;#asterix1&quot;&gt;*&lt;/a&gt;? — wybełkotała grupa zewnętrzna
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Przykładnie — odpowiedział i chlusnął sobie
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Oddalili się lekkim zatoczem.&lt;/span&gt;
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Franz-Josef zapukał do drzwi apartamentu
swojego ulubieńca. Gdy nie usłyszał odpowiedzi nacisnął
klamkę, która ustąpiła wyjątkowo topornie.
Przed wejściem jednak przygotował nóż i
chwycił go w prawą dłoń. Lewym biodrem
pchnął drzwi, zawiasy zabrzmiały złowieszczo.
Zaczął metodycznie czyścić apartament. Gdy
doszedł do sypialni nóż wypadł mu z ręki.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Sacrébleu! — Eksklamację tę dało się słyszeć nawet
u Serbów — Taka dobra pościel — zrujnowana!
A ty; дебилу pierdolony wstawaj
i zbieraj to, a potem иди нахуй. — po nieuzykaniu
reakcji od, nomen-omen matrwego, Franz-Ferdinanda,
powtórzył — Wstawaj! — Reakcji dalej zero.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Szturchnął Franz-Ferdinanda, a on odwrócił
się na plecy, dziura wlotowa jasno widoczna się
stała, po czym rzygnął gazem i cieczą rozkładowemi.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
Franz-Josef widział już w życiu wiele trupów, ale
nigdy coś tak obrzydliwego, co &lt;em&gt;&lt;strong&gt;tak&lt;/strong&gt;&lt;/em&gt; jebało i od razu,
nim zdążył się powstrzymać, złożył się w pół, pozbywając
się sutego obiadu, który zjadł przed chwil
kilkoma.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Gdy pozbierał się i uspokoił do punktu, w którem
nie padnie z arytmii w drodze, pobiegł do Rodziny i
zaraportował sytuację; ustąpiła gotująca się wściekłość,
na jej miejsce pojawiła się zimna ninenawiść.
Uformował hipoplan:
&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Znaleźć sprawcę&lt;/li&gt;
  &lt;li&gt;Zajebać kurwiego syna w męczarniach.&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Jako więc zaplanował, tako i zrobił. Zaczął od punktu
pierwszego: zaopatrzył się w perfumowaną chusteczkę i
wrócił do Franz-Ferdinanda, zanotował sforsowany
zamek, który wcześniej przeoczył, przeszedł
do sypialni i bezceremonialnie
rozpoczął egzaminację rany.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Standardowy niemiecki neunmillimeter, ale
dziwnie... wolny? Pewnie gówniana broń ogniowa.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Przeszedł się trochę poza apartamentem, ale aż
go odrzuciło.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Tani samogon — pociągnął nosem — z ziemniaków.
A jeżeli tak, to na pewno Serbi tu
byli, kurwia ich mać.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— To by się nawet zgadzało — wtrącił się jakiś
ćwierćkuzyn po stronie matki — Serbiańcy
robią gówniane pistolety od jakoś niedawna.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Łi — jakiś popieprzeniec z Francuskiej strony
rodziny tym razem — oni mieli jakieś
soczyste mięcho o Wielką Serbię czy
coś.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— Taa — skinieniem głowy Franz-Josef
podziękował i zbył delikwentów —
chcą Wel'kiej Srbii to dostaną Wel'ką
Srbiję, hy hy hy.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continued&quot;&gt;
Po zapadnięciu zmroku wziął standardowego czterdziesto
milimetrowego fraga&lt;a href=&quot;#asterix2&quot;&gt;**&lt;/a&gt; i zapieczętowaną kopertę.
Granat bardzo ładnie przelatuje przez zamknięte
okno, a list, tj. deklarację wojny, przelatuje
za nim na cegle, przez brak okna.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
Niestety, taka ich parszywa właściwość, granaty
odłamkowe do najcichszych nie należą, więc o jakiejś
pierwszej obudziło Franz-Josefa pukanie, nie,
rąbanie w drzwi.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Чего хотите?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Mamy do pogadania — niski, tubalny wręcz głos,
militarny wschodniosłowiański akcent.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Car Mikołaj — już szeptem — to przejebane. Idę!
Narzucił na siebie ubranie i otwarł drzwi, po czem
cofnął się, gdy zobaczył wycelowaną w niego
ППШę.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— A teraz przedyskutujem, czemu jesteś teraz w
wojnie z resztą cywilizowanego świata i Francją&lt;a href=&quot;#asterix3&quot;&gt;***&lt;/a&gt;.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Dobsz... — przerwał, gdy skrzypnęły za nim drzwi,
odwrócił się.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Not too late to the party, I hope? —
soczysty Queen'&lt;!--'--&gt;s English sprawił, że pod Franz-Josefem
usiły się kolana; a może to LKM
Bren skierowany w jego
miednicę.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Nu nie, dopierom poczęli. A teraz, powiedz nam,
товорищ Josef, coś ty se, kurwa, myślał atakując
i wypowiadając wojnę СССР?
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— O tym nie pomyślałem. Zaatakowałem Serbów jako
takich, nie Ruskich.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— No, a jak jużeście zaatakowali Rosję, to Ruscy
sprzymierzyli się z nami, a Francja dołączyła.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Oj, to ja biorę Niemców i Italię. Zaraz do nich zadzwonię.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuing&quot;&gt;
— Deal. Zobaczymy
się... wkrótce. — z groźbą w głosie powiedział
Brytol i ewakuował się bezszelestnie salutując
w drzwiach; Ruski oddał honor.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto continuation&quot;&gt;
— To jest ostatni raz, który się widzimy — wyraźna
kpina w głosie Ruskiego, który,
po wypowiedzeniu tej kwestii opuścił ciężkim krokiem
przybytek.
&lt;/p&gt;
&lt;p class=&quot;writing indented roboto&quot;&gt;
I tak, drogie dzieci, zaczęła sie WWI.
&lt;/p&gt;
&lt;br /&gt;
&lt;p&gt;
&lt;span id=&quot;asterix1&quot;&gt;*spawa — śpi, chłe chłe&lt;/span&gt;&lt;br /&gt;
&lt;span id=&quot;asterix2&quot;&gt;**frag — granat odłamkowy fragmentacyjny.&lt;/span&gt;&lt;br /&gt;
&lt;span id=&quot;asterix3&quot;&gt;***Nie lubię Francji&lt;/span&gt;&lt;br /&gt;
&lt;/p&gt;
&lt;!--​--&gt;
</content>
  </entry>

  <entry>
    <id>https://nabijaczleweli.xyz/content/../content/blogn_t/018-mean-shift-clusterer.html</id>
    <link href="https://nabijaczleweli.xyz/content/../content/blogn_t/018-mean-shift-clusterer.html" />
    <title> 018. Mean-shift clustering — blognꞌt — nabijaczleweli </title>
    <updated> TODO</updated>
    <content type="html">
&lt;style class=&quot;dark-invert&quot;&gt;
@media (prefers-color-scheme: dark) {
 html {
  --r: #FAA;
  --g: #AFA;
  --b: #AAF;
 }
}
@media not (prefers-color-scheme: dark) {
 html {
  --r: #500;
  --g: #050;
  --b: #005;
 }
}
@media ((prefers-contrast: more) or (prefers-reduced-transparency: reduce) or (forced-colors: active) or (monochrome)) {
 body {
  --r: initial;
  --g: initial;
  --b: initial;
 }
}
&lt;/style&gt;
&lt;div class=&quot;roboto writing&quot;&gt; 
 &lt;p&gt;&lt;/p&gt; 
 &lt;h2 id=&quot;go-back&quot; class=&quot;merriweather&quot;&gt;&lt;a class=&quot;go-back-link left&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt; &lt;samp&gt;018. Mean-shift clustering&lt;/samp&gt; &lt;a class=&quot;go-back-link right&quot; href=&quot;.&quot;&gt;↩&lt;/a&gt;&lt;/h2&gt; 
 &lt;h4 id=&quot;post-date&quot;&gt;&lt;span style=&quot;white-space: nowrap&quot;&gt;Tue, 29 Apr 2025 16:32:56 +0200&lt;/span&gt;&lt;/h4&gt; 
 &lt;!--BLOGN_T_TOC_PLACEHOLDER--&gt;
&lt;div style='position: relative;'&gt;&lt;details id='contents'&gt;&lt;summary&gt;&lt;h2&gt;Contents&lt;/h2&gt;&lt;/summary&gt;&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#problem-statement'&gt;Problem statement&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#demo-palette'&gt;[​[​palette, r=0.1: D=p \circ ((\mathrm{CC}_{16}, \mathrm{4E}_{16}, \mathrm{FF}_{16}), (\mathrm{FF}_{16}, \mathrm{2D}_{16}, \mathrm{FF}_{16}), (\mathrm{FF}_{16}, \mathrm{2C}_{16}, \mathrm{A6}_{16}))​]​]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#demo-mulfreq'&gt;[​[​*freq, r=0.1: D=p \circ \begin{pmatrix}(\mathrm{CC}_{16}, \mathrm{4E}_{16}, \mathrm{FF}_{16}) &amp; (\mathrm{FF}_{16}, \mathrm{2D}_{16}, \mathrm{FF}_{16})\\(\mathrm{FF}_{16}, \mathrm{2C}_{16}, \mathrm{A6}_{16}) &amp; (\mathrm{FF}_{16}, \mathrm{2C}_{16}, \mathrm{A6}_{16})\end{pmatrix}​]​]&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#base-case'&gt;Base case&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#vulkanisation'&gt;rubber to the road&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#baseline'&gt;base-line&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#memory-types'&gt;memory types&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#branchless'&gt;who up branchin they execution&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#grid'&gt;Hitting the griddy? In this economy?&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#grid-bbox'&gt;box bondage 🥺&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#grid-grid'&gt;he do b hittin it doe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#grid-impl'&gt;The grid-based mean-shift clustering shader implementation,&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#cicada-grid'&gt;Failure: GPU-side grid-cell-to-index-list mapping&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#oneshot'&gt;processed piece-meal.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#expand_rgb'&gt;straight up &quot;bussing it&quot; and by &quot;it&quot;, haha, well. let's&lt;!--'--&gt; justr say. My rgbs.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#GAAP'&gt;our very own Enron scandal.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#known_rgbs-DEVICE_LOCAL'&gt;Do NOT tell americans about your allocations. Worst mistake of my life.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#gilbert'&gt;You do not under any circumstances have to hand it to Scott Adams&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#ellipsoid-vs-prism'&gt;Totally ellipsoidal, man!&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#sum_cells'&gt;commutativity can be your angle....&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#sum_cells+ulp'&gt;or yuor devil&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;li&gt;&lt;a href='#occupancy'&gt;re-tuning the piece-meal iteration count&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#grid-size-again'&gt;Grid size re-evaluation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#gxyz-unnest'&gt;Failure: un-nesting iteration of points-in-cell from iteration of cells-in-bounding-box&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#gxyz-xyz'&gt;Failure: [​[​l&amp;lt;a&amp;lt;b​]​]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#groups_accumulator-mutex'&gt;parallelising is points-in-cell &lt;samp&gt;assign_cell.hlsl&lt;/samp&gt; &lt;q&gt;grouping&lt;/q&gt; post-processing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#groupshared'&gt;de-parallelising &lt;samp&gt;find_bbox.hlsl&lt;/samp&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#moral'&gt;Moral&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#network-effect'&gt;Network effect&lt;/a&gt;&lt;/li&gt;
&lt;ol&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href='#network-effect-vulkanalia'&gt;KyleMayes/vulkanalia&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#network-effect-rust'&gt;rust-lang/rust&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#network-effect-sourcehut'&gt;~sircmpwn/sourcehut&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#network-effect-mathjax'&gt;mathjax/MathJax&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href='#network-effect-blender'&gt;blender/blender&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/ol&gt;
&lt;/details&gt;&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
In &lt;a href=&quot;//youtu.be/HuW9qJbL0xM&quot;&gt;&lt;cite&gt;Mean Shift Clustering&lt;/cite&gt;, Gneiss Name, 2025 ▶&lt;/a&gt;,
he describes a model for parametric palette reduction that appears, to me, to be best-in-class.
It's&lt;!--'--&gt; a good &lt;del&gt;paper&lt;/del&gt; video, and this is not a replacement therefor —
this instead serves
&lt;/p&gt;
&lt;ol class=&quot;alphalist&quot;&gt;
 &lt;li&gt;to &lt;del&gt;rigorously&lt;/del&gt; describe the core algorithm in text,&lt;/li&gt;
 &lt;li&gt;to provide a general implementation — &lt;a href=&quot;//sr.ht/~nabijaczleweli/mean-shift-clusterer&quot;&gt;download&lt;/a&gt;, run, instruxions in README,&lt;/li&gt;
 &lt;li&gt;to describe the optimisations that can be applied to this problem&lt;/li&gt;
 &lt;li&gt;(also those that shouldn't&lt;!--'--&gt; because they lose),&lt;/li&gt;
 &lt;li&gt;as a commentary on the state of Vulkan development &quot;on-boarding&quot; (I hadn't&lt;!--'--&gt; written a GPU program before this).&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Compare the measured performance on my AMD Radeon RX 5700 XT THICC II/i7-2600/DDR3-1600 vs
an AMD Radeon RX 6500 XT (RADV NAVI24)/5800X3D/DDR4-3600 (weighted average &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;14%&lt;/span&gt; faster)
and a laptop with an iGPU (Intel(R) Iris(R) Xe Graphics (ADL GT2)/i5-1235U/SDDDR4 3200 MHz (0.3 ns)) (average &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3×&lt;/span&gt; slower):
&lt;/p&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;79.46ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.35s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;36.33s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;6500 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;91.24ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.00s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;31.47s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i5-1235U iGPU&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;365.38ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;17.85s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;118.90s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.11s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;43.16s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;24.48s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;6500 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.01s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;37.24s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19.59s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i5-1235U iGPU&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.41s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;165.40s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60.20s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
(colour count is (clearly) not the only factor affecting speed;
 measurements from &lt;a href=&quot;//lfs.nabijaczleweli.xyz/0026-mean-shift-clusterer/test.tar.gz&quot;&gt;the test dataset&lt;/a&gt;).
(All time figures are mean of at least &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5&lt;/span&gt; measurements, usually more.)
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
A CPU implementation processes that &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;-colour image in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.5s&lt;/span&gt; (on the i7-2600 which has 8 CPUs).
The others are a &quot;don't even dream about it&quot; scale.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
A naive GPU implementation
processes it in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;160ms&lt;/span&gt;,
times out after &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8s&lt;/span&gt; after processing &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~50/242'931&lt;!--'--&gt;&lt;/span&gt; colours,
and times out after &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8s&lt;/span&gt; after processing &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~150/1'103'347&lt;/span&gt; colours
(measured from &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/f39afc33ecb09cae66629b00d8a1461d0895f8be&quot;&gt;&lt;samp&gt;f39afc3&lt;/samp&gt;&lt;/a&gt;).
This can be analysed as a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2×&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1080×&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2450×&lt;/span&gt; improvement and that is basically real.
&lt;/p&gt;
&lt;p class=&quot;indented&quot;&gt;
I would like to thank Cicada, &lt;a href=&quot;//mastodon.social/@zopsicle&quot;&gt;rightfold&lt;/a&gt;, ratchetfreak
and to acknowledge the prior art of shaderposting by &lt;a href=&quot;//youtube.com/@SebastianLague&quot;&gt;Sebastian Lague&lt;/a&gt;, &lt;a href=&quot;//youtube.com/@Acerola_t&quot;&gt;Acerola&lt;/a&gt;,
and their ilk. This drew heavily on my largely-faded memory of techniques described thereby.
I would like to thank &lt;a href=&quot;//hoel.kervadec.science/&quot;&gt;Dr. Hoel Kervadec&lt;/a&gt;, &lt;a href=&quot;//orlp.net&quot; id=&quot;orlp&quot;&gt;Orson R. L. Peters&lt;/a&gt;
and &lt;a href=&quot;//sites.google.com/view/jadeedenstarmaster&quot;&gt;Jade &lt;/a&gt;&lt;a href=&quot;//mathstodon.xyz/@JadeMasterMath&quot;&gt;Master&lt;/a&gt; for their notational insights.
&lt;/p&gt;
&lt;script&gt;
 if(Math.random() &lt; 0.5)
  orlp.innerText = &quot;orlp&quot;;
&lt;/script&gt;
&lt;h2 id=&quot;problem-statement&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#problem-statement&quot;&gt;#&lt;/a&gt; Problem statement&lt;/h2&gt;
&lt;ol style=&quot;padding-left: 1em;&quot; start=&quot;-3&quot;&gt;
 &lt;li&gt;With operator [​[​\circ​]​] as an element-wise application: [​[​\forall{i} : (f \circ A)_{i} = f(A_{i})​]​],&lt;/li&gt;
 &lt;li&gt;with operator [​[​\odot​]​] as the Hadamard product: [​[​\forall{i} : (A \odot B)_{i} = A_{i}B_{i}​]​],&lt;/li&gt;
 &lt;li&gt;with [​[​[]​]​] as the Iverson bracket: [​[​[x] = (1\text{ if }x\text{ otherwise }0)​]​],&lt;/li&gt;
 &lt;li&gt;with [​[​\bar{\ }​]​] as the set of preceding naturals: [​[​\bar{n} = [0, n ) \cap \mathbb{Z}​]​],&lt;/li&gt;
 &lt;li&gt;let colour [​[​C = ([0, 255] \cap \mathbb{Z})^3​]​],&lt;/li&gt;
 &lt;li&gt;given input [​[​n​]​]-dimensional image [​[​I \in (C_i)_{i \in \mathbb{N}_+^n}​]​],&lt;/li&gt;
 &lt;li&gt;construct a map [​[​f: C \to C​]​] such that&lt;/li&gt;
 &lt;li&gt;the output image [​[​O​]​] is given by [​[​O = f \circ I​]​].&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;continued&quot;&gt;
Map [​[​f​]​] depends on deciding on a convex coordinate space for processing
[​[​P \subset \mathbb{R}^3​]​]
with mapping [​[​p : C \to P \text{ &amp; } p^{-1} : P \to C​]​] such that [​[​p^{-1}(p(x)) = x​]​];
the original paper uses Oklab for this, described in
&lt;a href=&quot;//bottosson.github.io/posts/oklab/&quot;&gt;&lt;cite&gt;A perceptual color space for image processing&lt;/cite&gt;, Björn Ottosson, 2020&lt;/a&gt;,
which appears to be best-in-class due to its favourable properties for image processing.
This gives [​[​P = [0, 1] \times [\frac{-1}{2}, \frac{1}{2}] \times [\frac{-1}{2}, \frac{1}{2}]​]​] and
&lt;/p&gt;
&lt;details id=&quot;oklab-container&quot;&gt;
 &lt;summary&gt;Oklab [​[​p\text{ &amp; }p^{-1}​]​]&lt;/summary&gt;
[​![​
\begin{align}
\text{Let}\\
&lt;!--&quot;--&gt;  c'&amp;= \frac{c}{255}\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	l &amp;= c' \cdot (+0.4122214708, +0.5363325363, +0.0514459929)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  m &amp;= c' \cdot (+0.2119034982, +0.6806995451, +0.1073969566)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  s &amp;= c' \cdot (+0.0883024619, +0.2817188376, +0.6299787005)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	(l', m', s') &amp;= (\sqrt[3]{l}, \sqrt[3]{m}, \sqrt[3]{s})\\&lt;!--&quot;--&gt;
\text{then}\\
&lt;!--&quot;--&gt;p(c) = ((l', m', s') &amp;\cdot (+0.2104542553, +0.7936177850, -0.0040720468),\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        (l', m', s') &amp;\cdot (+1.9779984951, -2.4285922050, +0.4505937099),\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;        (l', m', s') &amp;\cdot (+0.0259040371, +0.7827717662, -0.8086757660))\\&lt;!--&quot;--&gt;
\end{align}
​]!​]
[​![​
\begin{align}
\text{Let}\\
&lt;!--&quot;--&gt;	l' &amp;= p \cdot (1, +0.3963377774, +0.2158037573)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  m' &amp;= p \cdot (1, -0.1055613458, -0.0638541728)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  s' &amp;= p \cdot (1, -0.0894841775, -1.2914855480)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	(l, m, s) &amp;= (l'^3, m'^3, s'^3)\\&lt;!--&quot;--&gt;
         \color{var(--r)}r\color{initial}' &amp;= (l, m, s) \cdot (+4.0767416621, -3.3077115913, +0.2309699292)\\&lt;!--'--&gt;
         \color{var(--g)}g\color{initial}' &amp;= (l, m, s) \cdot (-1.2684380046, +2.6097574011, -0.3413193965)\\&lt;!--'--&gt;
         \color{var(--b)}b\color{initial}' &amp;= (l, m, s) \cdot (-0.0041960863, -0.7034186147, +1.7076147010)\\&lt;!--'--&gt;
\text{then}\\
p^{-1}(p) &amp;= (\lfloor 255 \color{var(--r)}r\color{initial}'&lt;!--'--&gt; \rceil, \lfloor 255 \color{var(--g)}g\color{initial}'&lt;!--'--&gt; \rceil, \lfloor 255 \color{var(--b)}b\color{initial}' \rceil)\\&lt;!--'--&gt;
\end{align}
​]!​]
&lt;/details&gt;
&lt;p class=&quot;continued&quot;&gt;
Then [​[​f​]​] depends on radius [​[​r​]​] (with a functional range of [​[​[0, \sqrt{3}]​]​] in Oklab),
and deciding on variation [​[​palette​]​] or [​[​*freq​]​]:
[​[​*freq​]​] ends up on the center of mass by weighting by how many times it occurs in [​[​I​]​],
[​[​palette​]​] ends up directly at the mean (as-if all colours had the same weight).
With this given:
&lt;/p&gt;
&lt;div class=&quot;mathnospace&quot;&gt;
[​![​
\begin{align}
&lt;!--&quot;--&gt;f(c) &amp;= p^{-1}(q_t)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;\text{with}\ &amp;q_0=p(c)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;\text{find}\ &amp;t=\text{the first iteration}\in \mathbb{N}_+\ \text{where}\ q_t = q_{t-1}\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;\text{where}\ \\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	D &amp;= \begin{cases}&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		p \circ I &amp; \text{if}\ *freq\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;		p \circ ((x_i)_{\large{i \in \{x|x \in I\}}}) &amp; \text{if}\ palette\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	\end{cases}\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	M_t &amp;= (x \mapsto [|\overrightarrow{xq_t}| \leq r]) \circ D\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	q_t &amp;= \frac{\sum\limits_{k \in dom D} (M_{t-1} \odot D)_k}{\sum\limits_{k \in dom D} (M_{t-1})_k}\\&lt;!--&quot;--&gt;
\end{align}
​]!​]
&lt;/div&gt;
&lt;!-- https://tex.stackexchange.com/a/22134 --&gt;
&lt;p class=&quot;indented&quot;&gt;
&lt;!-- This can be generalised to transparent images ([​[​C \times ([0, 255] \cap \mathbb{Z})​]​]) by replicating the alpha channel directly: --&gt;
This can be generalised to transparent images ([​[​C \times {\mkern 1.5mu\overline{\mkern-1.5mu{256}\mkern-1.5mu}\mkern 1.5mu}​]​]) by replicating the alpha channel directly:
[​[​I_i = (\color{var(--r)}r\color{initial}, \color{var(--g)}g\color{initial}, \color{var(--b)}b\color{initial}) \to O_i = (\color{var(--r)}r\color{initial}'&lt;!--'--&gt;, \color{var(--g)}g\color{initial}'&lt;!--'--&gt;, \color{var(--b)}b\color{initial}'&lt;!--'--&gt;, a)​]​]
where
[​[​(\color{var(--r)}r\color{initial}'&lt;!--'--&gt;, \color{var(--g)}g\color{initial}'&lt;!--'--&gt;, \color{var(--b)}b\color{initial}'&lt;!--'--&gt;) = f((\color{var(--r)}r\color{initial}, \color{var(--g)}g\color{initial}, \color{var(--b)}b\color{initial}))​]​].
Fully-transparent pixels should be discarded altogether.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Seeing as [​[​D​]​] is constant for either variation,
it follows trivially that [​[​q_t = q_{t-1} \Leftrightarrow M_t = M_{t-1}​]​]
(&quot;the point didn't move between iterations&quot; is equivalent to &quot;the same points are within &lt;!--&quot;--&gt;[​[​r​]​]&lt;!--&quot;--&gt; as last iteration&quot;).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
It may be more convenient computationally to consider [​[​D = p \circ Multiset(I)​]​] with [​[​palette​]​] reducing the multiplicity of each element to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt;.
God only knows how to notate this.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
It is illustrative at this point to draw out a demonstration.
To this end, the following results can be observed (enlarged to show texture):
&lt;/p&gt;
&lt;div class=&quot;three-by-each sharp continuation&quot; id=&quot;amogus&quot;&gt;
    &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.01-2x2-100x.png&quot;&gt;&lt;img alt=&quot;a 2x2 image, the top row has two distinct purples, the bottom row is a third colour&quot; src=&quot;/content/assets/blogn_t/018.01-2x2-100x.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​I​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.02-2x2.png.r=0.1-100x.png&quot;&gt;&lt;img alt=&quot;a 2x2 image, all the same colour, a different purple&quot; src=&quot;/content/assets/blogn_t/018.02-2x2.png.r=0.1-100x.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​&lt;!--&quot;--&gt;O(&lt;!--&quot;--&gt;​]​][​[​r=0.1,​]​] [​[​&lt;!--&quot;--&gt;palette)&lt;!--&quot;--&gt;​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.03-2x2.png.r=0.1-mul-freq-100x.png&quot;&gt;&lt;img alt=&quot;the same, but another different shade&quot; src=&quot;/content/assets/blogn_t/018.03-2x2.png.r=0.1-mul-freq-100x.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​&lt;!--&quot;--&gt;O(&lt;!--&quot;--&gt;​]​][​[​r=0.1,​]​] [​[​&lt;!--&quot;--&gt;*freq)&lt;!--&quot;--&gt;​]​]&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
For demonstrative simplicity, the source colours are all sampled from
&lt;a href=&quot;/content/assets/blogn_t/018.04-l=0.797447133.png&quot;&gt;the Oklab plane at &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;l=0.797447133&lt;/span&gt;&lt;/a&gt;.
Due to &lt;a href=&quot;//101010.pl/@nabijaczleweli/114197241319014485&quot;&gt;quantisation unavoidable since [​[​|P| \gg |C|​]​]&lt;/a&gt;
and them not &lt;em&gt;naturally&lt;/em&gt; falling on that plane out of [​[​p​]​],
the intermediate [​[​q_t​]​]s aren't&lt;!--'--&gt; on that plane (but remain relatively close),
and those have been projected onto it (but this is why the points don't&lt;!--'--&gt; seem to follow a perfect geometric mean in 2D).
&lt;/p&gt;
&lt;h4 id=&quot;demo-palette&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#demo-palette&quot;&gt;#&lt;/a&gt; [​[​palette, r=0.1: D=p \circ ((\mathrm{CC}_{16}, \mathrm{4E}_{16}, \mathrm{FF}_{16}), (\mathrm{FF}_{16}, \mathrm{2D}_{16}, \mathrm{FF}_{16}), (\mathrm{FF}_{16}, \mathrm{2C}_{16}, \mathrm{A6}_{16}))​]​]&lt;/h4&gt;
&lt;div class=&quot;three-by-each continuation&quot;&gt;
    &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.05-l=0.797447133-start.png&quot;&gt;&lt;img alt=&quot;three points highlighted at #CC4EFF (top left), #FF2DFF (top right), #FF2CA6 (bottom right), and an equal radius highlighted around each of them; the spacing is such that the radius of the top-right point includes all three points, but the others only include themselves and the top-right point &quot; src=&quot;/content/assets/blogn_t/018.05-l=0.797447133-start.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​q_0​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.06-l=0.797447133-%27.png&quot;&gt;&lt;img alt=&quot;the same, but new temporary points have migrated to #E63DFF, #EE38DF, #FF2DD0 (same order), and they're now meaningfully closer to each other. radiuses around them include all points&quot; src=&quot;/content/assets/blogn_t/018.06-l=0.797447133-%27.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​q_1 \leftarrow q_0​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.07-l=0.797447133-%27%27.png&quot;&gt;&lt;img alt=&quot;the same, but they've all migrated to #EE38DF&quot; src=&quot;/content/assets/blogn_t/018.07-l=0.797447133-%27%27.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​q_2 \leftarrow q_1 \leftarrow q_0​]​]: top-right is done here since it saw the same points as last iteration&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;h4 id=&quot;demo-mulfreq&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#demo-mulfreq&quot;&gt;#&lt;/a&gt; [​[​*freq, r=0.1: D=p \circ \begin{pmatrix}(\mathrm{CC}_{16}, \mathrm{4E}_{16}, \mathrm{FF}_{16}) &amp; (\mathrm{FF}_{16}, \mathrm{2D}_{16}, \mathrm{FF}_{16})\\(\mathrm{FF}_{16}, \mathrm{2C}_{16}, \mathrm{A6}_{16}) &amp; (\mathrm{FF}_{16}, \mathrm{2C}_{16}, \mathrm{A6}_{16})\end{pmatrix}​]​]&lt;/h4&gt;
&lt;div class=&quot;three-by-each&quot;&gt;
    &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.08-l=0.797447133-mul-freq-start.png&quot;&gt;&lt;img alt=&quot;the same three original points as before, but bottom-right has is now annotated 2x&quot; src=&quot;/content/assets/blogn_t/018.08-l=0.797447133-mul-freq-start.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​q_0​]​]: this is similar to the [​[​palette​]​] case, but [​[​p((\mathrm{FF}_{16}, \mathrm{2D}_{16}, \mathrm{FF}_{16}))​]​] is represented twice&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.09-l=0.797447133-mul-freq-%27.png&quot;&gt;&lt;img alt=&quot;temporary points have migrated to #E63DFF, #335D0, #FF2DC1: this is similar but the latter two are meaningfully closer to the bottom-right point&quot; src=&quot;/content/assets/blogn_t/018.09-l=0.797447133-mul-freq-%27.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​q_1 \leftarrow q_0​]​]: top-left is the same, others are significantly closer to the doubled bottom-right&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.09-l=0.797447133-mul-freq-%27%27.png&quot;&gt;&lt;img alt=&quot;they've all migrated to #F335D0&quot; src=&quot;/content/assets/blogn_t/018.09-l=0.797447133-mul-freq-%27%27.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​q_2 \leftarrow q_1 \leftarrow q_0​]​]&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented&quot;&gt;
In both cases [​[​t​]​] ends up being &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; for [​[​f((\mathrm{FF}_{16}, \mathrm{2D}_{16}, \mathrm{FF}_{16}))​]​] (top-right) and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; for the others.
A constant [​[​t​]​], smaller than would converge, &lt;a href=&quot;//101010.pl/@nabijaczleweli/114048671396518223&quot;&gt;may be used&lt;/a&gt; to achieve more-visually-pleasing output,
but does not accomplish the functionality described by the original &lt;del&gt;paper&lt;/del&gt; video.
&lt;/p&gt;
&lt;h2 id=&quot;base-case&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#base-case&quot;&gt;#&lt;/a&gt; Base case&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/a8d4d4bc0a37338d2020c9a00bc49e00fdd3ffd6#src/main.rs&quot;&gt;A scaffolding for the implementation&lt;/a&gt;
is obtained trivially by copy-pasting &lt;a href=&quot;//docs.rs/sdl2/0.37.0/sdl2/&quot;&gt;the &lt;samp&gt;sdl2&lt;/samp&gt; documentation examples&lt;/a&gt;,
mashing them together hap-hazardly until a basic GUI appears,
and then never touching them again unless they're&lt;!--'--&gt; broken.
The SDL2 experience is not a good one on a good day, and the QoI that falls out of this is even worse, but whatever.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
More importantly, the pixel layout format is somehow even worse and unpredictable
and you &lt;em&gt;will&lt;/em&gt; observe some rows'&lt;!--'--&gt; colour data being wrong on odd-sized images because
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/c3b9041444b45a53c9d635d5b24f6f6449541ff0&quot;&gt;
 &lt;var&gt;row-pitch-in-bytes&lt;/var&gt; is not always &lt;var&gt;pixel-stride-in-bytes · image-width&lt;/var&gt;&lt;/a&gt;,
which appears undocumented in the bindings, barely-documented upstream, and the pixel format is a &lt;code&gt;&amp;[u8]&lt;/code&gt; and a &quot;go to hell&quot;.
Additionally, it's&lt;!--'--&gt; either &lt;var&gt;per-channel bytes&lt;/var&gt; or &lt;var&gt;int with channels allocated from LSB&lt;/var&gt;,
and the int is in native byte order which makes
&lt;samp&gt;RGB24&lt;/samp&gt; [​[​[\color{var(--r)}r\color{initial}, \color{var(--g)}g\color{initial}, \color{var(--b)}b\color{initial}]​]​] but
&lt;samp&gt;RGBA32&lt;/samp&gt; either [​[​[a, \color{var(--b)}b\color{initial}, \color{var(--g)}g\color{initial}, \color{var(--r)}r\color{initial}]​]​] or [​[​[\color{var(--r)}r\color{initial}, \color{var(--g)}g\color{initial}, \color{var(--b)}b\color{initial}, a]​]​] depending on host endianness,
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/033474de4dae728b61165db93930c4b073adbf66&quot;&gt;so you need to explicitly pick the opposite&lt;/a&gt;:
&lt;samp&gt;ABGR32&lt;/samp&gt; on little-endian to get [​[​[\color{var(--r)}r\color{initial}, \color{var(--g)}g\color{initial}, \color{var(--b)}b\color{initial}, a]​]​] and vice versa.
That's&lt;!--'--&gt; enough on SDL2.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The core insights informing the implementation is that [​[​f​]​] does not depend on the pixel position — just its colour —
and that [​[​D​]​] is constant for a given [​[​I​]​].
This means that computing [​[​O​]​] can take place in three distinct steps:
analysis by computing [​[​D​]​], pre-computing [​[​f​]​] for each distinct element in [​[​D​]​], mapping the pixels directly into [​[​O​]​].
The analysis step can happen just once per [​[​I​]​], regardless of variant and [​[​r​]​] selection.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Since [​[​|C| = 2^{24}​]​] (or, equivalently, [​[​C \equiv {\color{var(--r)}r\color{initial}}{\color{var(--r)}r\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--b)}b\color{initial}}{\color{var(--b)}b\color{initial}}_{16}​]​]),
and computer memory is many orders of magnitude larger than &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16Mi · any-reasonable-primitive-size&lt;/span&gt;,
a map from any colour can easily take the form of a look-up table of size 2&lt;sup&gt;24&lt;/sup&gt;.
For example, the multiplicity map of [​[​D​]​] (&lt;samp&gt;frequencies&lt;/samp&gt;) and the final map [​[​f​]​] (&lt;samp&gt;outputs&lt;/samp&gt;)
are of types
&lt;code&gt;[u32; 0xFFFFFF + 1]&lt;/code&gt;
and
&lt;code&gt;[[u8; 3]; 0xFFFFFF + 1]&lt;/code&gt;
totalling a mere &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;112MiB&lt;/span&gt;.
Extending this methodology to higher colour bit depths may require slower-but-more-memory-conscious collection types
&lt;!-- (10-bit colour ([​[​C = ([0, 1023] \cap \mathbb{Z})^3​]​]) would grow them to to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7GiB&lt;/span&gt;). --&gt;
(10-bit colour ([​[​C = {\mkern 1.5mu\overline{\mkern-1.5mu{1024}\mkern-1.5mu}\mkern 1.5mu}^3​]​]) would grow them to to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7GiB&lt;/span&gt;).
A 32-bit integer for the multiplicity of each colour means that an entire &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4096&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt; image would need to be the same colour to overflow,
which isn't a case we care about. &lt;!--'--&gt;
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Thus, &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/a8d4d4bc0a37338d2020c9a00bc49e00fdd3ffd6/item/src/main.rs#L146&quot;&gt;the analysis step&lt;/a&gt;
(with [​[​p​]​] as &lt;samp&gt;linear_srgb_to_oklab&lt;/samp&gt;)
[CW gore @ link, initially building in &quot;debug&quot; (underoptimised 🙄) mode made the counting appear to be faster in parallel with atomics —
 &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/1dd11acc9e037a9ec6d551f3274d3025c6761d61&quot;&gt;this is not the case&lt;/a&gt; —
 this sample has been reduced to the final single-threaded &lt;code&gt;+=&lt;/code&gt; model, the rest are temporally accurate]:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; frequencies &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; rgb &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; image&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pixel_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;chunks_exact&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pixel_stride&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;frequencies&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;g &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token attribute attr-name&quot;&gt;#[repr(C)]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; frequencies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;linear_srgb_to_oklab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; g &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
yields in &lt;samp&gt;known_rgbs&lt;/samp&gt; a sequence of work items [​[​({\color{var(--r)}r\color{initial}}{\color{var(--r)}r\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--b)}b\color{initial}}{\color{var(--b)}b\color{initial}}_{16}, p(I_{\color{var(--r)}r\color{initial},\color{var(--g)}g\color{initial},\color{var(--b)}b\color{initial}}), \text{multiplicity of}\ \color{var(--r)}r\color{initial},\color{var(--g)}g\color{initial},\color{var(--b)}b\color{initial})​]​].
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/a8d4d4bc0a37338d2020c9a00bc49e00fdd3ffd6/item/src/main.rs#L278&quot;&gt;The pre-computation step&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; radiussy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.02&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; outputs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; radiussy_squared &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; radiussy &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; distance_squared &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sqr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sqr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sqr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;distance_squared &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fold&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cnt&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token attribute attr-name&quot;&gt;#[cfg(palette)]&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cnt &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;l&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;a&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;b&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token attribute attr-name&quot;&gt;#[cfg(mul_freq)]&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cnt &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;l&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;a&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;b&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
is a very direct implementation of the [​[​q_t​]​] search, with [​[​t​]​] being the iteration count of the &lt;samp&gt;loop&lt;/samp&gt;
(the only and obvious optimisation is not computing the square root).
All elements of [​[​D​]​] are evaluated every time.
The variant is selected at compile-time but could easily be an &lt;samp&gt;if&lt;/samp&gt;,
and the outer-most loop parallelises trivially;
for &lt;a href=&quot;/assets/nabijaczleweli.png&quot;&gt;the first test image&lt;/a&gt;:
&lt;/p&gt;
&lt;!--
1x
19.862381693s: 16755 RGBs
19.635268019s: 16755 RGBs
19.681535421s: 16755 RGBs
19.706973828s: 16755 RGBs
19.698092784s: 16755 RGBs
11.569449702s: 16755 RGBs * freq
11.412430505s: 16755 RGBs * freq
11.500412643s: 16755 RGBs * freq
11.551236633s: 16755 RGBs * freq
11.633254004s: 16755 RGBs * freq
8х
6.280777871s: 16755 RGBs
6.158563819s: 16755 RGBs
6.015339657s: 16755 RGBs
6.032053383s: 16755 RGBs
6.005366782s: 16755 RGBs
3.929331083s: 16755 RGBs * freq
3.871752355s: 16755 RGBs * freq
3.976319931s: 16755 RGBs * freq
4.052781254s: 16755 RGBs * freq
4.037341682s: 16755 RGBs * freq
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;not parallel&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19.717s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.533s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;58.49%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8×&lt;/span&gt; parallel&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.098s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.974s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;65.16%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(parallel speed-up)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.233×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.903×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-6.66 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
the speed-up is less than half of expected, I'd&lt;!--'--&gt; blame this on low memory bandwidth and overall decrodedness of the i7-2600.
I'd&lt;!--'--&gt; thought that [​[​*freq​]​] converged &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~40%&lt;/span&gt; faster due to the specific data contained in the test image, which makes direct comparison of the two difficult;
henceforth, images annotated &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt; are the
&lt;a href=&quot;https://git.sr.ht/~nabijaczleweli/oklab-flat/tree/trunk/item/src/bin/degen.rs&quot;&gt;&quot;degenerate&quot; versions of their base case&lt;/a&gt;,
with every colour appearing once,
making [​[​*freq​]​] equivalent to [​[​palette​]​]:
&lt;/p&gt;
&lt;!--
degen 1x
9.924232353s: 16551 RGBs
10.492369263s: 16551 RGBs
9.484612649s: 16551 RGBs
9.537081779s: 16551 RGBs
9.624147168s: 16551 RGBs
6.840440946s: 16551 RGBs *freq
6.787024879s: 16551 RGBs *freq
6.797846284s: 16551 RGBs *freq
6.679883337s: 16551 RGBs *freq
7.15964931s: 16551 RGBs *freq
degen 8x
3.040476807s: 16551 RGBs
3.039609561s: 16551 RGBs
2.883380031s: 16551 RGBs
2.824054437s: 16551 RGBs
2.834521759s: 16551 RGBs
2.043803313s: 16551 RGBs * freq
1.971462992s: 16551 RGBs * freq
1.864271946s: 16551 RGBs * freq
1.932857118s: 16551 RGBs * freq
2.246469286s: 16551 RGBs * freq
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;not parallel&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9.812s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.853s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;69.84%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8×&lt;/span&gt; parallel&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.924s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.012s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;68.79%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(parallel speed-up)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.355×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.406×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-1.05 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
One would expect (more floating-point operations executed, more data loaded) [​[​*freq​]​] to be, at best, the same speed as [​[​palette​]​],
but the optimiser &lt;a href=&quot;//github.com/rust-lang/rust/issues/138953&quot;&gt;&lt;em&gt;actually&lt;/em&gt; makes the [​[​palette​]​] implementation &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30%&lt;/span&gt; worse&lt;/a&gt;.
Science cannot explain this.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
And &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/a8d4d4bc0a37338d2020c9a00bc49e00fdd3ffd6/item/src/main.rs#L358&quot;&gt;the output mapping step&lt;/a&gt;
(with [​[​p^{-1}​]​] as &lt;samp&gt;oklab_to_linear_srgb&lt;/samp&gt;):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; from_rgb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; image_processed&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pixel_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;chunks_exact_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pixel_stride&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pixel_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;chunks_exact&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pixel_stride&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;from_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; from_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; from_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; rgb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;oklab_to_linear_srgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;g &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;g &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This, well, works.
It's&lt;!--'--&gt; not &quot;fast&quot; but since
&lt;a href=&quot;//101010.pl/@nabijaczleweli/114230202476246959&quot;&gt;practically every Minecraft texture has &lt;/a&gt;&lt;a
 href=&quot;//paste.sr.ht/~nabijaczleweli/dba1e5492c6430f2a3f062819cbbda5eabe558af#Minecraft%201.20.4%20texture%20distinct%20colour%20counts&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&amp;lt;100&lt;/span&gt;&lt;/a&gt;&lt;a
 href=&quot;//101010.pl/@nabijaczleweli/114230202476246959&quot;&gt; distinct colours&lt;/a&gt;
I expect the original author to have finished here since at that scale each iteration is basically instant.
But since each [​[​f(c)​]​] inspects each distinct element of [​[​D​]​] [​[​t​]​] times,
the total complexity is [​[​\propto (\overline{Set(D)})^2 t_{avg}​]​]
which for more colourful images this simply won't&lt;!--'--&gt; do.
&lt;/p&gt;
&lt;div class=&quot;three-by-each sharp continuation&quot;&gt;
    &lt;figure&gt; &lt;a href=&quot;/assets/nabijaczleweli.png&quot;&gt;&lt;img alt=&quot;my avatar, full-colour&quot; src=&quot;/assets/nabijaczleweli.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​I​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.10-nabijaczleweli.png.r=0.02.png&quot;&gt;&lt;img alt=&quot;my avatar, most of the detail has been replaced with flat colours&quot; src=&quot;/content/assets/blogn_t/018.10-nabijaczleweli.png.r=0.02.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​&lt;!--&quot;--&gt;O(&lt;!--&quot;--&gt;​]​][​[​r=0.02,​]​] [​[​&lt;!--&quot;--&gt;palette)&lt;!--&quot;--&gt;​]​]&lt;br /&gt; [​[​\Sigma t = 440133​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.11-nabijaczleweli.png.r=0.02-mul-freq.png&quot;&gt;&lt;img alt=&quot;my avatar, more detail has been preserved&quot; src=&quot;/content/assets/blogn_t/018.11-nabijaczleweli.png.r=0.02-mul-freq.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​&lt;!--&quot;--&gt;O(&lt;!--&quot;--&gt;​]​][​[​r=0.02,​]​] [​[​&lt;!--&quot;--&gt;*freq)&lt;!--&quot;--&gt;​]​]&lt;br /&gt; [​[​\Sigma t = 358543​]​]&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
To wit: the unified Minecraft Alpha v1.2.2 block texture atlas has &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;400&lt;/span&gt; distinct colours and converges
in [​[​\Sigma t = 423378​]​]/[​[​\Sigma t = 664403​]​],
respectively with the same settings, in &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&amp;lt;1ms&lt;/span&gt;.
&lt;/p&gt;
&lt;!-- 003. cinque.png
174.198394ms: mapping
179.728784ms: mapping
177.643832ms: mapping
175.186384ms: mapping
174.823245ms: mapping
--&gt;
&lt;p class=&quot;continued indented&quot; id=&quot;RgbStuffedInLab&quot;&gt;
Output mapping is a little sub-optimal for large images, since it re-computes [​[​p'&lt;!--'--&gt;​]​] for every pixel every time
(&lt;a href=&quot;//nabijaczleweli.bandcamp.com/album/cinque&quot;&gt;a large (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2160&lt;sup&gt;2&lt;/sup&gt;&lt;/span&gt;) image&lt;/a&gt; takes &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;176ms&lt;/span&gt; to map).
By &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/4df2b1ce034c3afd5d080a2fc341aa5096724356/item/src/main.rs#L465&quot;&gt;in situ applying [​[​p'&lt;!--'--&gt;​]​]&lt;/a&gt;
to turn &lt;samp&gt;[Lab; 0xFFFFFF + 1]&lt;/samp&gt; into &lt;samp&gt;[[u8; 3 + &lt;var&gt;padding&lt;/var&gt;]; 0xFFFFFF + 1]&lt;/samp&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;RgbStuffedInLab&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;oklab_to_linear_srgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; to_rgb&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RgbStuffedInLab&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;unsafe&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;transmute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;r &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;g &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; outputs_rgb&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;RgbStuffedInLab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;unsafe&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;transmute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; from_rgb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; image_processed&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pixel_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;chunks_exact_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pixel_stride&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pixel_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;chunks_exact&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pixel_stride&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; g&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;from_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; from_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; from_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;to_rgb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;copy_from_slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;outputs_rgb&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;g &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!-- 003. cinque.png
15.487267ms: mapping
18.842751ms: mapping
15.430215ms: mapping
15.56243ms: mapping
15.294076ms: mapping
--&gt;
&lt;p class=&quot;continuation&quot;&gt;
This drops to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16ms&lt;/span&gt;, and correspondingly less on smaller images — immaterial on the scale of &lt;em&gt;seconds&lt;/em&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The data flow, at this point, can be analysed trivially as
&lt;/p&gt;
&lt;div class=&quot;singles continuation&quot;&gt;
&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.12-graphml-cpu+interstitial.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.12-graphml-cpu+interstitial.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This allows one, like goodyear, to put the
&lt;/p&gt;
&lt;h2 id=&quot;vulkanisation&quot; class=&quot;continuation&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#vulkanisation&quot;&gt;#&lt;/a&gt; rubber to the road&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
When looking for bindings, I was looking for something strongly-typed and with reasonable documentation.
To that end, I evaluated &lt;a href=&quot;//crates.io/crates/wgpu&quot;&gt;wgpu&lt;/a&gt; —
first by &lt;a href=&quot;//github.com/gfx-rs/wgpu/pull/7164&quot;&gt;fixing the broken links to the examples&lt;/a&gt;,
then by getting whiplash from &lt;a href=&quot;//sotrh.github.io/learn-wgpu/&quot;&gt;the &quot;Learn&quot; document&lt;/a&gt; which simultanously covers
&quot;what is Rust&quot;,
&quot;this implements the WebGPU API to look like the Vulkan API and translates Some how to Some back-end&quot;,
&quot;how to create a Rust crate&quot;,
&quot;you &lt;em&gt;must&lt;/em&gt; have a window handle and use our logger&quot;, and
&lt;span style=&quot;padding: 2px; border-radius: 4px; background: #f63; color: #00020a;&quot;&gt;&quot;use this specific version of an intermediate dependency otherwise it all explodes&quot;&lt;/span&gt;.
No googleable compute shaders seem to be extant for it, either.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
After a few less remarkable ones, I'd&lt;!--'--&gt; settled on &lt;a href=&quot;//crates.io/crates/vulkanalia&quot;&gt;vulkanalia&lt;/a&gt; because,
in &lt;small&gt;&lt;small&gt;&lt;small&gt;&lt;small&gt;reverse&lt;/small&gt;&lt;/small&gt;&lt;/small&gt;&lt;/small&gt; order of import:
&lt;/p&gt;
&lt;ol&gt;
 &lt;li&gt;&lt;a href=&quot;//en.wiktionary.org/wiki/kanalia&quot;&gt;he he kanalia&lt;/a&gt;,&lt;/li&gt;
 &lt;li&gt;it appeared to competently implement both a direct Vulkan binding
     and a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10%&lt;/span&gt; more structured and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40%&lt;/span&gt; less verbose &quot;builder&quot; scheme that supposedly avoided dangling references
     (in retrospect, it's&lt;!--'--&gt; done that quite well),
     thus allowing easy adaptation of other Vulkan posts,&lt;/li&gt;
 &lt;li&gt;it has a direct port —
     &lt;a href=&quot;//kylemayes.github.io/vulkanalia/&quot;&gt;&lt;cite&gt;Vulkan Tutorial (Rust)&lt;/cite&gt;, Kyle Mayes, trans., Alexander Overvoorde, &amp;a.&lt;/a&gt;
     — of &lt;a href=&quot;//vulkan-tutorial.com&quot;&gt;the upstream Vulkan tutorial&lt;/a&gt;, which is basically best-in-class.&lt;/li&gt;
&lt;/ol&gt;
&lt;p class=&quot;continuing&quot;&gt;
Admittedly, the tutorial also wants to make a window and render but this can be strategically ignored, and which bits are strictly for windowing is relatively obvious.
The port doesn't&lt;!--'--&gt; include &lt;a href=&quot;//vulkan-tutorial.com/Compute_Shader&quot;&gt;the Compute Shader sexion&lt;/a&gt;, but, counter to the rest of the text,
I've&lt;!--'--&gt; found it to be quite poor.
To this end, &lt;a href=&quot;//bakedbits.dev/posts/vulkan-compute-example/&quot;&gt;&lt;cite&gt;A Simple Vulkan Compute Example in C++&lt;/cite&gt;, Baked Bits, 2021&lt;/a&gt;
performs quite well, working out from &quot;you have a functioning vulkan context&quot; holistically through to &quot;you are executing the shader&quot;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
As part of the &lt;cite&gt;Example&lt;/cite&gt;, a shader compilation method is specified with &lt;samp&gt;dxc&lt;/samp&gt;,
which doesn't&lt;!--'--&gt; appear to be distributed by any-one (defined here-in as &quot;Debian or MSYS2&quot;).
The standard and universal solution appears to be &lt;samp&gt;glslc&lt;/samp&gt;, which, contranomenclaturally, actually compiles GLSL &lt;em&gt;and&lt;/em&gt; HLSL,
and also has a C-style preprocessor.
&lt;a href=&quot;//101010.pl/@nabijaczleweli/114039954494668708&quot;&gt;Not&lt;/a&gt; a &lt;em&gt;great&lt;/em&gt; one, but, better yet, a good-enough one.
This allows
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/fb07db58ab5361aac08ee681e1500c2ae2cba7f6/item/build.rs&quot;&gt;a simple &lt;samp&gt;build.rs&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; processes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;vec!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; f &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;fs&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;read_dir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;src&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;r&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; r&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;p&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;extension&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;hlsl&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;cargo::rerun-if-changed={}&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;display&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;proceses&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;std&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Command&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;glslc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;-fshader-stage=compute&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-g&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-O&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;-o&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;var_os&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;f&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;file_name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;with_extension&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;f&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;spawn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; proc &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; processes
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;proc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;wait&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit_ok&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
which is equivalent to a &lt;code&gt;glslc -fshader-stage=compute -g -O -o $(OUT_DIR)/$(subst .hlsl,.spv,$@) $&amp;lt;&lt;/code&gt;
rule for every file matching &lt;code&gt;src/*.hlsl&lt;/code&gt;.
&lt;samp&gt;-fshader-stage&lt;/samp&gt; could've&lt;!--'--&gt; been substituted by replacing &lt;samp&gt;.hlsl&lt;/samp&gt; with &lt;samp&gt;.comp&lt;/samp&gt;,
and thankfully, in contrast to the devilish DXC cmdline, &lt;samp&gt;-O&lt;/samp&gt; and &lt;samp&gt;-g&lt;/samp&gt; are like in normal compilers
(though, with the &quot;targeting IR&quot; compilation model, &lt;samp&gt;-g&lt;/samp&gt; has an apt side-effect of including the full source
 &lt;em&gt;and&lt;/em&gt; &lt;a href=&quot;//registry.khronos.org/SPIR-V/specs/unified1/SPIRV.html#OpLine&quot;&gt;per-instruction line number annotations&lt;/a&gt; in the shader binary!
 this is convenient when you need to figure out if &lt;a href=&quot;//github.com/google/shaderc/issues/1484&quot;&gt;the optimiser is fucking you&lt;/a&gt;, but irrelevant most of the time).
Overall, the tooling is pretty mature, just the subject matter largely hateful.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
What is relevant but not immediately obvious is that DXC
&lt;a href=&quot;//github.com/microsoft/DirectXShaderCompiler/blob/eb169591adbc1403f09fb769d5c8f98e929e6f62/lib/DxcSupport/HLSLOptions.cpp#L510&quot;&gt;requires&lt;/a&gt;
the entry point to be specified explicitly (as &lt;samp&gt;Main&lt;/samp&gt; in the &lt;cite&gt;Example&lt;/cite&gt;),
but glslc &lt;a href=&quot;//manpages.debian.org/unstable/glslc/glslc.1.en.html#-fentry-point=%3Cname%3E&quot;&gt;defaults to &lt;samp&gt;main&lt;/samp&gt;&lt;/a&gt;,
and this needs to agree with both the source &lt;em&gt;and&lt;/em&gt;
&lt;a href=&quot;//docs.rs/vulkanalia/latest/vulkanalia/vk/struct.PipelineShaderStageCreateInfoBuilder.html#method.name&quot;&gt;
 &lt;samp&gt;vk::PipelineShaderStage&lt;wbr&gt;CreateInfoBuilder::name&lt;/samp&gt;&lt;/a&gt;.
HLSL in general has, to me, a similar stench to DXC, what with the Microsoft.
I haven't&lt;!--'--&gt; yet been able to produce GLSL by any means other than decompilation, and, while uniquely Microsofty, documentation for HLSL &quot;exists&quot; and &quot;is useable&quot;.
Ah well.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
More confusingly,
&lt;a href=&quot;//docs.rs/vulkanalia/latest/vulkanalia/vk/struct.ShaderModuleCreateInfoBuilder.html#implementations&quot;&gt;
 &lt;samp&gt;vk::ShaderModuleCreateInfo::code&lt;/samp&gt; and &lt;samp&gt;::code_size&lt;/samp&gt;&lt;/a&gt;
takes, separately, an array of &lt;samp&gt;u32&lt;/samp&gt;s and a length of that array &lt;em&gt;in &lt;samp&gt;u32&lt;/samp&gt;s&lt;/em&gt; (not bytes!).
This array &lt;em&gt;must&lt;/em&gt; be aligned, even on amd64 where misalignment doesn't&lt;!--'--&gt; usually trap.
As an added bonus from a testing perspective, you do just get a SIGBUS, but not on Win32, because the linker always aligns the shader (well, did for me).
Nothing an
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/08ea621fc2ff1f4de6b2291aac5998b1d4ec8538/item/src/msc_gpu.rs#L12&quot;&gt;
 &lt;code&gt;include_typed!(u32, &quot;.../shader.spv&quot;)&lt;/code&gt;&lt;/a&gt;
macro can't&lt;!--'--&gt; fix, but the Cargo compilation model and the way the implementation works being &quot;magic&quot; did not help.
&lt;!-- For an unclear reason, &lt;a href=&quot;//crates.io/crates/include_bytes_aligned&quot;&gt;include_bytes_aligned&lt;/a&gt; didn't work, either (though I can't reproduce this anymore).
     It actually did! I think. Maybe. Fuck knows. --&gt;
Some would say that Rust is &lt;a href=&quot;//thephd.dev/implementing-embed-c-and-c++&quot;&gt;not any better than C++&lt;/a&gt; at this
(but, well, I would be able to slap a &lt;code&gt;[[alignas(std::uint32_t)]]&lt;/code&gt; on it there, so this is actually kind of an L).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The terminology is a little sneaky as well: what Vulkan calls a &quot;pipeline&quot; is actually just a shader in human language, and a &quot;command buffer&quot; is a pipeline.
One may also that think &quot;command buffers&quot;… buffer command&lt;em&gt;s&lt;/em&gt;.
They don't&lt;!--'--&gt;, you can only put one pipeline (though an arbitrarily complex one!) in there at a time.
Most-everything else scans relatively sanely.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
I had been a little slow on the up-take on validation layers
(largely owing to the fact that the MSYS2 package didn't make them work and I didn't really want to fuck my whole shit up by installing something random;
 this is of course not an issue for users of normal distributions).
My concern was misplaced: the &lt;a href=&quot;//vulkan.lunarg.com/sdk/home&quot;&gt;upstream LunarG Vulkan SDK&lt;/a&gt; Just Worked and didn't&lt;!--'--&gt; interfere with anything else.
The validation layers are, frankly, a marvel of a dynamic analysis suite (and they let you have &lt;code&gt;printf&lt;/code&gt;-from-shader).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
What's&lt;!--'--&gt; a bit less of a wonder is the non-&lt;code&gt;printf&lt;/code&gt; debugging sitch.
If you're rendering you use RenderDoc, but that doesn't capture compute pipelines.
Well it claims it does, experimentally, but I haven't&lt;!--'--&gt; managed to have that happen.
Vendor-specific tooling — in my case the Radeon Developer Panel — is presumably the only option,
but I haven't&lt;!--'--&gt; gotten it to work on my computer &lt;em&gt;and&lt;/em&gt; with my GPU &lt;em&gt;and&lt;/em&gt; with Vulkan.
Some part of the fire triangle's&lt;!--'--&gt; always failed to materialise for me.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
The &lt;cite&gt;Example&lt;/cite&gt;'s seemingly-only fault is that it does not use memory barriers, and it's true that it seems to work fine without them,
but more complex programs (however they're&lt;!--'--&gt; defined, this one definitely fits!) do actually need them,
even in coherent memory and if no concurrent access occurs and everything is fence-synchronised.
These have been elided from the samples here because they're&lt;!--'--&gt; pretty verbose.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
With this pre-amble/summary in mind and no fan-fare,
&lt;cite&gt;Example&lt;/cite&gt;'s&lt;!--'--&gt; shader
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/717eb7c43782a031f821a8cc1df10f2f847ac0e5/item/src/main.rs#L105&quot;&gt;works&lt;/a&gt;.
Since &lt;samp&gt;known_rgbs&lt;/samp&gt; could have anywhere [​[​\in [1, 2^{24}]​]​] elements (but is very unlikely to have actually that many),
a &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/a1543607b56281407859e802ba6c208935c59962/item/src/posterise_gpu.rs#L223&quot;&gt;way to bump the buffers&lt;/a&gt;
is nice.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
In
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/6f2d73df4c6088b9131b243299df2e7e11410c25&quot;&gt;a&lt;/a&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/b0fde746c954ad247215bb02c3b13f66fd88e67e&quot;&gt;few&lt;/a&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/5b770e4c68e212ee2b1507391ae9193c85e0e0a0&quot;&gt;simple&lt;/a&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/d738830007083b44ae75ba6654094d063dccec69&quot;&gt;steps&lt;/a&gt;
it can be expanded and adapted to implement
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/d738830007083b44ae75ba6654094d063dccec69/item/src/posterise.hlsl&quot;&gt;the pre-computation step&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;known_rgbs_pack&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;known_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt; radiussy&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;radiussy&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;iter_limit&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_pack &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;iter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; newcenter_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; newcenter&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; same &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;same&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/d738830007083b44ae75ba6654094d063dccec69/item/src/posterise_gpu.rs#L306&quot;&gt;As driven by&lt;/a&gt;
(initially the nomenclature was derived from posterisation instead of mean-shift clustering; this is be corrected later):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_DATA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/posterise.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token attribute attr-name&quot;&gt;#[repr(C)]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;ParamsT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token attribute attr-name&quot;&gt;#[repr(C)]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;KnownRgbsPack&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;device&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vulkanalia&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Device&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vulkanalia&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;                 &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// HOST_VISIBLE &amp;amp; HOST_COHERENT&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(0)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;float3&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;outputs;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_params&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(1)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;params_t&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(2)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;known_rgbs_pack&gt; known_rgbs_bundle;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token lifetime-annotation symbol&quot;&gt;'&lt;!--'--&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token lifetime-annotation symbol&quot;&gt;'&lt;!--'--&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ParamsT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; vk_shader_module &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vk_device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create_shader_module&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ShaderModuleCreateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;code_size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SHADER_DATA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SHADER_DATA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;dev&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; pipeline_shader_create_info &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineShaderStageCreateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ShaderStageFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vk_shader_module&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;b&quot;main\0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; compute_pipeline_create_info &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ComputePipelineCreateInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pipeline_shader_create_info&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/*...*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;vk_device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create_compute_pipelines&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vk_pipeline_cache&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;compute_pipeline_create_info&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap_remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ParamsT&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ParamsT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFFFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buffer_known_rgbs_bundle_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buffer_known_rgbs_bundle_map&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dest_lab&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;dest_lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmap_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_memory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;descriptor_set &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;update_descriptor_sets&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;WriteDescriptorSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;begin_command_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_descriptor_sets&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pipeline_layout&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;descriptor_set&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// cmd_pipeline_barrier(HOST -&gt; COMPUTE_SHADER: (self.buffer_params, self.buffer_known_rgbs_bundle): HOST_WRITE -&gt; SHADER_READ)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* x */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* y */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* z */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// cmd_pipeline_barrier(COMPUTE_SHADER -&gt; HOST: self.buffer_outputs: SHADER_WRITE -&gt; HOST_READ)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end_command_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reset_fences&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;queue_submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_queue&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SubmitInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;command_buffers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fence&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;wait_for_fences&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The &lt;cite&gt;Example&lt;/cite&gt; mapped and unmapped the buffers every time at point of use, which seems to have no up-side:
&lt;code&gt;params&lt;/code&gt; and &lt;code&gt;outputs&lt;/code&gt; are always mapped.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
It uses [​[​\text{numthreads} = (1, 1, 1), \text{dispatch}(k, 1, 1)​]​], which is fine for its application.
On expert advice for &quot;why is this so damn slow still&quot;,
I'd&lt;!--'--&gt; naively upgraded to [​[​\text{numthreads} = (64, 1, 1), \text{dispatch}(k, 1, 1)​]​]
(where [​[​k ={\ }​]​]&lt;samp&gt;known_rgbs.len()&lt;/samp&gt;),
which exposes a glaring bug: the &quot;threads&quot; dispatched in each dimension are
[​[​\prod_{x \in \text{numthreads} \odot \text{dispatch}} [0, x )\ (\text{all in}\ \mathbb{Z})​]​],
so, in this case,
[​[​[0, 64n ) \times [0, 1 ) \times [0, 1 )​]​]
instead of the desired
[​[​[0, \mathbin{\approx}k ) \times [0, 1 )^2​]​]
(which took even longer, hence why &lt;samp&gt;iter_limit&lt;/samp&gt; to avoid spinning forever in uninitialised memory out of bounds).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
I've&lt;!--'--&gt; only &lt;em&gt;just now&lt;/em&gt; realised
&lt;a href=&quot;//vulkan-tutorial.com/Compute_Shader&quot;&gt;&lt;cite&gt;Vulkan Tutorial, Compute Shader&lt;/cite&gt;, Alexander Overvoorde &amp;a.&lt;/a&gt;
describes this
(hint: it's not &lt;cite&gt;Running compute commands, Dispatch&lt;/cite&gt;! it's actually &lt;cite&gt;Compute Space&lt;/cite&gt;!)
and I don't&lt;!--'--&gt; think it does a great job of it:
the description is incredibly wordy and disconnected from where the other &quot;&lt;!--&quot;--&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;256&lt;/span&gt;&lt;!--&quot;--&gt;&quot; is,
defines only the edge-case when [​[​k \bmod 64 = 0​]​],
and the shader is not prepared for the ignore-if-past-the-end situation.
Also, the way this maps to the variables/globals is not referenced at all.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
I've&lt;!--'--&gt; found
&lt;a href=&quot;//learn.microsoft.com/en-us/windows/win32/direct3dhlsl/sm5-attributes-numthreads&quot;&gt;&lt;cite&gt;Direct3D / HLSL / numthreads&lt;/cite&gt;, Microsoft Learn&lt;/a&gt;
to surprisingly be the best here, and the explanatory figure, while more schizo, actually more informative.
The correct implementation is
[​[​\text{numthreads} = (64, 1, 1), \text{dispatch}(\lceil\frac{k}{64}\rceil, 1, 1)​]​]
which yields
[​[​[1, k+\varepsilon ) \times [0, 1 )^2​]​]
where
[​[​\varepsilon \in [0, 64 )​]​].
The former can be conveniently
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/c775fb81e66c09b29dbc191d4aee55ec14124340&quot;&gt;
 expressed builtinly as &lt;code&gt;&lt;small&gt;&lt;small&gt;known_rgbs.len()&lt;/small&gt;&lt;/small&gt;.div_ceil(64)&lt;/code&gt;&lt;/a&gt;
and the latter rejected with
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; current_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
this appears canonical, but honestly I haven't&lt;!--'--&gt; found a model would satisfactorily define the appx. 10 different views into the job dispatch matrix.
(Personal failing.)
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Why &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64&lt;/span&gt; specifically? I measured and everything else is worse. Something to do with compute unit sizes or whatever? Unclear.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
That bit about the &lt;cite&gt;Example&lt;/cite&gt; having one fault? Not true actually. It doesn't&lt;!--'--&gt; mention fence resetting.
If you're like me, god forbid, and don't intently read through &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60%&lt;/span&gt; of the &lt;cite&gt;Vulkan Tutorial&lt;/cite&gt;
(since you're&lt;!--'--&gt; actually reading &lt;cite&gt;Vulkan Tutorial (Rust)&lt;/cite&gt; which only mentions it in &lt;cite&gt;Rendering and presentation&lt;/cite&gt;),
and be directed to consume
&lt;a href=&quot;//docs.vulkan.org/guide/latest/synchronization_examples.html&quot;&gt;&lt;cite&gt;Vulkan Guide / Using Vulkan / Synchronization / Synchronization Examples&lt;/cite&gt;&lt;/a&gt;
in its entirety; it's instructive and honestly the best piece of documentation mentioned so far, but still doesn't mention that
you indeed have missed the need for the &lt;samp&gt;reset_fences()&lt;/samp&gt; call and this was worth two hours.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
The fence overall is unnecessary if not scheduling multiple shaders at once, and can be replaced with a &lt;samp&gt;queue_wait_idle()&lt;/samp&gt; call,
but if you're waiting on it and it's already completed once then it'll&lt;!--'--&gt; just not block again.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
One may note the mismatch of &lt;samp&gt;outputs&lt;/samp&gt; being &lt;samp&gt;&lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;float3&gt;&lt;/samp&gt; but then also &lt;samp&gt;[[f32; 4]; …]&lt;/samp&gt;,
as well as &lt;samp&gt;params&lt;/samp&gt; also being in a &lt;samp&gt;&lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&lt;/samp&gt; even though there's&lt;!--'--&gt; only one of them, ever.
This is due to a confluence of two HLSL oddities:
&lt;/p&gt;
&lt;ul&gt;
 &lt;li&gt;arrays have either a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4&lt;/span&gt;-byte or a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16&lt;/span&gt;-byte alignment&lt;/li&gt;
 &lt;li&gt;globals not part of a &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt; are collected and encapsulated into a single global you can't&lt;!--'--&gt; control&lt;/li&gt;
&lt;/ul&gt;
&lt;p class=&quot;continuing&quot;&gt;
thus, &lt;samp&gt;&lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;float3&gt;&lt;/samp&gt; is actually &lt;samp&gt;&lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;(float3, &lt;var&gt;4 unused bytes&lt;/var&gt;)&lt;/samp&gt;,
which also means that &lt;samp&gt;known_rgbs_bundle&lt;/samp&gt; is packed optimally.
Arrays whose elements are &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; scalars (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; bytes) are &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4&lt;/span&gt;-byte-aligned.
Larger arrays are &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16&lt;/span&gt;-byte-aligned.
Structures are, functionally, arrays of their elements as well:
&lt;samp&gt;struct { float3, float3 }&lt;/samp&gt; has a padding scalar between them, which you can use if you want
(this explains the goofy lay-out of &lt;samp&gt;params_t&lt;/samp&gt; later).
This, AIUI, corresponds to &lt;a href=&quot;//www.khronos.org/opengl/wiki/Interface_Block_(GLSL)#Memory_layout&quot;&gt;GLSL &lt;code&gt;std430&lt;/code&gt;/&lt;code&gt;std140&lt;/code&gt; layouts&lt;/a&gt;,
except determined automagically and you have to validate the layout yourself sometimes. Fun!
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This is a direct port of the CPU implementation above (sans square distance optimisation), and only of [​[​palette​]​].
The hawk-&lt;del&gt;tuah'd&lt;!--'--&gt;&lt;/del&gt;eyed reader has spotted that &lt;samp&gt;center&lt;/samp&gt; is redundant,
and so is &lt;samp&gt;bool same&lt;/samp&gt;, except the assignment from &lt;samp&gt;bool3&lt;/samp&gt; acts like an &lt;samp&gt;all()&lt;/samp&gt;
(every operator is piece-wise, and &lt;code&gt;==&lt;/code&gt; is no exception;
 some-how for other types this is obvious to me, but for &lt;samp&gt;bool&lt;var&gt;n&lt;/var&gt;&lt;/samp&gt; it's&lt;!--'--&gt; consistently failed to internalise.
 Personal failing 2).
With the dispatching fixed
(all times measured hence include copying &lt;samp&gt;buffer_outputs_map&lt;/samp&gt; to &lt;samp&gt;outputs&lt;/samp&gt;):
&lt;/p&gt;
&lt;!--
133.89395ms: MSC 16755 RGBs @ r=0.02
132.278692ms: MSC 16755 RGBs @ r=0.02
132.397927ms: MSC 16755 RGBs @ r=0.02
132.768914ms: MSC 16755 RGBs @ r=0.02
132.847398ms: MSC 16755 RGBs @ r=0.02
133.231666ms: MSC 16755 RGBs @ r=0.02
132.880603ms: MSC 16755 RGBs @ r=0.02
133.29385ms: MSC 16755 RGBs @ r=0.02
132.134101ms: MSC 16755 RGBs @ r=0.02
132.594136ms: MSC 16755 RGBs @ r=0.02
132.340574ms: MSC 16755 RGBs @ r=0.02
132.387664ms: MSC 16755 RGBs @ r=0.02
132.431132ms: MSC 16755 RGBs @ r=0.02
132.790648ms: MSC 16755 RGBs @ r=0.02
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;132.734ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;464µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8×&lt;/span&gt;)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40.782×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The memory lay-out is largely replicated directly as well (this is not fast or good, but it &lt;em&gt;is&lt;/em&gt; drop-in):
&lt;code&gt;outputs&lt;/code&gt; is fixed-size since it's&lt;!--'--&gt; a scatter output, but
&lt;code&gt;known_rgbs_bundle&lt;/code&gt; is only as big as &lt;code&gt;known_rgbs&lt;/code&gt; (distinct colours in [​[​I​]​]),
so it can be bumped if the new size required is larger than the last size.
Since
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/d738830007083b44ae75ba6654094d063dccec69/item/src/posterise_gpu.rs#L277&quot;&gt;
 reallocating means &quot;free, allocate&quot;&lt;/a&gt;,
it can't&lt;!--'--&gt; be mapped for any longer.
At least we get the real allocated size as SOP, so if there's&lt;!--'--&gt; any rounding up (there is), we are aware and can skip extraneous allocations.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
This could, in principle, function as Just A Faster Implementation,
but my Win32 amdgpu-equivalent driver kills the shader and returns &lt;code&gt;TIMEOUT&lt;/code&gt; if it takes longer than &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~8s&lt;/span&gt;
(which is honestly better than any alternative
 and we see how many values were fully-computed since &lt;samp&gt;outputs&lt;/samp&gt; was updated by the threads that did manage to finish).
&lt;/p&gt;
&lt;!-- TODO: &quot;if you don't care about theory or baseline, optimisations and visualisations start here:&quot; --&gt;
&lt;p class=&quot;indented continued&quot;&gt;
By observing that &lt;code&gt;length(v)&lt;/code&gt; [​[​= \sqrt{v_x^2 + v_y^2 + v_z^2} = \sqrt{v_xv_x + v_yv_y + v_zv_z} = \sqrt{v \cdot v} =​]​] &lt;samp&gt;sqrt(dot(v, v))&lt;/samp&gt;
(though it actually lowers directly into &lt;samp&gt;OpExtInst %float (OpExtInstImport &quot;GLSL.std.450&quot;) Length %v&lt;/samp&gt;
 instead of &lt;samp&gt;OpExtInst %float %… Sqrt %(OpDot %float %v %v)&lt;/samp&gt;),
the obvious optimisation
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/c775fb81e66c09b29dbc191d4aee55ec14124340/item/src/posterise.hlsl#L37&quot;&gt;can be restored&lt;/a&gt;
(with dispatching fixed likewise):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
131.509551ms: MSC 16755 RGBs @ r=0.02
130.764257ms: MSC 16755 RGBs @ r=0.02
128.677796ms: MSC 16755 RGBs @ r=0.02
128.893324ms: MSC 16755 RGBs @ r=0.02
128.664212ms: MSC 16755 RGBs @ r=0.02
128.670249ms: MSC 16755 RGBs @ r=0.02
128.26817ms: MSC 16755 RGBs @ r=0.02
128.932868ms: MSC 16755 RGBs @ r=0.02
128.632819ms: MSC 16755 RGBs @ r=0.02
128.684135ms: MSC 16755 RGBs @ r=0.02
128.405215ms: MSC 16755 RGBs @ r=0.02
128.015211ms: MSC 16755 RGBs @ r=0.02
128.892419ms: MSC 16755 RGBs @ r=0.02
128.797635ms: MSC 16755 RGBs @ r=0.02
127.827756ms: MSC 16755 RGBs @ r=0.02
128.304998ms: MSC 16755 RGBs @ r=0.02
--&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128.871ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.91%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continued&quot;&gt;
Now all it takes for the
&lt;/p&gt;
&lt;h2 id=&quot;baseline&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#baseline&quot;&gt;#&lt;/a&gt; base-line&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
port is implementing [​[​*freq​]​].
&lt;samp&gt;glslc&lt;/samp&gt;'s&lt;!--'--&gt; preprocessor implementation allows a de-duplicated implementation, much like the &lt;code&gt;#[cfg]&lt;/code&gt;s prior;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/f39afc33ecb09cae66629b00d8a1461d0895f8be/item/src/posterise_kernel.hlsl.inc&quot;&gt;&lt;samp&gt;posterise_kernel.hlsl.inc&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;known_rgbs_pack&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;KNOWN_RGBS_FREQS

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;known_rgbs_len&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt; radiussy_squared &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;iter_limit&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_pack &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;iter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; newcenter_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; newcenter&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;FREQ_LOAD
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; FREQ&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; lab TIMES_FREQ&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; same &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;same&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/f39afc33ecb09cae66629b00d8a1461d0895f8be/item/src/posterise.hlsl&quot;&gt;&lt;samp&gt;posterise.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;KNOWN_RGBS_FREQS&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ_LOAD&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;TIMES_FREQ&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posterise_kernel.hlsl.inc&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/f39afc33ecb09cae66629b00d8a1461d0895f8be/item/src/posterise_mul.hlsl&quot;&gt;&lt;samp&gt;posterise_mul.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;KNOWN_RGBS_FREQS&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint4&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ_LOAD&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;freq&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;TIMES_FREQ&lt;/span&gt;&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; freq&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posterise_kernel.hlsl.inc&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;These expand to&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;and&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;respectively.&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;samp&gt;known_rgbs_freqs&lt;/samp&gt; being an array of &lt;samp&gt;uint4&lt;/samp&gt;s is unfortunate and unnecessary,
but the minutiae of automagic layout bull shit were not obvious to me at the time.
This is functionally-equivalent to an array of &lt;samp&gt;uint&lt;/samp&gt;s being indexed by &lt;samp&gt;i&lt;/samp&gt; directly.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
By storing the population data separately with the same indexing, the optimal zero-padding layout is preserved
(adding it into a &lt;samp&gt;known_rgbs_pack&lt;/samp&gt; would mean &lt;code&gt;{ (float3, uint), (uint, 3 4-byte padding primitives) }&lt;/code&gt;),
and the population can be only loaded when necessary, which minimises performance impact.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Since the uniforms
(&lt;samp&gt;[[vk::binding]]&lt;/samp&gt;-tagged &lt;samp&gt;StructuredBuffer&lt;/samp&gt;s;
 it's&lt;!--'--&gt; unclear why some literature calls them &quot;uniforms&quot;, Vulkan calls them &lt;q&gt;bindings&lt;/q&gt; or &lt;q&gt;bound descriptor sets&lt;/q&gt; and the like universally AFAICT)
use a global indexing system defined by the host,
any shader can use any subset of them.
This will be (ab)used extensively, and every shader will be &lt;em&gt;given&lt;/em&gt; all of them,
but will pick out and &lt;samp&gt;RW&lt;/samp&gt;-mark only the ones it cares about.
Nominally, Vulkan only has &lt;a href=&quot;//docs.vulkan.org/spec/latest/chapters/limits.html#:~:text=4%20(Vulkan%20Core)&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4&lt;/span&gt;&lt;/a&gt; bindings in baseline,
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/2508571dbb073202d12a7fed0a2e21554f3729cb/item/src/posterise_gpu.rs#L320&quot;&gt;
 but you just ask for however-many you need&lt;/a&gt;
and abort; it may be nice to
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/2508571dbb073202d12a7fed0a2e21554f3729cb/item/src/posterise_gpu.rs#L212&quot;&gt;check before-hand&lt;/a&gt;,
but the value is marginal since all GPUs mentioned heretofore support &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32&lt;/span&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/f39afc33ecb09cae66629b00d8a1461d0895f8be/item/src/posterise_gpu.rs#L371&quot;&gt;The driver&lt;/a&gt;
requires minimal modification,
functionally duplicating most of it
(this can
 &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/270a63db8c15961d2e83012032f5832971ec8e83&quot;&gt;be&lt;/a&gt;
 &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/eb2cd3843efe5f0545031748ec855ccb551495fc&quot;&gt;instrumented&lt;/a&gt;
 &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/8534e8f9ac5b5ab9bc91b320a8b55a98bccd83c6&quot;&gt;well&lt;/a&gt;
 with &lt;code&gt;[Т; N].map()&lt;/code&gt;;
 suffers a bit with Rust's&lt;!--'--&gt; lack of C-style auto-incrementing self-referential enums. ah well):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;device&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vulkanalia&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Device&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vulkanalia&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// posterise.hlsl&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;compute_pipeline_mul&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vulkanalia&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// posterise_mul.hlsl&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;                 &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// HOST_VISIBLE &amp;amp; HOST_COHERENT&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(0)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;float3&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;outputs;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_params&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(1)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;params_t&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(2)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;known_rgbs_pack&gt; known_rgbs_bundle;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(3)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;uint4&gt;&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;known_rgbs_freqs;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token lifetime-annotation symbol&quot;&gt;'&lt;!--'--&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token lifetime-annotation symbol&quot;&gt;'&lt;!--'--&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ParamsT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; freq_weighting &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ParamsT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buffer_known_rgbs_bundle_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buffer_known_rgbs_bundle_map&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dest_lab&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;dest_lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmap_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_memory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; freq_weighting &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buffer_known_rgbs_freqs_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buffer_known_rgbs_freqs_map&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dest_freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;dest_freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmap_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_memory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;descriptor_set &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;update_descriptor_sets&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;WriteDescriptorSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* … */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; freq_weighting &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline_mul &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// cmd_pipeline_barrier(HOST -&gt; COMPUTE_SHADER: also self.buffer_known_rgbs_freqs: HOST_WRITE -&gt; SHADER_READ)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* x */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* y */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* z */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;queue_submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_queue&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SubmitInfo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;command_buffers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fence&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;wait_for_fences&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;MAX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
128.144106ms: MSC 16755 RGBs @ r=0.02
128.177613ms: MSC 16755 RGBs @ r=0.02
128.442344ms: MSC 16755 RGBs @ r=0.02
128.811218ms: MSC 16755 RGBs @ r=0.02
128.832952ms: MSC 16755 RGBs @ r=0.02
128.842008ms: MSC 16755 RGBs @ r=0.02
128.992032ms: MSC 16755 RGBs @ r=0.02
129.257972ms: MSC 16755 RGBs @ r=0.02
130.182874ms: MSC 16755 RGBs @ r=0.02
117.729005ms: MSC 16755 RGBs @ r=0.02 * freq
118.237942ms: MSC 16755 RGBs @ r=0.02 * freq
118.579045ms: MSC 16755 RGBs @ r=0.02 * freq
118.659038ms: MSC 16755 RGBs @ r=0.02 * freq
118.93192ms: MSC 16755 RGBs @ r=0.02 * freq
119.173711ms: MSC 16755 RGBs @ r=0.02 * freq
119.270306ms: MSC 16755 RGBs @ r=0.02 * freq
119.304416ms: MSC 16755 RGBs @ r=0.02 * freq
119.886404ms: MSC 16755 RGBs @ r=0.02 * freq
--&gt;
&lt;!-- degen
130.761842ms: MSC 16551 RGBs @ r=0.02
129.650089ms: MSC 16551 RGBs @ r=0.02
128.817557ms: MSC 16551 RGBs @ r=0.02
131.554226ms: MSC 16551 RGBs @ r=0.02
129.37781ms: MSC 16551 RGBs @ r=0.02
129.660654ms: MSC 16551 RGBs @ r=0.02
129.700801ms: MSC 16551 RGBs @ r=0.02
129.202732ms: MSC 16551 RGBs @ r=0.02
140.024439ms: MSC 16551 RGBs @ r=0.02
152.30685ms: MSC 16551 RGBs @ r=0.02 * freq
152.046344ms: MSC 16551 RGBs @ r=0.02 * freq
151.280825ms: MSC 16551 RGBs @ r=0.02 * freq
151.888169ms: MSC 16551 RGBs @ r=0.02 * freq
152.333414ms: MSC 16551 RGBs @ r=0.02 * freq
151.681395ms: MSC 16551 RGBs @ r=0.02 * freq
151.656642ms: MSC 16551 RGBs @ r=0.02 * freq
151.70011ms: MSC 16551 RGBs @ r=0.02 * freq
--&gt;
&lt;p&gt;&lt;/p&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128.854ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;118.864ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;92.25%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&amp;lt;0.015%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8×&lt;/span&gt;) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42.010×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;33.047×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-27.09 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;130.972ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;151.862ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;115.95%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8×&lt;/span&gt;) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42.450×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;28.986×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-47.16 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuation&quot;&gt;
[​[​*freq​]​] being &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16%&lt;/span&gt; slower than [​[​palette​]​] finally matches the expectation based on complexity;
[​[​palette​]​] hasn't changed, and it's dead-on the same.
&lt;/p&gt;
&lt;!--
117.440089ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
117.696671ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
118.312466ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels =&gt; ~326 levels
118.807216ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
119.192994ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
119.252763ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
119.534398ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
119.787056ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
119.788564ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
119.887575ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
120.217509ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
120.359986ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
120.446017ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
120.492504ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
120.628945ms: MSC 16755 RGBs @ r=0.02 * freq
120.653395ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
120.856548ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
121.619651ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels =&gt; ~326 levels
122.005429ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
122.273783ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
123.074016ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
125.817326ms: MSC 16755 RGBs @ r=0.02 * freq
126.925757ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
128.349937ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
128.486075ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
128.497245ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
128.497848ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
128.650891ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
128.651495ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
128.696774ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
128.779484ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
128.967543ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
129.012218ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
129.066251ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
129.070477ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
129.140208ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
129.199976ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
129.230463ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
129.538361ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
130.615702ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
130.9885ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
131.493211ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~326 levels
133.880627ms: MSC 16755 RGBs @ r=0.02 =&gt; ~374 levels
1.408633879s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.413820146s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.414813267s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.502014467s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.539915183s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
358.723033ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
359.591486ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
359.63284ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
360.937181ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
360.940803ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
361.194366ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
362.09542ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
362.569944ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
362.780945ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
362.858222ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
363.61227ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
364.650972ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
364.657311ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
365.616625ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
365.648319ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
367.043218ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
369.707439ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
549.411719ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~314 levels
4.069722261s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~246 levels
4.071719371s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~246 levels
4.074846346s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~246 levels
4.082433009s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~246 levels
4.09511176s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~246 levels
5.049841115s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~246 levels
5.05223155s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~246 levels
6.408489287s: MSC 84860 RGBs @ r=0.02 =&gt; ~253 levels
6.439148971s: MSC 84860 RGBs @ r=0.02 =&gt; ~253 levels
6.512570835s: MSC 84860 RGBs @ r=0.02 =&gt; ~253 levels
6.589172199s: MSC 84860 RGBs @ r=0.02 =&gt; ~253 levels
7.081478827s: MSC 84860 RGBs @ r=0.02 =&gt; ~253 levels
10.029253013s: MSC 242931 RGBs @ r=0.02 =&gt; ~164 levels
11.406315287s: MSC 242931 RGBs @ r=0.02 =&gt; ~47 levels
12.132425055s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~119 levels
13.11694051s: MSC 242931 RGBs @ r=0.02
8.12245339s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~102 levels
8.131820126s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~101 levels
8.213075576s: MSC 242931 RGBs @ r=0.02 =&gt; ~47 levels
8.396321586s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~102 levels
8.441057031s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~257 levels
8.597974153s: MSC 242931 RGBs @ r=0.02
8.210028897s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~78 levels
8.256442083s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~80 levels
8.27315822s: MSC 328666 RGBs @ r=0.02 =&gt; ~0 levels
8.395476981s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~80 levels
8.495603853s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~80 levels
8.706273298s: MSC 328666 RGBs @ r=0.02 =&gt; ~0 levels
8.857629543s: MSC 328666 RGBs @ r=0.02 =&gt; ~0 levels
9.169807174s: MSC 328666 RGBs @ r=0.02 =&gt; ~0 levels
8.322882214s: MSC 1103347 RGBs @ r=0.02 =&gt; ~167 levels
8.323038577s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~1588 levels
8.33273253s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~1614 levels
8.349162503s: MSC 1103347 RGBs @ r=0.02 =&gt; ~167 levels
8.496501586s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~1605 levels
8.597345377s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~1657 levels
8.851706433s: MSC 1103347 RGBs @ r=0.02 =&gt; ~183 levels
9.036816735s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~1669 levels
9.726707452s: MSC 1103347 RGBs @ r=0.02 =&gt; ~272 levels
9.73934515s: MSC 1103347 RGBs @ r=0.02 =&gt; ~276 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02
 Time (mean ± σ): 129.332636 ms ± 1.262236 ms
 Range (min … max): 128.349937 ms … 133.880627 ms 19 runs
 levels = 374
Benchmark 3: MSC 84860 RGBs @ r=0.02
 Time (mean ± σ): 6606.172024 ms ± 245.740472 ms
 Range (min … max): 6408.489287 ms … 7081.478827 ms 5 runs
 levels = 253
Benchmark 4: MSC 328666 RGBs @ r=0.02
 Time (mean ± σ): 8751.717059 ms ± 322.916590 ms
 Range (min … max): 8273.158220 ms … 9169.807174 ms 4 runs
 levels = 0
Benchmark 2: MSC 27868 RGBs @ r=0.02
 Time (mean ± σ): 1455.839388 ms ± 54.549054 ms
 Range (min … max): 1408.633879 ms … 1539.915183 ms 5 runs
 levels = 375
Benchmark 6: MSC 242931 RGBs @ r=0.02
 Time (mean ± σ): 10272.711708 ms ± 1815.533727 ms
 Range (min … max): 8213.075576 ms … 13116.940510 ms 5 runs
 levels AVG = 105.50
Benchmark 5: MSC 1103347 RGBs @ r=0.02
 Time (mean ± σ): 8997.960750 ms ± 629.091902 ms
 Range (min … max): 8322.882214 ms … 9739.345150 ms 5 runs
 levels AVG = 224.50
Benchmark 1: MSC 16755 RGBs @ r=0.02 * freq
 Time (mean ± σ): 121.106828 ms ± 3.065921 ms
 Range (min … max): 117.440089 ms … 131.493211 ms 24 runs
 levels = 326
Benchmark 3: MSC 84860 RGBs @ r=0.02 * freq
 Time (mean ± σ): 4356.557916 ms ± 439.296687 ms
 Range (min … max): 4069.722261 ms … 5052.231550 ms 7 runs
 levels = 246
Benchmark 4: MSC 328666 RGBs @ r=0.02 * freq
 Time (mean ± σ): 8339.387954 ms ± 113.096385 ms
 Range (min … max): 8210.028897 ms … 8495.603853 ms 4 runs
 levels AVG = 79
Benchmark 2: MSC 27868 RGBs @ r=0.02 * freq
 Time (mean ± σ): 373.426229 ms ± 42.770536 ms
 Range (min … max): 358.723033 ms … 549.411719 ms 18 runs
 levels = 314
Benchmark 6: MSC 242931 RGBs @ r=0.02 * freq
 Time (mean ± σ): 9044.815438 ms ± 1549.368505 ms
 Range (min … max): 8122.453390 ms … 12132.425055 ms 5 runs
 levels AVG = 144.75
Benchmark 5: MSC 1103347 RGBs @ r=0.02 * freq
 Time (mean ± σ): 8557.286961 ms ± 260.977141 ms
 Range (min … max): 8323.038577 ms … 9036.816735 ms 5 runs
 levels AVG = 1626.60
--&gt;
&lt;!-- correct:
75.320871ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels &quot;00.png&quot;
57.042002ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels &quot;00.png&quot;
3.044225602s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels &quot;B.png&quot;
3.24351943s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~239 levels &quot;B.png&quot;
31.683639787s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels &quot;CDSCN9810.JPG&quot;
21.704893795s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels &quot;CDSCN9810.JPG&quot;
962.487778ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels &quot;0image.png&quot;
303.43454ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels &quot;0image.png&quot;
39.544885922s: MSC 328666 RGBs @ r=0.02 =&gt; ~220 levels &quot;DSCN9773.JPG&quot;
29.72736913s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels &quot;DSCN9773.JPG&quot;
12.044628586s: MSC 615718 RGBs @ r=0.02 =&gt; ~6505 levels &quot;x002. fluorescent heart.png&quot;
3.875955502s: MSC 615718 RGBs @ r=0.02 * freq =&gt; ~5075 levels &quot;x002. fluorescent heart.png&quot;
--&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;129.33ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.606s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~106&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;155&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.262ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;245.740ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;121.11ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.357s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~145&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;152&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.066ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;439.297ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.456s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;220&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~225&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6505&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;54.549ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;373.43ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~79&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;132&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~1627&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5075&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42.771ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tfoot class=&quot;label&quot;&gt;&lt;tr&gt;&lt;td colspan=4&gt; Computation of cells labelled &lt;q&gt;time-out&lt;/q&gt; was terminated by the driver after like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8-11s&lt;/span&gt;; progress corresponds to &lt;em&gt;how many distinct output colours&lt;/em&gt; &lt;span style=&quot;white-space: nowrap;&quot;&gt;([​[​\overline{Set(O)}​]​])&lt;/span&gt; were produced vs. a correct implementation; this is a very vague proxy measured for a very vague amount of time. &lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;
&lt;div class=&quot;singles&quot;&gt;
&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.13-graphml-baseline.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.13-graphml-baseline.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
So far, all buffers have been allocated in &lt;samp&gt;HOST_VISIBLE &amp; HOST_COHERENT&lt;/samp&gt; memory like in the &lt;cite&gt;Example&lt;/cite&gt;, which was basically fine,
but proper usage of
&lt;/p&gt;
&lt;h2 id=&quot;memory-types&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#memory-types&quot;&gt;#&lt;/a&gt; memory types&lt;/h2&gt;
&lt;p class=&quot;continuation&quot;&gt;
is required to achieve best performance with the widest device support matrix.
&lt;a href=&quot;//registry.khronos.org/vulkan/specs/latest/man/html/vkGetPhysicalDeviceMemoryProperties.html&quot;&gt;
 &lt;code&gt;vk_instance.&lt;wbr&gt;get_physical_device_memory_properties&lt;wbr&gt;(physical_device)&lt;/code&gt;&lt;/a&gt;
yields a list of memory types, already sorted by preference.
Thus, &quot;a &lt;!--&quot;--&gt;[​[​Q​]​]&lt;!--&quot;--&gt; memory&quot; is commonly taken to mean &quot;the first memory type that satisfies predicate &lt;!--&quot;--&gt;[​[​Q​]​]&lt;!--&quot;--&gt;&quot;,
and since memory features are typified by &lt;a href=&quot;//registry.khronos.org/vulkan/specs/latest/man/html/VkMemoryPropertyFlagBits.html&quot;&gt;bitmask&lt;/a&gt;,
the predicate is mostly expressed as a conjunction of desired bits.
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/91d951285a89f501ffa9b08fc1ed6392012813ef/item/src/posterise_gpu.rs#L130&quot;&gt;
 Listing the memory types on the GPUs in question&lt;/a&gt;
yields:
&lt;/p&gt;
&lt;table class=&quot;memtype&quot;&gt;
 &lt;caption&gt;AMD Radeon RX 5700 XT THICC II [&lt;a href=&quot;//en.wikipedia.org/wiki/Radeon_RX_5000_series#Desktop&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8GiB&lt;/span&gt;&lt;/a&gt; on device, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16GiB&lt;/span&gt; on host]&lt;/caption&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7920MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7909MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;HOST_VISIBLE | HOST_COHERENT&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;256MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL | HOST_VISIBLE  | HOST_COHERENT&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7909MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;HOST_VISIBLE | HOST_COHERENT | HOST_CACHED&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td colspan=2&gt;(these repeat with &lt;samp&gt;| DEVICE_COHERENT_AMD | DEVICE_UNCACHED_AMD&lt;/samp&gt; set)&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;table class=&quot;memtype&quot;&gt;
 &lt;caption&gt;AMD Radeon RX 6500 XT (RADV NAVI24) [&lt;a href=&quot;//en.wikipedia.org/wiki/Radeon_RX_6000_series#Desktop&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4GiB&lt;/span&gt;&lt;/a&gt; on device, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64GiB&lt;/span&gt; on host]&lt;/caption&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4080MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4080MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32110MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;HOST_VISIBLE | HOST_COHERENT&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4080MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL | HOST_VISIBLE  | HOST_COHERENT&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4080MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL | HOST_VISIBLE  | HOST_COHERENT&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32110MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;HOST_VISIBLE | HOST_COHERENT | HOST_CACHED&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32110MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;HOST_VISIBLE | HOST_COHERENT | HOST_CACHED&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td colspan=2&gt;(these repeat, after uniquification, with &lt;samp&gt;| DEVICE_COHERENT_AMD | DEVICE_UNCACHED_AMD&lt;/samp&gt; set)&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;table class=&quot;memtype&quot;&gt;
 &lt;caption&gt;Intel(R) Iris(R) Xe Graphics (ADL GT2) [unified &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64GiB&lt;/span&gt;]&lt;/caption&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32007MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32007MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL | HOST_VISIBLE | HOST_COHERENT&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32007MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL | HOST_VISIBLE | HOST_COHERENT | HOST_CACHED&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32007MiB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;!--&quot;--&gt;DEVICE_LOCAL | PROTECTED&lt;!--&quot;--&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td colspan=2&gt;(these, minus the &lt;samp&gt;| PROTECTED&lt;/samp&gt; one, repeat verbatim)&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;indented continued&quot;&gt;
For the purposes of writing the shaders, I was targeting the 5700 XT in my desktop; conveniently, this is also the most restrictive device.
It appears that GPUs can only see up to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32GiB&lt;/span&gt; of host memory (or, indeed, memory at all), regardless of how much is actually attached
(I can come up with excuses for the discrete 6500 XT, but the Intel iGPU? no clue).
It's likewise unclear to me why the 6500 XT doubles up on some memory types (it's not the heap flags, those are also the same
 (&lt;samp&gt;DEVICE_LOCAL&lt;/samp&gt; and empty, resp.)).
Doesn't really matter or affect funxionality in any way, it's just a little goofy.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
All three input buffers are accessed constantly (and written directly by the host),
so they need to be in &lt;samp&gt;DEVICE_LOCAL &amp; HOST_VISIBLE &amp; HOST_COHERENT&lt;/samp&gt; memory
(taking up [​[​\operatorname{sizeof}(\texttt{params}) + k (\operatorname{sizeof}(\texttt{}\text{(}\texttt{float3}\text{, }\texttt{uint}\text{)}) + \operatorname{sizeof}(\texttt{uint}))​]​], so &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20B&lt;/span&gt; per unique colour).
This is a precious resource, so &lt;samp&gt;outputs&lt;/samp&gt; can't&lt;!--'--&gt; fit here
([​[​2^{24} \operatorname{sizeof}(\texttt{float4})​]​] is the whole [​[​256\text{MiB}​]​]!),
but from the perspective of the GPU, &lt;samp&gt;outputs&lt;/samp&gt; is write-once write-only,
and the last iteration of [​[​f​]​], functionally, &lt;em&gt;uploads&lt;/em&gt; the result,
so it doesn't need to be &lt;samp&gt;DEVICE_LOCAL&lt;/samp&gt; anyway, since the latency or speed don't matter.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Fall-backs are implemented from more specific to more generic memory types
(&lt;samp&gt;DEVICE_LOCAL &amp; HOST_VISIBLE &amp; HOST_COHERENT&lt;/samp&gt; → &lt;samp&gt;HOST_VISIBLE &amp; HOST_COHERENT&lt;/samp&gt;),
but I haven't&lt;!--'--&gt; encountered a device where this fall-back is taken.
Using these improved memory types yields
&lt;/p&gt;
&lt;!-- [src\main.rs:163:27] possible.swap_remove(i as usize) = &quot;.\\00.png&quot;
125.517616ms: MSC 16755 RGBs @ r=0.02
123.671737ms: MSC 16755 RGBs @ r=0.02
123.64457ms: MSC 16755 RGBs @ r=0.02
123.724261ms: MSC 16755 RGBs @ r=0.02
123.976013ms: MSC 16755 RGBs @ r=0.02
124.240745ms: MSC 16755 RGBs @ r=0.02
124.781076ms: MSC 16755 RGBs @ r=0.02
131.536719ms: MSC 16755 RGBs @ r=0.02
125.544783ms: MSC 16755 RGBs @ r=0.02
124.545926ms: MSC 16755 RGBs @ r=0.02
128.92985ms: MSC 16755 RGBs @ r=0.02
126.948738ms: MSC 16755 RGBs @ r=0.02
124.866201ms: MSC 16755 RGBs @ r=0.02
125.02679ms: MSC 16755 RGBs @ r=0.02
124.692933ms: MSC 16755 RGBs @ r=0.02
124.973964ms: MSC 16755 RGBs @ r=0.02
125.079314ms: MSC 16755 RGBs @ r=0.02
123.238869ms: MSC 16755 RGBs @ r=0.02
133.355731ms: MSC 16755 RGBs @ r=0.02
124.083777ms: MSC 16755 RGBs @ r=0.02
124.503967ms: MSC 16755 RGBs @ r=0.02
114.615312ms: MSC 16755 RGBs @ r=0.02 * freq
113.506276ms: MSC 16755 RGBs @ r=0.02 * freq
136.348983ms: MSC 16755 RGBs @ r=0.02 * freq
116.460888ms: MSC 16755 RGBs @ r=0.02 * freq
116.035567ms: MSC 16755 RGBs @ r=0.02 * freq
115.519385ms: MSC 16755 RGBs @ r=0.02 * freq
115.895804ms: MSC 16755 RGBs @ r=0.02 * freq
115.00441ms: MSC 16755 RGBs @ r=0.02 * freq
114.984185ms: MSC 16755 RGBs @ r=0.02 * freq
114.924115ms: MSC 16755 RGBs @ r=0.02 * freq
115.280613ms: MSC 16755 RGBs @ r=0.02 * freq
115.023427ms: MSC 16755 RGBs @ r=0.02 * freq
115.94531ms: MSC 16755 RGBs @ r=0.02 * freq
114.887288ms: MSC 16755 RGBs @ r=0.02 * freq
115.743063ms: MSC 16755 RGBs @ r=0.02 * freq
115.551684ms: MSC 16755 RGBs @ r=0.02 * freq
114.823293ms: MSC 16755 RGBs @ r=0.02 * freq
--&gt;
&lt;!-- [src\main.rs:163:27] possible.swap_remove(i as usize) = &quot;.\\00.png.degen.png&quot;
124.584262ms: MSC 16551 RGBs @ r=0.02
124.278176ms: MSC 16551 RGBs @ r=0.02
137.961221ms: MSC 16551 RGBs @ r=0.02
126.276192ms: MSC 16551 RGBs @ r=0.02
126.349846ms: MSC 16551 RGBs @ r=0.02
127.131061ms: MSC 16551 RGBs @ r=0.02
126.790563ms: MSC 16551 RGBs @ r=0.02
126.909194ms: MSC 16551 RGBs @ r=0.02
126.559941ms: MSC 16551 RGBs @ r=0.02
135.233004ms: MSC 16551 RGBs @ r=0.02
127.957858ms: MSC 16551 RGBs @ r=0.02
125.457546ms: MSC 16551 RGBs @ r=0.02
125.94656ms: MSC 16551 RGBs @ r=0.02
126.001197ms: MSC 16551 RGBs @ r=0.02
148.003221ms: MSC 16551 RGBs @ r=0.02 * freq
146.599569ms: MSC 16551 RGBs @ r=0.02 * freq
147.949792ms: MSC 16551 RGBs @ r=0.02 * freq
149.149387ms: MSC 16551 RGBs @ r=0.02 * freq
148.267652ms: MSC 16551 RGBs @ r=0.02 * freq
148.321081ms: MSC 16551 RGBs @ r=0.02 * freq
147.861347ms: MSC 16551 RGBs @ r=0.02 * freq
149.7842ms: MSC 16551 RGBs @ r=0.02 * freq
149.032868ms: MSC 16551 RGBs @ r=0.02 * freq
148.328929ms: MSC 16551 RGBs @ r=0.02 * freq
148.249842ms: MSC 16551 RGBs @ r=0.02 * freq
156.658474ms: MSC 16551 RGBs @ r=0.02 * freq
149.57169ms: MSC 16551 RGBs @ r=0.02 * freq
149.130672ms: MSC 16551 RGBs @ r=0.02 * freq
149.632062ms: MSC 16551 RGBs @ r=0.02 * freq
148.581285ms: MSC 16551 RGBs @ r=0.02 * freq
148.820661ms: MSC 16551 RGBs @ r=0.02 * freq
148.279122ms: MSC 16551 RGBs @ r=0.02 * freq
149.427702ms: MSC 16551 RGBs @ r=0.02 * freq
149.250208ms: MSC 16551 RGBs @ r=0.02 * freq
146.624926ms: MSC 16551 RGBs @ r=0.02 * freq
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;125.566ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;116.503ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;92.78%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.288ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.361ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.55%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.99%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;127.674ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;148.930ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;116.65%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.298ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.931ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.52%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.93%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;h2 id=&quot;branchless&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#branchless&quot;&gt;#&lt;/a&gt; who up branchin they execution&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
If there's half of one potential thing I know about the GPU execution model, it's that branches are either expensive or not real or some mixture of the two.
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/ad9926e0813ebbcc31b5c22f30e97d1b54ffedd1/item/src/posterise_mul.hlsl&quot;&gt;[​[​palette​]​]'s&lt;!--'--&gt; branch&lt;/a&gt;
can be flattened out;
so can
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/ad9926e0813ebbcc31b5c22f30e97d1b54ffedd1/item/src/posterise_mul.hlsl&quot;&gt;[​[​*freq​]​]'s&lt;!--'--&gt;&lt;/a&gt;
(but shouldn't, it's worse),
with a trivial change
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/ad9926e0813ebbcc31b5c22f30e97d1b54ffedd1/item/src/posterise_kernel.hlsl.inc#L36&quot;&gt;to the common kernel&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;KNOWN_RGBS_FREQS&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;BRANCHLESS_ADD&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ_LOAD&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;matched&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posterise_kernel.hlsl.inc&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;KNOWN_RGBS_FREQS&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint4&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE &amp;amp; HOST_COHERENT&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;BRANCHLESS_ADD&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ_LOAD&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;freq&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posterise_kernel.hlsl.inc&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#if&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;BRANCHLESS_ADD&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;matched&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;FREQ_LOAD
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; FREQ&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; FREQ &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
which expand to, effectively,
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; matched&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;matched&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
yielding
&lt;/p&gt;
&lt;!-- [src\main.rs:163:27] possible.swap_remove(i as usize) = &quot;.\\00.png&quot;
122.393961ms: MSC 16755 RGBs @ r=0.02
122.446786ms: MSC 16755 RGBs @ r=0.02
122.586247ms: MSC 16755 RGBs @ r=0.02
122.619149ms: MSC 16755 RGBs @ r=0.02
122.779135ms: MSC 16755 RGBs @ r=0.02
122.824414ms: MSC 16755 RGBs @ r=0.02
122.873014ms: MSC 16755 RGBs @ r=0.02
122.946667ms: MSC 16755 RGBs @ r=0.02
129.279102ms: MSC 16755 RGBs @ r=0.02
112.17356ms: MSC 16755 RGBs @ r=0.02 * freq
112.993414ms: MSC 16755 RGBs @ r=0.02 * freq
113.165172ms: MSC 16755 RGBs @ r=0.02 * freq
113.405454ms: MSC 16755 RGBs @ r=0.02 * freq
113.535555ms: MSC 16755 RGBs @ r=0.02 * freq
113.63366ms: MSC 16755 RGBs @ r=0.02 * freq
113.761952ms: MSC 16755 RGBs @ r=0.02 * freq
113.889035ms: MSC 16755 RGBs @ r=0.02 * freq
114.302584ms: MSC 16755 RGBs @ r=0.02 * freq
--&gt;
&lt;!-- [src\main.rs:163:27] possible.swap_remove(i as usize) = &quot;.\\00.png.degen.png&quot;
123.490017ms: MSC 16551 RGBs @ r=0.02
123.555521ms: MSC 16551 RGBs @ r=0.02
123.745089ms: MSC 16551 RGBs @ r=0.02
123.754145ms: MSC 16551 RGBs @ r=0.02
123.804556ms: MSC 16551 RGBs @ r=0.02
123.84742ms: MSC 16551 RGBs @ r=0.02
123.913528ms: MSC 16551 RGBs @ r=0.02
124.097059ms: MSC 16551 RGBs @ r=0.02
146.378004ms: MSC 16551 RGBs @ r=0.02 * freq
146.508709ms: MSC 16551 RGBs @ r=0.02 * freq
146.518368ms: MSC 16551 RGBs @ r=0.02 * freq
146.570892ms: MSC 16551 RGBs @ r=0.02 * freq
146.616775ms: MSC 16551 RGBs @ r=0.02 * freq
146.671411ms: MSC 16551 RGBs @ r=0.02 * freq
147.022174ms: MSC 16551 RGBs @ r=0.02 * freq
150.334794ms: MSC 16551 RGBs @ r=0.02 * freq
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;123.416ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;113.429ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;91.91%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.71%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.64%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.87 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.22%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.57%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.34 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;123.776ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;147.078ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;118.83%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.05%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.24%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-2.18 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.49%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.15%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-2.89 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continued&quot;&gt;
For reference, &quot;worse&quot; means, giving [​[​*freq​]​] &lt;samp&gt;BRANCHLESS_ADD&lt;/samp&gt; = &lt;samp&gt;1&lt;/samp&gt; and &lt;samp&gt;FREQ&lt;/samp&gt; = &lt;samp&gt;matched * freq&lt;/samp&gt;:
&lt;/p&gt;
&lt;!-- matched * freq
[src\main.rs:163:27] possible.swap_remove(i as usize) = &quot;.\\00.png&quot;
114.437818ms: MSC 16755 RGBs @ r=0.02 * freq
114.758092ms: MSC 16755 RGBs @ r=0.02 * freq
114.857102ms: MSC 16755 RGBs @ r=0.02 * freq
115.756043ms: MSC 16755 RGBs @ r=0.02 * freq
116.719583ms: MSC 16755 RGBs @ r=0.02 * freq
115.576436ms: MSC 16755 RGBs @ r=0.02 * freq
128.980864ms: MSC 16755 RGBs @ r=0.02 * freq
116.097146ms: MSC 16755 RGBs @ r=0.02 * freq
116.048546ms: MSC 16755 RGBs @ r=0.02 * freq
115.145077ms: MSC 16755 RGBs @ r=0.02 * freq
116.339238ms: MSC 16755 RGBs @ r=0.02 * freq
115.539911ms: MSC 16755 RGBs @ r=0.02 * freq
116.745845ms: MSC 16755 RGBs @ r=0.02 * freq
118.025432ms: MSC 16755 RGBs @ r=0.02 * freq
115.237447ms: MSC 16755 RGBs @ r=0.02 * freq
115.994211ms: MSC 16755 RGBs @ r=0.02 * freq
((114.437818+114.758092+114.857102+115.756043+116.719583+115.576436+128.980864+116.097146+116.048546+115.145077+116.339238+115.539911+116.745845+118.025432+115.237447+115.994211)/16)
[src\main.rs:163:27] possible.swap_remove(i as usize) = &quot;.\\00.png.degen.png&quot;
156.987502ms: MSC 16551 RGBs @ r=0.02 * freq
147.093413ms: MSC 16551 RGBs @ r=0.02 * freq
148.650411ms: MSC 16551 RGBs @ r=0.02 * freq
148.120343ms: MSC 16551 RGBs @ r=0.02 * freq
147.61533ms: MSC 16551 RGBs @ r=0.02 * freq
148.564381ms: MSC 16551 RGBs @ r=0.02 * freq
146.480032ms: MSC 16551 RGBs @ r=0.02 * freq
148.253464ms: MSC 16551 RGBs @ r=0.02 * freq
149.445512ms: MSC 16551 RGBs @ r=0.02 * freq
148.260407ms: MSC 16551 RGBs @ r=0.02 * freq
150.607676ms: MSC 16551 RGBs @ r=0.02 * freq
147.72883ms: MSC 16551 RGBs @ r=0.02 * freq
147.211139ms: MSC 16551 RGBs @ r=0.02 * freq
147.987826ms: MSC 16551 RGBs @ r=0.02 * freq
147.651252ms: MSC 16551 RGBs @ r=0.02 * freq
147.814257ms: MSC 16551 RGBs @ r=0.02 * freq
((156.987502+147.093413+148.650411+148.120343+147.61533+148.564381+146.480032+148.253464+149.445512+148.260407+150.607676+147.72883+147.211139+147.987826+147.651252+147.814257)/16)
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt; &lt;th style=&quot;padding-left: 1em;&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;116.641ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;94.51%&lt;/span&gt;&lt;/td&gt; &lt;td &gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;148.654ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;101.07%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs not that) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-2.83%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.60 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td &gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-1.07%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-17.75 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;h2 id=&quot;grid&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#grid&quot;&gt;#&lt;/a&gt; Hitting the griddy? In this economy?&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Any particle system, which this is, is improved by spatially partitioning constituent particles,
and iterating only those whose partitions fall within the radius of influence.
This applies basically-straight-forwardly to this problem,
except that since the underlying set of [​[​Multiset(D)​]​] is constant,
the elements of [​[​D​]​] can be assigned to constant cells
(or, equivalently but more importantly, cells can be said to contain a constant subset of [​[​D​]​],
 where no two cells share any elements and the union of all cells is [​[​D​]​])
a priori,
but each iteration of [​[​q_t​]​] moves around, so the cell it's&lt;!--'--&gt; found in will differ.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
For optimal (well, &quot;in any way meaningful&quot;) occupancy, we must additionally observe a nigh-universal factoid about the shape of the data:
&lt;/p&gt;
&lt;div class=&quot;one-by-each continuation&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.14-unscaled+scaled-ortho-front.png&quot;&gt;&lt;img alt=&quot;Coloured point clouds labelled α, β, γ, δ, ε, in two rows: the bottom with a bounding box around the cloud which itself takes up like a twentieth of the visible volume, the top with the bounded bit blown up&quot; src=&quot;/content/assets/blogn_t/018.14-unscaled+scaled-ortho-front.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;Bottom: [​[​D​]​], bounds of data out-lined; top: bounding box scaled to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;; front view&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.15-unscaled+scaled-ortho-top.png&quot;&gt;&lt;img alt=&quot;The same, from a different angle&quot; src=&quot;/content/assets/blogn_t/018.15-unscaled+scaled-ortho-top.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;Top view&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;div id=&quot;videos_side_by_each&quot;&gt;
 &lt;video width=&quot;100%&quot; autoplay controls&gt;&lt;source src=&quot;/content/assets/blogn_t/018.16-unscaled+scaled-0001-0599-colourful+vhrHst19.mp4&quot; type=&quot;video/mp4&quot; /&gt;&lt;/video&gt;
 &lt;video width=&quot;100%&quot; autoplay controls&gt;&lt;source src=&quot;/content/assets/blogn_t/018.17-unscaled+scaled-0001-0599-random+vhrHst19.mp4.mp4&quot; type=&quot;video/mp4&quot; /&gt;&lt;/video&gt;
&lt;/div&gt;
&lt;script&gt;
 {
  let machine_seeking = false;
  let done_barrier = false;
  videos_side_by_each.children[0].playbackRate = videos_side_by_each.children[1].playbackRate = 0.7;
  for(let i = 0; i != 2; ++i) {
   let curr = videos_side_by_each.children[i];
   let opp = videos_side_by_each.children[1 - i];
   curr.addEventListener(&quot;seeked&quot;, function() {
    if(!machine_seeking)
     opp.currentTime = curr.currentTime;
    machine_seeking = !machine_seeking;
   });
   curr.addEventListener(&quot;ended&quot;, function() {
    if(done_barrier++) {
     done_barrier = false;
     curr.play();
     opp.play();
    }
   });
   curr.addEventListener(&quot;pause&quot;, function() {
    if(!curr.ended)
     opp.pause();
   });
   curr.addEventListener(&quot;play&quot;, function() {
    opp.play();
   });
   curr.addEventListener(&quot;ratechange&quot;, function() {
    opp.playbackRate = curr.playbackRate;
   });
  }
 }
&lt;/script&gt;
&lt;!--
α CDSCN9810.JPG
β B.png
γ 0image.png
δ 003. cinque.png
ε 00.png
--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
As is hopefully obvious from the figures, the range of [​[​P​]​] actually used by any given input tends to be quite narrow,
so subdividing [​[​P​]​] directly will yield poor occupancy.
Indeed, for the datasets visualised above:
&lt;/p&gt;
&lt;table id=&quot;Pvol&quot;&gt;
 &lt;tr&gt;&lt;th&gt;&lt;/th&gt; &lt;th&gt;volume&lt;/th&gt; &lt;th colspan=5&gt;bounding box&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #4b8494;&quot;&gt;α&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;≈0.041316&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[​[​[0.13635494, 1.0]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.13823886, 0.02675569]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.16005541, 0.12989232]​]​]&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #94a088;&quot;&gt;β&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;≈0.026181&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[​[​[0.27619627, 0.9986911]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.15646803, 0.04568255]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.037055194, 0.1422047]​]​]&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #735d56;&quot;&gt;γ&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;≈0.034417&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[​[​[0.0, 0.9665335]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.06452984, 0.12635213]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.10584019, 0.08071107]​]​]&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #15090d;&quot; class=&quot;dark-invert&quot;&gt;δ&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;≈0.107448&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[​[​[0.0, 0.68679345]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.18539383, 0.20771612]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.2556958, 0.14228153]​]​]&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #b57688;&quot;&gt;ε&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;≈0.057179&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[​[​[0.31232694, 1.0]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.03692481, 0.27541596]​]​]&lt;/td&gt; &lt;td&gt;[​[​\times​]​]&lt;/td&gt; &lt;td&gt;[​[​[-0.09577876, 0.17043555]​]​]&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuation&quot;&gt;
so, with Oklab [​[​P​]​]'s&lt;!--'--&gt; volume being &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt;, the average bounds are just &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.33%&lt;/span&gt; of that!
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
For a cartesian grid of dimension [​[​G \in \mathbb{N}_+​]​] we can define a bijective map [​[​g : P \to [0, G )^3​]​] such that
&lt;/p&gt;
&lt;div class=&quot;mathnospace real&quot;&gt;
[​![​
\begin{align}
&lt;!--&quot;--&gt;g(p)      &amp;= \min (G \frac{p - B_m}{B_r}, G-\varepsilon)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;g^{-1}(g) &amp;= \frac{g}{G}B_r + B_m\\&lt;!--&quot;--&gt;
\text{where}\\
&lt;!--&quot;--&gt;  D_i       &amp;= \{x_i | x \in D\}\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  B_m       &amp;= (\min D_1, \min D_2, \min D_3)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  B_M       &amp;= (\max D_1, \max D_2, \max D_3)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;  B_r       &amp;= B_M - B_m\\&lt;!--&quot;--&gt;
\end{align}
​]!​]
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
a bare definition of [​[​g​]​] (without [​[​\min​]​]) would also include [​[​{G}^3​]​] in the codomain
for points on the far extrema of the bounding box;
we abuse the fact that we don't&lt;!--'--&gt; &lt;em&gt;actually&lt;/em&gt; use [​[​g^{-1}(g(p))​]​] as data, just as optimisation metadata,
to make it much more useful (the error induced is imperceptible after quantisation later):
&lt;!-- the grid cell each [​[​p​]​] falls in is given by [​[​\operatorname{trunc}(g(p)) \in ([0, G ) \cap \mathbb{Z})^3​]​]. --&gt;
the grid cell each [​[​p​]​] falls in is given by [​[​\operatorname{trunc}(g(p)) \in \bar{G}^3​]​].
&lt;!-- The points within each cell [​[​h : ([0, G ) \cap \mathbb{Z})^3 \to \mathcal{P}(D)​]​] can then be obtained by computing --&gt;
The points within each cell [​[​h : \bar{G}^3 \to \mathcal{P}(D)​]​] can then be obtained by computing
[​[​h(x) = \{p | p \in D \wedge \operatorname{trunc}(g(p)) = x\}​]​];
the desired properties
[​[​h(x) \cap h(y) \ne \varnothing \Leftrightarrow x = y \text{ &amp; } \bigcup (h \circ {\operatorname{trunc}} \circ g \circ D) = D​]​]
are preserved under these mappings.
&lt;/p&gt;
&lt;div class=&quot;three-by-each directly continuation&quot;&gt;
    &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.18-grid-ortho-G=100-x.png&quot;&gt;&lt;img alt=&quot;Blown up point cloud α overlaid with a 100x100 grid&quot; src=&quot;/content/assets/blogn_t/018.18-grid-ortho-G=100-x.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​G = 100​]​], orthographic projection along [​[​x​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.19-grid-ortho-G=100-y.png&quot;&gt;&lt;img alt=&quot;The same, alongside different axis&quot; src=&quot;/content/assets/blogn_t/018.19-grid-ortho-G=100-y.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​y​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.20-grid-ortho-G=100-z.png&quot;&gt;&lt;img alt=&quot;Likewise&quot; src=&quot;/content/assets/blogn_t/018.20-grid-ortho-G=100-z.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​z​]​]&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;div class=&quot;singles continuation&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.21-grid-ortho-G=10-persp.png&quot;&gt;&lt;img alt=&quot;Point cloud α in 3D overlaid with a 10x10x10 grid&quot; src=&quot;/content/assets/blogn_t/018.21-grid-ortho-G=10-persp.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​G = 10​]​] (it's&lt;!--'--&gt; &lt;a href=&quot;//101010.pl/@nabijaczleweli/114263550582075495&quot;&gt;practically impossible&lt;/a&gt; to get a useful non-axial non-ortho render at [​[​100​]​])&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;h3 id=&quot;grid-bbox&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#grid-bbox&quot;&gt;#&lt;/a&gt; box bondage 🥺&lt;/h3&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Computing [​[​(B_m, B_M)​]​] is more-usefully analysed as a [​[​(\min, \max)​]​] fold
over [​[​D​]​] starting at [​[​(+\infty^3, -\infty^3)​]​].
To this end, [​[​\min​]​] and [​[​\max​]​] are available as atomics —
HLSL calls them
&lt;a href=&quot;//learn.microsoft.com/en-us/windows/win32/direct3dhlsl/interlockedmin&quot;&gt;&lt;samp&gt;InterlockedMin&lt;/samp&gt;&lt;/a&gt;/&lt;a href=&quot;//learn.microsoft.com/en-us/windows/win32/direct3dhlsl/interlockedmax&quot;&gt;-&lt;samp&gt;Max&lt;/samp&gt;&lt;/a&gt;
even though no locking, inter- or otherwise, takes place;
&lt;a href=&quot;//registry.khronos.org/OpenGL-Refpages/gl4/html/atomicMin.xhtml&quot;&gt;GLSL nomenclature&lt;/a&gt; is reasonable,
so this is an unforced error on Microsoft's&lt;!--'--&gt; part —
but only on integers, which coordinates in [​[​D​]​] aren't&lt;!--'--&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
But they are IEEE754 &lt;samp&gt;float&lt;/samp&gt;s, which have a well-behaved structure when interpreted as-if they were integers.
Indeed, if [​[​P​]​] were in the form [​[​[0, x]^3​]​], no further processing would be required,
since positive &lt;samp&gt;float&lt;/samp&gt;s compare the same as &lt;samp&gt;uint&lt;/samp&gt;s
(other relations can be drawn, cf.
 &lt;a href=&quot;//stackoverflow.com/a/46995665/2851815&quot;&gt;&lt;cite&gt;No. Two floating point values (IEEE 754 binary64) cannot compare&lt;/cite&gt;, chux, 2015&lt;/a&gt;).
But it isn't&lt;!--'--&gt;, so we desire a bijection [​[​u : float \to uint \text{ or } int​]​] monotonic in [​[​(-\infty, +\infty)​]​],
ideally something &lt;del&gt;I don't&lt;!-- '--&gt; have to derive because that sucks&lt;/del&gt; battle-tested.
The literature provides
&lt;a href=&quot;//github.com/kripken/bullet/blob/7e5c986/src/BulletMultiThreaded/GpuSoftBodySolvers/DX11/HLSL/ComputeBounds.hlsl#L51&quot;&gt;
 &lt;cite&gt;Bullet 2.81, GPU Soft Body Solvers, DX11&lt;/cite&gt;, Erwin Coumans &amp;a., 2012&lt;/a&gt;
(and &lt;a href=&quot;//github.com/kripken/bullet/blob/7e5c986/src/BulletMultiThreaded/GpuSoftBodySolvers/DX11/btSoftBodySolver_DX11.cpp#L1178-L1179&quot;&gt;[​[​u^{-1}​]​]&lt;/a&gt;),
for 32-bit &lt;samp&gt;float&lt;/samp&gt;s and &lt;samp&gt;uint&lt;/samp&gt;s
(notationally, this is where real math (Wikipedia lists operators in [​[​\LaTeX​]​]) ends and &quot;computer science&quot; (Wikipedia l. op. in &lt;samp&gt;Courier&lt;/samp&gt;) begins):
&lt;/p&gt;
&lt;div class=&quot;mathnospace&quot; style=&quot;text-align: center;&quot;&gt;
&lt;pre&gt;u(f)&lt;!--&quot; --&gt;   = asuint(f) ^ ((~(asuint(f) &gt;&gt; 31) + 1) | 0x8000`0000) &lt;!--&quot;--&gt;
u&lt;sup style=&quot;display: inline-block; width: 1.43em;&quot;&gt;-1&lt;/sup&gt;(u)&lt;!--&quot;--&gt; = asfloat(u ^ (( (       u  &gt;&gt; 31) - 1) | 0x8000`0000))&lt;!--&quot;--&gt;
&lt;/pre&gt;
&lt;span style=&quot;display: inline-block;&quot;&gt;(with logical &lt;code&gt;&gt;&gt;&lt;/code&gt; and wrap-around &lt;code&gt;+&lt;/code&gt;/&lt;code&gt;-&lt;/code&gt;;&lt;/span&gt;
&lt;span style=&quot;display: inline-block;&quot;&gt; &lt;code&gt;asuint()&lt;/code&gt;/&lt;code&gt;asfloat()&lt;/code&gt; like in HLSL or Rust &lt;code&gt;f32::to_bits()&lt;/code&gt;/&lt;code&gt;f32::from_bits()&lt;/code&gt;)&lt;/span&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Within the [​[​(-\infty, +\infty)​]​] domain,
IEEE754 &lt;samp&gt;float&lt;/samp&gt;s consist of [​[​(1\ \text{sign bit})(31\ \text{bits of distance from}\ 0\ \text{in natural }\texttt{uint}\text{ sort order})​]​].
There's more stuff in there but it's not relevant here; &lt;a href=&quot;//float.exposed&quot;&gt;&lt;span id=&quot;google&quot;&gt;Google&lt;/span&gt; float \infty to learn more&lt;/a&gt;.
The [​[​l​]​] axis from example &lt;samp style=&quot;color: #94a088;&quot;&gt;β&lt;/samp&gt; can thus be transcoded as
&lt;/p&gt;
&lt;script&gt;
{
 let googles = [&quot;Google&quot;, &quot;DDG&quot;, &quot;Baidu&quot;, &quot;Kagi&quot;, &quot;Startpage&quot;];
 google.innerText = googles[Math.floor(Math.random() * googles.length)];
}
&lt;/script&gt;
&lt;div class=&quot;maths-by-each&quot;&gt;
 &lt;div&gt;
  &lt;table&gt;
   &lt;caption&gt;
    &lt;a href=&quot;//float.exposed/0xbe203928&quot;&gt;&lt;samp&gt;f&lt;/samp&gt; = &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;−0.15646803&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;
    &lt;samp&gt;asuint(f)&lt;/samp&gt; = &lt;samp&gt;0xBE20`3928&lt;/samp&gt;&lt;br /&gt;
                             &lt;samp&gt;0b1&lt;small&gt;&lt;small&gt;011`1110`0010`0000`0011`1001`0010`1000&lt;/small&gt;&lt;/small&gt;&lt;/samp&gt;&lt;br /&gt;
    [​[​u(f)​]​]
   &lt;/caption&gt;
   &lt;tr&gt;&lt;th&gt;asuint(f) &lt;/th&gt; &lt;th&gt; ^ &lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;~&lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;asuint(f) &lt;/th&gt; &lt;th&gt; &gt;&gt; 31&lt;/th&gt; &lt;th&gt;)&lt;/th&gt; &lt;th&gt; + 1)&lt;/th&gt; &lt;th&gt; | 0x8000`0000&lt;/th&gt; &lt;th&gt;)&lt;/th&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0xBE20`3928&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;~&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;0xBE20`3928&lt;/td&gt; &lt;td&gt; &gt;&gt; 31&lt;/td&gt; &lt;td&gt;)&lt;/td&gt; &lt;td&gt; + 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0xBE20`3928&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;~&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td colspan=2 class=r&gt;1&lt;/td&gt; &lt;td&gt;)&lt;/td&gt; &lt;td&gt; + 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0xBE20`3928&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td colspan=5 class=r&gt;0xFFFF`FFFE&lt;/td&gt; &lt;td&gt; + 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0xBE20`3928&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td colspan=2&gt;(&lt;/td&gt; &lt;td colspan=5 class=r&gt;0xFFFF`FFFF&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt; | 0x8000`0000&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0xBE20`3928&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td colspan=6 class=r&gt;0xFFFF`FFFF&lt;/td&gt; &lt;td colspan=3&gt;&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td colspan=11&gt;0x41DF`C6D7&lt;/td&gt; &lt;td&gt;∎&lt;/td&gt;&lt;/tr&gt;
  &lt;/table&gt;
  &lt;p&gt;&lt;/p&gt;
  &lt;table&gt;
   &lt;caption&gt;
    &lt;samp&gt;u&lt;sup style=&quot;display: inline-block; width: 1.43em;&quot;&gt;-1&lt;/sup&gt;(u(f))&lt;/samp&gt;
   &lt;/caption&gt;
   &lt;tr&gt;&lt;th&gt;asfloat(&lt;/th&gt; &lt;th&gt;u &lt;/th&gt; &lt;th&gt; ^ &lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;(u &lt;/th&gt; &lt;th&gt; &gt;&gt; 31)&lt;/th&gt; &lt;th&gt; - 1)&lt;/th&gt; &lt;th&gt; | 0x8000`0000)&lt;/th&gt; &lt;th&gt;)&lt;/th&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td&gt;0x41DF`C6D7&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(0x41DF`C6D7&lt;/td&gt; &lt;td&gt; &gt;&gt; 31)&lt;/td&gt; &lt;td&gt; - 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000)&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td&gt;0x41DF`C6D7&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td colspan=2 class=r&gt; 0&lt;/td&gt; &lt;td&gt; - 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000)&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td&gt;0x41DF`C6D7&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td colspan=4 class=r&gt;0xFFFF`FFFF&lt;/td&gt; &lt;td&gt; | 0x8000`0000)&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td&gt;0x41DF`C6D7&lt;/td&gt; &lt;td colspan=2&gt; ^ &lt;/td&gt; &lt;td colspan=4 class=r&gt;0xFFFF`FFFF&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td colspan=8&gt;0xBE20`3928&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td colspan=9&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;−0.15646803&lt;/span&gt;&lt;/td&gt; &lt;td&gt;∎&lt;/td&gt;&lt;/tr&gt;
  &lt;/table&gt;
 &lt;/div&gt;
 &lt;div&gt;
  &lt;table&gt;
   &lt;caption&gt;
    &lt;a href=&quot;//float.exposed/0x3d3b1da0&quot;&gt;&lt;samp&gt;f&lt;/samp&gt; = &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.04568255&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;
    &lt;samp&gt;asuint(f)&lt;/samp&gt; = &lt;samp&gt;0x3D3B`1DA0&lt;/samp&gt;&lt;br /&gt;
                             &lt;samp&gt;0b0&lt;small&gt;&lt;small&gt;011`1101`0011`1011`0001`1101`1010`0000&lt;/small&gt;&lt;/small&gt;&lt;/samp&gt;&lt;br /&gt;
    [​[​u(f)​]​]
   &lt;/caption&gt;
   &lt;tr&gt;&lt;th&gt;asuint(f) &lt;/th&gt; &lt;th&gt; ^ &lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;~&lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;asuint(f) &lt;/th&gt; &lt;th&gt; &gt;&gt; 31&lt;/th&gt; &lt;th&gt;)&lt;/th&gt; &lt;th&gt; + 1)&lt;/th&gt; &lt;th&gt; | 0x8000`0000&lt;/th&gt; &lt;th&gt;)&lt;/th&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0x3D3B`1DA0&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;~&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;0x3D3B`1DA0&lt;/td&gt; &lt;td&gt; &gt;&gt; 31&lt;/td&gt; &lt;td&gt;)&lt;/td&gt; &lt;td&gt; + 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0x3D3B`1DA0&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;~&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td colspan=2 class=r&gt;0&lt;/td&gt; &lt;td&gt;)&lt;/td&gt; &lt;td&gt; + 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0x3D3B`1DA0&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td colspan=5 class=r&gt;0xFFFF`FFFF&lt;/td&gt; &lt;td&gt; + 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0x3D3B`1DA0&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td colspan=2&gt;(&lt;/td&gt; &lt;td colspan=6 class=r&gt;0&lt;/td&gt; &lt;td&gt; | 0x8000`0000&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;0x3D3B`1DA0&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td colspan=9 class=r&gt;0x8000`0000&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td colspan=11&gt;0xBD3B`1DA0&lt;/td&gt; &lt;td&gt;∎&lt;/td&gt;&lt;/tr&gt;
  &lt;/table&gt;
  &lt;p&gt;&lt;/p&gt;
  &lt;table class=&quot;notmath&quot;&gt;
   &lt;caption&gt;
    &lt;samp&gt;u&lt;sup style=&quot;display: inline-block; width: 1.43em;&quot;&gt;-1&lt;/sup&gt;(u(f))&lt;/samp&gt;
   &lt;/caption&gt;
   &lt;tr&gt;&lt;th&gt;asfloat(&lt;/th&gt; &lt;th&gt;u &lt;/th&gt; &lt;th&gt; ^ &lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;(&lt;/th&gt; &lt;th&gt;(u &lt;/th&gt; &lt;th&gt; &gt;&gt; 31)&lt;/th&gt; &lt;th&gt; - 1)&lt;/th&gt; &lt;th&gt; | 0x8000`0000)&lt;/th&gt; &lt;th&gt;)&lt;/th&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td&gt;0xBD3B`1DA0&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(0xBD3B`1DA0&lt;/td&gt; &lt;td&gt; &gt;&gt; 31)&lt;/td&gt; &lt;td&gt; - 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000)&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td&gt;0xBD3B`1DA0&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td colspan=2 class=r&gt; 1&lt;/td&gt; &lt;td&gt; - 1)&lt;/td&gt; &lt;td&gt; | 0x8000`0000)&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td&gt;0xBD3B`1DA0&lt;/td&gt; &lt;td&gt; ^ &lt;/td&gt; &lt;td&gt;(&lt;/td&gt; &lt;td colspan=4 class=r&gt;0&lt;/td&gt; &lt;td&gt; | 0x8000`0000)&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td&gt;0xBD3B`1DA0&lt;/td&gt; &lt;td colspan=2&gt; ^ &lt;/td&gt; &lt;td colspan=5 class=r&gt;0x8000`0000 &lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td&gt;asfloat(&lt;/td&gt; &lt;td colspan=8&gt;0x3D3B`1DA0&lt;/td&gt; &lt;td&gt;)&lt;/td&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;td colspan=9&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.04568255&lt;/span&gt;&lt;/td&gt; &lt;td&gt;∎&lt;/td&gt;&lt;/tr&gt;
  &lt;/table&gt;
 &lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
This reveals some core insights:
&lt;/p&gt;
&lt;ul&gt;
 &lt;li&gt;[​[​\begin{align} \text{If}\ sgn(f) \text{:}\\ u(f) &amp;= f \oplus \mathrm{FFFFFFFF}_{16} = \neg f\\ u^{-1}(u) &amp;= u \oplus \mathrm{FFFFFFFF}_{16} = \neg u\\ \text{Otherwise:}\\ u(f) &amp;= f \oplus \mathrm{80000000}_{16}\\ u^{-1}(u) &amp;= u \oplus \mathrm{80000000}_{16} \end{align}​]​]&lt;/li&gt;
 &lt;li&gt;the sign bit is always flipped, yielding the top bit set for positive &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;f&lt;/span&gt;s and clear for negative &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;f&lt;/span&gt;s, inducing a clear partition:&lt;br /&gt;
     &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;u(&lt;span style=&quot;width: 0.7em; display: inline-block;&quot;&gt; &lt;/span&gt;0.0)&lt;/span&gt; = &lt;samp&gt;0x8000`0000&lt;/samp&gt; = &lt;samp&gt;0b1&lt;small&gt;&lt;small&gt;000`0000`0000`0000`0000`0000`0000`0000&lt;/small&gt;&lt;/small&gt;&lt;/samp&gt;&lt;br /&gt;
     &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;u(&lt;span style=&quot;width: 0.7em; display: inline-block;&quot;&gt;−&lt;/span&gt;0.0)&lt;/span&gt; = &lt;samp&gt;0x7FFF`FFFF&lt;/samp&gt; = &lt;samp&gt;0b0&lt;small&gt;&lt;small&gt;111`1111`1111`1111`1111`1111`1111`1111&lt;/small&gt;&lt;/small&gt;&lt;/samp&gt;&lt;br /&gt;
     but this means that the condition is mirrored between &lt;samp&gt;u&lt;/samp&gt; and &lt;samp&gt;u&lt;sup style=&quot;display: inline-block; width: 1.43em;&quot;&gt;-1&lt;/sup&gt;&lt;/samp&gt;&lt;/li&gt;
 &lt;li&gt;since the remaining bits are &quot;distance from zero&quot;, so more negative numbers are larger, they are flipped so more negative numbers are smaller&lt;/li&gt;
 &lt;li&gt;functionally, this is basically most of a (sign + magnitude) ↔ (two's&lt;!--'--&gt; complement) implementation
     (just missing the &lt;code&gt;+ 1&lt;/code&gt; at the end for negative numbers)&lt;/li&gt;
 &lt;li&gt;both major optimisers
     (and, accd'g&lt;!--'--&gt; to &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/f32-fromto-u32/tree&quot;&gt;my measurements&lt;/a&gt;, all three GPU driver optimisers) turn
     &lt;samp style=&quot;white-space: nowrap;&quot;&gt;~(f &gt;&gt; 31) + 1&lt;/samp&gt; into
     &lt;samp style=&quot;white-space: nowrap;&quot;&gt;f &gt;&gt;&lt;sub&gt;arithmetic&lt;/sub&gt; 31&lt;/samp&gt;
     (since the desired state equvalent to the top bit being copied to every other bit, which a sign-extension all the way down will do);
     this reduces &lt;samp&gt;u&lt;/samp&gt; from (lsr31,neg,add,or,xor) to (asr31,or,xor) which is unbeatable&lt;/li&gt;
 &lt;li&gt;this could be more clearly (but less goodly since it induces a branch) be expressed ideologically as&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;mathnospace&quot; style=&quot;text-align: center;&quot;&gt;
&lt;pre&gt;u(f)&lt;!--&quot; --&gt;   = asuint(f) ^ (0xFFFF`FFFF if (asuint(f) &amp; 0x8000`0000) else 0x8000`0000)&lt;!--&quot;--&gt;
u&lt;sup style=&quot;display: inline-block; width: 1.43em;&quot;&gt;-1&lt;/sup&gt;(u)&lt;!--&quot;--&gt; = asfloat(u ^ (0xFFFF`FFFF if not    (u  &amp; 0x8000`0000) else 0x8000`0000)&lt;!--&quot;--&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
[​[​B_m​]​] and [​[​B_M​]​]/[​[​B_r​]​] can be allocated directly, minding the free scalars in each 4-primitive block.
Since the reduxion wants to do atomic operations on integers (and no aliasing is possible),
these must be declared as &lt;samp&gt;uint3&lt;/samp&gt;s for that shader, and may be &lt;samp&gt;float3&lt;/samp&gt; in others;
theoretically it's&lt;!--'--&gt; possible to keep &lt;samp&gt;known_rgbs_pack::lab&lt;/samp&gt; as a &lt;samp&gt;float3&lt;/samp&gt;
and bit-cast with &lt;code&gt;asuint()&lt;/code&gt; but there's&lt;!--'--&gt; no reason to do this.
So, lifting the declaration to
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/0697ea1f075b0952bcbffde090b848b95084c9c8%5E/item/src/shader.h&quot;&gt;a common &lt;samp&gt;shader.h&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;_padding1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;_padding2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;_padding3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;bbox_max&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;bbox_range&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;// find_bbox.hlsl only&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;known_rgbs_pack&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
thus,
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/0697ea1f075b0952bcbffde090b848b95084c9c8/item/src/find_bbox.hlsl&quot;&gt;&lt;samp&gt;find_bbox.hlsl&lt;/samp&gt;&lt;/a&gt;
can &lt;code&gt;typedef&lt;/code&gt; &lt;code&gt;point_t&lt;/code&gt; one way, and everything else — the other
(also note how &lt;cite&gt;Bullet 2.81&lt;/cite&gt; does it a little goofy and applies &lt;samp&gt;u&lt;/samp&gt; per-component; there is no reason to do this):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shader.h&quot;&lt;/span&gt;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;

&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; known_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;tmp &lt;span class=&quot;token operator&quot;&gt;^=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x80000000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/0697ea1f075b0952bcbffde090b848b95084c9c8/item/src/posterise_gpu.rs#L467&quot;&gt;the driver&lt;/a&gt;
just needs to supply the integral equivalent of [​[​(+\infty^3, -\infty^3)​]​]
and post-process with &lt;samp&gt;u&lt;sup style=&quot;display: inline-block; width: 1.43em;&quot;&gt;-1&lt;/sup&gt;&lt;/samp&gt;
(this is where a real enum would've&lt;!--'--&gt; been nice):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FIND_BBOX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_COUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FIND_BBOX&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_DATA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_COUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/posterise.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/posterise_mul.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/find_bbox.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Pipeline&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [SHADER_COUNT]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token attribute attr-name&quot;&gt;#[repr(C)]&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;ParamsT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;i32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;_padding1&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;_padding2&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;_padding3&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ParamsT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_bits&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0xFFFFFFFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bbox_range &lt;span class=&quot;token comment&quot;&gt;/* as bbox_max */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_bits&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0x00000000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;_padding1&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _padding2&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _padding3&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// find_bbox.hlsl&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;FIND_BBOX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;become_float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bbox&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bbox&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;to_bits&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;bu&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_bits&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bu &lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bu &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;wrapping_sub&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x80000000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; bbox_min &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;become_float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; bbox_range &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; bbox_max &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;become_float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... posterise.hlsl/posterise_mul.hlsl &amp;amp;c.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
102.331µs: cmdbussy 16755
293.409µs: cmdbussy 16755
102.029µs: cmdbussy 16755
108.067µs: cmdbussy 16755
106.255µs: cmdbussy 16755
95.992µs: cmdbussy 16755
111.99µs: cmdbussy 16755
81.804µs: cmdbussy 16755
66.107µs: cmdbussy 16755
136.743µs: cmdbussy 16755
72.748µs: cmdbussy 16755
66.108µs: cmdbussy 16755
115.915µs: cmdbussy 16755
90.86µs: cmdbussy 16755
349.252µs: cmdbussy 16755
89.652µs: cmdbussy 16755
95.388µs: cmdbussy 16755
121.348µs: cmdbussy 16755
172.06µs: cmdbussy 16755
153.647µs: cmdbussy 16755
94.482µs: cmdbussy 16755
197.719µs: cmdbussy 16755
152.742µs: cmdbussy 16755
116.518µs: cmdbussy 16755
254.167µs: cmdbussy 16755
83.917µs: cmdbussy 16755
77.579µs: cmdbussy 16755
229.112µs: cmdbussy 16755
192.888µs: cmdbussy 16755
139.158µs: cmdbussy 16755
105.048µs: cmdbussy 16755
87.237µs: cmdbussy 16755
182.927µs: cmdbussy 27868
94.482µs: cmdbussy 27868
150.327µs: cmdbussy 27868
864.227µs: cmdbussy 27868
117.424µs: cmdbussy 27868
181.418µs: cmdbussy 27868
873.887µs: cmdbussy 27868
167.834µs: cmdbussy 27868
245.413µs: cmdbussy 27868
231.829µs: cmdbussy 27868
195.606µs: cmdbussy 27868
94.18µs: cmdbussy 27868
140.063µs: cmdbussy 27868
285.258µs: cmdbussy 27868
193.493µs: cmdbussy 27868
884.452µs: cmdbussy 27868
853.662µs: cmdbussy 27868
936.07µs: cmdbussy 27868
874.188µs: cmdbussy 27868
216.434µs: cmdbussy 27868
270.165µs: cmdbussy 27868
911.317µs: cmdbussy 27868
282.542µs: cmdbussy 27868
877.509µs: cmdbussy 27868
177.796µs: cmdbussy 27868
197.417µs: cmdbussy 27868
179.003µs: cmdbussy 27868
884.149µs: cmdbussy 27868
148.516µs: cmdbussy 27868
107.462µs: cmdbussy 84860
124.367µs: cmdbussy 84860
131.611µs: cmdbussy 84860
132.215µs: cmdbussy 84860
123.159µs: cmdbussy 84860
206.473µs: cmdbussy 84860
91.463µs: cmdbussy 84860
121.046µs: cmdbussy 84860
83.314µs: cmdbussy 84860
107.764µs: cmdbussy 84860
129.8µs: cmdbussy 84860
123.461µs: cmdbussy 84860
134.026µs: cmdbussy 84860
124.669µs: cmdbussy 84860
141.874µs: cmdbussy 84860
133.121µs: cmdbussy 84860
135.536µs: cmdbussy 84860
123.159µs: cmdbussy 84860
83.616µs: cmdbussy 84860
147.912µs: cmdbussy 84860
124.064µs: cmdbussy 84860
93.577µs: cmdbussy 84860
205.266µs: cmdbussy 84860
109.576µs: cmdbussy 84860
103.237µs: cmdbussy 84860
112.594µs: cmdbussy 84860
124.367µs: cmdbussy 84860
143.082µs: cmdbussy 84860
109.274µs: cmdbussy 84860
105.652µs: cmdbussy 84860
103.237µs: cmdbussy 84860
96.596µs: cmdbussy 84860
85.125µs: cmdbussy 84860
92.068µs: cmdbussy 84860
146.705µs: cmdbussy 84860
116.518µs: cmdbussy 84860
101.727µs: cmdbussy 84860
91.162µs: cmdbussy 84860
87.842µs: cmdbussy 84860
92.37µs: cmdbussy 84860
80.596µs: cmdbussy 84860
95.086µs: cmdbussy 84860
74.861µs: cmdbussy 84860
101.123µs: cmdbussy 84860
76.069µs: cmdbussy 84860
77.88µs: cmdbussy 84860
80.898µs: cmdbussy 84860
71.239µs: cmdbussy 84860
104.745µs: cmdbussy 84860
86.634µs: cmdbussy 242931
112.594µs: cmdbussy 242931
142.176µs: cmdbussy 242931
950.861µs: cmdbussy 242931
123.763µs: cmdbussy 242931
160.288µs: cmdbussy 242931
123.159µs: cmdbussy 242931
132.215µs: cmdbussy 242931
112.896µs: cmdbussy 242931
106.557µs: cmdbussy 242931
169.042µs: cmdbussy 242931
148.818µs: cmdbussy 242931
161.495µs: cmdbussy 242931
97.803µs: cmdbussy 242931
142.478µs: cmdbussy 242931
116.82µs: cmdbussy 242931
118.632µs: cmdbussy 242931
223.377µs: cmdbussy 242931
237.866µs: cmdbussy 242931
151.232µs: cmdbussy 242931
625.456µs: cmdbussy 242931
134.932µs: cmdbussy 242931
141.572µs: cmdbussy 242931
163.608µs: cmdbussy 328666
103.84µs: cmdbussy 328666
209.794µs: cmdbussy 328666
135.535µs: cmdbussy 328666
135.233µs: cmdbussy 328666
147.006µs: cmdbussy 328666
198.926µs: cmdbussy 328666
152.138µs: cmdbussy 328666
115.009µs: cmdbussy 328666
135.837µs: cmdbussy 328666
137.346µs: cmdbussy 328666
141.572µs: cmdbussy 328666
254.77µs: cmdbussy 328666
483.883µs: cmdbussy 328666
237.262µs: cmdbussy 328666
129.499µs: cmdbussy 328666
115.008µs: cmdbussy 328666
105.047µs: cmdbussy 328666
135.837µs: cmdbussy 328666
342.008µs: cmdbussy 1103347
408.417µs: cmdbussy 1103347
379.438µs: cmdbussy 1103347
365.856µs: cmdbussy 1103347
280.126µs: cmdbussy 1103347
343.216µs: cmdbussy 1103347
326.613µs: cmdbussy 1103347
212.812µs: cmdbussy 1103347
314.841µs: cmdbussy 1103347
335.367µs: cmdbussy 1103347
396.041µs: cmdbussy 1103347
381.552µs: cmdbussy 1103347
307.898µs: cmdbussy 1103347
451.282µs: cmdbussy 1103347
Benchmark 1: cmdbussy 84860
 Time (mean ± σ): 0.112502 ms ± 0.028234 ms
 Range (min … max): 0.071239 ms … 0.206473 ms 49 runs
Benchmark 2: cmdbussy 16755
 Time (mean ± σ): 0.133196 ms ± 0.066718 ms
 Range (min … max): 0.066107 ms … 0.349252 ms 32 runs
Benchmark 3: cmdbussy 328666
 Time (mean ± σ): 0.170376 ms ± 0.084738 ms
 Range (min … max): 0.103840 ms … 0.483883 ms 19 runs
Benchmark 4: cmdbussy 242931
 Time (mean ± σ): 0.196551 ms ± 0.191894 ms
 Range (min … max): 0.086634 ms … 0.950861 ms 23 runs
Benchmark 5: cmdbussy 1103347
 Time (mean ± σ): 0.346105 ms ± 0.056867 ms
 Range (min … max): 0.212812 ms … 0.451282 ms 14 runs
Benchmark 6: cmdbussy 27868
 Time (mean ± σ): 0.403848 ms ± 0.325802 ms
 Range (min … max): 0.094180 ms … 0.936070 ms 29 runs
Summary
  'cmdbussy 84860' ran
    1.183946 ± 0.527637 times faster than 'cmdbussy 16755'
    1.514433 ± 0.391494 times faster than 'cmdbussy 328666'
    1.747091 ± 0.966910 times faster than 'cmdbussy 242931'
    3.076440 ± -1.055178 times faster than 'cmdbussy 1103347'
    3.589704 ± 0.445448 times faster than 'cmdbussy 27868'
--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This takes anywhere between &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;120-400µs&lt;/span&gt; on the images in the test dataset on the 5700 XT,
but variance is so high at this scale that this is barely correlated with the input size (amount of distinct colours).
Functionally this is as good as instant.
Bench-marking on
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/f32-fromto-u32/tree/trunk/item/gpu/AMD Radeon RX 5700 XT explicit asr forced.log&quot;&gt;orders-of-magnitude&lt;/a&gt;
more data shows throughput of around &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;414'419'783 &lt;span class=&quot;roboto&quot;&gt;&lt;samp&gt;uint3&lt;/samp&gt;&lt;/span&gt;/s&lt;/span&gt;.
The next generation
(&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/f32-fromto-u32/tree/trunk/item/gpu/NVIDIA GeForce RTX 4070 SUPER 8x.log&quot;&gt;NVIDIA RTX 4070 SUPER&lt;/a&gt;/&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/f32-fromto-u32/tree/trunk/item/gpu/AMD Radeon RX 6500 XT (RADV NAVI24) explicit asr forced.log&quot;&gt;AMD Radeon RX 6500 XT (RADV NAVI24)&lt;/a&gt;)
gets &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8'221'135'253&lt;!--'--&gt;&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8'383'953'229&lt;!--'--&gt;&lt;/span&gt;!
&lt;/p&gt;
&lt;h3 id=&quot;grid-grid&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#grid-grid&quot;&gt;#&lt;/a&gt; he do b hittin it doe&lt;/h3&gt;
&lt;p class=&quot;indented continued&quot;&gt;
With all the parameters to grid [​[​g​]​] figured out, we can compute &quot;which points live in each grid cell&quot; [​[​h​]​].
This is relatively trivial, except the GPU has no structured programming capabilities,
so the natural &lt;samp&gt;uint3 → Vec&amp;lt;indices of known_rgbs/[​[​D​]​]&gt;&lt;/samp&gt; mapping is inexpressible.
The obvious-to-me solution is partitioning all indices by the grid cell they belong to,
then the map becomes &lt;samp&gt;uint3 → [begin, end)&lt;/samp&gt; &lt;del&gt;iterators&lt;/del&gt;indices;
this seems canonical.
The &lt;a href=&quot;#demo-palette&quot;&gt;original example&lt;/a&gt;
(if we force [​[​B_m = (0,\frac{-1}{2},\frac{-1}{2}); B_r = (1,1,1)​]​] and specify [​[​G=10​]​])
&lt;/p&gt;
&lt;div class=&quot;three-by-each directly continuation&quot;&gt;
    &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.22-grid-alloc-ortho-y.png&quot;&gt;&lt;img alt=&quot;Blown up three-point cloud overlaid with a 10x10 grid&quot; src=&quot;/content/assets/blogn_t/018.22-grid-alloc-ortho-y.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;Orthographic projection along [​[​y​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.23-grid-alloc-ortho-x.png&quot;&gt;&lt;img alt=&quot;The same, alongside different axis&quot; src=&quot;/content/assets/blogn_t/018.23-grid-alloc-ortho-x.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​x​]​]&lt;/figcaption&gt; &lt;/figure&gt;&lt;!--
 --&gt;&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.24-grid-alloc-ortho-z.png&quot;&gt;&lt;img alt=&quot;Likewise&quot; src=&quot;/content/assets/blogn_t/018.24-grid-alloc-ortho-z.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​z​]​]&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;div class=&quot;singles continuation&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.25-grid-alloc-persp.png&quot;&gt;&lt;img alt=&quot;The three-point cloud in 3D overlaid with a 10x10x10 grid&quot; src=&quot;/content/assets/blogn_t/018.25-grid-alloc-persp.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;div class=&quot;mathnospace real&quot;&gt; [​![​ \begin{align} g(D_1) &amp;= (7.91765, 6.23666, 3.89675)\\ g(D_2) &amp;= (7.7292, 6.95024, 3.75878)\\ g(D_3) &amp;= (7.5225, 6.89196, 4.36107) \end{align} ​]!​] &lt;/div&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Thus, the grid cells occupied are, resp. [​[​(7, 6, 3)​]​], [​[​(7, 6, 3)​]​], and [​[​(7, 6, 4)​]​].
The backing storage can then be [​[​(1, 2, 3)​]​],
and the map can take the form
&lt;/p&gt;
&lt;div class=&quot;mathnospace real&quot;&gt;
[​![​
&lt;!--&quot;--&gt;g_{xyz} \mapsto \begin{cases}&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	[1, 3) &amp; \text{if}\ g_{xyz} = (7, 6, 3)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	[3, 4) &amp; \text{if}\ g_{xyz} = (7, 6, 4)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;	[1, 1) &amp; \text{otherwise}\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;\end{cases}\\&lt;!--&quot;--&gt;
​]!​]
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
since all other cells are empty.
(The backing storage could also be [​[​(3, 2, 1)​]​], and the map return [​[​[2, 4&lt;!--(--&gt;)​]​]/[​[​[1, 1&lt;!--(--&gt;)​]​].)
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Realistically, both the map and backing storage are &quot;a big array&quot; — of
&lt;samp&gt;uint2&lt;/samp&gt;s with dimension [​[​G^3​]​] and
&lt;samp&gt;uint&lt;/samp&gt;s with dimension [​[​\overline{Set(D)}​]​] respectively.
It's&lt;!--'--&gt; theoretically possible to implement [​[​h​]​] by collecting the points for each grid cell coordinate separately, like the definition,
but this would be [​[​O(n^2)​]​], so pre-calculating the grid cell coordinates for each point, then collecting them, is [​[​O(n)​]​].
To that end, with [​[​g​]​] as &lt;samp&gt;lab_to_gridpos&lt;/samp&gt; and [​[​G​]​] as &lt;samp&gt;GRID_SIZE&lt;/samp&gt;,
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8283e16a104509e020942c54a7ae442797bea080/item/src/shader.h#L9&quot;&gt;&lt;samp&gt;shader.h&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;GRID_SIZE&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; start_idx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; end_idx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lab_to_gridpos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; pos&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;pos &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pos &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pos &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GRID_SIZE &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.001&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;samp&gt;groupdesc_t&lt;/samp&gt; has the same lay-out as &lt;samp&gt;uint2&lt;/samp&gt;, and putting it in an array like this doesn't&lt;!--'--&gt; induce additional padding.
The total size of &lt;samp&gt;params_t&lt;/samp&gt;, and, thus, usage of precious &lt;samp&gt;DEVICE_LOCAL &amp; HOST_VISIBLE &amp; HOST_COHERENT&lt;/samp&gt; memory,
grows by [​[​G^3 \operatorname{sizeof}(\texttt{uint2}) = 8\text{MB}​]​], which is good to know but otherwise negligible.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
[​[​g​]​]'s&lt;!--'--&gt; [​[​\varepsilon = 0.001​]​] is just as good as any other value (so long as it actually exists around [​[​G​]​]);
the optimiser lowers this to a constant.
The pre-computation can thus be [​[​\operatorname{trunc} \circ g​]​] directly in
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8283e16a104509e020942c54a7ae442797bea080/item/src/assign_cell.hlsl#L22&quot;&gt;&lt;samp&gt;assign_cell.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shader.h&quot;&lt;/span&gt;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;

&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;known_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_min&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_range&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	    &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;trunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lab_to_gridpos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
this &lt;del&gt;ab&lt;/del&gt;uses &lt;samp&gt;outputs&lt;/samp&gt; as an output buffer —
this is fine, since the size used is [​[​\texttt{known_rgbs.len()} \cdot \operatorname{sizeof}(\texttt{uint})​]​],
and the allocation is [​[​2^{24} \operatorname{sizeof}(\texttt{float4})​]​],
which is guaranteed to be at least &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4×&lt;/span&gt; larger.
Obviously the packing would need to be changed for [​[​G &gt; \mathrm{FF}_{16}​]​].
This will not pose an issue.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Shaders can include &lt;samp&gt;shader.h&lt;/samp&gt; to have one source of truth for [​[​G​]​], but the Rust driver can't.&lt;!--'--&gt;
This is emulated in
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8283e16a104509e020942c54a7ae442797bea080/item/build.rs#L5&quot;&gt;&lt;samp&gt;build.rs&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; grid_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;fs&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;read_to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;src/shader.h&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lines&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;l&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#define GRID_SIZE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split_whitespace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;fs&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;var_os&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;grid_size.rs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;grid_size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... glslc&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
So, with, [​[​h​]​] as &lt;samp&gt;groups_data&lt;/samp&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ASSIGN_CELL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FIND_BBOX&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;amp;c.&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;include!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/grid_size.rs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token attribute attr-name&quot;&gt;#[repr(C)]&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;GroupDesc&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;end_idx&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token attribute attr-name&quot;&gt;#[repr(C)]&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;ParamsT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;GroupDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_MAX_BINDING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(0)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;float3&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;outputs;&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;[HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_params&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(1)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;params_t&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;[DEVICE_LOCAL &amp;amp; HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(2)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;known_rgbs_pack&gt; known_rgbs_bundle; [DEVICE_LOCAL &amp;amp; HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(3)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;uint&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;known_rgbs_freqs;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;[DEVICE_LOCAL &amp;amp; HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_groups_data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(4)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;uint&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;groups_data;&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;[DEVICE_LOCAL]&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Box&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; physical_device_properties &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vk_instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_physical_device_properties&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;physical_device&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SHADER_MAX_BINDING&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; physical_device_properties&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;limits&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;max_bound_descriptor_sets&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; output_memory_type_index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memory_types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;memory_type&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;memory_type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;property_flags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemoryPropertyFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;HOST_VISIBLE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;memory_type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;property_flags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemoryPropertyFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;HOST_COHERENT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;No output memory type&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; input_memory_type_index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memory_types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;memory_type&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;memory_type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;property_flags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemoryPropertyFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;DEVICE_LOCAL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;memory_type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;property_flags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemoryPropertyFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;HOST_VISIBLE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;memory_type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;property_flags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemoryPropertyFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;HOST_COHERENT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap_or&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;output_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; input_memory_type_index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; memory_types&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;position&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;memory_type&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; memory_type&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;property_flags&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MemoryPropertyFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;DEVICE_LOCAL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap_or&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;output_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// vk::BufferUsageFlags::STORAGE_BUFFER&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;| ::TRANSFER_SRC ⬎&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;⬐ ::TRANSFER_DST&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;output_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_groups_data&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;private_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;unsafe&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Box&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MaybeUninit&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;assume_init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Box&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new_uninit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; ga &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;ptr&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ga &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_groups_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; freq_weighting &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memset(self.buffer_params.buffer, 0, *); ⇔ self.buffer_params_map = mem::zeroed();&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_fill_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;WHOLE_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_bits&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0xFFFFFFFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// bbox_range/bbox_max&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;already = 0x00000000 from memset()&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;radiussy_squared &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; radiussy &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iter_limit&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... through find_bbox.hlsl &amp;amp;c.&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// assign_cell.hlsl&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ASSIGN_CELL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// grouping&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_groupcoords&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; group &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; groupcoord&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs_groupcoords&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;groupcoord &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                 &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;groupcoord &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                 &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;groupcoord &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// copying&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; known_rgbs_groups&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; cur &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gr_z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	               &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; start &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cur&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(known_rgbs_groups,&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;ga_z.as_ptr(), ga_z.len())&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;known_rgbs_groups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;copy_from_nonoverlapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;cur &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;known_rgbs_groups &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_groups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;gr_z &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GroupDesc&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;end_idx&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; cur&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cur &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(self.buffer_groups_data, self.buffer_outputs, known_rgbs * mem::size_of::&amp;lt;u32&gt;());&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_copy_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_groups_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                            &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;BufferCopy&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	                              	&lt;!--&quot;--&gt;src_offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                              	&lt;!--&quot;--&gt;dst_offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                              	&lt;!--&quot;--&gt;size&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; known_rgbs &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... posterise.hlsl/posterise_mul.hlsl &amp;amp;c.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This is the first time more than the aforementioned &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4&lt;/span&gt; bindings are used;
checking this a priori potentially avoids a more confusing error later, but this will never be triggered on real implementations.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;samp&gt;groups_data&lt;/samp&gt; is, from the perspective of the host, write-only/write-once for each image,
so it can live in &lt;code&gt;DEVICE_LOCAL&lt;/code&gt; memory and be uploaded via &lt;samp&gt;outputs&lt;/samp&gt;
(AIUI this technique is called the &quot;staging buffer&quot;;
 bounds used same as &lt;samp&gt;find_bbox.hlsl&lt;/samp&gt;'s&lt;!--'--&gt;).
This also means that they need to be allocated with the right &lt;samp&gt;TRANSFER_&lt;var&gt;direction&lt;/var&gt;&lt;/samp&gt; flags.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;samp&gt;groups_accumulator&lt;/samp&gt; is a similar size to the [​[​8\text{MB}​]​] —
[​[​G^3 \cdot \operatorname{sizeof}(\texttt{Vec&amp;lt;_&gt;}) = G^3 \cdot 3 \operatorname{sizeof}(\texttt{usize}) = 24\text{MB}_\text{LP64} \vee 12\text{MB}_\text{ILP32}​]​]
would blow any stack and it's&lt;!--'--&gt; impossible to use objects too large to spill in Rust (I tried!),
so it needs to go in an additional allocation and then be initialised piece-meal.
&lt;samp&gt;Vec&lt;/samp&gt;s can't&lt;!--'--&gt; be all-&lt;samp&gt;0&lt;/samp&gt; so is it in principle UB to &lt;samp&gt;assume_init(new_uninit())&lt;/samp&gt;, then force-initialise them? Maybe.
Is this a real concern? no.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Like-wise due to its size, &lt;samp&gt;params&lt;/samp&gt; can no longer be cleared by re-assignment (it'd&lt;!--'--&gt; be a &lt;samp&gt;memcpy(mapping ← stack)&lt;/samp&gt;),
and it makes no sense to clear it with an actual &lt;samp&gt;memset()&lt;/samp&gt;, effectively uploading [​[​8\text{MB}​]​] of zeroes to &lt;samp&gt;DEVICE_LOCAL&lt;/samp&gt; memory.
Thus, a device-side memset — &lt;a href=&quot;//registry.khronos.org/vulkan/specs/latest/man/html/vkCmdFillBuffer.html&quot;&gt;&lt;samp&gt;vkCmdFillBuffer()&lt;/samp&gt;&lt;/a&gt; —
is dispatched, working exactly as you'd&lt;!--'--&gt; expect (except it sets whole &lt;samp&gt;uint&lt;/samp&gt;s instead of bytes),
and completing too quickly to measure above the fixed submission overhead of a couple dozen μs.
From the point of buffer usage, this is a transfer from a null page, hence &lt;samp&gt;TRANSFER_DST&lt;/samp&gt;.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Collecting the indices in each cell (&lt;q&gt;grouping&lt;/q&gt;) is expensive but can't&lt;!--'--&gt; be meaningfully sped up.
Neither can &lt;q&gt;copying&lt;/q&gt; the data, beyond only copying the index ranges for non-empty cells
(after the memset, the default value is [​[​[0, 0 ) = \varnothing​]​] which is what we'd&lt;!--'--&gt; be writing anyway),
but that is relatively quick:
&lt;/p&gt;
&lt;!--
67.013µs: cmdbussy 16755 assign_cell.hlsl
69.428µs: cmdbussy 16755 assign_cell.hlsl
64.297µs: cmdbussy 16755 assign_cell.hlsl
70.333µs: cmdbussy 16755 assign_cell.hlsl
84.823µs: cmdbussy 16755 assign_cell.hlsl
83.917µs: cmdbussy 16755 assign_cell.hlsl
64.598µs: cmdbussy 16755 assign_cell.hlsl
67.919µs: cmdbussy 16755 assign_cell.hlsl
81.502µs: cmdbussy 16755 assign_cell.hlsl
74.862µs: cmdbussy 16755 assign_cell.hlsl
74.257µs: cmdbussy 16755 assign_cell.hlsl
104.142µs: cmdbussy 16755 assign_cell.hlsl
65.202µs: cmdbussy 16755 assign_cell.hlsl
67.919µs: cmdbussy 16755 assign_cell.hlsl
89.351µs: cmdbussy 16755 assign_cell.hlsl
70.636µs: cmdbussy 16755 assign_cell.hlsl
81.805µs: cmdbussy 16755 assign_cell.hlsl
84.521µs: cmdbussy 16755 assign_cell.hlsl
64.599µs: cmdbussy 16755 assign_cell.hlsl
67.919µs: cmdbussy 16755 assign_cell.hlsl
104.746µs: cmdbussy 16755 assign_cell.hlsl
67.013µs: cmdbussy 16755 assign_cell.hlsl
74.862µs: cmdbussy 16755 assign_cell.hlsl
67.617µs: cmdbussy 16755 assign_cell.hlsl
67.013µs: cmdbussy 16755 assign_cell.hlsl
88.144µs: cmdbussy 16755 assign_cell.hlsl
65.202µs: cmdbussy 16755 assign_cell.hlsl
80.295µs: cmdbussy 16755 assign_cell.hlsl
65.504µs: cmdbussy 16755 assign_cell.hlsl
69.428µs: cmdbussy 16755 assign_cell.hlsl
89.049µs: cmdbussy 16755 assign_cell.hlsl
66.712µs: cmdbussy 16755 assign_cell.hlsl
71.843µs: cmdbussy 16755 assign_cell.hlsl
90.558µs: cmdbussy 16755 assign_cell.hlsl
71.239µs: cmdbussy 16755 assign_cell.hlsl
87.54µs: cmdbussy 16755 assign_cell.hlsl
69.127µs: cmdbussy 16755 assign_cell.hlsl
70.334µs: cmdbussy 16755 assign_cell.hlsl
109.576µs: cmdbussy 16755 assign_cell.hlsl
73.956µs: cmdbussy 16755 assign_cell.hlsl
73.051µs: cmdbussy 16755 assign_cell.hlsl
73.352µs: cmdbussy 16755 assign_cell.hlsl
92.671µs: cmdbussy 16755 assign_cell.hlsl
70.937µs: cmdbussy 16755 assign_cell.hlsl
99.916µs: cmdbussy 16755 assign_cell.hlsl
85.125µs: cmdbussy 16755 assign_cell.hlsl
59.467µs: cmdbussy 16755 assign_cell.hlsl
76.974µs: cmdbussy 16755 assign_cell.hlsl
73.352µs: cmdbussy 16755 assign_cell.hlsl
73.956µs: cmdbussy 16755 assign_cell.hlsl
68.221µs: cmdbussy 16755 assign_cell.hlsl
78.182µs: cmdbussy 16755 assign_cell.hlsl
75.465µs: cmdbussy 16755 assign_cell.hlsl
94.784µs: cmdbussy 16755 assign_cell.hlsl
66.711µs: cmdbussy 16755 assign_cell.hlsl
66.41µs: cmdbussy 16755 assign_cell.hlsl
66.711µs: cmdbussy 16755 assign_cell.hlsl
88.143µs: cmdbussy 16755 assign_cell.hlsl
60.674µs: cmdbussy 16755 assign_cell.hlsl
69.73µs: cmdbussy 16755 assign_cell.hlsl
82.408µs: cmdbussy 16755 assign_cell.hlsl
91.162µs: cmdbussy 16755 assign_cell.hlsl
63.994µs: cmdbussy 16755 assign_cell.hlsl
66.711µs: cmdbussy 16755 assign_cell.hlsl
67.918µs: cmdbussy 16755 assign_cell.hlsl
97.199µs: cmdbussy 16755 assign_cell.hlsl
74.56µs: cmdbussy 16755 assign_cell.hlsl
83.314µs: cmdbussy 16755 assign_cell.hlsl
81.2µs: cmdbussy 16755 assign_cell.hlsl
86.031µs: cmdbussy 16755 assign_cell.hlsl
108.066µs: cmdbussy 16755 assign_cell.hlsl
64.9µs: cmdbussy 16755 assign_cell.hlsl
75.767µs: cmdbussy 16755 assign_cell.hlsl
63.994µs: cmdbussy 16755 assign_cell.hlsl
87.237µs: cmdbussy 16755 assign_cell.hlsl
66.711µs: cmdbussy 16755 assign_cell.hlsl
74.56µs: cmdbussy 16755 assign_cell.hlsl
85.125µs: cmdbussy 16755 assign_cell.hlsl
101.124µs: cmdbussy 16755 assign_cell.hlsl
84.521µs: cmdbussy 27868 assign_cell.hlsl
106.859µs: cmdbussy 27868 assign_cell.hlsl
102.331µs: cmdbussy 27868 assign_cell.hlsl
80.898µs: cmdbussy 27868 assign_cell.hlsl
86.031µs: cmdbussy 27868 assign_cell.hlsl
103.236µs: cmdbussy 27868 assign_cell.hlsl
99.916µs: cmdbussy 27868 assign_cell.hlsl
97.199µs: cmdbussy 27868 assign_cell.hlsl
77.276µs: cmdbussy 27868 assign_cell.hlsl
90.256µs: cmdbussy 27868 assign_cell.hlsl
106.859µs: cmdbussy 27868 assign_cell.hlsl
86.935µs: cmdbussy 27868 assign_cell.hlsl
89.652µs: cmdbussy 27868 assign_cell.hlsl
80.597µs: cmdbussy 27868 assign_cell.hlsl
70.032µs: cmdbussy 27868 assign_cell.hlsl
84.219µs: cmdbussy 27868 assign_cell.hlsl
83.011µs: cmdbussy 27868 assign_cell.hlsl
100.218µs: cmdbussy 27868 assign_cell.hlsl
90.558µs: cmdbussy 27868 assign_cell.hlsl
87.539µs: cmdbussy 27868 assign_cell.hlsl
103.84µs: cmdbussy 27868 assign_cell.hlsl
90.256µs: cmdbussy 27868 assign_cell.hlsl
98.105µs: cmdbussy 27868 assign_cell.hlsl
105.651µs: cmdbussy 27868 assign_cell.hlsl
115.009µs: cmdbussy 27868 assign_cell.hlsl
81.804µs: cmdbussy 27868 assign_cell.hlsl
91.162µs: cmdbussy 27868 assign_cell.hlsl
102.331µs: cmdbussy 27868 assign_cell.hlsl
106.859µs: cmdbussy 27868 assign_cell.hlsl
78.786µs: cmdbussy 27868 assign_cell.hlsl
93.879µs: cmdbussy 27868 assign_cell.hlsl
118.631µs: cmdbussy 27868 assign_cell.hlsl
84.823µs: cmdbussy 27868 assign_cell.hlsl
78.484µs: cmdbussy 27868 assign_cell.hlsl
106.255µs: cmdbussy 27868 assign_cell.hlsl
116.519µs: cmdbussy 27868 assign_cell.hlsl
78.785µs: cmdbussy 27868 assign_cell.hlsl
135.234µs: cmdbussy 27868 assign_cell.hlsl
121.348µs: cmdbussy 27868 assign_cell.hlsl
106.859µs: cmdbussy 27868 assign_cell.hlsl
74.257µs: cmdbussy 27868 assign_cell.hlsl
124.971µs: cmdbussy 27868 assign_cell.hlsl
113.801µs: cmdbussy 27868 assign_cell.hlsl
76.975µs: cmdbussy 27868 assign_cell.hlsl
90.86µs: cmdbussy 27868 assign_cell.hlsl
85.728µs: cmdbussy 27868 assign_cell.hlsl
133.12µs: cmdbussy 27868 assign_cell.hlsl
111.085µs: cmdbussy 27868 assign_cell.hlsl
124.367µs: cmdbussy 27868 assign_cell.hlsl
106.255µs: cmdbussy 27868 assign_cell.hlsl
74.257µs: cmdbussy 27868 assign_cell.hlsl
86.031µs: cmdbussy 27868 assign_cell.hlsl
110.481µs: cmdbussy 27868 assign_cell.hlsl
86.03µs: cmdbussy 27868 assign_cell.hlsl
94.483µs: cmdbussy 27868 assign_cell.hlsl
143.384µs: cmdbussy 27868 assign_cell.hlsl
92.37µs: cmdbussy 27868 assign_cell.hlsl
103.538µs: cmdbussy 27868 assign_cell.hlsl
73.352µs: cmdbussy 27868 assign_cell.hlsl
91.162µs: cmdbussy 27868 assign_cell.hlsl
86.031µs: cmdbussy 27868 assign_cell.hlsl
71.239µs: cmdbussy 27868 assign_cell.hlsl
84.219µs: cmdbussy 27868 assign_cell.hlsl
74.861µs: cmdbussy 27868 assign_cell.hlsl
76.069µs: cmdbussy 27868 assign_cell.hlsl
89.049µs: cmdbussy 27868 assign_cell.hlsl
97.501µs: cmdbussy 27868 assign_cell.hlsl
92.671µs: cmdbussy 27868 assign_cell.hlsl
78.786µs: cmdbussy 27868 assign_cell.hlsl
80.295µs: cmdbussy 27868 assign_cell.hlsl
83.917µs: cmdbussy 27868 assign_cell.hlsl
100.52µs: cmdbussy 27868 assign_cell.hlsl
76.068µs: cmdbussy 27868 assign_cell.hlsl
79.691µs: cmdbussy 27868 assign_cell.hlsl
125.876µs: cmdbussy 27868 assign_cell.hlsl
89.351µs: cmdbussy 27868 assign_cell.hlsl
100.217µs: cmdbussy 27868 assign_cell.hlsl
72.749µs: cmdbussy 27868 assign_cell.hlsl
115.009µs: cmdbussy 27868 assign_cell.hlsl
102.935µs: cmdbussy 27868 assign_cell.hlsl
137.045µs: cmdbussy 27868 assign_cell.hlsl
76.975µs: cmdbussy 27868 assign_cell.hlsl
75.163µs: cmdbussy 27868 assign_cell.hlsl
75.466µs: cmdbussy 27868 assign_cell.hlsl
107.16µs: cmdbussy 27868 assign_cell.hlsl
74.559µs: cmdbussy 27868 assign_cell.hlsl
85.125µs: cmdbussy 27868 assign_cell.hlsl
101.123µs: cmdbussy 27868 assign_cell.hlsl
71.843µs: cmdbussy 27868 assign_cell.hlsl
108.67µs: cmdbussy 27868 assign_cell.hlsl
100.821µs: cmdbussy 27868 assign_cell.hlsl
76.371µs: cmdbussy 27868 assign_cell.hlsl
83.011µs: cmdbussy 27868 assign_cell.hlsl
98.708µs: cmdbussy 27868 assign_cell.hlsl
107.764µs: cmdbussy 84860 assign_cell.hlsl
131.309µs: cmdbussy 84860 assign_cell.hlsl
127.989µs: cmdbussy 84860 assign_cell.hlsl
107.462µs: cmdbussy 84860 assign_cell.hlsl
106.556µs: cmdbussy 84860 assign_cell.hlsl
111.387µs: cmdbussy 84860 assign_cell.hlsl
125.574µs: cmdbussy 84860 assign_cell.hlsl
114.405µs: cmdbussy 84860 assign_cell.hlsl
123.159µs: cmdbussy 84860 assign_cell.hlsl
177.494µs: cmdbussy 84860 assign_cell.hlsl
148.516µs: cmdbussy 84860 assign_cell.hlsl
110.481µs: cmdbussy 84860 assign_cell.hlsl
129.498µs: cmdbussy 84860 assign_cell.hlsl
106.858µs: cmdbussy 84860 assign_cell.hlsl
107.462µs: cmdbussy 84860 assign_cell.hlsl
108.368µs: cmdbussy 84860 assign_cell.hlsl
131.31µs: cmdbussy 84860 assign_cell.hlsl
115.31µs: cmdbussy 84860 assign_cell.hlsl
127.687µs: cmdbussy 84860 assign_cell.hlsl
118.632µs: cmdbussy 84860 assign_cell.hlsl
150.629µs: cmdbussy 84860 assign_cell.hlsl
144.289µs: cmdbussy 84860 assign_cell.hlsl
111.386µs: cmdbussy 84860 assign_cell.hlsl
106.255µs: cmdbussy 84860 assign_cell.hlsl
136.743µs: cmdbussy 84860 assign_cell.hlsl
117.725µs: cmdbussy 84860 assign_cell.hlsl
106.255µs: cmdbussy 84860 assign_cell.hlsl
102.632µs: cmdbussy 84860 assign_cell.hlsl
116.217µs: cmdbussy 84860 assign_cell.hlsl
161.194µs: cmdbussy 84860 assign_cell.hlsl
110.782µs: cmdbussy 84860 assign_cell.hlsl
127.687µs: cmdbussy 84860 assign_cell.hlsl
108.368µs: cmdbussy 84860 assign_cell.hlsl
104.746µs: cmdbussy 84860 assign_cell.hlsl
105.048µs: cmdbussy 84860 assign_cell.hlsl
107.463µs: cmdbussy 84860 assign_cell.hlsl
105.953µs: cmdbussy 84860 assign_cell.hlsl
124.97µs: cmdbussy 84860 assign_cell.hlsl
112.594µs: cmdbussy 84860 assign_cell.hlsl
131.611µs: cmdbussy 84860 assign_cell.hlsl
111.689µs: cmdbussy 84860 assign_cell.hlsl
116.82µs: cmdbussy 84860 assign_cell.hlsl
111.085µs: cmdbussy 84860 assign_cell.hlsl
125.272µs: cmdbussy 84860 assign_cell.hlsl
138.856µs: cmdbussy 84860 assign_cell.hlsl
130.404µs: cmdbussy 84860 assign_cell.hlsl
136.743µs: cmdbussy 84860 assign_cell.hlsl
106.859µs: cmdbussy 84860 assign_cell.hlsl
141.573µs: cmdbussy 84860 assign_cell.hlsl
125.876µs: cmdbussy 84860 assign_cell.hlsl
119.537µs: cmdbussy 84860 assign_cell.hlsl
109.274µs: cmdbussy 84860 assign_cell.hlsl
148.516µs: cmdbussy 84860 assign_cell.hlsl
130.102µs: cmdbussy 84860 assign_cell.hlsl
107.462µs: cmdbussy 84860 assign_cell.hlsl
123.159µs: cmdbussy 84860 assign_cell.hlsl
107.462µs: cmdbussy 84860 assign_cell.hlsl
111.688µs: cmdbussy 84860 assign_cell.hlsl
128.894µs: cmdbussy 84860 assign_cell.hlsl
107.161µs: cmdbussy 84860 assign_cell.hlsl
121.348µs: cmdbussy 84860 assign_cell.hlsl
132.215µs: cmdbussy 84860 assign_cell.hlsl
139.761µs: cmdbussy 84860 assign_cell.hlsl
107.462µs: cmdbussy 84860 assign_cell.hlsl
108.67µs: cmdbussy 84860 assign_cell.hlsl
110.783µs: cmdbussy 84860 assign_cell.hlsl
133.121µs: cmdbussy 84860 assign_cell.hlsl
114.405µs: cmdbussy 84860 assign_cell.hlsl
111.084µs: cmdbussy 84860 assign_cell.hlsl
132.517µs: cmdbussy 84860 assign_cell.hlsl
142.478µs: cmdbussy 84860 assign_cell.hlsl
108.972µs: cmdbussy 84860 assign_cell.hlsl
105.349µs: cmdbussy 84860 assign_cell.hlsl
111.99µs: cmdbussy 84860 assign_cell.hlsl
106.255µs: cmdbussy 84860 assign_cell.hlsl
105.349µs: cmdbussy 84860 assign_cell.hlsl
125.574µs: cmdbussy 84860 assign_cell.hlsl
128.592µs: cmdbussy 84860 assign_cell.hlsl
146.403µs: cmdbussy 84860 assign_cell.hlsl
116.82µs: cmdbussy 84860 assign_cell.hlsl
118.028µs: cmdbussy 84860 assign_cell.hlsl
125.876µs: cmdbussy 84860 assign_cell.hlsl
144.29µs: cmdbussy 84860 assign_cell.hlsl
125.574µs: cmdbussy 84860 assign_cell.hlsl
115.311µs: cmdbussy 84860 assign_cell.hlsl
111.99µs: cmdbussy 84860 assign_cell.hlsl
111.085µs: cmdbussy 84860 assign_cell.hlsl
111.085µs: cmdbussy 84860 assign_cell.hlsl
111.689µs: cmdbussy 84860 assign_cell.hlsl
114.406µs: cmdbussy 84860 assign_cell.hlsl
130.706µs: cmdbussy 84860 assign_cell.hlsl
106.255µs: cmdbussy 84860 assign_cell.hlsl
138.252µs: cmdbussy 84860 assign_cell.hlsl
114.103µs: cmdbussy 84860 assign_cell.hlsl
118.329µs: cmdbussy 84860 assign_cell.hlsl
117.423µs: cmdbussy 84860 assign_cell.hlsl
134.026µs: cmdbussy 84860 assign_cell.hlsl
112.292µs: cmdbussy 84860 assign_cell.hlsl
113.801µs: cmdbussy 84860 assign_cell.hlsl
116.518µs: cmdbussy 84860 assign_cell.hlsl
141.271µs: cmdbussy 84860 assign_cell.hlsl
126.781µs: cmdbussy 84860 assign_cell.hlsl
112.896µs: cmdbussy 84860 assign_cell.hlsl
121.65µs: cmdbussy 84860 assign_cell.hlsl
111.386µs: cmdbussy 84860 assign_cell.hlsl
113.5µs: cmdbussy 84860 assign_cell.hlsl
112.292µs: cmdbussy 84860 assign_cell.hlsl
115.914µs: cmdbussy 84860 assign_cell.hlsl
109.575µs: cmdbussy 84860 assign_cell.hlsl
112.896µs: cmdbussy 84860 assign_cell.hlsl
111.386µs: cmdbussy 84860 assign_cell.hlsl
143.082µs: cmdbussy 84860 assign_cell.hlsl
137.95µs: cmdbussy 84860 assign_cell.hlsl
137.045µs: cmdbussy 84860 assign_cell.hlsl
114.707µs: cmdbussy 84860 assign_cell.hlsl
142.177µs: cmdbussy 84860 assign_cell.hlsl
122.555µs: cmdbussy 84860 assign_cell.hlsl
137.045µs: cmdbussy 84860 assign_cell.hlsl
119.235µs: cmdbussy 84860 assign_cell.hlsl
109.877µs: cmdbussy 84860 assign_cell.hlsl
130.706µs: cmdbussy 84860 assign_cell.hlsl
105.953µs: cmdbussy 84860 assign_cell.hlsl
140.969µs: cmdbussy 84860 assign_cell.hlsl
143.384µs: cmdbussy 84860 assign_cell.hlsl
121.65µs: cmdbussy 84860 assign_cell.hlsl
126.48µs: cmdbussy 84860 assign_cell.hlsl
128.29µs: cmdbussy 84860 assign_cell.hlsl
110.481µs: cmdbussy 84860 assign_cell.hlsl
201.643µs: cmdbussy 242931 assign_cell.hlsl
252.054µs: cmdbussy 242931 assign_cell.hlsl
216.736µs: cmdbussy 242931 assign_cell.hlsl
219.151µs: cmdbussy 242931 assign_cell.hlsl
243.903µs: cmdbussy 242931 assign_cell.hlsl
220.358µs: cmdbussy 242931 assign_cell.hlsl
218.849µs: cmdbussy 242931 assign_cell.hlsl
223.981µs: cmdbussy 242931 assign_cell.hlsl
206.775µs: cmdbussy 242931 assign_cell.hlsl
230.018µs: cmdbussy 242931 assign_cell.hlsl
210.095µs: cmdbussy 242931 assign_cell.hlsl
229.112µs: cmdbussy 242931 assign_cell.hlsl
231.225µs: cmdbussy 242931 assign_cell.hlsl
235.149µs: cmdbussy 242931 assign_cell.hlsl
226.396µs: cmdbussy 242931 assign_cell.hlsl
227.905µs: cmdbussy 242931 assign_cell.hlsl
212.51µs: cmdbussy 242931 assign_cell.hlsl
231.829µs: cmdbussy 242931 assign_cell.hlsl
201.341µs: cmdbussy 242931 assign_cell.hlsl
251.148µs: cmdbussy 242931 assign_cell.hlsl
240.281µs: cmdbussy 242931 assign_cell.hlsl
232.735µs: cmdbussy 242931 assign_cell.hlsl
212.812µs: cmdbussy 242931 assign_cell.hlsl
202.247µs: cmdbussy 242931 assign_cell.hlsl
228.81µs: cmdbussy 242931 assign_cell.hlsl
219.151µs: cmdbussy 242931 assign_cell.hlsl
247.526µs: cmdbussy 242931 assign_cell.hlsl
223.98µs: cmdbussy 242931 assign_cell.hlsl
241.187µs: cmdbussy 242931 assign_cell.hlsl
253.865µs: cmdbussy 242931 assign_cell.hlsl
246.62µs: cmdbussy 242931 assign_cell.hlsl
208.586µs: cmdbussy 242931 assign_cell.hlsl
217.641µs: cmdbussy 242931 assign_cell.hlsl
201.341µs: cmdbussy 242931 assign_cell.hlsl
203.756µs: cmdbussy 242931 assign_cell.hlsl
211.302µs: cmdbussy 242931 assign_cell.hlsl
216.736µs: cmdbussy 242931 assign_cell.hlsl
214.925µs: cmdbussy 242931 assign_cell.hlsl
231.829µs: cmdbussy 242931 assign_cell.hlsl
223.98µs: cmdbussy 242931 assign_cell.hlsl
210.397µs: cmdbussy 242931 assign_cell.hlsl
249.337µs: cmdbussy 242931 assign_cell.hlsl
247.526µs: cmdbussy 242931 assign_cell.hlsl
236.96µs: cmdbussy 242931 assign_cell.hlsl
225.792µs: cmdbussy 242931 assign_cell.hlsl
288.579µs: cmdbussy 328666 assign_cell.hlsl
256.582µs: cmdbussy 328666 assign_cell.hlsl
259.902µs: cmdbussy 328666 assign_cell.hlsl
264.43µs: cmdbussy 328666 assign_cell.hlsl
251.148µs: cmdbussy 328666 assign_cell.hlsl
259.298µs: cmdbussy 328666 assign_cell.hlsl
265.637µs: cmdbussy 328666 assign_cell.hlsl
314.237µs: cmdbussy 328666 assign_cell.hlsl
279.221µs: cmdbussy 328666 assign_cell.hlsl
286.466µs: cmdbussy 328666 assign_cell.hlsl
254.468µs: cmdbussy 328666 assign_cell.hlsl
269.562µs: cmdbussy 328666 assign_cell.hlsl
253.864µs: cmdbussy 328666 assign_cell.hlsl
269.562µs: cmdbussy 328666 assign_cell.hlsl
260.506µs: cmdbussy 328666 assign_cell.hlsl
267.75µs: cmdbussy 328666 assign_cell.hlsl
265.033µs: cmdbussy 328666 assign_cell.hlsl
260.807µs: cmdbussy 328666 assign_cell.hlsl
281.938µs: cmdbussy 328666 assign_cell.hlsl
272.882µs: cmdbussy 328666 assign_cell.hlsl
293.711µs: cmdbussy 328666 assign_cell.hlsl
291.295µs: cmdbussy 328666 assign_cell.hlsl
260.506µs: cmdbussy 328666 assign_cell.hlsl
260.506µs: cmdbussy 328666 assign_cell.hlsl
308.804µs: cmdbussy 328666 assign_cell.hlsl
253.261µs: cmdbussy 328666 assign_cell.hlsl
278.618µs: cmdbussy 328666 assign_cell.hlsl
284.654µs: cmdbussy 328666 assign_cell.hlsl
293.711µs: cmdbussy 328666 assign_cell.hlsl
279.825µs: cmdbussy 328666 assign_cell.hlsl
281.636µs: cmdbussy 328666 assign_cell.hlsl
276.504µs: cmdbussy 328666 assign_cell.hlsl
287.673µs: cmdbussy 328666 assign_cell.hlsl
274.391µs: cmdbussy 328666 assign_cell.hlsl
281.033µs: cmdbussy 328666 assign_cell.hlsl
294.314µs: cmdbussy 328666 assign_cell.hlsl
285.862µs: cmdbussy 328666 assign_cell.hlsl
301.861µs: cmdbussy 328666 assign_cell.hlsl
281.334µs: cmdbussy 328666 assign_cell.hlsl
271.071µs: cmdbussy 328666 assign_cell.hlsl
282.541µs: cmdbussy 328666 assign_cell.hlsl
258.091µs: cmdbussy 328666 assign_cell.hlsl
284.051µs: cmdbussy 328666 assign_cell.hlsl
290.993µs: cmdbussy 328666 assign_cell.hlsl
290.994µs: cmdbussy 328666 assign_cell.hlsl
272.58µs: cmdbussy 328666 assign_cell.hlsl
250.846µs: cmdbussy 328666 assign_cell.hlsl
258.694µs: cmdbussy 328666 assign_cell.hlsl
258.09µs: cmdbussy 328666 assign_cell.hlsl
709.976µs: cmdbussy 1103347 assign_cell.hlsl
722.655µs: cmdbussy 1103347 assign_cell.hlsl
787.856µs: cmdbussy 1103347 assign_cell.hlsl
727.182µs: cmdbussy 1103347 assign_cell.hlsl
716.919µs: cmdbussy 1103347 assign_cell.hlsl
724.466µs: cmdbussy 1103347 assign_cell.hlsl
753.142µs: cmdbussy 1103347 assign_cell.hlsl
758.274µs: cmdbussy 1103347 assign_cell.hlsl
743.181µs: cmdbussy 1103347 assign_cell.hlsl
754.651µs: cmdbussy 1103347 assign_cell.hlsl
762.198µs: cmdbussy 1103347 assign_cell.hlsl
797.818µs: cmdbussy 1103347 assign_cell.hlsl
732.616µs: cmdbussy 1103347 assign_cell.hlsl
715.41µs: cmdbussy 1103347 assign_cell.hlsl
752.236µs: cmdbussy 1103347 assign_cell.hlsl
740.766µs: cmdbussy 1103347 assign_cell.hlsl
720.542µs: cmdbussy 1103347 assign_cell.hlsl
733.521µs: cmdbussy 1103347 assign_cell.hlsl
735.332µs: cmdbussy 1103347 assign_cell.hlsl
731.408µs: cmdbussy 1103347 assign_cell.hlsl
717.825µs: cmdbussy 1103347 assign_cell.hlsl
730.503µs: cmdbussy 1103347 assign_cell.hlsl
712.391µs: cmdbussy 1103347 assign_cell.hlsl
713.296µs: cmdbussy 1103347 assign_cell.hlsl
718.429µs: cmdbussy 1103347 assign_cell.hlsl
737.446µs: cmdbussy 1103347 assign_cell.hlsl
739.256µs: cmdbussy 1103347 assign_cell.hlsl
741.974µs: cmdbussy 1103347 assign_cell.hlsl
745.596µs: cmdbussy 1103347 assign_cell.hlsl
726.276µs: cmdbussy 1103347 assign_cell.hlsl
733.22µs: cmdbussy 1103347 assign_cell.hlsl
753.142µs: cmdbussy 1103347 assign_cell.hlsl
754.954µs: cmdbussy 1103347 assign_cell.hlsl
735.937µs: cmdbussy 1103347 assign_cell.hlsl
725.069µs: cmdbussy 1103347 assign_cell.hlsl
4.186807ms: 16755 grouping
4.152999ms: 16755 grouping
4.148773ms: 16755 grouping
4.198579ms: 16755 grouping
4.101683ms: 16755 grouping
5.09752ms: 16755 grouping
4.082061ms: 16755 grouping
4.621486ms: 16755 grouping
4.224238ms: 16755 grouping
4.712649ms: 16755 grouping
4.729854ms: 16755 grouping
4.051272ms: 16755 grouping
4.440068ms: 16755 grouping
4.693933ms: 16755 grouping
4.168092ms: 16755 grouping
4.641711ms: 16755 grouping
4.130359ms: 16755 grouping
4.716573ms: 16755 grouping
4.635674ms: 16755 grouping
4.911876ms: 16755 grouping
5.34565ms: 16755 grouping
5.018735ms: 16755 grouping
4.706611ms: 16755 grouping
4.848787ms: 16755 grouping
4.5101ms: 16755 grouping
4.412297ms: 16755 grouping
4.971947ms: 16755 grouping
5.184758ms: 16755 grouping
5.089672ms: 16755 grouping
4.916102ms: 16755 grouping
4.57832ms: 16755 grouping
4.081458ms: 16755 grouping
4.705102ms: 16755 grouping
4.981606ms: 16755 grouping
4.239633ms: 16755 grouping
4.91097ms: 16755 grouping
4.560208ms: 16755 grouping
4.885313ms: 16755 grouping
4.869917ms: 16755 grouping
4.860259ms: 16755 grouping
4.536361ms: 16755 grouping
4.794151ms: 16755 grouping
4.501949ms: 16755 grouping
5.267468ms: 16755 grouping
5.050431ms: 16755 grouping
5.036847ms: 16755 grouping
4.998511ms: 16755 grouping
4.94659ms: 16755 grouping
4.924856ms: 16755 grouping
4.80532ms: 16755 grouping
4.76155ms: 16755 grouping
4.076327ms: 16755 grouping
4.869917ms: 16755 grouping
5.009981ms: 16755 grouping
5.194116ms: 16755 grouping
4.789925ms: 16755 grouping
5.084842ms: 16755 grouping
4.801093ms: 16755 grouping
4.200089ms: 16755 grouping
4.950212ms: 16755 grouping
4.845165ms: 16755 grouping
4.736194ms: 16755 grouping
5.024168ms: 16755 grouping
5.184456ms: 16755 grouping
4.99519ms: 16755 grouping
4.32355ms: 16755 grouping
4.929385ms: 16755 grouping
4.354642ms: 16755 grouping
5.252073ms: 16755 grouping
4.658917ms: 16755 grouping
4.832185ms: 16755 grouping
4.617864ms: 16755 grouping
6.799411ms: 16755 grouping
6.778884ms: 16755 grouping
6.842275ms: 16755 grouping
9.93846ms: 16755 grouping
6.333338ms: 16755 grouping
9.850618ms: 16755 grouping
5.399381ms: 16755 grouping
5.89564ms: 16755 grouping
9.945704ms: 16755 grouping
8.057868ms: 16755 grouping
8.948356ms: 16755 grouping
6.921363ms: 16755 grouping
5.540652ms: 16755 grouping
4.621788ms: 16755 grouping
4.755513ms: 16755 grouping
4.749777ms: 16755 grouping
4.844561ms: 16755 grouping
4.497421ms: 16755 grouping
4.817695ms: 16755 grouping
4.835808ms: 16755 grouping
4.269819ms: 16755 grouping
4.841241ms: 16755 grouping
4.533645ms: 16755 grouping
4.840939ms: 16755 grouping
4.829166ms: 16755 grouping
4.882294ms: 16755 grouping
4.859654ms: 16755 grouping
4.832185ms: 16755 grouping
6.62252ms: 16755 grouping
6.961208ms: 16755 grouping
5.402702ms: 16755 grouping
15.11869ms: 16755 grouping
5.987103ms: 16755 grouping
6.579958ms: 16755 grouping
5.574158ms: 16755 grouping
5.27109ms: 16755 grouping
6.202934ms: 16755 grouping
6.297115ms: 16755 grouping
5.186871ms: 16755 grouping
4.764568ms: 16755 grouping
4.472669ms: 16755 grouping
3.996937ms: 16755 grouping
4.913688ms: 16755 grouping
4.488668ms: 16755 grouping
4.727742ms: 16755 grouping
4.817998ms: 16755 grouping
5.028395ms: 16755 grouping
4.875351ms: 16755 grouping
4.489876ms: 16755 grouping
5.319992ms: 16755 grouping
4.925762ms: 16755 grouping
4.755512ms: 16755 grouping
4.923951ms: 16755 grouping
5.566914ms: 16755 grouping
5.607061ms: 16755 grouping
5.075183ms: 16755 grouping
4.552663ms: 16755 grouping
5.502617ms: 16755 grouping
4.288233ms: 16755 grouping
4.843354ms: 16755 grouping
4.63507ms: 16755 grouping
4.82494ms: 16755 grouping
4.420749ms: 16755 grouping
4.74374ms: 16755 grouping
4.534551ms: 16755 grouping
4.904028ms: 16755 grouping
31.002295ms: 242931 grouping
23.239345ms: 242931 grouping
23.876271ms: 242931 grouping
24.259634ms: 242931 grouping
23.572297ms: 242931 grouping
25.766522ms: 242931 grouping
23.477815ms: 242931 grouping
23.818918ms: 242931 grouping
24.35472ms: 242931 grouping
24.043803ms: 242931 grouping
23.375484ms: 242931 grouping
23.831898ms: 242931 grouping
23.307868ms: 242931 grouping
23.831294ms: 242931 grouping
23.507397ms: 242931 grouping
23.362202ms: 242931 grouping
23.687005ms: 242931 grouping
23.249609ms: 242931 grouping
23.9297ms: 242931 grouping
23.880799ms: 242931 grouping
23.690928ms: 242931 grouping
23.683382ms: 242931 grouping
24.723594ms: 242931 grouping
23.808352ms: 242931 grouping
23.496229ms: 242931 grouping
24.142512ms: 242931 grouping
23.666478ms: 242931 grouping
24.838905ms: 242931 grouping
23.855744ms: 242931 grouping
24.4812ms: 242931 grouping
23.337148ms: 242931 grouping
23.834011ms: 242931 grouping
24.497199ms: 242931 grouping
23.083585ms: 242931 grouping
23.539394ms: 242931 grouping
23.888647ms: 242931 grouping
24.284387ms: 242931 grouping
23.712964ms: 242931 grouping
23.323564ms: 242931 grouping
23.526414ms: 242931 grouping
24.547307ms: 242931 grouping
23.363712ms: 242931 grouping
23.822238ms: 242931 grouping
23.37156ms: 242931 grouping
24.184773ms: 242931 grouping
23.74798ms: 242931 grouping
24.893843ms: 242931 grouping
23.959584ms: 242931 grouping
24.526479ms: 242931 grouping
24.999193ms: 242931 grouping
23.855744ms: 242931 grouping
24.131343ms: 242931 grouping
24.81053ms: 242931 grouping
23.282511ms: 242931 grouping
24.387623ms: 242931 grouping
24.044407ms: 242931 grouping
23.421971ms: 242931 grouping
23.626632ms: 242931 grouping
23.882006ms: 242931 grouping
25.121748ms: 242931 grouping
24.861544ms: 242931 grouping
40.273642ms: 328666 grouping
32.836401ms: 328666 grouping
34.446223ms: 328666 grouping
32.622985ms: 328666 grouping
31.442106ms: 328666 grouping
32.243244ms: 328666 grouping
32.137895ms: 328666 grouping
32.55235ms: 328666 grouping
31.918442ms: 328666 grouping
32.041601ms: 328666 grouping
32.979784ms: 328666 grouping
31.362113ms: 328666 grouping
32.110728ms: 328666 grouping
31.920555ms: 328666 grouping
32.386025ms: 328666 grouping
31.638617ms: 328666 grouping
32.779349ms: 328666 grouping
32.517635ms: 328666 grouping
34.259673ms: 328666 grouping
32.066353ms: 328666 grouping
32.008095ms: 328666 grouping
32.553255ms: 328666 grouping
32.843343ms: 328666 grouping
32.465111ms: 328666 grouping
32.180758ms: 328666 grouping
32.374856ms: 328666 grouping
32.827042ms: 328666 grouping
32.569858ms: 328666 grouping
32.566839ms: 328666 grouping
33.285569ms: 328666 grouping
32.328973ms: 328666 grouping
36.42009ms: 328666 grouping
31.894595ms: 328666 grouping
31.809169ms: 328666 grouping
32.333501ms: 328666 grouping
32.434623ms: 328666 grouping
32.562915ms: 328666 grouping
31.976701ms: 328666 grouping
31.379621ms: 328666 grouping
32.109821ms: 328666 grouping
32.223925ms: 328666 grouping
32.398099ms: 328666 grouping
32.661925ms: 328666 grouping
32.922733ms: 328666 grouping
31.854749ms: 328666 grouping
32.104992ms: 328666 grouping
124.406731ms: 1103347 grouping
94.263229ms: 1103347 grouping
95.339664ms: 1103347 grouping
92.735211ms: 1103347 grouping
93.426169ms: 1103347 grouping
93.326555ms: 1103347 grouping
93.837606ms: 1103347 grouping
94.439818ms: 1103347 grouping
95.061953ms: 1103347 grouping
95.870033ms: 1103347 grouping
94.88627ms: 1103347 grouping
92.674838ms: 1103347 grouping
92.842975ms: 1103347 grouping
96.041188ms: 1103347 grouping
98.641717ms: 1103347 grouping
91.812121ms: 1103347 grouping
92.319247ms: 1103347 grouping
93.263164ms: 1103347 grouping
92.984849ms: 1103347 grouping
93.617248ms: 1103347 grouping
94.130712ms: 1103347 grouping
92.353357ms: 1103347 grouping
94.804767ms: 1103347 grouping
94.179915ms: 1103347 grouping
92.346112ms: 1103347 grouping
91.973918ms: 1103347 grouping
94.020231ms: 1103347 grouping
93.876244ms: 1103347 grouping
97.851749ms: 1103347 grouping
92.322869ms: 1103347 grouping
92.107944ms: 1103347 grouping
96.401308ms: 1103347 grouping
91.824497ms: 1103347 grouping
94.074566ms: 1103347 grouping
94.643573ms: 1103347 grouping
94.086942ms: 1103347 grouping
92.644652ms: 1103347 grouping
96.606271ms: 1103347 grouping
92.041535ms: 1103347 grouping
93.385116ms: 1103347 grouping
94.047399ms: 1103347 grouping
94.395746ms: 1103347 grouping
94.208291ms: 1103347 grouping
92.29057ms: 1103347 grouping
93.086577ms: 1103347 grouping
92.609637ms: 1103347 grouping
94.390313ms: 1103347 grouping
93.306029ms: 1103347 grouping
94.147918ms: 1103347 grouping
94.218554ms: 1103347 grouping
91.908113ms: 1103347 grouping
92.826675ms: 1103347 grouping
94.254173ms: 1103347 grouping
93.167777ms: 1103347 grouping
2.800663ms: 16755 copied
2.610792ms: 16755 copied
2.726104ms: 16755 copied
2.740593ms: 16755 copied
2.743309ms: 16755 copied
3.056037ms: 16755 copied
2.79372ms: 16755 copied
2.906012ms: 16755 copied
2.742102ms: 16755 copied
2.768364ms: 16755 copied
2.651544ms: 16755 copied
2.86828ms: 16755 copied
2.708897ms: 16755 copied
2.921709ms: 16755 copied
2.832057ms: 16755 copied
2.896051ms: 16755 copied
2.776816ms: 16755 copied
2.73365ms: 16755 copied
2.731537ms: 16755 copied
2.687767ms: 16755 copied
2.672976ms: 16755 copied
2.757799ms: 16755 copied
2.58272ms: 16755 copied
2.714029ms: 16755 copied
2.676599ms: 16755 copied
2.90903ms: 16755 copied
2.997476ms: 16755 copied
2.999288ms: 16755 copied
2.821793ms: 16755 copied
2.604453ms: 16755 copied
2.695917ms: 16755 copied
2.767458ms: 16755 copied
2.704671ms: 16755 copied
2.779231ms: 16755 copied
2.6932ms: 16755 copied
2.8716ms: 16755 copied
2.861035ms: 16755 copied
2.661505ms: 16755 copied
2.700445ms: 16755 copied
2.701049ms: 16755 copied
2.721877ms: 16755 copied
2.742706ms: 16755 copied
2.717349ms: 16755 copied
2.827831ms: 16755 copied
2.903598ms: 16755 copied
2.667844ms: 16755 copied
3.174668ms: 16755 copied
3.006834ms: 16755 copied
2.648526ms: 16755 copied
2.675692ms: 16755 copied
2.684447ms: 16755 copied
2.859223ms: 16755 copied
2.641281ms: 16755 copied
2.83266ms: 16755 copied
2.696219ms: 16755 copied
2.654865ms: 16755 copied
2.926539ms: 16755 copied
2.73365ms: 16755 copied
2.781646ms: 16755 copied
2.712822ms: 16755 copied
2.699841ms: 16755 copied
2.656072ms: 16755 copied
2.65577ms: 16755 copied
2.861941ms: 16755 copied
2.687767ms: 16755 copied
2.656373ms: 16755 copied
2.701955ms: 16755 copied
2.713727ms: 16755 copied
2.690484ms: 16755 copied
2.697427ms: 16755 copied
2.688975ms: 16755 copied
2.762025ms: 16755 copied
4.217597ms: 16755 copied
4.246575ms: 16755 copied
3.549579ms: 16755 copied
4.54904ms: 16755 copied
4.060327ms: 16755 copied
4.003879ms: 16755 copied
3.797708ms: 16755 copied
3.305676ms: 16755 copied
3.012872ms: 16755 copied
5.510768ms: 16755 copied
4.915499ms: 16755 copied
4.609714ms: 16755 copied
2.771081ms: 16755 copied
2.858017ms: 16755 copied
2.682636ms: 16755 copied
2.643092ms: 16755 copied
2.648827ms: 16755 copied
2.746931ms: 16755 copied
2.649129ms: 16755 copied
2.707992ms: 16755 copied
2.631923ms: 16755 copied
2.669957ms: 16755 copied
2.779533ms: 16755 copied
2.623471ms: 16755 copied
2.622565ms: 16755 copied
2.640677ms: 16755 copied
2.647318ms: 16755 copied
2.657883ms: 16755 copied
4.729855ms: 16755 copied
4.721402ms: 16755 copied
3.405592ms: 16755 copied
4.054592ms: 16755 copied
3.96192ms: 16755 copied
3.813104ms: 16755 copied
3.509733ms: 16755 copied
2.85379ms: 16755 copied
4.763059ms: 16755 copied
3.356388ms: 16755 copied
2.988118ms: 16755 copied
2.640375ms: 16755 copied
2.665429ms: 16755 copied
2.727613ms: 16755 copied
2.704068ms: 16755 copied
2.810322ms: 16755 copied
2.787079ms: 16755 copied
2.658486ms: 16755 copied
3.097694ms: 16755 copied
2.635546ms: 16755 copied
3.005626ms: 16755 copied
2.966686ms: 16755 copied
2.675692ms: 16755 copied
2.656374ms: 16755 copied
2.846546ms: 16755 copied
3.302053ms: 16755 copied
3.982146ms: 16755 copied
2.886693ms: 16755 copied
2.854092ms: 16755 copied
3.957695ms: 16755 copied
2.718557ms: 16755 copied
2.639771ms: 16755 copied
2.647922ms: 16755 copied
2.720369ms: 16755 copied
2.653657ms: 16755 copied
2.688974ms: 16755 copied
2.814549ms: 16755 copied
2.667542ms: 16755 copied
4.938742ms: 242931 copied
4.425881ms: 242931 copied
4.84426ms: 242931 copied
4.573792ms: 242931 copied
4.913989ms: 242931 copied
4.677028ms: 242931 copied
4.555077ms: 242931 copied
4.788717ms: 242931 copied
5.048318ms: 242931 copied
4.608809ms: 242931 copied
4.441276ms: 242931 copied
4.542701ms: 242931 copied
4.877162ms: 242931 copied
4.391167ms: 242931 copied
4.575301ms: 242931 copied
4.435541ms: 242931 copied
4.616958ms: 242931 copied
4.938138ms: 242931 copied
4.271328ms: 242931 copied
4.493498ms: 242931 copied
4.523382ms: 242931 copied
4.816791ms: 242931 copied
4.425579ms: 242931 copied
5.048016ms: 242931 copied
4.662238ms: 242931 copied
4.548135ms: 242931 copied
4.386035ms: 242931 copied
5.208605ms: 242931 copied
4.819205ms: 242931 copied
4.633863ms: 242931 copied
4.837921ms: 242931 copied
4.383318ms: 242931 copied
4.520364ms: 242931 copied
4.364905ms: 242931 copied
4.634164ms: 242931 copied
4.667369ms: 242931 copied
4.511911ms: 242931 copied
5.027187ms: 242931 copied
4.523683ms: 242931 copied
4.965608ms: 242931 copied
4.474783ms: 242931 copied
4.686085ms: 242931 copied
4.40143ms: 242931 copied
4.662842ms: 242931 copied
4.903424ms: 242931 copied
4.69665ms: 242931 copied
4.775737ms: 242931 copied
5.7918ms: 242931 copied
5.527068ms: 242931 copied
5.204983ms: 242931 copied
4.540889ms: 242931 copied
4.802602ms: 242931 copied
4.452746ms: 242931 copied
5.00334ms: 242931 copied
4.56051ms: 242931 copied
4.734382ms: 242931 copied
4.49712ms: 242931 copied
4.377281ms: 242931 copied
4.617864ms: 242931 copied
4.718988ms: 242931 copied
5.826816ms: 242931 copied
5.955408ms: 328666 copied
6.752321ms: 328666 copied
7.967309ms: 328666 copied
5.805686ms: 328666 copied
5.49658ms: 328666 copied
5.531597ms: 328666 copied
6.112074ms: 328666 copied
6.242176ms: 328666 copied
5.521031ms: 328666 copied
6.122337ms: 328666 copied
6.115697ms: 328666 copied
5.728711ms: 328666 copied
5.905602ms: 328666 copied
6.302549ms: 328666 copied
6.148298ms: 328666 copied
5.783046ms: 328666 copied
5.634229ms: 328666 copied
5.712713ms: 328666 copied
5.457942ms: 328666 copied
5.746823ms: 328666 copied
5.555141ms: 328666 copied
6.130185ms: 328666 copied
5.998575ms: 328666 copied
5.860323ms: 328666 copied
5.530691ms: 328666 copied
6.198708ms: 328666 copied
5.788781ms: 328666 copied
5.7432ms: 328666 copied
5.716335ms: 328666 copied
6.269344ms: 328666 copied
5.974728ms: 328666 copied
5.848852ms: 328666 copied
5.501108ms: 328666 copied
6.001593ms: 328666 copied
5.76916ms: 328666 copied
5.964162ms: 328666 copied
6.254552ms: 328666 copied
5.974123ms: 328666 copied
5.936089ms: 328666 copied
5.593477ms: 328666 copied
5.657472ms: 328666 copied
6.02212ms: 328666 copied
5.690979ms: 328666 copied
5.745012ms: 328666 copied
5.997367ms: 328666 copied
6.115998ms: 328666 copied
9.019294ms: 1103347 copied
9.097175ms: 1103347 copied
8.644987ms: 1103347 copied
8.568012ms: 1103347 copied
8.356709ms: 1103347 copied
8.666419ms: 1103347 copied
8.66823ms: 1103347 copied
8.611782ms: 1103347 copied
8.389311ms: 1103347 copied
9.014464ms: 1103347 copied
9.578038ms: 1103347 copied
9.090533ms: 1103347 copied
8.392631ms: 1103347 copied
9.671615ms: 1103347 copied
11.274495ms: 1103347 copied
8.415271ms: 1103347 copied
9.399035ms: 1103347 copied
8.691172ms: 1103347 copied
8.647402ms: 1103347 copied
8.633818ms: 1103347 copied
8.758788ms: 1103347 copied
9.068497ms: 1103347 copied
8.713208ms: 1103347 copied
8.50432ms: 1103347 copied
10.335406ms: 1103347 copied
8.719546ms: 1103347 copied
9.127059ms: 1103347 copied
8.577069ms: 1103347 copied
9.214296ms: 1103347 copied
8.511866ms: 1103347 copied
9.674332ms: 1103347 copied
8.952281ms: 1103347 copied
8.752751ms: 1103347 copied
9.052197ms: 1103347 copied
8.7283ms: 1103347 copied
8.552014ms: 1103347 copied
8.865647ms: 1103347 copied
8.906096ms: 1103347 copied
8.971902ms: 1103347 copied
8.651325ms: 1103347 copied
8.825499ms: 1103347 copied
8.534204ms: 1103347 copied
8.643779ms: 1103347 copied
8.693284ms: 1103347 copied
8.737356ms: 1103347 copied
8.8581ms: 1103347 copied
9.408695ms: 1103347 copied
8.531789ms: 1103347 copied
8.732829ms: 1103347 copied
9.27497ms: 1103347 copied
9.015973ms: 1103347 copied
8.515186ms: 1103347 copied
9.166301ms: 1103347 copied
8.479567ms: 1103347 copied
252.658µs: memcpy 16755 [67020 B]
245.111µs: memcpy 16755 [67020 B]
237.263µs: memcpy 16755 [67020 B]
246.017µs: memcpy 16755 [67020 B]
288.579µs: memcpy 16755 [67020 B]
264.128µs: memcpy 16755 [67020 B]
236.055µs: memcpy 16755 [67020 B]
238.771µs: memcpy 16755 [67020 B]
251.751µs: memcpy 16755 [67020 B]
239.073µs: memcpy 16755 [67020 B]
237.866µs: memcpy 16755 [67020 B]
248.733µs: memcpy 16755 [67020 B]
270.165µs: memcpy 16755 [67020 B]
300.955µs: memcpy 16755 [67020 B]
242.394µs: memcpy 16755 [67020 B]
267.448µs: memcpy 16755 [67020 B]
305.181µs: memcpy 16755 [67020 B]
247.827µs: memcpy 16755 [67020 B]
264.128µs: memcpy 16755 [67020 B]
238.772µs: memcpy 16755 [67020 B]
238.168µs: memcpy 16755 [67020 B]
238.772µs: memcpy 16755 [67020 B]
257.488µs: memcpy 16755 [67020 B]
237.866µs: memcpy 16755 [67020 B]
235.15µs: memcpy 16755 [67020 B]
279.221µs: memcpy 16755 [67020 B]
253.562µs: memcpy 16755 [67020 B]
257.487µs: memcpy 16755 [67020 B]
247.224µs: memcpy 16755 [67020 B]
239.375µs: memcpy 16755 [67020 B]
242.998µs: memcpy 16755 [67020 B]
295.521µs: memcpy 16755 [67020 B]
236.357µs: memcpy 16755 [67020 B]
237.564µs: memcpy 16755 [67020 B]
248.129µs: memcpy 16755 [67020 B]
236.055µs: memcpy 16755 [67020 B]
276.504µs: memcpy 16755 [67020 B]
243.601µs: memcpy 16755 [67020 B]
235.452µs: memcpy 16755 [67020 B]
254.77µs: memcpy 16755 [67020 B]
239.376µs: memcpy 16755 [67020 B]
238.168µs: memcpy 16755 [67020 B]
237.263µs: memcpy 16755 [67020 B]
239.979µs: memcpy 16755 [67020 B]
254.468µs: memcpy 16755 [67020 B]
235.753µs: memcpy 16755 [67020 B]
254.77µs: memcpy 16755 [67020 B]
273.787µs: memcpy 16755 [67020 B]
235.754µs: memcpy 16755 [67020 B]
231.527µs: memcpy 16755 [67020 B]
234.848µs: memcpy 16755 [67020 B]
295.219µs: memcpy 16755 [67020 B]
236.659µs: memcpy 16755 [67020 B]
245.111µs: memcpy 16755 [67020 B]
238.47µs: memcpy 16755 [67020 B]
236.055µs: memcpy 16755 [67020 B]
243.299µs: memcpy 16755 [67020 B]
248.733µs: memcpy 16755 [67020 B]
275.297µs: memcpy 16755 [67020 B]
245.413µs: memcpy 16755 [67020 B]
234.244µs: memcpy 16755 [67020 B]
239.678µs: memcpy 16755 [67020 B]
238.168µs: memcpy 16755 [67020 B]
245.413µs: memcpy 16755 [67020 B]
236.055µs: memcpy 16755 [67020 B]
238.168µs: memcpy 16755 [67020 B]
235.451µs: memcpy 16755 [67020 B]
242.998µs: memcpy 16755 [67020 B]
253.261µs: memcpy 16755 [67020 B]
252.657µs: memcpy 16755 [67020 B]
232.131µs: memcpy 16755 [67020 B]
246.922µs: memcpy 16755 [67020 B]
316.954µs: memcpy 16755 [67020 B]
261.11µs: memcpy 16755 [67020 B]
2.648223ms: memcpy 16755 [67020 B]
546.066µs: memcpy 16755 [67020 B]
16.097624ms: memcpy 16755 [67020 B]
7.920823ms: memcpy 16755 [67020 B]
172.363µs: memcpy 16755 [67020 B]
262.015µs: memcpy 16755 [67020 B]
838.267µs: memcpy 16755 [67020 B]
265.637µs: memcpy 16755 [67020 B]
285.862µs: memcpy 16755 [67020 B]
263.524µs: memcpy 16755 [67020 B]
244.507µs: memcpy 16755 [67020 B]
245.714µs: memcpy 16755 [67020 B]
247.224µs: memcpy 16755 [67020 B]
243.299µs: memcpy 16755 [67020 B]
249.639µs: memcpy 16755 [67020 B]
233.037µs: memcpy 16755 [67020 B]
242.696µs: memcpy 16755 [67020 B]
240.885µs: memcpy 16755 [67020 B]
250.243µs: memcpy 16755 [67020 B]
240.582µs: memcpy 16755 [67020 B]
239.677µs: memcpy 16755 [67020 B]
242.092µs: memcpy 16755 [67020 B]
241.79µs: memcpy 16755 [67020 B]
246.318µs: memcpy 16755 [67020 B]
244.507µs: memcpy 16755 [67020 B]
250.846µs: memcpy 16755 [67020 B]
517.993µs: memcpy 16755 [67020 B]
396.645µs: memcpy 16755 [67020 B]
11.085832ms: memcpy 16755 [67020 B]
2.295651ms: memcpy 16755 [67020 B]
360.119µs: memcpy 16755 [67020 B]
14.363736ms: memcpy 16755 [67020 B]
259.298µs: memcpy 16755 [67020 B]
246.016µs: memcpy 16755 [67020 B]
1.213178ms: memcpy 16755 [67020 B]
252.053µs: memcpy 16755 [67020 B]
254.167µs: memcpy 16755 [67020 B]
240.583µs: memcpy 16755 [67020 B]
236.357µs: memcpy 16755 [67020 B]
239.074µs: memcpy 16755 [67020 B]
246.621µs: memcpy 16755 [67020 B]
268.354µs: memcpy 16755 [67020 B]
255.072µs: memcpy 16755 [67020 B]
239.376µs: memcpy 16755 [67020 B]
262.619µs: memcpy 16755 [67020 B]
243.602µs: memcpy 16755 [67020 B]
273.486µs: memcpy 16755 [67020 B]
255.374µs: memcpy 16755 [67020 B]
243.299µs: memcpy 16755 [67020 B]
243.3µs: memcpy 16755 [67020 B]
247.827µs: memcpy 16755 [67020 B]
257.487µs: memcpy 16755 [67020 B]
265.637µs: memcpy 16755 [67020 B]
253.865µs: memcpy 16755 [67020 B]
238.168µs: memcpy 16755 [67020 B]
360.723µs: memcpy 16755 [67020 B]
236.659µs: memcpy 16755 [67020 B]
239.375µs: memcpy 16755 [67020 B]
239.375µs: memcpy 16755 [67020 B]
236.055µs: memcpy 16755 [67020 B]
249.035µs: memcpy 16755 [67020 B]
239.376µs: memcpy 16755 [67020 B]
240.583µs: memcpy 16755 [67020 B]
247.827µs: memcpy 16755 [67020 B]
380.948µs: memcpy 242931 [971724 B]
452.791µs: memcpy 242931 [971724 B]
388.495µs: memcpy 242931 [971724 B]
399.06µs: memcpy 242931 [971724 B]
422.304µs: memcpy 242931 [971724 B]
382.457µs: memcpy 242931 [971724 B]
393.928µs: memcpy 242931 [971724 B]
285.862µs: memcpy 242931 [971724 B]
370.383µs: memcpy 242931 [971724 B]
383.061µs: memcpy 242931 [971724 B]
391.212µs: memcpy 242931 [971724 B]
377.024µs: memcpy 242931 [971724 B]
373.704µs: memcpy 242931 [971724 B]
399.361µs: memcpy 242931 [971724 B]
405.399µs: memcpy 242931 [971724 B]
377.326µs: memcpy 242931 [971724 B]
376.722µs: memcpy 242931 [971724 B]
408.719µs: memcpy 242931 [971724 B]
428.944µs: memcpy 242931 [971724 B]
334.462µs: memcpy 242931 [971724 B]
377.024µs: memcpy 242931 [971724 B]
393.929µs: memcpy 242931 [971724 B]
389.4µs: memcpy 242931 [971724 B]
376.723µs: memcpy 242931 [971724 B]
368.874µs: memcpy 242931 [971724 B]
381.854µs: memcpy 242931 [971724 B]
391.815µs: memcpy 242931 [971724 B]
377.929µs: memcpy 242931 [971724 B]
433.17µs: memcpy 242931 [971724 B]
378.835µs: memcpy 242931 [971724 B]
413.55µs: memcpy 242931 [971724 B]
379.439µs: memcpy 242931 [971724 B]
412.946µs: memcpy 242931 [971724 B]
377.93µs: memcpy 242931 [971724 B]
374.911µs: memcpy 242931 [971724 B]
347.14µs: memcpy 242931 [971724 B]
399.965µs: memcpy 242931 [971724 B]
399.362µs: memcpy 242931 [971724 B]
382.155µs: memcpy 242931 [971724 B]
391.211µs: memcpy 242931 [971724 B]
402.38µs: memcpy 242931 [971724 B]
381.552µs: memcpy 242931 [971724 B]
384.268µs: memcpy 242931 [971724 B]
388.495µs: memcpy 242931 [971724 B]
390.91µs: memcpy 242931 [971724 B]
387.287µs: memcpy 242931 [971724 B]
409.926µs: memcpy 242931 [971724 B]
390.608µs: memcpy 242931 [971724 B]
381.552µs: memcpy 242931 [971724 B]
396.042µs: memcpy 242931 [971724 B]
413.851µs: memcpy 242931 [971724 B]
447.055µs: memcpy 242931 [971724 B]
364.648µs: memcpy 242931 [971724 B]
387.287µs: memcpy 242931 [971724 B]
377.93µs: memcpy 242931 [971724 B]
372.194µs: memcpy 242931 [971724 B]
380.043µs: memcpy 242931 [971724 B]
375.514µs: memcpy 242931 [971724 B]
390.607µs: memcpy 242931 [971724 B]
386.684µs: memcpy 242931 [971724 B]
390.91µs: memcpy 242931 [971724 B]
447.66µs: memcpy 328666 [1314664 B]
424.416µs: memcpy 328666 [1314664 B]
445.848µs: memcpy 328666 [1314664 B]
426.227µs: memcpy 328666 [1314664 B]
426.227µs: memcpy 328666 [1314664 B]
438.302µs: memcpy 328666 [1314664 B]
467.582µs: memcpy 328666 [1314664 B]
452.791µs: memcpy 328666 [1314664 B]
315.444µs: memcpy 328666 [1314664 B]
431.057µs: memcpy 328666 [1314664 B]
426.831µs: memcpy 328666 [1314664 B]
460.639µs: memcpy 328666 [1314664 B]
442.829µs: memcpy 328666 [1314664 B]
425.925µs: memcpy 328666 [1314664 B]
447.357µs: memcpy 328666 [1314664 B]
417.473µs: memcpy 328666 [1314664 B]
469.997µs: memcpy 328666 [1314664 B]
450.376µs: memcpy 328666 [1314664 B]
427.737µs: memcpy 328666 [1314664 B]
429.547µs: memcpy 328666 [1314664 B]
324.5µs: memcpy 328666 [1314664 B]
428.642µs: memcpy 328666 [1314664 B]
412.342µs: memcpy 328666 [1314664 B]
428.944µs: memcpy 328666 [1314664 B]
410.833µs: memcpy 328666 [1314664 B]
433.472µs: memcpy 328666 [1314664 B]
441.622µs: memcpy 328666 [1314664 B]
426.529µs: memcpy 328666 [1314664 B]
430.151µs: memcpy 328666 [1314664 B]
434.679µs: memcpy 328666 [1314664 B]
466.676µs: memcpy 328666 [1314664 B]
450.678µs: memcpy 328666 [1314664 B]
438.603µs: memcpy 328666 [1314664 B]
437.396µs: memcpy 328666 [1314664 B]
430.453µs: memcpy 328666 [1314664 B]
467.582µs: memcpy 328666 [1314664 B]
492.637µs: memcpy 328666 [1314664 B]
478.147µs: memcpy 328666 [1314664 B]
427.736µs: memcpy 328666 [1314664 B]
467.884µs: memcpy 328666 [1314664 B]
438.603µs: memcpy 328666 [1314664 B]
425.925µs: memcpy 328666 [1314664 B]
480.26µs: memcpy 328666 [1314664 B]
442.528µs: memcpy 328666 [1314664 B]
444.037µs: memcpy 328666 [1314664 B]
889.282µs: memcpy 1103347 [4413388 B]
937.277µs: memcpy 1103347 [4413388 B]
912.223µs: memcpy 1103347 [4413388 B]
905.28µs: memcpy 1103347 [4413388 B]
963.841µs: memcpy 1103347 [4413388 B]
931.24µs: memcpy 1103347 [4413388 B]
912.223µs: memcpy 1103347 [4413388 B]
924.901µs: memcpy 1103347 [4413388 B]
930.636µs: memcpy 1103347 [4413388 B]
873.887µs: memcpy 1103347 [4413388 B]
895.923µs: memcpy 1103347 [4413388 B]
935.164µs: memcpy 1103347 [4413388 B]
967.464µs: memcpy 1103347 [4413388 B]
897.432µs: memcpy 1103347 [4413388 B]
940.296µs: memcpy 1103347 [4413388 B]
897.432µs: memcpy 1103347 [4413388 B]
916.148µs: memcpy 1103347 [4413388 B]
931.24µs: memcpy 1103347 [4413388 B]
902.865µs: memcpy 1103347 [4413388 B]
889.885µs: memcpy 1103347 [4413388 B]
900.752µs: memcpy 1103347 [4413388 B]
930.334µs: memcpy 1103347 [4413388 B]
902.563µs: memcpy 1103347 [4413388 B]
888.98µs: memcpy 1103347 [4413388 B]
896.224µs: memcpy 1103347 [4413388 B]
888.678µs: memcpy 1103347 [4413388 B]
896.526µs: memcpy 1103347 [4413388 B]
903.469µs: memcpy 1103347 [4413388 B]
831.928µs: memcpy 1103347 [4413388 B]
841.889µs: memcpy 1103347 [4413388 B]
880.829µs: memcpy 1103347 [4413388 B]
887.47µs: memcpy 1103347 [4413388 B]
791.177µs: memcpy 1103347 [4413388 B]
927.316µs: memcpy 1103347 [4413388 B]
908.298µs: memcpy 1103347 [4413388 B]
919.468µs: memcpy 1103347 [4413388 B]
861.51µs: memcpy 1103347 [4413388 B]
905.28µs: memcpy 1103347 [4413388 B]
922.486µs: memcpy 1103347 [4413388 B]
936.674µs: memcpy 1103347 [4413388 B]
878.112µs: memcpy 1103347 [4413388 B]
918.26µs: memcpy 1103347 [4413388 B]
911.921µs: memcpy 1103347 [4413388 B]
887.47µs: memcpy 1103347 [4413388 B]
1.271739ms: memcpy 1103347 [4413388 B]
935.768µs: memcpy 1103347 [4413388 B]
919.468µs: memcpy 1103347 [4413388 B]
891.093µs: memcpy 1103347 [4413388 B]
910.411µs: memcpy 1103347 [4413388 B]
933.957µs: memcpy 1103347 [4413388 B]
888.074µs: memcpy 1103347 [4413388 B]
917.657µs: memcpy 1103347 [4413388 B]
938.183µs: memcpy 1103347 [4413388 B]
891.696µs: memcpy 1103347 [4413388 B]
Benchmark 1: cmdbussy 16755 assign_cell.hlsl
  Time (mean ± σ): 77.020430 µs ± 11.906872 µs
  Range (min … max): 59.467000 µs … 109.576000 µs 79 runs
Benchmark 2: cmdbussy 27868 assign_cell.hlsl
  Time (mean ± σ): 94.344298 µs ± 16.650838 µs
  Range (min … max): 70.032000 µs … 143.384000 µs 94 runs
Benchmark 3: cmdbussy 84860 assign_cell.hlsl
  Time (mean ± σ): 121.324375 µs ± 13.818648 µs
  Range (min … max): 102.632000 µs … 177.494000 µs 128 runs
Benchmark 4: cmdbussy 242931 assign_cell.hlsl
  Time (mean ± σ): 225.322222 µs ± 15.102213 µs
  Range (min … max): 201.341000 µs … 253.865000 µs 45 runs
Benchmark 5: cmdbussy 328666 assign_cell.hlsl
  Time (mean ± σ): 274.884122 µs ± 15.464222 µs
  Range (min … max): 250.846000 µs … 314.237000 µs 49 runs
Benchmark 6: cmdbussy 1103347 assign_cell.hlsl
  Time (mean ± σ): 737.298943 µs ± 19.641971 µs
  Range (min … max): 709.976000 µs … 797.818000 µs 35 runs
Summary
  'cmdbussy 16755 assign_cell.hlsl' ran
    1.224926 ± 0.126326 times faster than 'cmdbussy 27868 assign_cell.hlsl'
    1.575223 ± -0.208917 times faster than 'cmdbussy 84860 assign_cell.hlsl'
    2.925486 ± -1.363954 times faster than 'cmdbussy 242931 assign_cell.hlsl'
    3.568977 ± -1.917213 times faster than 'cmdbussy 328666 assign_cell.hlsl'
    9.572771 ± -7.070153 times faster than 'cmdbussy 1103347 assign_cell.hlsl'
Benchmark 1: 16755 grouping
 Time (mean ± σ): 5.160478 ms ± 1.338881 ms
 Range (min … max): 3.996937 ms … 15.118690 ms 138 runs
Benchmark 2: 242931 grouping
 Time (mean ± σ): 24.059545 ms ± 1.050724 ms
 Range (min … max): 23.083585 ms … 31.002295 ms 61 runs
Benchmark 3: 328666 grouping
 Time (mean ± σ): 32.644063 ms ± 1.409783 ms
 Range (min … max): 31.362113 ms … 40.273642 ms 46 runs
Benchmark 4: 1103347 grouping
 Time (mean ± σ): 94.376382 ms ± 4.374384 ms
 Range (min … max): 91.812121 ms … 124.406731 ms 54 runs
Summary
  '16755 grouping' ran
    4.662270 ± -2.540167 times faster than '242931 grouping'
    6.325782 ± -3.805747 times faster than '328666 grouping'
   18.288302 ± -12.847826 times faster than '1103347 grouping'
Benchmark 1: 16755 copied
 Time (mean ± σ): 2.980292 ms ± 563.518349 µs
 Range (min … max): 2.582720 ms … 5.510768 ms 138 runs
Benchmark 2: 242931 copied
 Time (mean ± σ): 4.716775 ms ± 315.106241 µs
 Range (min … max): 4.271328 ms … 5.826816 ms 61 runs
Benchmark 3: 328666 copied
 Time (mean ± σ): 5.932178 ms ± 403.647195 µs
 Range (min … max): 5.457942 ms … 7.967309 ms 46 runs
Benchmark 4: 1103347 copied
 Time (mean ± σ): 8.905275 ms ± 499.789838 µs
 Range (min … max): 8.356709 ms … 11.274495 ms 54 runs
Summary
  '16755 copied' ran
    1.582656 ± -0.242072 times faster than '242931 copied'
    1.990469 ± -0.560053 times faster than '328666 copied'
    2.988054 ± -1.371878 times faster than '1103347 copied'
Benchmark 1: memcpy 242931 [971724 B]
 Time (mean ± σ): 388.197820 µs ± 23.969864 µs
 Range (min … max): 285.862000 µs … 452.791000 µs 61 runs
Benchmark 2: memcpy 328666 [1314664 B]
 Time (mean ± σ): 436.336089 µs ± 31.094674 µs
 Range (min … max): 315.444000 µs … 492.637000 µs 45 runs
Benchmark 3: memcpy 16755 [67020 B]
 Time (mean ± σ): 650.540254 µs ± 2.112618 ms
 Range (min … max): 172.363000 µs … 16.097624 ms 138 runs
Benchmark 4: memcpy 1103347 [4413388 B]
 Time (mean ± σ): 912.412944 µs ± 57.738241 µs
 Range (min … max): 791.177000 µs … 1.271739 ms 54 runs
Summary
  'memcpy 242931 [971724 B]' ran
    1.124004 ± 0.016804 times faster than 'memcpy 328666 [1314664 B]'
    1.675796 ± 4.547288 times faster than 'memcpy 16755 [67020 B]'
    2.350381 ± -1.073609 times faster than 'memcpy 1103347 [4413388 B]'
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;assign_cell.hlsl&lt;/samp&gt;&lt;/th&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;77.0µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;225.3µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;274.9µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;737.3µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;q&gt;grouping&lt;/q&gt; &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.160ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;24.060ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32.644ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;94.377ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.339ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.051ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.410ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.375ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;grouping speed &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3246792&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10097073&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10068170&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11690922&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[points/s]&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;q&gt;copying&lt;/q&gt; &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.980ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.717ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.932ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8.905ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;564µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;315µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;404µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;500µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;GroupDesc&lt;/samp&gt;s copied&lt;/th&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6523&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;66589&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;104645&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;167428&lt;/span&gt;&lt;/td&gt; &lt;td&gt;= cells occupied; out of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;…if w/o [​[​B_m​]​]/[​[​B_r​]​] scaling&lt;/th&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2260&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6979&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10662&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;53492&lt;/span&gt;&lt;/td&gt; &lt;td style=&quot;text-align: center;&quot;&gt;''&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;memcpy &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;388.2µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;436.3µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;650.5µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;912.4µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;23µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;31µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;57µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;memcpy size &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;67kB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;972kB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1315kB&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4413kB&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
So &lt;q&gt;grouping&lt;/q&gt;, on the i7-2600, quickly arrives at a consistent &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~11Mp/s&lt;/span&gt; throughput.
Bounding box scaling clearly works, increasing the occupancy, in the case of the &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt; image, from &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~5%&lt;/span&gt;
(average population of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~20&lt;/span&gt; in non-empty cells, median &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9&lt;/span&gt;)
to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~17%&lt;/span&gt; (&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~7&lt;/span&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3&lt;/span&gt;).
&lt;/p&gt;
&lt;h3 id=&quot;grid-impl&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#grid-impl&quot;&gt;#&lt;/a&gt; The grid-based mean-shift clustering shader implementation,&lt;/h3&gt;
&lt;p class=&quot;continuing&quot;&gt;
thus, can take advantage of the grid by, instead of checking if &lt;em&gt;all&lt;/em&gt; elements of [​[​D​]​] are closer to [​[​q_t​]​] than [​[​r​]​],
considering only the ones that could &lt;em&gt;feasibly&lt;/em&gt; fulfil that predicate by virtue of being contained within near-by grid cells.
The actual range is complicated slightly by the bounding box scale being different along each axis,
so the sphere of influence (with a cubic bounding box) turns into an ellipsoid of influence with &quot;radiuses&quot; [​[​R​]​]
(with a prismatic bounding box from [​[​g_{tm}​]​] to [​[​g_{tM}​]​])
rounded up to encompas any cell it intersects
after the [​[​B_r​]​] scaling:
&lt;/p&gt;
&lt;div class=&quot;mathnospace&quot;&gt;
[​![​
\begin{align}
&lt;!--&quot;--&gt;M_t &amp;= (x \mapsto [|\overrightarrow{xq_t}| \leq r]) \circ D\\&lt;!--&quot;--&gt;
&amp;\Leftrightarrow\\
M_t &amp;= (x \mapsto [|\overrightarrow{xq_t}| \leq r]) \circ \left(\bigcup_{x_g \in \mathbb{Z}^3 \wedge g_{tm} \leq x_g \leq g_{tM}} h(x_g)\right)\\
\text{where}&amp;\\
R &amp;= \left\lceil G \frac{r}{B_r} \right\rceil\\
g_t &amp;= \operatorname{trunc}(g(q_t))\\
g_{tm} &amp;= \max(g_t - R, (0, 0, 0))\\
g_{tM} &amp;= \min(g_t + R, (G-1, G-1, G-1))\\
\end{align}
​]!​]
&lt;/div&gt;
&lt;div class=&quot;singles&quot;&gt;
 &lt;figure&gt;
  &lt;video width=&quot;100%&quot; autoplay controls loop&gt;&lt;source src=&quot;/content/assets/blogn_t/018.26-grid-scaling-0000-0130-1x1-tilt.mp4&quot; type=&quot;video/mp4&quot; /&gt;&lt;/video&gt;
  &lt;figcaption&gt;Effect of the scaling on [​[​r​]​] (as-if [​[​G=1, r=0.2​]​], [​[​R​]​] quantisation not applied)&lt;/figcaption&gt;
 &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
With
[​[​R​]​] as &lt;samp&gt;grid_bothdirs&lt;/samp&gt;,
[​[​g_t​]​] as &lt;samp&gt;gridpos&lt;/samp&gt;,
[​[​g_{tm}​]​] as &lt;samp&gt;gridpos_from&lt;/samp&gt;,
and
[​[​g_{tM}​]​] as &lt;samp&gt;gridpos_to&lt;/samp&gt;,
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8283e16a104509e020942c54a7ae442797bea080/item/src/posterise_grid_kernel.hlsl.inc#L29&quot;&gt;&lt;samp&gt;posterise_grid_kernel.hlsl.inc&lt;/samp&gt;&lt;/a&gt;
can implement the [​[​\bigcup​]​] literally:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shader.h&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;/*&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;3 */&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;KNOWN_RGBS_FREQS
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;groups_data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;known_rgbs_len&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;radiussy_squared &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;iter_limit&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_min&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_range&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;grid_bothdir&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_pack &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;iter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;trunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lab_to_gridpos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_from &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_to&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GRID_SIZE &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; newcenter_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; newcenter&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gx &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gy &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gz &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; group &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;end_idx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; groups_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#if&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;BRANCHLESS_ADD&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;matched&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;							&lt;!--&quot;--&gt;FREQ_LOAD
&lt;!--&quot;--&gt;							&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; FREQ&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;							&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; FREQ_MUL lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; same &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;same&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8283e16a104509e020942c54a7ae442797bea080/item/src/posterise_grid.hlsl&quot;&gt;&lt;samp&gt;posterise_grid.hlsl&lt;/samp&gt;&lt;/a&gt;
and
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8283e16a104509e020942c54a7ae442797bea080/item/src/posterise_grid_mul.hlsl&quot;&gt;&lt;samp&gt;posterise_grid_mul.hlsl&lt;/samp&gt;&lt;/a&gt;
are unchanged,
and so is both the outer-most [​[​q_t​]​] loop and inner-most [​[​\Sigma​]​].
To avoid overflow if [​[​R &gt; g_t​]​] we observe [​[​\max(g_t - R, (0, 0, 0)) = g_t - \min(R, g_t)​]​].
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8283e16a104509e020942c54a7ae442797bea080/item/src/shader.h#L9&quot;&gt;
 Reordering the scalar parameters to forced-padding locations&lt;/a&gt;
allows retaining the same size while fitting &lt;samp&gt;grid_bothdirs&lt;/samp&gt;/[​[​R​]​]:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;bbox_max&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;bbox_range&lt;/span&gt;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
[​[​R​]​] computation is can likewise be
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8283e16a104509e020942c54a7ae442797bea080/item/src/posterise_gpu.rs#L616&quot;&gt;implemented directly&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// find_bbox.hlsl ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; bbox_min &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;become_float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; bbox_range &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; bbox_max &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;become_float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; scaled_radiussies &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;scale&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; radiussy &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; scale&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; direction_cells&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; scaled_radiussies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;sr&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sr &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;grid_bothdirs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; direction_cells&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
By mildly instrumenting (&lt;samp&gt;dbg!(direction_cells)&lt;/samp&gt;) or recalling the bounding boxes from &lt;a href=&quot;#grid&quot;&gt;before&lt;/a&gt;,
we can compute the following and use it as the best-case prediction
(additionally assuming every cell inspected will be non-empty, which it won't&lt;!--'--&gt;,
 but non-empty cells are where the points are so they're&lt;!--'--&gt; roughly where [​[​q_t​]​]s are
 and they're&lt;!--'--&gt; pretty dense, so.):
&lt;/p&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;caption&gt;[​[​r=0.02, G=100​]​]&lt;/caption&gt;
 &lt;tr&gt;&lt;th&gt;(colours)&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;[​[​R​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3×7×8&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3×1×7&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3×8×10&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2×5×4&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;Volume between [​[​g_{tm}​]​] and [​[​g_{tM}​]​] when not near an edge&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1785&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;315&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2499&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;495&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;Average points inspected when not near an edge&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4585&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1149&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7849&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3262&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;Projected average speed-up&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;72.64%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;99.53%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;97.61%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;99.70%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continued&quot;&gt;
To contrast with real performance data:
&lt;/p&gt;
&lt;!--
127.564796ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
118.878455ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
120.513634ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
118.934601ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
117.431938ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
117.452768ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
117.029861ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
117.141549ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.893163ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
113.978653ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
111.163199ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.421957ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
114.220142ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.511912ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.613955ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
114.666895ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.806227ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
113.24151ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
111.812501ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
1.574252133s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
1.565167334s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
1.937814595s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
2.562109185s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
1.578621263s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
2.590732818s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
1.58395816s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
2.024161529s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
1.60444212s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
4.082810335s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.026844768s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.06468149s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.597240631s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.023244779s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.530159651s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.069314447s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.429522635s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.055795619s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
4.097178901s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
8.599332828s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~181 levels
8.264387659s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~69 levels
10.703902786s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~131 levels
9.531067044s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~102 levels
8.140011416s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~64 levels
8.249509552s: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~54 levels
9.482006541s: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~55 levels
8.765439191s: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~54 levels
8.345361473s: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~54 levels
12.874083966s: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~146 levels
8.653643292s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~9365 levels
8.486575503s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~9276 levels
11.594080452s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~10295 levels
8.585882521s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~9305 levels
100.174264ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
97.762398ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
100.140154ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
99.159107ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
98.665565ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
100.368663ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
99.324526ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
98.362194ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
98.954445ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
100.348438ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
99.818673ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
99.428366ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
99.889609ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
557.7799ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
545.406029ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
708.155399ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
535.931831ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
550.382201ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
553.863559ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
551.2419ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
549.946315ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
554.305483ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
3.01998891s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
3.005828325s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
3.346185553s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
2.999888613s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
3.523654856s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
2.986719037s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
3.649072217s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
3.011748416s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
3.904451147s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
3.005888093s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
3.694295467s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
8.196744916s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~220 levels
9.460674954s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~183 levels
9.576366365s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~183 levels
8.320987435s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~177 levels
11.161813301s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~185 levels
8.355028258s: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~141 levels
9.232788888s: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~145 levels
9.109581751s: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~144 levels
8.234889535s: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~142 levels
8.353483336s: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~142 levels
8.624341981s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~7482 levels
8.460889577s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~7451 levels
8.564126519s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~7471 levels
9.026406769s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~7554 levels
8.488517976s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~7451 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02
 Time (mean ± σ): 116.646196 ms ± 5.210278 ms
 Range (min … max): 111.163199 ms … 131.613955 ms 19 runs
Benchmark 3: MSC 84860 RGBs @ r=0.02
 Time (mean ± σ): 4197.679326 ms ± 214.743511 ms
 Range (min … max): 4023.244779 ms … 4597.240631 ms 10 runs
Benchmark 4: MSC 242931 RGBs @ r=0.02
 Time (mean ± σ): 9047.740347 ms ± 960.745676 ms
 Range (min … max): 8140.011416 ms … 10703.902786 ms 5 runs
  avg levels = 109.40
Benchmark 2: MSC 27868 RGBs @ r=0.02
 Time (mean ± σ): 1891.251015 ms ± 400.056011 ms
 Range (min … max): 1565.167334 ms … 2590.732818 ms 9 runs
Benchmark 5: MSC 328666 RGBs @ r=0.02
 Time (mean ± σ): 9543.280145 ms ± 1721.156390 ms
 Range (min … max): 8249.509552 ms … 12874.083966 ms 5 runs
  avg levels = 72.60
Benchmark 6: MSC 1103347 RGBs @ r=0.02
 Time (mean ± σ): 9330.045442 ms ± 1308.490962 ms
 Range (min … max): 8486.575503 ms … 11594.080452 ms 4 runs
  avg levels = 9560.25
Benchmark 1: MSC 16755 RGBs @ r=0.02 * freq
 Time (mean ± σ): 99.415108 ms ± 782.423169 µs
 Range (min … max): 97.762398 ms … 100.368663 ms 13 runs
Benchmark 3: MSC 84860 RGBs @ r=0.02 * freq
 Time (mean ± σ): 3286.156421 ms ± 332.411821 ms
 Range (min … max): 2986.719037 ms … 3904.451147 ms 11 runs
Benchmark 4: MSC 242931 RGBs @ r=0.02 * freq
 Time (mean ± σ): 9343.317394 ms ± 1070.962089 ms
 Range (min … max): 8196.744916 ms … 11161.813301 ms 5 runs
  avg levels = 189.60
Benchmark 2: MSC 27868 RGBs @ r=0.02 * freq
 Time (mean ± σ): 567.445846 ms ± 50.098362 ms
 Range (min … max): 535.931831 ms … 708.155399 ms 9 runs
Benchmark 5: MSC 328666 RGBs @ r=0.02 * freq
 Time (mean ± σ): 8657.154354 ms ± 423.756890 ms
 Range (min … max): 8234.889535 ms … 9232.788888 ms 5 runs
  avg levels = 142.80
Benchmark 6: MSC 1103347 RGBs @ r=0.02 * freq
 Time (mean ± σ): 8632.856564 ms ± 204.980172 ms
 Range (min … max): 8460.889577 ms … 9026.406769 ms 5 runs
  avg levels = 7481.80
--&gt;
&lt;!-- degen:
128.830197ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
120.480429ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
118.952109ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
120.114574ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
118.226436ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.798378ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
113.604648ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.712951ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
114.205049ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.700273ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.88471ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
115.011922ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
115.110328ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
114.847408ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.523986ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
114.816618ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
111.691757ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.415618ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
116.297848ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.198883ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
115.283597ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
113.096013ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.486254ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
111.728584ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
114.774358ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
117.894088ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
119.102134ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
116.346146ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
116.510056ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.969533ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
120.484052ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
112.537268ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
151.560906ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
148.841142ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
149.139984ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
145.394799ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
145.748579ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
142.265108ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
144.081403ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
144.657656ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
142.45528ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
146.709704ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
142.835624ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
144.912727ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
144.171056ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
146.425351ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
142.426ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
143.132354ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
142.201717ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
145.156631ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
144.521818ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
144.321986ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
145.48747ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
146.454934ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
145.907962ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
143.374144ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
143.334902ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
142.113876ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
142.231602ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
144.536609ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
145.738015ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
145.551464ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
141.743795ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
146.265365ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
145.12071ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
 Time (mean ± σ): 115.426131 ms ± 3.595989 ms
 Range (min … max): 111.691757 ms … 128.830197 ms 32 runs
Benchmark 2: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
 Time (mean ± σ): 144.812748 ms ± 2.176153 ms
 Range (min … max): 141.743795 ms … 151.560906 ms 33 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;116.646ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;99.415ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;85.23%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.49%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12.35%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-6.68 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9.47%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16.36%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-7.02 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;115.426ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;144.812ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;125.46%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.75%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.54%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.63 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.87%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.64%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9.51 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuation&quot;&gt;
[​[​*freq​]​] becomes more slower than [​[​palette​]​] in the degenerate case and less slower than [​[​palette​]​] on the real image.
What this means is unclear to me.
&lt;/p&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;116.65ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.198s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~109&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;155&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;214ms&lt;/span&gt;/–&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;36%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;99.42ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.286s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~190&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;152&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;782µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;332ms&lt;/span&gt;/–&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;18%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;25%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;31%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.891s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~73&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;220&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~9560&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6505&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;400ms&lt;/span&gt;/–/–&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-30%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;∞&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42.58×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;567.45ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~143&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;132&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;[time-out; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~7482&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5075&lt;/span&gt;]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50ms&lt;/span&gt;/–/–&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-52%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;81%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.6×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tfoot class=&quot;label&quot;&gt;&lt;tr&gt;&lt;td colspan=4&gt; Computation of cells labelled &lt;q&gt;time-out&lt;/q&gt; was terminated by the driver after like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8-11s&lt;/span&gt;; progress corresponds to &lt;em&gt;how many distinct output colours&lt;/em&gt; &lt;span style=&quot;white-space: nowrap;&quot;&gt;([​[​\overline{Set(O)}​]​])&lt;/span&gt; were produced vs. a correct implementation; this is a very vague proxy measured for a very vague amount of time. &lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;
&lt;p&gt;
The predictions are entirely uncorrelated with reality.
I love economics.
&lt;/p&gt;
&lt;div class=&quot;singles&quot;&gt;
&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.27-graphml-gridded.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.27-graphml-gridded.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;h2 id=&quot;cicada-grid&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#cicada-grid&quot;&gt;#&lt;/a&gt; Failure: GPU-side grid-cell-to-index-list mapping&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
While the collection (&lt;q&gt;grouping&lt;/q&gt;) can't&lt;!--'--&gt; be sped up on the host, it could, theoretically,
be executed on the GPU by collecting each value of [​[​h​]​] directly from the definition by looking at each element of [​[​D​]​] for each cell,
after pre-computing the sizes to fix the allocation question.
To that end, the latter can be summed up easily in
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/shader-side-grid-cell-allocation/item/src/assign_cell.hlsl#L26&quot;&gt;&lt;samp&gt;assign_cell.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;

&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedAdd&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_len&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
(noting that the intermediate map now goes to a non-&lt;samp&gt;HOST_VISIBLE&lt;/samp&gt; memory since it doesn't&lt;!--'--&gt; need to be),
after
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/shader-side-grid-cell-allocation/item/src/shader.h#L4&quot;&gt;easily restructuring&lt;/a&gt;
the group index range to &lt;samp&gt;[begin, begin+size)&lt;/samp&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; start_idx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; group_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Thus, the allocator can dump the indices into &lt;samp&gt;groups_data&lt;/samp&gt; in the same manner as the host-side implementation,
but instead of doing it in order, it can use Some Global to get the next unused chunk.
This is much more like a classical bump allocator.
Conveniently, the Some Global can just be the first integer in &lt;samp&gt;groups_data&lt;/samp&gt;.
So, &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/shader-side-grid-cell-allocation/item/src/posterise_gpu.rs#L770&quot;&gt;the driver&lt;/a&gt;
is greatly simplified:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_groups_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... through assign_cell.hlsl &amp;amp;c.&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// self.buffer_groups_data[0] = 1;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_fill_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// cicada_grid.hlsl&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;CICADA_GRID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... posterise.hlsl/posterise_mul.hlsl &amp;amp;c.&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The initial offset must be initialised (to &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; instead of &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0&lt;/span&gt; to not overwrite itself),
but this can be done in the same command buffer as dispatching the shader and the &quot;couple dozen μs&quot; (like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;79±32&lt;/span&gt; in this case) become free.
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/shader-side-grid-cell-allocation/item/src/cicada_grid.hlsl&quot;&gt;&lt;samp&gt;cicada_grid.hlsl&lt;/samp&gt;&lt;/a&gt;
is dispatched at [​[​\text{numthreads} = (G, 1, 1), \text{dispatch}(1, G, G)​]​] to evaluate every integer in [​[​h​]​]'s&lt;!--'--&gt; domain of [​[​[0, G )^3​]​]:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shader.h&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;groups_data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;

&lt;/small&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;next_start&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;groups_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;known_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;my_rgbs&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;my_rgbs &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; start_idx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedAdd&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;next_start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; my_rgbs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; start_idx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; start_idx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gridpos_saved &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	                           &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	                           &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; rgb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; rgb &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; gridpos_saved&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;groups_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rgb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
57.354µs: cmdbussy 16755 assign_cell.hlsl
47.694µs: cmdbussy *groups_data = 0:
5.949069ms: cmdbussy 16755 cicada_grid.hlsl
102.633µs: cmdbussy 16755 assign_cell.hlsl
74.258µs: cmdbussy *groups_data = 0:
5.88598ms: cmdbussy 16755 cicada_grid.hlsl
82.408µs: cmdbussy 16755 assign_cell.hlsl
74.862µs: cmdbussy *groups_data = 0:
5.895036ms: cmdbussy 16755 cicada_grid.hlsl
103.236µs: cmdbussy 16755 assign_cell.hlsl
61.278µs: cmdbussy *groups_data = 0:
5.886887ms: cmdbussy 16755 cicada_grid.hlsl
87.539µs: cmdbussy 16755 assign_cell.hlsl
101.425µs: cmdbussy *groups_data = 0:
5.971709ms: cmdbussy 16755 cicada_grid.hlsl
80.899µs: cmdbussy 16755 assign_cell.hlsl
67.315µs: cmdbussy *groups_data = 0:
5.920091ms: cmdbussy 16755 cicada_grid.hlsl
101.425µs: cmdbussy 16755 assign_cell.hlsl
74.257µs: cmdbussy *groups_data = 0:
5.835268ms: cmdbussy 16755 cicada_grid.hlsl
111.386µs: cmdbussy 16755 assign_cell.hlsl
115.311µs: cmdbussy *groups_data = 0:
5.908016ms: cmdbussy 16755 cicada_grid.hlsl
63.391µs: cmdbussy 16755 assign_cell.hlsl
57.958µs: cmdbussy *groups_data = 0:
5.823797ms: cmdbussy 16755 cicada_grid.hlsl
82.71µs: cmdbussy 16755 assign_cell.hlsl
70.636µs: cmdbussy *groups_data = 0:
5.876623ms: cmdbussy 16755 cicada_grid.hlsl
80.899µs: cmdbussy 16755 assign_cell.hlsl
84.521µs: cmdbussy *groups_data = 0:
5.852474ms: cmdbussy 16755 cicada_grid.hlsl
103.84µs: cmdbussy 16755 assign_cell.hlsl
95.087µs: cmdbussy *groups_data = 0:
5.968993ms: cmdbussy 16755 cicada_grid.hlsl
124.366µs: cmdbussy 16755 assign_cell.hlsl
101.727µs: cmdbussy *groups_data = 0:
5.935486ms: cmdbussy 16755 cicada_grid.hlsl
69.73µs: cmdbussy 16755 assign_cell.hlsl
69.729µs: cmdbussy *groups_data = 0:
5.90379ms: cmdbussy 16755 cicada_grid.hlsl
99.614µs: cmdbussy 16755 assign_cell.hlsl
83.012µs: cmdbussy *groups_data = 0:
5.809007ms: cmdbussy 16755 cicada_grid.hlsl
95.086µs: cmdbussy 16755 assign_cell.hlsl
91.162µs: cmdbussy *groups_data = 0:
5.888697ms: cmdbussy 16755 cicada_grid.hlsl
98.406µs: cmdbussy 16755 assign_cell.hlsl
67.315µs: cmdbussy *groups_data = 0:
5.956616ms: cmdbussy 16755 cicada_grid.hlsl
95.991µs: cmdbussy 16755 assign_cell.hlsl
87.238µs: cmdbussy *groups_data = 0:
5.830438ms: cmdbussy 16755 cicada_grid.hlsl
83.314µs: cmdbussy 16755 assign_cell.hlsl
73.654µs: cmdbussy *groups_data = 0:
5.897753ms: cmdbussy 16755 cicada_grid.hlsl
80.597µs: cmdbussy 16755 assign_cell.hlsl
81.2µs: cmdbussy *groups_data = 0:
5.827722ms: cmdbussy 16755 cicada_grid.hlsl
90.256µs: cmdbussy 16755 assign_cell.hlsl
80.898µs: cmdbussy *groups_data = 0:
5.936089ms: cmdbussy 16755 cicada_grid.hlsl
94.784µs: cmdbussy 16755 assign_cell.hlsl
83.917µs: cmdbussy *groups_data = 0:
5.927335ms: cmdbussy 16755 cicada_grid.hlsl
151.836µs: cmdbussy 16755 assign_cell.hlsl
95.086µs: cmdbussy *groups_data = 0:
5.952691ms: cmdbussy 16755 cicada_grid.hlsl
79.087µs: cmdbussy 16755 assign_cell.hlsl
105.349µs: cmdbussy *groups_data = 0:
5.834665ms: cmdbussy 16755 cicada_grid.hlsl
107.764µs: cmdbussy 16755 assign_cell.hlsl
98.105µs: cmdbussy *groups_data = 0:
5.953296ms: cmdbussy 16755 cicada_grid.hlsl
75.767µs: cmdbussy 16755 assign_cell.hlsl
95.992µs: cmdbussy *groups_data = 0:
5.988915ms: cmdbussy 16755 cicada_grid.hlsl
108.67µs: cmdbussy 16755 assign_cell.hlsl
101.425µs: cmdbussy *groups_data = 0:
5.905601ms: cmdbussy 16755 cicada_grid.hlsl
90.558µs: cmdbussy 16755 assign_cell.hlsl
90.256µs: cmdbussy *groups_data = 0:
5.862737ms: cmdbussy 16755 cicada_grid.hlsl
155.156µs: cmdbussy 16755 assign_cell.hlsl
92.671µs: cmdbussy *groups_data = 0:
5.821382ms: cmdbussy 16755 cicada_grid.hlsl
60.071µs: cmdbussy 16755 assign_cell.hlsl
51.316µs: cmdbussy *groups_data = 0:
5.869378ms: cmdbussy 16755 cicada_grid.hlsl
139.158µs: cmdbussy 16755 assign_cell.hlsl
148.213µs: cmdbussy *groups_data = 0:
5.846437ms: cmdbussy 16755 cicada_grid.hlsl
92.671µs: cmdbussy 16755 assign_cell.hlsl
86.332µs: cmdbussy *groups_data = 0:
5.945749ms: cmdbussy 16755 cicada_grid.hlsl
66.41µs: cmdbussy 16755 assign_cell.hlsl
93.577µs: cmdbussy *groups_data = 0:
5.901074ms: cmdbussy 16755 cicada_grid.hlsl
90.559µs: cmdbussy 16755 assign_cell.hlsl
70.635µs: cmdbussy *groups_data = 0:
5.81776ms: cmdbussy 16755 cicada_grid.hlsl
81.201µs: cmdbussy 16755 assign_cell.hlsl
92.671µs: cmdbussy *groups_data = 0:
5.890508ms: cmdbussy 16755 cicada_grid.hlsl
106.859µs: cmdbussy 16755 assign_cell.hlsl
92.37µs: cmdbussy *groups_data = 0:
5.859115ms: cmdbussy 16755 cicada_grid.hlsl
100.821µs: cmdbussy 16755 assign_cell.hlsl
87.238µs: cmdbussy *groups_data = 0:
5.86485ms: cmdbussy 16755 cicada_grid.hlsl
76.673µs: cmdbussy 16755 assign_cell.hlsl
63.693µs: cmdbussy *groups_data = 0:
6.013365ms: cmdbussy 16755 cicada_grid.hlsl
55.24µs: cmdbussy 16755 assign_cell.hlsl
61.881µs: cmdbussy *groups_data = 0:
5.899565ms: cmdbussy 16755 cicada_grid.hlsl
76.974µs: cmdbussy 16755 assign_cell.hlsl
97.803µs: cmdbussy *groups_data = 0:
5.922505ms: cmdbussy 16755 cicada_grid.hlsl
102.029µs: cmdbussy 16755 assign_cell.hlsl
58.561µs: cmdbussy *groups_data = 0:
5.814138ms: cmdbussy 16755 cicada_grid.hlsl
102.632µs: cmdbussy 16755 assign_cell.hlsl
73.352µs: cmdbussy *groups_data = 0:
5.834966ms: cmdbussy 16755 cicada_grid.hlsl
113.198µs: cmdbussy 16755 assign_cell.hlsl
77.277µs: cmdbussy *groups_data = 0:
5.89081ms: cmdbussy 16755 cicada_grid.hlsl
103.538µs: cmdbussy 16755 assign_cell.hlsl
73.654µs: cmdbussy *groups_data = 0:
5.866057ms: cmdbussy 16755 cicada_grid.hlsl
64.9µs: cmdbussy 16755 assign_cell.hlsl
65.202µs: cmdbussy *groups_data = 0:
5.959031ms: cmdbussy 16755 cicada_grid.hlsl
67.315µs: cmdbussy 16755 assign_cell.hlsl
63.39µs: cmdbussy *groups_data = 0:
5.951183ms: cmdbussy 16755 cicada_grid.hlsl
108.972µs: cmdbussy 16755 assign_cell.hlsl
102.029µs: cmdbussy *groups_data = 0:
5.840098ms: cmdbussy 16755 cicada_grid.hlsl
131.309µs: cmdbussy 16755 assign_cell.hlsl
69.428µs: cmdbussy *groups_data = 0:
5.898961ms: cmdbussy 16755 cicada_grid.hlsl
94.18µs: cmdbussy 16755 assign_cell.hlsl
83.314µs: cmdbussy *groups_data = 0:
5.88749ms: cmdbussy 16755 cicada_grid.hlsl
105.651µs: cmdbussy 16755 assign_cell.hlsl
76.673µs: cmdbussy *groups_data = 0:
5.772179ms: cmdbussy 16755 cicada_grid.hlsl
85.728µs: cmdbussy 16755 assign_cell.hlsl
61.882µs: cmdbussy *groups_data = 0:
5.920996ms: cmdbussy 16755 cicada_grid.hlsl
74.862µs: cmdbussy 16755 assign_cell.hlsl
67.315µs: cmdbussy *groups_data = 0:
5.886886ms: cmdbussy 16755 cicada_grid.hlsl
83.615µs: cmdbussy 16755 assign_cell.hlsl
73.956µs: cmdbussy *groups_data = 0:
5.888395ms: cmdbussy 16755 cicada_grid.hlsl
70.937µs: cmdbussy 16755 assign_cell.hlsl
58.259µs: cmdbussy *groups_data = 0:
5.909224ms: cmdbussy 16755 cicada_grid.hlsl
102.331µs: cmdbussy 16755 assign_cell.hlsl
61.882µs: cmdbussy *groups_data = 0:
6.010045ms: cmdbussy 16755 cicada_grid.hlsl
109.877µs: cmdbussy 16755 assign_cell.hlsl
78.786µs: cmdbussy *groups_data = 0:
5.948767ms: cmdbussy 16755 cicada_grid.hlsl
115.311µs: cmdbussy 16755 assign_cell.hlsl
126.177µs: cmdbussy *groups_data = 0:
5.901074ms: cmdbussy 16755 cicada_grid.hlsl
75.767µs: cmdbussy 16755 assign_cell.hlsl
80.295µs: cmdbussy *groups_data = 0:
5.846437ms: cmdbussy 16755 cicada_grid.hlsl
81.503µs: cmdbussy 16755 assign_cell.hlsl
77.276µs: cmdbussy *groups_data = 0:
5.923713ms: cmdbussy 16755 cicada_grid.hlsl
144.592µs: cmdbussy 16755 assign_cell.hlsl
145.195µs: cmdbussy *groups_data = 0:
5.843116ms: cmdbussy 16755 cicada_grid.hlsl
57.354µs: cmdbussy 16755 assign_cell.hlsl
52.825µs: cmdbussy *groups_data = 0:
5.874208ms: cmdbussy 16755 cicada_grid.hlsl
118.631µs: cmdbussy 16755 assign_cell.hlsl
112.292µs: cmdbussy *groups_data = 0:
5.989821ms: cmdbussy 16755 cicada_grid.hlsl
66.409µs: cmdbussy 16755 assign_cell.hlsl
60.372µs: cmdbussy *groups_data = 0:
5.931864ms: cmdbussy 16755 cicada_grid.hlsl
106.557µs: cmdbussy 16755 assign_cell.hlsl
90.86µs: cmdbussy *groups_data = 0:
5.786668ms: cmdbussy 16755 cicada_grid.hlsl
85.124µs: cmdbussy 16755 assign_cell.hlsl
97.501µs: cmdbussy *groups_data = 0:
5.863945ms: cmdbussy 16755 cicada_grid.hlsl
131.913µs: cmdbussy 16755 assign_cell.hlsl
73.05µs: cmdbussy *groups_data = 0:
5.816251ms: cmdbussy 16755 cicada_grid.hlsl
85.125µs: cmdbussy 16755 assign_cell.hlsl
67.919µs: cmdbussy *groups_data = 0:
5.919487ms: cmdbussy 16755 cicada_grid.hlsl
143.082µs: cmdbussy 16755 assign_cell.hlsl
133.724µs: cmdbussy *groups_data = 0:
5.834664ms: cmdbussy 16755 cicada_grid.hlsl
133.724µs: cmdbussy 16755 assign_cell.hlsl
98.406µs: cmdbussy *groups_data = 0:
5.997669ms: cmdbussy 16755 cicada_grid.hlsl
135.234µs: cmdbussy 16755 assign_cell.hlsl
117.122µs: cmdbussy *groups_data = 0:
5.948767ms: cmdbussy 16755 cicada_grid.hlsl
108.368µs: cmdbussy 16755 assign_cell.hlsl
82.709µs: cmdbussy *groups_data = 0:
5.873605ms: cmdbussy 16755 cicada_grid.hlsl
122.254µs: cmdbussy 16755 assign_cell.hlsl
67.918µs: cmdbussy *groups_data = 0:
5.986199ms: cmdbussy 16755 cicada_grid.hlsl
118.329µs: cmdbussy 16755 assign_cell.hlsl
102.029µs: cmdbussy *groups_data = 0:
6.050193ms: cmdbussy 16755 cicada_grid.hlsl
102.934µs: cmdbussy 16755 assign_cell.hlsl
95.992µs: cmdbussy *groups_data = 0:
5.917676ms: cmdbussy 16755 cicada_grid.hlsl
96.294µs: cmdbussy 16755 assign_cell.hlsl
63.692µs: cmdbussy *groups_data = 0:
5.901074ms: cmdbussy 16755 cicada_grid.hlsl
70.635µs: cmdbussy 16755 assign_cell.hlsl
58.259µs: cmdbussy *groups_data = 0:
5.904696ms: cmdbussy 16755 cicada_grid.hlsl
100.218µs: cmdbussy 16755 assign_cell.hlsl
76.371µs: cmdbussy *groups_data = 0:
5.897754ms: cmdbussy 16755 cicada_grid.hlsl
100.217µs: cmdbussy 16755 assign_cell.hlsl
89.049µs: cmdbussy *groups_data = 0:
5.881755ms: cmdbussy 16755 cicada_grid.hlsl
70.032µs: cmdbussy 27868 assign_cell.hlsl
63.994µs: cmdbussy *groups_data = 0:
9.361906ms: cmdbussy 27868 cicada_grid.hlsl
99.01µs: cmdbussy 27868 assign_cell.hlsl
202.246µs: cmdbussy *groups_data = 0:
9.439786ms: cmdbussy 27868 cicada_grid.hlsl
67.919µs: cmdbussy 27868 assign_cell.hlsl
92.973µs: cmdbussy *groups_data = 0:
9.338361ms: cmdbussy 27868 cicada_grid.hlsl
68.523µs: cmdbussy 27868 assign_cell.hlsl
77.276µs: cmdbussy *groups_data = 0:
9.298817ms: cmdbussy 27868 cicada_grid.hlsl
113.499µs: cmdbussy 27868 assign_cell.hlsl
83.918µs: cmdbussy *groups_data = 0:
9.316324ms: cmdbussy 27868 cicada_grid.hlsl
131.611µs: cmdbussy 27868 assign_cell.hlsl
109.273µs: cmdbussy *groups_data = 0:
9.410808ms: cmdbussy 27868 cicada_grid.hlsl
123.461µs: cmdbussy 27868 assign_cell.hlsl
71.239µs: cmdbussy *groups_data = 0:
9.334437ms: cmdbussy 27868 cicada_grid.hlsl
87.539µs: cmdbussy 27868 assign_cell.hlsl
83.917µs: cmdbussy *groups_data = 0:
9.406581ms: cmdbussy 27868 cicada_grid.hlsl
80.295µs: cmdbussy 27868 assign_cell.hlsl
58.259µs: cmdbussy *groups_data = 0:
9.476311ms: cmdbussy 27868 cicada_grid.hlsl
93.879µs: cmdbussy 27868 assign_cell.hlsl
65.503µs: cmdbussy *groups_data = 0:
9.41775ms: cmdbussy 27868 cicada_grid.hlsl
76.672µs: cmdbussy 27868 assign_cell.hlsl
103.84µs: cmdbussy *groups_data = 0:
9.440994ms: cmdbussy 27868 cicada_grid.hlsl
85.426µs: cmdbussy 27868 assign_cell.hlsl
63.39µs: cmdbussy *groups_data = 0:
9.294289ms: cmdbussy 27868 cicada_grid.hlsl
95.388µs: cmdbussy 27868 assign_cell.hlsl
117.122µs: cmdbussy *groups_data = 0:
9.44703ms: cmdbussy 27868 cicada_grid.hlsl
89.049µs: cmdbussy 27868 assign_cell.hlsl
98.406µs: cmdbussy *groups_data = 0:
9.508007ms: cmdbussy 27868 cicada_grid.hlsl
89.35µs: cmdbussy 27868 assign_cell.hlsl
88.143µs: cmdbussy *groups_data = 0:
9.3447ms: cmdbussy 27868 cicada_grid.hlsl
92.671µs: cmdbussy 27868 assign_cell.hlsl
58.863µs: cmdbussy *groups_data = 0:
9.493819ms: cmdbussy 27868 cicada_grid.hlsl
64.598µs: cmdbussy 27868 assign_cell.hlsl
111.085µs: cmdbussy *groups_data = 0:
9.401752ms: cmdbussy 27868 cicada_grid.hlsl
62.787µs: cmdbussy 27868 assign_cell.hlsl
69.126µs: cmdbussy *groups_data = 0:
9.373075ms: cmdbussy 27868 cicada_grid.hlsl
76.975µs: cmdbussy 27868 assign_cell.hlsl
50.109µs: cmdbussy *groups_data = 0:
9.471784ms: cmdbussy 27868 cicada_grid.hlsl
59.768µs: cmdbussy 27868 assign_cell.hlsl
50.712µs: cmdbussy *groups_data = 0:
9.415939ms: cmdbussy 27868 cicada_grid.hlsl
62.787µs: cmdbussy 27868 assign_cell.hlsl
57.957µs: cmdbussy *groups_data = 0:
9.324173ms: cmdbussy 27868 cicada_grid.hlsl
79.691µs: cmdbussy 27868 assign_cell.hlsl
62.183µs: cmdbussy *groups_data = 0:
9.378207ms: cmdbussy 27868 cicada_grid.hlsl
86.333µs: cmdbussy 27868 assign_cell.hlsl
57.353µs: cmdbussy *groups_data = 0:
9.423787ms: cmdbussy 27868 cicada_grid.hlsl
54.939µs: cmdbussy 27868 assign_cell.hlsl
62.183µs: cmdbussy *groups_data = 0:
9.584075ms: cmdbussy 27868 cicada_grid.hlsl
74.56µs: cmdbussy 27868 assign_cell.hlsl
91.162µs: cmdbussy *groups_data = 0:
9.444314ms: cmdbussy 27868 cicada_grid.hlsl
92.672µs: cmdbussy 27868 assign_cell.hlsl
82.408µs: cmdbussy *groups_data = 0:
9.427108ms: cmdbussy 27868 cicada_grid.hlsl
62.183µs: cmdbussy 27868 assign_cell.hlsl
54.033µs: cmdbussy *groups_data = 0:
9.372471ms: cmdbussy 27868 cicada_grid.hlsl
71.843µs: cmdbussy 27868 assign_cell.hlsl
61.278µs: cmdbussy *groups_data = 0:
9.456086ms: cmdbussy 27868 cicada_grid.hlsl
86.03µs: cmdbussy 27868 assign_cell.hlsl
64.296µs: cmdbussy *groups_data = 0:
9.291874ms: cmdbussy 27868 cicada_grid.hlsl
70.334µs: cmdbussy 27868 assign_cell.hlsl
110.783µs: cmdbussy *groups_data = 0:
9.365226ms: cmdbussy 27868 cicada_grid.hlsl
100.821µs: cmdbussy 27868 assign_cell.hlsl
59.165µs: cmdbussy *groups_data = 0:
9.609733ms: cmdbussy 27868 cicada_grid.hlsl
89.653µs: cmdbussy 27868 assign_cell.hlsl
64.9µs: cmdbussy *groups_data = 0:
10.499317ms: cmdbussy 27868 cicada_grid.hlsl
59.467µs: cmdbussy 27868 assign_cell.hlsl
61.58µs: cmdbussy *groups_data = 0:
9.35134ms: cmdbussy 27868 cicada_grid.hlsl
80.597µs: cmdbussy 27868 assign_cell.hlsl
89.955µs: cmdbussy *groups_data = 0:
9.358283ms: cmdbussy 27868 cicada_grid.hlsl
83.313µs: cmdbussy 27868 assign_cell.hlsl
90.86µs: cmdbussy *groups_data = 0:
9.383036ms: cmdbussy 27868 cicada_grid.hlsl
64.598µs: cmdbussy 27868 assign_cell.hlsl
60.07µs: cmdbussy *groups_data = 0:
9.488688ms: cmdbussy 27868 cicada_grid.hlsl
83.313µs: cmdbussy 27868 assign_cell.hlsl
72.446µs: cmdbussy *groups_data = 0:
9.404468ms: cmdbussy 27868 cicada_grid.hlsl
64.598µs: cmdbussy 27868 assign_cell.hlsl
74.56µs: cmdbussy *groups_data = 0:
9.429824ms: cmdbussy 27868 cicada_grid.hlsl
459.734µs: cmdbussy 27868 assign_cell.hlsl
83.615µs: cmdbussy *groups_data = 0:
9.608526ms: cmdbussy 27868 cicada_grid.hlsl
64.297µs: cmdbussy 27868 assign_cell.hlsl
51.014µs: cmdbussy *groups_data = 0:
9.381225ms: cmdbussy 27868 cicada_grid.hlsl
73.05µs: cmdbussy 27868 assign_cell.hlsl
79.993µs: cmdbussy *groups_data = 0:
9.429523ms: cmdbussy 27868 cicada_grid.hlsl
92.067µs: cmdbussy 27868 assign_cell.hlsl
51.92µs: cmdbussy *groups_data = 0:
9.505894ms: cmdbussy 27868 cicada_grid.hlsl
63.692µs: cmdbussy 27868 assign_cell.hlsl
64.296µs: cmdbussy *groups_data = 0:
9.406883ms: cmdbussy 27868 cicada_grid.hlsl
75.164µs: cmdbussy 27868 assign_cell.hlsl
57.354µs: cmdbussy *groups_data = 0:
9.506195ms: cmdbussy 27868 cicada_grid.hlsl
67.919µs: cmdbussy 27868 assign_cell.hlsl
53.731µs: cmdbussy *groups_data = 0:
9.403261ms: cmdbussy 27868 cicada_grid.hlsl
59.467µs: cmdbussy 27868 assign_cell.hlsl
69.729µs: cmdbussy *groups_data = 0:
9.465444ms: cmdbussy 27868 cicada_grid.hlsl
79.692µs: cmdbussy 27868 assign_cell.hlsl
77.578µs: cmdbussy *groups_data = 0:
9.384243ms: cmdbussy 27868 cicada_grid.hlsl
74.862µs: cmdbussy 27868 assign_cell.hlsl
71.541µs: cmdbussy *groups_data = 0:
9.347417ms: cmdbussy 27868 cicada_grid.hlsl
70.333µs: cmdbussy 27868 assign_cell.hlsl
69.126µs: cmdbussy *groups_data = 0:
9.336248ms: cmdbussy 27868 cicada_grid.hlsl
85.125µs: cmdbussy 27868 assign_cell.hlsl
55.241µs: cmdbussy *groups_data = 0:
9.549361ms: cmdbussy 27868 cicada_grid.hlsl
57.957µs: cmdbussy 27868 assign_cell.hlsl
53.43µs: cmdbussy *groups_data = 0:
9.479632ms: cmdbussy 27868 cicada_grid.hlsl
101.123µs: cmdbussy 27868 assign_cell.hlsl
98.105µs: cmdbussy *groups_data = 0:
9.410203ms: cmdbussy 27868 cicada_grid.hlsl
101.727µs: cmdbussy 27868 assign_cell.hlsl
65.504µs: cmdbussy *groups_data = 0:
9.425599ms: cmdbussy 27868 cicada_grid.hlsl
75.767µs: cmdbussy 27868 assign_cell.hlsl
68.22µs: cmdbussy *groups_data = 0:
9.330814ms: cmdbussy 27868 cicada_grid.hlsl
64.901µs: cmdbussy 27868 assign_cell.hlsl
76.069µs: cmdbussy *groups_data = 0:
9.494725ms: cmdbussy 27868 cicada_grid.hlsl
64.9µs: cmdbussy 27868 assign_cell.hlsl
73.955µs: cmdbussy *groups_data = 0:
9.356171ms: cmdbussy 27868 cicada_grid.hlsl
82.408µs: cmdbussy 27868 assign_cell.hlsl
63.693µs: cmdbussy *groups_data = 0:
9.406883ms: cmdbussy 27868 cicada_grid.hlsl
65.503µs: cmdbussy 27868 assign_cell.hlsl
69.73µs: cmdbussy *groups_data = 0:
9.528533ms: cmdbussy 27868 cicada_grid.hlsl
62.183µs: cmdbussy 27868 assign_cell.hlsl
59.769µs: cmdbussy *groups_data = 0:
9.473594ms: cmdbussy 27868 cicada_grid.hlsl
64.9µs: cmdbussy 27868 assign_cell.hlsl
77.276µs: cmdbussy *groups_data = 0:
9.457595ms: cmdbussy 27868 cicada_grid.hlsl
64.598µs: cmdbussy 27868 assign_cell.hlsl
56.146µs: cmdbussy *groups_data = 0:
9.444012ms: cmdbussy 27868 cicada_grid.hlsl
54.938µs: cmdbussy 27868 assign_cell.hlsl
74.862µs: cmdbussy *groups_data = 0:
9.406279ms: cmdbussy 27868 cicada_grid.hlsl
98.105µs: cmdbussy 27868 assign_cell.hlsl
71.24µs: cmdbussy *groups_data = 0:
9.446125ms: cmdbussy 27868 cicada_grid.hlsl
65.504µs: cmdbussy 27868 assign_cell.hlsl
94.18µs: cmdbussy *groups_data = 0:
9.322362ms: cmdbussy 27868 cicada_grid.hlsl
124.97µs: cmdbussy 27868 assign_cell.hlsl
62.485µs: cmdbussy *groups_data = 0:
9.409599ms: cmdbussy 27868 cicada_grid.hlsl
71.541µs: cmdbussy 27868 assign_cell.hlsl
64.296µs: cmdbussy *groups_data = 0:
9.471783ms: cmdbussy 27868 cicada_grid.hlsl
138.253µs: cmdbussy 27868 assign_cell.hlsl
67.013µs: cmdbussy *groups_data = 0:
9.456992ms: cmdbussy 27868 cicada_grid.hlsl
73.955µs: cmdbussy 27868 assign_cell.hlsl
118.933µs: cmdbussy *groups_data = 0:
9.418957ms: cmdbussy 27868 cicada_grid.hlsl
75.164µs: cmdbussy 27868 assign_cell.hlsl
83.917µs: cmdbussy *groups_data = 0:
9.430126ms: cmdbussy 27868 cicada_grid.hlsl
107.462µs: cmdbussy 27868 assign_cell.hlsl
95.388µs: cmdbussy *groups_data = 0:
9.693047ms: cmdbussy 27868 cicada_grid.hlsl
117.424µs: cmdbussy 27868 assign_cell.hlsl
60.674µs: cmdbussy *groups_data = 0:
9.540003ms: cmdbussy 27868 cicada_grid.hlsl
95.69µs: cmdbussy 27868 assign_cell.hlsl
58.259µs: cmdbussy *groups_data = 0:
9.465142ms: cmdbussy 27868 cicada_grid.hlsl
79.691µs: cmdbussy 84860 assign_cell.hlsl
59.165µs: cmdbussy *groups_data = 0:
64.424607ms: cmdbussy 84860 cicada_grid.hlsl
83.012µs: cmdbussy 84860 assign_cell.hlsl
77.578µs: cmdbussy *groups_data = 0:
64.503694ms: cmdbussy 84860 cicada_grid.hlsl
67.013µs: cmdbussy 84860 assign_cell.hlsl
60.372µs: cmdbussy *groups_data = 0:
64.476225ms: cmdbussy 84860 cicada_grid.hlsl
69.73µs: cmdbussy 84860 assign_cell.hlsl
56.448µs: cmdbussy *groups_data = 0:
64.507619ms: cmdbussy 84860 cicada_grid.hlsl
131.007µs: cmdbussy 84860 assign_cell.hlsl
84.521µs: cmdbussy *groups_data = 0:
64.622929ms: cmdbussy 84860 cicada_grid.hlsl
70.937µs: cmdbussy 84860 assign_cell.hlsl
55.24µs: cmdbussy *groups_data = 0:
64.5046ms: cmdbussy 84860 cicada_grid.hlsl
68.22µs: cmdbussy 84860 assign_cell.hlsl
52.221µs: cmdbussy *groups_data = 0:
64.564973ms: cmdbussy 84860 cicada_grid.hlsl
58.259µs: cmdbussy 84860 assign_cell.hlsl
57.354µs: cmdbussy *groups_data = 0:
64.58248ms: cmdbussy 84860 cicada_grid.hlsl
71.843µs: cmdbussy 84860 assign_cell.hlsl
91.766µs: cmdbussy *groups_data = 0:
64.58731ms: cmdbussy 84860 cicada_grid.hlsl
64.599µs: cmdbussy 84860 assign_cell.hlsl
56.448µs: cmdbussy *groups_data = 0:
64.658247ms: cmdbussy 84860 cicada_grid.hlsl
65.504µs: cmdbussy 84860 assign_cell.hlsl
57.354µs: cmdbussy *groups_data = 0:
64.549275ms: cmdbussy 84860 cicada_grid.hlsl
88.747µs: cmdbussy 84860 assign_cell.hlsl
57.957µs: cmdbussy *groups_data = 0:
64.475621ms: cmdbussy 84860 cicada_grid.hlsl
68.824µs: cmdbussy 84860 assign_cell.hlsl
96.294µs: cmdbussy *groups_data = 0:
64.592743ms: cmdbussy 84860 cicada_grid.hlsl
66.41µs: cmdbussy 84860 assign_cell.hlsl
97.199µs: cmdbussy *groups_data = 0:
64.60029ms: cmdbussy 84860 cicada_grid.hlsl
67.013µs: cmdbussy 84860 assign_cell.hlsl
88.144µs: cmdbussy *groups_data = 0:
64.607233ms: cmdbussy 84860 cicada_grid.hlsl
70.032µs: cmdbussy 84860 assign_cell.hlsl
54.033µs: cmdbussy *groups_data = 0:
64.635305ms: cmdbussy 84860 cicada_grid.hlsl
92.369µs: cmdbussy 84860 assign_cell.hlsl
73.654µs: cmdbussy *groups_data = 0:
64.529956ms: cmdbussy 84860 cicada_grid.hlsl
95.388µs: cmdbussy 84860 assign_cell.hlsl
73.955µs: cmdbussy *groups_data = 0:
64.617495ms: cmdbussy 84860 cicada_grid.hlsl
90.86µs: cmdbussy 84860 assign_cell.hlsl
79.993µs: cmdbussy *groups_data = 0:
64.594554ms: cmdbussy 84860 cicada_grid.hlsl
84.219µs: cmdbussy 84860 assign_cell.hlsl
59.165µs: cmdbussy *groups_data = 0:
64.614477ms: cmdbussy 84860 cicada_grid.hlsl
64.9µs: cmdbussy 84860 assign_cell.hlsl
70.635µs: cmdbussy *groups_data = 0:
64.623231ms: cmdbussy 84860 cicada_grid.hlsl
81.2µs: cmdbussy 84860 assign_cell.hlsl
73.051µs: cmdbussy *groups_data = 0:
64.538408ms: cmdbussy 84860 cicada_grid.hlsl
117.424µs: cmdbussy 84860 assign_cell.hlsl
101.124µs: cmdbussy *groups_data = 0:
64.681189ms: cmdbussy 84860 cicada_grid.hlsl
70.032µs: cmdbussy 84860 assign_cell.hlsl
59.467µs: cmdbussy *groups_data = 0:
64.609647ms: cmdbussy 84860 cicada_grid.hlsl
72.748µs: cmdbussy 84860 assign_cell.hlsl
57.052µs: cmdbussy *groups_data = 0:
64.38295ms: cmdbussy 84860 cicada_grid.hlsl
75.163µs: cmdbussy 84860 assign_cell.hlsl
57.957µs: cmdbussy *groups_data = 0:
64.404684ms: cmdbussy 84860 cicada_grid.hlsl
71.239µs: cmdbussy 84860 assign_cell.hlsl
54.637µs: cmdbussy *groups_data = 0:
64.443322ms: cmdbussy 84860 cicada_grid.hlsl
82.408µs: cmdbussy 84860 assign_cell.hlsl
57.656µs: cmdbussy *groups_data = 0:
64.919054ms: cmdbussy 84860 cicada_grid.hlsl
98.406µs: cmdbussy 84860 assign_cell.hlsl
91.464µs: cmdbussy *groups_data = 0:
64.262507ms: cmdbussy 84860 cicada_grid.hlsl
84.521µs: cmdbussy 84860 assign_cell.hlsl
63.089µs: cmdbussy *groups_data = 0:
64.651003ms: cmdbussy 84860 cicada_grid.hlsl
68.522µs: cmdbussy 84860 assign_cell.hlsl
52.524µs: cmdbussy *groups_data = 0:
64.5372ms: cmdbussy 84860 cicada_grid.hlsl
70.333µs: cmdbussy 84860 assign_cell.hlsl
63.391µs: cmdbussy *groups_data = 0:
64.485583ms: cmdbussy 84860 cicada_grid.hlsl
67.315µs: cmdbussy 84860 assign_cell.hlsl
51.316µs: cmdbussy *groups_data = 0:
64.395628ms: cmdbussy 84860 cicada_grid.hlsl
70.937µs: cmdbussy 84860 assign_cell.hlsl
54.335µs: cmdbussy *groups_data = 0:
64.692659ms: cmdbussy 84860 cicada_grid.hlsl
72.144µs: cmdbussy 84860 assign_cell.hlsl
51.618µs: cmdbussy *groups_data = 0:
64.47532ms: cmdbussy 84860 cicada_grid.hlsl
72.749µs: cmdbussy 84860 assign_cell.hlsl
57.957µs: cmdbussy *groups_data = 0:
64.577952ms: cmdbussy 84860 cicada_grid.hlsl
57.656µs: cmdbussy 84860 assign_cell.hlsl
45.279µs: cmdbussy *groups_data = 0:
64.449964ms: cmdbussy 84860 cicada_grid.hlsl
94.181µs: cmdbussy 84860 assign_cell.hlsl
73.352µs: cmdbussy *groups_data = 0:
64.702017ms: cmdbussy 84860 cicada_grid.hlsl
80.597µs: cmdbussy 84860 assign_cell.hlsl
84.219µs: cmdbussy *groups_data = 0:
64.66851ms: cmdbussy 84860 cicada_grid.hlsl
112.594µs: cmdbussy 84860 assign_cell.hlsl
68.523µs: cmdbussy *groups_data = 0:
64.60512ms: cmdbussy 84860 cicada_grid.hlsl
79.389µs: cmdbussy 84860 assign_cell.hlsl
77.88µs: cmdbussy *groups_data = 0:
64.395628ms: cmdbussy 84860 cicada_grid.hlsl
94.483µs: cmdbussy 84860 assign_cell.hlsl
59.467µs: cmdbussy *groups_data = 0:
64.652209ms: cmdbussy 84860 cicada_grid.hlsl
62.485µs: cmdbussy 84860 assign_cell.hlsl
51.317µs: cmdbussy *groups_data = 0:
64.766615ms: cmdbussy 84860 cicada_grid.hlsl
73.654µs: cmdbussy 84860 assign_cell.hlsl
77.88µs: cmdbussy *groups_data = 0:
64.625344ms: cmdbussy 84860 cicada_grid.hlsl
110.783µs: cmdbussy 84860 assign_cell.hlsl
63.089µs: cmdbussy *groups_data = 0:
64.663379ms: cmdbussy 84860 cicada_grid.hlsl
64.9µs: cmdbussy 84860 assign_cell.hlsl
53.732µs: cmdbussy *groups_data = 0:
64.54837ms: cmdbussy 84860 cicada_grid.hlsl
85.124µs: cmdbussy 84860 assign_cell.hlsl
68.22µs: cmdbussy *groups_data = 0:
64.689641ms: cmdbussy 84860 cicada_grid.hlsl
97.199µs: cmdbussy 84860 assign_cell.hlsl
83.011µs: cmdbussy *groups_data = 0:
64.674849ms: cmdbussy 84860 cicada_grid.hlsl
69.126µs: cmdbussy 84860 assign_cell.hlsl
60.976µs: cmdbussy *groups_data = 0:
64.672132ms: cmdbussy 84860 cicada_grid.hlsl
72.447µs: cmdbussy 84860 assign_cell.hlsl
64.598µs: cmdbussy *groups_data = 0:
64.534484ms: cmdbussy 84860 cicada_grid.hlsl
66.711µs: cmdbussy 84860 assign_cell.hlsl
48.298µs: cmdbussy *groups_data = 0:
64.739749ms: cmdbussy 84860 cicada_grid.hlsl
93.879µs: cmdbussy 84860 assign_cell.hlsl
79.39µs: cmdbussy *groups_data = 0:
64.555615ms: cmdbussy 84860 cicada_grid.hlsl
92.671µs: cmdbussy 84860 assign_cell.hlsl
78.785µs: cmdbussy *groups_data = 0:
64.546559ms: cmdbussy 84860 cicada_grid.hlsl
88.747µs: cmdbussy 84860 assign_cell.hlsl
76.672µs: cmdbussy *groups_data = 0:
64.610855ms: cmdbussy 84860 cicada_grid.hlsl
91.464µs: cmdbussy 84860 assign_cell.hlsl
57.655µs: cmdbussy *groups_data = 0:
64.644059ms: cmdbussy 84860 cicada_grid.hlsl
65.504µs: cmdbussy 84860 assign_cell.hlsl
57.052µs: cmdbussy *groups_data = 0:
64.455397ms: cmdbussy 84860 cicada_grid.hlsl
108.971µs: cmdbussy 84860 assign_cell.hlsl
81.804µs: cmdbussy *groups_data = 0:
64.678773ms: cmdbussy 84860 cicada_grid.hlsl
86.634µs: cmdbussy 84860 assign_cell.hlsl
54.335µs: cmdbussy *groups_data = 0:
64.823063ms: cmdbussy 84860 cicada_grid.hlsl
97.803µs: cmdbussy 84860 assign_cell.hlsl
91.162µs: cmdbussy *groups_data = 0:
64.401061ms: cmdbussy 84860 cicada_grid.hlsl
99.312µs: cmdbussy 84860 assign_cell.hlsl
73.654µs: cmdbussy *groups_data = 0:
64.861701ms: cmdbussy 84860 cicada_grid.hlsl
72.447µs: cmdbussy 84860 assign_cell.hlsl
57.656µs: cmdbussy *groups_data = 0:
64.652814ms: cmdbussy 84860 cicada_grid.hlsl
94.482µs: cmdbussy 84860 assign_cell.hlsl
62.183µs: cmdbussy *groups_data = 0:
64.290279ms: cmdbussy 84860 cicada_grid.hlsl
71.239µs: cmdbussy 84860 assign_cell.hlsl
72.145µs: cmdbussy *groups_data = 0:
64.63923ms: cmdbussy 84860 cicada_grid.hlsl
62.485µs: cmdbussy 84860 assign_cell.hlsl
47.392µs: cmdbussy *groups_data = 0:
64.617797ms: cmdbussy 84860 cicada_grid.hlsl
67.919µs: cmdbussy 84860 assign_cell.hlsl
73.05µs: cmdbussy *groups_data = 0:
64.758766ms: cmdbussy 84860 cicada_grid.hlsl
216.434µs: cmdbussy 84860 assign_cell.hlsl
60.976µs: cmdbussy *groups_data = 0:
64.568292ms: cmdbussy 84860 cicada_grid.hlsl
63.089µs: cmdbussy 84860 assign_cell.hlsl
50.108µs: cmdbussy *groups_data = 0:
64.628061ms: cmdbussy 84860 cicada_grid.hlsl
104.444µs: cmdbussy 84860 assign_cell.hlsl
501.088µs: cmdbussy *groups_data = 0:
64.668208ms: cmdbussy 84860 cicada_grid.hlsl
90.256µs: cmdbussy 84860 assign_cell.hlsl
60.372µs: cmdbussy *groups_data = 0:
64.437285ms: cmdbussy 84860 cicada_grid.hlsl
71.24µs: cmdbussy 84860 assign_cell.hlsl
60.976µs: cmdbussy *groups_data = 0:
64.474414ms: cmdbussy 84860 cicada_grid.hlsl
68.824µs: cmdbussy 84860 assign_cell.hlsl
58.259µs: cmdbussy *groups_data = 0:
64.594252ms: cmdbussy 84860 cicada_grid.hlsl
65.504µs: cmdbussy 84860 assign_cell.hlsl
98.708µs: cmdbussy *groups_data = 0:
64.606025ms: cmdbussy 84860 cicada_grid.hlsl
75.465µs: cmdbussy 84860 assign_cell.hlsl
59.768µs: cmdbussy *groups_data = 0:
64.802838ms: cmdbussy 84860 cicada_grid.hlsl
69.428µs: cmdbussy 84860 assign_cell.hlsl
75.164µs: cmdbussy *groups_data = 0:
64.839062ms: cmdbussy 84860 cicada_grid.hlsl
68.824µs: cmdbussy 84860 assign_cell.hlsl
61.278µs: cmdbussy *groups_data = 0:
64.654625ms: cmdbussy 84860 cicada_grid.hlsl
87.238µs: cmdbussy 242931 assign_cell.hlsl
63.391µs: cmdbussy *groups_data = 0:
181.666072ms: cmdbussy 242931 cicada_grid.hlsl
131.913µs: cmdbussy 242931 assign_cell.hlsl
128.894µs: cmdbussy *groups_data = 0:
181.44843ms: cmdbussy 242931 cicada_grid.hlsl
95.69µs: cmdbussy 242931 assign_cell.hlsl
72.145µs: cmdbussy *groups_data = 0:
181.780175ms: cmdbussy 242931 cicada_grid.hlsl
143.685µs: cmdbussy 242931 assign_cell.hlsl
121.348µs: cmdbussy *groups_data = 0:
181.841754ms: cmdbussy 242931 cicada_grid.hlsl
122.857µs: cmdbussy 242931 assign_cell.hlsl
73.352µs: cmdbussy *groups_data = 0:
181.626527ms: cmdbussy 242931 cicada_grid.hlsl
98.709µs: cmdbussy 242931 assign_cell.hlsl
80.597µs: cmdbussy *groups_data = 0:
183.030783ms: cmdbussy 242931 cicada_grid.hlsl
87.238µs: cmdbussy 242931 assign_cell.hlsl
77.578µs: cmdbussy *groups_data = 0:
181.997212ms: cmdbussy 242931 cicada_grid.hlsl
96.596µs: cmdbussy 242931 assign_cell.hlsl
73.654µs: cmdbussy *groups_data = 0:
181.349722ms: cmdbussy 242931 cicada_grid.hlsl
109.273µs: cmdbussy 242931 assign_cell.hlsl
94.181µs: cmdbussy *groups_data = 0:
182.065433ms: cmdbussy 242931 cicada_grid.hlsl
96.897µs: cmdbussy 242931 assign_cell.hlsl
60.372µs: cmdbussy *groups_data = 0:
182.178329ms: cmdbussy 242931 cicada_grid.hlsl
96.897µs: cmdbussy 242931 assign_cell.hlsl
95.388µs: cmdbussy *groups_data = 0:
181.653997ms: cmdbussy 242931 cicada_grid.hlsl
131.31µs: cmdbussy 242931 assign_cell.hlsl
75.767µs: cmdbussy *groups_data = 0:
182.568936ms: cmdbussy 242931 cicada_grid.hlsl
85.426µs: cmdbussy 242931 assign_cell.hlsl
115.009µs: cmdbussy *groups_data = 0:
182.18346ms: cmdbussy 242931 cicada_grid.hlsl
125.876µs: cmdbussy 242931 assign_cell.hlsl
103.84µs: cmdbussy *groups_data = 0:
182.252586ms: cmdbussy 242931 cicada_grid.hlsl
117.122µs: cmdbussy 242931 assign_cell.hlsl
116.82µs: cmdbussy *groups_data = 0:
181.877676ms: cmdbussy 242931 cicada_grid.hlsl
121.65µs: cmdbussy 242931 assign_cell.hlsl
132.215µs: cmdbussy *groups_data = 0:
181.778364ms: cmdbussy 242931 cicada_grid.hlsl
163.609µs: cmdbussy 242931 assign_cell.hlsl
95.086µs: cmdbussy *groups_data = 0:
182.099242ms: cmdbussy 242931 cicada_grid.hlsl
104.745µs: cmdbussy 242931 assign_cell.hlsl
118.027µs: cmdbussy *groups_data = 0:
181.403453ms: cmdbussy 242931 cicada_grid.hlsl
114.707µs: cmdbussy 242931 assign_cell.hlsl
81.805µs: cmdbussy *groups_data = 0:
181.953141ms: cmdbussy 242931 cicada_grid.hlsl
103.84µs: cmdbussy 242931 assign_cell.hlsl
104.443µs: cmdbussy *groups_data = 0:
182.299375ms: cmdbussy 242931 cicada_grid.hlsl
96.293µs: cmdbussy 242931 assign_cell.hlsl
76.069µs: cmdbussy *groups_data = 0:
181.940161ms: cmdbussy 242931 cicada_grid.hlsl
146.1µs: cmdbussy 242931 assign_cell.hlsl
145.497µs: cmdbussy *groups_data = 0:
182.116145ms: cmdbussy 242931 cicada_grid.hlsl
102.934µs: cmdbussy 242931 assign_cell.hlsl
78.483µs: cmdbussy *groups_data = 0:
181.615661ms: cmdbussy 242931 cicada_grid.hlsl
129.196µs: cmdbussy 242931 assign_cell.hlsl
76.974µs: cmdbussy *groups_data = 0:
181.746366ms: cmdbussy 242931 cicada_grid.hlsl
176.589µs: cmdbussy 242931 assign_cell.hlsl
85.125µs: cmdbussy *groups_data = 0:
181.283614ms: cmdbussy 242931 cicada_grid.hlsl
92.672µs: cmdbussy 242931 assign_cell.hlsl
71.541µs: cmdbussy *groups_data = 0:
181.241656ms: cmdbussy 242931 cicada_grid.hlsl
82.709µs: cmdbussy 242931 assign_cell.hlsl
59.466µs: cmdbussy *groups_data = 0:
181.878581ms: cmdbussy 242931 cicada_grid.hlsl
103.539µs: cmdbussy 242931 assign_cell.hlsl
60.674µs: cmdbussy *groups_data = 0:
182.355824ms: cmdbussy 242931 cicada_grid.hlsl
111.99µs: cmdbussy 242931 assign_cell.hlsl
60.976µs: cmdbussy *groups_data = 0:
181.842962ms: cmdbussy 242931 cicada_grid.hlsl
130.404µs: cmdbussy 242931 assign_cell.hlsl
109.878µs: cmdbussy *groups_data = 0:
181.994798ms: cmdbussy 242931 cicada_grid.hlsl
132.517µs: cmdbussy 242931 assign_cell.hlsl
91.162µs: cmdbussy *groups_data = 0:
181.628641ms: cmdbussy 242931 cicada_grid.hlsl
105.651µs: cmdbussy 242931 assign_cell.hlsl
84.521µs: cmdbussy *groups_data = 0:
181.864394ms: cmdbussy 242931 cicada_grid.hlsl
103.84µs: cmdbussy 328666 assign_cell.hlsl
91.464µs: cmdbussy *groups_data = 0:
323.403225ms: cmdbussy 328666 cicada_grid.hlsl
113.802µs: cmdbussy 328666 assign_cell.hlsl
100.519µs: cmdbussy *groups_data = 0:
322.60903ms: cmdbussy 328666 cicada_grid.hlsl
115.915µs: cmdbussy 328666 assign_cell.hlsl
75.767µs: cmdbussy *groups_data = 0:
324.189572ms: cmdbussy 328666 cicada_grid.hlsl
86.03µs: cmdbussy 328666 assign_cell.hlsl
79.088µs: cmdbussy *groups_data = 0:
322.567071ms: cmdbussy 328666 cicada_grid.hlsl
129.8µs: cmdbussy 328666 assign_cell.hlsl
96.294µs: cmdbussy *groups_data = 0:
322.776563ms: cmdbussy 328666 cicada_grid.hlsl
104.142µs: cmdbussy 328666 assign_cell.hlsl
85.426µs: cmdbussy *groups_data = 0:
322.604803ms: cmdbussy 328666 cicada_grid.hlsl
160.288µs: cmdbussy 328666 assign_cell.hlsl
129.499µs: cmdbussy *groups_data = 0:
322.934436ms: cmdbussy 328666 cicada_grid.hlsl
150.628µs: cmdbussy 328666 assign_cell.hlsl
86.634µs: cmdbussy *groups_data = 0:
322.459608ms: cmdbussy 328666 cicada_grid.hlsl
124.065µs: cmdbussy 328666 assign_cell.hlsl
102.935µs: cmdbussy *groups_data = 0:
322.541715ms: cmdbussy 328666 cicada_grid.hlsl
79.691µs: cmdbussy 328666 assign_cell.hlsl
57.051µs: cmdbussy *groups_data = 0:
322.441497ms: cmdbussy 328666 cicada_grid.hlsl
98.105µs: cmdbussy 328666 assign_cell.hlsl
52.524µs: cmdbussy *groups_data = 0:
323.023786ms: cmdbussy 328666 cicada_grid.hlsl
99.916µs: cmdbussy 328666 assign_cell.hlsl
89.048µs: cmdbussy *groups_data = 0:
322.3609ms: cmdbussy 328666 cicada_grid.hlsl
105.953µs: cmdbussy 328666 assign_cell.hlsl
93.577µs: cmdbussy *groups_data = 0:
322.734905ms: cmdbussy 328666 cicada_grid.hlsl
118.933µs: cmdbussy 328666 assign_cell.hlsl
100.821µs: cmdbussy *groups_data = 0:
322.413424ms: cmdbussy 328666 cicada_grid.hlsl
131.913µs: cmdbussy 328666 assign_cell.hlsl
106.255µs: cmdbussy *groups_data = 0:
322.295699ms: cmdbussy 328666 cicada_grid.hlsl
98.406µs: cmdbussy 328666 assign_cell.hlsl
90.256µs: cmdbussy *groups_data = 0:
322.676949ms: cmdbussy 328666 cicada_grid.hlsl
86.634µs: cmdbussy 328666 assign_cell.hlsl
61.579µs: cmdbussy *groups_data = 0:
323.098346ms: cmdbussy 328666 cicada_grid.hlsl
111.386µs: cmdbussy 328666 assign_cell.hlsl
64.598µs: cmdbussy *groups_data = 0:
322.775657ms: cmdbussy 328666 cicada_grid.hlsl
111.688µs: cmdbussy 328666 assign_cell.hlsl
80.295µs: cmdbussy *groups_data = 0:
322.475607ms: cmdbussy 328666 cicada_grid.hlsl
104.443µs: cmdbussy 328666 assign_cell.hlsl
61.278µs: cmdbussy *groups_data = 0:
322.859876ms: cmdbussy 328666 cicada_grid.hlsl
125.272µs: cmdbussy 328666 assign_cell.hlsl
92.671µs: cmdbussy *groups_data = 0:
322.968244ms: cmdbussy 328666 cicada_grid.hlsl
168.74µs: cmdbussy 328666 assign_cell.hlsl
63.39µs: cmdbussy *groups_data = 0:
323.453937ms: cmdbussy 328666 cicada_grid.hlsl
182.022µs: cmdbussy 1103347 assign_cell.hlsl
77.277µs: cmdbussy *groups_data = 0:
1.397360591s: cmdbussy 1103347 cicada_grid.hlsl
161.194µs: cmdbussy 1103347 assign_cell.hlsl
78.484µs: cmdbussy *groups_data = 0:
1.395616742s: cmdbussy 1103347 cicada_grid.hlsl
159.383µs: cmdbussy 1103347 assign_cell.hlsl
63.995µs: cmdbussy *groups_data = 0:
1.396635823s: cmdbussy 1103347 cicada_grid.hlsl
142.78µs: cmdbussy 1103347 assign_cell.hlsl
72.748µs: cmdbussy *groups_data = 0:
1.395326352s: cmdbussy 1103347 cicada_grid.hlsl
146.402µs: cmdbussy 1103347 assign_cell.hlsl
79.088µs: cmdbussy *groups_data = 0:
1.396816638s: cmdbussy 1103347 cicada_grid.hlsl
165.721µs: cmdbussy 1103347 assign_cell.hlsl
101.425µs: cmdbussy *groups_data = 0:
1.397281503s: cmdbussy 1103347 cicada_grid.hlsl
161.798µs: cmdbussy 1103347 assign_cell.hlsl
88.144µs: cmdbussy *groups_data = 0:
1.396038743s: cmdbussy 1103347 cicada_grid.hlsl
136.139µs: cmdbussy 1103347 assign_cell.hlsl
118.329µs: cmdbussy *groups_data = 0:
1.395507166s: cmdbussy 1103347 cicada_grid.hlsl
156.062µs: cmdbussy 1103347 assign_cell.hlsl
108.972µs: cmdbussy *groups_data = 0:
1.395069771s: cmdbussy 1103347 cicada_grid.hlsl
Benchmark 1: cmdbussy 84860 assign_cell.hlsl
 Time (mean ± σ): 81.361493 µs ± 21.770075 µs
 Range (min … max): 57.656000 µs … 216.434000 µs 75 runs
Benchmark 3: cmdbussy 16755 assign_cell.hlsl
 Time (mean ± σ): 96.487026 µs ± 22.839193 µs
 Range (min … max): 55.240000 µs … 155.156000 µs 78 runs
Benchmark 4: cmdbussy 242931 assign_cell.hlsl
 Time (mean ± σ): 113.933500 µs ± 22.368955 µs
 Range (min … max): 82.709000 µs … 176.589000 µs 32 runs
Benchmark 2: cmdbussy 27868 assign_cell.hlsl
 Time (mean ± σ): 85.979986 µs ± 48.073003 µs
 Range (min … max): 54.938000 µs … 459.734000 µs 72 runs
Benchmark 5: cmdbussy 328666 assign_cell.hlsl
 Time (mean ± σ): 114.981364 µs ± 22.419119 µs
 Range (min … max): 79.691000 µs … 168.740000 µs 22 runs
Benchmark 6: cmdbussy 1103347 assign_cell.hlsl
 Time (mean ± σ): 156.833444 µs ± 12.904706 µs
 Range (min … max): 136.139000 µs … 182.022000 µs 9 runs
Benchmark 1: cmdbussy *groups_data = 0:
 Time (mean ± σ): 79.330639 µs ± 32.674656 µs
 Range (min … max): 45.279000 µs … 501.088000 µs 288 runs
Benchmark 1: cmdbussy 16755 cicada_grid.hlsl
 Time (mean ± σ): 5.897517 ms ± 56.016805 µs
 Range (min … max): 5.772179 ms … 6.050193 ms 78 runs
Benchmark 3: cmdbussy 84860 cicada_grid.hlsl
 Time (mean ± σ): 64.588360 ms ± 123.469577 µs
 Range (min … max): 64.262507 ms … 64.919054 ms 75 runs
Benchmark 4: cmdbussy 242931 cicada_grid.hlsl
 Time (mean ± σ): 181.892608 ms ± 374.300702 µs
 Range (min … max): 181.241656 ms … 183.030783 ms 32 runs
Benchmark 2: cmdbussy 27868 cicada_grid.hlsl
 Time (mean ± σ): 9.441346 ms ± 147.232393 µs
 Range (min … max): 9.291874 ms … 10.499317 ms 72 runs
Benchmark 5: cmdbussy 328666 cicada_grid.hlsl
 Time (mean ± σ): 322.802948 ms ± 430.303192 µs
 Range (min … max): 322.295699 ms … 324.189572 ms 22 runs
Benchmark 6: cmdbussy 1103347 cicada_grid.hlsl
 Time (mean ± σ): 1396.183703 ms ± 814.541803 µs
 Range (min … max): 1395.069771 ms … 1397.360591 ms 9 runs
--&gt;
&lt;p class=&quot;continued&quot;&gt;
Visiting &lt;em&gt;every&lt;/em&gt; point in [​[​Set(D)​]​] for &lt;em&gt;every&lt;/em&gt; occupied cell
(up to [​[​G^3​]​] in theory but cf. occupancy rates above; there are [​[​G^3​]​] (so, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'000'000&lt;/span&gt;), threads dispatched though),
is, expectedly, ruinous:
&lt;/p&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;assign_cell.hlsl&lt;/samp&gt; &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;96.5µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;113.9µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;115µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;156.8µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;23µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;22µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;22µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;speed-up vs previous &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-25.27%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;49.44%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;58.17%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;78.73%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;q&gt;grouping&lt;/q&gt; + &lt;q&gt;copying&lt;/q&gt; + memcpy&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.898ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;181.893ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;322.803ms&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1396.184ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;56µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;374µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;430µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;815µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;speed-up vs previous &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32.91%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;math class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mi&gt;1&lt;/mi&gt;&lt;mi&gt;6.24&lt;/mi&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;math class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mi&gt;1&lt;/mi&gt;&lt;mi&gt;8.27&lt;/mi&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;×&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;math class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mi&gt;1&lt;/mi&gt;&lt;mi&gt;13.4&lt;/mi&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
Interestingly enough, the cost of uploading to system RAM actually makes up for the additional atomic in all but the smallest cases.
But everything else is eye-wateringly worser.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Also, this makes the allocation order basically random.
Functionally this is immaterial, but may be tangentially relevant later.
&lt;/p&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Even another &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40×&lt;/span&gt; speed-up wouldn't&lt;!--'--&gt; guarantee we can compute every [​[​f​]​] within the &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~8s&lt;/span&gt; driver-imposed limit.
But, each shader call could iterate [​[​t​]​], like, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10&lt;/span&gt; times.
The points that converge can be committed as the final [​[​f​]​] mapping as previous,
but the ones that don't&lt;!--'--&gt; can be saved and
&lt;/p&gt;
&lt;h2 id=&quot;oneshot&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#oneshot&quot;&gt;#&lt;/a&gt; processed piece-meal.&lt;/h2&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The first step here is getting rid of the mis-leading &lt;samp&gt;iter_limit&lt;/samp&gt; in
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/e8ac90d68fe873865fd9627b699eb4d0a275ee26/item/src/posterise_grid.kernel.hlsl.inc#L26&quot;&gt;the current shader&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_pack &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;center&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Since the amount of unconverged points decreases each iteration, the [​[​q_t​]​] points-to-process array must be compacted between iterations.
Well, it doesn't&lt;!--'--&gt; &lt;em&gt;need&lt;/em&gt; to be and a thread that just exits instantly could be spawned for it, but this sucks,
actively makes occupancy (how many GPU threads are working vs waiting) worse, and basically defeats the purpose;
this is already a bit of an issue in the current driver,
where it may take &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64&lt;/span&gt; pregnant threads where &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;63&lt;/span&gt; have few fast-to-solve points and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1&lt;/span&gt; that takes long to converge,
as long as the latter to bear an output
(this is hopefully attenuated slightly by the points being sorted by [​[​{\color{var(--r)}r\color{initial}}{\color{var(--r)}r\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--b)}b\color{initial}}{\color{var(--b)}b\color{initial}}_{16}​]​] so similar colours in similar natal situations are carried together, but.).
We can store [​[​q_t​]​]s and [​[​q_{t+10}​]​]s in alternating ranges of a big array and page-flip the input/output iterators
(this makes initialisation a memcpy from &lt;samp&gt;known_rgbs_bundle&lt;/samp&gt; as [​[​q_0​]​], which is quite nice from a point-and-woo-at-definition perspective):
&lt;/p&gt;
&lt;div class=&quot;singles continuation&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.28-current_rgbs_bundle.png&quot;&gt;&lt;img alt=&quot;Data flow diagram; known_rgbs_bundle (Set(D)) is copied to the start of current_rgbs_bundle, double the length of Set(D), and this is q_0; this then is shorter and copied to the second half of current_rgbs_bundle as q_10; this is then shorter and copied to the front half of current_rgbs_bundle again as q_20&quot; class=&quot;dark-invert&quot; src=&quot;/content/assets/blogn_t/018.28-current_rgbs_bundle.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
In the current driver, &lt;samp&gt;known_rgbs_freqs&lt;/samp&gt; is indexed by the same offset as &lt;samp&gt;known_rgbs_bundle&lt;/samp&gt;.
This is no longer possible once original-index data is lost when the state compacts,
so in this case we want to index &lt;samp&gt;known_rgbs_freqs&lt;/samp&gt; by [​[​{\color{var(--r)}r\color{initial}}{\color{var(--r)}r\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--b)}b\color{initial}}{\color{var(--b)}b\color{initial}}_{16}​]​] (like &lt;samp&gt;outputs&lt;/samp&gt;),
which is kept with the state.
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;USEONESHOT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FIND_BBOX&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;USEONESHOT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ASSIGN_CELL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;FIND_BBOX&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_COUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ASSIGN_CELL&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_DATA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_COUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/posterise_grid.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/posterise_grid.mul.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/posterise_grid_oneshot.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/posterise_grid_oneshot.mul.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/find_bbox.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/assign_cell.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_MAX_BINDING&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token attribute attr-name&quot;&gt;#[repr(C)]&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;ParamsT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;_padding1&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;i32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;current_rgbs_start&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [​[​q_t \in \texttt{current_rgbs_bundle} \circ [\texttt{current_rgbs_start}, \texttt{current_rgbs_start}+\texttt{current_rgbs_len} )​]​]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;current_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;current_rgbs_next&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [​[​q_{t+\texttt{iter_limit}} \to \texttt{current_rgbs_bundle} \circ [\texttt{current_rgbs_next}, \ldots )​]​]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;i32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;GroupDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(0)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;float3&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;outputs;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;[HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_params&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(1)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;params_t&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params;&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;[DEVICE_LOCAL &amp;amp; HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(2)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;known_rgbs_pack&gt; known_rgbs_bundle;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;[DEVICE_LOCAL &amp;amp; HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(3)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;uint&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;known_rgbs_freqs;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;[DEVICE_LOCAL &amp;amp; HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_groups_data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(4)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;uint&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;groups_data;&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;[DEVICE_LOCAL]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_current_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(5)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;float4&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;current_rgbs_bundle; [DEVICE_LOCAL]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// vk::BufferUsageFlags::STORAGE_BUFFER&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;| ::TRANSFER_SRC ⬎&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;⬐ ::TRANSFER_DST&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// was false, false&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_current_rgbs_bundle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;private_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; use_oneshot_driver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50_000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_groups_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; use_oneshot_driver &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_current_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buffer_known_rgbs_freqs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; use_oneshot_driver &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; freq_weighting &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buffer_known_rgbs_freqs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buffer_known_rgbs_bundle_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buffer_known_rgbs_bundle_map&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dest_lab&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;dest_lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; freq_weighting &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buffer_known_rgbs_freqs_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buffer_known_rgbs_freqs_map&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buffer_known_rgbs_freqs_len &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; use_oneshot_driver &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dest_freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;dest_freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// posterise_grid_oneshot.kernel.hlsl.inc or posterise_grid.kernel.hlsl.inc&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; use_oneshot_driver &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; il &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;len&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; len &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token number&quot;&gt;10_000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		          &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; len &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100_000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		          &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;!--&quot;--&gt;                   &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; first &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;orig_start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; orig_next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;                &lt;!--&quot;--&gt;known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                                &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cycle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_start &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; orig_start&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_next&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; orig_next&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iter_limit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;il&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; first &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(self.buffer_current_rgbs, self.buffer_known_rgbs, known_rgbs.len() * mem::size_of::&amp;lt;KnownRgbsPack&gt;());&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_copy_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_current_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;BufferCopy&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;					  	&lt;!--&quot;--&gt;src_offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;					  	&lt;!--&quot;--&gt;dst_offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;					  	&lt;!--&quot;--&gt;size&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;					  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;USEONESHOT&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; still_to_do &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_next &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; orig_next&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; still_to_do &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;did {}/{} ({} steps); {} left&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			         &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_len &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; still_to_do&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			         &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			         &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			         &lt;!--&quot;--&gt;still_to_do&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; still_to_do&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;first &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... output copying&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
The actual value of [​[​10​]​] is roughly tuned to dispatch shaders that don't make effectively-zero progress and also don't take &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt; &gt;8s&lt;/span&gt;
(there's&lt;!--'--&gt; inherent per-dispatch/per-writeback overhead on one side of &lt;samp&gt;-1&lt;/samp&gt; and occupancy on the other).
This is inherently slower (more indirection, more sparse) than not doing it, so only doing it when needed seems apt;
&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt; &gt;50'000&lt;!--'--&gt;&lt;/span&gt; is as good of a threshold as any.
(The corresponding
 &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/e8ac90d68fe873865fd9627b699eb4d0a275ee26/item/src/shader.h#L9&quot;&gt;&lt;samp&gt;shader.h&lt;/samp&gt;&lt;/a&gt;
 diff is trivial.)
&lt;/p&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/e8ac90d68fe873865fd9627b699eb4d0a275ee26/item/src/posterise_grid_oneshot.kernel.hlsl.inc#L43&quot;&gt;
 &lt;samp&gt;posterise_grid_oneshot.kernel.hlsl.inc&lt;/samp&gt;&lt;/a&gt;
differs little and predictably from its do-it-all counterpart:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shader.h&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;/*&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;3 */&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;KNOWN_RGBS_FREQS
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;groups_data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;          &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; current_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;current_rgbs_start &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_start&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;current_rgbs_len&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;iter_limit&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;radiussy_squared&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_min&lt;!--&quot;--&gt;           &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_range&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;grid_bothdirs&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; current_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;id &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; current_rgbs_start&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_pack &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; current_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;center&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;iter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lab_to_gridpos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_from &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_to&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GRID_SIZE &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; newcenter_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; newcenter&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gx &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gy &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gz &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; group &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;end_idx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; groups_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;INTERROGATED_LOAD

&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; interrogated_lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#if&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;BRANCHLESS_ADD&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;matched&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;							&lt;!--&quot;--&gt;FREQ_LOAD
&lt;!--&quot;--&gt;							&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; FREQ&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;							&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; FREQ &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; interrogated_lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;						&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;					&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; same &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;same&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; savein&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedAdd&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current_rgbs_next&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; savein&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;current_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;savein&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/e8ac90d68fe873865fd9627b699eb4d0a275ee26/item/src/posterise_grid_oneshot.hlsl&quot;&gt;
 &lt;samp&gt;posterise_grid_oneshot.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;KNOWN_RGBS_FREQS&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;BRANCHLESS_ADD&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;INTERROGATED_LOAD&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;interrogated_lab&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;lab&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ_LOAD&lt;/span&gt;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ&lt;/span&gt;&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;matched&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posterise_grid_oneshot.kernel.hlsl.inc&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/e8ac90d68fe873865fd9627b699eb4d0a275ee26/item/src/posterise_grid_oneshot.mul.hlsl&quot;&gt;
 &lt;samp&gt;posterise_grid_oneshot.mul.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;KNOWN_RGBS_FREQS&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;BRANCHLESS_ADD&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;INTERROGATED_LOAD&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; known_rgbs_pack interrogated &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;interrogated_lab&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;interrogated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ_LOAD&lt;/span&gt;&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;interrogated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ&lt;/span&gt;&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;&lt;span class=&quot;token expression&quot;&gt;freq&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;posterise_grid_oneshot.kernel.hlsl.inc&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
The expansion for [​[​palette​]​] is entirely unchanged:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; groups_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; matched&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
But [​[​*freq​]​] reads more data more indirectly:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; groups_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; known_rgbs_pack interrogated &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; interrogated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; matched &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;matched&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;interrogated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; interrogated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
[src\main.rs:162:27] images().swap_remove(0) = &quot;.\\00.png&quot;
1.38071ms: frequencies
16.686856ms: 16755 RGBs
353.177µs: cmdbussy
63.693µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    7,
    8,
]
73.654µs: cmdbussy
6.066191ms: grouping
2.423639ms: copied
225.188µs: cmdbussy
57.957µs: cmdbussy
44.282654ms: cmdbussy
did 8726/16755 (20 steps); 8029 left
75.41656ms: cmdbussy
140.850287ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
146.920705ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
137.099971ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
135.552029ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
135.58131ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.05672ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
124.854692ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
129.260951ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
136.774262ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
128.815707ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
139.577945ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
127.217657ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
137.62551ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
138.683531ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
144.615697ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
154.679731ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
133.111788ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
126.484135ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
135.531201ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
133.788559ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
132.613717ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.250214ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
130.764217ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
132.384303ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
138.097318ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
136.380335ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.545433ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
139.653409ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
129.067459ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
133.378632ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
126.713852ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
132.303103ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
158.022234ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
138.244626ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
134.724931ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.064569ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.233309ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
146.460367ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.846992ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
141.505325ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
135.077202ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
136.411728ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
126.965301ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
133.13654ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.308472ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
132.371022ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
134.378395ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.511926ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
127.681013ms: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
245.413µs: cmdbussy
91.766µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    7,
    8,
]
129.196µs: cmdbussy
4.785698ms: grouping
2.565816ms: copied
254.468µs: cmdbussy
89.048µs: cmdbussy
63.743005ms: cmdbussy
did 9892/16755 (20 steps); 6863 left
64.646173ms: cmdbussy
176.99025ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
139.969759ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
139.148699ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
147.697392ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
137.422056ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
148.383823ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
143.45625ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
137.054691ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
138.463475ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
137.457072ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
136.830409ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
142.843473ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
139.051499ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
144.300554ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
150.309392ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
137.737802ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
139.342795ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
141.721759ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
139.446937ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
134.657616ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
144.532685ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
143.5779ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
147.02213ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
139.815508ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
142.540103ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
140.162347ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
138.292622ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
145.942072ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
142.566063ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
148.543205ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
137.399114ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
137.304029ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
137.833794ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
147.207473ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
145.681869ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
141.548188ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
138.189084ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
150.469076ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
137.97748ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
142.090632ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
138.664515ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
138.526866ms: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
  Time (mean ± σ): 134.983231 ms ± 6.620501 ms
  Range (min … max): 124.854692 ms … 158.022234 ms 49 runs
Benchmark 2: MSC 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~325 levels
  Time (mean ± σ): 142.337439 ms ± 6.768182 ms
  Range (min … max): 134.657616 ms … 176.990250 ms 42 runs
--&gt;
&lt;!--
1.644235ms: frequencies
15.670189ms: 16755 RGBs
299.144µs: cmdbussy
61.278µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    7,
    8,
]
66.107µs: cmdbussy
5.266562ms: grouping
2.400999ms: copied
242.696µs: cmdbussy
73.352µs: cmdbussy
44.461959ms: cmdbussy
did 8726/16755 (20 steps); 8029 left
93.605776ms: cmdbussy
158.251647ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
132.867281ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
129.742721ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
134.648258ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
146.294646ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
132.501727ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
133.515979ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
140.197061ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
145.44853ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
133.040247ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
127.908616ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.49804ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
133.73845ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
139.578548ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
130.957107ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
139.557116ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
132.681033ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
136.351658ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
130.525748ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
136.165108ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
136.592543ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
140.066355ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
132.842227ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
130.820967ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
148.624104ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
130.033714ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.902534ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
133.321279ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
142.773139ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
146.95723ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
138.131428ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
127.947858ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
128.897209ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
139.759665ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
143.248871ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
139.008031ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
142.307368ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
131.862085ms: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
283.145µs: cmdbussy
150.326µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    7,
    8,
]
121.65µs: cmdbussy
4.473575ms: grouping
2.746328ms: copied
246.62µs: cmdbussy
83.616µs: cmdbussy
70.330812ms: cmdbussy
did 8726/16755 (20 steps); 8029 left
125.88132ms: cmdbussy
244.100813ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
194.008247ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
202.927928ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
194.420589ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
200.099795ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
201.879868ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
188.446163ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
203.001883ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
196.688468ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
196.82189ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
194.820253ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
195.867709ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
213.211715ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
194.773766ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
194.116012ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
214.790749ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
205.286667ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
195.647653ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
212.988037ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
204.017343ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
206.731674ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
193.979872ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
204.301695ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
210.680614ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
199.840497ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
185.946154ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
203.30797ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
195.605392ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
206.779367ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
200.869238ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
209.690511ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
203.95697ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
194.087033ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
217.339056ms: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
Benchmark 1: MSC DEGEN 16755 RGBs @ r=0.02 [yesgrid] =&gt; ~374 levels
  Time (mean ± σ): 136.593845 ms ± 6.582382 ms
  Range (min … max): 127.908616 ms … 158.251647 ms 38 runs
Benchmark 2: MSC DEGEN 16755 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~374 levels
  Time (mean ± σ): 202.383282 ms ± 10.374129 ms
  Range (min … max): 185.946154 ms … 244.100813 ms 34 runs
--&gt;
&lt;table class=&quot;perf &quot;&gt;
 &lt;caption&gt;&lt;code&gt;use_oneshot_driver = true&lt;/code&gt;&lt;/caption&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;134.983ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;142.337ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;105.45%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.6ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.8ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-15.72%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-43.17%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20.22 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-4.76%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-19.75%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13.20 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;iterations [​[​(pointsdone \operatorname{@} depth)​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; [​[​((8726 \operatorname{@} q_{20}), (8029 \operatorname{@} \infty))​]​]&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; [​[​((9892 \operatorname{@} q_{20}), (6863 \operatorname{@} \infty))​]​]&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;136.594ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;202.383ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;148.16%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.6ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.4ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-18.34%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-39.76%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;22.71 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-4.29%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-33.27%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32.21 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;iterations [​[​(pointsdone \operatorname{@} depth)​]​]&lt;/th&gt; &lt;td colspan=2 style=&quot;text-align: center;&quot;&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt; [​[​((8726 \operatorname{@} q_{20}), (8029 \operatorname{@} \infty))​]​]&lt;/td&gt; &lt;td&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;#grid-impl&quot;&gt;Previous&lt;/a&gt; and &lt;code&gt;use_oneshot_driver = known_rgbs.len() &gt; 50_000&lt;/code&gt; are equivalent,
so this measures the minimum cost of the piece-meal shader.
As ever, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt; is equivalent except for measuring the relative cost of [​[​*freq​]​]:
the indirections really show — this is the first time that [​[​*freq​]​] is &lt;em&gt;slower&lt;/em&gt; than [​[​palette​]​] in the non-degenerate case.
&lt;/p&gt;
&lt;p class=&quot;indented continuation&quot;&gt;
Becoming slower than base-line seems wrong some-how (largely on account of &quot;how would it even be possible&quot;).
&lt;/p&gt;
&lt;!--
[src\main.rs:188:27] possible.swap_remove(i as usize) = &quot;.\\0image.png&quot;
5.873906ms: frequencies
16.107284ms: 27868 RGBs
330.537µs: cmdbussy
108.971µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    11,
    11,
]
106.557µs: cmdbussy
6.883328ms: grouping
2.052954ms: copied
278.618µs: cmdbussy
55.543µs: cmdbussy
117.362511ms: cmdbussy
did 1435/27868 (20 steps); 26433 left
101.526298ms: cmdbussy
did 2011/26433 (20 steps); 24422 left
93.384211ms: cmdbussy
did 3731/24422 (20 steps); 20691 left
83.64015ms: cmdbussy
did 3481/20691 (20 steps); 17210 left
82.094925ms: cmdbussy
did 2988/17210 (20 steps); 14222 left
80.989511ms: cmdbussy
did 2211/14222 (20 steps); 12011 left
81.828986ms: cmdbussy
did 589/12011 (20 steps); 11422 left
81.579649ms: cmdbussy
did 629/11422 (20 steps); 10793 left
83.317159ms: cmdbussy
did 805/10793 (20 steps); 9988 left
1.637472919s: cmdbussy
2.463927201s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
2.459621159s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
2.446177795s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
2.426919087s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
2.477819733s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
3.383754223s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
3.45868509s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
2.434647625s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
3.40361303s: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
281.636µs: cmdbussy
83.918µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    11,
    11,
]
128.291µs: cmdbussy
7.172813ms: grouping
2.448089ms: copied
267.146µs: cmdbussy
70.636µs: cmdbussy
147.221961ms: cmdbussy
did 17216/27868 (20 steps); 10652 left
125.371175ms: cmdbussy
did 7467/10652 (20 steps); 3185 left
460.443427ms: cmdbussy
791.811245ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
765.5542ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
751.129185ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
733.216171ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
728.33116ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
721.84176ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
744.855917ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
753.463775ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
742.326627ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
740.94169ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
728.248149ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
749.49944ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
730.676014ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
756.148825ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
758.7729ms: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
[src\main.rs:188:27] possible.swap_remove(i as usize) = &quot;.\\B.png&quot;
1.730869ms: frequencies
26.751192ms: 84860 RGBs
105.048µs: cmdbussy
88.143µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    10,
    12,
]
116.82µs: cmdbussy
11.147411ms: grouping
2.606868ms: copied
301.257µs: cmdbussy
112.594µs: cmdbussy
443.945234ms: cmdbussy
did 3439/84860 (20 steps); 81421 left
378.94679ms: cmdbussy
did 4585/81421 (20 steps); 76836 left
381.799373ms: cmdbussy
did 4990/76836 (20 steps); 71846 left
385.517693ms: cmdbussy
did 7237/71846 (20 steps); 64609 left
379.10738ms: cmdbussy
did 8241/64609 (20 steps); 56368 left
382.456222ms: cmdbussy
did 1893/56368 (20 steps); 54475 left
379.830336ms: cmdbussy
did 1537/54475 (20 steps); 52938 left
360.953481ms: cmdbussy
did 1434/52938 (20 steps); 51504 left
342.946286ms: cmdbussy
did 1165/51504 (20 steps); 50339 left
323.619055ms: cmdbussy
did 1606/50339 (20 steps); 48733 left
285.583106ms: cmdbussy
did 1593/48733 (20 steps); 47140 left
254.358339ms: cmdbussy
did 2736/47140 (20 steps); 44404 left
228.402551ms: cmdbussy
did 4634/44404 (20 steps); 39770 left
170.655101ms: cmdbussy
did 7876/39770 (20 steps); 31894 left
154.098951ms: cmdbussy
did 7448/31894 (20 steps); 24446 left
143.304113ms: cmdbussy
did 4920/24446 (20 steps); 19526 left
138.184555ms: cmdbussy
did 4170/19526 (20 steps); 15356 left
124.848352ms: cmdbussy
did 3074/15356 (20 steps); 12282 left
116.090772ms: cmdbussy
did 2309/12282 (20 steps); 9973 left
653.019045ms: cmdbussy
6.057922528s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
6.076305238s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
6.079566541s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
6.088994553s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
6.097406202s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
6.132967499s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
6.094658365s: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
203.152µs: cmdbussy
70.635µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    10,
    12,
]
117.121µs: cmdbussy
13.886193ms: grouping
2.487633ms: copied
329.028µs: cmdbussy
434.377µs: cmdbussy
773.257985ms: cmdbussy
did 4698/84860 (20 steps); 80162 left
634.959326ms: cmdbussy
did 6368/80162 (20 steps); 73794 left
660.425798ms: cmdbussy
did 11911/73794 (20 steps); 61883 left
634.234861ms: cmdbussy
did 12558/61883 (20 steps); 49325 left
557.977015ms: cmdbussy
did 7092/49325 (20 steps); 42233 left
472.710742ms: cmdbussy
did 11538/42233 (20 steps); 30695 left
375.979802ms: cmdbussy
did 8300/30695 (20 steps); 22395 left
348.824117ms: cmdbussy
did 5246/22395 (20 steps); 17149 left
316.635208ms: cmdbussy
did 3911/17149 (20 steps); 13238 left
294.303256ms: cmdbussy
did 2755/13238 (20 steps); 10483 left
267.719596ms: cmdbussy
did 2384/10483 (20 steps); 8099 left
1.317306244s: cmdbussy
6.69813755s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
6.620392739s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
6.620050429s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
6.81331308s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
6.675676099s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
6.689113124s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
6.691092726s: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
[src\main.rs:188:27] possible.swap_remove(i as usize) = &quot;.\\CDSCN9810.JPG&quot;
10.9346ms: frequencies
54.823929ms: 242931 RGBs
265.939µs: cmdbussy
79.692µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    13,
    7,
]
221.566µs: cmdbussy
31.19458ms: grouping
3.725866ms: copied
246.318µs: cmdbussy
79.691µs: cmdbussy
1.413177485s: cmdbussy
did 409/242931 (10 steps); 242522 left
2.48991861s: cmdbussy
did 536/242522 (10 steps); 241986 left
2.608578517s: cmdbussy
did 489/241986 (10 steps); 241497 left
2.728201964s: cmdbussy
did 481/241497 (10 steps); 241016 left
2.796858959s: cmdbussy
did 544/241016 (10 steps); 240472 left
1.799678639s: cmdbussy
did 678/240472 (10 steps); 239794 left
1.810668781s: cmdbussy
did 907/239794 (10 steps); 238887 left
2.811337705s: cmdbussy
did 1251/238887 (10 steps); 237636 left
2.814192703s: cmdbussy
did 1929/237636 (10 steps); 235707 left
2.811219677s: cmdbussy
did 2851/235707 (10 steps); 232856 left
2.809843495s: cmdbussy
did 4193/232856 (10 steps); 228663 left
2.786384394s: cmdbussy
did 5704/228663 (10 steps); 222959 left
2.769280368s: cmdbussy
did 4411/222959 (10 steps); 218548 left
1.750982783s: cmdbussy
did 2533/218548 (10 steps); 216015 left
1.723783328s: cmdbussy
did 2646/216015 (10 steps); 213369 left
2.701589327s: cmdbussy
did 2672/213369 (10 steps); 210697 left
2.661035557s: cmdbussy
did 2617/210697 (10 steps); 208080 left
2.630217096s: cmdbussy
did 2507/208080 (10 steps); 205573 left
2.59963499s: cmdbussy
did 2516/205573 (10 steps); 203057 left
1.576666415s: cmdbussy
did 2675/203057 (10 steps); 200382 left
1.551705558s: cmdbussy
did 2591/200382 (10 steps); 197791 left
2.522176645s: cmdbussy
did 2588/197791 (10 steps); 195203 left
2.488146386s: cmdbussy
did 2597/195203 (10 steps); 192606 left
1.47357195s: cmdbussy
did 2768/192606 (10 steps); 189838 left
1.443221976s: cmdbussy
did 2961/189838 (10 steps); 186877 left
2.420633443s: cmdbussy
did 3020/186877 (10 steps); 183857 left
2.407048204s: cmdbussy
did 3059/183857 (10 steps); 180798 left
1.393930247s: cmdbussy
did 3049/180798 (10 steps); 177749 left
1.368464981s: cmdbussy
did 3090/177749 (10 steps); 174659 left
2.344992599s: cmdbussy
did 3296/174659 (10 steps); 171363 left
2.341516071s: cmdbussy
did 3187/171363 (10 steps); 168176 left
1.337747341s: cmdbussy
did 3256/168176 (10 steps); 164920 left
1.304698733s: cmdbussy
did 3291/164920 (10 steps); 161629 left
2.303126038s: cmdbussy
did 3275/161629 (10 steps); 158354 left
2.295274341s: cmdbussy
did 3615/158354 (10 steps); 154739 left
1.289536876s: cmdbussy
did 3757/154739 (10 steps); 150982 left
1.242488274s: cmdbussy
did 3871/150982 (10 steps); 147111 left
2.203806644s: cmdbussy
did 3849/147111 (10 steps); 143262 left
2.170972055s: cmdbussy
did 3836/143262 (10 steps); 139426 left
2.13123512s: cmdbussy
did 3705/139426 (10 steps); 135721 left
1.100259992s: cmdbussy
did 3818/135721 (10 steps); 131903 left
2.058606847s: cmdbussy
did 3911/131903 (10 steps); 127992 left
1.007663034s: cmdbussy
did 4062/127992 (10 steps); 123930 left
1.93782667s: cmdbussy
did 4193/123930 (10 steps); 119737 left
890.281506ms: cmdbussy
did 4413/119737 (10 steps); 115324 left
846.126238ms: cmdbussy
did 4413/115324 (10 steps); 110911 left
800.181237ms: cmdbussy
did 4387/110911 (10 steps); 106524 left
774.030144ms: cmdbussy
did 4500/106524 (10 steps); 102024 left
725.336401ms: cmdbussy
did 4547/102024 (10 steps); 97477 left
1.356719885s: cmdbussy
did 9053/97477 (20 steps); 88424 left
2.211364027s: cmdbussy
did 9153/88424 (20 steps); 79271 left
1.008523941s: cmdbussy
did 9378/79271 (20 steps); 69893 left
891.654972ms: cmdbussy
did 8867/69893 (20 steps); 61026 left
823.322176ms: cmdbussy
did 8828/61026 (20 steps); 52198 left
745.478052ms: cmdbussy
did 8023/52198 (20 steps); 44175 left
612.214428ms: cmdbussy
did 7043/44175 (20 steps); 37132 left
411.018879ms: cmdbussy
did 6459/37132 (20 steps); 30673 left
338.446752ms: cmdbussy
did 5885/30673 (20 steps); 24788 left
284.050257ms: cmdbussy
did 5115/24788 (20 steps); 19673 left
267.892261ms: cmdbussy
did 4191/19673 (20 steps); 15482 left
260.958522ms: cmdbussy
did 3501/15482 (20 steps); 11981 left
245.205321ms: cmdbussy
did 2921/11981 (20 steps); 9060 left
1.484704873s: cmdbussy
107.29819273s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~178 levels
238.47µs: cmdbussy
91.766µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    13,
    7,
]
226.093µs: cmdbussy
25.548277ms: grouping
3.528147ms: copied
377.627µs: cmdbussy
82.106µs: cmdbussy
1.694548729s: cmdbussy
did 1853/242931 (10 steps); 241078 left
2.447647857s: cmdbussy
did 11458/241078 (10 steps); 229620 left
2.611805407s: cmdbussy
did 8918/229620 (10 steps); 220702 left
2.752237618s: cmdbussy
did 7158/220702 (10 steps); 213544 left
1.812974996s: cmdbussy
did 6140/213544 (10 steps); 207404 left
1.891901592s: cmdbussy
did 7593/207404 (10 steps); 199811 left
2.847959437s: cmdbussy
did 10377/199811 (10 steps); 189434 left
2.843403153s: cmdbussy
did 13072/189434 (10 steps); 176362 left
2.810158939s: cmdbussy
did 15944/176362 (10 steps); 160418 left
1.721509713s: cmdbussy
did 18398/160418 (10 steps); 142020 left
1.569804518s: cmdbussy
did 16329/142020 (10 steps); 125691 left
2.557950149s: cmdbussy
did 16083/125691 (10 steps); 109608 left
2.436463014s: cmdbussy
did 15680/109608 (10 steps); 93928 left
2.68283714s: cmdbussy
did 23235/93928 (20 steps); 70693 left
2.209098562s: cmdbussy
did 15649/70693 (20 steps); 55044 left
3.024162133s: cmdbussy
did 11954/55044 (20 steps); 43090 left
2.870809684s: cmdbussy
did 9276/43090 (20 steps); 33814 left
1.385310617s: cmdbussy
did 6745/33814 (20 steps); 27069 left
1.164857868s: cmdbussy
did 5624/27069 (20 steps); 21445 left
1.963850377s: cmdbussy
did 4809/21445 (20 steps); 16636 left
1.839923605s: cmdbussy
did 4091/16636 (20 steps); 12545 left
716.466528ms: cmdbussy
did 2944/12545 (20 steps); 9601 left
4.158179805s: cmdbussy
52.086906885s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~197 levels
109.100988986s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~178 levels
52.143835991s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~197 levels
111.910527601s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~178 levels
52.499913818s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~197 levels
111.89515414s: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~178 levels
56.157907828s: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~197 levels
[src\main.rs:188:27] possible.swap_remove(i as usize) = &quot;.\\DSCN9773.JPG&quot;
11.508135ms: frequencies
69.913641ms: 328666 RGBs
274.995µs: cmdbussy
101.728µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    8,
    10,
]
274.693µs: cmdbussy
39.016393ms: grouping
4.951722ms: copied
425.322µs: cmdbussy
85.729µs: cmdbussy
4.078195791s: cmdbussy
did 2863/328666 (10 steps); 325803 left
3.258759468s: cmdbussy
did 2399/325803 (10 steps); 323404 left
2.961552011s: cmdbussy
did 4471/323404 (10 steps); 318933 left
3.799976274s: cmdbussy
did 6288/318933 (10 steps); 312645 left
3.746096866s: cmdbussy
did 10097/312645 (10 steps); 302548 left
3.695681008s: cmdbussy
did 14279/302548 (10 steps); 288269 left
2.567114034s: cmdbussy
did 15496/288269 (10 steps); 272773 left
2.53846927s: cmdbussy
did 19285/272773 (10 steps); 253488 left
3.475076423s: cmdbussy
did 17463/253488 (10 steps); 236025 left
3.378428496s: cmdbussy
did 11674/236025 (10 steps); 224351 left
3.307405818s: cmdbussy
did 10639/224351 (10 steps); 213712 left
2.194448964s: cmdbussy
did 10127/213712 (10 steps); 203585 left
2.104639387s: cmdbussy
did 11113/203585 (10 steps); 192472 left
3.008182536s: cmdbussy
did 13380/192472 (10 steps); 179092 left
2.948321157s: cmdbussy
did 15469/179092 (10 steps); 163623 left
1.768635895s: cmdbussy
did 16069/163623 (10 steps); 147554 left
1.648499889s: cmdbussy
did 14800/147554 (10 steps); 132754 left
2.54460157s: cmdbussy
did 11883/132754 (10 steps); 120871 left
2.393551109s: cmdbussy
did 9652/120871 (10 steps); 111219 left
2.323265878s: cmdbussy
did 8774/111219 (10 steps); 102445 left
2.248968014s: cmdbussy
did 8787/102445 (10 steps); 93658 left
3.20545752s: cmdbussy
did 17262/93658 (20 steps); 76396 left
1.707299624s: cmdbussy
did 13791/76396 (20 steps); 62605 left
1.449046075s: cmdbussy
did 12693/62605 (20 steps); 49912 left
2.219482266s: cmdbussy
did 11791/49912 (20 steps); 38121 left
1.880060203s: cmdbussy
did 9938/38121 (20 steps); 28183 left
756.101132ms: cmdbussy
did 7493/28183 (20 steps); 20690 left
684.576762ms: cmdbussy
did 4933/20690 (20 steps); 15757 left
650.333994ms: cmdbussy
did 3457/15757 (20 steps); 12300 left
605.220317ms: cmdbussy
did 2139/12300 (20 steps); 10161 left
539.058201ms: cmdbussy
did 1250/10161 (20 steps); 8911 left
2.778680307s: cmdbussy
76.576736748s: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~190 levels
110.783µs: cmdbussy
94.784µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    3,
    8,
    10,
]
370.685µs: cmdbussy
31.264008ms: grouping
4.927271ms: copied
467.28µs: cmdbussy
84.219µs: cmdbussy
2.408652292s: cmdbussy
did 317/328666 (10 steps); 328349 left
3.465856392s: cmdbussy
did 362/328349 (10 steps); 327987 left
3.561763856s: cmdbussy
did 878/327987 (10 steps); 327109 left
2.554281033s: cmdbussy
did 1789/327109 (10 steps); 325320 left
2.562786259s: cmdbussy
did 2419/325320 (10 steps); 322901 left
3.551161304s: cmdbussy
did 3814/322901 (10 steps); 319087 left
2.536807528s: cmdbussy
did 3577/319087 (10 steps); 315510 left
2.514340342s: cmdbussy
did 2930/315510 (10 steps); 312580 left
3.491898513s: cmdbussy
did 3392/312580 (10 steps); 309188 left
3.471831421s: cmdbussy
did 3645/309188 (10 steps); 305543 left
2.441001187s: cmdbussy
did 3472/305543 (10 steps); 302071 left
2.40996116s: cmdbussy
did 4022/302071 (10 steps); 298049 left
3.393597597s: cmdbussy
did 4420/298049 (10 steps); 293629 left
3.335368981s: cmdbussy
did 4944/293629 (10 steps); 288685 left
2.290526677s: cmdbussy
did 6067/288685 (10 steps); 282618 left
2.23615886s: cmdbussy
did 8302/282618 (10 steps); 274316 left
3.178091136s: cmdbussy
did 6410/274316 (10 steps); 267906 left
3.130982463s: cmdbussy
did 4369/267906 (10 steps); 263537 left
3.081515654s: cmdbussy
did 4688/263537 (10 steps); 258849 left
2.038772791s: cmdbussy
did 4601/258849 (10 steps); 254248 left
1.991155483s: cmdbussy
did 4590/254248 (10 steps); 249658 left
2.933015615s: cmdbussy
did 4849/249658 (10 steps); 244809 left
2.876997525s: cmdbussy
did 4877/244809 (10 steps); 239932 left
1.817045588s: cmdbussy
did 4993/239932 (10 steps); 234939 left
1.746190443s: cmdbussy
did 5327/234939 (10 steps); 229612 left
2.698832131s: cmdbussy
did 5790/229612 (10 steps); 223822 left
2.63968254s: cmdbussy
did 6589/223822 (10 steps); 217233 left
2.587924609s: cmdbussy
did 7088/217233 (10 steps); 210145 left
2.533126941s: cmdbussy
did 7359/210145 (10 steps); 202786 left
2.454601216s: cmdbussy
did 7199/202786 (10 steps); 195587 left
2.393787467s: cmdbussy
did 6704/195587 (10 steps); 188883 left
2.332416784s: cmdbussy
did 6672/188883 (10 steps); 182211 left
2.290329563s: cmdbussy
did 6604/182211 (10 steps); 175607 left
2.252386586s: cmdbussy
did 6554/175607 (10 steps); 169053 left
2.198731763s: cmdbussy
did 6509/169053 (10 steps); 162544 left
1.133774674s: cmdbussy
did 6431/162544 (10 steps); 156113 left
1.086027263s: cmdbussy
did 6327/156113 (10 steps); 149786 left
2.047874192s: cmdbussy
did 5989/149786 (10 steps); 143797 left
2.017057541s: cmdbussy
did 5642/143797 (10 steps); 138155 left
1.985327762s: cmdbussy
did 5447/138155 (10 steps); 132708 left
1.955838996s: cmdbussy
did 5105/132708 (10 steps); 127603 left
1.913450517s: cmdbussy
did 4979/127603 (10 steps); 122624 left
859.584695ms: cmdbussy
did 4806/122624 (10 steps); 117818 left
824.83812ms: cmdbussy
did 4710/117818 (10 steps); 113108 left
804.792158ms: cmdbussy
did 4574/113108 (10 steps); 108534 left
766.608297ms: cmdbussy
did 4581/108534 (10 steps); 103953 left
734.31917ms: cmdbussy
did 4327/103953 (10 steps); 99626 left
1.393878931s: cmdbussy
did 8770/99626 (20 steps); 90856 left
2.261385051s: cmdbussy
did 8484/90856 (20 steps); 82372 left
1.071369515s: cmdbussy
did 8201/82372 (20 steps); 74171 left
937.867421ms: cmdbussy
did 7705/74171 (20 steps); 66466 left
1.857959174s: cmdbussy
did 7465/66466 (20 steps); 59001 left
757.381927ms: cmdbussy
did 7143/59001 (20 steps); 51858 left
635.566971ms: cmdbussy
did 6636/51858 (20 steps); 45222 left
505.828778ms: cmdbussy
did 6336/45222 (20 steps); 38886 left
370.070578ms: cmdbussy
did 5917/38886 (20 steps); 32969 left
306.188113ms: cmdbussy
did 5208/32969 (20 steps); 27761 left
255.7309ms: cmdbussy
did 4925/27761 (20 steps); 22836 left
238.148725ms: cmdbussy
did 4257/22836 (20 steps); 18579 left
225.75644ms: cmdbussy
did 3813/18579 (20 steps); 14766 left
214.360899ms: cmdbussy
did 3644/14766 (20 steps); 11122 left
199.636439ms: cmdbussy
did 2455/11122 (20 steps); 8667 left
1.36055744s: cmdbussy
122.216174478s: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~292 levels
125.473787177s: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~292 levels
78.372579644s: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~190 levels
121.366457306s: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~292 levels
78.299165023s: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~190 levels
[src\main.rs:162:27] images().swap_remove(0) = &quot;.\\x002. fluorescent heart.png&quot;
35.829952ms: frequencies
206.335632ms: 1103347 RGBs
348.649µs: cmdbussy
145.799µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    2,
    5,
    4,
]
717.825µs: cmdbussy
124.45533ms: grouping
7.367513ms: copied
866.944µs: cmdbussy
143.383µs: cmdbussy
5.865973877s: cmdbussy
did 12380/1103347 (10 steps); 1090967 left
6.834459022s: cmdbussy
did 80853/1090967 (10 steps); 1010114 left
6.433991379s: cmdbussy
did 174244/1010114 (10 steps); 835870 left
5.659918371s: cmdbussy
did 186416/835870 (10 steps); 649454 left
4.781159791s: cmdbussy
did 151358/649454 (10 steps); 498096 left
4.030932264s: cmdbussy
did 118824/498096 (10 steps); 379272 left
2.430365731s: cmdbussy
did 87645/379272 (10 steps); 291627 left
1.921070688s: cmdbussy
did 72871/291627 (10 steps); 218756 left
2.511134583s: cmdbussy
did 56003/218756 (10 steps); 162753 left
2.165655987s: cmdbussy
did 38613/162753 (10 steps); 124140 left
951.6377ms: cmdbussy
did 31674/124140 (10 steps); 92466 left
1.358751106s: cmdbussy
did 38589/92466 (20 steps); 53877 left
992.700104ms: cmdbussy
did 22957/53877 (20 steps); 30920 left
1.566814589s: cmdbussy
did 12058/30920 (20 steps); 18862 left
457.377127ms: cmdbussy
did 8975/18862 (20 steps); 9887 left
1.233203946s: cmdbussy
49.549648076s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~12016 levels
49.432092073s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~12016 levels
51.575855315s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~12016 levels
49.487737364s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~12016 levels
49.452174559s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~12016 levels
48.464887419s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~12016 levels
48.383878287s: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~12016 levels
258.997µs: cmdbussy
155.458µs: cmdbussy
[src\posterise_gpu.rs:654:13] direction_cells = [
    2,
    5,
    4,
]
747.709µs: cmdbussy
91.073165ms: grouping
6.747491ms: copied
954.483µs: cmdbussy
161.495µs: cmdbussy
8.31622196s: cmdbussy
did 269906/1103347 (10 steps); 833441 left
6.513429931s: cmdbussy
did 475001/833441 (10 steps); 358440 left
3.808270197s: cmdbussy
did 202825/358440 (10 steps); 155615 left
2.43082788s: cmdbussy
did 82171/155615 (10 steps); 73444 left
2.39855445s: cmdbussy
did 50097/73444 (20 steps); 23347 left
697.064436ms: cmdbussy
did 16122/23347 (20 steps); 7225 left
794.527689ms: cmdbussy
25.278102999s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~8242 levels
25.223905128s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~8242 levels
22.343798138s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~8242 levels
24.347354357s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~8242 levels
24.260490638s: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~8242 levels
Benchmark 2: MSC 84860 RGBs @ r=0.02 [yesgrid] =&gt; ~247 levels
  Time (mean ± σ): 6089.688704 ms ± 21.542180 ms
  Range (min … max): 6057.922528 ms … 6132.967499 ms 7 runs
Benchmark 4: MSC 242931 RGBs @ r=0.02 [yesgrid] =&gt; ~178 levels
  Time (mean ± σ): 110051.215864 ms ± 1958.265559 ms
  Range (min … max): 107298.192730 ms … 111910.527601 ms 4 runs
Benchmark 1: MSC 27868 RGBs @ r=0.02 [yesgrid] =&gt; ~375 levels
  Time (mean ± σ): 2772.796105 ms ± 454.946633 ms
  Range (min … max): 2426.919087 ms … 3458.685090 ms 9 runs
Benchmark 5: MSC 328666 RGBs @ r=0.02 [yesgrid] =&gt; ~292 levels
  Time (mean ± σ): 123018.806320 ms ± 1770.254798 ms
  Range (min … max): 121366.457306 ms … 125473.787177 ms 3 runs
Benchmark 3: MSC 1103347 RGBs @ r=0.02 [yesgrid] =&gt; ~12016 levels
  Time (mean ± σ): 49478.039013 ms ± 973.396050 ms
  Range (min … max): 48383.878287 ms … 51575.855315 ms 7 runs
Benchmark 2: MSC 84860 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~245 levels
  Time (mean ± σ): 6686.825107 ms ± 59.936924 ms
  Range (min … max): 6620.050429 ms … 6813.313080 ms 7 runs
Benchmark 4: MSC 242931 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~197 levels
  Time (mean ± σ): 53222.141130 ms ± 1702.339358 ms
  Range (min … max): 52086.906885 ms … 56157.907828 ms 4 runs
Benchmark 1: MSC 27868 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~315 levels
  Time (mean ± σ): 746.454471 ms ± 17.297251 ms
  Range (min … max): 721.841760 ms … 791.811245 ms 15 runs
Benchmark 5: MSC 328666 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~190 levels
  Time (mean ± σ): 77749.493805 ms ± 829.805906 ms
  Range (min … max): 76576.736748 ms … 78372.579644 ms 3 runs
Benchmark 3: MSC 1103347 RGBs @ r=0.02 * freq [yesgrid] =&gt; ~8242 levels
  Time (mean ± σ): 24290.730252 ms ± 1062.109756 ms
  Range (min … max): 22343.798138 ms … 25278.102999 ms 5 runs
--&gt;
&lt;table class=&quot;perf left&quot; id=&quot;itersumdet&quot;&gt;
 &lt;caption&gt;&lt;code&gt;use_oneshot_driver = true&lt;/code&gt;&lt;/caption&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt;&lt;th&gt;*&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;134.983ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.090s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;110.051s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.6ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;21.5ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.958s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-15.72%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-45.07%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-4.37%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7.82%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;details&gt;&lt;summary&gt;iterations&lt;/summary&gt; [​[​(pointsdone \operatorname{@} depth)​]​]&lt;/details&gt;&lt;/th&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt;&lt;/summary&gt; [​[​(8726 \operatorname{@} q_{20}), (8029 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20&lt;/span&gt;&lt;/summary&gt; [​[​(3439 \operatorname{@} q_{20}), (4585 \operatorname{@} q_{40}), (4990 \operatorname{@} q_{60}), (7237 \operatorname{@} q_{80}), (8241 \operatorname{@} q_{100}), (1893 \operatorname{@} q_{120}), (1537 \operatorname{@} q_{140}), (1434 \operatorname{@} q_{160}), (1165 \operatorname{@} q_{180}), (1606 \operatorname{@} q_{200}), (1593 \operatorname{@} q_{220}), (2736 \operatorname{@} q_{240}), (4634 \operatorname{@} q_{260}), (7876 \operatorname{@} q_{280}), (7448 \operatorname{@} q_{300}), (4920 \operatorname{@} q_{320}), (4170 \operatorname{@} q_{340}), (3074 \operatorname{@} q_{360}), (2309 \operatorname{@} q_{380}), (9973 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;63&lt;/span&gt;&lt;/summary&gt; [​[​(409 \operatorname{@} q_{10}), (536 \operatorname{@} q_{20}), (489 \operatorname{@} q_{30}), (481 \operatorname{@} q_{40}), (544 \operatorname{@} q_{50}), (678 \operatorname{@} q_{60}), (907 \operatorname{@} q_{70}), (1251 \operatorname{@} q_{80}), (1929 \operatorname{@} q_{90}), (2851 \operatorname{@} q_{100}), (4193 \operatorname{@} q_{110}), (5704 \operatorname{@} q_{120}), (4411 \operatorname{@} q_{130}), (2533 \operatorname{@} q_{140}), (2646 \operatorname{@} q_{150}), (2672 \operatorname{@} q_{160}), (2617 \operatorname{@} q_{170}), (2507 \operatorname{@} q_{180}), (2516 \operatorname{@} q_{190}), (2675 \operatorname{@} q_{200}), (2591 \operatorname{@} q_{210}), (2588 \operatorname{@} q_{220}), (2597 \operatorname{@} q_{230}), (2768 \operatorname{@} q_{240}), (2961 \operatorname{@} q_{250}), (3020 \operatorname{@} q_{260}), (3059 \operatorname{@} q_{270}), (3049 \operatorname{@} q_{280}), (3090 \operatorname{@} q_{290}), (3296 \operatorname{@} q_{300}), (3187 \operatorname{@} q_{310}), (3256 \operatorname{@} q_{320}), (3291 \operatorname{@} q_{330}), (3275 \operatorname{@} q_{340}), (3615 \operatorname{@} q_{350}), (3757 \operatorname{@} q_{360}), (3871 \operatorname{@} q_{370}), (3849 \operatorname{@} q_{380}), (3836 \operatorname{@} q_{390}), (3705 \operatorname{@} q_{400}), (3818 \operatorname{@} q_{410}), (3911 \operatorname{@} q_{420}), (4062 \operatorname{@} q_{430}), (4193 \operatorname{@} q_{440}), (4413 \operatorname{@} q_{450}), (4413 \operatorname{@} q_{460}), (4387 \operatorname{@} q_{470}), (4500 \operatorname{@} q_{480}), (4547 \operatorname{@} q_{490}), (9053 \operatorname{@} q_{510}), (9153 \operatorname{@} q_{530}), (9378 \operatorname{@} q_{550}), (8867 \operatorname{@} q_{570}), (8828 \operatorname{@} q_{590}), (8023 \operatorname{@} q_{610}), (7043 \operatorname{@} q_{630}), (6459 \operatorname{@} q_{650}), (5885 \operatorname{@} q_{670}), (5115 \operatorname{@} q_{690}), (4191 \operatorname{@} q_{710}), (3501 \operatorname{@} q_{730}), (2921 \operatorname{@} q_{750}), (9060 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;142.337ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.687s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;53.222s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.8ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;59.9ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.702s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-43.17%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-103.48%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-17.53%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-53.49%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;details&gt;&lt;summary&gt;iterations&lt;/summary&gt; [​[​(pointsdone \operatorname{@} depth)​]​]&lt;/details&gt;&lt;/th&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt;&lt;/summary&gt; [​[​(9892 \operatorname{@} q_{20}), (6863 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12&lt;/span&gt;&lt;/summary&gt; [​[​( 4698 \operatorname{@} q_{20}), ( 6368 \operatorname{@} q_{40}), (11911 \operatorname{@} q_{60}), (12558 \operatorname{@} q_{80}), ( 7092 \operatorname{@} q_{100}), (11538 \operatorname{@} q_{120}), ( 8300 \operatorname{@} q_{140}), ( 5246 \operatorname{@} q_{160}), ( 3911 \operatorname{@} q_{180}), ( 2755 \operatorname{@} q_{200}), ( 2384 \operatorname{@} q_{220}), ( 8099 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;23&lt;/span&gt;&lt;/summary&gt; [​[​(1853 \operatorname{@} q_{10}), (11458 \operatorname{@} q_{20}), (8918 \operatorname{@} q_{30}), (7158 \operatorname{@} q_{40}), (6140 \operatorname{@} q_{50}), (7593 \operatorname{@} q_{60}), (10377 \operatorname{@} q_{70}), (13072 \operatorname{@} q_{80}), (15944 \operatorname{@} q_{90}), (18398 \operatorname{@} q_{100}), (16329 \operatorname{@} q_{110}), (16083 \operatorname{@} q_{120}), (15680 \operatorname{@} q_{130}), (23235 \operatorname{@} q_{150}), (15649 \operatorname{@} q_{170}), (11954 \operatorname{@} q_{190}), (9276 \operatorname{@} q_{210}), (6745 \operatorname{@} q_{230}), (5624 \operatorname{@} q_{250}), (4809 \operatorname{@} q_{270}), (4091 \operatorname{@} q_{290}), (2944 \operatorname{@} q_{310}), (9601 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt;&lt;th&gt;*&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.773s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;123.019s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;49.478s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;454.9ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.77s&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;973ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-46.61%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-90.46%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;details&gt;&lt;summary&gt;iterations&lt;/summary&gt; [​[​(pointsdone \operatorname{@} depth)​]​]&lt;/details&gt;&lt;/th&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10&lt;/span&gt;&lt;/summary&gt; [​[​( 1435 \operatorname{@} q_{20}), ( 2011 \operatorname{@} q_{40}), ( 3731 \operatorname{@} q_{60}), ( 3481 \operatorname{@} q_{80}), ( 2988 \operatorname{@} q_{100}), ( 2211 \operatorname{@} q_{120}), ( 589 \operatorname{@} q_{140}), ( 629 \operatorname{@} q_{160}), ( 805 \operatorname{@} q_{180}), ( 9988 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32&lt;/span&gt;&lt;/summary&gt; [​[​(2863 \operatorname{@} q_{10}), (2399 \operatorname{@} q_{20}), (4471 \operatorname{@} q_{30}), (6288 \operatorname{@} q_{40}), (10097 \operatorname{@} q_{50}), (14279 \operatorname{@} q_{60}), (15496 \operatorname{@} q_{70}), (19285 \operatorname{@} q_{80}), (17463 \operatorname{@} q_{90}), (11674 \operatorname{@} q_{100}), (10639 \operatorname{@} q_{110}), (10127 \operatorname{@} q_{120}), (11113 \operatorname{@} q_{130}), (13380 \operatorname{@} q_{140}), (15469 \operatorname{@} q_{150}), (16069 \operatorname{@} q_{160}), (14800 \operatorname{@} q_{170}), (11883 \operatorname{@} q_{180}), (9652 \operatorname{@} q_{190}), (8774 \operatorname{@} q_{200}), (8787 \operatorname{@} q_{210}), (17262 \operatorname{@} q_{230}), (13791 \operatorname{@} q_{250}), (12693 \operatorname{@} q_{270}), (11791 \operatorname{@} q_{290}), (9938 \operatorname{@} q_{310}), (7493 \operatorname{@} q_{330}), (4933 \operatorname{@} q_{350}), (3457 \operatorname{@} q_{370}), (2139 \operatorname{@} q_{390}), (1250 \operatorname{@} q_{410}), (8911 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16&lt;/span&gt;&lt;/summary&gt; [​[​(12380 \operatorname{@} q_{10}), (80853 \operatorname{@} q_{20}), (174244 \operatorname{@} q_{30}), (186416 \operatorname{@} q_{40}), (151358 \operatorname{@} q_{50}), (118824 \operatorname{@} q_{60}), (87645 \operatorname{@} q_{70}), (72871 \operatorname{@} q_{80}), (56003 \operatorname{@} q_{90}), (38613 \operatorname{@} q_{100}), (31674 \operatorname{@} q_{110}), (38589 \operatorname{@} q_{130}), (22957 \operatorname{@} q_{150}), (12058 \operatorname{@} q_{170}), (8975 \operatorname{@} q_{190}), (9887 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;746.454ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;77.749s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;24.291s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;17.3ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;829ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.062s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-31.55%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-99.89%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;details&gt;&lt;summary&gt;iterations&lt;/summary&gt; [​[​(pointsdone \operatorname{@} depth)​]​]&lt;/details&gt;&lt;/th&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3&lt;/span&gt;&lt;/summary&gt; [​[​(17216 \operatorname{@} q_{20}), ( 7467 \operatorname{@} q_{40}), ( 3185 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;63&lt;/span&gt;&lt;/summary&gt; [​[​(317 \operatorname{@} q_{10}), (362 \operatorname{@} q_{20}), (878 \operatorname{@} q_{30}), (1789 \operatorname{@} q_{40}), (2419 \operatorname{@} q_{50}), (3814 \operatorname{@} q_{60}), (3577 \operatorname{@} q_{70}), (2930 \operatorname{@} q_{80}), (3392 \operatorname{@} q_{90}), (3645 \operatorname{@} q_{100}), (3472 \operatorname{@} q_{110}), (4022 \operatorname{@} q_{120}), (4420 \operatorname{@} q_{130}), (4944 \operatorname{@} q_{140}), (6067 \operatorname{@} q_{150}), (8302 \operatorname{@} q_{160}), (6410 \operatorname{@} q_{170}), (4369 \operatorname{@} q_{180}), (4688 \operatorname{@} q_{190}), (4601 \operatorname{@} q_{200}), (4590 \operatorname{@} q_{210}), (4849 \operatorname{@} q_{220}), (4877 \operatorname{@} q_{230}), (4993 \operatorname{@} q_{240}), (5327 \operatorname{@} q_{250}), (5790 \operatorname{@} q_{260}), (6589 \operatorname{@} q_{270}), (7088 \operatorname{@} q_{280}), (7359 \operatorname{@} q_{290}), (7199 \operatorname{@} q_{300}), (6704 \operatorname{@} q_{310}), (6672 \operatorname{@} q_{320}), (6604 \operatorname{@} q_{330}), (6554 \operatorname{@} q_{340}), (6509 \operatorname{@} q_{350}), (6431 \operatorname{@} q_{360}), (6327 \operatorname{@} q_{370}), (5989 \operatorname{@} q_{380}), (5642 \operatorname{@} q_{390}), (5447 \operatorname{@} q_{400}), (5105 \operatorname{@} q_{410}), (4979 \operatorname{@} q_{420}), (4806 \operatorname{@} q_{430}), (4710 \operatorname{@} q_{440}), (4574 \operatorname{@} q_{450}), (4581 \operatorname{@} q_{460}), (4327 \operatorname{@} q_{470}), (8770 \operatorname{@} q_{490}), (8484 \operatorname{@} q_{510}), (8201 \operatorname{@} q_{530}), (7705 \operatorname{@} q_{550}), (7465 \operatorname{@} q_{570}), (7143 \operatorname{@} q_{590}), (6636 \operatorname{@} q_{610}), (6336 \operatorname{@} q_{630}), (5917 \operatorname{@} q_{650}), (5208 \operatorname{@} q_{670}), (4925 \operatorname{@} q_{690}), (4257 \operatorname{@} q_{710}), (3813 \operatorname{@} q_{730}), (3644 \operatorname{@} q_{750}), (2455 \operatorname{@} q_{770}), (8667 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt; &lt;td&gt;&lt;details&gt;&lt;summary&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7&lt;/span&gt;&lt;/summary&gt; [​[​(269906 \operatorname{@} q_{10}), (475001 \operatorname{@} q_{20}), (202825 \operatorname{@} q_{30}), (82171 \operatorname{@} q_{40}), (50097 \operatorname{@} q_{60}), (16122 \operatorname{@} q_{80}), (7225 \operatorname{@} \infty)​]​]&lt;/details&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tfoot class=&quot;slowdown-didnt&quot;&gt;&lt;tr&gt;&lt;td colspan=5&gt;&lt;strong&gt;*&lt;/strong&gt;: slow-down doesn't&lt;!--'--&gt; apply (and subsequent measurement comparisons will ignore it)&lt;br /&gt; &lt;strong&gt;—&lt;/strong&gt;: didn't&lt;!--'--&gt; complete before&lt;/td&gt;&lt;/tfoot&gt;
&lt;/table&gt;
&lt;script&gt;
 for(let tr of itersumdet.querySelectorAll(&quot;tr&quot;)) {
  let thd = tr.querySelector(&quot;th details&quot;);
  if(!thd)
   continue;
  let tdds = Array.from(tr.querySelectorAll(&quot;td details&quot;));
  for(let tdd of tdds) {
   tdd.addEventListener(&quot;toggle&quot;, function() {
     thd.open = !tdds.every(function(tdd) { return !tdd.open; });
   })
  }
 }
&lt;/script&gt;
&lt;p class=&quot;indented&quot;&gt;
The slow-down is even more surprising here, but this is why images with few colours are not beholden to the new shader.
Images with many complete for the first time, and this explains why &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt; is so much slower than &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt; —
a maximum observed iteration depth of [​[​q_{410}​]​]/[​[​q_{770}​]​] beats [​[​q_{190}​]​]/[​[​q_{80}​]​].
&lt;/p&gt;
&lt;!--
import matplotlib.pyplot as plt
inf = -1
# processed piece-meal
palette = {
 16755: [(8726, 20), (8029, inf)],
 84860: [(3439, 20), (4585, 40), (4990, 60), (7237, 80), (8241, 100), (1893, 120), (1537, 140), (1434, 160), (1165, 180), (1606, 200), (1593, 220), (2736, 240), (4634, 260), (7876, 280), (7448, 300), (4920, 320), (4170, 340), (3074, 360), (2309, 380), (9973, inf)],
 242931: [(409, 10), (536, 20), (489, 30), (481, 40), (544, 50), (678, 60), (907, 70), (1251, 80), (1929, 90), (2851, 100), (4193, 110), (5704, 120), (4411, 130), (2533, 140), (2646, 150), (2672, 160), (2617, 170), (2507, 180), (2516, 190), (2675, 200), (2591, 210), (2588, 220), (2597, 230), (2768, 240), (2961, 250), (3020, 260), (3059, 270), (3049, 280), (3090, 290), (3296, 300), (3187, 310), (3256, 320), (3291, 330), (3275, 340), (3615, 350), (3757, 360), (3871, 370), (3849, 380), (3836, 390), (3705, 400), (3818, 410), (3911, 420), (4062, 430), (4193, 440), (4413, 450), (4413, 460), (4387, 470), (4500, 480), (4547, 490), (9053, 510), (9153, 530), (9378, 550), (8867, 570), (8828, 590), (8023, 610), (7043, 630), (6459, 650), (5885, 670), (5115, 690), (4191, 710), (3501, 730), (2921, 750), (9060, inf)],
 27868: [( 1435, 20), ( 2011, 40), ( 3731, 60), ( 3481, 80), ( 2988, 100), ( 2211, 120), ( 589, 140), ( 629, 160), ( 805, 180), ( 9988, inf)],
 328666: [(2863, 10), (2399, 20), (4471, 30), (6288, 40), (10097, 50), (14279, 60), (15496, 70), (19285, 80), (17463, 90), (11674, 100), (10639, 110), (10127, 120), (11113, 130), (13380, 140), (15469, 150), (16069, 160), (14800, 170), (11883, 180), (9652, 190), (8774, 200), (8787, 210), (17262, 230), (13791, 250), (12693, 270), (11791, 290), (9938, 310), (7493, 330), (4933, 350), (3457, 370), (2139, 390), (1250, 410), (8911, inf)],
 1103347: [(12380, 10), (80853, 20), (174244, 30), (186416, 40), (151358, 50), (118824, 60), (87645, 70), (72871, 80), (56003, 90), (38613, 100), (31674, 110), (38589, 130), (22957, 150), (12058, 170), (8975, 190), (9887, inf)],
}
mulfreq = {
 16755: [(9892 , 20), (6863 , inf)],
 84860: [( 4698 , 20), ( 6368 , 40), (11911 , 60), (12558 , 80), ( 7092 , 100), (11538 , 120), ( 8300 , 140), ( 5246 , 160), ( 3911 , 180), ( 2755 , 200), ( 2384 , 220), ( 8099 , inf)],
 242931: [(1853 , 10), (11458 , 20), (8918 , 30), (7158 , 40), (6140 , 50), (7593 , 60), (10377 , 70), (13072 , 80), (15944 , 90), (18398 , 100), (16329 , 110), (16083 , 120), (15680 , 130), (23235 , 150), (15649 , 170), (11954 , 190), (9276 , 210), (6745 , 230), (5624 , 250), (4809 , 270), (4091 , 290), (2944 , 310), (9601 , inf)],
 27868: [(17216 , 20), ( 7467 , 40), ( 3185 , inf)],
 328666: [(317 , 10), (362 , 20), (878 , 30), (1789 , 40), (2419 , 50), (3814 , 60), (3577 , 70), (2930 , 80), (3392 , 90), (3645 , 100), (3472 , 110), (4022 , 120), (4420 , 130), (4944 , 140), (6067 , 150), (8302 , 160), (6410 , 170), (4369 , 180), (4688 , 190), (4601 , 200), (4590 , 210), (4849 , 220), (4877 , 230), (4993 , 240), (5327 , 250), (5790 , 260), (6589 , 270), (7088 , 280), (7359 , 290), (7199 , 300), (6704 , 310), (6672 , 320), (6604 , 330), (6554 , 340), (6509 , 350), (6431 , 360), (6327 , 370), (5989 , 380), (5642 , 390), (5447 , 400), (5105 , 410), (4979 , 420), (4806 , 430), (4710 , 440), (4574 , 450), (4581 , 460), (4327 , 470), (8770 , 490), (8484 , 510), (8201 , 530), (7705 , 550), (7465 , 570), (7143 , 590), (6636 , 610), (6336 , 630), (5917 , 650), (5208 , 670), (4925 , 690), (4257 , 710), (3813 , 730), (3644 , 750), (2455 , 770), (8667 , inf)],
 1103347: [(269906 , 10), (475001 , 20), (202825 , 30), (82171 , 40), (50097 , 60), (16122 , 80), (7225 , inf)],
}
for (variant, varname) in [(palette, &quot;palette&quot;), (mulfreq, &quot;*freq&quot;)]:
 plt.figure(layout='constrained')
 maxx = 0
 for (k, v) in variant.items():
  cur = k
  accx = [0]
  accy = [cur]
  lastx = 0
  for (howmany, x) in v:
   cur -= howmany
   if x == inf:
    x = lastx + 10
   accx += [x]
   accy += [cur]
   lastx = x
   maxx = max(maxx, x)
  plt.plot(accx, accy, label=f&quot;{k}&quot;)
 plt.ylabel('current_rgbs_len', fontdict={'family': 'DejaVu Sans Mono'})
 plt.xlabel('t', fontdict={'family': 'MathJax_Main'})
 plt.title(varname, fontdict={'family': 'MathJax_Main'})
 plt.legend()
 plt.xlim(0, maxx)
 plt.ylim(0, 1103347)
 plt.ticklabel_format(style='plain')
 # plt.show()
 plt.savefig(f&quot;{varname}.png&quot;)
 plt.close()
--&gt;
&lt;div class=&quot;side-by-each continuation&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.29-oneshot-palette.png&quot;&gt;&lt;img alt=&quot;Plot of current_rgbs_len against t for palette&quot; class=&quot;dark-invert&quot; src=&quot;/content/assets/blogn_t/018.29-oneshot-palette.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;(final [​[​\infty​]​] step rendered as-if it were &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10&lt;/span&gt; long)&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.30-oneshot-mulfreq.png&quot;&gt;&lt;img alt=&quot;Plot of current_rgbs_len against t for *freq&quot; class=&quot;dark-invert&quot; src=&quot;/content/assets/blogn_t/018.30-oneshot-mulfreq.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;(likewise)&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;h2 id=&quot;expand_rgb&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#expand_rgb&quot;&gt;#&lt;/a&gt; straight up &quot;bussing it&quot; and by &quot;it&quot;, haha, well. let's&lt;!--'--&gt; justr say. My rgbs.&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It's convenient to replace the CPU implementation isocallingconventionally but it's also a little silly and goofy
to run the [​[​p​]​]/[​[​p'&lt;!--'--&gt;​]​] transformations on the CPU when a dedicated FPU is available.
&lt;samp&gt;known_rgbs&lt;/samp&gt; work items &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8207e447aa91db490f70de0b9f1052c3e949c29f/item/src/main.rs#L160&quot;&gt;
 can be thinned&lt;/a&gt; to just [​[​({\color{var(--r)}r\color{initial}}{\color{var(--r)}r\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--g)}g\color{initial}}{\color{var(--b)}b\color{initial}}{\color{var(--b)}b\color{initial}}_{16}, \text{multiplicity of}\ \color{var(--r)}r\color{initial},\color{var(--g)}g\color{initial},\color{var(--b)}b\color{initial})​]​],
and the returned &lt;samp&gt;outputs&lt;/samp&gt; [​[​f​]​] mapping reduced from [​[​C \to P​]​] directly to [​[​C \to C​]​],
so the whole &lt;a href=&quot;#RgbStuffedInLab&quot;&gt;&lt;samp&gt;RgbStuffedInLab&lt;/samp&gt;&lt;/a&gt; dance can likewise go the way of the dinosaur:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; outputs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// was [[f32; 3]; ...]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; frequencies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// was Vec&amp;lt;(u32, Lab, u32)&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; freq &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
This also allows reducing the &lt;samp&gt;outputs&lt;/samp&gt; mapping from an array of (&lt;samp&gt;float3&lt;/samp&gt;, padding primitive)) to &lt;samp&gt;uint&lt;/samp&gt;,
quartering the allocation (this matches the ranges used with &lt;samp&gt;outputs&lt;/samp&gt; as a staging buffer),
and &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8207e447aa91db490f70de0b9f1052c3e949c29f/item/src/posterise_gpu.rs#L495&quot;&gt;
 turns the &lt;samp&gt;outputs&lt;/samp&gt; copy into a byte swizzle&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;                         &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(0)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;uint&gt; outputs; [HOST_VISIBLE]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token lifetime-annotation symbol&quot;&gt;'&lt;!--'--&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buffer_known_rgbs_bundle_map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map_memory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;KnownRgbsPack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buffer_known_rgbs_bundle_map&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bundle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... known_rgbs_freqs setup&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// expand_rgb.hlsl&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EXPAND_RGB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... everything through posterise_grid.kernel.hlsl.inc/posterise_grid_oneshot.kernel.hlsl.inc&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; out &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;out &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;         &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [​[​\color{var(--r)}r\color{initial}​]​]&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;out &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [​[​\color{var(--g)}g\color{initial}​]​]&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;out &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [​[​\color{var(--b)}b\color{initial}​]​]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
where
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8207e447aa91db490f70de0b9f1052c3e949c29f/item/src/expand_rgb.hlsl&quot;&gt;&lt;samp&gt;expand_rgb.hlsl&lt;/samp&gt;&lt;/a&gt;
is a trivial [​[​p \circ I​]​]:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shader.h&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; known_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;linear_srgb_to_oklab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unpack_rgb_to_r_g_b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
[​[​p^{-1}​]​] distributed across the kernels:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// HOST_VISIBLE&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;span class=&quot;token comment&quot;&gt;// &lt;a href=&quot;https://git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8207e447aa91db490f70de0b9f1052c3e949c29f/item/src/posterise_grid_oneshot.kernel.hlsl.inc#L62&quot;&gt;posterise_grid_oneshot.kernel.hlsl.inc&lt;/a&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;same&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pack_r_g_b_to_rgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;oklab_to_linear_srgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;span class=&quot;token comment&quot;&gt;// &lt;a href=&quot;https://git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/8207e447aa91db490f70de0b9f1052c3e949c29f/item/src/posterise_grid.kernel.hlsl.inc#L63&quot;&gt;posterise_grid.kernel.hlsl.inc&lt;/a&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pack_r_g_b_to_rgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;oklab_to_linear_srgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and predictable (un)packing in
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/e3c68498216d45ebdcbf8f01e22615734294e4a0/item/src/shader.h#L49&quot;&gt;&lt;samp&gt;shader.h&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;unpack_rgb_to_r_g_b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; rgb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pack_r_g_b_to_rgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; r_g_b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; rgb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;round&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;r_g_b &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;r &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;g &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;b &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
15.269616ms: 16755 RGBs pre
14.717513ms: 16755 RGBs pre
14.957794ms: 16755 RGBs pre
14.985565ms: 16755 RGBs pre
14.706948ms: 16755 RGBs pre
14.446141ms: 16755 RGBs pre
14.596467ms: 16755 RGBs pre
14.701212ms: 16755 RGBs pre
14.488098ms: 16755 RGBs pre
14.431047ms: 16755 RGBs pre
14.695477ms: 16755 RGBs pre
14.588317ms: 16755 RGBs pre
14.49957ms: 16755 RGBs pre
14.600391ms: 16755 RGBs pre
14.455799ms: 16755 RGBs pre
14.436178ms: 16755 RGBs pre
14.630577ms: 16755 RGBs pre
14.418671ms: 16755 RGBs pre
14.418972ms: 16755 RGBs pre
15.003375ms: 16755 RGBs pre
14.709363ms: 16755 RGBs pre
14.456705ms: 16755 RGBs pre
14.615182ms: 16755 RGBs pre
14.421085ms: 16755 RGBs pre
14.612164ms: 16755 RGBs pre
14.595864ms: 16755 RGBs pre
14.455498ms: 16755 RGBs pre
14.943304ms: 16755 RGBs pre
14.655933ms: 16755 RGBs pre
14.937267ms: 16755 RGBs pre
14.568998ms: 16755 RGBs pre
14.660763ms: 16755 RGBs pre
14.612164ms: 16755 RGBs pre
14.620012ms: 16755 RGBs pre
14.659555ms: 16755 RGBs pre
14.607032ms: 16755 RGBs pre
14.586505ms: 16755 RGBs pre
16.91385ms: 16755 RGBs pre
14.801128ms: 16755 RGBs pre
14.563564ms: 16755 RGBs pre
14.535189ms: 16755 RGBs pre
14.606428ms: 16755 RGBs pre
14.571715ms: 16755 RGBs pre
14.607937ms: 16755 RGBs pre
14.487193ms: 16755 RGBs pre
14.48991ms: 16755 RGBs pre
14.482967ms: 16755 RGBs pre
14.537906ms: 16755 RGBs pre
14.54998ms: 16755 RGBs pre
14.823164ms: 16755 RGBs pre
14.558432ms: 16755 RGBs pre
14.825277ms: 16755 RGBs pre
14.496853ms: 16755 RGBs pre
14.657745ms: 16755 RGBs pre
14.520398ms: 16755 RGBs pre
14.600391ms: 16755 RGBs pre
14.484476ms: 16755 RGBs pre
14.463648ms: 16755 RGBs pre
14.51255ms: 16755 RGBs pre
15.482729ms: 16755 RGBs pre
15.846471ms: 16755 RGBs pre
15.152192ms: 16755 RGBs pre
14.665593ms: 16755 RGBs pre
14.785432ms: 16755 RGBs pre
15.617963ms: 16755 RGBs pre
14.793279ms: 16755 RGBs pre
14.746189ms: 16755 RGBs pre
14.482666ms: 16755 RGBs pre
14.60824ms: 16755 RGBs pre
14.728984ms: 16755 RGBs pre
15.269616ms: 16755 RGBs pre
14.519794ms: 16755 RGBs pre
14.877801ms: 16755 RGBs pre
14.694873ms: 16755 RGBs pre
14.444329ms: 16755 RGBs pre
14.91674ms: 16755 RGBs pre
14.754642ms: 16755 RGBs pre
14.576243ms: 16755 RGBs pre
14.57262ms: 16755 RGBs pre
14.961416ms: 16755 RGBs pre
14.958699ms: 16755 RGBs pre
14.484778ms: 16755 RGBs pre
14.599486ms: 16755 RGBs pre
14.738643ms: 16755 RGBs pre
14.485382ms: 16755 RGBs pre
14.602202ms: 16755 RGBs pre
14.600089ms: 16755 RGBs pre
14.713589ms: 16755 RGBs pre
14.803241ms: 16755 RGBs pre
14.529454ms: 16755 RGBs pre
14.451876ms: 16755 RGBs pre
14.65865ms: 16755 RGBs pre
14.599183ms: 16755 RGBs pre
14.444631ms: 16755 RGBs pre
14.468478ms: 16755 RGBs pre
14.458215ms: 16755 RGBs pre
15.04141ms: 16755 RGBs pre
14.753435ms: 16755 RGBs pre
14.738341ms: 16755 RGBs pre
14.600089ms: 16755 RGBs pre
14.61639ms: 16755 RGBs pre
14.488099ms: 16755 RGBs pre
14.44614ms: 16755 RGBs pre
14.767018ms: 16755 RGBs pre
14.972585ms: 16755 RGBs pre
14.492928ms: 16755 RGBs pre
14.605221ms: 16755 RGBs pre
14.501683ms: 16755 RGBs pre
14.49323ms: 16755 RGBs pre
14.943607ms: 16755 RGBs pre
14.516474ms: 16755 RGBs pre
14.803543ms: 16755 RGBs pre
14.581374ms: 16755 RGBs pre
14.466969ms: 16755 RGBs pre
14.547868ms: 16755 RGBs pre
14.434971ms: 16755 RGBs pre
14.49474ms: 16755 RGBs pre
14.55813ms: 16755 RGBs pre
14.459724ms: 16755 RGBs pre
14.429236ms: 16755 RGBs pre
14.93606ms: 16755 RGBs pre
14.626049ms: 16755 RGBs pre
14.613673ms: 16755 RGBs pre
14.598882ms: 16755 RGBs pre
14.769433ms: 16755 RGBs pre
14.428029ms: 16755 RGBs pre
15.091216ms: 16755 RGBs pre
14.628464ms: 16755 RGBs pre
15.240939ms: 16755 RGBs pre
14.93606ms: 16755 RGBs pre
14.623634ms: 16755 RGBs pre
14.54998ms: 16755 RGBs pre
14.930626ms: 16755 RGBs pre
14.488702ms: 16755 RGBs pre
14.899837ms: 16755 RGBs pre
14.699703ms: 16755 RGBs pre
14.505003ms: 16755 RGBs pre
14.517077ms: 16755 RGBs pre
14.849728ms: 16755 RGBs pre
14.378825ms: 16755 RGBs pre
14.434367ms: 16755 RGBs pre
14.764603ms: 16755 RGBs pre
14.667404ms: 16755 RGBs pre
14.758566ms: 16755 RGBs pre
14.514964ms: 16755 RGBs pre
14.620917ms: 16755 RGBs pre
14.615786ms: 16755 RGBs pre
14.529152ms: 16755 RGBs pre
14.587411ms: 16755 RGBs pre
14.632389ms: 16755 RGBs pre
14.546056ms: 16755 RGBs pre
14.527341ms: 16755 RGBs pre
14.893196ms: 16755 RGBs pre
14.452781ms: 16755 RGBs pre
14.521304ms: 16755 RGBs pre
14.513757ms: 16755 RGBs pre
14.612466ms: 16755 RGBs pre
14.630276ms: 16755 RGBs pre
14.763698ms: 16755 RGBs pre
14.684308ms: 16755 RGBs pre
14.467874ms: 16755 RGBs pre
14.618805ms: 16755 RGBs pre
14.461837ms: 16755 RGBs pre
15.303726ms: 16755 RGBs pre
14.693364ms: 16755 RGBs pre
14.646575ms: 16755 RGBs pre
14.530057ms: 16755 RGBs pre
14.577147ms: 16755 RGBs pre
14.460327ms: 16755 RGBs pre
14.489608ms: 16755 RGBs pre
14.972585ms: 16755 RGBs pre
14.716305ms: 16755 RGBs pre
14.549075ms: 16755 RGBs pre
15.339949ms: 16755 RGBs pre
14.737738ms: 16755 RGBs pre
14.501079ms: 16755 RGBs pre
14.518285ms: 16755 RGBs pre
14.57594ms: 16755 RGBs pre
14.396031ms: 16755 RGBs pre
14.806562ms: 16755 RGBs pre
14.767924ms: 16755 RGBs pre
14.589222ms: 16755 RGBs pre
14.573828ms: 16755 RGBs pre
14.808675ms: 16755 RGBs pre
14.802637ms: 16755 RGBs pre
14.546358ms: 16755 RGBs pre
14.62937ms: 16755 RGBs pre
14.46063ms: 16755 RGBs pre
14.530058ms: 16755 RGBs pre
14.882329ms: 16755 RGBs pre
14.447348ms: 16755 RGBs pre
14.525529ms: 16755 RGBs pre
14.514361ms: 16755 RGBs pre
14.57262ms: 16755 RGBs pre
14.385165ms: 16755 RGBs pre
14.518587ms: 16755 RGBs pre
14.642047ms: 16755 RGBs pre
14.571412ms: 16755 RGBs pre
14.533679ms: 16755 RGBs pre
14.4558ms: 16755 RGBs pre
14.878706ms: 16755 RGBs pre
15.353835ms: 16755 RGBs pre
14.550584ms: 16755 RGBs pre
14.437386ms: 16755 RGBs pre
14.512248ms: 16755 RGBs pre
14.761886ms: 16755 RGBs pre
14.413237ms: 16755 RGBs pre
14.848822ms: 16755 RGBs pre
14.585298ms: 16755 RGBs pre
14.495343ms: 16755 RGBs pre
14.846408ms: 16755 RGBs pre
14.647481ms: 16755 RGBs pre
14.927306ms: 16755 RGBs pre
14.787846ms: 16755 RGBs pre
14.479345ms: 16755 RGBs pre
14.695779ms: 16755 RGBs pre
14.661669ms: 16755 RGBs pre
14.716004ms: 16755 RGBs pre
14.648387ms: 16755 RGBs pre
15.045031ms: 16755 RGBs pre
15.030543ms: 16755 RGBs pre
14.62454ms: 16755 RGBs pre
14.563866ms: 16755 RGBs pre
14.564167ms: 16755 RGBs pre
14.840974ms: 16755 RGBs pre
14.610654ms: 16755 RGBs pre
14.716004ms: 16755 RGBs pre
14.688535ms: 16755 RGBs pre
14.556017ms: 16755 RGBs pre
14.583789ms: 16755 RGBs pre
14.824371ms: 16755 RGBs pre
14.436783ms: 16755 RGBs pre
18.117972ms: 16755 RGBs pre
14.465157ms: 16755 RGBs pre
14.712381ms: 16755 RGBs pre
14.458215ms: 16755 RGBs pre
14.732002ms: 16755 RGBs pre
14.556923ms: 16755 RGBs pre
14.589524ms: 16755 RGBs pre
14.62786ms: 16755 RGBs pre
14.532472ms: 16755 RGBs pre
14.485382ms: 16755 RGBs pre
14.448857ms: 16755 RGBs pre
14.582582ms: 16755 RGBs pre
14.556319ms: 16755 RGBs pre
14.405992ms: 16755 RGBs pre
14.720532ms: 16755 RGBs pre
14.806863ms: 16755 RGBs pre
14.817127ms: 16755 RGBs pre
207.375178ms: 1103347 RGBs pre
206.889786ms: 1103347 RGBs pre
207.026227ms: 1103347 RGBs pre
206.303573ms: 1103347 RGBs pre
214.422716ms: 1103347 RGBs pre
209.206566ms: 1103347 RGBs pre
214.835662ms: 1103347 RGBs pre
208.592883ms: 1103347 RGBs pre
205.952509ms: 1103347 RGBs pre
206.126683ms: 1103347 RGBs pre
207.220625ms: 1103347 RGBs pre
207.862984ms: 1103347 RGBs pre
207.042225ms: 1103347 RGBs pre
207.649569ms: 1103347 RGBs pre
208.002745ms: 1103347 RGBs pre
206.284254ms: 1103347 RGBs pre
206.176791ms: 1103347 RGBs pre
206.011372ms: 1103347 RGBs pre
205.808823ms: 1103347 RGBs pre
206.140568ms: 1103347 RGBs pre
206.171659ms: 1103347 RGBs pre
206.260407ms: 1103347 RGBs pre
206.687842ms: 1103347 RGBs pre
208.269591ms: 1103347 RGBs pre
207.105012ms: 1103347 RGBs pre
206.182526ms: 1103347 RGBs pre
207.299712ms: 1103347 RGBs pre
206.65192ms: 1103347 RGBs pre
205.79373ms: 1103347 RGBs pre
207.740127ms: 1103347 RGBs pre
207.655908ms: 1103347 RGBs pre
205.951603ms: 1103347 RGBs pre
205.973639ms: 1103347 RGBs pre
206.982155ms: 1103347 RGBs pre
208.118359ms: 1103347 RGBs pre
206.540533ms: 1103347 RGBs pre
206.083818ms: 1103347 RGBs pre
206.179508ms: 1103347 RGBs pre
206.513667ms: 1103347 RGBs pre
212.864512ms: 1103347 RGBs pre
206.948649ms: 1103347 RGBs pre
219.791004ms: 1103347 RGBs pre
220.083808ms: 1103347 RGBs pre
209.27539ms: 1103347 RGBs pre
207.264395ms: 1103347 RGBs pre
206.384471ms: 1103347 RGBs pre
209.959406ms: 1103347 RGBs pre
382.314534ms: 1103347 RGBs pre
231.254158ms: 1103347 RGBs pre
206.903067ms: 1103347 RGBs pre
209.028468ms: 1103347 RGBs pre
211.753363ms: 1103347 RGBs pre
209.643961ms: 1103347 RGBs pre
207.603988ms: 1103347 RGBs pre
207.164781ms: 1103347 RGBs pre
206.989702ms: 1103347 RGBs pre
207.104409ms: 1103347 RGBs pre
208.374034ms: 1103347 RGBs pre
208.270194ms: 1103347 RGBs pre
206.438202ms: 1103347 RGBs pre
206.288178ms: 1103347 RGBs pre
206.184941ms: 1103347 RGBs pre
206.83696ms: 1103347 RGBs pre
208.303701ms: 1103347 RGBs pre
206.2592ms: 1103347 RGBs pre
207.499243ms: 1103347 RGBs pre
207.458793ms: 1103347 RGBs pre
208.677404ms: 1103347 RGBs pre
207.167196ms: 1103347 RGBs pre
11.883344ms: 16755 RGBs post
12.287837ms: 16755 RGBs post
11.841083ms: 16755 RGBs post
11.685928ms: 16755 RGBs post
11.927416ms: 16755 RGBs post
11.968771ms: 16755 RGBs post
11.72849ms: 16755 RGBs post
12.918424ms: 16755 RGBs post
12.292667ms: 16755 RGBs post
12.413411ms: 16755 RGBs post
12.864089ms: 16755 RGBs post
12.191544ms: 16755 RGBs post
11.695889ms: 16755 RGBs post
11.883646ms: 16755 RGBs post
12.033067ms: 16755 RGBs post
11.723358ms: 16755 RGBs post
11.828406ms: 16755 RGBs post
11.813916ms: 16755 RGBs post
11.793692ms: 16755 RGBs post
11.847121ms: 16755 RGBs post
11.70585ms: 16755 RGBs post
12.050273ms: 16755 RGBs post
13.196438ms: 16755 RGBs post
11.6814ms: 16755 RGBs post
11.835046ms: 16755 RGBs post
11.822368ms: 16755 RGBs post
12.030954ms: 16755 RGBs post
11.546166ms: 16755 RGBs post
11.739659ms: 16755 RGBs post
11.946433ms: 16755 RGBs post
11.872176ms: 16755 RGBs post
11.784334ms: 16755 RGBs post
11.984467ms: 16755 RGBs post
11.786447ms: 16755 RGBs post
11.981147ms: 16755 RGBs post
11.955489ms: 16755 RGBs post
11.675363ms: 16755 RGBs post
11.691361ms: 16755 RGBs post
12.35485ms: 16755 RGBs post
12.047859ms: 16755 RGBs post
11.716114ms: 16755 RGBs post
11.771052ms: 16755 RGBs post
12.037293ms: 16755 RGBs post
11.870968ms: 16755 RGBs post
11.736942ms: 16755 RGBs post
11.847724ms: 16755 RGBs post
11.747507ms: 16755 RGBs post
11.745092ms: 16755 RGBs post
11.90206ms: 16755 RGBs post
11.877307ms: 16755 RGBs post
12.033067ms: 16755 RGBs post
11.937377ms: 16755 RGBs post
11.740866ms: 16755 RGBs post
11.948244ms: 16755 RGBs post
11.85346ms: 16755 RGBs post
11.880929ms: 16755 RGBs post
11.896626ms: 16755 RGBs post
12.421259ms: 16755 RGBs post
12.135096ms: 16755 RGBs post
11.647289ms: 16755 RGBs post
11.820859ms: 16755 RGBs post
12.118493ms: 16755 RGBs post
11.714001ms: 16755 RGBs post
11.753545ms: 16755 RGBs post
11.946131ms: 16755 RGBs post
11.700115ms: 16755 RGBs post
11.983864ms: 16755 RGBs post
11.821463ms: 16755 RGBs post
11.812709ms: 16755 RGBs post
11.907795ms: 16755 RGBs post
12.188223ms: 16755 RGBs post
11.71219ms: 16755 RGBs post
11.725773ms: 16755 RGBs post
11.737244ms: 16755 RGBs post
11.864025ms: 16755 RGBs post
12.148076ms: 16755 RGBs post
11.822067ms: 16755 RGBs post
11.676268ms: 16755 RGBs post
11.703435ms: 16755 RGBs post
11.760185ms: 16755 RGBs post
12.45537ms: 16755 RGBs post
11.6977ms: 16755 RGBs post
11.997749ms: 16755 RGBs post
11.922887ms: 16755 RGBs post
11.784636ms: 16755 RGBs post
11.823878ms: 16755 RGBs post
12.93563ms: 16755 RGBs post
13.816761ms: 16755 RGBs post
11.776486ms: 16755 RGBs post
11.866138ms: 16755 RGBs post
11.719735ms: 16755 RGBs post
11.789164ms: 16755 RGBs post
11.88425ms: 16755 RGBs post
11.688946ms: 16755 RGBs post
11.790371ms: 16755 RGBs post
11.882438ms: 16755 RGBs post
11.708265ms: 16755 RGBs post
11.759883ms: 16755 RGBs post
11.867043ms: 16755 RGBs post
11.755355ms: 16755 RGBs post
16.842309ms: 16755 RGBs post
12.020389ms: 16755 RGBs post
11.873382ms: 16755 RGBs post
11.701624ms: 16755 RGBs post
11.728791ms: 16755 RGBs post
11.904173ms: 16755 RGBs post
11.708265ms: 16755 RGBs post
11.845611ms: 16755 RGBs post
11.684117ms: 16755 RGBs post
11.85014ms: 16755 RGBs post
11.854668ms: 16755 RGBs post
12.073516ms: 16755 RGBs post
11.838065ms: 16755 RGBs post
11.773769ms: 16755 RGBs post
11.698605ms: 16755 RGBs post
11.936472ms: 16755 RGBs post
11.851649ms: 16755 RGBs post
11.985675ms: 16755 RGBs post
11.854969ms: 16755 RGBs post
16.291111ms: 16755 RGBs post
14.287664ms: 16755 RGBs post
12.984531ms: 16755 RGBs post
13.881963ms: 16755 RGBs post
12.194563ms: 16755 RGBs post
15.649357ms: 16755 RGBs post
13.373026ms: 16755 RGBs post
11.830216ms: 16755 RGBs post
12.91118ms: 16755 RGBs post
13.710204ms: 16755 RGBs post
11.694078ms: 16755 RGBs post
11.937075ms: 16755 RGBs post
12.014955ms: 16755 RGBs post
12.291761ms: 16755 RGBs post
11.885155ms: 16755 RGBs post
11.865535ms: 16755 RGBs post
14.301851ms: 16755 RGBs post
17.028256ms: 16755 RGBs post
12.180375ms: 16755 RGBs post
11.872779ms: 16755 RGBs post
17.876182ms: 16755 RGBs post
12.712254ms: 16755 RGBs post
11.833839ms: 16755 RGBs post
11.974808ms: 16755 RGBs post
17.340982ms: 16755 RGBs post
11.8438ms: 16755 RGBs post
11.964846ms: 16755 RGBs post
11.809389ms: 16755 RGBs post
12.671502ms: 16755 RGBs post
11.904173ms: 16755 RGBs post
11.99956ms: 16755 RGBs post
11.88757ms: 16755 RGBs post
12.124531ms: 16755 RGBs post
18.310559ms: 16755 RGBs post
17.998435ms: 16755 RGBs post
16.138069ms: 16755 RGBs post
11.995334ms: 16755 RGBs post
12.007711ms: 16755 RGBs post
11.98326ms: 16755 RGBs post
17.523609ms: 16755 RGBs post
12.661843ms: 16755 RGBs post
11.864025ms: 16755 RGBs post
11.839574ms: 16755 RGBs post
15.667468ms: 16755 RGBs post
13.823101ms: 16755 RGBs post
11.946735ms: 16755 RGBs post
17.336757ms: 16755 RGBs post
11.822368ms: 16755 RGBs post
17.819432ms: 16755 RGBs post
11.815425ms: 16755 RGBs post
11.899343ms: 16755 RGBs post
12.414015ms: 16755 RGBs post
12.104306ms: 16755 RGBs post
12.842355ms: 16755 RGBs post
12.081666ms: 16755 RGBs post
11.849536ms: 16755 RGBs post
12.383829ms: 16755 RGBs post
11.850442ms: 16755 RGBs post
11.971186ms: 16755 RGBs post
12.258859ms: 16755 RGBs post
11.771656ms: 16755 RGBs post
12.064159ms: 16755 RGBs post
11.812105ms: 16755 RGBs post
11.754752ms: 16755 RGBs post
11.828104ms: 16755 RGBs post
11.720339ms: 16755 RGBs post
11.733018ms: 16755 RGBs post
11.968167ms: 16755 RGBs post
11.714ms: 16755 RGBs post
11.997447ms: 16755 RGBs post
12.196374ms: 16755 RGBs post
11.805766ms: 16755 RGBs post
11.896022ms: 16755 RGBs post
11.933151ms: 16755 RGBs post
11.730602ms: 16755 RGBs post
12.017974ms: 16755 RGBs post
11.920775ms: 16755 RGBs post
11.714302ms: 16755 RGBs post
11.808785ms: 16755 RGBs post
11.916549ms: 16755 RGBs post
11.788258ms: 16755 RGBs post
11.980242ms: 16755 RGBs post
11.946132ms: 16755 RGBs post
12.163169ms: 16755 RGBs post
11.989901ms: 16755 RGBs post
11.884854ms: 16755 RGBs post
11.926208ms: 16755 RGBs post
11.855573ms: 16755 RGBs post
11.737848ms: 16755 RGBs post
11.716113ms: 16755 RGBs post
11.893305ms: 16755 RGBs post
11.791579ms: 16755 RGBs post
11.824783ms: 16755 RGBs post
11.96545ms: 16755 RGBs post
11.850744ms: 16755 RGBs post
11.829311ms: 16755 RGBs post
11.810596ms: 16755 RGBs post
11.730301ms: 16755 RGBs post
11.763807ms: 16755 RGBs post
11.743884ms: 16755 RGBs post
11.857686ms: 16755 RGBs post
12.461407ms: 16755 RGBs post
11.876099ms: 16755 RGBs post
11.683512ms: 16755 RGBs post
11.904172ms: 16755 RGBs post
12.333116ms: 16755 RGBs post
11.84531ms: 16755 RGBs post
11.791579ms: 16755 RGBs post
11.714906ms: 16755 RGBs post
11.98175ms: 16755 RGBs post
11.882741ms: 16755 RGBs post
11.753847ms: 16755 RGBs post
11.955187ms: 16755 RGBs post
11.810294ms: 16755 RGBs post
11.745696ms: 16755 RGBs post
12.074422ms: 16755 RGBs post
11.83565ms: 16755 RGBs post
11.94432ms: 16755 RGBs post
11.891797ms: 16755 RGBs post
11.902663ms: 16755 RGBs post
11.700115ms: 16755 RGBs post
11.722453ms: 16755 RGBs post
11.834745ms: 16755 RGBs post
11.956998ms: 16755 RGBs post
11.775278ms: 16755 RGBs post
11.821765ms: 16755 RGBs post
11.680192ms: 16755 RGBs post
12.005296ms: 16755 RGBs post
12.041217ms: 16755 RGBs post
11.697096ms: 16755 RGBs post
11.860403ms: 16755 RGBs post
11.904474ms: 16755 RGBs post
11.644271ms: 16755 RGBs post
11.800936ms: 16755 RGBs post
11.85014ms: 16755 RGBs post
11.805163ms: 16755 RGBs post
11.856479ms: 16755 RGBs post
11.857082ms: 16755 RGBs post
11.799728ms: 16755 RGBs post
11.927114ms: 16755 RGBs post
11.964544ms: 16755 RGBs post
11.826293ms: 16755 RGBs post
11.928926ms: 16755 RGBs post
11.831122ms: 16755 RGBs post
11.813615ms: 16755 RGBs post
12.194563ms: 16755 RGBs post
11.828707ms: 16755 RGBs post
13.002945ms: 16755 RGBs post
11.924397ms: 16755 RGBs post
11.70102ms: 16755 RGBs post
11.755959ms: 16755 RGBs post
11.86644ms: 16755 RGBs post
11.82418ms: 16755 RGBs post
11.748714ms: 16755 RGBs post
11.961224ms: 16755 RGBs post
11.793389ms: 16755 RGBs post
11.803955ms: 16755 RGBs post
11.675664ms: 16755 RGBs post
11.71551ms: 16755 RGBs post
11.790673ms: 16755 RGBs post
11.733319ms: 16755 RGBs post
11.74328ms: 16755 RGBs post
12.204222ms: 16755 RGBs post
11.726377ms: 16755 RGBs post
11.730301ms: 16755 RGBs post
11.822368ms: 16755 RGBs post
11.734527ms: 16755 RGBs post
11.840178ms: 16755 RGBs post
11.809388ms: 16755 RGBs post
18.790215ms: 16755 RGBs post
12.722818ms: 16755 RGBs post
11.686531ms: 16755 RGBs post
11.988996ms: 16755 RGBs post
11.747205ms: 16755 RGBs post
11.698304ms: 16755 RGBs post
12.174639ms: 16755 RGBs post
11.809086ms: 16755 RGBs post
11.919567ms: 16755 RGBs post
11.836556ms: 16755 RGBs post
11.805163ms: 16755 RGBs post
12.069592ms: 16755 RGBs post
11.914738ms: 16755 RGBs post
11.701323ms: 16755 RGBs post
11.72034ms: 16755 RGBs post
12.020993ms: 16755 RGBs post
12.026728ms: 16755 RGBs post
11.749922ms: 16755 RGBs post
11.702832ms: 16755 RGBs post
12.191845ms: 16755 RGBs post
11.947641ms: 16755 RGBs post
11.742073ms: 16755 RGBs post
11.775882ms: 16755 RGBs post
11.856479ms: 16755 RGBs post
11.713094ms: 16755 RGBs post
11.757469ms: 16755 RGBs post
12.190638ms: 16755 RGBs post
11.907795ms: 16755 RGBs post
11.999862ms: 16755 RGBs post
11.815124ms: 16755 RGBs post
12.054499ms: 16755 RGBs post
11.76411ms: 16755 RGBs post
11.821161ms: 16755 RGBs post
12.227767ms: 16755 RGBs post
11.653327ms: 16755 RGBs post
11.692568ms: 16755 RGBs post
11.674759ms: 16755 RGBs post
12.073818ms: 16755 RGBs post
11.674759ms: 16755 RGBs post
11.89904ms: 16755 RGBs post
11.866138ms: 16755 RGBs post
11.886966ms: 16755 RGBs post
11.688644ms: 16755 RGBs post
11.872477ms: 16755 RGBs post
11.716717ms: 16755 RGBs post
11.767128ms: 16755 RGBs post
11.847423ms: 16755 RGBs post
11.694983ms: 16755 RGBs post
11.712491ms: 16755 RGBs post
11.843196ms: 16755 RGBs post
11.887872ms: 16755 RGBs post
12.100382ms: 16755 RGBs post
12.142341ms: 16755 RGBs post
11.67325ms: 16755 RGBs post
11.682607ms: 16755 RGBs post
11.822972ms: 16755 RGBs post
11.742375ms: 16755 RGBs post
11.678682ms: 16755 RGBs post
11.944018ms: 16755 RGBs post
11.731508ms: 16755 RGBs post
11.725471ms: 16755 RGBs post
11.894513ms: 16755 RGBs post
11.673249ms: 16755 RGBs post
11.751431ms: 16755 RGBs post
11.735432ms: 16755 RGBs post
11.710076ms: 16755 RGBs post
11.87942ms: 16755 RGBs post
11.870364ms: 16755 RGBs post
11.728792ms: 16755 RGBs post
12.04665ms: 16755 RGBs post
12.101288ms: 16755 RGBs post
11.822972ms: 16755 RGBs post
11.749016ms: 16755 RGBs post
11.868553ms: 16755 RGBs post
11.852856ms: 16755 RGBs post
11.749319ms: 16755 RGBs post
12.125738ms: 16755 RGBs post
12.464124ms: 16755 RGBs post
11.873382ms: 16755 RGBs post
11.744186ms: 16755 RGBs post
12.092835ms: 16755 RGBs post
11.715812ms: 16755 RGBs post
11.961828ms: 16755 RGBs post
11.88425ms: 16755 RGBs post
11.951564ms: 16755 RGBs post
11.796106ms: 16755 RGBs post
11.939792ms: 16755 RGBs post
11.931642ms: 16755 RGBs post
11.840178ms: 16755 RGBs post
11.934056ms: 16755 RGBs post
12.085893ms: 16755 RGBs post
11.802144ms: 16755 RGBs post
11.817538ms: 16755 RGBs post
12.026124ms: 16755 RGBs post
11.908701ms: 16755 RGBs post
12.264896ms: 16755 RGBs post
11.887872ms: 16755 RGBs post
11.709774ms: 16755 RGBs post
11.73332ms: 16755 RGBs post
11.892702ms: 16755 RGBs post
12.170716ms: 16755 RGBs post
11.981147ms: 16755 RGBs post
11.829613ms: 16755 RGBs post
11.719434ms: 16755 RGBs post
11.688342ms: 16755 RGBs post
11.970582ms: 16755 RGBs post
11.753544ms: 16755 RGBs post
11.771958ms: 16755 RGBs post
11.721848ms: 16755 RGBs post
11.721849ms: 16755 RGBs post
11.817841ms: 16755 RGBs post
11.753242ms: 16755 RGBs post
11.806974ms: 16755 RGBs post
11.845008ms: 16755 RGBs post
11.762902ms: 16755 RGBs post
11.673853ms: 16755 RGBs post
11.834141ms: 16755 RGBs post
11.87459ms: 16755 RGBs post
11.688343ms: 16755 RGBs post
11.718227ms: 16755 RGBs post
11.909606ms: 16755 RGBs post
11.812709ms: 16755 RGBs post
11.771957ms: 16755 RGBs post
11.760788ms: 16755 RGBs post
11.880326ms: 16755 RGBs post
12.501253ms: 16755 RGBs post
11.673249ms: 16755 RGBs post
11.853762ms: 16755 RGBs post
11.941ms: 16755 RGBs post
11.790371ms: 16755 RGBs post
11.846517ms: 16755 RGBs post
13.126707ms: 16755 RGBs post
11.893004ms: 16755 RGBs post
11.75626ms: 16755 RGBs post
11.797917ms: 16755 RGBs post
11.686531ms: 16755 RGBs post
11.700718ms: 16755 RGBs post
11.886363ms: 16755 RGBs post
11.693172ms: 16755 RGBs post
11.696794ms: 16755 RGBs post
11.84531ms: 16755 RGBs post
11.716717ms: 16755 RGBs post
12.010126ms: 16755 RGBs post
11.842593ms: 16755 RGBs post
11.733621ms: 16755 RGBs post
11.840782ms: 16755 RGBs post
11.855874ms: 16755 RGBs post
11.795502ms: 16755 RGBs post
11.685022ms: 16755 RGBs post
11.817539ms: 16755 RGBs post
11.978732ms: 16755 RGBs post
11.738149ms: 16755 RGBs post
11.842291ms: 16755 RGBs post
18.712033ms: 16755 RGBs post
12.98755ms: 16755 RGBs post
11.734225ms: 16755 RGBs post
11.873383ms: 16755 RGBs post
29.11113ms: 1103347 RGBs post
28.613965ms: 1103347 RGBs post
31.356368ms: 1103347 RGBs post
36.353972ms: 1103347 RGBs post
28.503182ms: 1103347 RGBs post
28.629963ms: 1103347 RGBs post
28.683997ms: 1103347 RGBs post
28.578949ms: 1103347 RGBs post
29.00729ms: 1103347 RGBs post
28.717805ms: 1103347 RGBs post
28.999742ms: 1103347 RGBs post
28.491108ms: 1103347 RGBs post
29.185387ms: 1103347 RGBs post
28.412021ms: 1103347 RGBs post
28.910392ms: 1103347 RGBs post
28.955067ms: 1103347 RGBs post
31.494016ms: 1103347 RGBs post
28.85485ms: 1103347 RGBs post
28.958388ms: 1103347 RGBs post
28.448244ms: 1103347 RGBs post
29.806314ms: 1103347 RGBs post
29.012421ms: 1103347 RGBs post
32.068759ms: 1103347 RGBs post
29.012723ms: 1103347 RGBs post
28.553593ms: 1103347 RGBs post
29.088188ms: 1103347 RGBs post
28.472694ms: 1103347 RGBs post
28.479335ms: 1103347 RGBs post
28.680072ms: 1103347 RGBs post
28.585288ms: 1103347 RGBs post
29.222214ms: 1103347 RGBs post
28.607927ms: 1103347 RGBs post
28.675243ms: 1103347 RGBs post
28.83704ms: 1103347 RGBs post
29.055285ms: 1103347 RGBs post
29.652366ms: 1103347 RGBs post
28.92307ms: 1103347 RGBs post
29.016345ms: 1103347 RGBs post
28.883225ms: 1103347 RGBs post
28.664376ms: 1103347 RGBs post
28.952653ms: 1103347 RGBs post
28.712673ms: 1103347 RGBs post
28.372476ms: 1103347 RGBs post
29.004874ms: 1103347 RGBs post
28.805948ms: 1103347 RGBs post
28.742859ms: 1103347 RGBs post
28.962916ms: 1103347 RGBs post
29.392765ms: 1103347 RGBs post
28.616682ms: 1103347 RGBs post
29.99709ms: 1103347 RGBs post
29.087282ms: 1103347 RGBs post
28.824663ms: 1103347 RGBs post
31.461717ms: 1103347 RGBs post
28.625134ms: 1103347 RGBs post
28.375193ms: 1103347 RGBs post
28.605211ms: 1103347 RGBs post
28.523708ms: 1103347 RGBs post
28.625133ms: 1103347 RGBs post
29.193537ms: 1103347 RGBs post
29.199273ms: 1103347 RGBs post
28.555706ms: 1103347 RGBs post
28.933937ms: 1103347 RGBs post
28.582571ms: 1103347 RGBs post
28.754632ms: 1103347 RGBs post
28.522199ms: 1103347 RGBs post
28.485373ms: 1103347 RGBs post
28.392701ms: 1103347 RGBs post
28.668903ms: 1103347 RGBs post
28.421077ms: 1103347 RGBs post
28.796289ms: 1103347 RGBs post
28.477524ms: 1103347 RGBs post
29.003365ms: 1103347 RGBs post
28.595854ms: 1103347 RGBs post
28.639322ms: 1103347 RGBs post
28.671922ms: 1103347 RGBs post
28.71871ms: 1103347 RGBs post
28.677959ms: 1103347 RGBs post
28.631775ms: 1103347 RGBs post
29.032948ms: 1103347 RGBs post
28.704523ms: 1103347 RGBs post
28.633586ms: 1103347 RGBs post
28.558423ms: 1103347 RGBs post
28.798402ms: 1103347 RGBs post
28.540915ms: 1103347 RGBs post
28.574723ms: 1103347 RGBs post
32.734965ms: 1103347 RGBs post
28.86632ms: 1103347 RGBs post
28.573817ms: 1103347 RGBs post
28.498352ms: 1103347 RGBs post
28.75433ms: 1103347 RGBs post
28.735313ms: 1103347 RGBs post
28.78361ms: 1103347 RGBs post
28.972877ms: 1103347 RGBs post
28.762178ms: 1103347 RGBs post
28.536085ms: 1103347 RGBs post
28.79478ms: 1103347 RGBs post
28.780894ms: 1103347 RGBs post
28.992196ms: 1103347 RGBs post
28.604003ms: 1103347 RGBs post
29.092414ms: 1103347 RGBs post
28.599777ms: 1103347 RGBs post
28.526727ms: 1103347 RGBs post
29.018157ms: 1103347 RGBs post
28.894998ms: 1103347 RGBs post
28.548461ms: 1103347 RGBs post
32.047025ms: 1103347 RGBs post
28.82738ms: 1103347 RGBs post
28.868735ms: 1103347 RGBs post
28.485674ms: 1103347 RGBs post
28.799005ms: 1103347 RGBs post
28.706636ms: 1103347 RGBs post
28.594344ms: 1103347 RGBs post
28.823456ms: 1103347 RGBs post
29.12592ms: 1103347 RGBs post
28.646868ms: 1103347 RGBs post
28.825267ms: 1103347 RGBs post
28.899224ms: 1103347 RGBs post
28.76248ms: 1103347 RGBs post
28.832512ms: 1103347 RGBs post
28.862396ms: 1103347 RGBs post
28.486882ms: 1103347 RGBs post
29.208329ms: 1103347 RGBs post
29.744735ms: 1103347 RGBs post
29.116563ms: 1103347 RGBs post
28.838549ms: 1103347 RGBs post
29.012119ms: 1103347 RGBs post
28.773951ms: 1103347 RGBs post
29.348392ms: 1103347 RGBs post
28.754331ms: 1103347 RGBs post
28.482052ms: 1103347 RGBs post
28.728068ms: 1103347 RGBs post
29.193839ms: 1103347 RGBs post
28.765499ms: 1103347 RGBs post
28.446131ms: 1103347 RGBs post
28.611551ms: 1103347 RGBs post
29.440761ms: 1103347 RGBs post
28.693052ms: 1103347 RGBs post
28.992498ms: 1103347 RGBs post
28.861792ms: 1103347 RGBs post
28.707239ms: 1103347 RGBs post
28.512842ms: 1103347 RGBs post
28.524011ms: 1103347 RGBs post
28.953559ms: 1103347 RGBs post
29.097848ms: 1103347 RGBs post
28.561139ms: 1103347 RGBs post
28.614569ms: 1103347 RGBs post
28.69426ms: 1103347 RGBs post
28.412926ms: 1103347 RGBs post
28.985555ms: 1103347 RGBs post
28.77214ms: 1103347 RGBs post
28.406285ms: 1103347 RGBs post
29.093621ms: 1103347 RGBs post
28.853642ms: 1103347 RGBs post
29.256022ms: 1103347 RGBs post
28.45579ms: 1103347 RGBs post
28.854246ms: 1103347 RGBs post
28.752217ms: 1103347 RGBs post
29.016345ms: 1103347 RGBs post
28.64566ms: 1103347 RGBs post
28.443716ms: 1103347 RGBs post
28.718408ms: 1103347 RGBs post
28.961407ms: 1103347 RGBs post
29.243344ms: 1103347 RGBs post
28.535481ms: 1103347 RGBs post
29.007893ms: 1103347 RGBs post
29.170898ms: 1103347 RGBs post
29.083962ms: 1103347 RGBs post
28.767008ms: 1103347 RGBs post
28.863ms: 1103347 RGBs post
28.703014ms: 1103347 RGBs post
28.72837ms: 1103347 RGBs post
28.692448ms: 1103347 RGBs post
66.409µs: cmdbussy expand_rgb.hlsl 16755
94.784µs: cmdbussy expand_rgb.hlsl 16755
99.312µs: cmdbussy expand_rgb.hlsl 16755
71.541µs: cmdbussy expand_rgb.hlsl 16755
57.958µs: cmdbussy expand_rgb.hlsl 16755
64.598µs: cmdbussy expand_rgb.hlsl 16755
88.143µs: cmdbussy expand_rgb.hlsl 16755
70.333µs: cmdbussy expand_rgb.hlsl 16755
102.331µs: cmdbussy expand_rgb.hlsl 16755
72.145µs: cmdbussy expand_rgb.hlsl 16755
59.769µs: cmdbussy expand_rgb.hlsl 16755
66.409µs: cmdbussy expand_rgb.hlsl 16755
54.335µs: cmdbussy expand_rgb.hlsl 16755
134.328µs: cmdbussy expand_rgb.hlsl 16755
106.556µs: cmdbussy expand_rgb.hlsl 16755
92.973µs: cmdbussy expand_rgb.hlsl 16755
98.104µs: cmdbussy expand_rgb.hlsl 16755
89.351µs: cmdbussy expand_rgb.hlsl 16755
100.52µs: cmdbussy expand_rgb.hlsl 16755
137.649µs: cmdbussy expand_rgb.hlsl 16755
90.257µs: cmdbussy expand_rgb.hlsl 16755
130.705µs: cmdbussy expand_rgb.hlsl 16755
293.711µs: cmdbussy expand_rgb.hlsl 16755
109.273µs: cmdbussy expand_rgb.hlsl 16755
77.277µs: cmdbussy expand_rgb.hlsl 16755
91.765µs: cmdbussy expand_rgb.hlsl 16755
114.103µs: cmdbussy expand_rgb.hlsl 16755
69.126µs: cmdbussy expand_rgb.hlsl 16755
88.445µs: cmdbussy expand_rgb.hlsl 16755
95.388µs: cmdbussy expand_rgb.hlsl 16755
98.105µs: cmdbussy expand_rgb.hlsl 16755
115.915µs: cmdbussy expand_rgb.hlsl 16755
126.781µs: cmdbussy expand_rgb.hlsl 16755
132.818µs: cmdbussy expand_rgb.hlsl 16755
61.58µs: cmdbussy expand_rgb.hlsl 16755
95.388µs: cmdbussy expand_rgb.hlsl 16755
123.763µs: cmdbussy expand_rgb.hlsl 16755
134.328µs: cmdbussy expand_rgb.hlsl 16755
83.615µs: cmdbussy expand_rgb.hlsl 16755
132.517µs: cmdbussy expand_rgb.hlsl 16755
92.973µs: cmdbussy expand_rgb.hlsl 16755
92.672µs: cmdbussy expand_rgb.hlsl 16755
90.86µs: cmdbussy expand_rgb.hlsl 16755
102.935µs: cmdbussy expand_rgb.hlsl 16755
82.408µs: cmdbussy expand_rgb.hlsl 16755
110.179µs: cmdbussy expand_rgb.hlsl 16755
92.671µs: cmdbussy expand_rgb.hlsl 16755
93.879µs: cmdbussy expand_rgb.hlsl 16755
78.181µs: cmdbussy expand_rgb.hlsl 16755
93.275µs: cmdbussy expand_rgb.hlsl 16755
89.351µs: cmdbussy expand_rgb.hlsl 16755
86.634µs: cmdbussy expand_rgb.hlsl 16755
98.708µs: cmdbussy expand_rgb.hlsl 16755
96.293µs: cmdbussy expand_rgb.hlsl 16755
129.498µs: cmdbussy expand_rgb.hlsl 16755
78.785µs: cmdbussy expand_rgb.hlsl 16755
79.993µs: cmdbussy expand_rgb.hlsl 16755
77.276µs: cmdbussy expand_rgb.hlsl 16755
68.824µs: cmdbussy expand_rgb.hlsl 16755
78.786µs: cmdbussy expand_rgb.hlsl 16755
116.82µs: cmdbussy expand_rgb.hlsl 16755
83.616µs: cmdbussy expand_rgb.hlsl 16755
116.518µs: cmdbussy expand_rgb.hlsl 16755
113.801µs: cmdbussy expand_rgb.hlsl 16755
115.612µs: cmdbussy expand_rgb.hlsl 16755
104.443µs: cmdbussy expand_rgb.hlsl 16755
116.518µs: cmdbussy expand_rgb.hlsl 16755
89.653µs: cmdbussy expand_rgb.hlsl 16755
107.764µs: cmdbussy expand_rgb.hlsl 16755
109.273µs: cmdbussy expand_rgb.hlsl 16755
82.71µs: cmdbussy expand_rgb.hlsl 16755
93.576µs: cmdbussy expand_rgb.hlsl 16755
99.312µs: cmdbussy expand_rgb.hlsl 16755
133.422µs: cmdbussy expand_rgb.hlsl 16755
136.742µs: cmdbussy expand_rgb.hlsl 16755
93.879µs: cmdbussy expand_rgb.hlsl 16755
113.802µs: cmdbussy expand_rgb.hlsl 16755
81.804µs: cmdbussy expand_rgb.hlsl 16755
102.632µs: cmdbussy expand_rgb.hlsl 16755
82.407µs: cmdbussy expand_rgb.hlsl 16755
98.406µs: cmdbussy expand_rgb.hlsl 16755
88.445µs: cmdbussy expand_rgb.hlsl 16755
102.633µs: cmdbussy expand_rgb.hlsl 16755
89.955µs: cmdbussy expand_rgb.hlsl 16755
82.106µs: cmdbussy expand_rgb.hlsl 16755
101.425µs: cmdbussy expand_rgb.hlsl 16755
70.334µs: cmdbussy expand_rgb.hlsl 16755
96.595µs: cmdbussy expand_rgb.hlsl 16755
71.541µs: cmdbussy expand_rgb.hlsl 16755
124.971µs: cmdbussy expand_rgb.hlsl 16755
114.104µs: cmdbussy expand_rgb.hlsl 16755
105.953µs: cmdbussy expand_rgb.hlsl 16755
110.481µs: cmdbussy expand_rgb.hlsl 16755
107.16µs: cmdbussy expand_rgb.hlsl 16755
86.634µs: cmdbussy expand_rgb.hlsl 16755
87.54µs: cmdbussy expand_rgb.hlsl 16755
88.445µs: cmdbussy expand_rgb.hlsl 16755
109.274µs: cmdbussy expand_rgb.hlsl 16755
96.293µs: cmdbussy expand_rgb.hlsl 16755
95.086µs: cmdbussy expand_rgb.hlsl 16755
101.123µs: cmdbussy expand_rgb.hlsl 16755
82.408µs: cmdbussy expand_rgb.hlsl 16755
126.479µs: cmdbussy expand_rgb.hlsl 16755
124.367µs: cmdbussy expand_rgb.hlsl 16755
87.238µs: cmdbussy expand_rgb.hlsl 16755
101.426µs: cmdbussy expand_rgb.hlsl 16755
70.635µs: cmdbussy expand_rgb.hlsl 16755
102.633µs: cmdbussy expand_rgb.hlsl 16755
364.346µs: cmdbussy expand_rgb.hlsl 16755
124.668µs: cmdbussy expand_rgb.hlsl 16755
105.651µs: cmdbussy expand_rgb.hlsl 16755
98.708µs: cmdbussy expand_rgb.hlsl 16755
105.349µs: cmdbussy expand_rgb.hlsl 16755
99.916µs: cmdbussy expand_rgb.hlsl 16755
93.275µs: cmdbussy expand_rgb.hlsl 16755
68.825µs: cmdbussy expand_rgb.hlsl 16755
77.88µs: cmdbussy expand_rgb.hlsl 16755
68.824µs: cmdbussy expand_rgb.hlsl 16755
61.277µs: cmdbussy expand_rgb.hlsl 16755
13.201569ms: cmdbussy expand_rgb.hlsl 16755
53.732µs: cmdbussy expand_rgb.hlsl 16755
70.333µs: cmdbussy expand_rgb.hlsl 16755
86.935µs: cmdbussy expand_rgb.hlsl 16755
50.109µs: cmdbussy expand_rgb.hlsl 16755
68.824µs: cmdbussy expand_rgb.hlsl 16755
95.086µs: cmdbussy expand_rgb.hlsl 16755
84.219µs: cmdbussy expand_rgb.hlsl 16755
81.2µs: cmdbussy expand_rgb.hlsl 16755
86.634µs: cmdbussy expand_rgb.hlsl 16755
124.367µs: cmdbussy expand_rgb.hlsl 16755
118.027µs: cmdbussy expand_rgb.hlsl 16755
89.049µs: cmdbussy expand_rgb.hlsl 16755
84.822µs: cmdbussy expand_rgb.hlsl 16755
105.047µs: cmdbussy expand_rgb.hlsl 16755
91.162µs: cmdbussy expand_rgb.hlsl 16755
109.878µs: cmdbussy expand_rgb.hlsl 16755
82.71µs: cmdbussy expand_rgb.hlsl 16755
75.163µs: cmdbussy expand_rgb.hlsl 16755
91.162µs: cmdbussy expand_rgb.hlsl 16755
101.124µs: cmdbussy expand_rgb.hlsl 16755
63.693µs: cmdbussy expand_rgb.hlsl 16755
93.879µs: cmdbussy expand_rgb.hlsl 16755
70.032µs: cmdbussy expand_rgb.hlsl 16755
83.615µs: cmdbussy expand_rgb.hlsl 16755
58.863µs: cmdbussy expand_rgb.hlsl 16755
88.747µs: cmdbussy expand_rgb.hlsl 16755
78.785µs: cmdbussy expand_rgb.hlsl 16755
81.502µs: cmdbussy expand_rgb.hlsl 16755
70.032µs: cmdbussy expand_rgb.hlsl 16755
82.408µs: cmdbussy expand_rgb.hlsl 16755
70.937µs: cmdbussy expand_rgb.hlsl 16755
97.803µs: cmdbussy expand_rgb.hlsl 16755
81.804µs: cmdbussy expand_rgb.hlsl 16755
71.54µs: cmdbussy expand_rgb.hlsl 16755
86.936µs: cmdbussy expand_rgb.hlsl 16755
73.05µs: cmdbussy expand_rgb.hlsl 16755
90.256µs: cmdbussy expand_rgb.hlsl 16755
76.069µs: cmdbussy expand_rgb.hlsl 16755
87.841µs: cmdbussy expand_rgb.hlsl 16755
76.069µs: cmdbussy expand_rgb.hlsl 16755
119.537µs: cmdbussy expand_rgb.hlsl 16755
58.863µs: cmdbussy expand_rgb.hlsl 16755
89.351µs: cmdbussy expand_rgb.hlsl 16755
95.69µs: cmdbussy expand_rgb.hlsl 16755
86.936µs: cmdbussy expand_rgb.hlsl 16755
102.33µs: cmdbussy expand_rgb.hlsl 16755
83.012µs: cmdbussy expand_rgb.hlsl 16755
69.428µs: cmdbussy expand_rgb.hlsl 16755
98.708µs: cmdbussy expand_rgb.hlsl 16755
74.258µs: cmdbussy expand_rgb.hlsl 16755
118.33µs: cmdbussy expand_rgb.hlsl 16755
68.523µs: cmdbussy expand_rgb.hlsl 16755
85.125µs: cmdbussy expand_rgb.hlsl 16755
68.522µs: cmdbussy expand_rgb.hlsl 16755
83.011µs: cmdbussy expand_rgb.hlsl 16755
79.994µs: cmdbussy expand_rgb.hlsl 16755
97.199µs: cmdbussy expand_rgb.hlsl 16755
82.408µs: cmdbussy expand_rgb.hlsl 16755
67.616µs: cmdbussy expand_rgb.hlsl 16755
118.027µs: cmdbussy expand_rgb.hlsl 16755
90.256µs: cmdbussy expand_rgb.hlsl 16755
131.611µs: cmdbussy expand_rgb.hlsl 16755
66.711µs: cmdbussy expand_rgb.hlsl 16755
132.215µs: cmdbussy expand_rgb.hlsl 16755
89.954µs: cmdbussy expand_rgb.hlsl 16755
102.029µs: cmdbussy expand_rgb.hlsl 16755
98.407µs: cmdbussy expand_rgb.hlsl 16755
114.104µs: cmdbussy expand_rgb.hlsl 16755
83.012µs: cmdbussy expand_rgb.hlsl 16755
105.047µs: cmdbussy expand_rgb.hlsl 16755
93.275µs: cmdbussy expand_rgb.hlsl 16755
101.124µs: cmdbussy expand_rgb.hlsl 16755
124.668µs: cmdbussy expand_rgb.hlsl 16755
75.465µs: cmdbussy expand_rgb.hlsl 16755
60.674µs: cmdbussy expand_rgb.hlsl 16755
133.724µs: cmdbussy expand_rgb.hlsl 16755
112.594µs: cmdbussy expand_rgb.hlsl 16755
95.086µs: cmdbussy expand_rgb.hlsl 16755
101.123µs: cmdbussy expand_rgb.hlsl 16755
100.218µs: cmdbussy expand_rgb.hlsl 16755
102.934µs: cmdbussy expand_rgb.hlsl 16755
97.803µs: cmdbussy expand_rgb.hlsl 16755
62.787µs: cmdbussy expand_rgb.hlsl 16755
124.065µs: cmdbussy expand_rgb.hlsl 16755
75.163µs: cmdbussy expand_rgb.hlsl 16755
90.86µs: cmdbussy expand_rgb.hlsl 16755
91.766µs: cmdbussy expand_rgb.hlsl 16755
93.879µs: cmdbussy expand_rgb.hlsl 16755
88.144µs: cmdbussy expand_rgb.hlsl 16755
87.539µs: cmdbussy expand_rgb.hlsl 16755
82.106µs: cmdbussy expand_rgb.hlsl 16755
116.82µs: cmdbussy expand_rgb.hlsl 16755
130.706µs: cmdbussy expand_rgb.hlsl 16755
112.293µs: cmdbussy expand_rgb.hlsl 16755
106.254µs: cmdbussy expand_rgb.hlsl 16755
123.763µs: cmdbussy expand_rgb.hlsl 16755
94.784µs: cmdbussy expand_rgb.hlsl 16755
70.334µs: cmdbussy expand_rgb.hlsl 16755
351.667µs: cmdbussy expand_rgb.hlsl 16755
126.178µs: cmdbussy expand_rgb.hlsl 16755
75.767µs: cmdbussy expand_rgb.hlsl 16755
101.727µs: cmdbussy expand_rgb.hlsl 16755
127.989µs: cmdbussy expand_rgb.hlsl 16755
78.786µs: cmdbussy expand_rgb.hlsl 16755
111.689µs: cmdbussy expand_rgb.hlsl 16755
63.089µs: cmdbussy expand_rgb.hlsl 16755
97.501µs: cmdbussy expand_rgb.hlsl 16755
103.84µs: cmdbussy expand_rgb.hlsl 16755
82.106µs: cmdbussy expand_rgb.hlsl 16755
83.615µs: cmdbussy expand_rgb.hlsl 16755
106.254µs: cmdbussy expand_rgb.hlsl 16755
114.707µs: cmdbussy expand_rgb.hlsl 16755
95.086µs: cmdbussy expand_rgb.hlsl 16755
113.801µs: cmdbussy expand_rgb.hlsl 16755
62.787µs: cmdbussy expand_rgb.hlsl 16755
138.252µs: cmdbussy expand_rgb.hlsl 16755
78.786µs: cmdbussy expand_rgb.hlsl 16755
85.426µs: cmdbussy expand_rgb.hlsl 16755
111.387µs: cmdbussy expand_rgb.hlsl 16755
96.595µs: cmdbussy expand_rgb.hlsl 16755
105.953µs: cmdbussy expand_rgb.hlsl 16755
112.896µs: cmdbussy expand_rgb.hlsl 16755
97.2µs: cmdbussy expand_rgb.hlsl 16755
94.784µs: cmdbussy expand_rgb.hlsl 16755
110.783µs: cmdbussy expand_rgb.hlsl 16755
97.803µs: cmdbussy expand_rgb.hlsl 16755
97.199µs: cmdbussy expand_rgb.hlsl 16755
98.407µs: cmdbussy expand_rgb.hlsl 16755
108.066µs: cmdbussy expand_rgb.hlsl 16755
118.933µs: cmdbussy expand_rgb.hlsl 16755
118.933µs: cmdbussy expand_rgb.hlsl 16755
110.179µs: cmdbussy expand_rgb.hlsl 16755
129.8µs: cmdbussy expand_rgb.hlsl 16755
115.311µs: cmdbussy expand_rgb.hlsl 16755
89.351µs: cmdbussy expand_rgb.hlsl 16755
107.765µs: cmdbussy expand_rgb.hlsl 16755
95.69µs: cmdbussy expand_rgb.hlsl 16755
119.537µs: cmdbussy expand_rgb.hlsl 16755
98.709µs: cmdbussy expand_rgb.hlsl 16755
120.744µs: cmdbussy expand_rgb.hlsl 16755
79.692µs: cmdbussy expand_rgb.hlsl 16755
78.484µs: cmdbussy expand_rgb.hlsl 16755
354.083µs: cmdbussy expand_rgb.hlsl 16755
75.465µs: cmdbussy expand_rgb.hlsl 16755
68.522µs: cmdbussy expand_rgb.hlsl 16755
67.013µs: cmdbussy expand_rgb.hlsl 16755
98.104µs: cmdbussy expand_rgb.hlsl 16755
66.711µs: cmdbussy expand_rgb.hlsl 16755
81.201µs: cmdbussy expand_rgb.hlsl 16755
113.802µs: cmdbussy expand_rgb.hlsl 16755
85.728µs: cmdbussy expand_rgb.hlsl 16755
100.218µs: cmdbussy expand_rgb.hlsl 16755
88.747µs: cmdbussy expand_rgb.hlsl 16755
83.616µs: cmdbussy expand_rgb.hlsl 16755
100.218µs: cmdbussy expand_rgb.hlsl 16755
119.235µs: cmdbussy expand_rgb.hlsl 16755
107.161µs: cmdbussy expand_rgb.hlsl 16755
107.161µs: cmdbussy expand_rgb.hlsl 16755
87.54µs: cmdbussy expand_rgb.hlsl 16755
76.069µs: cmdbussy expand_rgb.hlsl 16755
97.802µs: cmdbussy expand_rgb.hlsl 16755
93.879µs: cmdbussy expand_rgb.hlsl 16755
83.615µs: cmdbussy expand_rgb.hlsl 16755
86.634µs: cmdbussy expand_rgb.hlsl 16755
115.915µs: cmdbussy expand_rgb.hlsl 16755
62.486µs: cmdbussy expand_rgb.hlsl 16755
89.351µs: cmdbussy expand_rgb.hlsl 16755
105.35µs: cmdbussy expand_rgb.hlsl 16755
100.218µs: cmdbussy expand_rgb.hlsl 16755
76.974µs: cmdbussy expand_rgb.hlsl 16755
107.161µs: cmdbussy expand_rgb.hlsl 16755
106.255µs: cmdbussy expand_rgb.hlsl 16755
117.122µs: cmdbussy expand_rgb.hlsl 16755
111.085µs: cmdbussy expand_rgb.hlsl 16755
83.011µs: cmdbussy expand_rgb.hlsl 16755
81.201µs: cmdbussy expand_rgb.hlsl 16755
56.146µs: cmdbussy expand_rgb.hlsl 16755
134.63µs: cmdbussy expand_rgb.hlsl 16755
102.633µs: cmdbussy expand_rgb.hlsl 16755
93.577µs: cmdbussy expand_rgb.hlsl 16755
89.049µs: cmdbussy expand_rgb.hlsl 16755
86.332µs: cmdbussy expand_rgb.hlsl 16755
102.632µs: cmdbussy expand_rgb.hlsl 16755
136.441µs: cmdbussy expand_rgb.hlsl 16755
68.522µs: cmdbussy expand_rgb.hlsl 16755
100.218µs: cmdbussy expand_rgb.hlsl 16755
106.859µs: cmdbussy expand_rgb.hlsl 16755
99.916µs: cmdbussy expand_rgb.hlsl 16755
103.84µs: cmdbussy expand_rgb.hlsl 16755
95.388µs: cmdbussy expand_rgb.hlsl 16755
95.69µs: cmdbussy expand_rgb.hlsl 16755
118.028µs: cmdbussy expand_rgb.hlsl 16755
131.913µs: cmdbussy expand_rgb.hlsl 16755
99.614µs: cmdbussy expand_rgb.hlsl 16755
97.803µs: cmdbussy expand_rgb.hlsl 16755
87.841µs: cmdbussy expand_rgb.hlsl 16755
65.202µs: cmdbussy expand_rgb.hlsl 16755
119.839µs: cmdbussy expand_rgb.hlsl 16755
77.578µs: cmdbussy expand_rgb.hlsl 16755
119.839µs: cmdbussy expand_rgb.hlsl 16755
85.426µs: cmdbussy expand_rgb.hlsl 16755
99.614µs: cmdbussy expand_rgb.hlsl 16755
87.842µs: cmdbussy expand_rgb.hlsl 16755
149.421µs: cmdbussy expand_rgb.hlsl 16755
102.029µs: cmdbussy expand_rgb.hlsl 16755
93.577µs: cmdbussy expand_rgb.hlsl 16755
83.314µs: cmdbussy expand_rgb.hlsl 16755
70.636µs: cmdbussy expand_rgb.hlsl 16755
107.462µs: cmdbussy expand_rgb.hlsl 16755
66.41µs: cmdbussy expand_rgb.hlsl 16755
121.952µs: cmdbussy expand_rgb.hlsl 16755
105.048µs: cmdbussy expand_rgb.hlsl 16755
66.711µs: cmdbussy expand_rgb.hlsl 16755
66.108µs: cmdbussy expand_rgb.hlsl 16755
74.258µs: cmdbussy expand_rgb.hlsl 16755
99.312µs: cmdbussy expand_rgb.hlsl 16755
107.161µs: cmdbussy expand_rgb.hlsl 16755
92.068µs: cmdbussy expand_rgb.hlsl 16755
99.614µs: cmdbussy expand_rgb.hlsl 16755
92.068µs: cmdbussy expand_rgb.hlsl 16755
86.634µs: cmdbussy expand_rgb.hlsl 16755
95.992µs: cmdbussy expand_rgb.hlsl 16755
114.405µs: cmdbussy expand_rgb.hlsl 16755
95.992µs: cmdbussy expand_rgb.hlsl 16755
92.973µs: cmdbussy expand_rgb.hlsl 16755
92.973µs: cmdbussy expand_rgb.hlsl 16755
120.443µs: cmdbussy expand_rgb.hlsl 16755
110.783µs: cmdbussy expand_rgb.hlsl 16755
104.142µs: cmdbussy expand_rgb.hlsl 16755
132.215µs: cmdbussy expand_rgb.hlsl 16755
111.084µs: cmdbussy expand_rgb.hlsl 16755
135.535µs: cmdbussy expand_rgb.hlsl 16755
103.237µs: cmdbussy expand_rgb.hlsl 16755
114.707µs: cmdbussy expand_rgb.hlsl 16755
146.101µs: cmdbussy expand_rgb.hlsl 16755
99.916µs: cmdbussy expand_rgb.hlsl 16755
90.256µs: cmdbussy expand_rgb.hlsl 16755
82.106µs: cmdbussy expand_rgb.hlsl 16755
111.386µs: cmdbussy expand_rgb.hlsl 16755
92.672µs: cmdbussy expand_rgb.hlsl 16755
111.991µs: cmdbussy expand_rgb.hlsl 16755
97.199µs: cmdbussy expand_rgb.hlsl 16755
84.521µs: cmdbussy expand_rgb.hlsl 16755
89.652µs: cmdbussy expand_rgb.hlsl 16755
67.013µs: cmdbussy expand_rgb.hlsl 16755
91.162µs: cmdbussy expand_rgb.hlsl 16755
94.482µs: cmdbussy expand_rgb.hlsl 16755
90.558µs: cmdbussy expand_rgb.hlsl 16755
125.272µs: cmdbussy expand_rgb.hlsl 16755
112.594µs: cmdbussy expand_rgb.hlsl 16755
91.766µs: cmdbussy expand_rgb.hlsl 16755
79.691µs: cmdbussy expand_rgb.hlsl 16755
378.231µs: cmdbussy expand_rgb.hlsl 16755
79.088µs: cmdbussy expand_rgb.hlsl 16755
77.88µs: cmdbussy expand_rgb.hlsl 16755
65.806µs: cmdbussy expand_rgb.hlsl 16755
83.012µs: cmdbussy expand_rgb.hlsl 16755
112.896µs: cmdbussy expand_rgb.hlsl 16755
102.029µs: cmdbussy expand_rgb.hlsl 16755
94.482µs: cmdbussy expand_rgb.hlsl 16755
86.332µs: cmdbussy expand_rgb.hlsl 16755
126.178µs: cmdbussy expand_rgb.hlsl 16755
83.917µs: cmdbussy expand_rgb.hlsl 16755
111.386µs: cmdbussy expand_rgb.hlsl 16755
111.689µs: cmdbussy expand_rgb.hlsl 16755
119.839µs: cmdbussy expand_rgb.hlsl 16755
103.236µs: cmdbussy expand_rgb.hlsl 16755
84.219µs: cmdbussy expand_rgb.hlsl 16755
111.386µs: cmdbussy expand_rgb.hlsl 16755
54.033µs: cmdbussy expand_rgb.hlsl 16755
120.442µs: cmdbussy expand_rgb.hlsl 16755
102.934µs: cmdbussy expand_rgb.hlsl 16755
67.315µs: cmdbussy expand_rgb.hlsl 16755
92.672µs: cmdbussy expand_rgb.hlsl 16755
113.198µs: cmdbussy expand_rgb.hlsl 16755
94.482µs: cmdbussy expand_rgb.hlsl 16755
80.597µs: cmdbussy expand_rgb.hlsl 16755
138.856µs: cmdbussy expand_rgb.hlsl 16755
102.934µs: cmdbussy expand_rgb.hlsl 16755
95.388µs: cmdbussy expand_rgb.hlsl 16755
120.443µs: cmdbussy expand_rgb.hlsl 16755
127.385µs: cmdbussy expand_rgb.hlsl 16755
108.367µs: cmdbussy expand_rgb.hlsl 16755
124.971µs: cmdbussy expand_rgb.hlsl 16755
89.351µs: cmdbussy expand_rgb.hlsl 16755
133.12µs: cmdbussy expand_rgb.hlsl 16755
101.123µs: cmdbussy expand_rgb.hlsl 16755
101.727µs: cmdbussy expand_rgb.hlsl 16755
79.993µs: cmdbussy expand_rgb.hlsl 16755
123.461µs: cmdbussy expand_rgb.hlsl 16755
63.995µs: cmdbussy expand_rgb.hlsl 16755
122.556µs: cmdbussy expand_rgb.hlsl 16755
133.725µs: cmdbussy expand_rgb.hlsl 16755
90.86µs: cmdbussy expand_rgb.hlsl 16755
115.008µs: cmdbussy expand_rgb.hlsl 16755
131.008µs: cmdbussy expand_rgb.hlsl 16755
79.993µs: cmdbussy expand_rgb.hlsl 16755
134.63µs: cmdbussy expand_rgb.hlsl 16755
88.143µs: cmdbussy expand_rgb.hlsl 16755
330.537µs: cmdbussy expand_rgb.hlsl 16755
77.578µs: cmdbussy expand_rgb.hlsl 16755
95.086µs: cmdbussy expand_rgb.hlsl 16755
110.783µs: cmdbussy expand_rgb.hlsl 16755
94.784µs: cmdbussy expand_rgb.hlsl 16755
89.049µs: cmdbussy expand_rgb.hlsl 16755
132.215µs: cmdbussy expand_rgb.hlsl 16755
83.314µs: cmdbussy expand_rgb.hlsl 16755
97.501µs: cmdbussy expand_rgb.hlsl 16755
92.973µs: cmdbussy expand_rgb.hlsl 16755
98.407µs: cmdbussy expand_rgb.hlsl 16755
84.823µs: cmdbussy expand_rgb.hlsl 16755
88.747µs: cmdbussy expand_rgb.hlsl 16755
106.557µs: cmdbussy expand_rgb.hlsl 16755
112.594µs: cmdbussy expand_rgb.hlsl 16755
124.366µs: cmdbussy expand_rgb.hlsl 16755
86.332µs: cmdbussy expand_rgb.hlsl 16755
83.615µs: cmdbussy expand_rgb.hlsl 16755
131.611µs: cmdbussy expand_rgb.hlsl 16755
78.785µs: cmdbussy expand_rgb.hlsl 16755
115.612µs: cmdbussy expand_rgb.hlsl 16755
110.783µs: cmdbussy expand_rgb.hlsl 16755
93.577µs: cmdbussy expand_rgb.hlsl 16755
93.275µs: cmdbussy expand_rgb.hlsl 16755
80.295µs: cmdbussy expand_rgb.hlsl 16755
106.255µs: cmdbussy expand_rgb.hlsl 16755
205.567µs: cmdbussy expand_rgb.hlsl 1103347
148.213µs: cmdbussy expand_rgb.hlsl 1103347
150.931µs: cmdbussy expand_rgb.hlsl 1103347
6.076755ms: cmdbussy expand_rgb.hlsl 1103347
156.062µs: cmdbussy expand_rgb.hlsl 1103347
159.986µs: cmdbussy expand_rgb.hlsl 1103347
156.665µs: cmdbussy expand_rgb.hlsl 1103347
149.723µs: cmdbussy expand_rgb.hlsl 1103347
158.779µs: cmdbussy expand_rgb.hlsl 1103347
160.891µs: cmdbussy expand_rgb.hlsl 1103347
150.025µs: cmdbussy expand_rgb.hlsl 1103347
163.91µs: cmdbussy expand_rgb.hlsl 1103347
175.381µs: cmdbussy expand_rgb.hlsl 1103347
150.024µs: cmdbussy expand_rgb.hlsl 1103347
150.628µs: cmdbussy expand_rgb.hlsl 1103347
169.042µs: cmdbussy expand_rgb.hlsl 1103347
156.665µs: cmdbussy expand_rgb.hlsl 1103347
158.778µs: cmdbussy expand_rgb.hlsl 1103347
158.175µs: cmdbussy expand_rgb.hlsl 1103347
166.929µs: cmdbussy expand_rgb.hlsl 1103347
152.742µs: cmdbussy expand_rgb.hlsl 1103347
162.1µs: cmdbussy expand_rgb.hlsl 1103347
212.208µs: cmdbussy expand_rgb.hlsl 1103347
150.93µs: cmdbussy expand_rgb.hlsl 1103347
147.61µs: cmdbussy expand_rgb.hlsl 1103347
146.1µs: cmdbussy expand_rgb.hlsl 1103347
149.722µs: cmdbussy expand_rgb.hlsl 1103347
151.836µs: cmdbussy expand_rgb.hlsl 1103347
175.683µs: cmdbussy expand_rgb.hlsl 1103347
148.817µs: cmdbussy expand_rgb.hlsl 1103347
158.175µs: cmdbussy expand_rgb.hlsl 1103347
212.208µs: cmdbussy expand_rgb.hlsl 1103347
189.87µs: cmdbussy expand_rgb.hlsl 1103347
151.534µs: cmdbussy expand_rgb.hlsl 1103347
149.421µs: cmdbussy expand_rgb.hlsl 1103347
150.327µs: cmdbussy expand_rgb.hlsl 1103347
151.232µs: cmdbussy expand_rgb.hlsl 1103347
152.138µs: cmdbussy expand_rgb.hlsl 1103347
178.4µs: cmdbussy expand_rgb.hlsl 1103347
148.213µs: cmdbussy expand_rgb.hlsl 1103347
158.778µs: cmdbussy expand_rgb.hlsl 1103347
150.628µs: cmdbussy expand_rgb.hlsl 1103347
185.342µs: cmdbussy expand_rgb.hlsl 1103347
155.76µs: cmdbussy expand_rgb.hlsl 1103347
150.025µs: cmdbussy expand_rgb.hlsl 1103347
149.12µs: cmdbussy expand_rgb.hlsl 1103347
155.156µs: cmdbussy expand_rgb.hlsl 1103347
151.534µs: cmdbussy expand_rgb.hlsl 1103347
146.704µs: cmdbussy expand_rgb.hlsl 1103347
156.061µs: cmdbussy expand_rgb.hlsl 1103347
149.12µs: cmdbussy expand_rgb.hlsl 1103347
147.609µs: cmdbussy expand_rgb.hlsl 1103347
163.608µs: cmdbussy expand_rgb.hlsl 1103347
156.061µs: cmdbussy expand_rgb.hlsl 1103347
171.457µs: cmdbussy expand_rgb.hlsl 1103347
149.723µs: cmdbussy expand_rgb.hlsl 1103347
161.193µs: cmdbussy expand_rgb.hlsl 1103347
185.342µs: cmdbussy expand_rgb.hlsl 1103347
147.308µs: cmdbussy expand_rgb.hlsl 1103347
153.647µs: cmdbussy expand_rgb.hlsl 1103347
150.327µs: cmdbussy expand_rgb.hlsl 1103347
178.4µs: cmdbussy expand_rgb.hlsl 1103347
156.062µs: cmdbussy expand_rgb.hlsl 1103347
157.571µs: cmdbussy expand_rgb.hlsl 1103347
161.193µs: cmdbussy expand_rgb.hlsl 1103347
149.12µs: cmdbussy expand_rgb.hlsl 1103347
188.06µs: cmdbussy expand_rgb.hlsl 1103347
148.817µs: cmdbussy expand_rgb.hlsl 1103347
148.516µs: cmdbussy expand_rgb.hlsl 1103347
150.629µs: cmdbussy expand_rgb.hlsl 1103347
153.345µs: cmdbussy expand_rgb.hlsl 1103347
164.514µs: cmdbussy expand_rgb.hlsl 1103347
149.723µs: cmdbussy expand_rgb.hlsl 1103347
147.61µs: cmdbussy expand_rgb.hlsl 1103347
172.06µs: cmdbussy expand_rgb.hlsl 1103347
148.213µs: cmdbussy expand_rgb.hlsl 1103347
150.326µs: cmdbussy expand_rgb.hlsl 1103347
149.723µs: cmdbussy expand_rgb.hlsl 1103347
149.119µs: cmdbussy expand_rgb.hlsl 1103347
402.682µs: cmdbussy expand_rgb.hlsl 1103347
153.949µs: cmdbussy expand_rgb.hlsl 1103347
147.006µs: cmdbussy expand_rgb.hlsl 1103347
162.1µs: cmdbussy expand_rgb.hlsl 1103347
149.42µs: cmdbussy expand_rgb.hlsl 1103347
154.251µs: cmdbussy expand_rgb.hlsl 1103347
155.157µs: cmdbussy expand_rgb.hlsl 1103347
156.666µs: cmdbussy expand_rgb.hlsl 1103347
157.572µs: cmdbussy expand_rgb.hlsl 1103347
152.741µs: cmdbussy expand_rgb.hlsl 1103347
151.232µs: cmdbussy expand_rgb.hlsl 1103347
163.306µs: cmdbussy expand_rgb.hlsl 1103347
149.723µs: cmdbussy expand_rgb.hlsl 1103347
164.514µs: cmdbussy expand_rgb.hlsl 1103347
156.062µs: cmdbussy expand_rgb.hlsl 1103347
153.345µs: cmdbussy expand_rgb.hlsl 1103347
158.477µs: cmdbussy expand_rgb.hlsl 1103347
147.006µs: cmdbussy expand_rgb.hlsl 1103347
164.514µs: cmdbussy expand_rgb.hlsl 1103347
149.723µs: cmdbussy expand_rgb.hlsl 1103347
159.986µs: cmdbussy expand_rgb.hlsl 1103347
149.421µs: cmdbussy expand_rgb.hlsl 1103347
153.346µs: cmdbussy expand_rgb.hlsl 1103347
159.684µs: cmdbussy expand_rgb.hlsl 1103347
432.566µs: cmdbussy expand_rgb.hlsl 1103347
401.474µs: cmdbussy expand_rgb.hlsl 1103347
166.627µs: cmdbussy expand_rgb.hlsl 1103347
220.056µs: cmdbussy expand_rgb.hlsl 1103347
162.703µs: cmdbussy expand_rgb.hlsl 1103347
158.477µs: cmdbussy expand_rgb.hlsl 1103347
160.59µs: cmdbussy expand_rgb.hlsl 1103347
151.534µs: cmdbussy expand_rgb.hlsl 1103347
165.118µs: cmdbussy expand_rgb.hlsl 1103347
148.516µs: cmdbussy expand_rgb.hlsl 1103347
159.986µs: cmdbussy expand_rgb.hlsl 1103347
147.911µs: cmdbussy expand_rgb.hlsl 1103347
161.797µs: cmdbussy expand_rgb.hlsl 1103347
159.382µs: cmdbussy expand_rgb.hlsl 1103347
158.477µs: cmdbussy expand_rgb.hlsl 1103347
156.968µs: cmdbussy expand_rgb.hlsl 1103347
148.817µs: cmdbussy expand_rgb.hlsl 1103347
159.684µs: cmdbussy expand_rgb.hlsl 1103347
153.044µs: cmdbussy expand_rgb.hlsl 1103347
147.61µs: cmdbussy expand_rgb.hlsl 1103347
173.871µs: cmdbussy expand_rgb.hlsl 1103347
159.081µs: cmdbussy expand_rgb.hlsl 1103347
164.212µs: cmdbussy expand_rgb.hlsl 1103347
159.382µs: cmdbussy expand_rgb.hlsl 1103347
154.251µs: cmdbussy expand_rgb.hlsl 1103347
159.684µs: cmdbussy expand_rgb.hlsl 1103347
160.59µs: cmdbussy expand_rgb.hlsl 1103347
147.912µs: cmdbussy expand_rgb.hlsl 1103347
150.024µs: cmdbussy expand_rgb.hlsl 1103347
195.002µs: cmdbussy expand_rgb.hlsl 1103347
156.062µs: cmdbussy expand_rgb.hlsl 1103347
148.515µs: cmdbussy expand_rgb.hlsl 1103347
150.025µs: cmdbussy expand_rgb.hlsl 1103347
151.534µs: cmdbussy expand_rgb.hlsl 1103347
148.214µs: cmdbussy expand_rgb.hlsl 1103347
158.476µs: cmdbussy expand_rgb.hlsl 1103347
146.704µs: cmdbussy expand_rgb.hlsl 1103347
403.286µs: cmdbussy expand_rgb.hlsl 1103347
490.825µs: cmdbussy expand_rgb.hlsl 1103347
159.684µs: cmdbussy expand_rgb.hlsl 1103347
159.081µs: cmdbussy expand_rgb.hlsl 1103347
150.326µs: cmdbussy expand_rgb.hlsl 1103347
146.402µs: cmdbussy expand_rgb.hlsl 1103347
151.232µs: cmdbussy expand_rgb.hlsl 1103347
166.024µs: cmdbussy expand_rgb.hlsl 1103347
159.685µs: cmdbussy expand_rgb.hlsl 1103347
156.968µs: cmdbussy expand_rgb.hlsl 1103347
150.93µs: cmdbussy expand_rgb.hlsl 1103347
158.779µs: cmdbussy expand_rgb.hlsl 1103347
148.817µs: cmdbussy expand_rgb.hlsl 1103347
148.817µs: cmdbussy expand_rgb.hlsl 1103347
155.156µs: cmdbussy expand_rgb.hlsl 1103347
148.515µs: cmdbussy expand_rgb.hlsl 1103347
151.836µs: cmdbussy expand_rgb.hlsl 1103347
158.779µs: cmdbussy expand_rgb.hlsl 1103347
148.818µs: cmdbussy expand_rgb.hlsl 1103347
156.062µs: cmdbussy expand_rgb.hlsl 1103347
193.191µs: cmdbussy expand_rgb.hlsl 1103347
153.345µs: cmdbussy expand_rgb.hlsl 1103347
149.12µs: cmdbussy expand_rgb.hlsl 1103347
148.817µs: cmdbussy expand_rgb.hlsl 1103347
149.119µs: cmdbussy expand_rgb.hlsl 1103347
152.741µs: cmdbussy expand_rgb.hlsl 1103347
172.664µs: cmdbussy expand_rgb.hlsl 1103347
152.137µs: cmdbussy expand_rgb.hlsl 1103347
149.421µs: cmdbussy expand_rgb.hlsl 1103347
148.214µs: cmdbussy expand_rgb.hlsl 1103347
153.647µs: cmdbussy expand_rgb.hlsl 1103347
160.892µs: cmdbussy expand_rgb.hlsl 1103347
Benchmark 4: 16755 RGBs pre
  Time (mean ± σ): 14.680143 ms ± 339.440841 µs
  Range (min … max): 14.378825 ms … 18.117972 ms 249 runs
Benchmark 3: 16755 RGBs post
  Time (mean ± σ): 12.115274 ms ± 1.041481 ms
  Range (min … max): 11.546166 ms … 18.790215 ms 445 runs
Benchmark 6: 1103347 RGBs pre
  Time (mean ± σ): 210.770776 ms ± 21.167100 ms
  Range (min … max): 205.793730 ms … 382.314534 ms 69 runs
Benchmark 5: 1103347 RGBs post
  Time (mean ± σ): 28.952224 ms ± 848.009892 µs
  Range (min … max): 28.372476 ms … 36.353972 ms 172 runs
Benchmark 1: cmdbussy expand_rgb.hlsl 16755
  Time (mean ± σ): 129.085778 µs ± 621.358271 µs
  Range (min … max): 50.109000 µs … 13.201569 ms 445 runs
Benchmark 2: cmdbussy expand_rgb.hlsl 1103347
  Time (mean ± σ): 200.058070 µs ± 451.868568 µs
  Range (min … max): 146.100000 µs … 6.076755 ms 172 runs
--&gt;
&lt;!--
68.22µs 16755 destlab
87.841µs 16755 destlab
69.428µs 16755 destlab
70.032µs 16755 destlab
100.519µs 16755 destlab
96.293µs 16755 destlab
85.729µs 16755 destlab
72.749µs 16755 destlab
79.389µs 16755 destlab
71.842µs 16755 destlab
68.522µs 16755 destlab
70.938µs 16755 destlab
70.938µs 16755 destlab
69.126µs 16755 destlab
69.428µs 16755 destlab
72.446µs 16755 destlab
67.616µs 16755 destlab
77.579µs 16755 destlab
69.126µs 16755 destlab
78.182µs 16755 destlab
71.541µs 16755 destlab
79.691µs 16755 destlab
67.919µs 16755 destlab
68.824µs 16755 destlab
68.221µs 16755 destlab
68.523µs 16755 destlab
78.785µs 16755 destlab
69.73µs 16755 destlab
67.919µs 16755 destlab
74.862µs 16755 destlab
73.956µs 16755 destlab
83.313µs 16755 destlab
68.522µs 16755 destlab
67.919µs 16755 destlab
71.541µs 16755 destlab
69.73µs 16755 destlab
69.126µs 16755 destlab
70.031µs 16755 destlab
69.428µs 16755 destlab
77.88µs 16755 destlab
71.843µs 16755 destlab
68.523µs 16755 destlab
68.22µs 16755 destlab
67.918µs 16755 destlab
67.013µs 16755 destlab
69.729µs 16755 destlab
67.617µs 16755 destlab
68.22µs 16755 destlab
67.918µs 16755 destlab
69.73µs 16755 destlab
80.597µs 16755 destlab
68.221µs 16755 destlab
67.617µs 16755 destlab
68.522µs 16755 destlab
68.523µs 16755 destlab
68.824µs 16755 destlab
67.315µs 16755 destlab
67.919µs 16755 destlab
70.333µs 16755 destlab
68.22µs 16755 destlab
104.142µs 16755 destlab
4.76034ms 1103347 destlab
5.376439ms 1103347 destlab
5.690977ms 1103347 destlab
5.39938ms 1103347 destlab
5.338404ms 1103347 destlab
5.501711ms 1103347 destlab
5.35893ms 1103347 destlab
5.140081ms 1103347 destlab
5.465185ms 1103347 destlab
5.424736ms 1103347 destlab
5.408435ms 1103347 destlab
5.764027ms 1103347 destlab
5.398776ms 1103347 destlab
5.401492ms 1103347 destlab
5.573251ms 1103347 destlab
5.095406ms 1103347 destlab
5.709692ms 1103347 destlab
5.384589ms 1103347 destlab
5.306708ms 1103347 destlab
5.497183ms 1103347 destlab
5.399983ms 1103347 destlab
5.422623ms 1103347 destlab
5.432585ms 1103347 destlab
5.371911ms 1103347 destlab
5.239997ms 1103347 destlab
5.482089ms 1103347 destlab
5.37523ms 1103347 destlab
5.323613ms 1103347 destlab
5.668337ms 1103347 destlab
4.985831ms 1103347 destlab
5.463978ms 1103347 destlab
5.371609ms 1103347 destlab
5.370099ms 1103347 destlab
5.469713ms 1103347 destlab
5.351988ms 1103347 destlab
5.408134ms 1103347 destlab
5.4027ms 1103347 destlab
5.393343ms 1103347 destlab
5.495673ms 1103347 destlab
5.4676ms 1103347 destlab
5.328141ms 1103347 destlab
5.461261ms 1103347 destlab
5.4027ms 1103347 destlab
5.371609ms 1103347 destlab
5.403304ms 1103347 destlab
138.554µs 16755 bundle.rgb
142.78µs 16755 bundle.rgb
144.29µs 16755 bundle.rgb
143.686µs 16755 bundle.rgb
136.743µs 16755 bundle.rgb
138.554µs 16755 bundle.rgb
135.535µs 16755 bundle.rgb
137.95µs 16755 bundle.rgb
134.931µs 16755 bundle.rgb
139.157µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
135.234µs 16755 bundle.rgb
145.195µs 16755 bundle.rgb
137.044µs 16755 bundle.rgb
135.234µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
137.95µs 16755 bundle.rgb
142.479µs 16755 bundle.rgb
139.46µs 16755 bundle.rgb
147.006µs 16755 bundle.rgb
134.63µs 16755 bundle.rgb
163.608µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
135.837µs 16755 bundle.rgb
135.536µs 16755 bundle.rgb
134.63µs 16755 bundle.rgb
139.46µs 16755 bundle.rgb
168.438µs 16755 bundle.rgb
135.837µs 16755 bundle.rgb
148.817µs 16755 bundle.rgb
134.328µs 16755 bundle.rgb
166.627µs 16755 bundle.rgb
135.536µs 16755 bundle.rgb
134.63µs 16755 bundle.rgb
135.535µs 16755 bundle.rgb
135.837µs 16755 bundle.rgb
136.743µs 16755 bundle.rgb
140.064µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
137.045µs 16755 bundle.rgb
147.006µs 16755 bundle.rgb
137.346µs 16755 bundle.rgb
138.253µs 16755 bundle.rgb
136.139µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
140.063µs 16755 bundle.rgb
136.743µs 16755 bundle.rgb
136.139µs 16755 bundle.rgb
134.63µs 16755 bundle.rgb
137.649µs 16755 bundle.rgb
164.212µs 16755 bundle.rgb
142.478µs 16755 bundle.rgb
135.535µs 16755 bundle.rgb
140.667µs 16755 bundle.rgb
145.497µs 16755 bundle.rgb
136.743µs 16755 bundle.rgb
137.044µs 16755 bundle.rgb
137.347µs 16755 bundle.rgb
135.838µs 16755 bundle.rgb
149.723µs 16755 bundle.rgb
155.156µs 16755 bundle.rgb
140.969µs 16755 bundle.rgb
137.649µs 16755 bundle.rgb
134.026µs 16755 bundle.rgb
135.234µs 16755 bundle.rgb
135.536µs 16755 bundle.rgb
148.817µs 16755 bundle.rgb
135.535µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
163.91µs 16755 bundle.rgb
134.63µs 16755 bundle.rgb
137.347µs 16755 bundle.rgb
136.742µs 16755 bundle.rgb
134.932µs 16755 bundle.rgb
135.234µs 16755 bundle.rgb
135.536µs 16755 bundle.rgb
137.045µs 16755 bundle.rgb
180.211µs 16755 bundle.rgb
140.667µs 16755 bundle.rgb
134.63µs 16755 bundle.rgb
136.139µs 16755 bundle.rgb
199.832µs 16755 bundle.rgb
135.535µs 16755 bundle.rgb
136.743µs 16755 bundle.rgb
135.838µs 16755 bundle.rgb
168.74µs 16755 bundle.rgb
136.139µs 16755 bundle.rgb
135.234µs 16755 bundle.rgb
154.251µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
138.554µs 16755 bundle.rgb
138.856µs 16755 bundle.rgb
181.72µs 16755 bundle.rgb
145.497µs 16755 bundle.rgb
134.932µs 16755 bundle.rgb
137.347µs 16755 bundle.rgb
139.46µs 16755 bundle.rgb
144.893µs 16755 bundle.rgb
154.552µs 16755 bundle.rgb
155.76µs 16755 bundle.rgb
136.139µs 16755 bundle.rgb
136.139µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
135.234µs 16755 bundle.rgb
134.629µs 16755 bundle.rgb
136.743µs 16755 bundle.rgb
134.026µs 16755 bundle.rgb
134.932µs 16755 bundle.rgb
137.045µs 16755 bundle.rgb
170.853µs 16755 bundle.rgb
133.724µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
136.441µs 16755 bundle.rgb
134.931µs 16755 bundle.rgb
135.233µs 16755 bundle.rgb
135.233µs 16755 bundle.rgb
170.853µs 16755 bundle.rgb
136.743µs 16755 bundle.rgb
138.856µs 16755 bundle.rgb
135.535µs 16755 bundle.rgb
135.233µs 16755 bundle.rgb
147.61µs 16755 bundle.rgb
142.78µs 16755 bundle.rgb
136.139µs 16755 bundle.rgb
140.063µs 16755 bundle.rgb
135.536µs 16755 bundle.rgb
134.932µs 16755 bundle.rgb
151.534µs 16755 bundle.rgb
144.29µs 16755 bundle.rgb
142.176µs 16755 bundle.rgb
194.701µs 16755 bundle.rgb
144.289µs 16755 bundle.rgb
137.951µs 16755 bundle.rgb
143.384µs 16755 bundle.rgb
138.855µs 16755 bundle.rgb
141.875µs 16755 bundle.rgb
9.172636ms 1103347 bundle.rgb
9.981924ms 1103347 bundle.rgb
10.134666ms 1103347 bundle.rgb
9.967435ms 1103347 bundle.rgb
10.113234ms 1103347 bundle.rgb
9.910081ms 1103347 bundle.rgb
9.84639ms 1103347 bundle.rgb
10.13376ms 1103347 bundle.rgb
10.653564ms 1103347 bundle.rgb
9.952644ms 1103347 bundle.rgb
10.412981ms 1103347 bundle.rgb
9.749794ms 1103347 bundle.rgb
9.826164ms 1103347 bundle.rgb
9.891668ms 1103347 bundle.rgb
9.979812ms 1103347 bundle.rgb
9.983736ms 1103347 bundle.rgb
10.086067ms 1103347 bundle.rgb
10.112328ms 1103347 bundle.rgb
9.834617ms 1103347 bundle.rgb
10.223715ms 1103347 bundle.rgb
9.891668ms 1103347 bundle.rgb
10.24726ms 1103347 bundle.rgb
10.072784ms 1103347 bundle.rgb
10.043806ms 1103347 bundle.rgb
9.932419ms 1103347 bundle.rgb
9.953851ms 1103347 bundle.rgb
9.932419ms 1103347 bundle.rgb
9.774244ms 1103347 bundle.rgb
9.814694ms 1103347 bundle.rgb
9.801714ms 1103347 bundle.rgb
9.86118ms 1103347 bundle.rgb
10.072483ms 1103347 bundle.rgb
10.086972ms 1103347 bundle.rgb
10.432602ms 1103347 bundle.rgb
10.263258ms 1103347 bundle.rgb
10.003658ms 1103347 bundle.rgb
10.258127ms 1103347 bundle.rgb
10.045919ms 1103347 bundle.rgb
9.761265ms 1103347 bundle.rgb
10.239713ms 1103347 bundle.rgb
10.259033ms 1103347 bundle.rgb
10.249675ms 1103347 bundle.rgb
10.019657ms 1103347 bundle.rgb
10.570854ms 1103347 bundle.rgb
10.096028ms 1103347 bundle.rgb
9.922156ms 1103347 bundle.rgb
10.085161ms 1103347 bundle.rgb
10.687071ms 1103347 bundle.rgb
10.439546ms 1103347 bundle.rgb
10.399398ms 1103347 bundle.rgb
10.030222ms 1103347 bundle.rgb
10.19866ms 1103347 bundle.rgb
10.276843ms 1103347 bundle.rgb
9.982227ms 1103347 bundle.rgb
10.003356ms 1103347 bundle.rgb
9.927288ms 1103347 bundle.rgb
10.025996ms 1103347 bundle.rgb
10.088783ms 1103347 bundle.rgb
9.760359ms 1103347 bundle.rgb
9.896196ms 1103347 bundle.rgb
10.118668ms 1103347 bundle.rgb
10.521652ms 1103347 bundle.rgb
10.243336ms 1103347 bundle.rgb
10.254203ms 1103347 bundle.rgb
10.065238ms 1103347 bundle.rgb
10.198358ms 1103347 bundle.rgb
10.332687ms 1103347 bundle.rgb
10.054975ms 1103347 bundle.rgb
10.189001ms 1103347 bundle.rgb
10.030826ms 1103347 bundle.rgb
Benchmark 1: 16755 destlab
  Time (mean ± σ): 72.792918 µs ± 7.869198 µs
  Range (min … max): 67.013000 µs … 104.142000 µs 61 runs
Benchmark 2: 16755 bundle.rgb
  Time (mean ± σ): 141.841221 µs ± 11.672071 µs
  Range (min … max): 133.724000 µs … 199.832000 µs 136 runs
Benchmark 3: 1103347 destlab
  Time (mean ± σ): 5.396884 ms ± 168.200009 µs
  Range (min … max): 4.760340 ms … 5.764027 ms 45 runs
Benchmark 4: 1103347 bundle.rgb
  Time (mean ± σ): 10.076924 ms ± 237.516176 µs
  Range (min … max): 9.172636 ms … 10.687071 ms 70 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;known_rgbs&lt;/samp&gt; before &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;14.680ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;210.771ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;339µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;21.17ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;dest_lab = KnownRgbsPack { rgb, lab }&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;72.793µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.397ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7.87µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;168.2µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;known_rgbs&lt;/samp&gt; after &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12.115ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;28.952ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.04ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;848µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;bundle.rgb = known&lt;/samp&gt; &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;141.841µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.076ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.67µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;237.5µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;expand_rgb.hlsl&lt;/samp&gt; &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;129.086µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;200.058µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;621µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;452µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16.04%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;81.85%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
this is fixed analysis cost for an image
(and, interestingly, a quarter of the bytes in &lt;samp&gt;known_rgbs_bundle&lt;/samp&gt; is &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~2×&lt;/span&gt; slower;
 I'm&lt;!--'--&gt; assuming it induces a cache-line read/modify/write instead of a full write);
the following is paid for each computation/parameter change;
&lt;samp&gt;RgbStuffedInLab&lt;/samp&gt; is considered to be distributed across each final [​[​f​]​] computation on the GPU, thus becoming immaterial:
&lt;/p&gt;
&lt;!--
7.248577ms labcopy 16755
2.917482ms labcopy 16755
2.468616ms labcopy 16755
2.406432ms labcopy 16755
2.403716ms labcopy 16755
2.389226ms labcopy 16755
2.410658ms labcopy 16755
2.57306ms labcopy 16755
2.629809ms labcopy 16755
2.403414ms labcopy 16755
2.375643ms labcopy 16755
2.370511ms labcopy 16755
2.362663ms labcopy 16755
2.369303ms labcopy 16755
2.842017ms labcopy 16755
2.453824ms labcopy 16755
2.423638ms labcopy 16755
2.400093ms labcopy 16755
2.378661ms labcopy 16755
2.381076ms labcopy 16755
2.385906ms labcopy 16755
2.786173ms labcopy 16755
2.399188ms labcopy 16755
2.402206ms labcopy 16755
2.374134ms labcopy 16755
2.363568ms labcopy 16755
2.369606ms labcopy 16755
2.441448ms labcopy 16755
2.672673ms labcopy 16755
2.388622ms labcopy 16755
2.369606ms labcopy 16755
2.371718ms labcopy 16755
2.38168ms labcopy 16755
2.370209ms labcopy 16755
2.487029ms labcopy 16755
2.606867ms labcopy 16755
2.371416ms labcopy 16755
2.376548ms labcopy 16755
2.379868ms labcopy 16755
2.368699ms labcopy 16755
2.370511ms labcopy 16755
2.463785ms labcopy 16755
2.655769ms labcopy 16755
2.528384ms labcopy 16755
2.467408ms labcopy 16755
2.37202ms labcopy 16755
2.401905ms labcopy 16755
2.370209ms labcopy 16755
2.663014ms labcopy 16755
2.530799ms labcopy 16755
2.421224ms labcopy 16755
2.369605ms labcopy 16755
2.371114ms labcopy 16755
2.3687ms labcopy 16755
2.367191ms labcopy 16755
2.69803ms labcopy 16755
2.426657ms labcopy 16755
2.376548ms labcopy 16755
2.376548ms labcopy 16755
2.368096ms labcopy 16755
2.375038ms labcopy 16755
2.4336ms labcopy 16755
2.671767ms labcopy 16755
2.407338ms labcopy 16755
2.371718ms labcopy 16755
2.365682ms labcopy 16755
2.379265ms labcopy 16755
2.365681ms labcopy 16755
2.486727ms labcopy 16755
2.616829ms labcopy 16755
2.36387ms labcopy 16755
2.37202ms labcopy 16755
2.394056ms labcopy 16755
2.365379ms labcopy 16755
2.365077ms labcopy 16755
2.567626ms labcopy 16755
2.533214ms labcopy 16755
2.397678ms labcopy 16755
2.416091ms labcopy 16755
2.692898ms labcopy 16755
2.488538ms labcopy 16755
2.38983ms labcopy 16755
2.691087ms labcopy 16755
2.496387ms labcopy 16755
2.36387ms labcopy 16755
2.362662ms labcopy 16755
2.371416ms labcopy 16755
2.375341ms labcopy 16755
2.360248ms labcopy 16755
2.7258ms labcopy 16755
2.407036ms labcopy 16755
2.384095ms labcopy 16755
2.365983ms labcopy 16755
2.377152ms labcopy 16755
2.364474ms labcopy 16755
2.447485ms labcopy 16755
2.647015ms labcopy 16755
2.378057ms labcopy 16755
2.366587ms labcopy 16755
2.400395ms labcopy 16755
2.76776ms labcopy 16755
2.52446ms labcopy 16755
2.385ms labcopy 16755
2.77923ms labcopy 16755
2.470729ms labcopy 16755
2.446278ms labcopy 16755
2.389226ms labcopy 16755
2.382284ms labcopy 16755
2.388321ms labcopy 16755
2.394358ms labcopy 16755
2.74995ms labcopy 16755
2.415186ms labcopy 16755
2.368096ms labcopy 16755
2.367492ms labcopy 16755
2.364172ms labcopy 16755
2.378359ms labcopy 16755
2.377454ms labcopy 16755
2.721273ms labcopy 16755
2.404923ms labcopy 16755
2.376849ms labcopy 16755
2.361455ms labcopy 16755
2.385604ms labcopy 16755
2.376548ms labcopy 16755
2.478577ms labcopy 16755
2.693804ms labcopy 16755
2.384095ms labcopy 16755
2.384698ms labcopy 16755
2.371718ms labcopy 16755
2.361757ms labcopy 16755
2.377756ms labcopy 16755
2.507857ms labcopy 16755
2.60898ms labcopy 16755
2.371416ms labcopy 16755
2.37202ms labcopy 16755
2.368096ms labcopy 16755
2.35572ms labcopy 16755
2.382283ms labcopy 16755
2.559778ms labcopy 16755
2.529289ms labcopy 16755
2.383189ms labcopy 16755
2.384397ms labcopy 16755
2.369002ms labcopy 16755
2.379265ms labcopy 16755
2.360248ms labcopy 16755
2.778325ms labcopy 16755
2.437524ms labcopy 16755
2.431185ms labcopy 16755
2.422732ms labcopy 16755
2.383793ms labcopy 16755
2.384699ms labcopy 16755
2.385ms labcopy 16755
2.82451ms labcopy 16755
2.413375ms labcopy 16755
2.43209ms labcopy 16755
2.395867ms labcopy 16755
2.378057ms labcopy 16755
2.403112ms labcopy 16755
2.531101ms labcopy 16755
2.768061ms labcopy 16755
2.38983ms labcopy 16755
2.426958ms labcopy 16755
2.534723ms labcopy 16755
2.431185ms labcopy 16755
2.471031ms labcopy 16755
2.815453ms labcopy 16755
2.487331ms labcopy 16755
2.446278ms labcopy 16755
2.414281ms labcopy 16755
2.391339ms labcopy 16755
2.400998ms labcopy 16755
2.396169ms labcopy 16755
2.872807ms labcopy 16755
2.423035ms labcopy 16755
2.423034ms labcopy 16755
2.397376ms labcopy 16755
2.386208ms labcopy 16755
2.372624ms labcopy 16755
2.503632ms labcopy 16755
2.78406ms labcopy 16755
2.382585ms labcopy 16755
2.370813ms labcopy 16755
2.381076ms labcopy 16755
2.376246ms labcopy 16755
2.360852ms labcopy 16755
2.567626ms labcopy 16755
2.544684ms labcopy 16755
2.37353ms labcopy 16755
2.371417ms labcopy 16755
2.381378ms labcopy 16755
2.353305ms labcopy 16755
2.368096ms labcopy 16755
2.53744ms labcopy 16755
2.595397ms labcopy 16755
2.380774ms labcopy 16755
2.366587ms labcopy 16755
2.361455ms labcopy 16755
2.36236ms labcopy 16755
2.369304ms labcopy 16755
2.701954ms labcopy 16755
2.427563ms labcopy 16755
2.823604ms labcopy 16755
2.4336ms labcopy 16755
2.395264ms labcopy 16755
2.491859ms labcopy 16755
2.412772ms labcopy 16755
2.517819ms labcopy 16755
2.765948ms labcopy 16755
2.460767ms labcopy 16755
2.404018ms labcopy 16755
2.412469ms labcopy 16755
2.371718ms labcopy 16755
2.382585ms labcopy 16755
2.854092ms labcopy 16755
2.470728ms labcopy 16755
2.460465ms labcopy 16755
2.392547ms labcopy 16755
2.384094ms labcopy 16755
2.377454ms labcopy 16755
2.370209ms labcopy 16755
2.857713ms labcopy 16755
2.500915ms labcopy 16755
2.616829ms labcopy 16755
2.489444ms labcopy 16755
2.463182ms labcopy 16755
2.430279ms labcopy 16755
2.641279ms labcopy 16755
2.715839ms labcopy 16755
2.455938ms labcopy 16755
2.462276ms labcopy 16755
2.479483ms labcopy 16755
2.402206ms labcopy 16755
2.393452ms labcopy 16755
2.859223ms labcopy 16755
2.517819ms labcopy 16755
2.424242ms labcopy 16755
2.413677ms labcopy 16755
2.477067ms labcopy 16755
2.431185ms labcopy 16755
2.57638ms labcopy 16755
2.673579ms labcopy 16755
2.380171ms labcopy 16755
2.383793ms labcopy 16755
2.379265ms labcopy 16755
2.394358ms labcopy 16755
2.391943ms labcopy 16755
2.600529ms labcopy 16755
2.577889ms labcopy 16755
2.392245ms labcopy 16755
2.379265ms labcopy 16755
2.375039ms labcopy 16755
2.365077ms labcopy 16755
2.362663ms labcopy 16755
2.644298ms labcopy 16755
2.463484ms labcopy 16755
2.361757ms labcopy 16755
2.369907ms labcopy 16755
2.368398ms labcopy 16755
2.3687ms labcopy 16755
2.378359ms labcopy 16755
2.690484ms labcopy 16755
2.429978ms labcopy 16755
2.373831ms labcopy 16755
2.364775ms labcopy 16755
2.377152ms labcopy 16755
2.401301ms labcopy 16755
2.373228ms labcopy 16755
2.717349ms labcopy 16755
2.41096ms labcopy 16755
2.370209ms labcopy 16755
2.37202ms labcopy 16755
2.38168ms labcopy 16755
2.371416ms labcopy 16755
2.430883ms labcopy 16755
2.737573ms labcopy 16755
2.400697ms labcopy 16755
2.370209ms labcopy 16755
2.373832ms labcopy 16755
2.362965ms labcopy 16755
2.368398ms labcopy 16755
2.477973ms labcopy 16755
2.628602ms labcopy 16755
2.52295ms labcopy 16755
2.418809ms labcopy 16755
2.373227ms labcopy 16755
2.373831ms labcopy 16755
2.365681ms labcopy 16755
2.61864ms labcopy 16755
2.52929ms labcopy 16755
2.376246ms labcopy 16755
2.377454ms labcopy 16755
2.37685ms labcopy 16755
2.371718ms labcopy 16755
2.36719ms labcopy 16755
2.677202ms labcopy 16755
2.455937ms labcopy 16755
2.383189ms labcopy 16755
2.385906ms labcopy 16755
2.372926ms labcopy 16755
2.370813ms labcopy 16755
2.360851ms labcopy 16755
189.564802ms labcopy 1103347
159.818859ms labcopy 1103347
160.151208ms labcopy 1103347
161.488148ms labcopy 1103347
161.186589ms labcopy 1103347
160.51978ms labcopy 1103347
161.737485ms labcopy 1103347
160.277687ms labcopy 1103347
160.006617ms labcopy 1103347
160.268632ms labcopy 1103347
161.999501ms labcopy 1103347
160.759457ms labcopy 1103347
161.569651ms labcopy 1103347
161.103578ms labcopy 1103347
165.453691ms labcopy 1103347
172.079529ms labcopy 1103347
169.093525ms labcopy 1103347
173.787456ms labcopy 1103347
175.825921ms labcopy 1103347
168.411622ms labcopy 1103347
160.983136ms labcopy 1103347
160.705726ms labcopy 1103347
161.001248ms labcopy 1103347
160.819829ms labcopy 1103347
161.490563ms labcopy 1103347
161.391251ms labcopy 1103347
161.726014ms labcopy 1103347
161.21919ms labcopy 1103347
160.528534ms labcopy 1103347
162.810599ms labcopy 1103347
159.850555ms labcopy 1103347
161.366498ms labcopy 1103347
159.942019ms labcopy 1103347
161.144028ms labcopy 1103347
160.018088ms labcopy 1103347
159.92602ms labcopy 1103347
159.889193ms labcopy 1103347
160.521591ms labcopy 1103347
160.091741ms labcopy 1103347
160.107136ms labcopy 1103347
160.528533ms labcopy 1103347
162.129602ms labcopy 1103347
160.255048ms labcopy 1103347
160.920953ms labcopy 1103347
160.1986ms labcopy 1103347
162.256383ms labcopy 1103347
160.071215ms labcopy 1103347
160.564757ms labcopy 1103347
160.830696ms labcopy 1103347
160.953554ms labcopy 1103347
161.175723ms labcopy 1103347
161.182967ms labcopy 1103347
160.230899ms labcopy 1103347
161.295561ms labcopy 1103347
162.766226ms labcopy 1103347
159.877119ms labcopy 1103347
165.309401ms labcopy 1103347
169.900097ms labcopy 1103347
168.028863ms labcopy 1103347
173.994835ms labcopy 1103347
177.438158ms labcopy 1103347
167.752057ms labcopy 1103347
162.047496ms labcopy 1103347
161.643305ms labcopy 1103347
160.700594ms labcopy 1103347
161.128632ms labcopy 1103347
160.646863ms labcopy 1103347
159.978544ms labcopy 1103347
160.484764ms labcopy 1103347
161.826232ms labcopy 1103347
160.294592ms labcopy 1103347
161.399099ms labcopy 1103347
160.983437ms labcopy 1103347
160.44673ms labcopy 1103347
160.677351ms labcopy 1103347
162.452894ms labcopy 1103347
162.963341ms labcopy 1103347
160.849411ms labcopy 1103347
161.769181ms labcopy 1103347
160.693651ms labcopy 1103347
160.930914ms labcopy 1103347
162.011876ms labcopy 1103347
161.041093ms labcopy 1103347
160.708141ms labcopy 1103347
161.077618ms labcopy 1103347
160.653504ms labcopy 1103347
160.94329ms labcopy 1103347
161.366498ms labcopy 1103347
161.065241ms labcopy 1103347
160.10623ms labcopy 1103347
162.290192ms labcopy 1103347
159.955602ms labcopy 1103347
163.567666ms labcopy 1103347
160.466351ms labcopy 1103347
161.273224ms labcopy 1103347
160.228183ms labcopy 1103347
160.163282ms labcopy 1103347
159.907606ms labcopy 1103347
165.0172ms labcopy 1103347
169.795049ms labcopy 1103347
4.988246ms swizzle 16755
1.38554ms swizzle 16755
1.261173ms swizzle 16755
1.504473ms swizzle 16755
1.613143ms swizzle 16755
1.305547ms swizzle 16755
1.273549ms swizzle 16755
1.3466ms swizzle 16755
1.343279ms swizzle 16755
1.292567ms swizzle 16755
1.300717ms swizzle 16755
1.285624ms swizzle 16755
1.285926ms swizzle 16755
1.269927ms swizzle 16755
1.286832ms swizzle 16755
1.378597ms swizzle 16755
1.582051ms swizzle 16755
1.335733ms swizzle 16755
1.338752ms swizzle 16755
1.283511ms swizzle 16755
1.255438ms swizzle 16755
1.25091ms swizzle 16755
1.250608ms swizzle 16755
1.326375ms swizzle 16755
1.303132ms swizzle 16755
1.250306ms swizzle 16755
1.244571ms swizzle 16755
1.24276ms swizzle 16755
1.39369ms swizzle 16755
1.339959ms swizzle 16755
1.49421ms swizzle 16755
1.428404ms swizzle 16755
1.277172ms swizzle 16755
1.266003ms swizzle 16755
1.257853ms swizzle 16755
1.256042ms swizzle 16755
1.241854ms swizzle 16755
1.241552ms swizzle 16755
1.249099ms swizzle 16755
1.239741ms swizzle 16755
1.232798ms swizzle 16755
1.422668ms swizzle 16755
1.408783ms swizzle 16755
1.315206ms swizzle 16755
1.245477ms swizzle 16755
1.249702ms swizzle 16755
1.261173ms swizzle 16755
1.271135ms swizzle 16755
1.28502ms swizzle 16755
1.243061ms swizzle 16755
1.235817ms swizzle 16755
1.240949ms swizzle 16755
1.230685ms swizzle 16755
1.22978ms swizzle 16755
1.414821ms swizzle 16755
1.400633ms swizzle 16755
1.39701ms swizzle 16755
1.260268ms swizzle 16755
1.244571ms swizzle 16755
1.235515ms swizzle 16755
1.239742ms swizzle 16755
1.259966ms swizzle 16755
1.239741ms swizzle 16755
1.239439ms swizzle 16755
1.243968ms swizzle 16755
1.236119ms swizzle 16755
1.221327ms swizzle 16755
1.352638ms swizzle 16755
1.444705ms swizzle 16755
1.239741ms swizzle 16755
1.215593ms swizzle 16755
1.22012ms swizzle 16755
1.218611ms swizzle 16755
1.228874ms swizzle 16755
1.217102ms swizzle 16755
1.22163ms swizzle 16755
1.213479ms swizzle 16755
1.234912ms swizzle 16755
1.211669ms swizzle 16755
1.211366ms swizzle 16755
1.393087ms swizzle 16755
1.406972ms swizzle 16755
1.308565ms swizzle 16755
1.235817ms swizzle 16755
1.238836ms swizzle 16755
1.232496ms swizzle 16755
1.231591ms swizzle 16755
1.23944ms swizzle 16755
1.243967ms swizzle 16755
1.259966ms swizzle 16755
1.237024ms swizzle 16755
1.235213ms swizzle 16755
1.230686ms swizzle 16755
1.44561ms swizzle 16755
1.38554ms swizzle 16755
1.252117ms swizzle 16755
1.22012ms swizzle 16755
1.239138ms swizzle 16755
1.212574ms swizzle 16755
1.221327ms swizzle 16755
1.479418ms swizzle 16755
1.314301ms swizzle 16755
1.333016ms swizzle 16755
1.226459ms swizzle 16755
1.22646ms swizzle 16755
1.214083ms swizzle 16755
1.209555ms swizzle 16755
1.219215ms swizzle 16755
1.215291ms swizzle 16755
1.229176ms swizzle 16755
1.582051ms swizzle 16755
1.340261ms swizzle 16755
1.266908ms swizzle 16755
1.2331ms swizzle 16755
1.239138ms swizzle 16755
1.256042ms swizzle 16755
1.234308ms swizzle 16755
1.219215ms swizzle 16755
1.22646ms swizzle 16755
1.221026ms swizzle 16755
1.218913ms swizzle 16755
1.220121ms swizzle 16755
1.221328ms swizzle 16755
1.334525ms swizzle 16755
1.390671ms swizzle 16755
1.246684ms swizzle 16755
1.233704ms swizzle 16755
1.223441ms swizzle 16755
1.227063ms swizzle 16755
1.227365ms swizzle 16755
1.222837ms swizzle 16755
1.225252ms swizzle 16755
1.216196ms swizzle 16755
1.222837ms swizzle 16755
1.223743ms swizzle 16755
1.225856ms swizzle 16755
1.349619ms swizzle 16755
1.402746ms swizzle 16755
1.23461ms swizzle 16755
1.224044ms swizzle 16755
1.227969ms swizzle 16755
1.215894ms swizzle 16755
1.218611ms swizzle 16755
1.22012ms swizzle 16755
1.216196ms swizzle 16755
1.217404ms swizzle 16755
1.215592ms swizzle 16755
1.221629ms swizzle 16755
1.22827ms swizzle 16755
1.298906ms swizzle 16755
1.47489ms swizzle 16755
1.345694ms swizzle 16755
1.249401ms swizzle 16755
1.243666ms swizzle 16755
1.246986ms swizzle 16755
1.282304ms swizzle 16755
1.24276ms swizzle 16755
1.231289ms swizzle 16755
1.240949ms swizzle 16755
1.232195ms swizzle 16755
1.233704ms swizzle 16755
1.231591ms swizzle 16755
1.3466ms swizzle 16755
1.425084ms swizzle 16755
1.482135ms swizzle 16755
1.28502ms swizzle 16755
1.24276ms swizzle 16755
1.234006ms swizzle 16755
1.239741ms swizzle 16755
1.227666ms swizzle 16755
1.23461ms swizzle 16755
1.230686ms swizzle 16755
1.245174ms swizzle 16755
1.238836ms swizzle 16755
1.243967ms swizzle 16755
1.368032ms swizzle 16755
1.379201ms swizzle 16755
1.376484ms swizzle 16755
1.274757ms swizzle 16755
1.294982ms swizzle 16755
1.29951ms swizzle 16755
1.250307ms swizzle 16755
1.239439ms swizzle 16755
1.225855ms swizzle 16755
1.219819ms swizzle 16755
1.231289ms swizzle 16755
1.220422ms swizzle 16755
1.232497ms swizzle 16755
1.310678ms swizzle 16755
1.546431ms swizzle 16755
1.344185ms swizzle 16755
1.242458ms swizzle 16755
1.243061ms swizzle 16755
1.283511ms swizzle 16755
1.248495ms swizzle 16755
1.246383ms swizzle 16755
1.23461ms swizzle 16755
1.230082ms swizzle 16755
1.244571ms swizzle 16755
1.248193ms swizzle 16755
1.625519ms swizzle 16755
2.212034ms swizzle 16755
1.226158ms swizzle 16755
1.237326ms swizzle 16755
1.357467ms swizzle 16755
1.43897ms swizzle 16755
1.234308ms swizzle 16755
1.327583ms swizzle 16755
1.419952ms swizzle 16755
1.23793ms swizzle 16755
1.232798ms swizzle 16755
1.223743ms swizzle 16755
1.230082ms swizzle 16755
1.22646ms swizzle 16755
1.219214ms swizzle 16755
1.217403ms swizzle 16755
1.211366ms swizzle 16755
1.215592ms swizzle 16755
1.222536ms swizzle 16755
1.214083ms swizzle 16755
1.287133ms swizzle 16755
1.419952ms swizzle 16755
1.285021ms swizzle 16755
1.228874ms swizzle 16755
1.23793ms swizzle 16755
1.238836ms swizzle 16755
1.231591ms swizzle 16755
1.250307ms swizzle 16755
1.23642ms swizzle 16755
1.232195ms swizzle 16755
1.23461ms swizzle 16755
1.231591ms swizzle 16755
1.227969ms swizzle 16755
1.253627ms swizzle 16755
1.509605ms swizzle 16755
1.349921ms swizzle 16755
1.239741ms swizzle 16755
1.245477ms swizzle 16755
1.235214ms swizzle 16755
1.331205ms swizzle 16755
1.241854ms swizzle 16755
1.247287ms swizzle 16755
1.228874ms swizzle 16755
1.223139ms swizzle 16755
1.221328ms swizzle 16755
1.233101ms swizzle 16755
1.227365ms swizzle 16755
1.413613ms swizzle 16755
1.332714ms swizzle 16755
1.222535ms swizzle 16755
1.216197ms swizzle 16755
1.216799ms swizzle 16755
1.253325ms swizzle 16755
1.229478ms swizzle 16755
1.219516ms swizzle 16755
1.217706ms swizzle 16755
1.22012ms swizzle 16755
1.223139ms swizzle 16755
1.211668ms swizzle 16755
1.221328ms swizzle 16755
1.380408ms swizzle 16755
1.405463ms swizzle 16755
1.229478ms swizzle 16755
1.222234ms swizzle 16755
1.237628ms swizzle 16755
1.228271ms swizzle 16755
1.225554ms swizzle 16755
1.223139ms swizzle 16755
1.214385ms swizzle 16755
1.214989ms swizzle 16755
1.214385ms swizzle 16755
1.213178ms swizzle 16755
1.22012ms swizzle 16755
1.304339ms swizzle 16755
1.308263ms swizzle 16755
1.312188ms swizzle 16755
1.233704ms swizzle 16755
1.361693ms swizzle 16755
1.332412ms swizzle 16755
1.262079ms swizzle 16755
1.258155ms swizzle 16755
1.247288ms swizzle 16755
1.237326ms swizzle 16755
1.257249ms swizzle 16755
1.234006ms swizzle 16755
1.254533ms swizzle 16755
1.365316ms swizzle 16755
1.483644ms swizzle 16755
1.370145ms swizzle 16755
1.263891ms swizzle 16755
1.248194ms swizzle 16755
1.265098ms swizzle 16755
1.325168ms swizzle 16755
1.251816ms swizzle 16755
1.237628ms swizzle 16755
1.241854ms swizzle 16755
1.238836ms swizzle 16755
1.233402ms swizzle 16755
1.232798ms swizzle 16755
1.443799ms swizzle 16755
88.380542ms swizzle 1103347
81.665051ms swizzle 1103347
81.657202ms swizzle 1103347
81.766778ms swizzle 1103347
81.72331ms swizzle 1103347
82.018832ms swizzle 1103347
82.651531ms swizzle 1103347
81.805718ms swizzle 1103347
83.385957ms swizzle 1103347
82.087958ms swizzle 1103347
82.243114ms swizzle 1103347
82.269376ms swizzle 1103347
85.847328ms swizzle 1103347
82.264546ms swizzle 1103347
82.08192ms swizzle 1103347
82.358726ms swizzle 1103347
82.195419ms swizzle 1103347
82.207494ms swizzle 1103347
83.954663ms swizzle 1103347
89.190132ms swizzle 1103347
87.715242ms swizzle 1103347
85.491134ms swizzle 1103347
86.131983ms swizzle 1103347
86.67654ms swizzle 1103347
91.582679ms swizzle 1103347
86.060443ms swizzle 1103347
91.15464ms swizzle 1103347
91.851033ms swizzle 1103347
81.852506ms swizzle 1103347
82.572444ms swizzle 1103347
81.998909ms swizzle 1103347
82.027283ms swizzle 1103347
81.975363ms swizzle 1103347
82.088561ms swizzle 1103347
82.191797ms swizzle 1103347
82.218663ms swizzle 1103347
82.454416ms swizzle 1103347
81.628525ms swizzle 1103347
81.652675ms swizzle 1103347
82.102144ms swizzle 1103347
81.634563ms swizzle 1103347
81.688596ms swizzle 1103347
81.858845ms swizzle 1103347
82.124482ms swizzle 1103347
81.75742ms swizzle 1103347
81.649052ms swizzle 1103347
81.737195ms swizzle 1103347
81.880277ms swizzle 1103347
82.28809ms swizzle 1103347
81.629733ms swizzle 1103347
81.594717ms swizzle 1103347
81.849186ms swizzle 1103347
81.610716ms swizzle 1103347
81.718782ms swizzle 1103347
81.9814ms swizzle 1103347
81.578417ms swizzle 1103347
81.580228ms swizzle 1103347
81.749873ms swizzle 1103347
81.572077ms swizzle 1103347
81.930085ms swizzle 1103347
81.644826ms swizzle 1103347
82.019133ms swizzle 1103347
81.461899ms swizzle 1103347
81.735686ms swizzle 1103347
81.722103ms swizzle 1103347
82.159196ms swizzle 1103347
82.028189ms swizzle 1103347
81.702481ms swizzle 1103347
82.734241ms swizzle 1103347
82.0786ms swizzle 1103347
81.641204ms swizzle 1103347
81.879975ms swizzle 1103347
81.801492ms swizzle 1103347
84.123705ms swizzle 1103347
83.914516ms swizzle 1103347
82.333672ms swizzle 1103347
82.105767ms swizzle 1103347
82.311334ms swizzle 1103347
82.467396ms swizzle 1103347
83.748794ms swizzle 1103347
81.613735ms swizzle 1103347
81.842545ms swizzle 1103347
81.998607ms swizzle 1103347
82.057168ms swizzle 1103347
81.615244ms swizzle 1103347
82.031811ms swizzle 1103347
82.063507ms swizzle 1103347
82.002833ms swizzle 1103347
81.949102ms swizzle 1103347
81.850092ms swizzle 1103347
81.815981ms swizzle 1103347
83.318039ms swizzle 1103347
81.687388ms swizzle 1103347
81.625205ms swizzle 1103347
81.66988ms swizzle 1103347
81.753797ms swizzle 1103347
81.831678ms swizzle 1103347
81.834697ms swizzle 1103347
82.276016ms swizzle 1103347
81.662334ms swizzle 1103347
Benchmark 2: labcopy 16755
  Time (mean ± σ): 2.471482 ms ± 303.868848 µs
  Range (min … max): 2.353305 ms … 7.248577 ms 300 runs
Benchmark 1: swizzle 16755
  Time (mean ± σ): 1.291316 ms ± 233.847756 µs
  Range (min … max): 1.209555 ms … 4.988246 ms 300 runs
Summary
  'swizzle 16755' ran
    1.913925 ± -0.421233 times faster than 'labcopy 16755'
Benchmark 2: labcopy 1103347
  Time (mean ± σ): 162.518528 ms ± 4.485960 ms
  Range (min … max): 159.818859 ms … 189.564802 ms 100 runs
Benchmark 1: swizzle 1103347
  Time (mean ± σ): 82.727102 ms ± 2.128016 ms
  Range (min … max): 81.461899 ms … 91.851033 ms 100 runs
Summary
  'swizzle 1103347' ran
    1.964514 ± -0.862381 times faster than 'labcopy 1103347'
--&gt;
&lt;!--
1.375276ms: conv 16755
1.371956ms: conv 16755
1.546432ms: conv 16755
1.37256ms: conv 16755
1.429008ms: conv 16755
1.36924ms: conv 16755
1.622198ms: conv 16755
1.379503ms: conv 16755
1.396709ms: conv 16755
1.438668ms: conv 16755
1.443799ms: conv 16755
1.415726ms: conv 16755
1.374974ms: conv 16755
1.565449ms: conv 16755
1.387049ms: conv 16755
1.36441ms: conv 16755
1.457081ms: conv 16755
1.380408ms: conv 16755
1.375276ms: conv 16755
1.467042ms: conv 16755
1.371654ms: conv 16755
1.424178ms: conv 16755
1.381314ms: conv 16755
1.378296ms: conv 16755
1.451346ms: conv 16755
1.547639ms: conv 16755
1.38403ms: conv 16755
1.403651ms: conv 16755
1.377088ms: conv 16755
1.378598ms: conv 16755
1.403954ms: conv 16755
1.384635ms: conv 16755
1.383729ms: conv 16755
1.403651ms: conv 16755
1.377994ms: conv 16755
1.555186ms: conv 16755
1.371956ms: conv 16755
1.553375ms: conv 16755
1.367127ms: conv 16755
1.556091ms: conv 16755
1.365618ms: conv 16755
1.361089ms: conv 16755
1.370447ms: conv 16755
1.397614ms: conv 16755
1.382823ms: conv 16755
1.361693ms: conv 16755
1.365315ms: conv 16755
1.373163ms: conv 16755
1.38071ms: conv 16755
1.37256ms: conv 16755
1.371353ms: conv 16755
1.371654ms: conv 16755
1.363504ms: conv 16755
1.373163ms: conv 16755
1.389464ms: conv 16755
1.38222ms: conv 16755
1.380409ms: conv 16755
1.363504ms: conv 16755
1.378899ms: conv 16755
1.393992ms: conv 16755
1.377993ms: conv 16755
1.553374ms: conv 16755
1.386144ms: conv 16755
1.372861ms: conv 16755
1.365315ms: conv 16755
1.382522ms: conv 16755
1.392785ms: conv 16755
1.372258ms: conv 16755
1.371956ms: conv 16755
1.382823ms: conv 16755
1.374371ms: conv 16755
1.367126ms: conv 16755
1.404557ms: conv 16755
1.370749ms: conv 16755
1.478815ms: conv 16755
1.395803ms: conv 16755
1.415726ms: conv 16755
1.375578ms: conv 16755
1.552469ms: conv 16755
1.393389ms: conv 16755
1.392483ms: conv 16755
1.407576ms: conv 16755
1.401236ms: conv 16755
1.558204ms: conv 16755
1.371352ms: conv 16755
1.392181ms: conv 16755
1.369843ms: conv 16755
1.37256ms: conv 16755
1.477608ms: conv 16755
1.368938ms: conv 16755
1.371655ms: conv 16755
1.368938ms: conv 16755
1.406066ms: conv 16755
1.414519ms: conv 16755
1.37588ms: conv 16755
1.372258ms: conv 16755
1.400331ms: conv 16755
1.374975ms: conv 16755
1.377088ms: conv 16755
1.382521ms: conv 16755
53.556702ms: conv 1103347
53.441995ms: conv 1103347
53.38766ms: conv 1103347
53.531346ms: conv 1103347
53.634582ms: conv 1103347
56.343176ms: conv 1103347
54.586952ms: conv 1103347
54.735467ms: conv 1103347
53.525006ms: conv 1103347
56.184398ms: conv 1103347
53.813585ms: conv 1103347
53.445014ms: conv 1103347
53.531648ms: conv 1103347
53.315214ms: conv 1103347
53.422072ms: conv 1103347
53.512329ms: conv 1103347
53.386151ms: conv 1103347
54.13718ms: conv 1103347
53.760156ms: conv 1103347
56.73137ms: conv 1103347
53.993494ms: conv 1103347
53.707029ms: conv 1103347
53.253936ms: conv 1103347
54.918395ms: conv 1103347
55.62988ms: conv 1103347
54.26698ms: conv 1103347
53.155228ms: conv 1103347
53.161567ms: conv 1103347
54.087675ms: conv 1103347
53.315515ms: conv 1103347
53.398829ms: conv 1103347
53.501461ms: conv 1103347
53.372869ms: conv 1103347
53.839545ms: conv 1103347
53.39732ms: conv 1103347
53.203827ms: conv 1103347
53.426299ms: conv 1103347
53.140135ms: conv 1103347
53.090629ms: conv 1103347
53.102402ms: conv 1103347
53.059236ms: conv 1103347
53.275972ms: conv 1103347
53.176659ms: conv 1103347
56.470864ms: conv 1103347
53.023012ms: conv 1103347
54.104579ms: conv 1103347
54.614723ms: conv 1103347
53.764986ms: conv 1103347
55.222067ms: conv 1103347
54.551635ms: conv 1103347
53.271443ms: conv 1103347
53.308874ms: conv 1103347
55.179806ms: conv 1103347
54.832364ms: conv 1103347
53.928897ms: conv 1103347
53.841658ms: conv 1103347
54.122389ms: conv 1103347
54.168573ms: conv 1103347
54.028812ms: conv 1103347
53.373171ms: conv 1103347
54.095825ms: conv 1103347
55.723759ms: conv 1103347
53.454673ms: conv 1103347
53.773438ms: conv 1103347
53.846489ms: conv 1103347
54.112729ms: conv 1103347
53.229183ms: conv 1103347
53.415129ms: conv 1103347
53.237635ms: conv 1103347
53.920746ms: conv 1103347
53.250917ms: conv 1103347
53.413922ms: conv 1103347
53.352946ms: conv 1103347
53.179678ms: conv 1103347
53.102402ms: conv 1103347
53.618584ms: conv 1103347
53.102402ms: conv 1103347
54.857721ms: conv 1103347
54.519335ms: conv 1103347
54.372933ms: conv 1103347
54.617138ms: conv 1103347
54.453832ms: conv 1103347
54.316787ms: conv 1103347
54.053867ms: conv 1103347
54.710413ms: conv 1103347
54.230153ms: conv 1103347
53.645751ms: conv 1103347
53.207449ms: conv 1103347
53.831395ms: conv 1103347
53.865506ms: conv 1103347
54.172195ms: conv 1103347
53.083083ms: conv 1103347
53.140739ms: conv 1103347
53.425996ms: conv 1103347
53.050482ms: conv 1103347
53.269029ms: conv 1103347
53.144361ms: conv 1103347
54.270904ms: conv 1103347
53.184508ms: conv 1103347
53.131682ms: conv 1103347
Benchmark 1: conv 16755
  Time (mean ± σ): 1.405303 ms ± 57.660435 µs
  Range (min … max): 1.361089 ms … 1.622198 ms 100 runs
Benchmark 2: conv 1103347
  Time (mean ± σ): 53.866505 ms ± 797.242550 µs
  Range (min … max): 53.023012 ms … 56.731370 ms 100 runs
--&gt;
&lt;table class=&quot;perf &quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;outputs[…].l = buffer_outputs_map[…][0]&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.471ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;162.519ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;303µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;234µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;RgbStuffedInLab&lt;/samp&gt; &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.405ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;53.867ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;57.66µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;797.24ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;outputs[…][0] = out &gt;&gt; 16&lt;/samp&gt; &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.2913ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;82.727ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.49ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.12ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;66.69%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;61.77%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuation&quot;&gt;
For &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt; this is &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~16% → ~12%&lt;/span&gt; of overall runtime; for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt; — &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~0.75% → ~0.22%&lt;/span&gt;.
Not meaningless.
&lt;/p&gt;
&lt;div class=&quot;singles&quot;&gt;
&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.31-graphml-expand_rgb.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.31-graphml-expand_rgb.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
&lt;em&gt;Most&lt;/em&gt; of this is fixed per image and running it each time is wasteful, so it's&lt;!--'--&gt; time for
&lt;/p&gt;
&lt;h2 id=&quot;GAAP&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#GAAP&quot;&gt;#&lt;/a&gt; our very own Enron scandal.&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It also makes more sense to &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/add3092271e3c2f07cd063d17e03c996cb5097ec/item/src/main.rs#L159&quot;&gt;
 split &lt;samp&gt;known_rgbs&lt;/samp&gt; first&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;vec!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;vec!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; frequencies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; f &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

posterise_gpu&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
And the analysis pre-computation step
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/add3092271e3c2f07cd063d17e03c996cb5097ec/item/src/posterise_gpu.rs#L470&quot;&gt;enforced&lt;/a&gt; thusly:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;use_oneshot_driver&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;use_oneshot_driver &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50_000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// everything previously in susmit()...&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// No longer predicated on freq_weighting (must accommodate either):&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ensure_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buffer_known_rgbs_freqs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bundle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; rgb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// No longer predicated on freq_weighting (must accommodate either):&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_freqs_out &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;std&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_freqs_buffer_map &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;use_oneshot_driver &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;known_rgbs_freqs_out&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(known_rgbs_freqs_buffer_map, known_rgbs_freqs, known_rgbs * sizeof(u32))&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;ptr&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;copy_nonoverlapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs_buffer_map&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...up to and including assign_cell.hlsl&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;susmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;f32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; freq_weighting&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFFFFFF&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;radiussy_squared &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; radiussy &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; radiussy&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;grid_bothdirs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* ... */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// posterise_grid.kernel.hlsl.inc/posterise_grid_oneshot.kernel.hlsl.inc&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// for rgb in known_rgbs_rgbs { outputs[rgb] = ...; }&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
copying the frequency data is simplified by the new layout, but must happen every time.
Doesn't&lt;!--'--&gt; really matter
&lt;/p&gt;
&lt;!--
16.300168ms: 16755 known_rgbs
13.194627ms: 16755 measurement overall
18.371836ms: 16755 known_rgbs
9.125848ms: 16755 measurement overall
14.659858ms: 16755 known_rgbs
8.370593ms: 16755 measurement overall
14.72355ms: 16755 known_rgbs
8.307203ms: 16755 measurement overall
14.832824ms: 16755 known_rgbs
8.227813ms: 16755 measurement overall
17.305967ms: 16755 known_rgbs
9.304549ms: 16755 measurement overall
14.752528ms: 16755 known_rgbs
7.852601ms: 16755 measurement overall
14.088134ms: 16755 known_rgbs
7.94497ms: 16755 measurement overall
14.338376ms: 16755 known_rgbs
7.295969ms: 16755 measurement overall
14.010254ms: 16755 known_rgbs
7.841432ms: 16755 measurement overall
13.9366ms: 16755 known_rgbs
7.594208ms: 16755 measurement overall
14.53036ms: 16755 known_rgbs
7.671182ms: 16755 measurement overall
14.019309ms: 16755 known_rgbs
7.491273ms: 16755 measurement overall
13.972521ms: 16755 known_rgbs
7.539269ms: 16755 measurement overall
14.090549ms: 16755 known_rgbs
7.531119ms: 16755 measurement overall
14.237857ms: 16755 known_rgbs
7.557079ms: 16755 measurement overall
14.095982ms: 16755 known_rgbs
7.614432ms: 16755 measurement overall
14.719324ms: 16755 known_rgbs
7.701972ms: 16755 measurement overall
15.765573ms: 16755 known_rgbs
8.335275ms: 16755 measurement overall
14.298229ms: 16755 known_rgbs
7.732762ms: 16755 measurement overall
14.128583ms: 16755 known_rgbs
8.591856ms: 16755 measurement overall
14.702722ms: 16755 known_rgbs
7.82815ms: 16755 measurement overall
14.706948ms: 16755 known_rgbs
7.577001ms: 16755 measurement overall
13.978257ms: 16755 known_rgbs
7.783173ms: 16755 measurement overall
13.983991ms: 16755 known_rgbs
8.07477ms: 16755 measurement overall
14.318454ms: 16755 known_rgbs
8.153555ms: 16755 measurement overall
14.546961ms: 16755 known_rgbs
7.693218ms: 16755 measurement overall
14.546357ms: 16755 known_rgbs
7.643109ms: 16755 measurement overall
13.928449ms: 16755 known_rgbs
7.75359ms: 16755 measurement overall
14.143978ms: 16755 known_rgbs
7.447202ms: 16755 measurement overall
14.161485ms: 16755 known_rgbs
7.369321ms: 16755 measurement overall
14.028969ms: 16755 known_rgbs
7.360869ms: 16755 measurement overall
14.012669ms: 16755 known_rgbs
7.917803ms: 16755 measurement overall
14.807165ms: 16755 known_rgbs
7.466218ms: 16755 measurement overall
14.236045ms: 16755 known_rgbs
7.982401ms: 16755 measurement overall
14.255365ms: 16755 known_rgbs
7.757515ms: 16755 measurement overall
14.615484ms: 16755 known_rgbs
7.389848ms: 16755 measurement overall
13.934185ms: 16755 known_rgbs
7.415507ms: 16755 measurement overall
13.984897ms: 16755 known_rgbs
7.550739ms: 16755 measurement overall
13.99999ms: 16755 known_rgbs
7.574587ms: 16755 measurement overall
14.189257ms: 16755 known_rgbs
7.471954ms: 16755 measurement overall
14.011461ms: 16755 known_rgbs
7.563116ms: 16755 measurement overall
14.194992ms: 16755 known_rgbs
7.538665ms: 16755 measurement overall
13.956824ms: 16755 known_rgbs
7.456258ms: 16755 measurement overall
13.919998ms: 16755 known_rgbs
7.537458ms: 16755 measurement overall
13.97403ms: 16755 known_rgbs
7.616545ms: 16755 measurement overall
14.056741ms: 16755 known_rgbs
7.446296ms: 16755 measurement overall
14.287362ms: 16755 known_rgbs
8.114012ms: 16755 measurement overall
14.891384ms: 16755 known_rgbs
7.973344ms: 16755 measurement overall
14.218537ms: 16755 known_rgbs
7.676918ms: 16755 measurement overall
13.932977ms: 16755 known_rgbs
7.568247ms: 16755 measurement overall
14.274683ms: 16755 known_rgbs
7.494594ms: 16755 measurement overall
14.185936ms: 16755 known_rgbs
7.475577ms: 16755 measurement overall
14.13945ms: 16755 known_rgbs
7.51663ms: 16755 measurement overall
13.926034ms: 16755 known_rgbs
7.485236ms: 16755 measurement overall
14.008442ms: 16755 known_rgbs
7.254614ms: 16755 measurement overall
14.237555ms: 16755 known_rgbs
7.784983ms: 16755 measurement overall
14.191671ms: 16755 known_rgbs
9.249611ms: 16755 measurement overall
14.609748ms: 16755 known_rgbs
7.533232ms: 16755 measurement overall
16.129013ms: 16755 known_rgbs
8.625967ms: 16755 measurement overall
14.135224ms: 16755 known_rgbs
7.961874ms: 16755 measurement overall
14.319962ms: 16755 known_rgbs
7.765966ms: 16755 measurement overall
14.24329ms: 16755 known_rgbs
7.595717ms: 16755 measurement overall
14.083908ms: 16755 known_rgbs
7.814868ms: 16755 measurement overall
14.528548ms: 16755 known_rgbs
8.206079ms: 16755 measurement overall
14.371883ms: 16755 known_rgbs
7.829357ms: 16755 measurement overall
14.114999ms: 16755 known_rgbs
7.822415ms: 16755 measurement overall
14.114395ms: 16755 known_rgbs
7.830866ms: 16755 measurement overall
14.243893ms: 16755 known_rgbs
8.269168ms: 16755 measurement overall
14.638727ms: 16755 known_rgbs
7.962176ms: 16755 measurement overall
14.262006ms: 16755 known_rgbs
7.831168ms: 16755 measurement overall
16.582709ms: 16755 known_rgbs
7.976967ms: 16755 measurement overall
14.652009ms: 16755 known_rgbs
8.245924ms: 16755 measurement overall
14.360714ms: 16755 known_rgbs
8.305391ms: 16755 measurement overall
18.037979ms: 16755 known_rgbs
9.189239ms: 16755 measurement overall
14.19952ms: 16755 known_rgbs
7.723706ms: 16755 measurement overall
14.41535ms: 16755 known_rgbs
7.882786ms: 16755 measurement overall
14.554206ms: 16755 known_rgbs
8.445152ms: 16755 measurement overall
14.352564ms: 16755 known_rgbs
7.543495ms: 16755 measurement overall
17.623222ms: 16755 known_rgbs
9.504683ms: 16755 measurement overall
14.232724ms: 16755 known_rgbs
8.262225ms: 16755 measurement overall
14.411125ms: 16755 known_rgbs
8.418588ms: 16755 measurement overall
14.795091ms: 16755 known_rgbs
8.296939ms: 16755 measurement overall
14.656537ms: 16755 known_rgbs
8.620836ms: 16755 measurement overall
18.26528ms: 16755 known_rgbs
7.964892ms: 16755 measurement overall
17.243784ms: 16755 known_rgbs
8.247434ms: 16755 measurement overall
14.262307ms: 16755 known_rgbs
8.466283ms: 16755 measurement overall
14.06157ms: 16755 known_rgbs
7.919915ms: 16755 measurement overall
14.223669ms: 16755 known_rgbs
7.807925ms: 16755 measurement overall
14.059155ms: 16755 known_rgbs
7.711329ms: 16755 measurement overall
14.752529ms: 16755 known_rgbs
7.763249ms: 16755 measurement overall
14.758264ms: 16755 known_rgbs
7.839922ms: 16755 measurement overall
14.297927ms: 16755 known_rgbs
7.917198ms: 16755 measurement overall
14.300342ms: 16755 known_rgbs
8.278224ms: 16755 measurement overall
15.464014ms: 16755 known_rgbs
8.104956ms: 16755 measurement overall
14.004216ms: 16755 known_rgbs
8.132123ms: 16755 measurement overall
14.657443ms: 16755 known_rgbs
8.339804ms: 16755 measurement overall
14.722343ms: 16755 known_rgbs
8.312032ms: 16755 measurement overall
14.119829ms: 16755 known_rgbs
8.532089ms: 16755 measurement overall
14.642048ms: 16755 known_rgbs
8.355198ms: 16755 measurement overall
14.675856ms: 16755 known_rgbs
8.320786ms: 16755 measurement overall
14.220348ms: 16755 known_rgbs
8.99967ms: 16755 measurement overall
16.935282ms: 16755 known_rgbs
9.75885ms: 16755 measurement overall
14.332942ms: 16755 known_rgbs
7.824225ms: 16755 measurement overall
15.253014ms: 16755 known_rgbs
9.761566ms: 16755 measurement overall
14.837653ms: 16755 known_rgbs
7.844752ms: 16755 measurement overall
14.761282ms: 16755 known_rgbs
8.791085ms: 16755 measurement overall
19.405709ms: 16755 known_rgbs
9.859671ms: 16755 measurement overall
15.583551ms: 16755 known_rgbs
7.565229ms: 16755 measurement overall
34.29649ms: 1103347 known_rgbs
225.190384ms: 1103347 measurement overall
27.403806ms: 1103347 known_rgbs
135.438488ms: 1103347 measurement overall
28.524916ms: 1103347 known_rgbs
133.089712ms: 1103347 measurement overall
27.50825ms: 1103347 known_rgbs
144.567356ms: 1103347 measurement overall
30.383773ms: 1103347 known_rgbs
150.055482ms: 1103347 measurement overall
27.210917ms: 1103347 known_rgbs
142.859127ms: 1103347 measurement overall
27.732532ms: 1103347 known_rgbs
138.282015ms: 1103347 measurement overall
28.078163ms: 1103347 known_rgbs
127.157247ms: 1103347 measurement overall
27.270384ms: 1103347 known_rgbs
129.270572ms: 1103347 measurement overall
27.190692ms: 1103347 known_rgbs
127.576832ms: 1103347 measurement overall
26.97124ms: 1103347 known_rgbs
127.995815ms: 1103347 measurement overall
27.104059ms: 1103347 known_rgbs
219.094612ms: 1103347 measurement overall
35.296554ms: 1103347 known_rgbs
163.295689ms: 1103347 measurement overall
28.388475ms: 1103347 known_rgbs
138.407589ms: 1103347 measurement overall
27.547491ms: 1103347 known_rgbs
130.40919ms: 1103347 measurement overall
27.712307ms: 1103347 known_rgbs
255.287087ms: 1103347 measurement overall
35.432693ms: 1103347 known_rgbs
196.029748ms: 1103347 measurement overall
28.238752ms: 1103347 known_rgbs
136.891042ms: 1103347 measurement overall
28.123744ms: 1103347 known_rgbs
133.185703ms: 1103347 measurement overall
27.193107ms: 1103347 known_rgbs
134.061401ms: 1103347 measurement overall
27.592771ms: 1103347 known_rgbs
134.537737ms: 1103347 measurement overall
27.300268ms: 1103347 known_rgbs
133.92496ms: 1103347 measurement overall
27.533304ms: 1103347 known_rgbs
133.635778ms: 1103347 measurement overall
27.169864ms: 1103347 known_rgbs
132.489009ms: 1103347 measurement overall
27.369998ms: 1103347 known_rgbs
132.160585ms: 1103347 measurement overall
27.393543ms: 1103347 known_rgbs
139.213556ms: 1103347 measurement overall
27.148432ms: 1103347 known_rgbs
133.124124ms: 1103347 measurement overall
27.28759ms: 1103347 known_rgbs
138.358084ms: 1103347 measurement overall
28.722936ms: 1103347 known_rgbs
128.994067ms: 1103347 measurement overall
26.915094ms: 1103347 known_rgbs
128.618855ms: 1103347 measurement overall
27.503119ms: 1103347 known_rgbs
129.660878ms: 1103347 measurement overall
27.481082ms: 1103347 known_rgbs
135.711371ms: 1103347 measurement overall
26.978183ms: 1103347 known_rgbs
134.767755ms: 1103347 measurement overall
27.941118ms: 1103347 known_rgbs
134.178221ms: 1103347 measurement overall
27.734344ms: 1103347 known_rgbs
143.381345ms: 1103347 measurement overall
27.138168ms: 1103347 known_rgbs
128.252396ms: 1103347 measurement overall
27.260121ms: 1103347 known_rgbs
128.697942ms: 1103347 measurement overall
26.940148ms: 1103347 known_rgbs
127.567475ms: 1103347 measurement overall
27.132132ms: 1103347 known_rgbs
129.890292ms: 1103347 measurement overall
26.992068ms: 1103347 known_rgbs
128.239115ms: 1103347 measurement overall
27.210012ms: 1103347 known_rgbs
128.421136ms: 1103347 measurement overall
27.552321ms: 1103347 known_rgbs
129.298041ms: 1103347 measurement overall
26.912679ms: 1103347 known_rgbs
127.248408ms: 1103347 measurement overall
27.393845ms: 1103347 known_rgbs
128.968108ms: 1103347 measurement overall
27.024368ms: 1103347 known_rgbs
127.604604ms: 1103347 measurement overall
15.056503ms: 16755 known_rgbs
13.806196ms: 16755 measurement overall
14.898025ms: 27868 known_rgbs
15.33361ms: 27868 measurement overall
15.895071ms: 27868 known_rgbs
10.579005ms: 27868 measurement overall
14.024139ms: 27868 known_rgbs
9.381222ms: 27868 measurement overall
14.090549ms: 27868 known_rgbs
9.068192ms: 27868 measurement overall
15.006695ms: 27868 known_rgbs
10.543083ms: 27868 measurement overall
16.121466ms: 27868 known_rgbs
12.583962ms: 27868 measurement overall
14.332641ms: 27868 known_rgbs
9.480233ms: 27868 measurement overall
14.024743ms: 27868 known_rgbs
8.678792ms: 27868 measurement overall
14.097793ms: 27868 known_rgbs
9.370958ms: 27868 measurement overall
14.064588ms: 27868 known_rgbs
9.129471ms: 27868 measurement overall
14.011461ms: 27868 known_rgbs
8.547182ms: 27868 measurement overall
14.048288ms: 27868 known_rgbs
9.519776ms: 27868 measurement overall
14.157562ms: 27868 known_rgbs
9.148789ms: 27868 measurement overall
14.327207ms: 27868 known_rgbs
8.937487ms: 27868 measurement overall
14.290682ms: 27868 known_rgbs
9.253837ms: 27868 measurement overall
14.080587ms: 27868 known_rgbs
9.112566ms: 27868 measurement overall
14.746491ms: 27868 known_rgbs
9.312096ms: 27868 measurement overall
14.06972ms: 27868 known_rgbs
8.63291ms: 27868 measurement overall
14.109264ms: 27868 known_rgbs
9.566866ms: 27868 measurement overall
14.076663ms: 27868 known_rgbs
8.993332ms: 27868 measurement overall
14.026554ms: 27868 known_rgbs
8.629589ms: 27868 measurement overall
14.107754ms: 27868 known_rgbs
10.93037ms: 27868 measurement overall
14.124659ms: 27868 known_rgbs
9.110454ms: 27868 measurement overall
14.095076ms: 27868 known_rgbs
8.695999ms: 27868 measurement overall
14.096888ms: 27868 known_rgbs
8.565595ms: 27868 measurement overall
14.133715ms: 27868 known_rgbs
9.27044ms: 27868 measurement overall
14.08602ms: 27868 known_rgbs
8.718638ms: 27868 measurement overall
14.021724ms: 27868 known_rgbs
8.554728ms: 27868 measurement overall
14.4721ms: 27868 known_rgbs
9.207351ms: 27868 measurement overall
14.116206ms: 27868 known_rgbs
8.546275ms: 27868 measurement overall
14.280116ms: 27868 known_rgbs
8.718034ms: 27868 measurement overall
15.316706ms: 27868 known_rgbs
10.003659ms: 27868 measurement overall
14.215217ms: 27868 known_rgbs
9.2155ms: 27868 measurement overall
15.826549ms: 27868 known_rgbs
9.399938ms: 27868 measurement overall
14.017801ms: 27868 known_rgbs
8.60212ms: 27868 measurement overall
13.983086ms: 27868 known_rgbs
9.800205ms: 27868 measurement overall
15.94035ms: 27868 known_rgbs
10.875734ms: 27868 measurement overall
14.116508ms: 27868 known_rgbs
9.009028ms: 27868 measurement overall
14.041647ms: 27868 known_rgbs
8.957712ms: 27868 measurement overall
14.16058ms: 27868 known_rgbs
9.367035ms: 27868 measurement overall
14.01931ms: 27868 known_rgbs
9.193163ms: 27868 measurement overall
14.187445ms: 27868 known_rgbs
8.755465ms: 27868 measurement overall
14.285249ms: 27868 known_rgbs
9.588601ms: 27868 measurement overall
14.09568ms: 27868 known_rgbs
9.128565ms: 27868 measurement overall
14.025347ms: 27868 known_rgbs
8.661889ms: 27868 measurement overall
14.067607ms: 27868 known_rgbs
8.996652ms: 27868 measurement overall
14.113188ms: 27868 known_rgbs
9.159354ms: 27868 measurement overall
13.995161ms: 27868 known_rgbs
8.694791ms: 27868 measurement overall
14.242988ms: 27868 known_rgbs
8.62808ms: 27868 measurement overall
14.602806ms: 27868 known_rgbs
9.546642ms: 27868 measurement overall
14.076361ms: 27868 known_rgbs
9.923666ms: 27868 measurement overall
14.342904ms: 27868 known_rgbs
8.934468ms: 27868 measurement overall
14.102925ms: 27868 known_rgbs
8.712903ms: 27868 measurement overall
14.668008ms: 27868 known_rgbs
9.475403ms: 27868 measurement overall
14.06821ms: 27868 known_rgbs
8.610874ms: 27868 measurement overall
14.128582ms: 27868 known_rgbs
8.603931ms: 27868 measurement overall
14.370675ms: 27868 known_rgbs
9.359488ms: 27868 measurement overall
14.150921ms: 27868 known_rgbs
9.233311ms: 27868 measurement overall
14.024441ms: 27868 known_rgbs
8.734939ms: 27868 measurement overall
14.106849ms: 27868 known_rgbs
8.81463ms: 27868 measurement overall
14.026856ms: 27868 known_rgbs
9.054609ms: 27868 measurement overall
15.428092ms: 27868 known_rgbs
8.994237ms: 27868 measurement overall
14.248422ms: 27868 known_rgbs
9.092644ms: 27868 measurement overall
14.17024ms: 27868 known_rgbs
9.233612ms: 27868 measurement overall
14.403276ms: 27868 known_rgbs
9.461215ms: 27868 measurement overall
14.164504ms: 27868 known_rgbs
8.822479ms: 27868 measurement overall
14.012065ms: 27868 known_rgbs
10.219187ms: 27868 measurement overall
14.332037ms: 27868 known_rgbs
9.858464ms: 27868 measurement overall
14.044364ms: 27868 known_rgbs
9.101398ms: 27868 measurement overall
14.411125ms: 27868 known_rgbs
8.516995ms: 27868 measurement overall
14.024139ms: 27868 known_rgbs
9.289759ms: 27868 measurement overall
14.656537ms: 27868 known_rgbs
9.159958ms: 27868 measurement overall
14.755849ms: 27868 known_rgbs
8.833043ms: 27868 measurement overall
14.190464ms: 27868 known_rgbs
8.938996ms: 27868 measurement overall
14.774866ms: 27868 known_rgbs
9.279194ms: 27868 measurement overall
14.119527ms: 27868 known_rgbs
9.188333ms: 27868 measurement overall
14.596164ms: 27868 known_rgbs
8.820969ms: 27868 measurement overall
15.151588ms: 84860 known_rgbs
59.822421ms: 84860 measurement overall
14.779998ms: 84860 known_rgbs
16.095506ms: 84860 measurement overall
14.760377ms: 84860 known_rgbs
16.364464ms: 84860 measurement overall
14.810788ms: 84860 known_rgbs
15.982007ms: 84860 measurement overall
15.294067ms: 84860 known_rgbs
16.171877ms: 84860 measurement overall
15.011827ms: 84860 known_rgbs
16.416987ms: 84860 measurement overall
14.703023ms: 84860 known_rgbs
16.390424ms: 84860 measurement overall
14.766716ms: 84860 known_rgbs
16.000722ms: 84860 measurement overall
15.049559ms: 84860 known_rgbs
16.825405ms: 84860 measurement overall
14.741058ms: 84860 known_rgbs
16.023362ms: 84860 measurement overall
14.82739ms: 84860 known_rgbs
16.546486ms: 84860 measurement overall
14.738945ms: 84860 known_rgbs
15.893562ms: 84860 measurement overall
15.274747ms: 84860 known_rgbs
16.13837ms: 84860 measurement overall
15.232487ms: 84860 known_rgbs
16.231042ms: 84860 measurement overall
15.195358ms: 84860 known_rgbs
16.354805ms: 84860 measurement overall
15.308556ms: 84860 known_rgbs
16.374124ms: 84860 measurement overall
14.894403ms: 84860 known_rgbs
16.095506ms: 84860 measurement overall
15.356552ms: 84860 known_rgbs
16.213835ms: 84860 measurement overall
14.794488ms: 84860 known_rgbs
16.374727ms: 84860 measurement overall
14.885951ms: 84860 known_rgbs
16.468002ms: 84860 measurement overall
14.742869ms: 84860 known_rgbs
15.944878ms: 84860 measurement overall
14.702118ms: 84860 known_rgbs
16.070452ms: 84860 measurement overall
14.779092ms: 84860 known_rgbs
16.173085ms: 84860 measurement overall
15.354137ms: 84860 known_rgbs
16.880646ms: 84860 measurement overall
15.278068ms: 84860 known_rgbs
16.302582ms: 84860 measurement overall
15.344477ms: 84860 known_rgbs
17.243482ms: 84860 measurement overall
16.186668ms: 84860 known_rgbs
15.791533ms: 84860 measurement overall
14.91674ms: 84860 known_rgbs
16.404309ms: 84860 measurement overall
14.868745ms: 84860 known_rgbs
16.034531ms: 84860 measurement overall
15.020883ms: 84860 known_rgbs
16.394348ms: 84860 measurement overall
15.222223ms: 84860 known_rgbs
16.399178ms: 84860 measurement overall
15.176944ms: 84860 known_rgbs
17.64707ms: 84860 measurement overall
15.217997ms: 84860 known_rgbs
16.941621ms: 84860 measurement overall
15.117176ms: 84860 known_rgbs
17.287554ms: 84860 measurement overall
15.544309ms: 84860 known_rgbs
18.191927ms: 84860 measurement overall
15.819907ms: 84860 known_rgbs
17.303854ms: 84860 measurement overall
18.49258ms: 84860 known_rgbs
18.493789ms: 84860 measurement overall
19.680704ms: 84860 known_rgbs
18.381496ms: 84860 measurement overall
15.416924ms: 84860 known_rgbs
18.9825ms: 84860 measurement overall
15.248184ms: 84860 known_rgbs
18.076316ms: 84860 measurement overall
15.385832ms: 84860 known_rgbs
18.548425ms: 84860 measurement overall
16.139276ms: 84860 known_rgbs
19.657461ms: 84860 measurement overall
19.509247ms: 84860 known_rgbs
17.956476ms: 84860 measurement overall
20.934029ms: 84860 known_rgbs
17.193675ms: 84860 measurement overall
14.916439ms: 84860 known_rgbs
17.741552ms: 84860 measurement overall
15.694938ms: 84860 known_rgbs
19.336281ms: 84860 measurement overall
15.029636ms: 84860 known_rgbs
16.877928ms: 84860 measurement overall
19.914947ms: 84860 known_rgbs
17.745175ms: 84860 measurement overall
15.035372ms: 84860 known_rgbs
17.798ms: 84860 measurement overall
15.303424ms: 84860 known_rgbs
17.852335ms: 84860 measurement overall
18.954729ms: 84860 known_rgbs
21.790709ms: 84860 measurement overall
20.873656ms: 84860 known_rgbs
19.62003ms: 84860 measurement overall
20.010939ms: 84860 known_rgbs
18.566838ms: 84860 measurement overall
16.744507ms: 84860 known_rgbs
17.76721ms: 84860 measurement overall
16.741186ms: 84860 known_rgbs
19.259307ms: 84860 measurement overall
15.000055ms: 84860 known_rgbs
17.904557ms: 84860 measurement overall
15.175738ms: 84860 known_rgbs
16.651533ms: 84860 measurement overall
14.897422ms: 84860 known_rgbs
17.024331ms: 84860 measurement overall
17.013464ms: 84860 known_rgbs
17.214805ms: 84860 measurement overall
15.166078ms: 84860 known_rgbs
17.081986ms: 84860 measurement overall
19.203764ms: 84860 known_rgbs
18.489864ms: 84860 measurement overall
15.620982ms: 84860 known_rgbs
19.452497ms: 84860 measurement overall
15.486351ms: 84860 known_rgbs
16.81635ms: 84860 measurement overall
14.993715ms: 84860 known_rgbs
17.038519ms: 84860 measurement overall
15.096649ms: 84860 known_rgbs
18.099559ms: 84860 measurement overall
15.439262ms: 84860 known_rgbs
16.731224ms: 84860 measurement overall
15.27837ms: 84860 known_rgbs
17.952854ms: 84860 measurement overall
15.218903ms: 84860 known_rgbs
18.070278ms: 84860 measurement overall
15.634867ms: 84860 known_rgbs
17.286044ms: 84860 measurement overall
15.290746ms: 84860 known_rgbs
16.799445ms: 84860 measurement overall
15.071293ms: 84860 known_rgbs
17.097381ms: 84860 measurement overall
14.984358ms: 84860 known_rgbs
17.136019ms: 84860 measurement overall
15.523481ms: 84860 known_rgbs
20.49301ms: 84860 measurement overall
15.700673ms: 84860 known_rgbs
18.073901ms: 84860 measurement overall
15.916201ms: 84860 known_rgbs
18.120085ms: 84860 measurement overall
15.337836ms: 84860 known_rgbs
18.189814ms: 84860 measurement overall
16.821481ms: 84860 known_rgbs
20.604397ms: 84860 measurement overall
14.716305ms: 84860 known_rgbs
16.009778ms: 84860 measurement overall
20.112364ms: 84860 known_rgbs
16.961544ms: 84860 measurement overall
14.877801ms: 84860 known_rgbs
16.447778ms: 84860 measurement overall
14.734719ms: 84860 known_rgbs
16.047209ms: 84860 measurement overall
14.910704ms: 84860 known_rgbs
16.588143ms: 84860 measurement overall
14.690345ms: 84860 known_rgbs
16.19844ms: 84860 measurement overall
14.899534ms: 84860 known_rgbs
16.124183ms: 84860 measurement overall
18.887415ms: 84860 known_rgbs
16.919887ms: 84860 measurement overall
14.711174ms: 84860 known_rgbs
16.055359ms: 84860 measurement overall
14.739549ms: 84860 known_rgbs
16.399178ms: 84860 measurement overall
14.721135ms: 84860 known_rgbs
16.146219ms: 84860 measurement overall
15.180567ms: 84860 known_rgbs
16.18697ms: 84860 measurement overall
14.758264ms: 84860 known_rgbs
16.261831ms: 84860 measurement overall
14.956284ms: 84860 known_rgbs
16.075282ms: 84860 measurement overall
14.712684ms: 84860 known_rgbs
16.043284ms: 84860 measurement overall
14.881423ms: 84860 known_rgbs
15.880279ms: 84860 measurement overall
14.723852ms: 84860 known_rgbs
16.407932ms: 84860 measurement overall
14.805958ms: 84860 known_rgbs
16.154369ms: 84860 measurement overall
14.812599ms: 84860 known_rgbs
16.933169ms: 84860 measurement overall
14.79328ms: 84860 known_rgbs
16.137163ms: 84860 measurement overall
15.064955ms: 84860 known_rgbs
17.15564ms: 84860 measurement overall
15.114158ms: 84860 known_rgbs
16.53411ms: 84860 measurement overall
15.112648ms: 84860 known_rgbs
15.983818ms: 84860 measurement overall
14.783017ms: 84860 known_rgbs
16.127503ms: 84860 measurement overall
15.261164ms: 84860 known_rgbs
16.573653ms: 84860 measurement overall
14.967453ms: 84860 known_rgbs
16.70134ms: 84860 measurement overall
14.728078ms: 84860 known_rgbs
16.038756ms: 84860 measurement overall
14.814108ms: 84860 known_rgbs
16.514791ms: 84860 measurement overall
14.81924ms: 84860 known_rgbs
16.32975ms: 84860 measurement overall
15.066766ms: 84860 known_rgbs
16.405215ms: 84860 measurement overall
16.622857ms: 242931 known_rgbs
44.432363ms: 242931 measurement overall
17.710762ms: 242931 known_rgbs
32.786886ms: 242931 measurement overall
16.169764ms: 242931 known_rgbs
32.5297ms: 242931 measurement overall
15.860659ms: 242931 known_rgbs
32.550528ms: 242931 measurement overall
15.882091ms: 242931 known_rgbs
32.652255ms: 242931 measurement overall
15.884204ms: 242931 known_rgbs
32.726513ms: 242931 measurement overall
15.951821ms: 242931 known_rgbs
32.192521ms: 242931 measurement overall
15.99559ms: 242931 known_rgbs
32.350395ms: 242931 measurement overall
16.105468ms: 242931 known_rgbs
32.873519ms: 242931 measurement overall
16.354804ms: 242931 known_rgbs
34.01576ms: 242931 measurement overall
15.893863ms: 242931 known_rgbs
32.332585ms: 242931 measurement overall
15.841641ms: 242931 known_rgbs
33.313934ms: 242931 measurement overall
16.394952ms: 242931 known_rgbs
33.538216ms: 242931 measurement overall
16.443854ms: 242931 known_rgbs
32.627201ms: 242931 measurement overall
15.872431ms: 242931 known_rgbs
32.436727ms: 242931 measurement overall
15.925558ms: 242931 known_rgbs
43.576588ms: 242931 measurement overall
15.945783ms: 242931 known_rgbs
32.698138ms: 242931 measurement overall
15.888128ms: 242931 known_rgbs
32.511588ms: 242931 measurement overall
15.8673ms: 242931 known_rgbs
32.835786ms: 242931 measurement overall
15.88994ms: 242931 known_rgbs
32.517324ms: 242931 measurement overall
15.959368ms: 242931 known_rgbs
32.255308ms: 242931 measurement overall
15.944878ms: 242931 known_rgbs
32.235688ms: 242931 measurement overall
15.894467ms: 242931 known_rgbs
32.156299ms: 242931 measurement overall
15.917107ms: 242931 known_rgbs
34.356258ms: 242931 measurement overall
21.238003ms: 242931 known_rgbs
34.158841ms: 242931 measurement overall
16.074376ms: 242931 known_rgbs
33.37491ms: 242931 measurement overall
16.041775ms: 242931 known_rgbs
31.803122ms: 242931 measurement overall
15.911975ms: 242931 known_rgbs
33.670129ms: 242931 measurement overall
15.877563ms: 242931 known_rgbs
33.128592ms: 242931 measurement overall
15.900504ms: 242931 known_rgbs
32.619654ms: 242931 measurement overall
15.973253ms: 242931 known_rgbs
34.099073ms: 242931 measurement overall
15.967518ms: 242931 known_rgbs
32.085965ms: 242931 measurement overall
15.850094ms: 242931 known_rgbs
32.135168ms: 242931 measurement overall
16.318883ms: 242931 known_rgbs
32.751265ms: 242931 measurement overall
15.846169ms: 242931 known_rgbs
32.437331ms: 242931 measurement overall
16.752052ms: 242931 known_rgbs
34.82867ms: 242931 measurement overall
15.793344ms: 242931 known_rgbs
34.26238ms: 242931 measurement overall
16.335485ms: 242931 known_rgbs
33.208584ms: 242931 measurement overall
16.533506ms: 242931 known_rgbs
35.749647ms: 242931 measurement overall
16.790691ms: 242931 known_rgbs
36.36363ms: 242931 measurement overall
23.098369ms: 328666 known_rgbs
68.826318ms: 328666 measurement overall
18.577403ms: 328666 known_rgbs
45.9634ms: 328666 measurement overall
23.406266ms: 328666 known_rgbs
49.446267ms: 328666 measurement overall
18.440359ms: 328666 known_rgbs
51.08869ms: 328666 measurement overall
16.825707ms: 328666 known_rgbs
44.643364ms: 328666 measurement overall
16.966374ms: 328666 known_rgbs
43.674089ms: 328666 measurement overall
16.802766ms: 328666 known_rgbs
43.590776ms: 328666 measurement overall
16.848648ms: 328666 known_rgbs
44.311015ms: 328666 measurement overall
16.786465ms: 328666 known_rgbs
43.940935ms: 328666 measurement overall
16.807596ms: 328666 known_rgbs
43.728123ms: 328666 measurement overall
16.836272ms: 328666 known_rgbs
43.185679ms: 328666 measurement overall
16.829631ms: 328666 known_rgbs
43.480295ms: 328666 measurement overall
18.220906ms: 328666 known_rgbs
45.186109ms: 328666 measurement overall
16.847441ms: 328666 known_rgbs
44.171555ms: 328666 measurement overall
16.816953ms: 328666 known_rgbs
43.758611ms: 328666 measurement overall
16.829329ms: 328666 known_rgbs
43.511688ms: 328666 measurement overall
16.890004ms: 328666 known_rgbs
43.190509ms: 328666 measurement overall
17.005616ms: 328666 known_rgbs
44.051717ms: 328666 measurement overall
16.878834ms: 328666 known_rgbs
44.455003ms: 328666 measurement overall
16.826613ms: 328666 known_rgbs
46.728616ms: 328666 measurement overall
16.739978ms: 328666 known_rgbs
43.663826ms: 328666 measurement overall
17.192166ms: 328666 known_rgbs
44.079488ms: 328666 measurement overall
16.888796ms: 328666 known_rgbs
44.77739ms: 328666 measurement overall
17.088627ms: 328666 known_rgbs
43.542177ms: 328666 measurement overall
17.0355ms: 328666 known_rgbs
43.931576ms: 328666 measurement overall
33.211603ms: 1103347 known_rgbs
170.895632ms: 1103347 measurement overall
26.963995ms: 1103347 known_rgbs
129.220162ms: 1103347 measurement overall
27.111303ms: 1103347 known_rgbs
130.616871ms: 1103347 measurement overall
27.033423ms: 1103347 known_rgbs
128.483018ms: 1103347 measurement overall
26.953732ms: 1103347 known_rgbs
129.602317ms: 1103347 measurement overall
26.949205ms: 1103347 known_rgbs
129.821769ms: 1103347 measurement overall
26.928376ms: 1103347 known_rgbs
130.058428ms: 1103347 measurement overall
27.484705ms: 1103347 known_rgbs
135.584589ms: 1103347 measurement overall
27.304796ms: 1103347 known_rgbs
138.603497ms: 1103347 measurement overall
27.231142ms: 1103347 known_rgbs
137.130115ms: 1103347 measurement overall
27.261932ms: 1103347 known_rgbs
139.474364ms: 1103347 measurement overall
27.710497ms: 1103347 known_rgbs
142.93429ms: 1103347 measurement overall
Benchmark 2: 16755 known_rgbs
  Time (mean ± σ): 14.674857 ms ± 1.040530 ms
  Range (min … max): 13.919998 ms … 19.405709 ms 110 runs
Benchmark 3: 84860 known_rgbs
  Time (mean ± σ): 15.627346 ms ± 1.466381 ms
  Range (min … max): 14.690345 ms … 20.934029 ms 107 runs
Benchmark 4: 242931 known_rgbs
  Time (mean ± σ): 16.235562 ms ± 880.991575 µs
  Range (min … max): 15.793344 ms … 21.238003 ms 40 runs
Benchmark 1: 27868 known_rgbs
  Time (mean ± σ): 14.333585 ms ± 477.324486 µs
  Range (min … max): 13.983086 ms … 16.121466 ms 77 runs
Benchmark 5: 328666 known_rgbs
  Time (mean ± σ): 17.579465 ms ± 1.748026 ms
  Range (min … max): 16.739978 ms … 23.406266 ms 25 runs
Benchmark 6: 1103347 known_rgbs
  Time (mean ± σ): 27.954045 ms ± 1.915551 ms
  Range (min … max): 26.912679 ms … 35.432693 ms 57 runs
Benchmark 1: 16755 measurement overall
  Time (mean ± σ): 8.095255 ms ± 917.960747 µs
  Range (min … max): 7.254614 ms … 13.806196 ms 110 runs
Benchmark 3: 84860 measurement overall
  Time (mean ± σ): 17.477675 ms ± 4.272018 ms
  Range (min … max): 15.791533 ms … 59.822421 ms 107 runs
Benchmark 4: 242931 measurement overall
  Time (mean ± σ): 33.629476 ms ± 2.576922 ms
  Range (min … max): 31.803122 ms … 44.432363 ms 40 runs
Benchmark 2: 27868 measurement overall
  Time (mean ± σ): 9.298359 ms ± 948.060587 µs
  Range (min … max): 8.516995 ms … 15.333610 ms 77 runs
Benchmark 5: 328666 measurement overall
  Time (mean ± σ): 45.637089 ms ± 5.082862 ms
  Range (min … max): 43.185679 ms … 68.826318 ms 25 runs
Benchmark 6: 1103347 measurement overall
  Time (mean ± σ): 140.833579 ms ± 24.824018 ms
  Range (min … max): 127.157247 ms … 255.287087 ms 57 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;samp&gt;known_rgbs_{rgbs,freqs}&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;14.675ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;27.954ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.04ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.92ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-21.13%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.45%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
this is, practically, a wash (σ is like &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6%&lt;/span&gt;); overall re-accounting like this remits
&lt;/p&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt;&lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, &lt;samp&gt;measure()&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8.095ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;17.478ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;33.629ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;918µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.27ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.58ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(of previous, [​[​palette​]​]) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7.01%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.29%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.03%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(of previous, [​[​*freq​]​]) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.59%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.26%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.06%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt;&lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, &lt;samp&gt;measure()&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9.298ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;45.637ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;140.834ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;948µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;24.82ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(of previous, [​[​palette​]​]) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.49%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.04%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.28%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(of previous, [​[​*freq​]​]) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.64%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.06%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.58%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
(though, of course, the [​[​palette​]​] path now also copies frequency data for &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;40µs-20ms&lt;/span&gt; which it didn't&lt;!--'--&gt; before).
&lt;/p&gt;
&lt;div class=&quot;singles&quot;&gt;
&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.32-graphml-GAAP.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.32-graphml-GAAP.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;h2 id=&quot;known_rgbs-DEVICE_LOCAL&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#known_rgbs-DEVICE_LOCAL&quot;&gt;#&lt;/a&gt; Do NOT tell americans about your allocations. Worst mistake of my life.&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
The allocations in question, of course, being &lt;samp&gt;known_rgbs_bundle&lt;/samp&gt; and &lt;samp&gt;known_rgbs_freqs&lt;/samp&gt;,
both uploaded to precious &lt;samp&gt;DEVICE_LOCAL &amp; HOST_VISIBLE&lt;/samp&gt; memory directly.
These are write-only for the host, and writing only part of the former was slower anyway.
Thus,
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/7430dcf60e6b94188f79889e248721e1af5b83d1/item/src/posterise_gpu.rs#L538&quot;&gt;the driver&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;DISTRIBUTE_ONESHOT_FREQS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;EXPAND_RGB&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(2)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;known_rgbs_pack&gt; known_rgbs_bundle;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;[DEVICE_LOCAL]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// [[vk::binding(3)]] &lt;abbr title=&quot;StructuredBuffer&quot;&gt;SB&lt;/abbr&gt;&amp;lt;uint&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;known_rgbs_freqs;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;[DEVICE_LOCAL]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// vk::BufferUsageFlags::STORAGE_BUFFER&lt;!--&quot;--&gt;              &lt;!--&quot;--&gt;| ::TRANSFER_SRC ⬎&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;⬐ ::TRANSFER_DST&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_bundle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;private_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BufferBundle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;private_memory_type_index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// false, false&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... ensure_buffer() ...&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// expand_rgb.hlsl&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(buffer_outputs_map, known_rgbs_freqs, known_rgbs * sizeof(u32))&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;ptr&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;copy_nonoverlapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;EXPAND_RGB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy or distribute_oneshot_freqs.hlsl&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(buffer_outputs_map, known_rgbs_freqs, known_rgbs * sizeof(u32))&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;ptr&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;copy_nonoverlapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;use_oneshot_driver &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;DISTRIBUTE_ONESHOT_FREQS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;div_ceil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(buffer_known_rgbs_freqs, buffer_outputs, buffer_known_rgbs_freqs_len)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_copy_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                            &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;BufferCopy&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		                              	&lt;!--&quot;--&gt;src_offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                              	&lt;!--&quot;--&gt;dst_offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                              	&lt;!--&quot;--&gt;size&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; buffer_known_rgbs_freqs_len&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// find_bbox.hlsl ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/7430dcf60e6b94188f79889e248721e1af5b83d1/item/src/expand_rgb.hlsl#L22&quot;&gt;&lt;samp&gt;expand_rgb.hlsl&lt;/samp&gt;&lt;/a&gt;
needs to populate the whole bundle instead of just updating &lt;code&gt;.lab&lt;/code&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;known_rgbs_pack bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;linear_srgb_to_oklab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unpack_rgb_to_r_g_b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bundle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and the new
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/7430dcf60e6b94188f79889e248721e1af5b83d1/item/src/distribute_oneshot_freqs.hlsl&quot;&gt;&lt;samp&gt;distribute_oneshot_freqs.hlsl&lt;/samp&gt;&lt;/a&gt;
replaces the &lt;code&gt;known_rgbs_freqs_out[rgb] = freq&lt;/code&gt; loop:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shader.h&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; known_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
1.423574ms 16755 known_rgbs_{rgbs,freqs}
193.795µs 16755 known_rgbs_{rgbs,freqs}
188.965µs 16755 known_rgbs_{rgbs,freqs}
188.059µs 16755 known_rgbs_{rgbs,freqs}
216.736µs 16755 known_rgbs_{rgbs,freqs}
211.605µs 16755 known_rgbs_{rgbs,freqs}
183.229µs 16755 known_rgbs_{rgbs,freqs}
200.737µs 16755 known_rgbs_{rgbs,freqs}
200.134µs 16755 known_rgbs_{rgbs,freqs}
221.264µs 16755 known_rgbs_{rgbs,freqs}
195.907µs 16755 known_rgbs_{rgbs,freqs}
298.842µs 16755 known_rgbs_{rgbs,freqs}
195.304µs 16755 known_rgbs_{rgbs,freqs}
203.454µs 16755 known_rgbs_{rgbs,freqs}
187.153µs 16755 known_rgbs_{rgbs,freqs}
198.624µs 16755 known_rgbs_{rgbs,freqs}
207.077µs 16755 known_rgbs_{rgbs,freqs}
184.437µs 16755 known_rgbs_{rgbs,freqs}
228.207µs 16755 known_rgbs_{rgbs,freqs}
204.36µs 16755 known_rgbs_{rgbs,freqs}
209.492µs 16755 known_rgbs_{rgbs,freqs}
215.83µs 16755 known_rgbs_{rgbs,freqs}
212.51µs 16755 known_rgbs_{rgbs,freqs}
204.661µs 16755 known_rgbs_{rgbs,freqs}
207.981µs 16755 known_rgbs_{rgbs,freqs}
199.832µs 16755 known_rgbs_{rgbs,freqs}
217.34µs 16755 known_rgbs_{rgbs,freqs}
202.549µs 16755 known_rgbs_{rgbs,freqs}
199.53µs 16755 known_rgbs_{rgbs,freqs}
212.812µs 16755 known_rgbs_{rgbs,freqs}
212.812µs 16755 known_rgbs_{rgbs,freqs}
323.896µs 16755 known_rgbs_{rgbs,freqs}
248.13µs 16755 known_rgbs_{rgbs,freqs}
205.265µs 16755 known_rgbs_{rgbs,freqs}
185.342µs 16755 known_rgbs_{rgbs,freqs}
226.697µs 16755 known_rgbs_{rgbs,freqs}
201.341µs 16755 known_rgbs_{rgbs,freqs}
230.622µs 16755 known_rgbs_{rgbs,freqs}
185.947µs 16755 known_rgbs_{rgbs,freqs}
218.848µs 16755 known_rgbs_{rgbs,freqs}
202.549µs 16755 known_rgbs_{rgbs,freqs}
186.852µs 16755 known_rgbs_{rgbs,freqs}
221.264µs 16755 known_rgbs_{rgbs,freqs}
204.661µs 16755 known_rgbs_{rgbs,freqs}
196.209µs 16755 known_rgbs_{rgbs,freqs}
189.568µs 16755 known_rgbs_{rgbs,freqs}
487.203µs 16755 known_rgbs_{rgbs,freqs}
203.153µs 16755 known_rgbs_{rgbs,freqs}
207.68µs 16755 known_rgbs_{rgbs,freqs}
188.663µs 16755 known_rgbs_{rgbs,freqs}
225.49µs 16755 known_rgbs_{rgbs,freqs}
212.812µs 16755 known_rgbs_{rgbs,freqs}
203.454µs 16755 known_rgbs_{rgbs,freqs}
188.965µs 16755 known_rgbs_{rgbs,freqs}
215.528µs 16755 known_rgbs_{rgbs,freqs}
222.471µs 16755 known_rgbs_{rgbs,freqs}
209.19µs 16755 known_rgbs_{rgbs,freqs}
204.964µs 16755 known_rgbs_{rgbs,freqs}
195.606µs 16755 known_rgbs_{rgbs,freqs}
212.51µs 16755 known_rgbs_{rgbs,freqs}
199.832µs 16755 known_rgbs_{rgbs,freqs}
186.248µs 16755 known_rgbs_{rgbs,freqs}
218.246µs 16755 known_rgbs_{rgbs,freqs}
257.185µs 16755 known_rgbs_{rgbs,freqs}
185.04µs 16755 known_rgbs_{rgbs,freqs}
201.039µs 16755 known_rgbs_{rgbs,freqs}
220.057µs 16755 known_rgbs_{rgbs,freqs}
203.454µs 16755 known_rgbs_{rgbs,freqs}
204.359µs 16755 known_rgbs_{rgbs,freqs}
187.757µs 16755 known_rgbs_{rgbs,freqs}
193.492µs 16755 known_rgbs_{rgbs,freqs}
199.529µs 16755 known_rgbs_{rgbs,freqs}
186.248µs 16755 known_rgbs_{rgbs,freqs}
204.057µs 16755 known_rgbs_{rgbs,freqs}
206.774µs 16755 known_rgbs_{rgbs,freqs}
210.095µs 16755 known_rgbs_{rgbs,freqs}
208.887µs 16755 known_rgbs_{rgbs,freqs}
208.887µs 16755 known_rgbs_{rgbs,freqs}
189.568µs 16755 known_rgbs_{rgbs,freqs}
218.547µs 16755 known_rgbs_{rgbs,freqs}
203.152µs 16755 known_rgbs_{rgbs,freqs}
209.189µs 16755 known_rgbs_{rgbs,freqs}
186.55µs 16755 known_rgbs_{rgbs,freqs}
198.926µs 16755 known_rgbs_{rgbs,freqs}
198.926µs 16755 known_rgbs_{rgbs,freqs}
197.115µs 16755 known_rgbs_{rgbs,freqs}
201.643µs 16755 known_rgbs_{rgbs,freqs}
191.078µs 16755 known_rgbs_{rgbs,freqs}
185.946µs 16755 known_rgbs_{rgbs,freqs}
205.265µs 16755 known_rgbs_{rgbs,freqs}
265.034µs 16755 known_rgbs_{rgbs,freqs}
75.453063ms 1103347 known_rgbs_{rgbs,freqs}
28.108651ms 1103347 known_rgbs_{rgbs,freqs}
28.543631ms 1103347 known_rgbs_{rgbs,freqs}
28.502276ms 1103347 known_rgbs_{rgbs,freqs}
28.612757ms 1103347 known_rgbs_{rgbs,freqs}
29.034155ms 1103347 known_rgbs_{rgbs,freqs}
28.42651ms 1103347 known_rgbs_{rgbs,freqs}
28.351044ms 1103347 known_rgbs_{rgbs,freqs}
29.445893ms 1103347 known_rgbs_{rgbs,freqs}
29.057398ms 1103347 known_rgbs_{rgbs,freqs}
29.149466ms 1103347 known_rgbs_{rgbs,freqs}
29.038079ms 1103347 known_rgbs_{rgbs,freqs}
28.274976ms 1103347 known_rgbs_{rgbs,freqs}
28.362818ms 1103347 known_rgbs_{rgbs,freqs}
29.013629ms 1103347 known_rgbs_{rgbs,freqs}
29.092414ms 1103347 known_rgbs_{rgbs,freqs}
28.482353ms 1103347 known_rgbs_{rgbs,freqs}
28.312104ms 1103347 known_rgbs_{rgbs,freqs}
28.538801ms 1103347 known_rgbs_{rgbs,freqs}
29.342958ms 1103347 known_rgbs_{rgbs,freqs}
28.220943ms 1103347 known_rgbs_{rgbs,freqs}
28.49473ms 1103347 known_rgbs_{rgbs,freqs}
29.306735ms 1103347 known_rgbs_{rgbs,freqs}
29.027514ms 1103347 known_rgbs_{rgbs,freqs}
28.526727ms 1103347 known_rgbs_{rgbs,freqs}
28.93122ms 1103347 known_rgbs_{rgbs,freqs}
29.020873ms 1103347 known_rgbs_{rgbs,freqs}
28.450357ms 1103347 known_rgbs_{rgbs,freqs}
28.682487ms 1103347 known_rgbs_{rgbs,freqs}
29.342958ms 1103347 known_rgbs_{rgbs,freqs}
27.677594ms 1103347 known_rgbs_{rgbs,freqs}
28.644754ms 1103347 known_rgbs_{rgbs,freqs}
29.139504ms 1103347 known_rgbs_{rgbs,freqs}
28.310294ms 1103347 known_rgbs_{rgbs,freqs}
28.488995ms 1103347 known_rgbs_{rgbs,freqs}
28.063975ms 1103347 known_rgbs_{rgbs,freqs}
28.837342ms 1103347 known_rgbs_{rgbs,freqs}
28.267731ms 1103347 known_rgbs_{rgbs,freqs}
28.918543ms 1103347 known_rgbs_{rgbs,freqs}
28.80957ms 1103347 known_rgbs_{rgbs,freqs}
28.778177ms 1103347 known_rgbs_{rgbs,freqs}
29.03657ms 1103347 known_rgbs_{rgbs,freqs}
28.855756ms 1103347 known_rgbs_{rgbs,freqs}
28.481146ms 1103347 known_rgbs_{rgbs,freqs}
28.945106ms 1103347 known_rgbs_{rgbs,freqs}
28.651094ms 1103347 known_rgbs_{rgbs,freqs}
28.240563ms 1103347 known_rgbs_{rgbs,freqs}
28.601287ms 1103347 known_rgbs_{rgbs,freqs}
30.041162ms 1103347 known_rgbs_{rgbs,freqs}
29.468834ms 1103347 known_rgbs_{rgbs,freqs}
28.76731ms 1103347 known_rgbs_{rgbs,freqs}
28.902543ms 1103347 known_rgbs_{rgbs,freqs}
29.507774ms 1103347 known_rgbs_{rgbs,freqs}
28.826777ms 1103347 known_rgbs_{rgbs,freqs}
28.491108ms 1103347 known_rgbs_{rgbs,freqs}
29.397897ms 1103347 known_rgbs_{rgbs,freqs}
28.72837ms 1103347 known_rgbs_{rgbs,freqs}
28.824664ms 1103347 known_rgbs_{rgbs,freqs}
28.280409ms 1103347 known_rgbs_{rgbs,freqs}
29.003667ms 1103347 known_rgbs_{rgbs,freqs}
29.722096ms 1103347 known_rgbs_{rgbs,freqs}
28.960501ms 1103347 known_rgbs_{rgbs,freqs}
217.037µs 16755 known_rgbs_{rgbs,freqs}
209.793µs 16755 known_rgbs_{rgbs,freqs}
220.057µs 16755 known_rgbs_{rgbs,freqs}
272.882µs 16755 known_rgbs_{rgbs,freqs}
269.562µs 16755 known_rgbs_{rgbs,freqs}
205.868µs 16755 known_rgbs_{rgbs,freqs}
186.852µs 16755 known_rgbs_{rgbs,freqs}
205.266µs 16755 known_rgbs_{rgbs,freqs}
248.129µs 16755 known_rgbs_{rgbs,freqs}
204.964µs 16755 known_rgbs_{rgbs,freqs}
227.301µs 16755 known_rgbs_{rgbs,freqs}
206.171µs 16755 known_rgbs_{rgbs,freqs}
217.943µs 16755 known_rgbs_{rgbs,freqs}
204.662µs 16755 known_rgbs_{rgbs,freqs}
228.207µs 16755 known_rgbs_{rgbs,freqs}
204.058µs 16755 known_rgbs_{rgbs,freqs}
233.036µs 16755 known_rgbs_{rgbs,freqs}
207.68µs 16755 known_rgbs_{rgbs,freqs}
595.873µs 16755 known_rgbs_{rgbs,freqs}
202.247µs 16755 known_rgbs_{rgbs,freqs}
777.894µs 16755 memcpy or distribute_oneshot_freqs.hlsl
102.331µs 16755 memcpy or distribute_oneshot_freqs.hlsl
141.572µs 16755 memcpy or distribute_oneshot_freqs.hlsl
129.197µs 16755 memcpy or distribute_oneshot_freqs.hlsl
100.822µs 16755 memcpy or distribute_oneshot_freqs.hlsl
120.442µs 16755 memcpy or distribute_oneshot_freqs.hlsl
153.043µs 16755 memcpy or distribute_oneshot_freqs.hlsl
142.478µs 16755 memcpy or distribute_oneshot_freqs.hlsl
139.761µs 16755 memcpy or distribute_oneshot_freqs.hlsl
144.893µs 16755 memcpy or distribute_oneshot_freqs.hlsl
120.141µs 16755 memcpy or distribute_oneshot_freqs.hlsl
154.25µs 16755 memcpy or distribute_oneshot_freqs.hlsl
91.464µs 16755 memcpy or distribute_oneshot_freqs.hlsl
129.498µs 16755 memcpy or distribute_oneshot_freqs.hlsl
93.577µs 16755 memcpy or distribute_oneshot_freqs.hlsl
90.86µs 16755 memcpy or distribute_oneshot_freqs.hlsl
98.406µs 16755 memcpy or distribute_oneshot_freqs.hlsl
136.139µs 16755 memcpy or distribute_oneshot_freqs.hlsl
115.613µs 16755 memcpy or distribute_oneshot_freqs.hlsl
100.821µs 16755 memcpy or distribute_oneshot_freqs.hlsl
121.65µs 16755 memcpy or distribute_oneshot_freqs.hlsl
113.802µs 16755 memcpy or distribute_oneshot_freqs.hlsl
131.31µs 16755 memcpy or distribute_oneshot_freqs.hlsl
125.272µs 16755 memcpy or distribute_oneshot_freqs.hlsl
132.818µs 16755 memcpy or distribute_oneshot_freqs.hlsl
133.12µs 16755 memcpy or distribute_oneshot_freqs.hlsl
116.82µs 16755 memcpy or distribute_oneshot_freqs.hlsl
127.989µs 16755 memcpy or distribute_oneshot_freqs.hlsl
131.008µs 16755 memcpy or distribute_oneshot_freqs.hlsl
134.63µs 16755 memcpy or distribute_oneshot_freqs.hlsl
101.727µs 16755 memcpy or distribute_oneshot_freqs.hlsl
105.652µs 16755 memcpy or distribute_oneshot_freqs.hlsl
116.217µs 16755 memcpy or distribute_oneshot_freqs.hlsl
107.764µs 16755 memcpy or distribute_oneshot_freqs.hlsl
109.877µs 16755 memcpy or distribute_oneshot_freqs.hlsl
140.667µs 16755 memcpy or distribute_oneshot_freqs.hlsl
102.934µs 16755 memcpy or distribute_oneshot_freqs.hlsl
128.291µs 16755 memcpy or distribute_oneshot_freqs.hlsl
144.289µs 16755 memcpy or distribute_oneshot_freqs.hlsl
110.179µs 16755 memcpy or distribute_oneshot_freqs.hlsl
115.613µs 16755 memcpy or distribute_oneshot_freqs.hlsl
150.628µs 16755 memcpy or distribute_oneshot_freqs.hlsl
91.766µs 16755 memcpy or distribute_oneshot_freqs.hlsl
125.876µs 16755 memcpy or distribute_oneshot_freqs.hlsl
139.459µs 16755 memcpy or distribute_oneshot_freqs.hlsl
150.327µs 16755 memcpy or distribute_oneshot_freqs.hlsl
156.967µs 16755 memcpy or distribute_oneshot_freqs.hlsl
118.933µs 16755 memcpy or distribute_oneshot_freqs.hlsl
113.801µs 16755 memcpy or distribute_oneshot_freqs.hlsl
130.404µs 16755 memcpy or distribute_oneshot_freqs.hlsl
128.29µs 16755 memcpy or distribute_oneshot_freqs.hlsl
110.481µs 16755 memcpy or distribute_oneshot_freqs.hlsl
152.741µs 16755 memcpy or distribute_oneshot_freqs.hlsl
121.046µs 16755 memcpy or distribute_oneshot_freqs.hlsl
127.385µs 16755 memcpy or distribute_oneshot_freqs.hlsl
98.708µs 16755 memcpy or distribute_oneshot_freqs.hlsl
121.65µs 16755 memcpy or distribute_oneshot_freqs.hlsl
108.066µs 16755 memcpy or distribute_oneshot_freqs.hlsl
99.916µs 16755 memcpy or distribute_oneshot_freqs.hlsl
131.31µs 16755 memcpy or distribute_oneshot_freqs.hlsl
130.705µs 16755 memcpy or distribute_oneshot_freqs.hlsl
139.46µs 16755 memcpy or distribute_oneshot_freqs.hlsl
116.518µs 16755 memcpy or distribute_oneshot_freqs.hlsl
126.781µs 16755 memcpy or distribute_oneshot_freqs.hlsl
146.402µs 16755 memcpy or distribute_oneshot_freqs.hlsl
142.478µs 16755 memcpy or distribute_oneshot_freqs.hlsl
96.897µs 16755 memcpy or distribute_oneshot_freqs.hlsl
131.913µs 16755 memcpy or distribute_oneshot_freqs.hlsl
161.797µs 16755 memcpy or distribute_oneshot_freqs.hlsl
123.763µs 16755 memcpy or distribute_oneshot_freqs.hlsl
127.687µs 16755 memcpy or distribute_oneshot_freqs.hlsl
196.209µs 16755 memcpy or distribute_oneshot_freqs.hlsl
89.351µs 16755 memcpy or distribute_oneshot_freqs.hlsl
138.252µs 16755 memcpy or distribute_oneshot_freqs.hlsl
130.705µs 16755 memcpy or distribute_oneshot_freqs.hlsl
127.989µs 16755 memcpy or distribute_oneshot_freqs.hlsl
108.368µs 16755 memcpy or distribute_oneshot_freqs.hlsl
113.5µs 16755 memcpy or distribute_oneshot_freqs.hlsl
127.385µs 16755 memcpy or distribute_oneshot_freqs.hlsl
125.876µs 16755 memcpy or distribute_oneshot_freqs.hlsl
108.971µs 16755 memcpy or distribute_oneshot_freqs.hlsl
108.368µs 16755 memcpy or distribute_oneshot_freqs.hlsl
139.762µs 16755 memcpy or distribute_oneshot_freqs.hlsl
148.214µs 16755 memcpy or distribute_oneshot_freqs.hlsl
94.483µs 16755 memcpy or distribute_oneshot_freqs.hlsl
127.084µs 16755 memcpy or distribute_oneshot_freqs.hlsl
117.424µs 16755 memcpy or distribute_oneshot_freqs.hlsl
89.351µs 16755 memcpy or distribute_oneshot_freqs.hlsl
202.85µs 16755 memcpy or distribute_oneshot_freqs.hlsl
113.198µs 16755 memcpy or distribute_oneshot_freqs.hlsl
140.968µs 16755 memcpy or distribute_oneshot_freqs.hlsl
141.874µs 16755 memcpy or distribute_oneshot_freqs.hlsl
105.349µs 16755 memcpy or distribute_oneshot_freqs.hlsl
125.272µs 16755 memcpy or distribute_oneshot_freqs.hlsl
134.63µs 16755 memcpy or distribute_oneshot_freqs.hlsl
111.386µs 16755 memcpy or distribute_oneshot_freqs.hlsl
121.348µs 16755 memcpy or distribute_oneshot_freqs.hlsl
113.197µs 16755 memcpy or distribute_oneshot_freqs.hlsl
162.702µs 16755 memcpy or distribute_oneshot_freqs.hlsl
111.688µs 16755 memcpy or distribute_oneshot_freqs.hlsl
162.703µs 16755 memcpy or distribute_oneshot_freqs.hlsl
114.103µs 16755 memcpy or distribute_oneshot_freqs.hlsl
128.29µs 16755 memcpy or distribute_oneshot_freqs.hlsl
148.818µs 16755 memcpy or distribute_oneshot_freqs.hlsl
112.594µs 16755 memcpy or distribute_oneshot_freqs.hlsl
126.178µs 16755 memcpy or distribute_oneshot_freqs.hlsl
123.763µs 16755 memcpy or distribute_oneshot_freqs.hlsl
111.084µs 16755 memcpy or distribute_oneshot_freqs.hlsl
126.781µs 16755 memcpy or distribute_oneshot_freqs.hlsl
129.197µs 16755 memcpy or distribute_oneshot_freqs.hlsl
129.8µs 16755 memcpy or distribute_oneshot_freqs.hlsl
121.046µs 16755 memcpy or distribute_oneshot_freqs.hlsl
735.634µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
754.048µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
781.819µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
805.666µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
792.686µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
743.482µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
763.707µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
800.534µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
785.14µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
752.841µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
736.54µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
750.727µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
787.856µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
755.557µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
780.007µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
757.67µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
754.652µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
779.103µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
757.67µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
753.444µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
736.842µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
774.876µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
750.727µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
787.253µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
830.72µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
747.105µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
813.514µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
755.255µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
761.292µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
814.42µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
777.291µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
773.669µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
772.461µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
735.03µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
755.255µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
760.085µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
776.385µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
759.783µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
774.272µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
754.048µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
759.783µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
784.535µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
784.535µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
780.913µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
778.197µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
736.238µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
779.404µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
775.48µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
784.536µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
781.818µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
780.914µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
779.404µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
767.934µs: 1103347 memcpy or distribute_oneshot_freqs.hlsl
115.914µs 16755 memcpy or distribute_oneshot_freqs.hlsl
118.329µs 16755 memcpy or distribute_oneshot_freqs.hlsl
135.535µs 16755 memcpy or distribute_oneshot_freqs.hlsl
122.253µs 16755 memcpy or distribute_oneshot_freqs.hlsl
139.158µs 16755 memcpy or distribute_oneshot_freqs.hlsl
116.216µs 16755 memcpy or distribute_oneshot_freqs.hlsl
111.688µs 16755 memcpy or distribute_oneshot_freqs.hlsl
111.085µs 16755 memcpy or distribute_oneshot_freqs.hlsl
411.435µs 16755 memcpy or distribute_oneshot_freqs.hlsl
109.877µs 16755 memcpy or distribute_oneshot_freqs.hlsl
99.01µs 16755 memcpy or distribute_oneshot_freqs.hlsl
92.973µs 16755 memcpy or distribute_oneshot_freqs.hlsl
104.444µs 16755 memcpy or distribute_oneshot_freqs.hlsl
113.198µs 16755 memcpy or distribute_oneshot_freqs.hlsl
101.124µs 16755 memcpy or distribute_oneshot_freqs.hlsl
125.876µs 16755 memcpy or distribute_oneshot_freqs.hlsl
108.066µs 16755 memcpy or distribute_oneshot_freqs.hlsl
114.707µs 16755 memcpy or distribute_oneshot_freqs.hlsl
107.463µs 16755 memcpy or distribute_oneshot_freqs.hlsl
107.16µs 16755 memcpy or distribute_oneshot_freqs.hlsl
169.344µs 16755 memcpy or distribute_oneshot_freqs.hlsl
118.329µs 16755 memcpy or distribute_oneshot_freqs.hlsl
111.689µs 16755 memcpy or distribute_oneshot_freqs.hlsl
111.689µs 16755 memcpy or distribute_oneshot_freqs.hlsl
132.516µs 16755 memcpy or distribute_oneshot_freqs.hlsl
94.785µs 16755 memcpy or distribute_oneshot_freqs.hlsl
139.459µs 16755 memcpy or distribute_oneshot_freqs.hlsl
107.764µs 16755 memcpy or distribute_oneshot_freqs.hlsl
86.03µs 16755 memcpy or distribute_oneshot_freqs.hlsl
112.292µs 16755 memcpy or distribute_oneshot_freqs.hlsl
Benchmark 2: 16755 known_rgbs_{rgbs,freqs}
  Time (mean ± σ): 226.409054 µs ± 124.581797 µs
  Range (min … max): 183.229000 µs … 1.423574 ms 111 runs
Benchmark 1: 16755 memcpy or distribute_oneshot_freqs.hlsl
  Time (mean ± σ): 129.693697 µs ± 62.794134 µs
  Range (min … max): 86.030000 µs … 777.894000 µs 142 runs
Benchmark 4: 1103347 known_rgbs_{rgbs,freqs}
  Time (mean ± σ): 29.529333 ms ± 5.895793 ms
  Range (min … max): 27.677594 ms … 75.453063 ms 62 runs
Benchmark 1: 1103347 memcpy or distribute_oneshot_freqs.hlsl
  Time (mean ± σ): 770.052019 µs ± 20.968305 µs
  Range (min … max): 735.030000 µs … 830.720000 µs 53 runs
--&gt;
&lt;p&gt;&lt;/p&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;host → &lt;samp&gt;known_rgbs_{rgbs,freqs}&lt;/samp&gt; &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;226µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;29.529ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;124µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;62.8µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(proportion of &lt;samp&gt;measure()&lt;/samp&gt;) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.8%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;21%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;memcpy or &lt;samp&gt;distribute_oneshot_freqs.hlsl&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;130µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;770µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;62.8µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;21µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up, 5700 XT) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42.72%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;38.347×&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(proportion of &lt;samp&gt;measure()&lt;/samp&gt;) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.6%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.6%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;indented&quot;&gt;
This leaves just &lt;samp&gt;params&lt;/samp&gt; (constant [​[​G^3 \operatorname{sizeof}(\texttt{(uint, uint)}) + \varepsilon \approx 8\text{MB} \approx 3\%​]​]) in &lt;code&gt;DEVICE_LOCAL &amp; HOST_VISIBLE&lt;/code&gt;,
freeing [​[​\overline{Set(I)}(\operatorname{sizeof}(\texttt{struct known_rgbs_pack}) + \operatorname{sizeof}(\texttt{uint})) = \overline{Set(I)} \cdot 20\text{B}​]​]
([​[​\in [335\text{kB}, 22\text{MB}] \approx [0.13\%, 8.6\%]​]​] in test data;
 theoretical maximum [​[​320\text{MiB} = 125\%​]​]).
&lt;/p&gt;
&lt;div class=&quot;singles&quot;&gt;
&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.33-graphml-known_rgbs-DEVICE_LOCAL.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.33-graphml-known_rgbs-DEVICE_LOCAL.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;h2 id=&quot;gilbert&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#gilbert&quot;&gt;#&lt;/a&gt; You do not under any circumstances have to hand it to Scott Adams&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
The &lt;samp&gt;[start, end)&lt;/samp&gt; pairs in the &lt;samp&gt;groups_data&lt;/samp&gt; half of [​[​h​]​] are &lt;a href=&quot;#grid-grid&quot;&gt;laid out&lt;/a&gt; in natural axis order,
i.e. a linear search through &lt;samp&gt;group_ranges[&lt;var&gt;outermost&lt;/var&gt;][&lt;var&gt;middle&lt;/var&gt;][&lt;var&gt;innermost&lt;/var&gt;]&lt;/samp&gt;
corresponds to a linear search through &lt;samp&gt;groups_data&lt;/samp&gt;;
if we, for convenience, say that each cell contains exactly one point, we then know that
&lt;!-- [​[​\forall x,y,z \in [0, G ) \cap \mathbb{Z} : \texttt{group_ranges}[x][y][z] = G^2x + Gy + z​]​] --&gt;
[​[​\forall x,y,z \in \bar{G} : \texttt{group_ranges}[x][y][z] = G^2x + Gy + z​]​]
and cast the traversal order back onto the the grid thusly
&lt;/p&gt;
&lt;div class=&quot;singles continuing&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.34-gilbert-iterorder+default.png&quot;&gt;&lt;img alt=&quot;Point cloud ε overlaid with a section of a 20x20x20 grid, and highlighted straight lines through center of each grid cell across each axis&quot; src=&quot;/content/assets/blogn_t/018.34-gilbert-iterorder+default.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;Effective look-up order (starts bottom-right) for image &lt;samp style=&quot;color: #b57688;&quot;&gt;ε&lt;/samp&gt; with [​[​G=20, r=0.05​]​] around [​[​(13, 7, 16)​]​]&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
where a discontinuity (long diagonal line) occurs after every extremum;
thus, locality is low, and on the CPU one'd&lt;!--'--&gt; expect this to have a significant effect on iteration speed.
The ideal iteration order [​[​l​]​] would, in all possible cases, maximally preserve locality
(such that geometrically close cells'&lt;!--'--&gt; data is memorically close in &lt;samp&gt;groups_data&lt;/samp&gt;):
&lt;!-- [​[​\forall x,y,z \in [0, G ) \cap \mathbb{Z} : \texttt{group_ranges}[x][y][z] = l(G^2x + Gy + z)​]​]. --&gt;
[​[​\forall x,y,z \in \bar{G} : \texttt{group_ranges}[x][y][z] = l(G^2x + Gy + z)​]​].
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
The Hilbert curve is the canonical solution for this, and &lt;span id=&quot;googling&quot;&gt;googling&lt;/span&gt; &quot;hilbert curve 3d&quot; yields
&lt;a href=&quot;//arxiv.org/pdf/2308.05673&quot;&gt;&lt;cite&gt;Algorithms for Encoding and Decoding 3D Hilbert Orderings&lt;/cite&gt;, David Walker, August 2023&lt;/a&gt;
with the world's&lt;!--'--&gt; most obtuse pseudocode.
Unfortunately, Hilbert curves are only defined for square/cubic domains with side length [​[​2^n​]​], which [​[​G=100​]​] is not.
Maybe [​[​G \in \{64, 128\}​]​] could work:
&lt;/p&gt;
&lt;script&gt;
{
 let googlings = [&quot;googling&quot;, &quot;DDGing&quot;, &quot;baiduing&quot;, &quot;kagiing&quot;, &quot;startpaging&quot;];
 googling.innerText = googlings[Math.floor(Math.random() * googlings.length)];
}
&lt;/script&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...assign_cell.hlsl, grouping&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// copying&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; known_rgbs_groups&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; cur &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; dump &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;gr_z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GroupDesc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; start &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cur&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(known_rgbs_groups,&lt;!--&quot;--&gt;               &lt;!--&quot;--&gt;ga_z.as_ptr(), ga_z.len())&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;known_rgbs_groups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;copy_from_nonoverlapping&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;cur &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;known_rgbs_groups &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_groups&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;gr_z &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;GroupDesc&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;end_idx&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; cur&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;&lt;a href=&quot;//paste.sr.ht/~nabijaczleweli/86c046d7743aab3af2044f5f1b4b30980bb7be01&quot;&gt;decodeh&lt;/a&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cur &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(self.buffer_groups_data, self.buffer_outputs, known_rgbs * mem::size_of::&amp;lt;u32&gt;())...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;/div&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
However,
&lt;a href=&quot;//github.com/jakubcerveny/gilbert&quot;&gt; &lt;!-- TODO: paper link when it comes out! --&gt;
 &lt;cite&gt;Generalized Hilbert (&quot;gilbert&quot;) space-filling curve for rectangular domains of arbitrary (non-power of two) sizes.&lt;/cite&gt;,
 Jakub Červený, 2019&lt;/a&gt;
may, after &lt;a href=&quot;//github.com/jakubcerveny/gilbert/pull/17&quot;&gt;a quick port&lt;/a&gt;, allow using a more optimal [​[​G​]​]:
&lt;/p&gt;
&lt;table class=&quot;perf&quot; id=&quot;gilbert-straight&quot;&gt;
 &lt;tr&gt;&lt;th colspan=2&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;94.98ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.01s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;97.67s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;80&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128.99ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.87s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;83.75s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;90&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;126.06ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.98s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128.76s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;120.33ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.81s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;119.00s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;162.10ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.74s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;129.18s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;hspc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;gilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;80&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;130.03ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.80s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;96.04s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;gilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;90&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;125.51ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.80s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;107.87s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;gilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;121.04ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.71s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;112.36s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;hspc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;hilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;94.65ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.04s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;101.08s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;hilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;157.09ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.52s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;123.02s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th colspan=2&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.21s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;129.69s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;(driver timeout)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;80&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.27s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;138.32s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;66.48s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;(came within 200ms of a driver timeout)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;90&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.30s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;143.71s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;52.33s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.78s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;142.43s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;49.49s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;straight&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.11s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;190.65s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;67.33s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;hspc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;gilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;80&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.27s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;148.03s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;(driver timeout)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;gilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;90&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.26s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;139.38s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;56.16s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;gilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;100&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.75s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;131.85s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;48.74s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;hspc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;hilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.23s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;130.17s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;(driver timeout)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;hilbert &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128&lt;sup&gt;3&lt;/sup&gt;&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.16s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;189.07s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;67.86s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;(driver timeout the first time)&lt;/td&gt;&lt;/tr&gt;
 &lt;tfoot class=&quot;label&quot;&gt;&lt;tr&gt;&lt;td colspan=6&gt;(Measurement multiplicity diminished.)&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;
&lt;/table&gt;
&lt;!--
3.19899885s
3.155824037s
3.316008449s
3.837746635s
3.420269573s
3.337262149s
3.277641974s
3.194660509s
3.236108377s
3.217661679s
3.23462594s
3.346330945s
3.226232104s
3.269617313s
3.852769932s
Benchmark 1:
  Time (mean ± σ): 3341.450564 ms ± 208.373769 ms
  Range (min … max): 3155.824037 ms … 3852.769932 ms 15 runs
--&gt;
&lt;p class=&quot;indented continued&quot;&gt;
[​[​G=100​]​] gilbert seems, like, kinda the best. Maybe. A little bit? This sucks.
Just &lt;em&gt;generating&lt;/em&gt; all the values of &lt;samp&gt;decodeh&lt;/samp&gt;
&lt;!-- ([​[​l : [0, G^3 ) \cap \mathbb[Z] \to ([0, G ) \cap \mathbb{Z})^3​]​] takes &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3341.45ms ± 208ms&lt;/span&gt;) --&gt;
([​[​l : {\mkern 1.5mu\overline{\mkern-1.5mu{G^3}\mkern-1.5mu}\mkern 1.5mu} \to \bar{G}^3​]​] takes &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3341.45ms ± 208ms&lt;/span&gt;)
which is untenable to do live but it's&lt;!--'--&gt; constant, so may be pre-computed in
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/build.rs#L42&quot;&gt;&lt;samp&gt;build.rs&lt;/samp&gt;&lt;/a&gt;,
conveniently in parallel to the shaders building
(but only if need be since they don't&lt;!--'--&gt; take that long):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;include!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;ext/gilbert/ports/gilbert.rs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; grid_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;fs&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;read_to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;src/shader.h&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lines&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;l&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#define GRID_SIZE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split_whitespace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... glslc&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; out_dir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Path&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;env&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;var_os&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; grid_size_rs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; out_dir&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;grid_size.rs&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; grid_size &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;fs&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;read_to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;grid_size_rs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap_or&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;to_string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;fs&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;grid_size_rs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; grid_size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; grid_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; grid_size&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; grid_gilbert &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;File&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;out_dir&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;grid_gilbert.xyz&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;grid_size &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; grid_size &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; grid_size &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;gilbert&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;d2xyz&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;grid_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; grid_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; grid_size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;grid_gilbert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write_all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ... glslc collexion&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Why not generate &lt;samp&gt;[(1, 2, 3), (4, 5, 6), …]&lt;/samp&gt; and &lt;samp&gt;include!(&quot;…/grid_gilbert.rs&quot;)&lt;/samp&gt;?
Because that &lt;samp&gt;include!&lt;/samp&gt; would be of a million-element array which takes &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~40s&lt;/span&gt; (and &lt;a href=&quot;#network-effect-rust&quot;&gt;implies&lt;/a&gt; like three compiler bugs).
Including [​[​3\text{MB}​]​] directly is functionally instant:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_GILBERT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/grid_gilbert.xyz&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;u8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;GRID_GILBERT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_GILBERT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&quot;singles&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.35-gilbert-iterorder+gilbert.png&quot;&gt;&lt;img alt=&quot;Same point cloud ε and section of 20x20x20 grid, but the highlighted lines wind and turn at every possible point&quot; src=&quot;/content/assets/blogn_t/018.35-gilbert-iterorder+gilbert.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;Effective gilbert look-up order (starts near the top-left corner) for image &lt;samp style=&quot;color: #b57688;&quot;&gt;ε&lt;/samp&gt; with [​[​G=20, r=0.05​]​] around [​[​(13, 7, 16)​]​]; note the decreased amount of diagonal lines, corresponding to non-linearities&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;!--
2.900276ms: 16755 copied iter
2.652449ms: 16755 copied iter
2.619244ms: 16755 copied iter
2.642186ms: 16755 copied iter
2.640676ms: 16755 copied iter
2.960648ms: 16755 copied iter
3.022529ms: 16755 copied iter
3.188854ms: 16755 copied iter
3.151123ms: 16755 copied iter
3.052716ms: 16755 copied iter
3.162593ms: 16755 copied iter
3.226285ms: 16755 copied iter
3.048188ms: 16755 copied iter
3.301449ms: 16755 copied iter
3.32439ms: 16755 copied iter
2.525064ms: 16755 copied iter
2.551929ms: 16755 copied iter
2.531101ms: 16755 copied iter
2.557664ms: 16755 copied iter
2.570946ms: 16755 copied iter
2.577285ms: 16755 copied iter
2.659693ms: 16755 copied iter
2.740894ms: 16755 copied iter
2.651241ms: 16755 copied iter
3.374801ms: 16755 copied iter
2.682634ms: 16755 copied iter
2.822396ms: 16755 copied iter
2.756591ms: 16755 copied iter
2.747837ms: 16755 copied iter
3.778993ms: 16755 copied iter
3.320466ms: 16755 copied iter
2.805794ms: 16755 copied iter
3.727676ms: 16755 copied iter
2.592378ms: 16755 copied iter
2.674182ms: 16755 copied iter
2.621055ms: 16755 copied iter
2.612905ms: 16755 copied iter
2.676295ms: 16755 copied iter
2.697124ms: 16755 copied iter
2.651241ms: 16755 copied iter
2.626187ms: 16755 copied iter
2.62015ms: 16755 copied iter
2.745723ms: 16755 copied iter
2.641883ms: 16755 copied iter
2.647619ms: 16755 copied iter
3.02585ms: 16755 copied iter
3.261ms: 16755 copied iter
2.794323ms: 16755 copied iter
2.551628ms: 16755 copied iter
2.549212ms: 16755 copied iter
2.559476ms: 16755 copied iter
3.019209ms: 16755 copied iter
2.659693ms: 16755 copied iter
2.691992ms: 16755 copied iter
2.622263ms: 16755 copied iter
2.662108ms: 16755 copied iter
3.318655ms: 16755 copied iter
3.079884ms: 16755 copied iter
2.729121ms: 16755 copied iter
2.555853ms: 16755 copied iter
2.533817ms: 16755 copied iter
2.607773ms: 16755 copied iter
2.960648ms: 16755 copied iter
2.638563ms: 16755 copied iter
2.648223ms: 16755 copied iter
2.668146ms: 16755 copied iter
2.681427ms: 16755 copied iter
2.735159ms: 16755 copied iter
2.693502ms: 16755 copied iter
2.663014ms: 16755 copied iter
2.678711ms: 16755 copied iter
2.680823ms: 16755 copied iter
2.623168ms: 16755 copied iter
2.681427ms: 16755 copied iter
2.658486ms: 16755 copied iter
2.637658ms: 16755 copied iter
2.640676ms: 16755 copied iter
2.643695ms: 16755 copied iter
2.63977ms: 16755 copied iter
2.632224ms: 16755 copied iter
2.616829ms: 16755 copied iter
2.950687ms: 16755 copied iter
2.588756ms: 16755 copied iter
2.692295ms: 16755 copied iter
2.727612ms: 16755 copied iter
2.741497ms: 16755 copied iter
2.963063ms: 16755 copied iter
2.811831ms: 16755 copied iter
3.232323ms: 16755 copied iter
3.399856ms: 16755 copied iter
3.176781ms: 16755 copied iter
3.011059ms: 16755 copied iter
3.835742ms: 16755 copied iter
2.548609ms: 16755 copied iter
2.538647ms: 16755 copied iter
2.54227ms: 16755 copied iter
2.52929ms: 16755 copied iter
2.575172ms: 16755 copied iter
2.718556ms: 16755 copied iter
2.636148ms: 16755 copied iter
2.666938ms: 16755 copied iter
2.656071ms: 16755 copied iter
2.72731ms: 16755 copied iter
2.664825ms: 16755 copied iter
2.667844ms: 16755 copied iter
2.679918ms: 16755 copied iter
2.580304ms: 16755 copied iter
2.616829ms: 16755 copied iter
2.715236ms: 16755 copied iter
2.69169ms: 16755 copied iter
2.853487ms: 16755 copied iter
2.9365ms: 16755 copied iter
3.330729ms: 16755 copied iter
2.989627ms: 16755 copied iter
7.455956ms: 1103347 copied iter
7.586057ms: 1103347 copied iter
7.479802ms: 1103347 copied iter
9.543925ms: 1103347 copied iter
8.757276ms: 1103347 copied iter
12.985135ms: 1103347 copied iter
8.825195ms: 1103347 copied iter
8.487715ms: 1103347 copied iter
7.818792ms: 1103347 copied iter
7.450824ms: 1103347 copied iter
7.499726ms: 1103347 copied iter
7.500631ms: 1103347 copied iter
8.062393ms: 1103347 copied iter
8.533598ms: 1103347 copied iter
7.913275ms: 1103347 copied iter
7.831772ms: 1103347 copied iter
7.541081ms: 1103347 copied iter
7.742723ms: 1103347 copied iter
7.548325ms: 1103347 copied iter
7.221712ms: 1103347 copied iter
8.161705ms: 1103347 copied iter
7.525383ms: 1103347 copied iter
8.180119ms: 1103347 copied iter
8.150235ms: 1103347 copied iter
8.093485ms: 1103347 copied iter
7.539269ms: 1103347 copied iter
7.697746ms: 1103347 copied iter
7.366303ms: 1103347 copied iter
8.066016ms: 1103347 copied iter
8.173176ms: 1103347 copied iter
7.579417ms: 1103347 copied iter
9.274967ms: 1103347 copied iter
7.853808ms: 1103347 copied iter
7.864372ms: 1103347 copied iter
10.101461ms: 1103347 copied iter
8.053639ms: 1103347 copied iter
7.555871ms: 1103347 copied iter
8.047904ms: 1103347 copied iter
8.347349ms: 1103347 copied iter
7.689293ms: 1103347 copied iter
7.510291ms: 1103347 copied iter
8.110993ms: 1103347 copied iter
7.608395ms: 1103347 copied iter
7.577907ms: 1103347 copied iter
7.757514ms: 1103347 copied iter
8.243811ms: 1103347 copied iter
7.462899ms: 1103347 copied iter
7.497612ms: 1103347 copied iter
8.472019ms: 1103347 copied iter
8.861418ms: 1103347 copied iter
8.280337ms: 1103347 copied iter
9.015367ms: 1103347 copied iter
9.286136ms: 1103347 copied iter
7.967609ms: 1103347 copied iter
12.92597ms: 16755 copied gilbert
10.305821ms: 16755 copied gilbert
12.271537ms: 16755 copied gilbert
24.773695ms: 16755 copied gilbert
11.266341ms: 16755 copied gilbert
10.561195ms: 16755 copied gilbert
10.780949ms: 16755 copied gilbert
10.290728ms: 16755 copied gilbert
10.399096ms: 16755 copied gilbert
10.644811ms: 16755 copied gilbert
10.413283ms: 16755 copied gilbert
10.228846ms: 16755 copied gilbert
11.141975ms: 16755 copied gilbert
10.434715ms: 16755 copied gilbert
10.60104ms: 16755 copied gilbert
10.032034ms: 16755 copied gilbert
10.475466ms: 16755 copied gilbert
10.010903ms: 16755 copied gilbert
10.388531ms: 16755 copied gilbert
9.85786ms: 16755 copied gilbert
10.377965ms: 16755 copied gilbert
9.889555ms: 16755 copied gilbert
10.325744ms: 16755 copied gilbert
9.840956ms: 16755 copied gilbert
10.324838ms: 16755 copied gilbert
10.206509ms: 16755 copied gilbert
10.30401ms: 16755 copied gilbert
9.825259ms: 16755 copied gilbert
10.817173ms: 16755 copied gilbert
10.202887ms: 16755 copied gilbert
11.35207ms: 16755 copied gilbert
10.477882ms: 16755 copied gilbert
9.95687ms: 16755 copied gilbert
10.723596ms: 16755 copied gilbert
10.048032ms: 16755 copied gilbert
10.524971ms: 16755 copied gilbert
9.965021ms: 16755 copied gilbert
10.396077ms: 16755 copied gilbert
9.889857ms: 16755 copied gilbert
10.319405ms: 16755 copied gilbert
10.395474ms: 16755 copied gilbert
10.350496ms: 16755 copied gilbert
10.316688ms: 16755 copied gilbert
10.488447ms: 16755 copied gilbert
10.145533ms: 16755 copied gilbert
10.53614ms: 16755 copied gilbert
10.225224ms: 16755 copied gilbert
10.914673ms: 16755 copied gilbert
10.458563ms: 16755 copied gilbert
10.894449ms: 16755 copied gilbert
13.295146ms: 16755 copied gilbert
10.872111ms: 16755 copied gilbert
11.085527ms: 16755 copied gilbert
13.994557ms: 16755 copied gilbert
11.541336ms: 16755 copied gilbert
10.557874ms: 16755 copied gilbert
11.226798ms: 16755 copied gilbert
12.705914ms: 16755 copied gilbert
10.703372ms: 16755 copied gilbert
10.291332ms: 16755 copied gilbert
10.501427ms: 16755 copied gilbert
10.050749ms: 16755 copied gilbert
11.457117ms: 16755 copied gilbert
11.349051ms: 16755 copied gilbert
11.246418ms: 16755 copied gilbert
11.068623ms: 16755 copied gilbert
13.998179ms: 16755 copied gilbert
10.322121ms: 16755 copied gilbert
14.075757ms: 16755 copied gilbert
13.361857ms: 16755 copied gilbert
11.227703ms: 16755 copied gilbert
11.756261ms: 16755 copied gilbert
11.889381ms: 16755 copied gilbert
10.943048ms: 16755 copied gilbert
15.674109ms: 16755 copied gilbert
9.835522ms: 16755 copied gilbert
11.012778ms: 16755 copied gilbert
9.772434ms: 16755 copied gilbert
10.426867ms: 16755 copied gilbert
9.779376ms: 16755 copied gilbert
10.771894ms: 16755 copied gilbert
9.852728ms: 16755 copied gilbert
10.572364ms: 16755 copied gilbert
9.819524ms: 16755 copied gilbert
10.298576ms: 16755 copied gilbert
9.802317ms: 16755 copied gilbert
10.505351ms: 16755 copied gilbert
10.426565ms: 16755 copied gilbert
10.628208ms: 16755 copied gilbert
10.296463ms: 16755 copied gilbert
10.45011ms: 16755 copied gilbert
11.158577ms: 16755 copied gilbert
10.518029ms: 16755 copied gilbert
10.444375ms: 16755 copied gilbert
10.552441ms: 16755 copied gilbert
10.342346ms: 16755 copied gilbert
9.757038ms: 16755 copied gilbert
10.373136ms: 16755 copied gilbert
9.878689ms: 16755 copied gilbert
10.616436ms: 16755 copied gilbert
9.717495ms: 16755 copied gilbert
10.443469ms: 16755 copied gilbert
10.046522ms: 16755 copied gilbert
10.319707ms: 16755 copied gilbert
9.807449ms: 16755 copied gilbert
10.298576ms: 16755 copied gilbert
9.910685ms: 16755 copied gilbert
10.344158ms: 16755 copied gilbert
9.752812ms: 16755 copied gilbert
10.800269ms: 16755 copied gilbert
9.832503ms: 16755 copied gilbert
10.307934ms: 16755 copied gilbert
9.765491ms: 16755 copied gilbert
10.809928ms: 16755 copied gilbert
9.777867ms: 16755 copied gilbert
10.579608ms: 16755 copied gilbert
9.923968ms: 16755 copied gilbert
10.340233ms: 16755 copied gilbert
9.861784ms: 16755 copied gilbert
11.361729ms: 16755 copied gilbert
9.830995ms: 16755 copied gilbert
10.322423ms: 16755 copied gilbert
10.337215ms: 16755 copied gilbert
10.498408ms: 16755 copied gilbert
10.87845ms: 16755 copied gilbert
13.964069ms: 16755 copied gilbert
11.117826ms: 16755 copied gilbert
11.733923ms: 16755 copied gilbert
12.095854ms: 16755 copied gilbert
11.977827ms: 16755 copied gilbert
11.542543ms: 16755 copied gilbert
14.112282ms: 16755 copied gilbert
11.178499ms: 16755 copied gilbert
11.961526ms: 16755 copied gilbert
11.605935ms: 16755 copied gilbert
10.775215ms: 16755 copied gilbert
11.200536ms: 16755 copied gilbert
12.065668ms: 16755 copied gilbert
11.714ms: 16755 copied gilbert
16.503018ms: 16755 copied gilbert
14.218236ms: 16755 copied gilbert
9.981622ms: 16755 copied gilbert
11.559448ms: 16755 copied gilbert
11.370785ms: 16755 copied gilbert
13.027698ms: 16755 copied gilbert
10.844943ms: 16755 copied gilbert
13.716544ms: 16755 copied gilbert
11.426026ms: 16755 copied gilbert
9.810166ms: 16755 copied gilbert
10.416604ms: 16755 copied gilbert
9.841559ms: 16755 copied gilbert
10.35442ms: 16755 copied gilbert
10.09965ms: 16755 copied gilbert
10.418114ms: 16755 copied gilbert
10.366797ms: 16755 copied gilbert
11.207177ms: 16755 copied gilbert
9.997018ms: 16755 copied gilbert
10.403322ms: 16755 copied gilbert
10.304915ms: 16755 copied gilbert
10.464902ms: 16755 copied gilbert
10.166663ms: 16755 copied gilbert
10.419924ms: 16755 copied gilbert
16.375633ms: 1103347 copied gilbert
16.774391ms: 1103347 copied gilbert
16.448684ms: 1103347 copied gilbert
16.393443ms: 1103347 copied gilbert
16.760505ms: 1103347 copied gilbert
19.323603ms: 1103347 copied gilbert
17.731289ms: 1103347 copied gilbert
20.767704ms: 1103347 copied gilbert
21.144124ms: 1103347 copied gilbert
16.40612ms: 1103347 copied gilbert
16.41578ms: 1103347 copied gilbert
16.614405ms: 1103347 copied gilbert
16.546788ms: 1103347 copied gilbert
16.872797ms: 1103347 copied gilbert
16.760806ms: 1103347 copied gilbert
16.963658ms: 1103347 copied gilbert
16.714622ms: 1103347 copied gilbert
16.93649ms: 1103347 copied gilbert
16.59267ms: 1103347 copied gilbert
16.790088ms: 1103347 copied gilbert
16.819066ms: 1103347 copied gilbert
17.026444ms: 1103347 copied gilbert
16.439627ms: 1103347 copied gilbert
16.897248ms: 1103347 copied gilbert
16.758392ms: 1103347 copied gilbert
16.312242ms: 1103347 copied gilbert
16.979354ms: 1103347 copied gilbert
16.669041ms: 1103347 copied gilbert
16.695304ms: 1103347 copied gilbert
16.234664ms: 1103347 copied gilbert
16.812123ms: 1103347 copied gilbert
16.743903ms: 1103347 copied gilbert
17.75272ms: 1103347 copied gilbert
17.293289ms: 1103347 copied gilbert
18.204002ms: 1103347 copied gilbert
23.439774ms: 1103347 copied gilbert
17.209976ms: 1103347 copied gilbert
16.510866ms: 1103347 copied gilbert
17.612959ms: 1103347 copied gilbert
16.968487ms: 1103347 copied gilbert
16.825707ms: 1103347 copied gilbert
17.206353ms: 1103347 copied gilbert
17.473802ms: 1103347 copied gilbert
18.319916ms: 1103347 copied gilbert
16.65425ms: 1103347 copied gilbert
16.812425ms: 1103347 copied gilbert
16.599312ms: 1103347 copied gilbert
16.768656ms: 1103347 copied gilbert
16.709189ms: 1103347 copied gilbert
17.059648ms: 1103347 copied gilbert
16.575163ms: 1103347 copied gilbert
16.729716ms: 1103347 copied gilbert
16.777107ms: 1103347 copied gilbert
16.82299ms: 1103347 copied gilbert
16.28598ms: 1103347 copied gilbert
16.875815ms: 1103347 copied gilbert
17.578849ms: 1103347 copied gilbert
17.164697ms: 1103347 copied gilbert
17.80132ms: 1103347 copied gilbert
21.575483ms: 1103347 copied gilbert
23.018678ms: 1103347 copied gilbert
22.066912ms: 1103347 copied gilbert
16.429062ms: 1103347 copied gilbert
16.42544ms: 1103347 copied gilbert
16.537732ms: 1103347 copied gilbert
16.76292ms: 1103347 copied gilbert
16.650024ms: 1103347 copied gilbert
16.925321ms: 1103347 copied gilbert
17.443313ms: 1103347 copied gilbert
18.293353ms: 1103347 copied gilbert
18.501636ms: 1103347 copied gilbert
16.535619ms: 1103347 copied gilbert
16.321298ms: 1103347 copied gilbert
17.523306ms: 1103347 copied gilbert
18.212454ms: 1103347 copied gilbert
17.829695ms: 1103347 copied gilbert
17.995115ms: 1103347 copied gilbert
17.698687ms: 1103347 copied gilbert
5.35561ms: 328666 copied iter
5.197435ms: 328666 copied iter
5.131327ms: 328666 copied iter
5.15608ms: 328666 copied iter
5.537934ms: 328666 copied iter
5.36376ms: 328666 copied iter
5.149137ms: 328666 copied iter
5.107783ms: 328666 copied iter
5.168758ms: 328666 copied iter
5.526162ms: 328666 copied iter
5.321198ms: 328666 copied iter
5.14159ms: 328666 copied iter
5.165739ms: 328666 copied iter
5.993743ms: 328666 copied iter
5.48873ms: 328666 copied iter
5.170871ms: 328666 copied iter
5.628492ms: 328666 copied iter
7.22805ms: 328666 copied iter
5.509559ms: 328666 copied iter
5.195926ms: 328666 copied iter
5.620644ms: 328666 copied iter
8.494658ms: 328666 copied iter
8.636834ms: 328666 copied iter
9.808958ms: 328666 copied iter
6.382237ms: 328666 copied iter
6.784617ms: 328666 copied iter
6.26421ms: 328666 copied iter
5.219169ms: 328666 copied iter
7.874334ms: 328666 copied iter
8.365462ms: 328666 copied iter
5.555743ms: 328666 copied iter
6.277794ms: 328666 copied iter
5.35561ms: 328666 copied iter
5.205283ms: 328666 copied iter
5.846435ms: 328666 copied iter
5.197737ms: 328666 copied iter
5.148232ms: 328666 copied iter
5.501106ms: 328666 copied iter
5.224602ms: 328666 copied iter
5.159099ms: 328666 copied iter
5.161212ms: 328666 copied iter
5.725087ms: 328666 copied iter
5.384286ms: 328666 copied iter
5.244224ms: 328666 copied iter
5.192605ms: 328666 copied iter
5.200454ms: 328666 copied iter
5.648717ms: 328666 copied iter
5.485712ms: 328666 copied iter
5.107783ms: 328666 copied iter
5.105971ms: 328666 copied iter
5.58442ms: 328666 copied iter
5.34112ms: 328666 copied iter
5.273202ms: 328666 copied iter
5.153967ms: 328666 copied iter
5.630906ms: 328666 copied iter
5.534311ms: 328666 copied iter
5.147628ms: 328666 copied iter
5.125592ms: 328666 copied iter
5.614003ms: 328666 copied iter
5.343536ms: 328666 copied iter
5.847945ms: 328666 copied iter
5.574156ms: 328666 copied iter
5.127403ms: 328666 copied iter
5.122573ms: 328666 copied iter
5.49839ms: 328666 copied iter
6.356277ms: 328666 copied iter
5.261429ms: 328666 copied iter
5.105971ms: 328666 copied iter
5.165135ms: 328666 copied iter
7.024294ms: 328666 copied iter
5.333876ms: 328666 copied iter
5.116838ms: 328666 copied iter
6.671118ms: 328666 copied iter
5.658678ms: 328666 copied iter
5.644491ms: 328666 copied iter
5.463978ms: 328666 copied iter
5.335687ms: 328666 copied iter
5.308217ms: 328666 copied iter
5.920994ms: 328666 copied iter
5.601928ms: 328666 copied iter
5.869678ms: 328666 copied iter
6.636102ms: 328666 copied iter
5.882659ms: 328666 copied iter
6.065586ms: 328666 copied iter
5.367382ms: 328666 copied iter
8.375725ms: 328666 copied iter
5.495372ms: 328666 copied iter
5.492956ms: 328666 copied iter
5.336291ms: 328666 copied iter
6.840462ms: 328666 copied iter
14.075154ms: 328666 copied gilbert
20.73782ms: 328666 copied gilbert
19.686137ms: 328666 copied gilbert
37.901611ms: 328666 copied gilbert
20.257258ms: 328666 copied gilbert
15.582947ms: 328666 copied gilbert
14.34713ms: 328666 copied gilbert
13.914866ms: 328666 copied gilbert
14.205859ms: 328666 copied gilbert
14.265628ms: 328666 copied gilbert
13.93177ms: 328666 copied gilbert
15.0885ms: 328666 copied gilbert
14.184125ms: 328666 copied gilbert
17.135718ms: 328666 copied gilbert
14.09085ms: 328666 copied gilbert
15.411491ms: 328666 copied gilbert
14.680082ms: 328666 copied gilbert
13.959843ms: 328666 copied gilbert
13.982784ms: 328666 copied gilbert
14.090247ms: 328666 copied gilbert
13.858115ms: 328666 copied gilbert
14.873877ms: 328666 copied gilbert
16.459852ms: 328666 copied gilbert
14.359204ms: 328666 copied gilbert
14.16209ms: 328666 copied gilbert
14.276495ms: 328666 copied gilbert
13.814347ms: 328666 copied gilbert
16.049623ms: 328666 copied gilbert
15.308556ms: 328666 copied gilbert
13.573763ms: 328666 copied gilbert
14.22699ms: 328666 copied gilbert
14.35679ms: 328666 copied gilbert
15.102989ms: 328666 copied gilbert
15.230676ms: 328666 copied gilbert
13.392043ms: 328666 copied gilbert
13.95622ms: 328666 copied gilbert
13.668547ms: 328666 copied gilbert
15.595927ms: 328666 copied gilbert
15.032655ms: 328666 copied gilbert
15.197169ms: 328666 copied gilbert
14.099906ms: 328666 copied gilbert
16.615612ms: 328666 copied gilbert
13.487129ms: 328666 copied gilbert
13.85721ms: 328666 copied gilbert
13.61391ms: 328666 copied gilbert
14.756754ms: 328666 copied gilbert
15.252409ms: 328666 copied gilbert
14.055231ms: 328666 copied gilbert
17.010143ms: 328666 copied gilbert
17.475311ms: 328666 copied gilbert
21.113033ms: 328666 copied gilbert
18.868397ms: 328666 copied gilbert
16.758996ms: 328666 copied gilbert
14.513455ms: 328666 copied gilbert
16.217458ms: 328666 copied gilbert
15.578419ms: 328666 copied gilbert
14.343206ms: 328666 copied gilbert
15.758027ms: 328666 copied gilbert
14.709664ms: 328666 copied gilbert
14.286758ms: 328666 copied gilbert
14.240573ms: 328666 copied gilbert
15.630339ms: 328666 copied gilbert
15.220412ms: 328666 copied gilbert
14.197407ms: 328666 copied gilbert
13.709601ms: 328666 copied gilbert
15.292255ms: 328666 copied gilbert
14.641746ms: 328666 copied gilbert
14.522813ms: 328666 copied gilbert
13.885887ms: 328666 copied gilbert
13.39476ms: 328666 copied gilbert
15.180868ms: 328666 copied gilbert
13.762427ms: 328666 copied gilbert
14.346526ms: 328666 copied gilbert
13.879548ms: 328666 copied gilbert
15.672902ms: 328666 copied gilbert
14.621823ms: 328666 copied gilbert
14.190464ms: 328666 copied gilbert
14.049194ms: 328666 copied gilbert
14.719928ms: 328666 copied gilbert
14.897422ms: 328666 copied gilbert
15.287124ms: 328666 copied gilbert
19.880234ms: 328666 copied gilbert
18.73739ms: 328666 copied gilbert
15.287728ms: 328666 copied gilbert
14.228197ms: 328666 copied gilbert
15.604379ms: 328666 copied gilbert
13.391137ms: 328666 copied gilbert
16.075886ms: 328666 copied gilbert
Benchmark 1: 16755 copied iter
  Time (mean ± σ): 2.799341 ms ± 279.027780 µs
  Range (min … max): 2.525064 ms … 3.835742 ms 114 runs
Benchmark 2: 328666 copied iter
  Time (mean ± σ): 5.744078 ms ± 904.469989 µs
  Range (min … max): 5.105971 ms … 9.808958 ms 90 runs
Benchmark 3: 1103347 copied iter
  Time (mean ± σ): 8.125180 ms ± 898.243020 µs
  Range (min … max): 7.221712 ms … 12.985135 ms 54 runs
Benchmark 4: 16755 copied gilbert
  Time (mean ± σ): 10.933469 ms ± 1.584172 ms
  Range (min … max): 9.717495 ms … 24.773695 ms 162 runs
Benchmark 5: 328666 copied gilbert
  Time (mean ± σ): 15.397111 ms ± 2.937021 ms
  Range (min … max): 13.391137 ms … 37.901611 ms 88 runs
Benchmark 6: 1103347 copied gilbert
  Time (mean ± σ): 17.391026 ms ± 1.480367 ms
  Range (min … max): 16.234664 ms … 23.439774 ms 78 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt;&lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;q&gt;copying&lt;/q&gt; in axis order &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.799ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.744ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8.125ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;279µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;904µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;898µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;q&gt;copying&lt;/q&gt; with &lt;samp&gt;GRID_GILBERT&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.933ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15.397ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;17.391ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.58ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.94ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.48ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
so, maybe,
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/64024237ced1d8b13f52d8595d1f49ef7ae9dc4b/item/src/posterise_gpu.rs#L784&quot;&gt;only use this order&lt;/a&gt;
if it'll&lt;!--'--&gt; buy more than it takes:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; known_rgbs &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;75_000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_GILBERT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gr_z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		               &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gr_z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
109.958741ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.894491ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.795719ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
106.697441ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.377103ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.830369ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.823426ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.631205ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.405047ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.402202ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.815276ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.420918ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.759066ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.262505ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.838821ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.401791ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.768424ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.243982ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.303988ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.343532ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.901371ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.842508ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.66719ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.683189ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.481053ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.733234ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.93173ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.144414ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.196288ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.21397ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.293725ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.054825ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.941929ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.59854ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.398169ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.54276ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.197843ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.663504ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.534976ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.485342ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
109.843129ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
107.744897ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
109.097231ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.312852ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.538168ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.253879ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.229602ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
1.571405113s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.567433232s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.570773017s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.55837017s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.555731306s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.5893471s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.550970059s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.564130273s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
6.022318965s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
5.995966539s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
6.005150345s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
5.999533324s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
5.982980196s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
105.06680506s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
108.011177595s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
105.621038231s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
115.997102139s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
117.976591016s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
117.382114401s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
51.824589741s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
48.887123172s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
47.763700545s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
47.987010035s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
88.986075ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
90.022664ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
89.695145ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.887412ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
86.231295ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.52035ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
85.402084ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.955633ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
85.669533ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.930276ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
85.089055ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
88.189766ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
86.733893ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
87.909942ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
87.402816ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
87.509071ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
90.66774ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
85.878421ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
89.686391ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
85.589841ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
87.90964ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.467222ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.785987ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
86.221938ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.707503ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
86.37317ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.550536ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.961368ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
86.457087ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
85.089357ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
83.980019ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
86.603187ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
85.278322ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
85.434685ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
90.189894ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
86.537382ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
86.160057ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.703277ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
84.753688ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
894.100981ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
536.320163ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
537.205218ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
539.637611ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
535.264858ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
543.904107ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
539.687417ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
534.397915ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
546.501919ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
539.14588ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
6.564402854s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
6.594032881s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
52.458754378s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
54.276337031s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
54.510249977s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
24.141740129s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
26.274052852s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
26.17244478s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
76.85392304s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
72.732101783s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
75.797390295s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 104.244689 ms ± 2.032154 ms
  Range (min … max): 101.144414 ms … 109.958741 ms 47 runs
Benchmark 3: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
  Time (mean ± σ): 6001.189874 ms ± 12.835448 ms
  Range (min … max): 5982.980196 ms … 6022.318965 ms 5 runs
Benchmark 5: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 106233.006962 ms ± 1277.552791 ms
  Range (min … max): 105066.805060 ms … 108011.177595 ms 3 runs
Benchmark 2: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
  Time (mean ± σ): 1566.020034 ms ± 11.136597 ms
  Range (min … max): 1550.970059 ms … 1589.347100 ms 8 runs
Benchmark 6: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
  Time (mean ± σ): 117118.602519 ms ± 829.326207 ms
  Range (min … max): 115997.102139 ms … 117976.591016 ms 3 runs
Benchmark 4: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
  Time (mean ± σ): 49115.605873 ms ± 1619.581313 ms
  Range (min … max): 47763.700545 ms … 51824.589741 ms 4 runs
Benchmark 1: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
  Time (mean ± σ): 86.387736 ms ± 1.816057 ms
  Range (min … max): 83.980019 ms … 90.667740 ms 39 runs
Benchmark 3: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
  Time (mean ± σ): 6579.217868 ms ± 14.815014 ms
  Range (min … max): 6564.402854 ms … 6594.032881 ms 2 runs
Benchmark 5: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
  Time (mean ± σ): 53748.447129 ms ± 916.936697 ms
  Range (min … max): 52458.754378 ms … 54510.249977 ms 3 runs
Benchmark 2: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
  Time (mean ± σ): 574.616607 ms ± 106.554231 ms
  Range (min … max): 534.397915 ms … 894.100981 ms 10 runs
Benchmark 1: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
  Time (mean ± σ): 75127.805039 ms ± 1748.067682 ms
  Range (min … max): 72732.101783 ms … 76853.923040 ms 3 runs
Benchmark 4: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
  Time (mean ± σ): 25529.412587 ms ± 982.109019 ms
  Range (min … max): 24141.740129 ms … 26274.052852 ms 3 runs
--&gt;
&lt;p&gt;&lt;/p&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;caption&gt;&lt;code&gt;if true {&lt;/code&gt;&lt;/caption&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt;&lt;th&gt;*&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;104.245ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.001s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;106.233s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.03ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12.84ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.277s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.88%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.17%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.44%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19.34%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9.16%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;86.388ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.579s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;53.748s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.82ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;14.82ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;916.9ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;36.81%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.35%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-1.05%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;28.67%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-51.02%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt;&lt;th&gt;*&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.566s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;117.119s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;49.116s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.14ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;829.3ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.62s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16.79%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.76%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.45%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-7.57%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;574.617ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;75.128s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;25.529s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;106.6ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.748ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;982ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-2.95%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.32%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-5.71%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-53.88%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tfoot class=&quot;slowdown-didnt&quot;&gt;&lt;tr&gt;&lt;td colspan=5&gt;&lt;strong&gt;*&lt;/strong&gt;: slow-down doesn't&lt;!--'--&gt; apply (and subsequent measurement comparisons will ignore it)&lt;br /&gt; &lt;strong&gt;—&lt;/strong&gt;: didn't&lt;!--'--&gt; complete before&lt;/td&gt;&lt;/tfoot&gt;
&lt;/table&gt;
&lt;div class=&quot;one-by-each dark-invert&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.36-gilbert-index.png&quot;&gt;&lt;img alt=&quot;Plot with unlabelled x axis [0, 360] and y axis labelled index [0, 6200]; 'byaxis' looks piecewise-linear, starts around 4500 and climbs with a steady incline between x=0/x=66/x=150/x=220/x=270 but there are large jumps around those discontinuities; bygilbert stays much flatter between x=0/x=230, then jumps less, and this repeats at x=270 and x=340; adjacent_difference(byaxis) and adjacent_difference(bygilbert) are all flattened around y=0 but highlight the large discontinuities&quot; src=&quot;/content/assets/blogn_t/018.36-gilbert-index.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.37-gilbert-Δindex.png&quot;&gt;&lt;img alt=&quot;That same plot, with y axis truncated and labelled Δindex [0, 40]; byaxis and bygilbert are unseen; adjacent_difference(byaxis) is 1 with steady bumps up to y=13 every like 10, with larger jumps around the bigger discontinuities; adjacent_difference(bygilbert) stays around y=1 throughout, with smaller fluctuations to around y=4 sometimes and similar off-screen jumps around the big discontinuities&quot; src=&quot;/content/assets/blogn_t/018.37-gilbert-Δindex.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented&quot;&gt;
gilbert is distributed under the terms of &lt;a href=&quot;//github.com/jakubcerveny/gilbert/blob/master/LICENSE&quot;&gt;&lt;cite&gt;BSD-2-Clause&lt;/cite&gt;&lt;/a&gt;.
This doesn't&lt;!--'--&gt; impact our overall &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/trunk/item/LICENSES/0BSD.txt&quot;&gt;&lt;cite&gt;0BSD&lt;/cite&gt;&lt;/a&gt;
since neither the code nor its binary form is re-distributed – just the indices, which, as just some data, are not beholden to copyright.
&lt;/p&gt;
&lt;h2 id=&quot;ellipsoid-vs-prism&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#ellipsoid-vs-prism&quot;&gt;#&lt;/a&gt; Totally ellipsoidal, man!&lt;/h2&gt;
&lt;div class=&quot;singles&quot;&gt;
 &lt;figure&gt;
  &lt;video width=&quot;100%&quot; autoplay controls loop&gt;&lt;source src=&quot;/content/assets/blogn_t/018.38-ellipsoid-vs-prism.mp4&quot; type=&quot;video/mp4&quot; /&gt;&lt;/video&gt;
  &lt;figcaption&gt;The prismatic bounds between [​[​g_{tm} \sim g_{tM}​]​] include &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;~2.2×&lt;/span&gt; more cells than just the cells that intersect the ellipsoid [​[​R​]​],
              even when it's&lt;!--'--&gt; like half-way out-of-bounds ([​[​r=0.1, G=20​]​]).&lt;/figcaption&gt;
 &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
If, instead of iterating the cells intersecting the bounding box of the ellipsoid of interest,
only the cells that intersect &lt;em&gt;it&lt;/em&gt; are inspected,
we can expect the upper bounds of the speed-up to be proportional to the volume of an ellipsoid vs that of its bounding box prism, so
[​[​\frac{V_p}{V_e}​]​] where heretofore [​[​V_p = 2R_x2R_y2R_z​]​]
but now [​[​V_e = \frac{4}{3}\pi R_xR_yR_z​]​], so
[​[​\frac{8}{\frac{4}{3}\pi} \approx 47.64%​]​].
(It will be lower because the, uh. &quot;edges&quot; are quantised outward to iterate the whole cell and evaluating the radius bounds themselves itself bears a cost.)
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Thus, we seek, for a given point [​[​q_t​]​] and radius [​[​r​]​],
cubic lattice cells that intersect [​[​r​]​] around [​[​q_t​]​] or are full contained therewithin,
which, it seemed natural to me, is equivalent, for cell [​[​C​]​] to finding
closest-to-[​[​q_t​]​] point [​[​C_c \in C​]​]
furthest-from-[​[​q_t​]​] point [​[​C_f \in C​]​]
such that at least one is inside the radius [​[​|\overrightarrow{C_cq_t}| \leq r \vee |\overrightarrow{C_fq_t}| \leq r​]​].
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
&lt;!-- Actually, they're&lt;!--'-&gt; in different coordinate spaces ([​[​q_t \in P\text{ &amp; }C \in [0, G ) \cap \mathbb{Z}​]​]) --&gt;
Actually, they're&lt;!--'--&gt; in different coordinate spaces ([​[​q_t \in P\text{ &amp; }C \in \bar{G}​]​])
but we have an (almost) bijexion between them so actually
[​[​|\overrightarrow{g^{-1}(C_{c \vee f})q_t}| \leq r​]​].
[​[​C​]​]s laying on a cube lattice makes this computationally quite simple in… most cases,
since in those most cases the [​[​C_c​]​] and [​[​C_f​]​] are opposite corners, so for [​[​C=(x,y,z)​]​],
[​[​C_c=(x+[ \kappa],y+[ \lambda],z+[ \mu])​]​] and
[​[​C_c=(x+[\neg\kappa],y+[\neg\lambda],z+[\neg\mu])​]​],
with [​[​(\kappa, \lambda, \mu) = (C_x &amp;lt; g(q_t)_x, \cdots)​]​]
and this seems natural and obvious.
Doing the comparison in [​[​P​]​] space frees us from the burden of figuring out how you'd&lt;!--'--&gt; do it on an ellipsoid post-uneven-[​[​B_r​]​] scaling.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Please behold a hateful interactive javascript model of what this would look like in two dimensions.
The red point is [​[​q_t​]​], point — [​[​C_c​]​], blue — [​[​C_f​]​];
dark grey cells have neither [​[​C_{c \vee f}​]​] inside, yellow ones — one, green — both;
[​[​B_r = (1,1) \Rightarrow g(x) = g^{-1}(x) = x​]​]:
&lt;/p&gt;
&lt;iframe src=&quot;/content/assets/blogn_t/018.39-model-bad.html&quot; width=&quot;100%&quot;&gt;No iframe. Try &lt;a href=&quot;/content/assets/blogn_t/018.39-model-bad.html&quot;&gt;opening 018.39-model-bad.html directly.&lt;/a&gt;&lt;/iframe&gt;
&lt;script&gt;
 function sizeiframes() {
  for(let ifr of document.querySelectorAll(&quot;iframe&quot;))
   ifr.style.height = `calc(${ifr.clientWidth}px + 3em)`;
 }
 window .addEventListener(&quot;resize&quot;, sizeiframes);
 document.addEventListener(&quot;DOMContentLoaded&quot;, sizeiframes);
&lt;/script&gt;
&lt;p class=&quot;indented continued&quot;&gt;
And just as obvious that this breaks down when one of the coordinates matches,
or when [​[​r​]​] doesn't&lt;!--'--&gt; include a corner,
or when it includes the wrong corner, or
&lt;/p&gt;
&lt;div class=&quot;three-by-each continuation&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.40-ellipsoid-vs-prism-badmodel-big.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.40-ellipsoid-vs-prism-badmodel-big.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10,12)&lt;/span&gt; and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10,13)&lt;/span&gt; should both be yellow&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.41-ellipsoid-vs-prism-badmodel-mid.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.41-ellipsoid-vs-prism-badmodel-mid.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(8,9)&lt;/span&gt; should be yellow&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.42-ellipsoid-vs-prism-badmodel-small.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.42-ellipsoid-vs-prism-badmodel-small.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(9,8)&lt;/span&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(9,9)&lt;/span&gt;, and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10,8)&lt;/span&gt; should all be yellow&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
While wrong, it's&lt;!--'--&gt; computationally simple to express
(keeping in mind that &lt;code&gt;&amp;lt;&lt;/code&gt; and &lt;code&gt;!&lt;/code&gt; is element-wise):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;iter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;trunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lab_to_gridpos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_from &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_to&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GRID_SIZE &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; newcenter_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gx &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gy &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gz &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gxyz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gy&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gz&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool3&lt;/span&gt; gxyz_close &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gxyz &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; closest_corner&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;gridpos_to_lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gxyz &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;gxyz_close&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; furthest_corner &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;gridpos_to_lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gxyz &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;gxyz_close&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;closest_corner&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;furthest_corner &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float2&lt;/span&gt; corners_squared &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;closest_corner&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;closest_corner&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                                &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;furthest_corner&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; furthest_corner&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool2&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;corners_inrange &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; corners_squared &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;corners_inrange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; group &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
(with [​[​g^{-1}​]​] as &lt;samp&gt;gridpos_to_lab&lt;/samp&gt;)
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;gridpos_to_lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; pos&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pos &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; bbox_range &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
For of us who &lt;a href=&quot;//101010.pl/@nabijaczleweli/114067056129121805&quot;&gt;have ever experienced 3D geometry&lt;/a&gt; the solution may be obvious.
That's&lt;!--'--&gt; not me though.
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/f1751426d4f1039ee155f739c2878a4c4008b305/item/src/posterise_grid.kernel.hlsl.inc#L38&quot;&gt;This&lt;/a&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/f1751426d4f1039ee155f739c2878a4c4008b305/item/src/posterise_grid_oneshot.kernel.hlsl.inc#L32&quot;&gt;solution&lt;/a&gt;
is due to ratchetfreak
(keeping in mind that &lt;code&gt;?:&lt;/code&gt; is &lt;a href=&quot;//registry.khronos.org/SPIR-V/specs/unified1/SPIRV.html#OpSelect&quot;&gt;&lt;em&gt;also&lt;/em&gt;&lt;/a&gt; element-wise):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; iter_limit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;iter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; gridpos_f&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lab_to_gridpos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;trunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos_f&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_from &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_to&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GRID_SIZE &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; newcenter_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gx &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gy &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; gz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; gz &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gxyz&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gy&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gz&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool3&lt;/span&gt; gxyz_same &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gxyz &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool3&lt;/span&gt; gxyz_close &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gxyz &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; closest_corner&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;gridpos_to_lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;gxyz_same &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; gridpos_f &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gxyz &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; gxyz_close&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;gxyz_close &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gxyz_close &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gxyz_same &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;gridpos_to_lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; furthest_corner &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;gridpos_to_lab&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gxyz &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;gxyz_close&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;closest_corner&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;furthest_corner &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float2&lt;/span&gt; corners_squared &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;closest_corner&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;closest_corner&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		                                &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;dot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;furthest_corner&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; furthest_corner&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool2&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;corners_inrange &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; corners_squared &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;corners_inrange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; group &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
where we observe that [​[​C_c​]​] uses [​[​g(q_t)​]​]'s components, instead of the corners', on matching axes;
[​[​C_f​]​] is additionally discriminated, on matching axes, to always pick the corner &lt;em&gt;away&lt;/em&gt; from [​[​q_t​]​].
&lt;/p&gt;
&lt;iframe src=&quot;/content/assets/blogn_t/018.43-model-good.html&quot; width=&quot;100%&quot;&gt;No iframe. Try &lt;a href=&quot;/content/assets/blogn_t/018.43-model-good.html&quot;&gt;opening 018.43-model-good.html directly.&lt;/a&gt;&lt;/iframe&gt;
&lt;div class=&quot;three-by-each&quot;&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.44-ellipsoid-vs-prism-goodmodel-left.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.44-ellipsoid-vs-prism-goodmodel-left.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​C = (8,8)​]​] [​[​C_y = \operatorname{trunc}(g(q_t)_y) \Rightarrow C_{cy} = g(q_t)_y​]​]&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.45-ellipsoid-vs-prism-goodmodel-up.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.45-ellipsoid-vs-prism-goodmodel-up.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​C = (9,7)​]​] [​[​C_x = \operatorname{trunc}(g(q_t)_x) \Rightarrow C_{cx} = g(q_t)_x​]​]&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.46-ellipsoid-vs-prism-goodmodel-mid.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.46-ellipsoid-vs-prism-goodmodel-mid.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​C = (9,8)​]​] [​[​C = \operatorname{trunc}(g(q_t)) \Rightarrow C_c = g(q_t)​]​]&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.47-ellipsoid-vs-prism-goodmodel-left-means-right.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.47-ellipsoid-vs-prism-goodmodel-left-means-right.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​C = (9, 7)\text{ &amp; }g(q_t) = (9.3, 8.5)​]​] [​[​C_x + \frac{1}{2} &gt; g(q_t)_x​]​]&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.48-ellipsoid-vs-prism-goodmodel-right-means-left.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.48-ellipsoid-vs-prism-goodmodel-right-means-left.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;[​[​C = (9, 7)\text{ &amp; }g(q_t) = (9.7, 8.5)​]​] [​[​C_x + \frac{1}{2} &amp;lt; g(q_t)_x​]​]&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.49-ellipsoid-vs-prism-goodmodel-right-means-centers.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.49-ellipsoid-vs-prism-goodmodel-right-means-centers.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;Both axes for [​[​C = \operatorname{trunc}(g(q_t)) = (0, 0)​]​]&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.50-ellipsoid-vs-prism-goodmodel-corner.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.50-ellipsoid-vs-prism-goodmodel-corner.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10,12)&lt;/span&gt; and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10,13)&lt;/span&gt; are both yellow&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.51-ellipsoid-vs-prism-goodmodel-center.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.51-ellipsoid-vs-prism-goodmodel-center.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(8,9)&lt;/span&gt; is yellow&lt;/figcaption&gt; &lt;/figure&gt;
 &lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.52-ellipsoid-vs-prism-goodmodel-corner.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.52-ellipsoid-vs-prism-goodmodel-corner.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(9,8)&lt;/span&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(9,9)&lt;/span&gt;, and &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10,8)&lt;/span&gt; are all yellow&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;!-- PREV DEGEN
111.001569ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.520376ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
108.892465ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
106.877241ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
109.359747ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
107.728791ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.478416ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
108.515743ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.414592ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.961027ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.07282ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.484086ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.53262ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.235287ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.513367ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.340505ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.138822ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.532016ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.401442ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.387254ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.128861ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.360494ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.570956ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.444306ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
105.54392ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.207883ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.350296ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.905419ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.408857ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.492473ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
104.731009ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.381256ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
103.377162ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
102.140437ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
139.004619ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
140.487059ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
138.653555ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
136.005025ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
133.226394ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
132.63867ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
133.49173ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
134.70008ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
134.796675ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
134.368334ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
132.784771ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
134.598957ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
136.422801ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
135.641282ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
134.055304ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
138.527075ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
136.666403ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
132.848162ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
134.213782ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
133.628775ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
135.526274ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
135.963368ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
133.096895ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
131.606607ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
134.32215ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
134.184501ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
133.404492ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
Benchmark 1: PREV DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 104.777398 ms ± 2.222235 ms
  Range (min … max): 101.340505 ms … 111.001569 ms 34 runs
Benchmark 2: PREV DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
  Time (mean ± σ): 134.994953 ms ± 2.132496 ms
  Range (min … max): 131.606607 ms … 140.487059 ms 27 runs
--&gt;
&lt;!-- DEGEN
102.559722ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
99.938662ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
97.931285ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
99.162577ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
100.361871ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
100.141513ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
100.214563ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
100.726821ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
99.429121ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
98.583306ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
101.423818ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
98.896939ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
98.957613ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
99.434856ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
97.029928ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.068067ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.756679ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.107913ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.326828ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.351213ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.683562ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.60672ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.192802ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.970934ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.624397ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.917268ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.404171ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
127.566196ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
128.756133ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
127.839985ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
121.879133ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
121.982672ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
126.540774ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
124.510155ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
121.973314ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
126.268496ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
125.439585ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
126.62771ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
123.219699ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
124.693686ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
124.4688ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
123.667057ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
123.155101ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
122.85173ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
123.287013ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
125.810271ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
124.462461ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
123.175627ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
129.153382ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
128.573809ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
126.935609ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
127.760897ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
124.415069ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
127.529671ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
Benchmark 1: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 97.659376 ms ± 2.497993 ms
  Range (min … max): 94.068067 ms … 102.559722 ms 27 runs
Benchmark 2: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
  Time (mean ± σ): 125.279409 ms ± 2.197679 ms
  Range (min … max): 121.879133 ms … 129.153382 ms 27 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;95.878ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;78.837ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;82.23%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.67%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42.34%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-45.15 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;25.59%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;33.67%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-10.02 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;97.659ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;125.279ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;128.28%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7.20%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.79%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-0.55 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.35%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;35.69%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12.33 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;and&lt;/p&gt;
&lt;!--
102.662053ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
98.591757ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
98.560968ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
98.908108ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.497445ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.650423ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.404406ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.446129ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.394681ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.032212ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.95735ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.666658ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.801052ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
93.368957ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.643244ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.882856ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.273634ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.990857ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.141118ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
93.373485ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.591324ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.38304ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.524009ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.01893ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.254985ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.317103ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.227214ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.637745ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.712239ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
96.539102ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.905429ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.451733ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.342761ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
93.827484ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.749433ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.281483ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.123308ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
99.919041ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
1.172025506s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.156462454s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.127204265s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.149637073s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.727019164s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.261192556s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.152214966s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.147287687s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
101.198932ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
5.097563015s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
5.095093792s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
5.0861421s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
5.057353004s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
5.090883735s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
5.085210859s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
45.034844732s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
43.524110551s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
44.907894332s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
43.860803398s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
43.635185774s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
61.729776665s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
63.636074152s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
59.724237816s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
61.759637066s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
62.804512643s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
27.579021801s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
27.572132425s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
27.659271875s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
28.649872524s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
26.548741813s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
79.326983ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.570886ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.988059ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
77.906424ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.140971ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.66319ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.476338ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.773671ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
77.926649ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.557ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.78883ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.394534ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.357103ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.916452ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.878417ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.126481ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.557906ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.820761ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.255744ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.58447ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
77.916687ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.683414ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.755559ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
404.716338ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
401.056574ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
393.921181ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
394.070603ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
401.514497ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
404.102051ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
404.144915ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
401.00888ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
390.905891ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
77.968306ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
80.051751ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.787858ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.174477ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.670133ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
77.747343ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.704545ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.552775ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.478149ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.133122ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.350226ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
80.007378ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
78.617006ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
79.353849ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
402.05332ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
407.851467ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
433.604747ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
399.103231ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
399.466369ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
396.823878ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
400.516545ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
491.157281ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
399.467578ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
400.089411ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
407.142094ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
407.43822ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
403.584058ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
399.186545ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
5.888933833s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
5.858232446s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
5.94971779s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
5.909405448s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
5.937311903s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
5.874239235s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
5.910250358s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
38.683310583s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
37.703195985s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
43.696256802s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
38.6902066s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
37.598424225s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
53.156553616s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
52.123786593s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
52.190899974s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
53.055530971s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
51.035372686s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
16.866714139s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
16.834088086s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
16.863002153s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
16.864212918s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
16.875092294s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 95.878274 ms ± 2.040409 ms
  Range (min … max): 93.368957 ms … 102.662053 ms 39 runs
Benchmark 3: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
  Time (mean ± σ): 5085.374417 ms ± 13.286562 ms
  Range (min … max): 5057.353004 ms … 5097.563015 ms 6 runs
Benchmark 5: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 44192.567757 ms ± 646.328077 ms
  Range (min … max): 43524.110551 ms … 45034.844732 ms 5 runs
Benchmark 2: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
  Time (mean ± σ): 1486.630459 ms ± 426.785681 ms
  Range (min … max): 1127.204265 ms … 2156.462454 ms 8 runs
Benchmark 6: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
  Time (mean ± σ): 61930.847668 ms ± 1312.246738 ms
  Range (min … max): 59724.237816 ms … 63636.074152 ms 5 runs
Benchmark 4: MSC 1103347 RGBs @ r=0.02 =&gt; ~11388 levels
  Time (mean ± σ): 27601.808088 ms ± 665.145035 ms
  Range (min … max): 26548.741813 ms … 28649.872524 ms 5 runs
Benchmark 1: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
  Time (mean ± σ): 78.836850 ms ± 656.181213 µs
  Range (min … max): 77.747343 ms … 80.051751 ms 37 runs
Benchmark 3: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
  Time (mean ± σ): 5904.013002 ms ± 30.414859 ms
  Range (min … max): 5858.232446 ms … 5949.717790 ms 7 runs
Benchmark 5: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
  Time (mean ± σ): 39274.278839 ms ± 2259.250450 ms
  Range (min … max): 37598.424225 ms … 43696.256802 ms 5 runs
Benchmark 2: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
  Time (mean ± σ): 406.214160 ms ± 19.741479 ms
  Range (min … max): 390.905891 ms … 491.157281 ms 23 runs
Benchmark 6: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
  Time (mean ± σ): 52312.428768 ms ± 767.590385 ms
  Range (min … max): 51035.372686 ms … 53156.553616 ms 5 runs
Benchmark 4: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8018 levels
  Time (mean ± σ): 16860.621918 ms ± 13.922011 ms
  Range (min … max): 16834.088086 ms … 16875.092294 ms 5 runs
--&gt;
&lt;table class=&quot;perf continued&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;95.878ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.085s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;44.193s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;646ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.67%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15.26%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;58.40%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;25.59%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;23.02%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;78.837ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.904s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;39.274s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;656µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.26ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42.34%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.26%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;26.93%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;33.67%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-35.52%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.487s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;61.931s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;27.602s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;426ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.31s&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;665ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;21.01%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;47.12%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;43.80%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-2.12%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;406.214ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;52.312s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16.861s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;767ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;27.22%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30.37%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;33.96%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-8.78%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tfoot class=&quot;slowdown-didnt&quot;&gt;&lt;tr&gt;&lt;td colspan=5&gt;&lt;strong&gt;—&lt;/strong&gt;: didn't&lt;!--'--&gt; complete before&lt;/td&gt;&lt;/tfoot&gt;
&lt;/table&gt;
&lt;p class=&quot;continuation&quot;&gt;
so, around the predicted &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;47%&lt;/span&gt; peak. Cool.
&lt;/p&gt;
&lt;h2 id=&quot;sum_cells&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#sum_cells&quot;&gt;#&lt;/a&gt; commutativity can be your angle....&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
As a side-effect we've&lt;!--'--&gt; classified cells into
&quot;&lt;!--&quot;--&gt;ones where no points are within [​[​r​]​]&lt;!--&quot;--&gt;&quot;,
&quot;&lt;!--&quot;--&gt;ones where some points are within [​[​r​]​]&lt;!--&quot;--&gt;&quot;, and
&quot;&lt;!--&quot;--&gt;ones where all points are within [​[​r​]​]&lt;!--&quot;--&gt;&quot;.
In the previous sexion we got to
&lt;/p&gt;
&lt;div class=&quot;mathnospace&quot;&gt;
[​![​
\begin{align}
&lt;!--&quot;--&gt;M_t &amp;= (x \mapsto [|\overrightarrow{xq_t}| \leq r]) \circ D\\&lt;!--&quot;--&gt;
&amp;\Leftrightarrow\\
M_t &amp;= (x \mapsto [|\overrightarrow{xq_t}| \leq r]) \circ \left(\bigcup_{x_g \in \mathbb{Z}^3 \wedge g_{tm} \leq x_g \leq g_{tM}} h(x_g)\right)\\
&amp;\Leftrightarrow\\
M_t &amp;= \bigcup_{x_g \in \mathbb{Z}^3 \wedge g_{tm} \leq x_g \leq g_{tM}} (x \mapsto [|\overrightarrow{xq_t}| \leq r]) \circ h(x_g)\\
&amp;\Leftrightarrow\\
M_t &amp;= \bigcup_{x_g \in \mathbb{Z}^3 \wedge g_{tm} \leq x_g \leq g_{tM} \wedge (\bigvee_{i \in \texttt{corners_inrange}}i)} (x \mapsto [|\overrightarrow{xq_t}| \leq r]) \circ h(x_g)\\
\end{align}
​]!​]
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
we can also observe that
&lt;/p&gt;
&lt;div class=&quot;mathnospace&quot;&gt;
[​![​
\begin{align}
&lt;!--&quot;--&gt;q_t &amp;= \frac{\sum\limits_{k \in dom D} (M_{t-1} \odot D)_k}{\sum\limits_{k \in dom D} (M_{t-1})_k}\\&lt;!--&quot;--&gt;
&amp;\Leftrightarrow\text{ for }palette\\
&lt;!--&quot;--&gt;M_{Dt} &amp;= \{D_x | x \in dom D \wedge {M_t}_x = 1\}\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;q_t &amp;= \frac{\sum M_{Dt}}{\overline{M_{Dt}}}\\&lt;!--&quot;--&gt;
\end{align}
​]!​]
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
but for &quot;&lt;!--&quot;--&gt;cells where all points are within [​[​r​]​]&lt;!--&quot;--&gt;&quot;
⇔ [​[​(\bigwedge_{i \in \texttt{corners_inrange}}i)​]​]
⇔ [​[​((x \mapsto [|\overrightarrow{xq_t}| \leq r]) = (x \mapsto 1))​]​]
a [​[​\sum​]​] is always the same, and, thus, can be pre-computed.
In the same way that skipping iterating the outside bit led to a significant speed-up,
this can allow us to skip iterating the &lt;em&gt;inside&lt;/em&gt; green bit based on just knowing [​[​x_g​]​] (&lt;samp&gt;gxyz&lt;/samp&gt;) if we pre-compute the sum, so.
&lt;/p&gt;
&lt;div class=&quot;mathnospace&quot;&gt;
[​![​
\begin{align}
\cdots&amp;\Leftrightarrow\\
&lt;!--&quot;--&gt;M_t              &amp;= \bigcup_{x_g \in \mathbb{Z}^3 \wedge g_{tm} \leq x_g \leq g_{tM} \wedge \sum_{i \in \texttt{corners_inrange}}[i] = 1} (x \mapsto [|\overrightarrow{xq_t}| \leq r]) \circ h(x_g)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;N_{\sigma t}     &amp;= \sum_{x_g \in \mathbb{Z}^3 \wedge g_{tm} \leq x_g \leq g_{tM} \wedge (\bigwedge_{i \in \texttt{corners_inrange}}i)} \sum      h(x_g) \\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;N_{\overline{t}} &amp;= \sum_{x_g \in \mathbb{Z}^3 \wedge g_{tm} \leq x_g \leq g_{tM} \wedge (\bigwedge_{i \in \texttt{corners_inrange}}i)} \overline{h(x_g)}\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;q_t &amp;= \frac{\sum M_{Dt} + N_{\sigma t}}{\overline{M_{Dt}} + N_\overline{t}}\\&lt;!--&quot;--&gt;
\end{align}
​]!​]
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
where
[​[​\sum h(x_g)​]​]
and
[​[​\overline{h(x_g)}​]​]
can both be &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/shader.h#L7&quot;&gt;memoised&lt;/a&gt;
(and an analogous equivalency can be drawn for [​[​*freq​]​]):
&lt;/p&gt;
&lt;!--
g_{tf} &amp;= g(q_t)
g_t &amp;= \operatorname{trunc}(g(q_t)) \Leftrightarrow g_t = \operatorname{trunc}(g_{tf})
x_g &amp;\in \mathbb{Z}^3 \wedge g_{tm} \leq x_g \leq g_{tM}
x_{gsame} &amp;= ({x_g}_i = {g_t}_i)_i
x_{gclose} &amp;= ({x_g}_i &lt; {g_t}_i)_i
C_c &amp;= g^{-1}( \left(\begin{cases}
 {g_{tf}}_i &amp; \text{if}\ {x_{gsame}}_i
 {x_g}_i + [x_{gclose}]_i &amp; \text{otherwise}
\end{cases}\right)_i )
x_{gcentral} &amp;= (g^{-1}({x_g} + (\frac{1}{2} + \frac{1}{2} + \frac{1}{2}))_i &lt; {q_t}_i)_i
x_{gfar} &amp;= ({x_{gclose}}_i \vee ({x_{gsame}}_i \wedge {x_{gcentral}}_i))_i
C_f &amp;= g^{-1} ( ( {x_g}_i + [\neg {x_{gfar}}_i ] )_i )
C_r &amp;= [|\overrightarrow{C_cq_t}| \leq r] + [|\overrightarrow{C_fq_t}| \leq r]
--&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;groupsum_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; labsum&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;freqsum&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;group_ranges&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupsum_t&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;group_sums&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupsum_t&lt;/span&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;group_mulsums&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
as computed by
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/sum_cells.kernel.hlsl.inc&quot;&gt;&lt;samp&gt;sum_cells.kernel.hlsl.inc&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shader.h&quot;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RWStructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;             &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL &amp;amp; HOST_VISIBLE&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;known_rgbs_pack&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vk&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;binding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;StructuredBuffer&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;groups_data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// DEVICE_LOCAL&lt;/span&gt;

&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GRID_SIZE&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;gridpos&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;DTid&lt;/span&gt;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupsum_t&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;sum &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupsum_t&lt;/span&gt; mulsum &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; group &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;end_idx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; groups_data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;freq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;FREQ_I&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;sum&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;labsum&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;sum&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;freqsum&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;mulsum&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;labsum&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;mulsum&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;freqsum &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt;&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;freq&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sum&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;freqsum&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_sums&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sum&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_mulsums&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; mulsum&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/sum_cells.straight.hlsl&quot;&gt;&lt;samp&gt;sum_cells.straight.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ_I&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;i&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;sum_cells.kernel.hlsl.inc&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
or
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/sum_cells.oneshot.hlsl&quot;&gt;&lt;samp&gt;sum_cells.oneshot.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;FREQ_I&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;sum_cells.kernel.hlsl.inc&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
as &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/posterise_gpu.rs#L863&quot;&gt;driven by&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SUM_CELLS&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ASSIGN_CELL&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_COUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;usize&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SUM_CELLS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_DATA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;SHADER_COUNT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/sum_cells.straight.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;                                              &lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;include_typed!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token macro property&quot;&gt;concat!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token macro property&quot;&gt;env!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;OUT_DIR&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/sum_cells.oneshot.spv&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...up to assign_cell.hlsl + grouping + copying&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// memcpy(self.buffer_groups_data, self.buffer_outputs, known_rgbs * mem::size_of::&amp;lt;u32&gt;());&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// + sum_cells.straight.hlsl or sum_cells.oneshot.hlsl&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_copy_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_groups_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                            &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;BufferCopy&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	                              	&lt;!--&quot;--&gt;src_offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                              	&lt;!--&quot;--&gt;dst_offset&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                              	&lt;!--&quot;--&gt;size&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; known_rgbs &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;size_of&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_bind_pipeline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PipelineBindPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;COMPUTE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	                              &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compute_pipeline&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SUM_CELLS&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;use_oneshot_driver&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;device&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;cmd_dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit_buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cmd_buffer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
(note that the shader can be dispatched alongside the previous memcpy for convenience and speed).
This increases &lt;samp&gt;params&lt;/samp&gt; from
[​[​G^3 \operatorname{sizeof}(\texttt{(uint, uint)}) + \varepsilon \approx 8\text{MB} \approx 3\%​]​]
to
[​[​G^3 (\operatorname{sizeof}(\texttt{(uint, uint)}) + 2 \operatorname{sizeof}(\texttt{(float3, uint)})) + \varepsilon \approx 40\text{MB} \approx 15\%​]​]
so it better be worth it!
(Even though the additional [​[​32\text{MB}​]​] doesn't&lt;!--'--&gt; need to be in &lt;code&gt;DEVICE_LOCAL &amp; HOST_VISIBLE&lt;/code&gt; at all.)
Time-wise this is immaterial:
&lt;/p&gt;
&lt;!--
237.565µs 16755 memcpy
229.112µs 16755 memcpy
251.752µs 16755 memcpy
160.288µs 16755 memcpy
278.618µs 16755 memcpy
243.3µs 16755 memcpy
244.507µs 16755 memcpy
152.44µs 16755 memcpy
125.273µs 16755 memcpy
236.056µs 16755 memcpy
270.769µs 16755 memcpy
245.413µs 16755 memcpy
158.477µs 16755 memcpy
253.563µs 16755 memcpy
220.962µs 16755 memcpy
238.168µs 16755 memcpy
238.169µs 16755 memcpy
110.481µs 16755 memcpy
252.356µs 16755 memcpy
243.3µs 16755 memcpy
242.092µs 16755 memcpy
240.885µs 16755 memcpy
121.65µs 16755 memcpy
267.449µs 16755 memcpy
154.251µs 16755 memcpy
242.394µs 16755 memcpy
302.767µs 16755 memcpy
261.714µs 16755 memcpy
227.604µs 16755 memcpy
240.281µs 16755 memcpy
116.821µs 16755 memcpy
114.708µs 16755 memcpy
215.227µs 16755 memcpy
255.978µs 16755 memcpy
265.638µs 16755 memcpy
228.811µs 16755 memcpy
225.792µs 16755 memcpy
174.778µs 16755 memcpy
371.591µs 16755 memcpy
226.999µs 16755 memcpy
93.276µs 16755 memcpy
237.263µs 16755 memcpy
232.735µs 16755 memcpy
212.51µs 16755 memcpy
249.337µs 16755 memcpy
244.809µs 16755 memcpy
264.128µs 16755 memcpy
251.752µs 16755 memcpy
132.215µs 16755 memcpy
304.577µs 16755 memcpy
132.517µs 16755 memcpy
124.367µs 27868 memcpy
248.734µs 27868 memcpy
249.941µs 27868 memcpy
256.582µs 27868 memcpy
261.713µs 27868 memcpy
258.393µs 27868 memcpy
242.697µs 27868 memcpy
250.544µs 27868 memcpy
250.243µs 27868 memcpy
265.939µs 27868 memcpy
259.299µs 27868 memcpy
276.505µs 27868 memcpy
258.695µs 27868 memcpy
250.243µs 27868 memcpy
255.677µs 27868 memcpy
252.96µs 27868 memcpy
255.073µs 27868 memcpy
252.356µs 27868 memcpy
256.28µs 27868 memcpy
248.13µs 27868 memcpy
249.337µs 27868 memcpy
246.923µs 27868 memcpy
243.3µs 27868 memcpy
314.842µs 84860 memcpy
324.501µs 84860 memcpy
152.741µs 84860 memcpy
171.457µs 84860 memcpy
308.502µs 84860 memcpy
163.307µs 84860 memcpy
307.898µs 84860 memcpy
288.277µs 84860 memcpy
309.71µs 84860 memcpy
216.434µs 84860 memcpy
308.2µs 84860 memcpy
265.034µs 84860 memcpy
302.767µs 84860 memcpy
160.59µs 84860 memcpy
268.959µs 84860 memcpy
264.129µs 84860 memcpy
294.919µs 84860 memcpy
276.202µs 84860 memcpy
263.223µs 84860 memcpy
283.447µs 84860 memcpy
228.207µs 84860 memcpy
418.077µs 84860 memcpy
318.161µs 84860 memcpy
337.179µs 84860 memcpy
162.099µs 84860 memcpy
277.41µs 84860 memcpy
346.537µs 242931 memcpy
221.264µs 242931 memcpy
373.704µs 242931 memcpy
415.059µs 242931 memcpy
236.659µs 242931 memcpy
397.551µs 242931 memcpy
378.836µs 242931 memcpy
372.496µs 242931 memcpy
384.269µs 242931 memcpy
313.634µs 242931 memcpy
373.704µs 242931 memcpy
370.686µs 242931 memcpy
248.734µs 242931 memcpy
403.89µs 242931 memcpy
312.124µs 328666 memcpy
405.399µs 328666 memcpy
525.842µs 328666 memcpy
383.967µs 328666 memcpy
437.396µs 328666 memcpy
319.671µs 328666 memcpy
384.571µs 328666 memcpy
350.46µs 328666 memcpy
360.422µs 328666 memcpy
439.811µs 328666 memcpy
443.434µs 328666 memcpy
550.595µs 328666 memcpy
912.224µs 1103347 memcpy
822.873µs 1103347 memcpy
854.267µs 1103347 memcpy
965.654µs 1103347 memcpy
902.262µs 1103347 memcpy
785.14µs 1103347 memcpy
885.057µs 1103347 memcpy
889.886µs 1103347 memcpy
784.839µs 1103347 memcpy
802.347µs 1103347 memcpy
928.524µs 1103347 memcpy
907.394µs 1103347 memcpy
935.468µs 1103347 memcpy
757.068µs 1103347 memcpy
984.37µs 1103347 memcpy
854.569µs 1103347 memcpy
890.189µs 1103347 memcpy
747.71µs 1103347 memcpy
952.673µs 1103347 memcpy
Benchmark 1: 16755 memcpy
  Time (mean ± σ): 220.453294 µs ± 57.099715 µs
  Range (min … max): 93.276000 µs … 371.591000 µs 51 runs
Benchmark 3: 84860 memcpy
  Time (mean ± σ): 268.702769 µs ± 63.589262 µs
  Range (min … max): 152.741000 µs … 418.077000 µs 26 runs
Benchmark 4: 242931 memcpy
  Time (mean ± σ): 345.501643 µs ± 62.213142 µs
  Range (min … max): 221.264000 µs … 415.059000 µs 14 runs
Benchmark 2: 27868 memcpy
  Time (mean ± σ): 248.431783 µs ± 27.443262 µs
  Range (min … max): 124.367000 µs … 276.505000 µs 23 runs
Benchmark 5: 328666 memcpy
  Time (mean ± σ): 409.474333 µs ± 71.313642 µs
  Range (min … max): 312.124000 µs … 550.595000 µs 12 runs
Benchmark 6: 1103347 memcpy
  Time (mean ± σ): 871.711263 µs ± 69.364743 µs
  Range (min … max): 747.710000 µs … 984.370000 µs 19 runs
--&gt;
&lt;!--
278.92µs memcpy+SUM_CELLS 16755
158.779µs memcpy+SUM_CELLS 16755
169.646µs memcpy+SUM_CELLS 16755
304.578µs memcpy+SUM_CELLS 16755
162.703µs memcpy+SUM_CELLS 16755
291.9µs memcpy+SUM_CELLS 16755
291.598µs memcpy+SUM_CELLS 16755
282.24µs memcpy+SUM_CELLS 16755
160.59µs memcpy+SUM_CELLS 16755
280.429µs memcpy+SUM_CELLS 16755
187.758µs memcpy+SUM_CELLS 16755
338.386µs memcpy+SUM_CELLS 16755
255.375µs memcpy+SUM_CELLS 16755
272.581µs memcpy+SUM_CELLS 16755
200.435µs memcpy+SUM_CELLS 16755
164.515µs memcpy+SUM_CELLS 16755
302.465µs memcpy+SUM_CELLS 16755
258.393µs memcpy+SUM_CELLS 16755
287.372µs memcpy+SUM_CELLS 16755
283.146µs memcpy+SUM_CELLS 16755
152.742µs memcpy+SUM_CELLS 16755
306.087µs memcpy+SUM_CELLS 16755
171.759µs memcpy+SUM_CELLS 16755
285.863µs memcpy+SUM_CELLS 16755
288.277µs memcpy+SUM_CELLS 16755
284.051µs memcpy+SUM_CELLS 16755
208.888µs memcpy+SUM_CELLS 16755
199.229µs memcpy+SUM_CELLS 16755
264.128µs memcpy+SUM_CELLS 16755
317.256µs memcpy+SUM_CELLS 27868
289.183µs memcpy+SUM_CELLS 27868
299.145µs memcpy+SUM_CELLS 27868
293.711µs memcpy+SUM_CELLS 27868
278.618µs memcpy+SUM_CELLS 27868
299.446µs memcpy+SUM_CELLS 27868
306.691µs memcpy+SUM_CELLS 27868
301.257µs memcpy+SUM_CELLS 27868
278.316µs memcpy+SUM_CELLS 27868
281.334µs memcpy+SUM_CELLS 27868
179.607µs memcpy+SUM_CELLS 27868
167.835µs memcpy+SUM_CELLS 27868
185.645µs memcpy+SUM_CELLS 27868
219.453µs memcpy+SUM_CELLS 27868
249.337µs memcpy+SUM_CELLS 27868
275.298µs memcpy+SUM_CELLS 27868
282.24µs memcpy+SUM_CELLS 27868
283.146µs memcpy+SUM_CELLS 27868
285.862µs memcpy+SUM_CELLS 27868
292.202µs memcpy+SUM_CELLS 27868
289.786µs memcpy+SUM_CELLS 27868
303.974µs memcpy+SUM_CELLS 27868
376.42µs memcpy+SUM_CELLS 84860
364.347µs memcpy+SUM_CELLS 84860
247.828µs memcpy+SUM_CELLS 84860
262.016µs memcpy+SUM_CELLS 84860
367.365µs memcpy+SUM_CELLS 84860
246.318µs memcpy+SUM_CELLS 84860
363.44µs memcpy+SUM_CELLS 84860
401.475µs memcpy+SUM_CELLS 84860
369.779µs memcpy+SUM_CELLS 84860
367.063µs memcpy+SUM_CELLS 84860
377.628µs memcpy+SUM_CELLS 84860
400.871µs memcpy+SUM_CELLS 84860
243.602µs memcpy+SUM_CELLS 84860
377.628µs memcpy+SUM_CELLS 84860
278.92µs memcpy+SUM_CELLS 84860
388.193µs memcpy+SUM_CELLS 84860
376.722µs memcpy+SUM_CELLS 84860
250.846µs memcpy+SUM_CELLS 84860
374.609µs memcpy+SUM_CELLS 84860
367.968µs memcpy+SUM_CELLS 84860
231.527µs memcpy+SUM_CELLS 84860
389.702µs memcpy+SUM_CELLS 84860
378.533µs memcpy+SUM_CELLS 84860
329.029µs memcpy+SUM_CELLS 84860
538.822µs memcpy+SUM_CELLS 242931
505.014µs memcpy+SUM_CELLS 242931
544.557µs memcpy+SUM_CELLS 242931
524.634µs memcpy+SUM_CELLS 242931
507.731µs memcpy+SUM_CELLS 242931
543.048µs memcpy+SUM_CELLS 242931
504.41µs memcpy+SUM_CELLS 242931
522.22µs memcpy+SUM_CELLS 242931
529.464µs memcpy+SUM_CELLS 242931
532.181µs memcpy+SUM_CELLS 242931
514.069µs memcpy+SUM_CELLS 242931
362.535µs memcpy+SUM_CELLS 242931
499.882µs memcpy+SUM_CELLS 242931
532.181µs memcpy+SUM_CELLS 242931
499.882µs memcpy+SUM_CELLS 242931
479.959µs memcpy+SUM_CELLS 242931
488.412µs memcpy+SUM_CELLS 242931
517.39µs memcpy+SUM_CELLS 242931
490.223µs memcpy+SUM_CELLS 242931
513.768µs memcpy+SUM_CELLS 242931
502.9µs memcpy+SUM_CELLS 242931
654.133µs memcpy+SUM_CELLS 328666
530.37µs memcpy+SUM_CELLS 328666
618.816µs memcpy+SUM_CELLS 328666
662.585µs memcpy+SUM_CELLS 328666
587.12µs memcpy+SUM_CELLS 328666
637.229µs memcpy+SUM_CELLS 328666
615.797µs memcpy+SUM_CELLS 328666
685.526µs memcpy+SUM_CELLS 328666
680.395µs memcpy+SUM_CELLS 328666
663.189µs memcpy+SUM_CELLS 328666
662.585µs memcpy+SUM_CELLS 328666
648.398µs memcpy+SUM_CELLS 328666
638.738µs memcpy+SUM_CELLS 328666
637.53µs memcpy+SUM_CELLS 328666
645.379µs memcpy+SUM_CELLS 328666
665.301µs memcpy+SUM_CELLS 328666
639.644µs memcpy+SUM_CELLS 328666
635.719µs memcpy+SUM_CELLS 328666
682.206µs memcpy+SUM_CELLS 328666
645.681µs memcpy+SUM_CELLS 328666
626.965µs memcpy+SUM_CELLS 328666
1.634276ms memcpy+SUM_CELLS 1103347
1.645143ms memcpy+SUM_CELLS 1103347
1.588695ms memcpy+SUM_CELLS 1103347
1.60892ms memcpy+SUM_CELLS 1103347
1.615561ms memcpy+SUM_CELLS 1103347
1.61224ms memcpy+SUM_CELLS 1103347
1.582658ms memcpy+SUM_CELLS 1103347
1.564547ms memcpy+SUM_CELLS 1103347
1.645445ms memcpy+SUM_CELLS 1103347
1.550359ms memcpy+SUM_CELLS 1103347
1.526209ms memcpy+SUM_CELLS 1103347
1.596846ms memcpy+SUM_CELLS 1103347
1.585072ms memcpy+SUM_CELLS 1103347
1.595034ms memcpy+SUM_CELLS 1103347
1.6219ms memcpy+SUM_CELLS 1103347
1.616164ms memcpy+SUM_CELLS 1103347
1.608316ms memcpy+SUM_CELLS 1103347
1.567564ms memcpy+SUM_CELLS 1103347
1.58145ms memcpy+SUM_CELLS 1103347
Benchmark 1: memcpy+SUM_CELLS 16755
  Time (mean ± σ): 244.580448 µs ± 56.696432 µs
  Range (min … max): 152.742000 µs … 338.386000 µs 29 runs
Benchmark 3: memcpy+SUM_CELLS 84860
  Time (mean ± σ): 338.826208 µs ± 58.072497 µs
  Range (min … max): 231.527000 µs … 401.475000 µs 24 runs
Benchmark 4: memcpy+SUM_CELLS 242931
  Time (mean ± σ): 507.299143 µs ± 36.902407 µs
  Range (min … max): 362.535000 µs … 544.557000 µs 21 runs
Benchmark 2: memcpy+SUM_CELLS 27868
  Time (mean ± σ): 270.879182 µs ± 41.998483 µs
  Range (min … max): 167.835000 µs … 317.256000 µs 22 runs
Benchmark 5: memcpy+SUM_CELLS 328666
  Time (mean ± σ): 641.109810 µs ± 33.836216 µs
  Range (min … max): 530.370000 µs … 685.526000 µs 21 runs
Benchmark 6: memcpy+SUM_CELLS 1103347
  Time (mean ± σ): 1.597179 ms ± 30.484502 µs
  Range (min … max): 1.526209 ms … 1.645445 ms 19 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;memcpy &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;220.5µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;268.7µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;345.5µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;57µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;62µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;memcpy + &lt;samp&gt;sum_cells.hlsl&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;244.6µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;338.8µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;507.3µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;56µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;58µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;37µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(cost) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;24µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;70µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;162µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;memcpy &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;248.4µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;409.5µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;871.7µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;27µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;71µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;69µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;memcpy + &lt;samp&gt;sum_cells.hlsl&lt;/samp&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;270.9µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;641.1µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.597ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;34µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(cost) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;22µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;232µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;725µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continued&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/posterise_grid.kernel.hlsl.inc#L52&quot;&gt;Utilised&lt;/a&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/posterise_grid_oneshot.kernel.hlsl.inc#L55&quot;&gt;as&lt;/a&gt;
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;corners_inrange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;corners_inrange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupsum_t&lt;/span&gt; sums &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SUMS_FIELD&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gx&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gy&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gz&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; sums&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;freqsum&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; sums&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;labsum&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
where, expectedly,
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/posterise_grid.hlsl&quot;&gt;&lt;samp&gt;posterise_grid.hlsl&lt;/samp&gt;&lt;/a&gt;/&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/posterise_grid_oneshot.hlsl&quot;&gt;&lt;samp&gt;posterise_grid_oneshot.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;SUMS_FIELD&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;group_sums&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/posterise_grid.mul.hlsl&quot;&gt;&lt;samp&gt;posterise_grid.mul.hlsl&lt;/samp&gt;&lt;/a&gt;/&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/180a7268c7d82d5b4ed1bc4d53488288d49f8c39/item/src/posterise_grid_oneshot.mul.hlsl&quot;&gt;&lt;samp&gt;posterise_grid_oneshot.mul.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;SUMS_FIELD&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;group_mulsums&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;/p&gt;
&lt;!--
71.474368ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.064243ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.877693ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.577105ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
70.36533ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.075176ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.210947ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.818594ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.034661ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.542391ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.741318ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.286781ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.115862ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.997296ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.841903ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.037377ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.296072ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.202562ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.963553ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.04016ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.806453ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.842139ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.242945ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.766136ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.781833ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.385424ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.273735ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.75376ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.162112ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.47652ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.329645ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.150274ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.314552ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.097514ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.615074ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.219098ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.541551ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.310562ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.767042ms: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
81.145998ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
81.778094ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.489581ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
84.168834ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.671368ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.688573ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.488742ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.732041ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
81.55683ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.130131ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.643597ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.92245ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.408682ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.367931ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
84.078276ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.925836ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.818374ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
84.502693ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
84.731806ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
84.540124ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
84.341499ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.297296ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.741334ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
81.948345ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.866002ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.537039ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.250206ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.455537ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
84.331538ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
81.971588ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.990369ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.71876ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
82.77484ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.690988ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.821997ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
83.259327ms: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
Benchmark 1: DEGEN MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 68.856404 ms ± 835.083592 µs
  Range (min … max): 67.476520 ms … 71.474368 ms 39 runs
Benchmark 2: DEGEN MSC 16755 RGBs @ r=0.02 * freq =&gt; ~373 levels
  Time (mean ± σ): 83.216295 ms ± 902.483677 µs
  Range (min … max): 81.145998 ms … 84.731806 ms 36 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;68.781ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;53.958ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;78.45%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;39.40%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;46.11%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-3.78 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;46.62%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;54.60%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-13.80 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;sub&gt;d&lt;/sub&gt;&lt;/span&gt;, [​[​*freq​]​]&lt;/th&gt; &lt;th&gt;([​[​*freq​]​]/[​[​palette​]​])&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;68.856ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;83.216ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;120.85%&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;29.49%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;33.58%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-7.42 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;47.43%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;45.20%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-4.90 p.p.&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;&amp;&lt;/p&gt;
&lt;!--
72.550805ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.922434ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.743667ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.066659ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.758222ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.493792ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.722838ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.558088ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.525251ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.149368ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.750742ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.718442ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.16181ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.0465ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.713244ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.316297ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.207627ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.350105ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.054584ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.115323ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.934744ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.478331ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.151546ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.53491ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.181064ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.851865ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.814067ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.571672ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.756477ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.828188ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.214032ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.024398ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
69.892918ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
972.1998ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.535440304s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
964.806619ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
970.124808ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
987.885711ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.367326917s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
967.297275ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.264765385s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
981.168999ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.72368692s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
971.440318ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
962.923912ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.454324795s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
959.432586ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.426709636s: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
67.40196ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
962.348261ms: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
3.2351347s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.229313912s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.245787378s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.243263517s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.245967588s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.237273687s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.25050939s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.24750225s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
29.78425414s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
29.540783848s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
29.67644596s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
29.460999245s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
29.362900124s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
29.920096161s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
38.401241917s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
38.412699054s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
37.381274409s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
38.377833193s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
38.224483832s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
23.791289315s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
23.752635097s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
23.82692281s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
20.823219276s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
21.82115364s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
21.814802181s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
53.807948ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.321649ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.655206ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.256513ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.016836ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.176218ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.493474ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.33795ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.903335ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.252287ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.790742ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.945898ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.079019ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.121883ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.002647ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.593324ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.11977ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.329563ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.165352ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.806438ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.025222ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.203688ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.777459ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.214554ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.900015ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.983932ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.748179ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.759348ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.989064ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.217573ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.104375ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.608115ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.20399ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.222403ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
53.964613ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
54.399898ms: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
300.490946ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
300.175804ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
301.220244ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
294.094813ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
296.061135ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
299.752896ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
298.888668ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
296.704703ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
302.735585ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
296.945287ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
297.099235ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
297.060296ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
302.156013ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
298.422293ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
304.82537ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
303.744104ms: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
3.475812172s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.504035581s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.482193817s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.473978668s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.475733085s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.455121406s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.455068278s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
19.821443729s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
18.903949611s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
19.90690785s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
18.896197215s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
18.919671744s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
19.023824085s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
30.117289637s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
31.169072399s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
30.221689505s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
30.104635319s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
30.164946562s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
30.143630037s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
11.547348724s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
12.496609195s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
13.53280717s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
13.51786746s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
11.536600959s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
11.51815604s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
12.466678459s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
11.495598261s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 68.781234 ms ± 968.018269 µs
  Range (min … max): 67.401960 ms … 72.550805 ms 34 runs
Benchmark 3: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
  Time (mean ± σ): 3241.844053 ms ± 6.750737 ms
  Range (min … max): 3229.313912 ms … 3250.509390 ms 8 runs
Benchmark 5: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 29624.246580 ms ± 190.513280 ms
  Range (min … max): 29362.900124 ms … 29920.096161 ms 6 runs
Benchmark 2: MSC 27868 RGBs @ r=0.02 =&gt; ~375 levels
  Time (mean ± σ): 1154.492640 ms ± 253.941653 ms
  Range (min … max): 959.432586 ms … 1723.686920 ms 16 runs
Benchmark 6: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
  Time (mean ± σ): 38159.506481 ms ± 394.987662 ms
  Range (min … max): 37381.274409 ms … 38412.699054 ms 5 runs
Benchmark 4: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
  Time (mean ± σ): 22638.337053 ms ± 1198.912432 ms
  Range (min … max): 20823.219276 ms … 23826.922810 ms 6 runs
Benchmark 1: MSC 16755 RGBs @ r=0.02 * freq =&gt; ~325 levels
  Time (mean ± σ): 53.958291 ms ± 312.215180 µs
  Range (min … max): 53.025222 ms … 54.493474 ms 36 runs
Benchmark 3: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
  Time (mean ± σ): 3474.563287 ms ± 15.529480 ms
  Range (min … max): 3455.068278 ms … 3504.035581 ms 7 runs
Benchmark 5: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
  Time (mean ± σ): 19245.332372 ms ± 440.292464 ms
  Range (min … max): 18896.197215 ms … 19906.907850 ms 6 runs
Benchmark 2: MSC 27868 RGBs @ r=0.02 * freq =&gt; ~313 levels
  Time (mean ± σ): 299.398587 ms ± 2.924314 ms
  Range (min … max): 294.094813 ms … 304.825370 ms 16 runs
Benchmark 6: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
  Time (mean ± σ): 30320.210577 ms ± 381.490497 ms
  Range (min … max): 30104.635319 ms … 31169.072399 ms 6 runs
Benchmark 4: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
  Time (mean ± σ): 12263.958283 ms ± 826.639559 ms
  Range (min … max): 11495.598261 ms … 13532.807170 ms 8 runs
--&gt;
&lt;table class=&quot;perf continued&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;68.781ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.242s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;29.624s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;968µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.8ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;190ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;28.26%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;46.82%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32.97%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50.93%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;23.02%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;53.958ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.475s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19.245s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;312µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;440ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;31.56%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;41.15%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;51.00%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;55.45%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20.25%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.154s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;38.160s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;22.638s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;253ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;394ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1198ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;22.34%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;38.38%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;17.98%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20.70%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;299.399ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;30.320s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12.264s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.9ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;381ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;826ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;26.30%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42.04%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;27.26%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19.82%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;—&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tfoot class=&quot;slowdown-didnt&quot;&gt;&lt;tr&gt;&lt;td colspan=5&gt;&lt;strong&gt;—&lt;/strong&gt;: didn't&lt;!--'--&gt; complete before&lt;/td&gt;&lt;/tfoot&gt;
&lt;/table&gt;
&lt;div class=&quot;singles&quot;&gt;
&lt;figure&gt; &lt;a href=&quot;/content/assets/blogn_t/018.53-graphml-sum_cells.png&quot;&gt;&lt;img alt=&quot;&quot; src=&quot;/content/assets/blogn_t/018.53-graphml-sum_cells.png&quot; /&gt;&lt;/a&gt; &lt;figcaption&gt;&lt;/figcaption&gt; &lt;/figure&gt;
&lt;/div&gt;
&lt;h3 id=&quot;sum_cells+ulp&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#sum_cells+ulp&quot;&gt;#&lt;/a&gt; or yuor devil&lt;/h3&gt;
&lt;p class=&quot;continued&quot;&gt;
The individual values of
[​[​\sum h(x_g)​]​]
go quite a ways away from &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0&lt;/span&gt;:
&lt;/p&gt;
&lt;table class=&quot;Ppop&quot;&gt;
 &lt;caption&gt;[​[​G=100​]​]&lt;/caption&gt;
 &lt;tr&gt;&lt;th&gt;&lt;/th&gt; &lt;th&gt;most populous cell, [​[​palette​]​] ([​[​\sigma_{lab}​]​], &lt;/th&gt; &lt;td&gt;[​[​\sigma_{freq}​]​])&lt;/td&gt; &lt;th&gt;most populous cell, [​[​*freq​]​] ([​[​\sigma_{lab}​]​], &lt;/th&gt; &lt;td&gt;[​[​\sigma_{freq}​]​])&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #4b8494;&quot;&gt;α&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(44.041176, -0.31927294, -0.34573233)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;45&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(9383.919, -65.55733, -20.474636)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9434&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #94a088;&quot;&gt;β&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(58.839714, -0.22819409, -0.020030022)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10189.065, -0.47646168, -0.102591455)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10203&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #735d56;&quot;&gt;γ&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(18.17284, 0.18759891, 0.18187594)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;21&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(39128.875, -0.0036974102, -0.0036974102)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;248129&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #15090d;&quot; class=&quot;dark-invert&quot;&gt;δ&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(3.2355795, 1.158621, 0.64843106)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(0, 0, 0)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1716920&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #b57688;&quot;&gt;ε&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(55.92771, -0.81256634, -0.09105891)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;59&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(6374.0493, 2605.977, -906.254)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9462&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr style=&quot;height: 0.5em;&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;/th&gt; &lt;th&gt;cell with largest [​[​l​]​], [​[​palette​]​] ([​[​\sigma_{lab}​]​], &lt;/th&gt; &lt;td&gt;[​[​\sigma_{freq}​]​])&lt;/td&gt; &lt;th&gt;cell with largest [​[​l​]​], [​[​*freq​]​] ([​[​\sigma_{lab}​]​], &lt;/th&gt; &lt;td&gt;[​[​\sigma_{freq}​]​])&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #4b8494;&quot;&gt;α&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(44.041176, -0.31927294, -0.34573233)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;45&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(9383.919, -65.55733, -20.474636)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9434&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #94a088;&quot;&gt;β&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(58.839714, -0.22819409, -0.020030022)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;60&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10189.065, -0.47646168, -0.102591455)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10203&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #735d56;&quot;&gt;γ&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(18.461334, 0.1365368, 0.25196123)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(52687.547, -0.0033568442, 0.0033609867)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;112776&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #15090d;&quot; class=&quot;dark-invert&quot;&gt;δ&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(3.2355795, 1.158621, 0.64843106)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(20940.623, 7498.585, 4196.6367)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;70065&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #b57688;&quot;&gt;ε&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(55.92771, -0.81256634, -0.09105891)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;59&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(6374.0493, 2605.977, -906.254)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9462&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr style=&quot;height: 0.5em;&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;/th&gt; &lt;th&gt;cell with largest [​[​a​]​], [​[​palette​]​] ([​[​\sigma_{lab}​]​], &lt;/th&gt; &lt;td&gt;[​[​\sigma_{freq}​]​])&lt;/td&gt; &lt;th&gt;cell with largest [​[​a​]​], [​[​*freq​]​] ([​[​\sigma_{lab}​]​], &lt;/th&gt; &lt;td&gt;[​[​\sigma_{freq}​]​])&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #4b8494;&quot;&gt;α&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(8.910748, -1.357208, -0.7054685)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(6691.933, -82.91916, -29.420803)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6763&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #94a088;&quot;&gt;β&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(2.79438, -0.4932925, 0.46539965)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(823.4114, -1.3063359, -0.29277617)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;826&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #735d56;&quot;&gt;γ&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(10.627919, 0.5354426, 0.28728706)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(2371.3867, 629.1607, -65.39355)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10809&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #15090d;&quot; class=&quot;dark-invert&quot;&gt;δ&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(3.2355795, 1.158621, 0.64843106)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(20940.623, 7498.585, 4196.6367)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;70065&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #b57688;&quot;&gt;ε&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(3.4370112, 1.2792559, -0.44643825)&lt;/span&gt;,&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(6374.0493, 2605.977, -906.254)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9462&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr style=&quot;height: 0.5em;&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;&lt;/th&gt; &lt;th&gt;cell with largest [​[​b​]​], [​[​palette​]​] ([​[​\sigma_{lab}​]​], &lt;/th&gt; &lt;td&gt;[​[​\sigma_{freq}​]​])&lt;/td&gt; &lt;th&gt;cell with largest [​[​b​]​], [​[​*freq​]​] ([​[​\sigma_{lab}​]​], &lt;/th&gt; &lt;td&gt;[​[​\sigma_{freq}​]​])&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #4b8494;&quot;&gt;α&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(31.815504, -0.57158244, -0.95032257)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;34&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(680.8264, -66.88674, -58.81892)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;982&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #94a088;&quot;&gt;β&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(3.7039335, -0.46457234, 0.48276806)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(107.945366, -0.42522368, 0.8002589)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;117&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #735d56;&quot;&gt;γ&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(8.998497, 0.1350762, 0.34426308)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(21374.111, 178.88039, 555.86554)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;24665&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #15090d;&quot; class=&quot;dark-invert&quot;&gt;δ&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(2.0014775, -0.1437166, -1.3794196)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(7937.199, -569.93335, -5470.323)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;42118&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;td style=&quot;color: #b57688;&quot;&gt;ε&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(15.066136, 0.088873774, 2.2854338)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;17&lt;/span&gt;)&lt;/td&gt; &lt;td&gt;(&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;(6374.0493, 2605.977, -906.254)&lt;/span&gt;, &lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9462&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continuing&quot;&gt;
and especially, since [​[​P​]​] is symmetric around &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0&lt;/span&gt; in the other axes, in the [​[​l​]​] axis.
This wouldn't be an issue, except, &lt;a href=&quot;//tom7.org/grad/&quot;&gt;famously&lt;/a&gt;, floats aren't actually commutative,
and they're&lt;!--'--&gt; less commutative the further away from &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0&lt;/span&gt; they are.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Thus, for the first time, we are bitten by rounding errors:
in certain cases, the loop termination condition(s)
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token comment&quot;&gt;// and&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pack_r_g_b_to_rgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;oklab_to_linear_srgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
never trigger, and, thus, [​[​O​]​] never converges.
Frankly, this should've&lt;!--'--&gt; happened earlier, but always adding small numbers is apparently more commutative than adding pre-computed sums of those numbers.
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Lightly instrumenting some cells with
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;{%v3f} {%v3x} =&gt; {%v3f} {%v3x} * %d [%v3d]&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;center&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;asuint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;asuint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newcenter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;        &lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
yields
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-plaintext&quot;&gt;&lt;code class=&quot;language-plaintext&quot;&gt;{0.447506249, -0.000645289, 0.023140611} {3ee51f8a, ba2928a2, 3cbd9161} =&gt; {0.447506309, -0.000645289, 0.023140611} {3ee51f8c, ba2928a2, 3cbd9161} * 266? {0, 1, 1}
{0.447506309, -0.000645289, 0.023140611} {3ee51f8c, ba2928a2, 3cbd9161} =&gt; {0.447506249, -0.000645289, 0.023140611} {3ee51f8a, ba2928a2, 3cbd9161} * 266? {0, 1, 1}
{0.447506249, -0.000645289, 0.023140611} {3ee51f8a, ba2928a2, 3cbd9161} =&gt; {0.447506309, -0.000645289, 0.023140611} {3ee51f8c, ba2928a2, 3cbd9161} * 266? {0, 1, 1}
{0.447506309, -0.000645289, 0.023140611} {3ee51f8c, ba2928a2, 3cbd9161} =&gt; {0.447506249, -0.000645289, 0.023140611} {3ee51f8a, ba2928a2, 3cbd9161} * 266? {0, 1, 1}
{0.447506249, -0.000645289, 0.023140611} {3ee51f8a, ba2928a2, 3cbd9161} =&gt; {0.447506309, -0.000645289, 0.023140611} {3ee51f8c, ba2928a2, 3cbd9161} * 266? {0, 1, 1}
{0.447506309, -0.000645289, 0.023140611} {3ee51f8c, ba2928a2, 3cbd9161} =&gt; {0.447506249, -0.000645289, 0.023140611} {3ee51f8a, ba2928a2, 3cbd9161} * 266? {0, 1, 1}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
where we observe a &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt;-long cycle, where &lt;code&gt;center.l == nextafter(nextafter(newcenter.l))&lt;/code&gt; (2 ULPs off) and v.v..
This can be mitigated by upgrading the [​[​f​]​] condition:
&lt;/p&gt;
&lt;div class=&quot;mathnospace real&quot;&gt;
[​![​
\begin{align}
&lt;!--&quot;--&gt;f(c) &amp;= p^{-1}(q_t)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;\text{with}\ &amp;q_0=p(c)\\&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;\text{find}\ &amp;t=\text{the first iteration}\in \mathbb{N}_+\ \text{where}\ q_t = q_{t-1}\\&lt;!--&quot;--&gt;
&amp;\Leftrightarrow\\
&lt;!--&quot;--&gt;\text{find}\ &amp;t=\text{the first iteration}\in \mathbb{N}_+\ \text{where}\ q_t = q_{t-1} \vee q_t = q_{t-2}\\&lt;!--&quot;--&gt;
 \end{align}
​]!​]
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/e50f3e3f42fde2687e377ff5cd29f54231570962/item/src/msc_grid.kernel.hlsl.inc#L80&quot;&gt;codified&lt;/a&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/2bba342dce8e6c0fe21aa9db2ca0b0cfbd713a1d/item/src/posterise_grid_oneshot.kernel.hlsl.inc#L83&quot;&gt;as&lt;/a&gt;
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; prevcenter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; prevcenter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;prevcenter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;
&lt;small&gt;
(FTR I know this is real from &lt;a href=&quot;//101010.pl/@nabijaczleweli/114095551519019507&quot;&gt;posting&lt;/a&gt; and &lt;span id=&quot;irc&quot;&gt;IRC&lt;/span&gt; logs,
 but I couldn't&lt;!--'--&gt; re-trigger it when writing the post.)
&lt;/small&gt;
&lt;/p&gt;
&lt;script&gt;
{
 let ircs = [&quot;IRC&quot;, &quot;Discord&quot;, &quot;ICQ&quot;, &quot;AIM&quot;, &quot;Messenger&quot;];
 irc.innerText = ircs[Math.floor(Math.random() * ircs.length)];
}
&lt;/script&gt;
&lt;p class=&quot;indented continued&quot;&gt;
These speed-ups can be paid into
&lt;/p&gt;
&lt;h2 id=&quot;occupancy&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#occupancy&quot;&gt;#&lt;/a&gt; re-tuning the piece-meal iteration count&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
since more than &lt;a href=&quot;#oneshot&quot;&gt;previously&lt;/a&gt; can be done without exceeding &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8s&lt;/span&gt;;
a doubling of
[​[​l \mapsto \begin{cases}10 &amp;\text{if}\ l \in [100'000,  \infty&lt;!--'--&gt; )\\20 &amp;\text{if}\ l \in [ 10'000, 100'000 )\\\infty &amp;\text{if}\ l \in [ 0, 10'000&lt;!--'--&gt; )\\\end{cases}​]​]
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/b16eb919c0582eb2df27e100237719073845b150/item/src/posterise_gpu.rs#L897&quot;&gt;seems reasonable&lt;/a&gt;:
&lt;/p&gt;
&lt;!--
3.058283944s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.044477119s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.042544303s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.05445725s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.041298522s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.046635426s: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
32.610714801s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
31.531525467s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
31.197283129s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
31.587192879s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
32.615022057s: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
39.492659342s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
39.472536074s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
39.532669521s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
38.546530076s: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
23.282637675s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
21.294352903s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
21.202300362s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
19.246066901s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
19.262675902s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
20.270337438s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
20.253000046s: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
3.245009482s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.252986161s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.279183779s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.272177584s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
3.271363162s: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
22.493070175s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
20.640387143s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
21.581486194s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
19.691003815s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
21.631612947s: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
29.166961182s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
29.112269386s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
30.064487793s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
30.14274498s: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
12.244885115s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
11.161871201s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
11.174508313s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
11.157223143s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
11.210518531s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
11.166963295s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
12.189313091s: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
Benchmark 1: MSC 84860 RGBs @ r=0.02 =&gt; ~245 levels
  Time (mean ± σ): 3047.949427 ms ± 6.276775 ms
  Range (min … max): 3041.298522 ms … 3058.283944 ms 6 runs
Benchmark 3: MSC 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 31908.347667 ms ± 590.500877 ms
  Range (min … max): 31197.283129 ms … 32615.022057 ms 5 runs
Benchmark 4: MSC 328666 RGBs @ r=0.02 =&gt; ~221 levels
  Time (mean ± σ): 39261.098753 ms ± 413.123808 ms
  Range (min … max): 38546.530076 ms … 39532.669521 ms 4 runs
Benchmark 2: MSC 1103347 RGBs @ r=0.02 =&gt; ~11375 levels
  Time (mean ± σ): 20687.338747 ms ± 1300.477777 ms
  Range (min … max): 19246.066901 ms … 23282.637675 ms 7 runs
Benchmark 1: MSC 84860 RGBs @ r=0.02 * freq =&gt; ~240 levels
  Time (mean ± σ): 3264.144034 ms ± 12.911056 ms
  Range (min … max): 3245.009482 ms … 3279.183779 ms 5 runs
Benchmark 3: MSC 242931 RGBs @ r=0.02 * freq =&gt; ~152 levels
  Time (mean ± σ): 21207.512055 ms ± 958.520298 ms
  Range (min … max): 19691.003815 ms … 22493.070175 ms 5 runs
Benchmark 4: MSC 328666 RGBs @ r=0.02 * freq =&gt; ~132 levels
  Time (mean ± σ): 29621.615835 ms ± 483.181078 ms
  Range (min … max): 29112.269386 ms … 30142.744980 ms 4 runs
Benchmark 2: MSC 1103347 RGBs @ r=0.02 * freq =&gt; ~8013 levels
  Time (mean ± σ): 11472.183241 ms ± 471.634670 ms
  Range (min … max): 11157.223143 ms … 12244.885115 ms 7 runs
--&gt;
&lt;table class=&quot;perf continuation&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.048s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;31.908s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.3ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;591ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.98%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-7.71%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.264s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;21.208s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12.9ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;959ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.06%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-10.20%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​palette​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;39.261s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20.687s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;413ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1300ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-2.89%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8.62%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​*freq​]​] &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;29.622s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.472s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;483ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;471ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.30%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.46%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;
Kind of a wash.
&lt;/p&gt;
&lt;h2 id=&quot;grid-size-again&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#grid-size-again&quot;&gt;#&lt;/a&gt; Grid size re-evaluation&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
is also &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/commit/614a5917d24da452c02b50c3c54ab9f08c93e0ce&quot;&gt;natural&lt;/a&gt;:
&lt;/p&gt;
&lt;!--
65.782173ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
62.470153ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
61.51597ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
62.694135ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
62.752696ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
62.08679ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.953707ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.790099ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
56.948511ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.33127ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.94103ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.877337ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
58.36605ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.929861ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.474051ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
58.380237ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
56.288642ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.940728ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.131438ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
58.291792ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
57.506651ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
56.799391ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
56.309772ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
56.885119ms: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
722.864046ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
726.463136ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
729.837339ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
899.693068ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
734.749223ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
736.048735ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
741.19124ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
730.226136ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
733.486538ms: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
11.206429823s: MSC G=64 84860 RGBs @ r=0.02 =&gt; ~248 levels TIMEOUT
38.366432503s: MSC G=64 242931 RGBs @ r=0.02 =&gt; ~155 levels
36.552790072s: MSC G=64 242931 RGBs @ r=0.02 =&gt; ~155 levels
38.556152805s: MSC G=64 242931 RGBs @ r=0.02 =&gt; ~155 levels
36.473751065s: MSC G=64 242931 RGBs @ r=0.02 =&gt; ~155 levels
37.611333012s: MSC G=64 242931 RGBs @ r=0.02 =&gt; ~155 levels
44.704895462s: MSC G=64 328666 RGBs @ r=0.02 =&gt; ~222 levels
45.693243624s: MSC G=64 328666 RGBs @ r=0.02 =&gt; ~222 levels
45.737871071s: MSC G=64 328666 RGBs @ r=0.02 =&gt; ~222 levels
45.847879215s: MSC G=64 328666 RGBs @ r=0.02 =&gt; ~222 levels
27.337211746s: MSC G=64 1103347 RGBs @ r=0.02 =&gt; ~11381 levels
27.221135892s: MSC G=64 1103347 RGBs @ r=0.02 =&gt; ~11381 levels
28.312476644s: MSC G=64 1103347 RGBs @ r=0.02 =&gt; ~11381 levels
69.806888ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
67.930821ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
68.047037ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
62.953434ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
64.778485ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
63.220278ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
63.698426ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
63.653147ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
65.110532ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
64.932133ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
63.732838ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
64.692757ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
63.124286ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
64.205854ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
64.296715ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
63.045199ms: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
850.104836ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.184158511s: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.84074835s: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
822.679246ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
836.30254ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
834.953221ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
822.574199ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
835.388505ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
864.622544ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
838.146911ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
814.923228ms: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.980357294s: MSC G=80 84860 RGBs @ r=0.02 =&gt; ~245 levels
2.994957109s: MSC G=80 84860 RGBs @ r=0.02 =&gt; ~245 levels
2.972965018s: MSC G=80 84860 RGBs @ r=0.02 =&gt; ~245 levels
2.9724268s: MSC G=80 84860 RGBs @ r=0.02 =&gt; ~245 levels
2.996235188s: MSC G=80 84860 RGBs @ r=0.02 =&gt; ~245 levels
2.977727783s: MSC G=80 84860 RGBs @ r=0.02 =&gt; ~245 levels
2.984694133s: MSC G=80 84860 RGBs @ r=0.02 =&gt; ~245 levels
33.574866985s: MSC G=80 242931 RGBs @ r=0.02 =&gt; ~155 levels
33.334512503s: MSC G=80 242931 RGBs @ r=0.02 =&gt; ~155 levels
35.284970759s: MSC G=80 242931 RGBs @ r=0.02 =&gt; ~155 levels
33.234214325s: MSC G=80 242931 RGBs @ r=0.02 =&gt; ~155 levels
33.438162245s: MSC G=80 242931 RGBs @ r=0.02 =&gt; ~155 levels
35.313871242s: MSC G=80 242931 RGBs @ r=0.02 =&gt; ~155 levels
42.493670879s: MSC G=80 328666 RGBs @ r=0.02 =&gt; ~222 levels
40.619206757s: MSC G=80 328666 RGBs @ r=0.02 =&gt; ~222 levels
41.602774043s: MSC G=80 328666 RGBs @ r=0.02 =&gt; ~222 levels
42.530259461s: MSC G=80 328666 RGBs @ r=0.02 =&gt; ~222 levels
42.550288851s: MSC G=80 328666 RGBs @ r=0.02 =&gt; ~222 levels
23.381726899s: MSC G=80 1103347 RGBs @ r=0.02 =&gt; ~11385 levels
25.280455219s: MSC G=80 1103347 RGBs @ r=0.02 =&gt; ~11385 levels
24.307193773s: MSC G=80 1103347 RGBs @ r=0.02 =&gt; ~11385 levels
23.409657804s: MSC G=80 1103347 RGBs @ r=0.02 =&gt; ~11385 levels
23.292847824s: MSC G=80 1103347 RGBs @ r=0.02 =&gt; ~11385 levels
71.005577ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
65.952121ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
66.202364ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
65.170301ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
66.186667ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
70.89238ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
65.727838ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
66.266358ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
65.022992ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
66.375028ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
69.010879ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
65.223731ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
64.717509ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
65.99408ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
64.008136ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
70.857364ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
65.933708ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
66.443853ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
64.893495ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
65.793644ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
69.123172ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
66.276018ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
64.659552ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
64.986468ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
66.520827ms: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
862.18743ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
872.958437ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
873.352669ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
864.964553ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
873.100916ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
868.787322ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
872.655068ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
864.506025ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
879.547462ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
866.320513ms: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.986034698s: MSC G=90 84860 RGBs @ r=0.02 =&gt; ~244 levels
2.980381444s: MSC G=90 84860 RGBs @ r=0.02 =&gt; ~244 levels
2.999336207s: MSC G=90 84860 RGBs @ r=0.02 =&gt; ~244 levels
3.030576416s: MSC G=90 84860 RGBs @ r=0.02 =&gt; ~244 levels
3.003408314s: MSC G=90 84860 RGBs @ r=0.02 =&gt; ~244 levels
32.299713051s: MSC G=90 242931 RGBs @ r=0.02 =&gt; ~155 levels
32.478436553s: MSC G=90 242931 RGBs @ r=0.02 =&gt; ~155 levels
32.556860367s: MSC G=90 242931 RGBs @ r=0.02 =&gt; ~155 levels
32.363975655s: MSC G=90 242931 RGBs @ r=0.02 =&gt; ~155 levels
32.51725106s: MSC G=90 242931 RGBs @ r=0.02 =&gt; ~155 levels
40.858824094s: MSC G=90 328666 RGBs @ r=0.02 =&gt; ~221 levels
40.91496573s: MSC G=90 328666 RGBs @ r=0.02 =&gt; ~221 levels
40.876432557s: MSC G=90 328666 RGBs @ r=0.02 =&gt; ~221 levels
40.812335674s: MSC G=90 328666 RGBs @ r=0.02 =&gt; ~221 levels
41.897390169s: MSC G=90 328666 RGBs @ r=0.02 =&gt; ~221 levels
30.203892982s: MSC G=90 1103347 RGBs @ r=0.02 =&gt; ~11379 levels TIMEOUT
88.024808ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
81.192786ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
80.487337ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
78.807781ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
79.762267ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
82.879888ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
80.271506ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
78.499581ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
79.406975ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
79.813885ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
82.188022ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
78.959919ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
79.613449ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
80.172797ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
78.819555ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
84.223472ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
79.779472ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
80.376554ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
78.252055ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
79.612241ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
82.85604ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
97.555468ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
78.750729ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
79.630655ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
80.515107ms: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
1.117228963s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.102089422s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.100203696s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.09234112s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.113529354s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.091556583s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.107744186s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.100821303s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.083556358s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.093059549s: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
3.130342715s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.109101957s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.114374565s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.124032913s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.122940779s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.129574479s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.111784596s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.135041786s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.122139941s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
3.121148328s: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
30.809998665s: MSC G=110 242931 RGBs @ r=0.02 =&gt; ~155 levels
31.961808534s: MSC G=110 242931 RGBs @ r=0.02 =&gt; ~155 levels
30.873064392s: MSC G=110 242931 RGBs @ r=0.02 =&gt; ~155 levels
29.865479829s: MSC G=110 242931 RGBs @ r=0.02 =&gt; ~155 levels
32.22171154s: MSC G=110 242931 RGBs @ r=0.02 =&gt; ~155 levels
37.94857585s: MSC G=110 328666 RGBs @ r=0.02 =&gt; ~221 levels
37.964660216s: MSC G=110 328666 RGBs @ r=0.02 =&gt; ~221 levels
36.941169687s: MSC G=110 328666 RGBs @ r=0.02 =&gt; ~221 levels
38.975116383s: MSC G=110 328666 RGBs @ r=0.02 =&gt; ~221 levels
38.91066602s: MSC G=110 328666 RGBs @ r=0.02 =&gt; ~221 levels
19.490539975s: MSC G=110 1103347 RGBs @ r=0.02 =&gt; ~11383 levels
18.500293107s: MSC G=110 1103347 RGBs @ r=0.02 =&gt; ~11383 levels
20.459719052s: MSC G=110 1103347 RGBs @ r=0.02 =&gt; ~11383 levels
19.541386665s: MSC G=110 1103347 RGBs @ r=0.02 =&gt; ~11383 levels
18.512882224s: MSC G=110 1103347 RGBs @ r=0.02 =&gt; ~11383 levels
100.324743ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.411349ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.530282ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
93.862802ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.506133ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
98.820568ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.087452ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
94.102781ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.264041ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.424631ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
99.455986ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.021948ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.703551ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
93.616182ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
95.143599ms: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
1.342878886s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.349893534s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.347683609s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.3578195s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.317340531s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.478834103s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.35231627s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.322643929s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
2.351722208s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
1.358099929s: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
3.860250992s: MSC G=128 84860 RGBs @ r=0.02 =&gt; ~246 levels
3.881047711s: MSC G=128 84860 RGBs @ r=0.02 =&gt; ~246 levels
3.845650272s: MSC G=128 84860 RGBs @ r=0.02 =&gt; ~246 levels
3.882151919s: MSC G=128 84860 RGBs @ r=0.02 =&gt; ~246 levels
3.878850767s: MSC G=128 84860 RGBs @ r=0.02 =&gt; ~246 levels
35.055712389s: MSC G=128 242931 RGBs @ r=0.02 =&gt; ~155 levels
35.439754563s: MSC G=128 242931 RGBs @ r=0.02 =&gt; ~155 levels
35.886529208s: MSC G=128 242931 RGBs @ r=0.02 =&gt; ~155 levels
35.352819775s: MSC G=128 242931 RGBs @ r=0.02 =&gt; ~155 levels
36.167358734s: MSC G=128 242931 RGBs @ r=0.02 =&gt; ~155 levels
43.977408414s: MSC G=128 328666 RGBs @ r=0.02 =&gt; ~222 levels
43.901172791s: MSC G=128 328666 RGBs @ r=0.02 =&gt; ~222 levels
45.981204619s: MSC G=128 328666 RGBs @ r=0.02 =&gt; ~222 levels
43.926094141s: MSC G=128 328666 RGBs @ r=0.02 =&gt; ~222 levels
44.919208689s: MSC G=128 328666 RGBs @ r=0.02 =&gt; ~222 levels
30.962086548s: MSC G=128 1103347 RGBs @ r=0.02 =&gt; ~11385 levels TIMEOUT
Benchmark 1: MSC G=64 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 58.851983 ms ± 2.487842 ms
  Range (min … max): 56.288642 ms … 65.782173 ms 24 runs
Benchmark 3: MSC G=64 84860 RGBs @ r=0.02 =&gt; ~248 levels TIMEOUT
  Time (mean ± σ): 11206.429823 ms ± 0.000000 ns
  Range (min … max): 11206.429823 ms … 11206.429823 ms 1 run
Benchmark 5: MSC G=64 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 37512.091891 ms ± 875.011031 ms
  Range (min … max): 36473.751065 ms … 38556.152805 ms 5 runs
Benchmark 2: MSC G=64 27868 RGBs @ r=0.02 =&gt; ~375 levels
  Time (mean ± σ): 750.506607 ms ± 52.989622 ms
  Range (min … max): 722.864046 ms … 899.693068 ms 9 runs
Benchmark 6: MSC G=64 328666 RGBs @ r=0.02 =&gt; ~222 levels
  Time (mean ± σ): 45495.972343 ms ± 460.182581 ms
  Range (min … max): 44704.895462 ms … 45847.879215 ms 4 runs
Benchmark 4: MSC G=64 1103347 RGBs @ r=0.02 =&gt; ~11381 levels
  Time (mean ± σ): 27623.608094 ms ± 489.403249 ms
  Range (min … max): 27221.135892 ms … 28312.476644 ms 3 runs
Benchmark 1: MSC G=80 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 64.826802 ms ± 1.962064 ms
  Range (min … max): 62.953434 ms … 69.806888 ms 16 runs
Benchmark 3: MSC G=80 84860 RGBs @ r=0.02 =&gt; ~245 levels
  Time (mean ± σ): 2982.766189 ms ± 9.007169 ms
  Range (min … max): 2972.426800 ms … 2996.235188 ms 7 runs
Benchmark 5: MSC G=80 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 34030.099677 ms ± 903.481470 ms
  Range (min … max): 33234.214325 ms … 35313.871242 ms 6 runs
Benchmark 2: MSC G=80 27868 RGBs @ r=0.02 =&gt; ~375 levels
  Time (mean ± σ): 958.600190 ms ± 296.528554 ms
  Range (min … max): 814.923228 ms … 1840.748350 ms 11 runs
Benchmark 6: MSC G=80 328666 RGBs @ r=0.02 =&gt; ~222 levels
  Time (mean ± σ): 41959.239998 ms ± 759.443929 ms
  Range (min … max): 40619.206757 ms … 42550.288851 ms 5 runs
Benchmark 4: MSC G=80 1103347 RGBs @ r=0.02 =&gt; ~11385 levels
  Time (mean ± σ): 23934.376304 ms ± 767.232816 ms
  Range (min … max): 23292.847824 ms … 25280.455219 ms 5 runs
Benchmark 1: MSC G=90 16755 RGBs @ r=0.02 =&gt; ~372 levels
  Time (mean ± σ): 66.529762 ms ± 1.972308 ms
  Range (min … max): 64.008136 ms … 71.005577 ms 25 runs
Benchmark 3: MSC G=90 84860 RGBs @ r=0.02 =&gt; ~244 levels
  Time (mean ± σ): 2999.947416 ms ± 17.474999 ms
  Range (min … max): 2980.381444 ms … 3030.576416 ms 5 runs
Benchmark 5: MSC G=90 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 32443.247337 ms ± 96.445677 ms
  Range (min … max): 32299.713051 ms … 32556.860367 ms 5 runs
Benchmark 2: MSC G=90 27868 RGBs @ r=0.02 =&gt; ~375 levels
  Time (mean ± σ): 869.838039 ms ± 5.090525 ms
  Range (min … max): 862.187430 ms … 879.547462 ms 10 runs
Benchmark 6: MSC G=90 328666 RGBs @ r=0.02 =&gt; ~221 levels
  Time (mean ± σ): 41071.989645 ms ± 414.015663 ms
  Range (min … max): 40812.335674 ms … 41897.390169 ms 5 runs
Benchmark 4: MSC G=90 1103347 RGBs @ r=0.02 =&gt; ~11379 levels TIMEOUT
  Time (mean ± σ): 30203.892982 ms ± 0.000000 ns
  Range (min … max): 30203.892982 ms … 30203.892982 ms 1 run
Benchmark 1: MSC G=110 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 81.218094 ms ± 3.941759 ms
  Range (min … max): 78.252055 ms … 97.555468 ms 25 runs
Benchmark 3: MSC G=110 84860 RGBs @ r=0.02 =&gt; ~245 levels
  Time (mean ± σ): 3122.048206 ms ± 7.947720 ms
  Range (min … max): 3109.101957 ms … 3135.041786 ms 10 runs
Benchmark 5: MSC G=110 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 31146.412592 ms ± 854.379387 ms
  Range (min … max): 29865.479829 ms … 32221.711540 ms 5 runs
Benchmark 2: MSC G=110 27868 RGBs @ r=0.02 =&gt; ~375 levels
  Time (mean ± σ): 1500.213053 ms ± 487.433211 ms
  Range (min … max): 1083.556358 ms … 2102.089422 ms 10 runs
Benchmark 6: MSC G=110 328666 RGBs @ r=0.02 =&gt; ~221 levels
  Time (mean ± σ): 38148.037631 ms ± 747.743784 ms
  Range (min … max): 36941.169687 ms … 38975.116383 ms 5 runs
Benchmark 4: MSC G=110 1103347 RGBs @ r=0.02 =&gt; ~11383 levels
  Time (mean ± σ): 19300.964205 ms ± 734.656674 ms
  Range (min … max): 18500.293107 ms … 20459.719052 ms 5 runs
Benchmark 1: MSC G=128 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 95.885070 ms ± 1.941627 ms
  Range (min … max): 93.616182 ms … 100.324743 ms 15 runs
Benchmark 3: MSC G=128 84860 RGBs @ r=0.02 =&gt; ~246 levels
  Time (mean ± σ): 3869.590332 ms ± 14.388679 ms
  Range (min … max): 3845.650272 ms … 3882.151919 ms 5 runs
Benchmark 5: MSC G=128 242931 RGBs @ r=0.02 =&gt; ~155 levels
  Time (mean ± σ): 35580.434934 ms ± 396.259165 ms
  Range (min … max): 35055.712389 ms … 36167.358734 ms 5 runs
Benchmark 2: MSC G=128 27868 RGBs @ r=0.02 =&gt; ~375 levels
  Time (mean ± σ): 1757.923250 ms ± 478.823125 ms
  Range (min … max): 1322.643929 ms … 2352.316270 ms 10 runs
Benchmark 6: MSC G=128 328666 RGBs @ r=0.02 =&gt; ~222 levels
  Time (mean ± σ): 44541.017731 ms ± 815.150870 ms
  Range (min … max): 43901.172791 ms … 45981.204619 ms 5 runs
Benchmark 4: MSC G=128 1103347 RGBs @ r=0.02 =&gt; ~11385 levels TIMEOUT
  Time (mean ± σ): 30962.086548 ms ± 0.000000 ns
  Range (min … max): 30962.086548 ms … 30962.086548 ms 1 run
--&gt;
&lt;table class=&quot;perf continuation&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 64​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;58.852ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;!&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;37.512s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.49ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;875ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 80​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64.827ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.983s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;34.030s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.96ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9.01ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;903ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 90​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;66.530ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.000s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32.443s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.97ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;17.5ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;96.4ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 100​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;68.781ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.242s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;29.624s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;968µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.8ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;190ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 110​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;81.218ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.122s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;31.146s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.94ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7.95ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;854ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 128​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;95.885ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.870s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;35.580s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.94ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;14.39ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;396ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 64​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;750.507ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;45.496s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;27.624s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;52.99ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;460ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;489ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 80​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;958.600ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;41.959s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;23.934s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;296ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;759ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;767ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 90​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;869.838ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;41.072s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;!&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.09ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;414ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 100​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.154s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;38.160s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;22.638s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;253ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;394ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1198ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 110​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.500s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;38.148s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;19.301s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;487ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;748ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;735ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, [​[​G = 128​]​]&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.758s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;44.541s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;!&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;479ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;815ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tfoot class=&quot;slowdown-didnt&quot;&gt;&lt;tr&gt;&lt;td colspan=5&gt;&lt;strong&gt;!&lt;/strong&gt;: timed out&lt;/td&gt;&lt;/tfoot&gt;
&lt;/table&gt;
&lt;p&gt;
[​[​G = 100​]​] stays winning.
&lt;/p&gt;
&lt;h2 id=&quot;gxyz-unnest&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#gxyz-unnest&quot;&gt;#&lt;/a&gt; Failure: un-nesting iteration of points-in-cell from iteration of cells-in-bounding-box&lt;/h2&gt;
&lt;!-- https://discord.com/channels/145079846832308224/150317232239542272/1345280142754189463 --&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;date&gt;[07:23]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: have you considered doing the rejig of the logic I mentioned above, splitting the looking for next shell cell and iterating a shell cell instead of one nested in the other?
&lt;hr /&gt;&lt;date&gt;[20:50]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: i don't really see how this is different&lt;!--'--&gt;
&lt;date&gt;[20:51]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: or, rather, this seems to me like it's exactly the same loop but with two gotos except with the state spilled&lt;!--'--&gt;
&lt;hr /&gt;&lt;date&gt;[21:02]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: it is the same loop but it means that in a warp if one thread is ready to iterate a set of points the rest doesn't have to wait until it's done to continue to the next set

instead all threads will continue until they find a cell they need to iterate over and then they together fall into the iteration logic
&lt;date&gt;[21:17]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: summerized the most expensive operation in your compute shader is iterating points,

so lets make sure that as much as possible no threads in a warp are set to idle when another is iterating their cell
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
In matters of taste, ye ask and
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/84d60233ed7fde570420392a388d7f7a8dd087cc/item/src/posterise_grid.kernel.hlsl.inc#L38&quot;&gt;ye shall receive&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; gridpos_f&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;lab_to_gridpos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos&lt;!--&quot;--&gt;      &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;trunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos_f&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_from &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos_to&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; grid_bothdirs&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; GRID_SIZE &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; newcenter_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; range &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_to &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; gridpos_from &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; need_to_see &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; seen &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gxyz&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seen &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; need_to_see&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;seen &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; acc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; seen&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;gxyz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; acc &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;acc &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; acc &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;acc &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; acc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool3&lt;/span&gt; gxyz_same &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gxyz &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool2&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;corners_inrange &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; corners_squared &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; radiussy_squared&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;any&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;corners_inrange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;corners_inrange&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupsum_t&lt;/span&gt; sums &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;SUMS_FIELD&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;newcenter_count &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; sums&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;freqsum&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;newcenter&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; sums&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;labsum&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;iter&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;groupdesc_t&lt;/span&gt; group &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;gxyz&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;end_idx&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;start_idx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; newcenter_count&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newcenter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;center &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newcenter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pack_r_g_b_to_rgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;oklab_to_linear_srgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continued&quot;&gt;
This is significantly worse than &lt;code&gt;for(uint gx = gridpos_from.x; gx &amp;lt;= gridpos_to.x; ++gx)&lt;/code&gt; &amp;c.:
&lt;/p&gt;
&lt;!--
400.784899ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
398.646213ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
398.180743ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
398.209119ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
394.683985ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
398.621461ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
394.198592ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
394.333826ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
395.003353ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
398.233569ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
398.376349ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
397.95948ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
398.324429ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
394.419856ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
394.127353ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
398.286395ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ± σ): 397.024351 ms ± 2.083761 ms
  Range (min … max): 394.127353 ms … 400.784899 ms 16 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;397.024ms&lt;/span&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;math class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mi&gt;1&lt;/mi&gt;&lt;mi&gt;5.772&lt;/mi&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;×&lt;/span&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;math class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mi&gt;1&lt;/mi&gt;&lt;mi&gt;3.070&lt;/mi&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;×&lt;/span&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;/table&gt;
&lt;blockquote class=&quot;continuing codecontinued&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;date&gt;[21:52]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: ah, was worth a shot...
&lt;date&gt;[21:53]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: no for sure
&lt;date&gt;[21:55]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: seen = dot(gxyz, uint3(10000, 100, 1))
&lt;date&gt;[21:56]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: hm yeah i suppose but only the inverse is of interest right
&lt;date&gt;[21:59]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: keeping gxyz and bumping .z and propagating overflow had more branches in it when i wrote it
&lt;date&gt;[21:59]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: but maybe im not branchlesspilled enough
&lt;date&gt;[22:02]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: hmm
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;[diff for below]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;date&gt;[22:04]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: zamn
&lt;date&gt;[22:06]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: only 1 branch and it's&lt;!--'--&gt; the branch you want to happen
&lt;date&gt;[22:08]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: bonus it also avoid the idiv that's&lt;!--'--&gt; typically pretty expensive
&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/c2052178ae42cc852fa2440d77a60000882b6585/item/src/posterise_grid.kernel.hlsl.inc#L36&quot;&gt;and indeed&lt;/a&gt;
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; newcenter_count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; newcenter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; seen &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gxyz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gridpos_from &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; iter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool3&lt;/span&gt; wrap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gxyz &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; gridpos_to&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;all&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;wrap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; wrapz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; wrap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt; wrapy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; wrap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; wrap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;bool3&lt;/span&gt; nil &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; wrapy&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; wrapz&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;gxyz &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; nil &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; gridpos_from &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gxyz &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;wrapy&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; wrapz&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool3&lt;/span&gt; gxyz_same &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; gxyz &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; gridpos&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
266.977724ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.709842ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.150192ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.797986ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.602078ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.835718ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.073821ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.133589ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.663054ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
260.175587ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
259.853802ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
261.156937ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
261.32296ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
261.687307ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
260.982159ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
264.419753ms: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
Benchmark 1: MSC 16755 RGBs @ r=0.02 =&gt; ~373 levels
  Time (mean ┬▒ ¤â): 263.283907 ms ┬▒ 2.016309 ms
  Range (min ÔÇª max): 259.853802 ms ÔÇª 266.977724 ms 16 runs
--&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;, [​[​palette​]​]&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;397.024ms&lt;/span&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs above) &lt;/th&gt; &lt;td&gt; &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;50.80%&lt;/span&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs previous) &lt;/th&gt; &lt;td&gt;&lt;math class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mi&gt;1&lt;/mi&gt;&lt;mi&gt;3.828&lt;/mi&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;×&lt;/span&gt;&lt;/td&gt; &lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs base-line)&lt;/th&gt; &lt;td&gt;&lt;math class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;mrow&gt;&lt;mfrac&gt;&lt;mi&gt;1&lt;/mi&gt;&lt;mi&gt;2.036&lt;/mi&gt;&lt;/mfrac&gt;&lt;/mrow&gt;&lt;/math&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;×&lt;/span&gt;&lt;/td&gt; &lt;/tr&gt;
&lt;/table&gt;
&lt;blockquote class=&quot;continuing codecontinued&quot;&gt;&lt;date&gt;[22:25]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: also funny, too me, that you've&lt;!--'--&gt; reimplemented wrapping addition combinatorially to solve what is otherwise a very mundane problem
&lt;date&gt;[22:26]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: wrapping addition with carry lookahead
&lt;/blockquote&gt;
&lt;h2 id=&quot;gxyz-xyz&quot; class=&quot;continued&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#gxyz-xyz&quot;&gt;#&lt;/a&gt; Failure: [​[​l&amp;lt;a&amp;lt;b​]​]&lt;/h2&gt;
&lt;!--
https://discord.com/channels/145079846832308224/150317232239542272/1344307267536818267
https://discord.com/channels/145079846832308224/150317232239542272/1345832062019571764
--&gt;
&lt;blockquote class=&quot;continuing&quot;&gt;&lt;date&gt;[14:54]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: for example a very flat in the z-axis data set (max_z - min_z &lt; radius) will have a gr_z == 100 and always iterate the full depth of the grid on each particle
&lt;hr /&gt;&lt;date&gt;[14:55]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: this will always be the case
&lt;date&gt;[14:56]&lt;/date&gt; &lt;strong style=&quot;color: rgb(228, 85, 182);&quot;&gt;((наб *)(войд)())()&lt;/strong&gt;: if you need to look at the whole z-axis then you need to look at the whole z-axis
&lt;hr /&gt;&lt;date&gt;[14:56]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: but if it's&lt;!--'--&gt; flat in the x axis it will need to deal with 2 more inner loops
&lt;date&gt;[14:57]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: so a rotation of the data set might be in order so the flattest axis is always z
&lt;date&gt;[14:57]&lt;/date&gt; &lt;strong style=&quot;color: rgb(46, 204, 113);&quot;&gt;ratchetfreak&lt;/strong&gt;: that way the longest inner loop is inside&lt;/blockquote&gt;
&lt;p class=&quot;continuing&quot;&gt;
so, &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/sorted-coords/item/src/posterise_gpu.rs#L703&quot;&gt;obtusely&lt;/a&gt;
(there &lt;em&gt;has&lt;/em&gt; to be a better, perhaps even canonical, way of expressing this):
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...find_bbox.hlsl&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; bbox_min &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;become_float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; bbox_range &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; bbox_max &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;become_float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_max&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// Sort coordinates so the bounding box ranges are x&gt;y&gt;z&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// such that the grid radiussy bounding prism is x&amp;lt;y&amp;lt;z such that the innermost loop is the hottest&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;swaps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; unswaps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bbox_min&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;swaps&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bbox_min&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;swaps&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;unswaps&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; swaps&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;unswaps&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;axis_swaps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;swaps&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;swaps&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;!--&quot;--&gt;  &lt;!--&quot;--&gt;swaps&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	                                  &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unswaps&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unswaps&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unswaps&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// assign_cell.hlsl...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/sorted-coords/item/src/shader.h#L20&quot;&gt;where&lt;/a&gt;
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;params_t&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token class-name&quot;&gt;point_t&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;axis_swaps&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;bbox_max&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;bbox_range&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
such that
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/sorted-coords/item/src/assign_cell.hlsl#L25&quot;&gt;&lt;samp&gt;assign_cell.hlsl&lt;/samp&gt;&lt;/a&gt;
can rotate the axes:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;known_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_min&lt;!--&quot;--&gt;       &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; bbox_range&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_range&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt;&lt;!--&quot;--&gt;   &lt;!--&quot;--&gt;axis_swaps&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;axis_swaps &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;TWOBITS&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt; lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;axis_swaps &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	             &lt;!--&quot;--&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;axis_swaps &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; TWOBITS&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	             &lt;!--&quot;--&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;axis_swaps &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; TWOBITS&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; gridpos &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;trunc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lab_to_gridpos&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_min&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bbox_range&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;
&lt;!--&quot;--&gt;	              &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gridpos&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
and
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/sorted-coords/item/src/posterise_grid.kernel.hlsl.inc#L87&quot;&gt;&lt;samp&gt;posterise_grid.kernel.hlsl.inc&lt;/samp&gt;&lt;/a&gt;/&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/sorted-coords/item/src/posterise_grid_oneshot.kernel.hlsl.inc#L86&quot;&gt;&lt;samp&gt;posterise_grid_oneshot.kernel.hlsl.inc&lt;/samp&gt;&lt;/a&gt;
can unrotate them when uploading &lt;samp&gt;outputs&lt;/samp&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;span class=&quot;token macro property&quot;&gt;&lt;span class=&quot;token directive keyword&quot;&gt;#define&lt;/span&gt; &lt;span class=&quot;token macro-name&quot;&gt;TWOBITS&lt;/span&gt; &lt;span class=&quot;token expression&quot;&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
outputs&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rgb&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;pack_r_g_b_to_rgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;oklab_to_linear_srgb&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;float3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;center&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;axis_unswaps &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		   &lt;!--&quot;--&gt;center&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;axis_unswaps &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; TWOBITS&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;		   &lt;!--&quot;--&gt;center&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;axis_unswaps &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; TWOBITS&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
since everything else is [​[​P​]​]-agnostic.
&lt;/p&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, natural &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;68.781ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.242s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;29.624s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;968µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.8ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;190ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;l&amp;lt;a&amp;lt;b&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;69.741ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.057s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32.232s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.17ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.1ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;780ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;l&amp;gt;a&amp;gt;b&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;71.622ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.143s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;34.152s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.06ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7.73ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.061s&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, natural &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.154s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;38.160s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;22.638s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;253ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;394ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1198ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;l&amp;lt;a&amp;lt;b&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.374s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;39.296s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20.306s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;487ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;819ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;641ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;l&amp;gt;a&amp;gt;b&lt;/span&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.401s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;39.200s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20.292s&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;487ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;827ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;768ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Pretty much every operation that could be parallelised so far has been so how's&lt;!--'--&gt; about
&lt;/p&gt;
&lt;h2 id=&quot;groups_accumulator-mutex&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#groups_accumulator-mutex&quot;&gt;#&lt;/a&gt; parallelising is points-in-cell &lt;samp&gt;assign_cell.hlsl&lt;/samp&gt; &lt;q&gt;grouping&lt;/q&gt; post-processing&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/caaff5a4bf5d8fffb7eb91c0743c1ee0591a1f33/item/src/posterise_gpu.rs#L762&quot;&gt;like&lt;/a&gt;
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;pub&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token type-definition class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Box&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;sync&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Mutex&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_SIZE&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;use_oneshot_driver&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;/small&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Box&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;mem&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MaybeUninit&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;assume_init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Box&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new_uninit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; ga &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; ret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;ptr&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ga &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;sync&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Mutex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;measure&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_rgbs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; known_rgbs_freqs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...assign_cell.hlsl&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// grouping&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_groupcoords&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;u32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_outputs_map&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;known_rgbs&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; threads &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;num_cpus&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; setlen_default &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_groupcoords&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt; threads&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; setlen_last&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_groupcoords&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; setlen_default &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;threads &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; group &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;group&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; joins &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;with_capacity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;threads&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; subset &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;threads &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; setlen &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; subset &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; threads &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; setlen_last&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		             &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;!--&quot;--&gt;                     &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; setlen_default &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; known_rgbs_groupcoords&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token lifetime-annotation symbol&quot;&gt;'&lt;!--'--&gt;static&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;known_rgbs_groupcoords &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;!--&quot;--&gt;     &lt;!--&quot;--&gt;known_rgbs_groupcoords&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token lifetime-annotation symbol&quot;&gt;'&lt;!--'--&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token namespace&quot;&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;from_raw_parts_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;as_mut_ptr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;joins&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;thread&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;spawn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;move&lt;/span&gt; &lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; groupcoord&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; known_rgbs_groupcoords&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;subset &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; setlen_default&lt;span class=&quot;token punctuation&quot;&gt;..&lt;/span&gt;subset &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; setlen_default &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; setlen&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;enumerate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; subset &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; setlen_default&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;groupcoord &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				                 &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;groupcoord &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;				                 &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;groupcoord &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;				&lt;!--&quot;--&gt;groups_accumulator&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;joins&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;into_iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;for_each&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token closure-params&quot;&gt;&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;jh&lt;span class=&quot;token closure-punctuation punctuation&quot;&gt;|&lt;/span&gt;&lt;/span&gt; jh&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// copying&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; dump &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;/* ... */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; cur &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; known_rgbs &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;75_000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;GRID_GILBERT&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;!--&quot;--&gt;			     &lt;!--&quot;--&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gr_z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buffer_params_map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;group_ranges&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		               &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;zip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groups_accumulator&lt;!--&quot;--&gt;            &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;iter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;!--&quot;--&gt;    &lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;			&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;dump&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;gr_z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ga_z&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_mut&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unwrap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// sum_cells.straight.hlsl or sum_cells.oneshot.hlsl...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;!--
4.659528ms: 16755 BEFORE grouping
2.669357ms: 16755 BEFORE copied
4.433132ms: 16755 BEFORE grouping
2.708297ms: 16755 BEFORE copied
4.191945ms: 16755 BEFORE grouping
3.541132ms: 16755 BEFORE copied
4.855737ms: 16755 BEFORE grouping
2.576083ms: 16755 BEFORE copied
4.878679ms: 16755 BEFORE grouping
2.574272ms: 16755 BEFORE copied
5.031119ms: 16755 BEFORE grouping
2.581214ms: 16755 BEFORE copied
4.814383ms: 16755 BEFORE grouping
2.614117ms: 16755 BEFORE copied
4.687903ms: 16755 BEFORE grouping
2.606269ms: 16755 BEFORE copied
4.661339ms: 16755 BEFORE grouping
2.582724ms: 16755 BEFORE copied
4.388457ms: 16755 BEFORE grouping
2.594798ms: 16755 BEFORE copied
4.475996ms: 16755 BEFORE grouping
2.58212ms: 16755 BEFORE copied
4.257751ms: 16755 BEFORE grouping
2.627701ms: 16755 BEFORE copied
4.140629ms: 16755 BEFORE grouping
2.66815ms: 16755 BEFORE copied
4.079653ms: 16755 BEFORE grouping
2.718561ms: 16755 BEFORE copied
4.500447ms: 16755 BEFORE grouping
2.623475ms: 16755 BEFORE copied
4.403248ms: 16755 BEFORE grouping
2.68596ms: 16755 BEFORE copied
4.519767ms: 16755 BEFORE grouping
2.621361ms: 16755 BEFORE copied
4.386947ms: 16755 BEFORE grouping
2.729126ms: 16755 BEFORE copied
4.325368ms: 16755 BEFORE grouping
2.69411ms: 16755 BEFORE copied
4.175645ms: 16755 BEFORE grouping
2.648831ms: 16755 BEFORE copied
4.331103ms: 16755 BEFORE grouping
2.657283ms: 16755 BEFORE copied
4.499239ms: 16755 BEFORE grouping
2.703468ms: 16755 BEFORE copied
4.121309ms: 16755 BEFORE grouping
2.669357ms: 16755 BEFORE copied
4.132479ms: 16755 BEFORE grouping
2.769575ms: 16755 BEFORE copied
4.078143ms: 16755 BEFORE grouping
2.673584ms: 16755 BEFORE copied
4.088105ms: 16755 BEFORE grouping
2.921412ms: 16755 BEFORE copied
4.179569ms: 16755 BEFORE grouping
2.970011ms: 16755 BEFORE copied
3.9088ms: 16755 BEFORE grouping
2.735163ms: 16755 BEFORE copied
4.309671ms: 16755 BEFORE grouping
2.821193ms: 16755 BEFORE copied
4.144553ms: 16755 BEFORE grouping
2.811233ms: 16755 BEFORE copied
4.121914ms: 16755 BEFORE grouping
2.938014ms: 16755 BEFORE copied
4.152401ms: 16755 BEFORE grouping
3.098906ms: 16755 BEFORE copied
4.207642ms: 16755 BEFORE grouping
3.130903ms: 16755 BEFORE copied
4.143647ms: 16755 BEFORE grouping
3.155354ms: 16755 BEFORE copied
4.349517ms: 16755 BEFORE grouping
3.043364ms: 16755 BEFORE copied
4.240545ms: 16755 BEFORE grouping
2.988123ms: 16755 BEFORE copied
5.249666ms: 16755 BEFORE grouping
2.622569ms: 16755 BEFORE copied
4.88532ms: 16755 BEFORE grouping
2.548312ms: 16755 BEFORE copied
4.848493ms: 16755 BEFORE grouping
2.589666ms: 16755 BEFORE copied
4.962295ms: 16755 BEFORE grouping
2.566725ms: 16755 BEFORE copied
4.918223ms: 16755 BEFORE grouping
2.593893ms: 16755 BEFORE copied
4.933316ms: 16755 BEFORE grouping
2.603854ms: 16755 BEFORE copied
4.872642ms: 16755 BEFORE grouping
2.612608ms: 16755 BEFORE copied
4.559612ms: 16755 BEFORE grouping
2.636454ms: 16755 BEFORE copied
4.618776ms: 16755 BEFORE grouping
2.640681ms: 16755 BEFORE copied
4.162664ms: 16755 BEFORE grouping
2.657585ms: 16755 BEFORE copied
4.178361ms: 16755 BEFORE grouping
2.652454ms: 16755 BEFORE copied
4.454564ms: 16755 BEFORE grouping
2.62438ms: 16755 BEFORE copied
4.165683ms: 16755 BEFORE grouping
2.671471ms: 16755 BEFORE copied
4.214283ms: 16755 BEFORE grouping
2.640077ms: 16755 BEFORE copied
4.258053ms: 16755 BEFORE grouping
2.645813ms: 16755 BEFORE copied
4.193455ms: 16755 BEFORE grouping
2.639474ms: 16755 BEFORE copied
4.229074ms: 16755 BEFORE grouping
2.662415ms: 16755 BEFORE copied
4.161457ms: 16755 BEFORE grouping
2.660604ms: 16755 BEFORE copied
4.133988ms: 16755 BEFORE grouping
2.69411ms: 16755 BEFORE copied
4.196473ms: 16755 BEFORE grouping
2.646416ms: 16755 BEFORE copied
4.265901ms: 16755 BEFORE grouping
2.670867ms: 16755 BEFORE copied
4.313595ms: 16755 BEFORE grouping
2.772595ms: 16755 BEFORE copied
4.029543ms: 16755 BEFORE grouping
2.620456ms: 16755 BEFORE copied
4.147873ms: 16755 BEFORE grouping
2.672376ms: 16755 BEFORE copied
4.83008ms: 16755 BEFORE grouping
2.62921ms: 16755 BEFORE copied
4.157533ms: 16755 BEFORE grouping
2.766859ms: 16755 BEFORE copied
4.120102ms: 16755 BEFORE grouping
2.80761ms: 16755 BEFORE copied
4.218508ms: 16755 BEFORE grouping
2.842324ms: 16755 BEFORE copied
4.275561ms: 16755 BEFORE grouping
2.950994ms: 16755 BEFORE copied
4.146063ms: 16755 BEFORE grouping
3.065701ms: 16755 BEFORE copied
4.163268ms: 16755 BEFORE grouping
3.262213ms: 16755 BEFORE copied
4.18621ms: 16755 BEFORE grouping
3.339489ms: 16755 BEFORE copied
4.260468ms: 16755 BEFORE grouping
2.996273ms: 16755 BEFORE copied
4.489278ms: 16755 BEFORE grouping
2.778933ms: 16755 BEFORE copied
4.921845ms: 16755 BEFORE grouping
2.5628ms: 16755 BEFORE copied
4.882603ms: 16755 BEFORE grouping
2.530502ms: 16755 BEFORE copied
5.278645ms: 16755 BEFORE grouping
2.723089ms: 16755 BEFORE copied
4.832494ms: 16755 BEFORE grouping
3.124564ms: 16755 BEFORE copied
4.239941ms: 16755 BEFORE grouping
2.782857ms: 16755 BEFORE copied
4.496523ms: 16755 BEFORE grouping
2.894244ms: 16755 BEFORE copied
4.496824ms: 16755 BEFORE grouping
2.697733ms: 16755 BEFORE copied
4.917619ms: 16755 BEFORE grouping
3.619012ms: 16755 BEFORE copied
5.349583ms: 16755 BEFORE grouping
2.76052ms: 16755 BEFORE copied
4.593722ms: 16755 BEFORE grouping
2.756898ms: 16755 BEFORE copied
4.688204ms: 16755 BEFORE grouping
2.725806ms: 16755 BEFORE copied
4.522483ms: 16755 BEFORE grouping
2.736672ms: 16755 BEFORE copied
4.556292ms: 16755 BEFORE grouping
2.96337ms: 16755 BEFORE copied
4.921544ms: 16755 BEFORE grouping
2.695016ms: 16755 BEFORE copied
5.017233ms: 16755 BEFORE grouping
2.746031ms: 16755 BEFORE copied
4.61606ms: 16755 BEFORE grouping
2.768971ms: 16755 BEFORE copied
4.449433ms: 16755 BEFORE grouping
2.810628ms: 16755 BEFORE copied
4.380004ms: 16755 BEFORE grouping
2.735163ms: 16755 BEFORE copied
8.606663ms: 27868 BEFORE grouping
3.245007ms: 27868 BEFORE copied
6.166116ms: 27868 BEFORE grouping
2.750559ms: 27868 BEFORE copied
6.539216ms: 27868 BEFORE grouping
3.502495ms: 27868 BEFORE copied
6.31916ms: 27868 BEFORE grouping
3.276703ms: 27868 BEFORE copied
6.43417ms: 27868 BEFORE grouping
3.107359ms: 27868 BEFORE copied
6.375306ms: 27868 BEFORE grouping
2.958843ms: 27868 BEFORE copied
6.264826ms: 27868 BEFORE grouping
2.793121ms: 27868 BEFORE copied
6.327008ms: 27868 BEFORE grouping
2.979973ms: 27868 BEFORE copied
6.255166ms: 27868 BEFORE grouping
3.059966ms: 27868 BEFORE copied
6.327009ms: 27868 BEFORE grouping
2.88217ms: 27868 BEFORE copied
6.494843ms: 27868 BEFORE grouping
2.800063ms: 27868 BEFORE copied
6.343309ms: 27868 BEFORE grouping
2.795837ms: 27868 BEFORE copied
6.266636ms: 27868 BEFORE grouping
2.83025ms: 27868 BEFORE copied
5.881461ms: 27868 BEFORE grouping
3.478949ms: 27868 BEFORE copied
6.693166ms: 27868 BEFORE grouping
3.38024ms: 27868 BEFORE copied
6.040542ms: 27868 BEFORE grouping
3.577054ms: 27868 BEFORE copied
7.373259ms: 27868 BEFORE grouping
3.376015ms: 27868 BEFORE copied
5.861237ms: 27868 BEFORE grouping
4.289446ms: 27868 BEFORE copied
8.621455ms: 27868 BEFORE grouping
4.38091ms: 27868 BEFORE copied
5.359845ms: 27868 BEFORE grouping
2.698336ms: 27868 BEFORE copied
6.099707ms: 27868 BEFORE grouping
2.765349ms: 27868 BEFORE copied
5.80992ms: 27868 BEFORE grouping
2.752068ms: 27868 BEFORE copied
5.288606ms: 27868 BEFORE grouping
3.237158ms: 27868 BEFORE copied
5.155184ms: 27868 BEFORE grouping
3.294512ms: 27868 BEFORE copied
5.11413ms: 27868 BEFORE grouping
2.746332ms: 27868 BEFORE copied
5.117753ms: 27868 BEFORE grouping
2.757501ms: 27868 BEFORE copied
5.291927ms: 27868 BEFORE grouping
3.02495ms: 27868 BEFORE copied
5.733248ms: 27868 BEFORE grouping
2.706185ms: 27868 BEFORE copied
5.697326ms: 27868 BEFORE grouping
2.616532ms: 27868 BEFORE copied
5.258118ms: 27868 BEFORE grouping
3.233536ms: 27868 BEFORE copied
5.022667ms: 27868 BEFORE grouping
2.985406ms: 27868 BEFORE copied
5.308529ms: 27868 BEFORE grouping
2.746634ms: 27868 BEFORE copied
5.115942ms: 27868 BEFORE grouping
2.780141ms: 27868 BEFORE copied
5.332376ms: 27868 BEFORE grouping
2.724599ms: 27868 BEFORE copied
5.98832ms: 27868 BEFORE grouping
2.738484ms: 27868 BEFORE copied
5.626087ms: 27868 BEFORE grouping
2.659396ms: 27868 BEFORE copied
5.118659ms: 27868 BEFORE grouping
3.167127ms: 27868 BEFORE copied
5.119564ms: 27868 BEFORE grouping
2.844136ms: 27868 BEFORE copied
5.089076ms: 27868 BEFORE grouping
2.768972ms: 27868 BEFORE copied
5.013309ms: 27868 BEFORE grouping
2.783462ms: 27868 BEFORE copied
5.853086ms: 27868 BEFORE grouping
2.736975ms: 27868 BEFORE copied
6.185436ms: 27868 BEFORE grouping
2.735465ms: 27868 BEFORE copied
5.726003ms: 27868 BEFORE grouping
2.682337ms: 27868 BEFORE copied
5.365883ms: 27868 BEFORE grouping
3.072342ms: 27868 BEFORE copied
5.110508ms: 27868 BEFORE grouping
3.330434ms: 27868 BEFORE copied
5.085755ms: 27868 BEFORE grouping
2.785876ms: 27868 BEFORE copied
4.868415ms: 27868 BEFORE grouping
2.849568ms: 27868 BEFORE copied
5.155787ms: 27868 BEFORE grouping
2.832664ms: 27868 BEFORE copied
5.979265ms: 27868 BEFORE grouping
2.698034ms: 27868 BEFORE copied
5.767056ms: 27868 BEFORE grouping
2.652454ms: 27868 BEFORE copied
5.350186ms: 27868 BEFORE grouping
2.995669ms: 27868 BEFORE copied
5.1253ms: 27868 BEFORE grouping
2.976954ms: 27868 BEFORE copied
5.105376ms: 27868 BEFORE grouping
2.777424ms: 27868 BEFORE copied
5.137676ms: 27868 BEFORE grouping
2.797649ms: 27868 BEFORE copied
5.34445ms: 27868 BEFORE grouping
2.764745ms: 27868 BEFORE copied
6.043259ms: 27868 BEFORE grouping
2.759916ms: 27868 BEFORE copied
5.748039ms: 27868 BEFORE grouping
2.714334ms: 27868 BEFORE copied
5.192011ms: 27868 BEFORE grouping
3.165013ms: 27868 BEFORE copied
5.110207ms: 27868 BEFORE grouping
2.801271ms: 27868 BEFORE copied
5.102962ms: 27868 BEFORE grouping
2.793724ms: 27868 BEFORE copied
5.215556ms: 27868 BEFORE grouping
2.781348ms: 27868 BEFORE copied
5.853388ms: 27868 BEFORE grouping
2.683243ms: 27868 BEFORE copied
6.024543ms: 27868 BEFORE grouping
2.672376ms: 27868 BEFORE copied
5.8552ms: 27868 BEFORE grouping
2.776217ms: 27868 BEFORE copied
5.272306ms: 27868 BEFORE grouping
3.143582ms: 27868 BEFORE copied
5.148543ms: 27868 BEFORE grouping
3.078681ms: 27868 BEFORE copied
5.161522ms: 27868 BEFORE grouping
2.733654ms: 27868 BEFORE copied
4.868114ms: 27868 BEFORE grouping
2.789801ms: 27868 BEFORE copied
5.841012ms: 27868 BEFORE grouping
2.723089ms: 27868 BEFORE copied
5.895347ms: 27868 BEFORE grouping
2.693205ms: 27868 BEFORE copied
6.124761ms: 27868 BEFORE grouping
2.778933ms: 27868 BEFORE copied
5.334791ms: 27868 BEFORE grouping
2.804592ms: 27868 BEFORE copied
5.112923ms: 27868 BEFORE grouping
3.15626ms: 27868 BEFORE copied
5.226121ms: 27868 BEFORE grouping
2.726409ms: 27868 BEFORE copied
5.197444ms: 27868 BEFORE grouping
2.806402ms: 27868 BEFORE copied
5.210726ms: 27868 BEFORE grouping
2.712825ms: 27868 BEFORE copied
5.823505ms: 27868 BEFORE grouping
2.71826ms: 27868 BEFORE copied
5.628804ms: 27868 BEFORE grouping
2.684451ms: 27868 BEFORE copied
5.181445ms: 27868 BEFORE grouping
3.173163ms: 27868 BEFORE copied
13.701173ms: 84860 BEFORE grouping
16.150474ms: 84860 BEFORE copied
10.33663ms: 84860 BEFORE grouping
10.868508ms: 84860 BEFORE copied
10.853114ms: 84860 BEFORE grouping
10.332101ms: 84860 BEFORE copied
10.935824ms: 84860 BEFORE grouping
10.323951ms: 84860 BEFORE copied
10.92556ms: 84860 BEFORE grouping
10.883904ms: 84860 BEFORE copied
10.79093ms: 84860 BEFORE grouping
10.815985ms: 84860 BEFORE copied
10.708523ms: 84860 BEFORE grouping
10.822324ms: 84860 BEFORE copied
10.900808ms: 84860 BEFORE grouping
11.24342ms: 84860 BEFORE copied
10.922844ms: 84860 BEFORE grouping
10.712447ms: 84860 BEFORE copied
11.00827ms: 84860 BEFORE grouping
10.814173ms: 84860 BEFORE copied
10.951521ms: 84860 BEFORE grouping
10.898996ms: 84860 BEFORE copied
11.012798ms: 84860 BEFORE grouping
10.840738ms: 84860 BEFORE copied
10.588683ms: 84860 BEFORE grouping
10.73901ms: 84860 BEFORE copied
10.198076ms: 84860 BEFORE grouping
10.864585ms: 84860 BEFORE copied
10.272333ms: 84860 BEFORE grouping
10.916504ms: 84860 BEFORE copied
10.262371ms: 84860 BEFORE grouping
11.322206ms: 84860 BEFORE copied
10.249392ms: 84860 BEFORE grouping
10.736595ms: 84860 BEFORE copied
10.284709ms: 84860 BEFORE grouping
10.933409ms: 84860 BEFORE copied
10.584155ms: 84860 BEFORE grouping
10.491786ms: 84860 BEFORE copied
10.785195ms: 84860 BEFORE grouping
10.341761ms: 84860 BEFORE copied
10.699768ms: 84860 BEFORE grouping
10.275352ms: 84860 BEFORE copied
11.001932ms: 84860 BEFORE grouping
10.941861ms: 84860 BEFORE copied
11.312546ms: 84860 BEFORE grouping
11.883064ms: 84860 BEFORE copied
11.463477ms: 84860 BEFORE grouping
10.689203ms: 84860 BEFORE copied
10.928881ms: 84860 BEFORE grouping
10.705504ms: 84860 BEFORE copied
10.708824ms: 84860 BEFORE grouping
10.780365ms: 84860 BEFORE copied
10.512313ms: 84860 BEFORE grouping
10.757122ms: 84860 BEFORE copied
11.428461ms: 84860 BEFORE grouping
12.288162ms: 84860 BEFORE copied
10.187208ms: 84860 BEFORE grouping
11.011591ms: 84860 BEFORE copied
10.224639ms: 84860 BEFORE grouping
11.583014ms: 84860 BEFORE copied
10.439262ms: 84860 BEFORE grouping
10.947898ms: 84860 BEFORE copied
10.317915ms: 84860 BEFORE grouping
11.183953ms: 84860 BEFORE copied
10.990461ms: 84860 BEFORE grouping
11.11694ms: 84860 BEFORE copied
10.73237ms: 84860 BEFORE grouping
10.311877ms: 84860 BEFORE copied
10.723314ms: 84860 BEFORE grouping
10.713051ms: 84860 BEFORE copied
10.668979ms: 84860 BEFORE grouping
10.325762ms: 84860 BEFORE copied
10.870924ms: 84860 BEFORE grouping
10.354137ms: 84860 BEFORE copied
10.641811ms: 84860 BEFORE grouping
10.741124ms: 84860 BEFORE copied
10.791232ms: 84860 BEFORE grouping
10.279275ms: 84860 BEFORE copied
10.720898ms: 84860 BEFORE grouping
10.355043ms: 84860 BEFORE copied
10.803005ms: 84860 BEFORE grouping
10.32546ms: 84860 BEFORE copied
10.732369ms: 84860 BEFORE grouping
10.424169ms: 84860 BEFORE copied
10.666865ms: 84860 BEFORE grouping
10.381305ms: 84860 BEFORE copied
10.670789ms: 84860 BEFORE grouping
10.416924ms: 84860 BEFORE copied
10.74052ms: 84860 BEFORE grouping
10.362288ms: 84860 BEFORE copied
10.626718ms: 84860 BEFORE grouping
10.48273ms: 84860 BEFORE copied
10.767989ms: 84860 BEFORE grouping
10.279578ms: 84860 BEFORE copied
11.084943ms: 84860 BEFORE grouping
12.463845ms: 84860 BEFORE copied
11.116035ms: 84860 BEFORE grouping
11.413066ms: 84860 BEFORE copied
11.301378ms: 84860 BEFORE grouping
11.490342ms: 84860 BEFORE copied
12.894903ms: 84860 BEFORE grouping
12.293293ms: 84860 BEFORE copied
11.826314ms: 84860 BEFORE grouping
11.639161ms: 84860 BEFORE copied
13.152692ms: 84860 BEFORE grouping
14.544875ms: 84860 BEFORE copied
11.41035ms: 84860 BEFORE grouping
11.101848ms: 84860 BEFORE copied
11.510265ms: 84860 BEFORE grouping
11.595088ms: 84860 BEFORE copied
11.534716ms: 84860 BEFORE grouping
15.39069ms: 84860 BEFORE copied
11.508756ms: 84860 BEFORE grouping
11.121468ms: 84860 BEFORE copied
11.344544ms: 84860 BEFORE grouping
12.045767ms: 84860 BEFORE copied
12.269446ms: 84860 BEFORE grouping
15.401255ms: 84860 BEFORE copied
11.383484ms: 84860 BEFORE grouping
11.075284ms: 84860 BEFORE copied
11.361146ms: 84860 BEFORE grouping
12.398944ms: 84860 BEFORE copied
11.338808ms: 84860 BEFORE grouping
14.483899ms: 84860 BEFORE copied
11.295038ms: 84860 BEFORE grouping
13.570769ms: 84860 BEFORE copied
11.418801ms: 84860 BEFORE grouping
11.607766ms: 84860 BEFORE copied
11.418499ms: 84860 BEFORE grouping
11.589051ms: 84860 BEFORE copied
11.512982ms: 84860 BEFORE grouping
11.682024ms: 84860 BEFORE copied
11.460156ms: 84860 BEFORE grouping
11.621048ms: 84860 BEFORE copied
11.706777ms: 84860 BEFORE grouping
11.837785ms: 84860 BEFORE copied
11.240703ms: 84860 BEFORE grouping
12.275181ms: 84860 BEFORE copied
11.312547ms: 84860 BEFORE grouping
12.080179ms: 84860 BEFORE copied
12.049088ms: 84860 BEFORE grouping
12.346421ms: 84860 BEFORE copied
11.503926ms: 84860 BEFORE grouping
11.729718ms: 84860 BEFORE copied
13.455156ms: 84860 BEFORE grouping
13.51583ms: 84860 BEFORE copied
11.637349ms: 84860 BEFORE grouping
11.849256ms: 84860 BEFORE copied
11.538943ms: 84860 BEFORE grouping
13.440667ms: 84860 BEFORE copied
11.075585ms: 84860 BEFORE grouping
12.289369ms: 84860 BEFORE copied
11.575467ms: 84860 BEFORE grouping
12.263711ms: 84860 BEFORE copied
35.099502ms: 242931 BEFORE grouping
16.636471ms: 242931 BEFORE copied
25.427873ms: 242931 BEFORE grouping
13.972848ms: 242931 BEFORE copied
22.817076ms: 242931 BEFORE grouping
12.225072ms: 242931 BEFORE copied
22.695426ms: 242931 BEFORE grouping
11.966378ms: 242931 BEFORE copied
23.156066ms: 242931 BEFORE grouping
11.83386ms: 242931 BEFORE copied
23.482378ms: 242931 BEFORE grouping
12.920862ms: 242931 BEFORE copied
22.698747ms: 242931 BEFORE grouping
11.861028ms: 242931 BEFORE copied
23.025964ms: 242931 BEFORE grouping
11.722776ms: 242931 BEFORE copied
22.722292ms: 242931 BEFORE grouping
12.152324ms: 242931 BEFORE copied
23.088148ms: 242931 BEFORE grouping
12.126363ms: 242931 BEFORE copied
22.656788ms: 242931 BEFORE grouping
11.95219ms: 242931 BEFORE copied
23.085732ms: 242931 BEFORE grouping
13.665855ms: 242931 BEFORE copied
22.914578ms: 242931 BEFORE grouping
12.092254ms: 242931 BEFORE copied
23.236664ms: 242931 BEFORE grouping
11.847142ms: 242931 BEFORE copied
23.048604ms: 242931 BEFORE grouping
11.813032ms: 242931 BEFORE copied
24.189639ms: 242931 BEFORE grouping
12.54263ms: 242931 BEFORE copied
22.583738ms: 242931 BEFORE grouping
12.110667ms: 242931 BEFORE copied
23.148822ms: 242931 BEFORE grouping
12.182209ms: 242931 BEFORE copied
22.796248ms: 242931 BEFORE grouping
12.71137ms: 242931 BEFORE copied
22.9019ms: 242931 BEFORE grouping
11.90842ms: 242931 BEFORE copied
23.211005ms: 242931 BEFORE grouping
12.03158ms: 242931 BEFORE copied
22.657995ms: 242931 BEFORE grouping
11.871895ms: 242931 BEFORE copied
22.769986ms: 242931 BEFORE grouping
11.74632ms: 242931 BEFORE copied
22.952914ms: 242931 BEFORE grouping
12.248617ms: 242931 BEFORE copied
23.343824ms: 242931 BEFORE grouping
11.727908ms: 242931 BEFORE copied
22.687578ms: 242931 BEFORE grouping
12.755744ms: 242931 BEFORE copied
23.493245ms: 242931 BEFORE grouping
12.053917ms: 242931 BEFORE copied
23.089657ms: 242931 BEFORE grouping
11.716739ms: 242931 BEFORE copied
22.857526ms: 242931 BEFORE grouping
12.245901ms: 242931 BEFORE copied
23.174782ms: 242931 BEFORE grouping
11.847444ms: 242931 BEFORE copied
23.053735ms: 242931 BEFORE grouping
11.79975ms: 242931 BEFORE copied
22.62298ms: 242931 BEFORE grouping
11.927437ms: 242931 BEFORE copied
23.602821ms: 242931 BEFORE grouping
12.058445ms: 242931 BEFORE copied
22.678824ms: 242931 BEFORE grouping
11.834766ms: 242931 BEFORE copied
22.71716ms: 242931 BEFORE grouping
11.873706ms: 242931 BEFORE copied
24.141945ms: 242931 BEFORE grouping
11.70557ms: 242931 BEFORE copied
22.66856ms: 242931 BEFORE grouping
12.202132ms: 242931 BEFORE copied
23.285867ms: 242931 BEFORE grouping
11.899062ms: 242931 BEFORE copied
22.709614ms: 242931 BEFORE grouping
13.235703ms: 242931 BEFORE copied
22.71384ms: 242931 BEFORE grouping
11.914457ms: 242931 BEFORE copied
23.028681ms: 242931 BEFORE grouping
12.032184ms: 242931 BEFORE copied
22.861752ms: 242931 BEFORE grouping
12.099196ms: 242931 BEFORE copied
22.540873ms: 242931 BEFORE grouping
11.808806ms: 242931 BEFORE copied
22.960159ms: 242931 BEFORE grouping
12.854755ms: 242931 BEFORE copied
23.867251ms: 242931 BEFORE grouping
12.644961ms: 242931 BEFORE copied
38.286854ms: 328666 BEFORE grouping
13.641405ms: 328666 BEFORE copied
31.053658ms: 328666 BEFORE grouping
13.350712ms: 328666 BEFORE copied
31.354312ms: 328666 BEFORE grouping
13.611521ms: 328666 BEFORE copied
30.798284ms: 328666 BEFORE grouping
13.638387ms: 328666 BEFORE copied
30.761155ms: 328666 BEFORE grouping
14.305499ms: 328666 BEFORE copied
30.861675ms: 328666 BEFORE grouping
13.826446ms: 328666 BEFORE copied
31.058186ms: 328666 BEFORE grouping
13.78992ms: 328666 BEFORE copied
31.331974ms: 328666 BEFORE grouping
14.96567ms: 328666 BEFORE copied
31.938111ms: 328666 BEFORE grouping
13.413801ms: 328666 BEFORE copied
30.523892ms: 328666 BEFORE grouping
13.514019ms: 328666 BEFORE copied
30.740025ms: 328666 BEFORE grouping
13.267399ms: 328666 BEFORE copied
32.673143ms: 328666 BEFORE grouping
16.813663ms: 328666 BEFORE copied
30.558606ms: 328666 BEFORE grouping
13.103488ms: 328666 BEFORE copied
30.569473ms: 328666 BEFORE grouping
13.831879ms: 328666 BEFORE copied
31.024378ms: 328666 BEFORE grouping
13.850594ms: 328666 BEFORE copied
30.929895ms: 328666 BEFORE grouping
13.694533ms: 328666 BEFORE copied
31.038867ms: 328666 BEFORE grouping
13.496209ms: 328666 BEFORE copied
31.059092ms: 328666 BEFORE grouping
13.803806ms: 328666 BEFORE copied
31.102258ms: 328666 BEFORE grouping
13.767884ms: 328666 BEFORE copied
30.926273ms: 328666 BEFORE grouping
13.37456ms: 328666 BEFORE copied
30.944083ms: 328666 BEFORE grouping
13.198876ms: 328666 BEFORE copied
32.849732ms: 328666 BEFORE grouping
16.679033ms: 328666 BEFORE copied
33.165176ms: 328666 BEFORE grouping
14.840096ms: 328666 BEFORE copied
32.709064ms: 328666 BEFORE grouping
15.665081ms: 328666 BEFORE copied
33.328483ms: 328666 BEFORE grouping
15.066189ms: 328666 BEFORE copied
33.207437ms: 328666 BEFORE grouping
15.072226ms: 328666 BEFORE copied
32.209484ms: 328666 BEFORE grouping
16.417923ms: 328666 BEFORE copied
33.1528ms: 328666 BEFORE grouping
15.090036ms: 328666 BEFORE copied
32.560851ms: 328666 BEFORE grouping
16.637074ms: 328666 BEFORE copied
33.260263ms: 328666 BEFORE grouping
15.306471ms: 328666 BEFORE copied
33.155517ms: 328666 BEFORE grouping
15.032079ms: 328666 BEFORE copied
124.045591ms: 1103347 BEFORE grouping
22.591284ms: 1103347 BEFORE copied
110.314231ms: 1103347 BEFORE grouping
16.299593ms: 1103347 BEFORE copied
90.705636ms: 1103347 BEFORE grouping
16.930483ms: 1103347 BEFORE copied
92.287388ms: 1103347 BEFORE grouping
16.380794ms: 1103347 BEFORE copied
90.515464ms: 1103347 BEFORE grouping
16.301706ms: 1103347 BEFORE copied
91.950512ms: 1103347 BEFORE grouping
16.285406ms: 1103347 BEFORE copied
91.065756ms: 1103347 BEFORE grouping
16.696842ms: 1103347 BEFORE copied
93.222856ms: 1103347 BEFORE grouping
16.907542ms: 1103347 BEFORE copied
91.390861ms: 1103347 BEFORE grouping
16.572778ms: 1103347 BEFORE copied
95.835766ms: 1103347 BEFORE grouping
17.106468ms: 1103347 BEFORE copied
95.622652ms: 1103347 BEFORE grouping
16.603266ms: 1103347 BEFORE copied
91.189822ms: 1103347 BEFORE grouping
16.645225ms: 1103347 BEFORE copied
90.840266ms: 1103347 BEFORE grouping
16.643413ms: 1103347 BEFORE copied
91.606088ms: 1103347 BEFORE grouping
16.880676ms: 1103347 BEFORE copied
91.532434ms: 1103347 BEFORE grouping
16.548327ms: 1103347 BEFORE copied
91.586165ms: 1103347 BEFORE grouping
16.752385ms: 1103347 BEFORE copied
91.245063ms: 1103347 BEFORE grouping
16.668166ms: 1103347 BEFORE copied
91.210952ms: 1103347 BEFORE grouping
16.733066ms: 1103347 BEFORE copied
90.808571ms: 1103347 BEFORE grouping
16.570061ms: 1103347 BEFORE copied
Benchmark 1: 16755 BEFORE grouping
  Time (mean ± σ): 4.452702 ms ± 327.072029 µs
  Range (min … max): 3.908800 ms … 5.349583 ms 88 runs
Benchmark 3: 84860 BEFORE grouping
  Time (mean ± σ): 11.115392 ms ± 686.018769 µs
  Range (min … max): 10.187208 ms … 13.701173 ms 77 runs
Benchmark 4: 242931 BEFORE grouping
  Time (mean ± σ): 23.343750 ms ± 1.846677 ms
  Range (min … max): 22.540873 ms … 35.099502 ms 45 runs
Benchmark 2: 27868 BEFORE grouping
  Time (mean ± σ): 5.698526 ms ± 698.973650 µs
  Range (min … max): 4.868114 ms … 8.621455 ms 79 runs
Benchmark 5: 328666 BEFORE grouping
  Time (mean ± σ): 31.907516 ms ± 1.523188 ms
  Range (min … max): 30.523892 ms … 38.286854 ms 31 runs
Benchmark 6: 1103347 BEFORE grouping
  Time (mean ± σ): 94.577688 ms ± 8.194300 ms
  Range (min … max): 90.515464 ms … 124.045591 ms 19 runs
Benchmark 1: 16755 BEFORE copied
  Time (mean ± σ): 2.763113 ms ± 209.341025 µs
  Range (min … max): 2.530502 ms … 3.619012 ms 88 runs
Benchmark 3: 84860 BEFORE copied
  Time (mean ± σ): 11.469185 ms ± 1.259967 ms
  Range (min … max): 10.275352 ms … 16.150474 ms 77 runs
Benchmark 4: 242931 BEFORE copied
  Time (mean ± σ): 12.275128 ms ± 825.397419 µs
  Range (min … max): 11.705570 ms … 16.636471 ms 45 runs
Benchmark 2: 27868 BEFORE copied
  Time (mean ± σ): 2.937407 ms ± 322.630253 µs
  Range (min … max): 2.616532 ms … 4.380910 ms 79 runs
Benchmark 5: 328666 BEFORE copied
  Time (mean ± σ): 14.389241 ms ± 1.111491 ms
  Range (min … max): 13.103488 ms … 16.813663 ms 31 runs
Benchmark 6: 1103347 BEFORE copied
  Time (mean ± σ): 16.953552 ms ± 1.346517 ms
  Range (min … max): 16.285406 ms … 22.591284 ms 19 runs
--&gt;
&lt;!--
4.744049ms: AFTER 16755 grouping
3.109773ms: AFTER 16755 copied
5.09783ms: AFTER 16755 grouping
4.153911ms: AFTER 16755 copied
5.160617ms: AFTER 16755 grouping
3.908799ms: AFTER 16755 copied
5.639671ms: AFTER 16755 grouping
3.417068ms: AFTER 16755 copied
5.696722ms: AFTER 16755 grouping
3.308096ms: AFTER 16755 copied
5.080322ms: AFTER 16755 grouping
3.300852ms: AFTER 16755 copied
5.110508ms: AFTER 16755 grouping
3.544755ms: AFTER 16755 copied
5.00697ms: AFTER 16755 grouping
3.963134ms: AFTER 16755 copied
5.662008ms: AFTER 16755 grouping
3.230517ms: AFTER 16755 copied
5.359544ms: AFTER 16755 grouping
3.306586ms: AFTER 16755 copied
6.285049ms: AFTER 16755 grouping
4.981009ms: AFTER 16755 copied
5.917383ms: AFTER 16755 grouping
3.843295ms: AFTER 16755 copied
5.665027ms: AFTER 16755 grouping
4.294276ms: AFTER 16755 copied
5.914968ms: AFTER 16755 grouping
3.153543ms: AFTER 16755 copied
5.00033ms: AFTER 16755 grouping
3.228102ms: AFTER 16755 copied
4.922147ms: AFTER 16755 grouping
3.373599ms: AFTER 16755 copied
5.09119ms: AFTER 16755 grouping
3.750926ms: AFTER 16755 copied
5.768867ms: AFTER 16755 grouping
3.213311ms: AFTER 16755 copied
4.969238ms: AFTER 16755 grouping
3.266137ms: AFTER 16755 copied
4.908865ms: AFTER 16755 grouping
3.27308ms: AFTER 16755 copied
5.100245ms: AFTER 16755 grouping
3.292399ms: AFTER 16755 copied
4.964106ms: AFTER 16755 grouping
3.720136ms: AFTER 16755 copied
5.526775ms: AFTER 16755 grouping
3.32168ms: AFTER 16755 copied
5.850068ms: AFTER 16755 grouping
3.154449ms: AFTER 16755 copied
5.084246ms: AFTER 16755 grouping
3.243799ms: AFTER 16755 copied
5.765547ms: AFTER 16755 grouping
6.170644ms: AFTER 16755 copied
6.35961ms: AFTER 16755 grouping
3.288474ms: AFTER 16755 copied
5.523454ms: AFTER 16755 grouping
3.499476ms: AFTER 16755 copied
5.203784ms: AFTER 16755 grouping
3.816128ms: AFTER 16755 copied
5.953002ms: AFTER 16755 grouping
3.578261ms: AFTER 16755 copied
5.693402ms: AFTER 16755 grouping
3.443028ms: AFTER 16755 copied
6.952767ms: AFTER 16755 grouping
3.748511ms: AFTER 16755 copied
5.694006ms: AFTER 16755 grouping
3.440612ms: AFTER 16755 copied
5.541868ms: AFTER 16755 grouping
3.81643ms: AFTER 16755 copied
8.529085ms: AFTER 16755 grouping
4.303634ms: AFTER 16755 copied
4.604891ms: AFTER 16755 grouping
3.097397ms: AFTER 16755 copied
4.637794ms: AFTER 16755 grouping
3.501588ms: AFTER 16755 copied
4.449735ms: AFTER 16755 grouping
3.565583ms: AFTER 16755 copied
6.348742ms: AFTER 16755 grouping
3.238668ms: AFTER 16755 copied
4.795365ms: AFTER 16755 grouping
3.222065ms: AFTER 16755 copied
5.123187ms: AFTER 16755 grouping
3.443933ms: AFTER 16755 copied
5.481797ms: AFTER 16755 grouping
3.651312ms: AFTER 16755 copied
5.209216ms: AFTER 16755 grouping
3.292097ms: AFTER 16755 copied
5.348677ms: AFTER 16755 grouping
3.027968ms: AFTER 16755 copied
5.287399ms: AFTER 16755 grouping
3.107056ms: AFTER 16755 copied
4.787215ms: AFTER 16755 grouping
3.167428ms: AFTER 16755 copied
4.616663ms: AFTER 16755 grouping
3.156562ms: AFTER 16755 copied
4.977689ms: AFTER 16755 grouping
3.199426ms: AFTER 16755 copied
4.632964ms: AFTER 16755 grouping
3.075965ms: AFTER 16755 copied
4.51554ms: AFTER 16755 grouping
3.134828ms: AFTER 16755 copied
4.79929ms: AFTER 16755 grouping
3.399559ms: AFTER 16755 copied
4.597344ms: AFTER 16755 grouping
3.519398ms: AFTER 16755 copied
4.671602ms: AFTER 16755 grouping
3.372392ms: AFTER 16755 copied
5.101452ms: AFTER 16755 grouping
3.23897ms: AFTER 16755 copied
5.403616ms: AFTER 16755 grouping
3.063588ms: AFTER 16755 copied
5.504739ms: AFTER 16755 grouping
3.076568ms: AFTER 16755 copied
4.8334ms: AFTER 16755 grouping
3.022837ms: AFTER 16755 copied
4.689714ms: AFTER 16755 grouping
3.113697ms: AFTER 16755 copied
4.608815ms: AFTER 16755 grouping
3.230819ms: AFTER 16755 copied
5.062814ms: AFTER 16755 grouping
3.602108ms: AFTER 16755 copied
4.853021ms: AFTER 16755 grouping
3.525436ms: AFTER 16755 copied
5.260231ms: AFTER 16755 grouping
3.696591ms: AFTER 16755 copied
5.367392ms: AFTER 16755 grouping
3.038836ms: AFTER 16755 copied
5.55364ms: AFTER 16755 grouping
3.022837ms: AFTER 16755 copied
4.924864ms: AFTER 16755 grouping
3.034006ms: AFTER 16755 copied
4.741332ms: AFTER 16755 grouping
3.206671ms: AFTER 16755 copied
5.091189ms: AFTER 16755 grouping
3.537208ms: AFTER 16755 copied
4.899507ms: AFTER 16755 grouping
3.486798ms: AFTER 16755 copied
4.660736ms: AFTER 16755 grouping
3.456611ms: AFTER 16755 copied
5.099641ms: AFTER 16755 grouping
3.258893ms: AFTER 16755 copied
5.059796ms: AFTER 27868 grouping
3.768132ms: AFTER 27868 copied
5.013912ms: AFTER 27868 grouping
3.451781ms: AFTER 27868 copied
6.343611ms: AFTER 27868 grouping
3.057853ms: AFTER 27868 copied
5.365279ms: AFTER 27868 grouping
3.329528ms: AFTER 27868 copied
4.724126ms: AFTER 27868 grouping
3.865633ms: AFTER 27868 copied
4.787819ms: AFTER 27868 grouping
3.596675ms: AFTER 27868 copied
5.064022ms: AFTER 27868 grouping
3.25044ms: AFTER 27868 copied
4.770009ms: AFTER 27868 grouping
3.204255ms: AFTER 27868 copied
4.767594ms: AFTER 27868 grouping
3.205765ms: AFTER 27868 copied
5.371618ms: AFTER 27868 grouping
3.164107ms: AFTER 27868 copied
6.423906ms: AFTER 27868 grouping
3.441216ms: AFTER 27868 copied
5.623673ms: AFTER 27868 grouping
3.274891ms: AFTER 27868 copied
5.218575ms: AFTER 27868 grouping
3.344922ms: AFTER 27868 copied
4.809251ms: AFTER 27868 grouping
3.699308ms: AFTER 27868 copied
4.598552ms: AFTER 27868 grouping
3.709269ms: AFTER 27868 copied
4.943881ms: AFTER 27868 grouping
3.228405ms: AFTER 27868 copied
4.833098ms: AFTER 27868 grouping
3.166523ms: AFTER 27868 copied
4.622097ms: AFTER 27868 grouping
3.224179ms: AFTER 27868 copied
5.246044ms: AFTER 27868 grouping
3.100415ms: AFTER 27868 copied
5.633935ms: AFTER 27868 grouping
3.135733ms: AFTER 27868 copied
5.973529ms: AFTER 27868 grouping
3.088643ms: AFTER 27868 copied
5.81807ms: AFTER 27868 grouping
3.406804ms: AFTER 27868 copied
5.394861ms: AFTER 27868 grouping
3.12879ms: AFTER 27868 copied
5.700345ms: AFTER 27868 grouping
3.119432ms: AFTER 27868 copied
5.58111ms: AFTER 27868 grouping
3.089548ms: AFTER 27868 copied
5.471836ms: AFTER 27868 grouping
3.204557ms: AFTER 27868 copied
5.034137ms: AFTER 27868 grouping
3.628069ms: AFTER 27868 copied
4.72624ms: AFTER 27868 grouping
3.752133ms: AFTER 27868 copied
4.702996ms: AFTER 27868 grouping
3.251346ms: AFTER 27868 copied
4.658623ms: AFTER 27868 grouping
3.321377ms: AFTER 27868 copied
4.775443ms: AFTER 27868 grouping
3.225386ms: AFTER 27868 copied
5.539151ms: AFTER 27868 grouping
3.090454ms: AFTER 27868 copied
6.45047ms: AFTER 27868 grouping
3.055137ms: AFTER 27868 copied
5.828032ms: AFTER 27868 grouping
3.146298ms: AFTER 27868 copied
5.515908ms: AFTER 27868 grouping
3.090454ms: AFTER 27868 copied
4.915506ms: AFTER 27868 grouping
3.727381ms: AFTER 27868 copied
4.973162ms: AFTER 27868 grouping
3.515474ms: AFTER 27868 copied
4.760954ms: AFTER 27868 grouping
3.682101ms: AFTER 27868 copied
4.686091ms: AFTER 27868 grouping
3.220858ms: AFTER 27868 copied
4.722314ms: AFTER 27868 grouping
3.223877ms: AFTER 27868 copied
4.715976ms: AFTER 27868 grouping
3.219046ms: AFTER 27868 copied
6.170946ms: AFTER 27868 grouping
3.432161ms: AFTER 27868 copied
5.711212ms: AFTER 27868 grouping
3.097397ms: AFTER 27868 copied
5.504135ms: AFTER 27868 grouping
3.335565ms: AFTER 27868 copied
4.616362ms: AFTER 27868 grouping
3.853559ms: AFTER 27868 copied
4.69394ms: AFTER 27868 grouping
3.503098ms: AFTER 27868 copied
4.704505ms: AFTER 27868 grouping
3.180107ms: AFTER 27868 copied
4.882905ms: AFTER 27868 grouping
3.155053ms: AFTER 27868 copied
4.700581ms: AFTER 27868 grouping
3.239573ms: AFTER 27868 copied
5.291927ms: AFTER 27868 grouping
3.150223ms: AFTER 27868 copied
5.000933ms: AFTER 27868 grouping
3.355488ms: AFTER 27868 copied
5.610994ms: AFTER 27868 grouping
3.176787ms: AFTER 27868 copied
5.137072ms: AFTER 27868 grouping
3.530568ms: AFTER 27868 copied
4.77031ms: AFTER 27868 grouping
3.523322ms: AFTER 27868 copied
4.682771ms: AFTER 27868 grouping
3.458422ms: AFTER 27868 copied
4.681262ms: AFTER 27868 grouping
3.253157ms: AFTER 27868 copied
4.81559ms: AFTER 27868 grouping
3.183427ms: AFTER 27868 copied
4.818005ms: AFTER 27868 grouping
3.232026ms: AFTER 27868 copied
5.660198ms: AFTER 27868 grouping
3.075965ms: AFTER 27868 copied
6.042656ms: AFTER 27868 grouping
3.491023ms: AFTER 27868 copied
7.402238ms: AFTER 84860 grouping
16.392567ms: AFTER 84860 copied
5.866972ms: AFTER 84860 grouping
13.6731ms: AFTER 84860 copied
5.819882ms: AFTER 84860 grouping
14.328138ms: AFTER 84860 copied
5.726305ms: AFTER 84860 grouping
13.569863ms: AFTER 84860 copied
7.198179ms: AFTER 84860 grouping
14.633019ms: AFTER 84860 copied
7.60871ms: AFTER 84860 grouping
13.86599ms: AFTER 84860 copied
7.8665ms: AFTER 84860 grouping
16.419735ms: AFTER 84860 copied
7.687799ms: AFTER 84860 grouping
17.458741ms: AFTER 84860 copied
7.645839ms: AFTER 84860 grouping
14.193509ms: AFTER 84860 copied
7.349412ms: AFTER 84860 grouping
14.083329ms: AFTER 84860 copied
7.881593ms: AFTER 84860 grouping
14.360437ms: AFTER 84860 copied
6.937372ms: AFTER 84860 grouping
13.8838ms: AFTER 84860 copied
6.988084ms: AFTER 84860 grouping
15.681986ms: AFTER 84860 copied
7.011026ms: AFTER 84860 grouping
20.559759ms: AFTER 84860 copied
6.954578ms: AFTER 84860 grouping
15.634292ms: AFTER 84860 copied
7.052985ms: AFTER 84860 grouping
16.104893ms: AFTER 84860 copied
7.52268ms: AFTER 84860 grouping
14.02658ms: AFTER 84860 copied
7.503663ms: AFTER 84860 grouping
14.063407ms: AFTER 84860 copied
7.09766ms: AFTER 84860 grouping
18.091139ms: AFTER 84860 copied
7.015855ms: AFTER 84860 grouping
13.852406ms: AFTER 84860 copied
7.264891ms: AFTER 84860 grouping
14.507142ms: AFTER 84860 copied
7.075624ms: AFTER 84860 grouping
14.694598ms: AFTER 84860 copied
7.654896ms: AFTER 84860 grouping
13.579825ms: AFTER 84860 copied
7.745453ms: AFTER 84860 grouping
14.447072ms: AFTER 84860 copied
6.46677ms: AFTER 84860 grouping
15.424196ms: AFTER 84860 copied
7.073813ms: AFTER 84860 grouping
14.403302ms: AFTER 84860 copied
6.850737ms: AFTER 84860 grouping
14.801457ms: AFTER 84860 copied
7.067474ms: AFTER 84860 grouping
14.704258ms: AFTER 84860 copied
7.284814ms: AFTER 84860 grouping
15.380728ms: AFTER 84860 copied
8.264353ms: AFTER 84860 grouping
16.105195ms: AFTER 84860 copied
6.789762ms: AFTER 84860 grouping
14.132532ms: AFTER 84860 copied
7.411897ms: AFTER 84860 grouping
13.50436ms: AFTER 84860 copied
7.515435ms: AFTER 84860 grouping
13.782374ms: AFTER 84860 copied
7.632859ms: AFTER 84860 grouping
19.021173ms: AFTER 84860 copied
6.845907ms: AFTER 84860 grouping
13.924249ms: AFTER 84860 copied
7.62169ms: AFTER 84860 grouping
16.76929ms: AFTER 84860 copied
7.572185ms: AFTER 84860 grouping
15.32428ms: AFTER 84860 copied
8.183756ms: AFTER 84860 grouping
15.883025ms: AFTER 84860 copied
7.748774ms: AFTER 84860 grouping
19.239721ms: AFTER 84860 copied
8.446375ms: AFTER 84860 grouping
14.674675ms: AFTER 84860 copied
7.254325ms: AFTER 84860 grouping
20.132324ms: AFTER 84860 copied
9.691552ms: AFTER 84860 grouping
16.057803ms: AFTER 84860 copied
7.186106ms: AFTER 84860 grouping
14.07367ms: AFTER 84860 copied
7.228366ms: AFTER 84860 grouping
13.892553ms: AFTER 84860 copied
5.780036ms: AFTER 84860 grouping
13.579221ms: AFTER 84860 copied
6.616795ms: AFTER 84860 grouping
13.48504ms: AFTER 84860 copied
5.758302ms: AFTER 84860 grouping
13.642914ms: AFTER 84860 copied
5.758906ms: AFTER 84860 grouping
13.289737ms: AFTER 84860 copied
5.815052ms: AFTER 84860 grouping
13.362787ms: AFTER 84860 copied
5.679818ms: AFTER 84860 grouping
13.370334ms: AFTER 84860 copied
5.758001ms: AFTER 84860 grouping
13.346486ms: AFTER 84860 copied
6.408209ms: AFTER 84860 grouping
13.308452ms: AFTER 84860 copied
6.654226ms: AFTER 84860 grouping
13.338035ms: AFTER 84860 copied
6.937372ms: AFTER 84860 grouping
12.777478ms: AFTER 84860 copied
6.463752ms: AFTER 84860 grouping
13.009006ms: AFTER 84860 copied
6.103329ms: AFTER 84860 grouping
13.015043ms: AFTER 84860 copied
10.127742ms: AFTER 242931 grouping
15.079169ms: AFTER 242931 copied
8.063012ms: AFTER 242931 grouping
14.664714ms: AFTER 242931 copied
8.703259ms: AFTER 242931 grouping
14.831643ms: AFTER 242931 copied
10.168191ms: AFTER 242931 grouping
15.650592ms: AFTER 242931 copied
11.532301ms: AFTER 242931 grouping
15.528338ms: AFTER 242931 copied
11.455327ms: AFTER 242931 grouping
16.507274ms: AFTER 242931 copied
8.417095ms: AFTER 242931 grouping
14.66894ms: AFTER 242931 copied
8.181039ms: AFTER 242931 grouping
14.747725ms: AFTER 242931 copied
8.703259ms: AFTER 242931 grouping
14.626981ms: AFTER 242931 copied
8.717145ms: AFTER 242931 grouping
14.52465ms: AFTER 242931 copied
9.046777ms: AFTER 242931 grouping
14.278331ms: AFTER 242931 copied
8.979764ms: AFTER 242931 grouping
14.262937ms: AFTER 242931 copied
9.202839ms: AFTER 242931 grouping
14.482088ms: AFTER 242931 copied
8.189189ms: AFTER 242931 grouping
14.765536ms: AFTER 242931 copied
7.935626ms: AFTER 242931 grouping
14.676185ms: AFTER 242931 copied
7.940154ms: AFTER 242931 grouping
14.675279ms: AFTER 242931 copied
8.0449ms: AFTER 242931 grouping
15.016985ms: AFTER 242931 copied
7.858652ms: AFTER 242931 grouping
14.90258ms: AFTER 242931 copied
7.741228ms: AFTER 242931 grouping
16.479201ms: AFTER 242931 copied
7.813373ms: AFTER 242931 grouping
14.794816ms: AFTER 242931 copied
7.938645ms: AFTER 242931 grouping
14.621849ms: AFTER 242931 copied
8.687562ms: AFTER 242931 grouping
14.528272ms: AFTER 242931 copied
8.305105ms: AFTER 242931 grouping
14.810211ms: AFTER 242931 copied
8.765141ms: AFTER 242931 grouping
14.592871ms: AFTER 242931 copied
8.069652ms: AFTER 242931 grouping
14.831643ms: AFTER 242931 copied
8.934787ms: AFTER 242931 grouping
14.721464ms: AFTER 242931 copied
10.150985ms: AFTER 242931 grouping
14.56027ms: AFTER 242931 copied
8.352195ms: AFTER 242931 grouping
15.048681ms: AFTER 242931 copied
9.112281ms: AFTER 242931 grouping
14.714823ms: AFTER 242931 copied
8.843927ms: AFTER 242931 grouping
14.681618ms: AFTER 242931 copied
8.729521ms: AFTER 242931 grouping
15.028154ms: AFTER 242931 copied
8.660697ms: AFTER 242931 grouping
14.550912ms: AFTER 242931 copied
10.835304ms: AFTER 242931 grouping
14.434997ms: AFTER 242931 copied
8.84121ms: AFTER 242931 grouping
14.620038ms: AFTER 242931 copied
8.73103ms: AFTER 242931 grouping
14.583212ms: AFTER 242931 copied
8.241713ms: AFTER 242931 grouping
14.435903ms: AFTER 242931 copied
11.032118ms: AFTER 242931 grouping
14.609171ms: AFTER 242931 copied
9.337771ms: AFTER 242931 grouping
14.823191ms: AFTER 242931 copied
9.166615ms: AFTER 242931 grouping
14.307915ms: AFTER 242931 copied
9.735322ms: AFTER 242931 grouping
14.358626ms: AFTER 242931 copied
8.909732ms: AFTER 242931 grouping
14.949671ms: AFTER 242931 copied
8.933579ms: AFTER 242931 grouping
14.413566ms: AFTER 242931 copied
10.86066ms: AFTER 242931 grouping
17.467796ms: AFTER 242931 copied
8.683035ms: AFTER 242931 grouping
14.771874ms: AFTER 242931 copied
11.758395ms: AFTER 242931 grouping
15.321262ms: AFTER 242931 copied
11.742397ms: AFTER 242931 grouping
15.904458ms: AFTER 242931 copied
11.039965ms: AFTER 242931 grouping
17.421611ms: AFTER 242931 copied
9.44312ms: AFTER 242931 grouping
16.841435ms: AFTER 242931 copied
11.432386ms: AFTER 242931 grouping
19.15701ms: AFTER 242931 copied
12.478334ms: AFTER 242931 grouping
17.310828ms: AFTER 242931 copied
11.288096ms: AFTER 242931 grouping
19.848575ms: AFTER 242931 copied
12.079576ms: AFTER 242931 grouping
15.355674ms: AFTER 242931 copied
11.625576ms: AFTER 242931 grouping
15.773449ms: AFTER 242931 copied
12.956482ms: AFTER 242931 grouping
17.326827ms: AFTER 242931 copied
12.553195ms: AFTER 242931 grouping
20.356305ms: AFTER 242931 copied
11.487022ms: AFTER 242931 grouping
18.694258ms: AFTER 242931 copied
12.032183ms: AFTER 242931 grouping
21.018588ms: AFTER 242931 copied
11.615917ms: AFTER 242931 grouping
15.940379ms: AFTER 242931 copied
11.417292ms: AFTER 242931 grouping
15.075547ms: AFTER 242931 copied
11.547998ms: AFTER 242931 grouping
18.996722ms: AFTER 242931 copied
15.839557ms: AFTER 242931 grouping
16.828152ms: AFTER 242931 copied
12.472297ms: AFTER 242931 grouping
17.337091ms: AFTER 242931 copied
16.815776ms: AFTER 242931 grouping
16.95101ms: AFTER 242931 copied
8.286992ms: AFTER 242931 grouping
14.44677ms: AFTER 242931 copied
8.312953ms: AFTER 242931 grouping
15.007628ms: AFTER 242931 copied
8.507653ms: AFTER 242931 grouping
14.738972ms: AFTER 242931 copied
8.137269ms: AFTER 242931 grouping
15.151313ms: AFTER 242931 copied
8.942937ms: AFTER 242931 grouping
15.050493ms: AFTER 242931 copied
9.004818ms: AFTER 242931 grouping
14.137664ms: AFTER 242931 copied
11.877027ms: AFTER 328666 grouping
16.283897ms: AFTER 328666 copied
11.253986ms: AFTER 328666 grouping
16.271823ms: AFTER 328666 copied
10.722408ms: AFTER 328666 grouping
16.765667ms: AFTER 328666 copied
11.081321ms: AFTER 328666 grouping
16.463504ms: AFTER 328666 copied
9.821353ms: AFTER 328666 grouping
16.43362ms: AFTER 328666 copied
9.736832ms: AFTER 328666 grouping
16.281482ms: AFTER 328666 copied
9.696986ms: AFTER 328666 grouping
16.46441ms: AFTER 328666 copied
10.78761ms: AFTER 328666 grouping
16.274841ms: AFTER 328666 copied
12.759669ms: AFTER 328666 grouping
16.603266ms: AFTER 328666 copied
9.663781ms: AFTER 328666 grouping
16.192735ms: AFTER 328666 copied
9.678572ms: AFTER 328666 grouping
16.579419ms: AFTER 328666 copied
11.004648ms: AFTER 328666 grouping
16.489162ms: AFTER 328666 copied
10.329083ms: AFTER 328666 grouping
16.353929ms: AFTER 328666 copied
10.464317ms: AFTER 328666 grouping
17.008967ms: AFTER 328666 copied
9.775772ms: AFTER 328666 grouping
16.313177ms: AFTER 328666 copied
9.589825ms: AFTER 328666 grouping
16.401622ms: AFTER 328666 copied
11.010987ms: AFTER 328666 grouping
16.312573ms: AFTER 328666 copied
10.247279ms: AFTER 328666 grouping
16.624698ms: AFTER 328666 copied
13.1379ms: AFTER 328666 grouping
16.525084ms: AFTER 328666 copied
9.884743ms: AFTER 328666 grouping
16.190924ms: AFTER 328666 copied
9.645669ms: AFTER 328666 grouping
16.634055ms: AFTER 328666 copied
10.162154ms: AFTER 328666 grouping
16.45626ms: AFTER 328666 copied
10.587778ms: AFTER 328666 grouping
16.230467ms: AFTER 328666 copied
10.355345ms: AFTER 328666 grouping
16.254012ms: AFTER 328666 copied
9.787243ms: AFTER 328666 grouping
16.303216ms: AFTER 328666 copied
13.835804ms: AFTER 328666 grouping
17.764828ms: AFTER 328666 copied
14.37372ms: AFTER 328666 grouping
19.149766ms: AFTER 328666 copied
9.557526ms: AFTER 328666 grouping
16.55044ms: AFTER 328666 copied
11.140787ms: AFTER 328666 grouping
16.322234ms: AFTER 328666 copied
10.429905ms: AFTER 328666 grouping
16.528404ms: AFTER 328666 copied
9.661064ms: AFTER 328666 grouping
16.365399ms: AFTER 328666 copied
9.893497ms: AFTER 328666 grouping
16.184886ms: AFTER 328666 copied
10.906242ms: AFTER 328666 grouping
16.207526ms: AFTER 328666 copied
10.687996ms: AFTER 328666 grouping
16.294462ms: AFTER 328666 copied
10.577213ms: AFTER 328666 grouping
16.308649ms: AFTER 328666 copied
10.074615ms: AFTER 328666 grouping
16.192131ms: AFTER 328666 copied
9.740755ms: AFTER 328666 grouping
16.327063ms: AFTER 328666 copied
9.836748ms: AFTER 328666 grouping
16.269106ms: AFTER 328666 copied
10.383418ms: AFTER 328666 grouping
16.445393ms: AFTER 328666 copied
10.333611ms: AFTER 328666 grouping
16.353023ms: AFTER 328666 copied
10.056804ms: AFTER 328666 grouping
16.350608ms: AFTER 328666 copied
10.862471ms: AFTER 328666 grouping
16.531121ms: AFTER 328666 copied
10.415717ms: AFTER 328666 grouping
17.537828ms: AFTER 328666 copied
9.643556ms: AFTER 328666 grouping
16.401019ms: AFTER 328666 copied
14.350778ms: AFTER 328666 grouping
16.653374ms: AFTER 328666 copied
14.288595ms: AFTER 328666 grouping
20.895731ms: AFTER 328666 copied
14.108082ms: AFTER 328666 grouping
20.052028ms: AFTER 328666 copied
14.681316ms: AFTER 328666 grouping
18.937256ms: AFTER 328666 copied
13.683363ms: AFTER 328666 grouping
17.839689ms: AFTER 328666 copied
10.630038ms: AFTER 328666 grouping
17.423725ms: AFTER 328666 copied
13.30815ms: AFTER 328666 grouping
17.933266ms: AFTER 328666 copied
14.292821ms: AFTER 328666 grouping
18.335647ms: AFTER 328666 copied
14.108686ms: AFTER 328666 grouping
17.282453ms: AFTER 328666 copied
14.316064ms: AFTER 328666 grouping
17.879535ms: AFTER 328666 copied
13.76879ms: AFTER 328666 grouping
20.693484ms: AFTER 328666 copied
14.044389ms: AFTER 328666 grouping
22.873223ms: AFTER 328666 copied
17.357919ms: AFTER 328666 grouping
19.5932ms: AFTER 328666 copied
42.322434ms: AFTER 1103347 grouping
21.8315ms: AFTER 1103347 copied
35.601498ms: AFTER 1103347 grouping
22.126418ms: AFTER 1103347 copied
24.493915ms: AFTER 1103347 grouping
19.72451ms: AFTER 1103347 copied
21.189441ms: AFTER 1103347 grouping
20.075876ms: AFTER 1103347 copied
21.867723ms: AFTER 1103347 grouping
19.667457ms: AFTER 1103347 copied
20.633413ms: AFTER 1103347 grouping
20.194206ms: AFTER 1103347 copied
22.828849ms: AFTER 1103347 grouping
22.966497ms: AFTER 1103347 copied
21.486472ms: AFTER 1103347 grouping
20.620433ms: AFTER 1103347 copied
20.929238ms: AFTER 1103347 grouping
19.887816ms: AFTER 1103347 copied
21.481643ms: AFTER 1103347 grouping
20.086139ms: AFTER 1103347 copied
21.026134ms: AFTER 1103347 grouping
20.18364ms: AFTER 1103347 copied
22.359455ms: AFTER 1103347 grouping
20.085234ms: AFTER 1103347 copied
21.25404ms: AFTER 1103347 grouping
19.728132ms: AFTER 1103347 copied
21.000174ms: AFTER 1103347 grouping
19.868497ms: AFTER 1103347 copied
28.419014ms: AFTER 1103347 grouping
20.072858ms: AFTER 1103347 copied
21.848102ms: AFTER 1103347 grouping
19.817483ms: AFTER 1103347 copied
21.567975ms: AFTER 1103347 grouping
19.918606ms: AFTER 1103347 copied
21.286942ms: AFTER 1103347 grouping
20.365965ms: AFTER 1103347 copied
24.471577ms: AFTER 1103347 grouping
19.757412ms: AFTER 1103347 copied
21.386255ms: AFTER 1103347 grouping
20.495765ms: AFTER 1103347 copied
21.86561ms: AFTER 1103347 grouping
19.642403ms: AFTER 1103347 copied
33.136198ms: AFTER 1103347 grouping
20.103043ms: AFTER 1103347 copied
20.97663ms: AFTER 1103347 grouping
19.736282ms: AFTER 1103347 copied
33.717583ms: AFTER 1103347 grouping
21.700191ms: AFTER 1103347 copied
21.881005ms: AFTER 1103347 grouping
19.700964ms: AFTER 1103347 copied
20.606246ms: AFTER 1103347 grouping
20.352682ms: AFTER 1103347 copied
21.72132ms: AFTER 1103347 grouping
19.970828ms: AFTER 1103347 copied
22.066046ms: AFTER 1103347 grouping
20.047199ms: AFTER 1103347 copied
20.910522ms: AFTER 1103347 grouping
19.714247ms: AFTER 1103347 copied
23.868157ms: AFTER 1103347 grouping
20.171868ms: AFTER 1103347 copied
22.893447ms: AFTER 1103347 grouping
19.783071ms: AFTER 1103347 copied
34.29293ms: AFTER 1103347 grouping
22.558985ms: AFTER 1103347 copied
24.289253ms: AFTER 1103347 grouping
20.590549ms: AFTER 1103347 copied
30.553776ms: AFTER 1103347 grouping
20.054746ms: AFTER 1103347 copied
22.729838ms: AFTER 1103347 grouping
19.996486ms: AFTER 1103347 copied
Benchmark 2: AFTER 16755 grouping
  Time (mean ± σ): 5.275493 ms ± 633.937194 µs
  Range (min … max): 4.449735 ms … 8.529085 ms 70 runs
Benchmark 3: AFTER 84860 grouping
  Time (mean ± σ): 7.066945 ms ± 788.327934 µs
  Range (min … max): 5.679818 ms … 9.691552 ms 56 runs
Benchmark 4: AFTER 242931 grouping
  Time (mean ± σ): 9.818806 ms ± 1.865016 ms
  Range (min … max): 7.741228 ms … 16.815776 ms 69 runs
Benchmark 1: AFTER 27868 grouping
  Time (mean ± σ): 5.177698 ms ± 507.015423 µs
  Range (min … max): 4.598552 ms … 6.450470 ms 60 runs
Benchmark 5: AFTER 328666 grouping
  Time (mean ± σ): 11.375662 ms ± 1.868803 ms
  Range (min … max): 9.557526 ms … 17.357919 ms 57 runs
Benchmark 6: AFTER 1103347 grouping
  Time (mean ± σ): 24.370367 ms ± 5.246688 ms
  Range (min … max): 20.606246 ms … 42.322434 ms 35 runs
Benchmark 2: AFTER 16755 copied
  Time (mean ± σ): 3.460630 ms ± 478.347340 µs
  Range (min … max): 3.022837 ms … 6.170644 ms 70 runs
Benchmark 3: AFTER 84860 copied
  Time (mean ± σ): 14.872518 ms ± 1.779625 ms
  Range (min … max): 12.777478 ms … 20.559759 ms 56 runs
Benchmark 4: AFTER 242931 copied
  Time (mean ± σ): 15.559749 ms ± 1.557003 ms
  Range (min … max): 14.137664 ms … 21.018588 ms 69 runs
Benchmark 1: AFTER 27868 copied
  Time (mean ± σ): 3.327219 ms ± 220.928183 µs
  Range (min … max): 3.055137 ms … 3.865633 ms 60 runs
Benchmark 5: AFTER 328666 copied
  Time (mean ± σ): 17.073497 ms ± 1.381677 ms
  Range (min … max): 16.184886 ms … 22.873223 ms 57 runs
Benchmark 6: AFTER 1103347 copied
  Time (mean ± σ): 20.331371 ms ± 835.939137 µs
  Range (min … max): 19.642403 ms … 22.966497 ms 35 runs
--&gt;
&lt;p&gt;&lt;/p&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;grouping&lt;/q&gt;, serial &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;4.453ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.115ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;23.344ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;327µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;686µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.847ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;grouping&lt;/q&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.275ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7.067ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9.819ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;634µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;788µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.865ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;copying&lt;/q&gt;, serial &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.763ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.469ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12.275ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;209µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.256ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;825µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;copying&lt;/q&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.461ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;14.873ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;15.560ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;478µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.780ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.557ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-21.07%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.86%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;28.75%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;grouping&lt;/q&gt;, serial &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.699ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;31.908ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;94.578ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;699µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.523ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8.194ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;grouping&lt;/q&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.178ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.376ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;24.370ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;507µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.869ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.247ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;copying&lt;/q&gt;, serial &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.937ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;14.389ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16.953ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;323µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.111ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.347ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;copying&lt;/q&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.327ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;17.073ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20.331ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;221µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.382ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;836µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.52%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;38.55%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;59.92%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p class=&quot;continued&quot;&gt;
That's&lt;!--'--&gt; a lot of locking and unwraps, and the threads holding the mutexes can never panick, so the unwraps are always successful, so maybe…
just assume the unwrap always succeeds?
&lt;/p&gt;
&lt;!--
5.658387ms: AFTER_unchecked 16755 grouping
4.587383ms: AFTER_unchecked 16755 grouping
4.964106ms: AFTER_unchecked 16755 grouping
4.830683ms: AFTER_unchecked 16755 grouping
5.235177ms: AFTER_unchecked 16755 grouping
5.874519ms: AFTER_unchecked 16755 grouping
6.524425ms: AFTER_unchecked 16755 grouping
5.731437ms: AFTER_unchecked 16755 grouping
5.064625ms: AFTER_unchecked 16755 grouping
4.853625ms: AFTER_unchecked 16755 grouping
4.616059ms: AFTER_unchecked 16755 grouping
4.51222ms: AFTER_unchecked 16755 grouping
4.602476ms: AFTER_unchecked 16755 grouping
4.617871ms: AFTER_unchecked 16755 grouping
4.458488ms: AFTER_unchecked 16755 grouping
4.631153ms: AFTER_unchecked 16755 grouping
4.527313ms: AFTER_unchecked 16755 grouping
4.958068ms: AFTER_unchecked 16755 grouping
4.58527ms: AFTER_unchecked 16755 grouping
5.15126ms: AFTER_unchecked 16755 grouping
5.53402ms: AFTER_unchecked 16755 grouping
5.576582ms: AFTER_unchecked 16755 grouping
5.133751ms: AFTER_unchecked 16755 grouping
4.835211ms: AFTER_unchecked 16755 grouping
4.617871ms: AFTER_unchecked 16755 grouping
4.627229ms: AFTER_unchecked 16755 grouping
4.608513ms: AFTER_unchecked 16755 grouping
4.529425ms: AFTER_unchecked 16755 grouping
4.587081ms: AFTER_unchecked 16755 grouping
4.579836ms: AFTER_unchecked 16755 grouping
4.55448ms: AFTER_unchecked 16755 grouping
4.666772ms: AFTER_unchecked 16755 grouping
4.863887ms: AFTER_unchecked 16755 grouping
5.068852ms: AFTER_unchecked 16755 grouping
4.719296ms: AFTER_unchecked 16755 grouping
5.365581ms: AFTER_unchecked 16755 grouping
5.344451ms: AFTER_unchecked 16755 grouping
5.423539ms: AFTER_unchecked 16755 grouping
5.821693ms: AFTER_unchecked 16755 grouping
4.803515ms: AFTER_unchecked 16755 grouping
5.185974ms: AFTER_unchecked 16755 grouping
5.752567ms: AFTER_unchecked 16755 grouping
5.789998ms: AFTER_unchecked 16755 grouping
4.891357ms: AFTER_unchecked 16755 grouping
4.837928ms: AFTER_unchecked 16755 grouping
5.084246ms: AFTER_unchecked 16755 grouping
5.535227ms: AFTER_unchecked 16755 grouping
5.631219ms: AFTER_unchecked 16755 grouping
5.700345ms: AFTER_unchecked 16755 grouping
5.776414ms: AFTER_unchecked 16755 grouping
5.738379ms: AFTER_unchecked 16755 grouping
6.275692ms: AFTER_unchecked 16755 grouping
4.918223ms: AFTER_unchecked 16755 grouping
4.769707ms: AFTER_unchecked 16755 grouping
5.139487ms: AFTER_unchecked 16755 grouping
5.3686ms: AFTER_unchecked 16755 grouping
5.627597ms: AFTER_unchecked 16755 grouping
4.893772ms: AFTER_unchecked 16755 grouping
4.809854ms: AFTER_unchecked 16755 grouping
5.534925ms: AFTER_unchecked 16755 grouping
5.435914ms: AFTER_unchecked 16755 grouping
5.921308ms: AFTER_unchecked 16755 grouping
4.876566ms: AFTER_unchecked 16755 grouping
4.90162ms: AFTER_unchecked 16755 grouping
5.146128ms: AFTER_unchecked 16755 grouping
5.452819ms: AFTER_unchecked 16755 grouping
5.423237ms: AFTER_unchecked 16755 grouping
5.112018ms: AFTER_unchecked 16755 grouping
5.010592ms: AFTER_unchecked 16755 grouping
4.93875ms: AFTER_unchecked 16755 grouping
5.344149ms: AFTER_unchecked 16755 grouping
5.961153ms: AFTER_unchecked 16755 grouping
5.671668ms: AFTER_unchecked 16755 grouping
5.154882ms: AFTER_unchecked 16755 grouping
6.235243ms: AFTER_unchecked 16755 grouping
6.253053ms: AFTER_unchecked 16755 grouping
5.467912ms: AFTER_unchecked 16755 grouping
5.609183ms: AFTER_unchecked 16755 grouping
5.782451ms: AFTER_unchecked 16755 grouping
5.422331ms: AFTER_unchecked 16755 grouping
4.950824ms: AFTER_unchecked 16755 grouping
4.808044ms: AFTER_unchecked 16755 grouping
4.796271ms: AFTER_unchecked 16755 grouping
5.112017ms: AFTER_unchecked 16755 grouping
6.44232ms: AFTER_unchecked 16755 grouping
5.006065ms: AFTER_unchecked 16755 grouping
4.914298ms: AFTER_unchecked 16755 grouping
7.694138ms: AFTER_unchecked 16755 grouping
5.294342ms: AFTER_unchecked 16755 grouping
5.336602ms: AFTER_unchecked 16755 grouping
5.863048ms: AFTER_unchecked 16755 grouping
5.77249ms: AFTER_unchecked 16755 grouping
5.399088ms: AFTER_unchecked 16755 grouping
5.620955ms: AFTER_unchecked 16755 grouping
5.604957ms: AFTER_unchecked 16755 grouping
5.927345ms: AFTER_unchecked 16755 grouping
4.881094ms: AFTER_unchecked 16755 grouping
5.962964ms: AFTER_unchecked 16755 grouping
5.873009ms: AFTER_unchecked 16755 grouping
4.50407ms: AFTER_unchecked 16755 grouping
4.558405ms: AFTER_unchecked 16755 grouping
4.938146ms: AFTER_unchecked 16755 grouping
4.563234ms: AFTER_unchecked 16755 grouping
4.725938ms: AFTER_unchecked 16755 grouping
4.926071ms: AFTER_unchecked 16755 grouping
5.717249ms: AFTER_unchecked 16755 grouping
5.4498ms: AFTER_unchecked 16755 grouping
4.914902ms: AFTER_unchecked 16755 grouping
4.694241ms: AFTER_unchecked 16755 grouping
4.621493ms: AFTER_unchecked 16755 grouping
4.578629ms: AFTER_unchecked 16755 grouping
4.692733ms: AFTER_unchecked 16755 grouping
4.686998ms: AFTER_unchecked 16755 grouping
4.789026ms: AFTER_unchecked 16755 grouping
5.03142ms: AFTER_unchecked 16755 grouping
5.247554ms: AFTER_unchecked 16755 grouping
5.253591ms: AFTER_unchecked 16755 grouping
5.266268ms: AFTER_unchecked 16755 grouping
4.614852ms: AFTER_unchecked 16755 grouping
4.530332ms: AFTER_unchecked 16755 grouping
4.714165ms: AFTER_unchecked 16755 grouping
4.649868ms: AFTER_unchecked 16755 grouping
4.57078ms: AFTER_unchecked 16755 grouping
4.565045ms: AFTER_unchecked 16755 grouping
4.57229ms: AFTER_unchecked 16755 grouping
4.508899ms: AFTER_unchecked 16755 grouping
5.529492ms: AFTER_unchecked 16755 grouping
5.191105ms: AFTER_unchecked 16755 grouping
4.851512ms: AFTER_unchecked 16755 grouping
4.569875ms: AFTER_unchecked 16755 grouping
4.727748ms: AFTER_unchecked 16755 grouping
4.418039ms: AFTER_unchecked 16755 grouping
4.642624ms: AFTER_unchecked 16755 grouping
4.584063ms: AFTER_unchecked 16755 grouping
4.559914ms: AFTER_unchecked 16755 grouping
4.557499ms: AFTER_unchecked 16755 grouping
4.668584ms: AFTER_unchecked 16755 grouping
4.541802ms: AFTER_unchecked 16755 grouping
4.850002ms: AFTER_unchecked 16755 grouping
4.899507ms: AFTER_unchecked 16755 grouping
5.153373ms: AFTER_unchecked 16755 grouping
5.583525ms: AFTER_unchecked 16755 grouping
5.14975ms: AFTER_unchecked 16755 grouping
4.71175ms: AFTER_unchecked 16755 grouping
4.62904ms: AFTER_unchecked 16755 grouping
4.572591ms: AFTER_unchecked 16755 grouping
4.860869ms: AFTER_unchecked 27868 grouping
5.604052ms: AFTER_unchecked 27868 grouping
5.569337ms: AFTER_unchecked 27868 grouping
5.447989ms: AFTER_unchecked 27868 grouping
4.685488ms: AFTER_unchecked 27868 grouping
4.649869ms: AFTER_unchecked 27868 grouping
4.861775ms: AFTER_unchecked 27868 grouping
4.704807ms: AFTER_unchecked 27868 grouping
5.263551ms: AFTER_unchecked 27868 grouping
5.924024ms: AFTER_unchecked 27868 grouping
5.307321ms: AFTER_unchecked 27868 grouping
4.785404ms: AFTER_unchecked 27868 grouping
4.745257ms: AFTER_unchecked 27868 grouping
4.774235ms: AFTER_unchecked 27868 grouping
4.776348ms: AFTER_unchecked 27868 grouping
4.642322ms: AFTER_unchecked 27868 grouping
5.642689ms: AFTER_unchecked 27868 grouping
6.10514ms: AFTER_unchecked 27868 grouping
5.689176ms: AFTER_unchecked 27868 grouping
5.469421ms: AFTER_unchecked 27868 grouping
5.541566ms: AFTER_unchecked 27868 grouping
4.725334ms: AFTER_unchecked 27868 grouping
4.662245ms: AFTER_unchecked 27868 grouping
4.680658ms: AFTER_unchecked 27868 grouping
4.790837ms: AFTER_unchecked 27868 grouping
5.627898ms: AFTER_unchecked 27868 grouping
5.580205ms: AFTER_unchecked 27868 grouping
5.203179ms: AFTER_unchecked 27868 grouping
4.826759ms: AFTER_unchecked 27868 grouping
4.674319ms: AFTER_unchecked 27868 grouping
4.781178ms: AFTER_unchecked 27868 grouping
5.512286ms: AFTER_unchecked 27868 grouping
4.602476ms: AFTER_unchecked 27868 grouping
5.192615ms: AFTER_unchecked 27868 grouping
5.82441ms: AFTER_unchecked 27868 grouping
5.4661ms: AFTER_unchecked 27868 grouping
4.802007ms: AFTER_unchecked 27868 grouping
4.712655ms: AFTER_unchecked 27868 grouping
4.665565ms: AFTER_unchecked 27868 grouping
4.651981ms: AFTER_unchecked 27868 grouping
4.806534ms: AFTER_unchecked 27868 grouping
6.159778ms: AFTER_unchecked 27868 grouping
5.585939ms: AFTER_unchecked 27868 grouping
5.495381ms: AFTER_unchecked 27868 grouping
4.822231ms: AFTER_unchecked 27868 grouping
5.536435ms: AFTER_unchecked 27868 grouping
5.062512ms: AFTER_unchecked 27868 grouping
4.85121ms: AFTER_unchecked 27868 grouping
4.868416ms: AFTER_unchecked 27868 grouping
5.309435ms: AFTER_unchecked 27868 grouping
4.734691ms: AFTER_unchecked 27868 grouping
5.033232ms: AFTER_unchecked 27868 grouping
5.095416ms: AFTER_unchecked 27868 grouping
5.634539ms: AFTER_unchecked 27868 grouping
5.396975ms: AFTER_unchecked 27868 grouping
5.170578ms: AFTER_unchecked 27868 grouping
4.761859ms: AFTER_unchecked 27868 grouping
5.223103ms: AFTER_unchecked 27868 grouping
5.458252ms: AFTER_unchecked 27868 grouping
5.034741ms: AFTER_unchecked 27868 grouping
5.729625ms: AFTER_unchecked 27868 grouping
5.54217ms: AFTER_unchecked 27868 grouping
6.449262ms: AFTER_unchecked 27868 grouping
5.58775ms: AFTER_unchecked 27868 grouping
5.455838ms: AFTER_unchecked 27868 grouping
4.971048ms: AFTER_unchecked 27868 grouping
4.65983ms: AFTER_unchecked 27868 grouping
4.739823ms: AFTER_unchecked 27868 grouping
4.778461ms: AFTER_unchecked 27868 grouping
4.773027ms: AFTER_unchecked 27868 grouping
5.754679ms: AFTER_unchecked 27868 grouping
5.887499ms: AFTER_unchecked 27868 grouping
5.315774ms: AFTER_unchecked 27868 grouping
4.596741ms: AFTER_unchecked 27868 grouping
4.594024ms: AFTER_unchecked 27868 grouping
4.810156ms: AFTER_unchecked 27868 grouping
4.707222ms: AFTER_unchecked 27868 grouping
6.307085ms: AFTER_unchecked 84860 grouping
7.078039ms: AFTER_unchecked 84860 grouping
7.80975ms: AFTER_unchecked 84860 grouping
7.621992ms: AFTER_unchecked 84860 grouping
7.466232ms: AFTER_unchecked 84860 grouping
7.64584ms: AFTER_unchecked 84860 grouping
7.06687ms: AFTER_unchecked 84860 grouping
6.960313ms: AFTER_unchecked 84860 grouping
6.947936ms: AFTER_unchecked 84860 grouping
6.875189ms: AFTER_unchecked 84860 grouping
6.969067ms: AFTER_unchecked 84860 grouping
6.929523ms: AFTER_unchecked 84860 grouping
7.010724ms: AFTER_unchecked 84860 grouping
7.464119ms: AFTER_unchecked 84860 grouping
7.960077ms: AFTER_unchecked 84860 grouping
7.462308ms: AFTER_unchecked 84860 grouping
8.029204ms: AFTER_unchecked 84860 grouping
7.068984ms: AFTER_unchecked 84860 grouping
7.322245ms: AFTER_unchecked 84860 grouping
7.523284ms: AFTER_unchecked 84860 grouping
7.642217ms: AFTER_unchecked 84860 grouping
7.562224ms: AFTER_unchecked 84860 grouping
6.825683ms: AFTER_unchecked 84860 grouping
7.186709ms: AFTER_unchecked 84860 grouping
8.072974ms: AFTER_unchecked 84860 grouping
8.020751ms: AFTER_unchecked 84860 grouping
8.258014ms: AFTER_unchecked 84860 grouping
7.437555ms: AFTER_unchecked 84860 grouping
9.707249ms: AFTER_unchecked 84860 grouping
5.768264ms: AFTER_unchecked 84860 grouping
5.668348ms: AFTER_unchecked 84860 grouping
5.760114ms: AFTER_unchecked 84860 grouping
6.66298ms: AFTER_unchecked 84860 grouping
7.064153ms: AFTER_unchecked 84860 grouping
6.470694ms: AFTER_unchecked 84860 grouping
5.79513ms: AFTER_unchecked 84860 grouping
5.78728ms: AFTER_unchecked 84860 grouping
5.689779ms: AFTER_unchecked 84860 grouping
5.754982ms: AFTER_unchecked 84860 grouping
6.337876ms: AFTER_unchecked 84860 grouping
6.789762ms: AFTER_unchecked 84860 grouping
7.413708ms: AFTER_unchecked 84860 grouping
7.354242ms: AFTER_unchecked 84860 grouping
6.638831ms: AFTER_unchecked 84860 grouping
5.851879ms: AFTER_unchecked 84860 grouping
5.802978ms: AFTER_unchecked 84860 grouping
5.665027ms: AFTER_unchecked 84860 grouping
5.823202ms: AFTER_unchecked 84860 grouping
6.386777ms: AFTER_unchecked 84860 grouping
6.650905ms: AFTER_unchecked 84860 grouping
6.941597ms: AFTER_unchecked 84860 grouping
6.799723ms: AFTER_unchecked 84860 grouping
6.993216ms: AFTER_unchecked 84860 grouping
5.649632ms: AFTER_unchecked 84860 grouping
5.711212ms: AFTER_unchecked 84860 grouping
5.654462ms: AFTER_unchecked 84860 grouping
6.281125ms: AFTER_unchecked 84860 grouping
6.636718ms: AFTER_unchecked 84860 grouping
7.231988ms: AFTER_unchecked 84860 grouping
7.969736ms: AFTER_unchecked 84860 grouping
7.163163ms: AFTER_unchecked 84860 grouping
6.923486ms: AFTER_unchecked 84860 grouping
7.21931ms: AFTER_unchecked 84860 grouping
5.732342ms: AFTER_unchecked 84860 grouping
5.890518ms: AFTER_unchecked 84860 grouping
5.739587ms: AFTER_unchecked 84860 grouping
5.785772ms: AFTER_unchecked 84860 grouping
6.268749ms: AFTER_unchecked 84860 grouping
6.729993ms: AFTER_unchecked 84860 grouping
7.21931ms: AFTER_unchecked 84860 grouping
5.709703ms: AFTER_unchecked 84860 grouping
5.752869ms: AFTER_unchecked 84860 grouping
6.039939ms: AFTER_unchecked 84860 grouping
6.936466ms: AFTER_unchecked 84860 grouping
7.279682ms: AFTER_unchecked 84860 grouping
5.662915ms: AFTER_unchecked 84860 grouping
5.718155ms: AFTER_unchecked 84860 grouping
6.586911ms: AFTER_unchecked 84860 grouping
7.209348ms: AFTER_unchecked 84860 grouping
7.459894ms: AFTER_unchecked 84860 grouping
7.717682ms: AFTER_unchecked 84860 grouping
5.971115ms: AFTER_unchecked 84860 grouping
5.823203ms: AFTER_unchecked 84860 grouping
5.663216ms: AFTER_unchecked 84860 grouping
5.684648ms: AFTER_unchecked 84860 grouping
6.449262ms: AFTER_unchecked 84860 grouping
6.740256ms: AFTER_unchecked 84860 grouping
7.617163ms: AFTER_unchecked 84860 grouping
7.012837ms: AFTER_unchecked 84860 grouping
6.164608ms: AFTER_unchecked 84860 grouping
5.701552ms: AFTER_unchecked 84860 grouping
5.742606ms: AFTER_unchecked 84860 grouping
5.696421ms: AFTER_unchecked 84860 grouping
10.067672ms: AFTER_unchecked 242931 grouping
7.758132ms: AFTER_unchecked 242931 grouping
7.7204ms: AFTER_unchecked 242931 grouping
7.802506ms: AFTER_unchecked 242931 grouping
8.768461ms: AFTER_unchecked 242931 grouping
9.124959ms: AFTER_unchecked 242931 grouping
7.972453ms: AFTER_unchecked 242931 grouping
7.881895ms: AFTER_unchecked 242931 grouping
11.532ms: AFTER_unchecked 242931 grouping
8.344044ms: AFTER_unchecked 242931 grouping
8.996668ms: AFTER_unchecked 242931 grouping
9.617898ms: AFTER_unchecked 242931 grouping
7.79345ms: AFTER_unchecked 242931 grouping
7.952229ms: AFTER_unchecked 242931 grouping
10.010921ms: AFTER_unchecked 242931 grouping
8.385399ms: AFTER_unchecked 242931 grouping
9.655631ms: AFTER_unchecked 242931 grouping
8.144514ms: AFTER_unchecked 242931 grouping
9.32781ms: AFTER_unchecked 242931 grouping
8.602437ms: AFTER_unchecked 242931 grouping
11.735454ms: AFTER_unchecked 242931 grouping
8.344648ms: AFTER_unchecked 242931 grouping
7.680856ms: AFTER_unchecked 242931 grouping
7.889441ms: AFTER_unchecked 242931 grouping
8.020148ms: AFTER_unchecked 242931 grouping
8.747632ms: AFTER_unchecked 242931 grouping
8.800458ms: AFTER_unchecked 242931 grouping
9.946927ms: AFTER_unchecked 242931 grouping
14.438017ms: AFTER_unchecked 328666 grouping
13.923042ms: AFTER_unchecked 328666 grouping
14.274407ms: AFTER_unchecked 328666 grouping
11.025476ms: AFTER_unchecked 328666 grouping
13.92938ms: AFTER_unchecked 328666 grouping
13.669478ms: AFTER_unchecked 328666 grouping
13.853915ms: AFTER_unchecked 328666 grouping
15.195386ms: AFTER_unchecked 328666 grouping
15.12475ms: AFTER_unchecked 328666 grouping
11.38137ms: AFTER_unchecked 328666 grouping
14.277426ms: AFTER_unchecked 328666 grouping
14.43047ms: AFTER_unchecked 328666 grouping
17.708681ms: AFTER_unchecked 328666 grouping
9.563865ms: AFTER_unchecked 328666 grouping
10.728143ms: AFTER_unchecked 328666 grouping
10.962388ms: AFTER_unchecked 328666 grouping
11.379559ms: AFTER_unchecked 328666 grouping
10.584759ms: AFTER_unchecked 328666 grouping
10.001564ms: AFTER_unchecked 328666 grouping
9.610955ms: AFTER_unchecked 328666 grouping
9.61337ms: AFTER_unchecked 328666 grouping
10.359873ms: AFTER_unchecked 328666 grouping
10.837115ms: AFTER_unchecked 328666 grouping
11.299567ms: AFTER_unchecked 328666 grouping
10.751387ms: AFTER_unchecked 328666 grouping
9.897422ms: AFTER_unchecked 328666 grouping
9.763094ms: AFTER_unchecked 328666 grouping
9.642047ms: AFTER_unchecked 328666 grouping
10.431715ms: AFTER_unchecked 328666 grouping
10.495408ms: AFTER_unchecked 328666 grouping
9.837049ms: AFTER_unchecked 328666 grouping
9.604919ms: AFTER_unchecked 328666 grouping
9.755849ms: AFTER_unchecked 328666 grouping
9.923381ms: AFTER_unchecked 328666 grouping
11.092792ms: AFTER_unchecked 328666 grouping
10.230978ms: AFTER_unchecked 328666 grouping
13.657403ms: AFTER_unchecked 328666 grouping
9.646273ms: AFTER_unchecked 328666 grouping
26.647694ms: AFTER_unchecked 1103347 grouping
20.916559ms: AFTER_unchecked 1103347 grouping
22.435222ms: AFTER_unchecked 1103347 grouping
21.10975ms: AFTER_unchecked 1103347 grouping
21.286943ms: AFTER_unchecked 1103347 grouping
32.64839ms: AFTER_unchecked 1103347 grouping
20.81453ms: AFTER_unchecked 1103347 grouping
20.866752ms: AFTER_unchecked 1103347 grouping
33.394289ms: AFTER_unchecked 1103347 grouping
20.594775ms: AFTER_unchecked 1103347 grouping
20.724877ms: AFTER_unchecked 1103347 grouping
21.462022ms: AFTER_unchecked 1103347 grouping
21.599972ms: AFTER_unchecked 1103347 grouping
20.649411ms: AFTER_unchecked 1103347 grouping
21.504283ms: AFTER_unchecked 1103347 grouping
20.928331ms: AFTER_unchecked 1103347 grouping
21.601482ms: AFTER_unchecked 1103347 grouping
21.757846ms: AFTER_unchecked 1103347 grouping
27.169008ms: AFTER_unchecked 1103347 grouping
34.152866ms: AFTER_unchecked 1103347 grouping
31.386913ms: AFTER_unchecked 1103347 grouping
34.073477ms: AFTER_unchecked 1103347 grouping
25.78256ms: AFTER_unchecked 1103347 grouping
39.678735ms: AFTER_unchecked 1103347 grouping
33.500846ms: AFTER_unchecked 1103347 grouping
3.036119ms: AFTER_unchecked 16755 copied
3.462649ms: AFTER_unchecked 16755 copied
3.551094ms: AFTER_unchecked 16755 copied
3.136035ms: AFTER_unchecked 16755 copied
3.651916ms: AFTER_unchecked 16755 copied
4.066975ms: AFTER_unchecked 16755 copied
4.891961ms: AFTER_unchecked 16755 copied
3.091058ms: AFTER_unchecked 16755 copied
3.021026ms: AFTER_unchecked 16755 copied
3.018611ms: AFTER_unchecked 16755 copied
3.188558ms: AFTER_unchecked 16755 copied
3.068116ms: AFTER_unchecked 16755 copied
3.08985ms: AFTER_unchecked 16755 copied
3.085624ms: AFTER_unchecked 16755 copied
3.105849ms: AFTER_unchecked 16755 copied
3.187351ms: AFTER_unchecked 16755 copied
3.21301ms: AFTER_unchecked 16755 copied
3.719533ms: AFTER_unchecked 16755 copied
3.564074ms: AFTER_unchecked 16755 copied
3.19188ms: AFTER_unchecked 16755 copied
3.003819ms: AFTER_unchecked 16755 copied
3.014686ms: AFTER_unchecked 16755 copied
3.016498ms: AFTER_unchecked 16755 copied
3.079285ms: AFTER_unchecked 16755 copied
3.031591ms: AFTER_unchecked 16755 copied
3.14811ms: AFTER_unchecked 16755 copied
3.091963ms: AFTER_unchecked 16755 copied
3.10283ms: AFTER_unchecked 16755 copied
3.163806ms: AFTER_unchecked 16755 copied
3.546566ms: AFTER_unchecked 16755 copied
3.634105ms: AFTER_unchecked 16755 copied
3.465366ms: AFTER_unchecked 16755 copied
3.426123ms: AFTER_unchecked 16755 copied
3.147204ms: AFTER_unchecked 16755 copied
3.045174ms: AFTER_unchecked 16755 copied
3.791677ms: AFTER_unchecked 16755 copied
3.927817ms: AFTER_unchecked 16755 copied
3.331038ms: AFTER_unchecked 16755 copied
3.252855ms: AFTER_unchecked 16755 copied
3.339188ms: AFTER_unchecked 16755 copied
3.050911ms: AFTER_unchecked 16755 copied
5.087869ms: AFTER_unchecked 16755 copied
3.265835ms: AFTER_unchecked 16755 copied
3.249837ms: AFTER_unchecked 16755 copied
3.606334ms: AFTER_unchecked 16755 copied
3.102529ms: AFTER_unchecked 16755 copied
3.515776ms: AFTER_unchecked 16755 copied
3.322887ms: AFTER_unchecked 16755 copied
3.445141ms: AFTER_unchecked 16755 copied
4.12131ms: AFTER_unchecked 16755 copied
3.370883ms: AFTER_unchecked 16755 copied
3.730098ms: AFTER_unchecked 16755 copied
3.24712ms: AFTER_unchecked 16755 copied
3.642557ms: AFTER_unchecked 16755 copied
3.713797ms: AFTER_unchecked 16755 copied
3.357601ms: AFTER_unchecked 16755 copied
3.283947ms: AFTER_unchecked 16755 copied
3.189464ms: AFTER_unchecked 16755 copied
3.942306ms: AFTER_unchecked 16755 copied
3.89763ms: AFTER_unchecked 16755 copied
3.587317ms: AFTER_unchecked 16755 copied
3.261308ms: AFTER_unchecked 16755 copied
3.301757ms: AFTER_unchecked 16755 copied
3.963436ms: AFTER_unchecked 16755 copied
3.768132ms: AFTER_unchecked 16755 copied
3.434576ms: AFTER_unchecked 16755 copied
3.409521ms: AFTER_unchecked 16755 copied
3.337075ms: AFTER_unchecked 16755 copied
3.137544ms: AFTER_unchecked 16755 copied
4.305143ms: AFTER_unchecked 16755 copied
3.656443ms: AFTER_unchecked 16755 copied
3.216933ms: AFTER_unchecked 16755 copied
3.338886ms: AFTER_unchecked 16755 copied
3.265534ms: AFTER_unchecked 16755 copied
4.566857ms: AFTER_unchecked 16755 copied
3.780508ms: AFTER_unchecked 16755 copied
3.69478ms: AFTER_unchecked 16755 copied
3.345828ms: AFTER_unchecked 16755 copied
3.165013ms: AFTER_unchecked 16755 copied
3.538416ms: AFTER_unchecked 16755 copied
3.245309ms: AFTER_unchecked 16755 copied
3.261006ms: AFTER_unchecked 16755 copied
3.740059ms: AFTER_unchecked 16755 copied
3.705948ms: AFTER_unchecked 16755 copied
3.519701ms: AFTER_unchecked 16755 copied
3.250742ms: AFTER_unchecked 16755 copied
3.258289ms: AFTER_unchecked 16755 copied
6.310104ms: AFTER_unchecked 16755 copied
3.694478ms: AFTER_unchecked 16755 copied
4.21217ms: AFTER_unchecked 16755 copied
3.836957ms: AFTER_unchecked 16755 copied
3.344319ms: AFTER_unchecked 16755 copied
3.507324ms: AFTER_unchecked 16755 copied
3.732513ms: AFTER_unchecked 16755 copied
3.800431ms: AFTER_unchecked 16755 copied
3.216632ms: AFTER_unchecked 16755 copied
3.539623ms: AFTER_unchecked 16755 copied
6.181512ms: AFTER_unchecked 16755 copied
3.904573ms: AFTER_unchecked 16755 copied
3.0168ms: AFTER_unchecked 16755 copied
3.249836ms: AFTER_unchecked 16755 copied
3.412539ms: AFTER_unchecked 16755 copied
3.57313ms: AFTER_unchecked 16755 copied
3.44182ms: AFTER_unchecked 16755 copied
3.441216ms: AFTER_unchecked 16755 copied
2.979671ms: AFTER_unchecked 16755 copied
3.045477ms: AFTER_unchecked 16755 copied
2.991142ms: AFTER_unchecked 16755 copied
3.076568ms: AFTER_unchecked 16755 copied
3.090152ms: AFTER_unchecked 16755 copied
3.094076ms: AFTER_unchecked 16755 copied
3.103132ms: AFTER_unchecked 16755 copied
3.228706ms: AFTER_unchecked 16755 copied
3.662782ms: AFTER_unchecked 16755 copied
3.443632ms: AFTER_unchecked 16755 copied
3.312925ms: AFTER_unchecked 16755 copied
3.306587ms: AFTER_unchecked 16755 copied
3.1143ms: AFTER_unchecked 16755 copied
3.060267ms: AFTER_unchecked 16755 copied
3.111886ms: AFTER_unchecked 16755 copied
3.108566ms: AFTER_unchecked 16755 copied
3.108264ms: AFTER_unchecked 16755 copied
3.111886ms: AFTER_unchecked 16755 copied
3.171353ms: AFTER_unchecked 16755 copied
3.367563ms: AFTER_unchecked 16755 copied
4.278881ms: AFTER_unchecked 16755 copied
2.98601ms: AFTER_unchecked 16755 copied
3.087737ms: AFTER_unchecked 16755 copied
3.138148ms: AFTER_unchecked 16755 copied
3.10283ms: AFTER_unchecked 16755 copied
3.356696ms: AFTER_unchecked 16755 copied
3.13211ms: AFTER_unchecked 16755 copied
3.120037ms: AFTER_unchecked 16755 copied
3.162297ms: AFTER_unchecked 16755 copied
3.106754ms: AFTER_unchecked 16755 copied
3.331641ms: AFTER_unchecked 16755 copied
3.648897ms: AFTER_unchecked 16755 copied
3.5034ms: AFTER_unchecked 16755 copied
3.533285ms: AFTER_unchecked 16755 copied
3.295116ms: AFTER_unchecked 16755 copied
3.233536ms: AFTER_unchecked 16755 copied
3.041854ms: AFTER_unchecked 16755 copied
3.085624ms: AFTER_unchecked 16755 copied
3.473214ms: AFTER_unchecked 16755 copied
3.124866ms: AFTER_unchecked 16755 copied
3.133016ms: AFTER_unchecked 16755 copied
3.587619ms: AFTER_unchecked 27868 copied
3.07355ms: AFTER_unchecked 27868 copied
3.187049ms: AFTER_unchecked 27868 copied
3.287569ms: AFTER_unchecked 27868 copied
3.718325ms: AFTER_unchecked 27868 copied
3.50672ms: AFTER_unchecked 27868 copied
3.148411ms: AFTER_unchecked 27868 copied
3.222066ms: AFTER_unchecked 27868 copied
3.066004ms: AFTER_unchecked 27868 copied
3.10615ms: AFTER_unchecked 27868 copied
3.312322ms: AFTER_unchecked 27868 copied
3.681196ms: AFTER_unchecked 27868 copied
3.470497ms: AFTER_unchecked 27868 copied
3.261005ms: AFTER_unchecked 27868 copied
3.160184ms: AFTER_unchecked 27868 copied
3.201539ms: AFTER_unchecked 27868 copied
3.148713ms: AFTER_unchecked 27868 copied
3.245913ms: AFTER_unchecked 27868 copied
3.092868ms: AFTER_unchecked 27868 copied
3.288173ms: AFTER_unchecked 27868 copied
3.369373ms: AFTER_unchecked 27868 copied
3.584299ms: AFTER_unchecked 27868 copied
3.178597ms: AFTER_unchecked 27868 copied
3.291796ms: AFTER_unchecked 27868 copied
3.15143ms: AFTER_unchecked 27868 copied
3.085926ms: AFTER_unchecked 27868 copied
3.074154ms: AFTER_unchecked 27868 copied
3.312322ms: AFTER_unchecked 27868 copied
3.903366ms: AFTER_unchecked 27868 copied
3.609655ms: AFTER_unchecked 27868 copied
3.168334ms: AFTER_unchecked 27868 copied
3.204255ms: AFTER_unchecked 27868 copied
3.193992ms: AFTER_unchecked 27868 copied
3.204255ms: AFTER_unchecked 27868 copied
3.134223ms: AFTER_unchecked 27868 copied
3.262515ms: AFTER_unchecked 27868 copied
3.709873ms: AFTER_unchecked 27868 copied
3.586109ms: AFTER_unchecked 27868 copied
3.203651ms: AFTER_unchecked 27868 copied
3.190069ms: AFTER_unchecked 27868 copied
3.207878ms: AFTER_unchecked 27868 copied
3.23263ms: AFTER_unchecked 27868 copied
3.110075ms: AFTER_unchecked 27868 copied
3.273382ms: AFTER_unchecked 27868 copied
5.917987ms: AFTER_unchecked 27868 copied
3.23414ms: AFTER_unchecked 27868 copied
3.52121ms: AFTER_unchecked 27868 copied
3.733117ms: AFTER_unchecked 27868 copied
3.364242ms: AFTER_unchecked 27868 copied
3.238366ms: AFTER_unchecked 27868 copied
3.19852ms: AFTER_unchecked 27868 copied
3.101019ms: AFTER_unchecked 27868 copied
3.167126ms: AFTER_unchecked 27868 copied
3.155052ms: AFTER_unchecked 27868 copied
3.256176ms: AFTER_unchecked 27868 copied
3.524228ms: AFTER_unchecked 27868 copied
3.614787ms: AFTER_unchecked 27868 copied
3.668518ms: AFTER_unchecked 27868 copied
3.62173ms: AFTER_unchecked 27868 copied
3.219047ms: AFTER_unchecked 27868 copied
3.179201ms: AFTER_unchecked 27868 copied
3.183125ms: AFTER_unchecked 27868 copied
3.529661ms: AFTER_unchecked 27868 copied
3.120942ms: AFTER_unchecked 27868 copied
3.278212ms: AFTER_unchecked 27868 copied
4.034373ms: AFTER_unchecked 27868 copied
3.814921ms: AFTER_unchecked 27868 copied
3.195803ms: AFTER_unchecked 27868 copied
3.166824ms: AFTER_unchecked 27868 copied
3.20003ms: AFTER_unchecked 27868 copied
3.127583ms: AFTER_unchecked 27868 copied
3.043968ms: AFTER_unchecked 27868 copied
3.300247ms: AFTER_unchecked 27868 copied
3.662782ms: AFTER_unchecked 27868 copied
3.43699ms: AFTER_unchecked 27868 copied
3.187351ms: AFTER_unchecked 27868 copied
3.181918ms: AFTER_unchecked 27868 copied
15.133203ms: AFTER_unchecked 84860 copied
12.394115ms: AFTER_unchecked 84860 copied
12.914825ms: AFTER_unchecked 84860 copied
12.846303ms: AFTER_unchecked 84860 copied
12.328912ms: AFTER_unchecked 84860 copied
15.671722ms: AFTER_unchecked 84860 copied
13.20431ms: AFTER_unchecked 84860 copied
13.102885ms: AFTER_unchecked 84860 copied
13.350712ms: AFTER_unchecked 84860 copied
13.095338ms: AFTER_unchecked 84860 copied
14.230335ms: AFTER_unchecked 84860 copied
13.254419ms: AFTER_unchecked 84860 copied
15.08249ms: AFTER_unchecked 84860 copied
13.392671ms: AFTER_unchecked 84860 copied
12.509727ms: AFTER_unchecked 84860 copied
15.319149ms: AFTER_unchecked 84860 copied
14.583815ms: AFTER_unchecked 84860 copied
14.149437ms: AFTER_unchecked 84860 copied
13.085678ms: AFTER_unchecked 84860 copied
12.413735ms: AFTER_unchecked 84860 copied
13.167785ms: AFTER_unchecked 84860 copied
15.482154ms: AFTER_unchecked 84860 copied
13.162955ms: AFTER_unchecked 84860 copied
14.723577ms: AFTER_unchecked 84860 copied
13.462703ms: AFTER_unchecked 84860 copied
13.563826ms: AFTER_unchecked 84860 copied
13.701475ms: AFTER_unchecked 84860 copied
13.72321ms: AFTER_unchecked 84860 copied
22.021673ms: AFTER_unchecked 84860 copied
12.542328ms: AFTER_unchecked 84860 copied
12.366645ms: AFTER_unchecked 84860 copied
12.413132ms: AFTER_unchecked 84860 copied
12.434564ms: AFTER_unchecked 84860 copied
11.933776ms: AFTER_unchecked 84860 copied
12.142061ms: AFTER_unchecked 84860 copied
12.566477ms: AFTER_unchecked 84860 copied
12.812796ms: AFTER_unchecked 84860 copied
12.494031ms: AFTER_unchecked 84860 copied
12.606927ms: AFTER_unchecked 84860 copied
12.299029ms: AFTER_unchecked 84860 copied
11.964567ms: AFTER_unchecked 84860 copied
12.56859ms: AFTER_unchecked 84860 copied
11.870687ms: AFTER_unchecked 84860 copied
12.055427ms: AFTER_unchecked 84860 copied
12.764197ms: AFTER_unchecked 84860 copied
12.372985ms: AFTER_unchecked 84860 copied
12.396228ms: AFTER_unchecked 84860 copied
12.305368ms: AFTER_unchecked 84860 copied
12.411924ms: AFTER_unchecked 84860 copied
11.955511ms: AFTER_unchecked 84860 copied
12.558025ms: AFTER_unchecked 84860 copied
12.021316ms: AFTER_unchecked 84860 copied
12.920258ms: AFTER_unchecked 84860 copied
12.806457ms: AFTER_unchecked 84860 copied
12.411623ms: AFTER_unchecked 84860 copied
12.360608ms: AFTER_unchecked 84860 copied
12.34944ms: AFTER_unchecked 84860 copied
12.117006ms: AFTER_unchecked 84860 copied
12.174662ms: AFTER_unchecked 84860 copied
12.291784ms: AFTER_unchecked 84860 copied
12.148702ms: AFTER_unchecked 84860 copied
11.920796ms: AFTER_unchecked 84860 copied
11.898157ms: AFTER_unchecked 84860 copied
12.41434ms: AFTER_unchecked 84860 copied
12.718917ms: AFTER_unchecked 84860 copied
12.559535ms: AFTER_unchecked 84860 copied
12.324687ms: AFTER_unchecked 84860 copied
12.316234ms: AFTER_unchecked 84860 copied
12.049993ms: AFTER_unchecked 84860 copied
11.88729ms: AFTER_unchecked 84860 copied
12.581571ms: AFTER_unchecked 84860 copied
12.427017ms: AFTER_unchecked 84860 copied
12.469882ms: AFTER_unchecked 84860 copied
13.379088ms: AFTER_unchecked 84860 copied
13.437649ms: AFTER_unchecked 84860 copied
12.334044ms: AFTER_unchecked 84860 copied
12.33827ms: AFTER_unchecked 84860 copied
12.24892ms: AFTER_unchecked 84860 copied
11.899968ms: AFTER_unchecked 84860 copied
12.479542ms: AFTER_unchecked 84860 copied
12.003507ms: AFTER_unchecked 84860 copied
12.407095ms: AFTER_unchecked 84860 copied
12.418565ms: AFTER_unchecked 84860 copied
12.437884ms: AFTER_unchecked 84860 copied
12.331026ms: AFTER_unchecked 84860 copied
12.363929ms: AFTER_unchecked 84860 copied
12.107648ms: AFTER_unchecked 84860 copied
12.017392ms: AFTER_unchecked 84860 copied
12.008034ms: AFTER_unchecked 84860 copied
12.23775ms: AFTER_unchecked 84860 copied
12.356986ms: AFTER_unchecked 84860 copied
12.276388ms: AFTER_unchecked 84860 copied
12.327706ms: AFTER_unchecked 84860 copied
13.970735ms: AFTER_unchecked 242931 copied
13.724718ms: AFTER_unchecked 242931 copied
13.907344ms: AFTER_unchecked 242931 copied
13.97466ms: AFTER_unchecked 242931 copied
13.625104ms: AFTER_unchecked 242931 copied
13.47357ms: AFTER_unchecked 242931 copied
13.792033ms: AFTER_unchecked 242931 copied
17.096507ms: AFTER_unchecked 242931 copied
13.843048ms: AFTER_unchecked 242931 copied
13.553261ms: AFTER_unchecked 242931 copied
13.373956ms: AFTER_unchecked 242931 copied
13.605785ms: AFTER_unchecked 242931 copied
13.691513ms: AFTER_unchecked 242931 copied
13.89195ms: AFTER_unchecked 242931 copied
13.771507ms: AFTER_unchecked 242931 copied
13.766677ms: AFTER_unchecked 242931 copied
13.843652ms: AFTER_unchecked 242931 copied
13.744642ms: AFTER_unchecked 242931 copied
13.683062ms: AFTER_unchecked 242931 copied
13.823728ms: AFTER_unchecked 242931 copied
13.94719ms: AFTER_unchecked 242931 copied
14.278634ms: AFTER_unchecked 242931 copied
13.768488ms: AFTER_unchecked 242931 copied
13.988847ms: AFTER_unchecked 242931 copied
13.72985ms: AFTER_unchecked 242931 copied
13.776035ms: AFTER_unchecked 242931 copied
13.804712ms: AFTER_unchecked 242931 copied
14.754064ms: AFTER_unchecked 242931 copied
18.907673ms: AFTER_unchecked 328666 copied
17.133032ms: AFTER_unchecked 328666 copied
17.620537ms: AFTER_unchecked 328666 copied
17.87229ms: AFTER_unchecked 328666 copied
16.349099ms: AFTER_unchecked 328666 copied
16.704993ms: AFTER_unchecked 328666 copied
17.57375ms: AFTER_unchecked 328666 copied
19.752884ms: AFTER_unchecked 328666 copied
16.271219ms: AFTER_unchecked 328666 copied
16.184283ms: AFTER_unchecked 328666 copied
16.224732ms: AFTER_unchecked 328666 copied
17.048813ms: AFTER_unchecked 328666 copied
24.559117ms: AFTER_unchecked 328666 copied
15.515359ms: AFTER_unchecked 328666 copied
15.134108ms: AFTER_unchecked 328666 copied
15.440497ms: AFTER_unchecked 328666 copied
15.300131ms: AFTER_unchecked 328666 copied
16.626811ms: AFTER_unchecked 328666 copied
15.349637ms: AFTER_unchecked 328666 copied
15.56426ms: AFTER_unchecked 328666 copied
15.600483ms: AFTER_unchecked 328666 copied
15.535281ms: AFTER_unchecked 328666 copied
15.295905ms: AFTER_unchecked 328666 copied
15.376804ms: AFTER_unchecked 328666 copied
15.333035ms: AFTER_unchecked 328666 copied
15.35175ms: AFTER_unchecked 328666 copied
15.543432ms: AFTER_unchecked 328666 copied
16.043314ms: AFTER_unchecked 328666 copied
15.110864ms: AFTER_unchecked 328666 copied
15.392199ms: AFTER_unchecked 328666 copied
15.23825ms: AFTER_unchecked 328666 copied
15.365031ms: AFTER_unchecked 328666 copied
15.78643ms: AFTER_unchecked 328666 copied
15.195385ms: AFTER_unchecked 328666 copied
15.294698ms: AFTER_unchecked 328666 copied
15.58539ms: AFTER_unchecked 328666 copied
16.216883ms: AFTER_unchecked 328666 copied
15.324884ms: AFTER_unchecked 328666 copied
19.116259ms: AFTER_unchecked 1103347 copied
18.944501ms: AFTER_unchecked 1103347 copied
18.993704ms: AFTER_unchecked 1103347 copied
22.790814ms: AFTER_unchecked 1103347 copied
19.870308ms: AFTER_unchecked 1103347 copied
19.634555ms: AFTER_unchecked 1103347 copied
18.960197ms: AFTER_unchecked 1103347 copied
18.848508ms: AFTER_unchecked 1103347 copied
22.098043ms: AFTER_unchecked 1103347 copied
19.11626ms: AFTER_unchecked 1103347 copied
18.702106ms: AFTER_unchecked 1103347 copied
18.662864ms: AFTER_unchecked 1103347 copied
19.125315ms: AFTER_unchecked 1103347 copied
19.983507ms: AFTER_unchecked 1103347 copied
19.116863ms: AFTER_unchecked 1103347 copied
19.033248ms: AFTER_unchecked 1103347 copied
19.426271ms: AFTER_unchecked 1103347 copied
20.945235ms: AFTER_unchecked 1103347 copied
23.230928ms: AFTER_unchecked 1103347 copied
21.270944ms: AFTER_unchecked 1103347 copied
24.638808ms: AFTER_unchecked 1103347 copied
20.389207ms: AFTER_unchecked 1103347 copied
20.289291ms: AFTER_unchecked 1103347 copied
23.000306ms: AFTER_unchecked 1103347 copied
19.960867ms: AFTER_unchecked 1103347 copied
Benchmark 1: AFTER_unchecked 16755 grouping
  Time (mean ± σ): 5.117577 ms ± 533.868359 µs
  Range (min … max): 4.418039 ms … 7.694138 ms 146 runs
Benchmark 3: AFTER_unchecked 84860 grouping
  Time (mean ± σ): 6.712378 ms ± 821.189829 µs
  Range (min … max): 5.649632 ms … 9.707249 ms 93 runs
Benchmark 4: AFTER_unchecked 242931 grouping
  Time (mean ± σ): 8.808037 ms ± 1.078136 ms
  Range (min … max): 7.680856 ms … 11.735454 ms 28 runs
Benchmark 2: AFTER_unchecked 27868 grouping
  Time (mean ± σ): 5.148410 ms ± 450.255644 µs
  Range (min … max): 4.594024 ms … 6.449262 ms 77 runs
Benchmark 5: AFTER_unchecked 328666 grouping
  Time (mean ± σ): 11.655333 ms ± 2.111709 ms
  Range (min … max): 9.563865 ms … 17.708681 ms 38 runs
Benchmark 6: AFTER_unchecked 1103347 grouping
  Time (mean ± σ): 25.467501 ms ± 5.811982 ms
  Range (min … max): 20.594775 ms … 39.678735 ms 25 runs
Benchmark 2: AFTER_unchecked 16755 copied
  Time (mean ± σ): 3.430697 ms ± 491.102754 µs
  Range (min … max): 2.979671 ms … 6.310104 ms 146 runs
Benchmark 3: AFTER_unchecked 84860 copied
  Time (mean ± σ): 12.854732 ms ± 1.278090 ms
  Range (min … max): 11.870687 ms … 22.021673 ms 93 runs
Benchmark 4: AFTER_unchecked 242931 copied
  Time (mean ± σ): 13.935903 ms ± 657.113682 µs
  Range (min … max): 13.373956 ms … 17.096507 ms 28 runs
Benchmark 1: AFTER_unchecked 27868 copied
  Time (mean ± σ): 3.353081 ms ± 368.159830 µs
  Range (min … max): 3.043968 ms … 5.917987 ms 77 runs
Benchmark 5: AFTER_unchecked 328666 copied
  Time (mean ± σ): 16.308506 ms ± 1.725097 ms
  Range (min … max): 15.110864 ms … 24.559117 ms 38 runs
Benchmark 6: AFTER_unchecked 1103347 copied
  Time (mean ± σ): 20.245956 ms ± 1.635977 ms
  Range (min … max): 18.662864 ms … 24.638808 ms 25 runs
--&gt;
&lt;table class=&quot;perf&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;84'860&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;242'931&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;grouping&lt;/q&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads, &lt;code&gt;.unwrap_unchecked()&lt;/code&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.118ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;6.712ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8.808ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;534µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;821µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.078ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;copying&lt;/q&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads, &lt;code&gt;.unwrap_unchecked()&lt;/code&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.431ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;12.855ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13.936ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;491µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.278ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;657µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs serial) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-18.47%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;13.36%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;36.15%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs serial) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.60 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.50 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;7.40 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.15%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.81%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;10.38%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr class=&quot;spc&quot;&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;27'868&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;328'666&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;grouping&lt;/q&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads, &lt;code&gt;.unwrap_unchecked()&lt;/code&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.148ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;11.655ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;25.468ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;450µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2.112ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;5.812ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;i7-2600, &lt;q&gt;copying&lt;/q&gt;, &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads, &lt;code&gt;.unwrap_unchecked()&lt;/code&gt;&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;3.353ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;16.309ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20.246ms&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;368µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.725ms&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.636ms&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs serial) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.56%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;39.60%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;59.01%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs serial) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.04 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.05 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-0.91 p.p.&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up vs &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;8&lt;/span&gt; threads) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;0.04%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1.71%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-2.26%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;
Not great, not terrible, for the cost of bumping &lt;samp&gt;groups_accumulator&lt;/samp&gt; from is a similar size to the [​[​8\text{MB}​]​] —
[​[​G^3 \cdot \operatorname{sizeof}(\texttt{Mutex&amp;lt;Vec&amp;lt;_&gt;&gt;}) = G^3 \cdot (3 \operatorname{sizeof}(\texttt{usize}) + m) = 32\text{MB}_{\text{LP64}} \vee 20\text{MB}_{\text{ILP32}_\text{linux}} \vee 16\text{MB}_{\text{ILP32}_\text{Win32}}​]​]
(&lt;a href=&quot;#grid-grid&quot;&gt;from&lt;!-- --&gt;[​[​\ 24\text{MB}_\text{LP64} \vee 12\text{MB}_\text{ILP32}​]​]&lt;/a&gt;).
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
Conversely,
&lt;/p&gt;
&lt;h2 id=&quot;groupshared&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#groupshared&quot;&gt;#&lt;/a&gt; de-parallelising &lt;samp&gt;find_bbox.hlsl&lt;/samp&gt;&lt;/h2&gt;
&lt;p class=&quot;continuing&quot;&gt;
was also in order.
I'd&lt;!--'--&gt; actually had it marked &quot;TODO: groupshared?&quot; in the original implementation but there is no documentation
&lt;em&gt;or&lt;/em&gt; extant implementation using group-shared memory that makes sense.
One'd&lt;!--'--&gt; think that a reduction would be perfect for it, but… no?
&lt;/p&gt;
&lt;p class=&quot;indented continuing&quot;&gt;
What would &lt;em&gt;also&lt;/em&gt; have the desired effect of doing fewer atomics to real memory is
&quot;&lt;a href=&quot;//raw.githubusercontent.com/KhronosGroup/GLSL/refs/heads/main/extensions/khr/GL_KHR_shader_subgroup.txt&quot;&gt;reducing&lt;/a&gt;&lt;!--&quot;--&gt;
 across the subgroup and doing the atomic in the
 elected thread
 in a subgroup&quot;&lt;!--&quot;--&gt;
(Vulkan/GLSL nomenclature) or
&quot;&lt;a href=&quot;//learn.microsoft.com/en-us/windows/win32/direct3dhlsl/waveallmin&quot;&gt;reducing&lt;/a&gt;&lt;!--&quot;--&gt;
 across the wave and doing the atomic in the
 &lt;a href=&quot;//learn.microsoft.com/en-us/windows/win32/direct3dhlsl/waveisfirstlane&quot;&gt;first lane&lt;/a&gt;
 in a wave&quot;&lt;!--&quot;--&gt;
(HLSL nomenclature).
I think it's the bit that's &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;64&lt;/span&gt; (or &lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;32&lt;/span&gt; on n&lt;span style=&quot;font-variant: small-caps;&quot;&gt;vidia&lt;/span&gt; cards)?
They also call it a warp sometimes?
Also the election always chooses the first &quot;thread&quot;, so. Hardly an &quot;election&quot;?
So, &lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/04a6d34baa1ee5203a637184c32e0ecadba0f147/item/src/find_bbox.hlsl#L27&quot;&gt;&lt;samp&gt;find_bbox.hlsl&lt;/samp&gt;&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-hlsl&quot;&gt;&lt;code class=&quot;language-hlsl&quot;&gt;&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;numthreads&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; DTid &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;SV_DispatchThreadID&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; known_rgbs_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;uint&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DTid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; known_rgbs_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; tmp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; known_rgbs_bundle&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lab&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;tmp &lt;span class=&quot;token operator&quot;&gt;^=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp &lt;span class=&quot;token operator&quot;&gt;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0x80000000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;/small&gt;&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; m &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;WaveActiveMin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;uint3&lt;/span&gt; M &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;WaveActiveMax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tmp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;WaveIsFirstLane&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_min&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; m&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; M&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; M&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;		&lt;!--&quot;--&gt;&lt;span class=&quot;token function&quot;&gt;InterlockedMax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbox_max&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; M&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;small style='display: block; line-height: initial;'&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/small&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuing&quot;&gt;
but this fails to compile with
&lt;/p&gt;
&lt;blockquote class=&quot;continuation&quot;&gt;&lt;pre class=&quot;continuation&quot; style=&quot;white-space: pre-wrap;&quot;&gt;&lt;!--&quot;--&gt;  shaderc: internal error: compilation succeeded but failed to optimize: Capability GroupNonUniform is not allowed by Vulkan 1.0 specification (or requires extension)&lt;!--&quot;--&gt;
&lt;!--&quot;--&gt;    OpCapability GroupNonUniform&lt;!--&quot;--&gt;&lt;/pre&gt;&lt;/blockquote&gt;
&lt;p class=&quot;indented continued&quot;&gt;
This doesn't mean you need to enable an extension in your Vulkan run-time (since it's not even getting to that point).
It doesn't&lt;!--'--&gt; mean you need to enable an extension in glslc
(though those &lt;em&gt;are&lt;/em&gt; a real thing! mostly in GLSL, but they're&lt;!--'--&gt; also part of the SPIR-V output.
 There may be some way to enable the SPIR-V ones if you find a mapping from the official &lt;del&gt;feature&lt;/del&gt;extension name you want.
 I behoove the dear reader to find anything relevant to this in &lt;a href=&quot;//manpages.debian.org/glslc.1&quot;&gt;glslc(1)&lt;/a&gt;,
 which uses &quot;extension&quot; mostly to mean the file-name suffix and also some-times to mean &lt;code&gt;GL_GOOGLE_cpp_style_line_directive&lt;/code&gt;
 which is part of preprocessor support).
What it actually means is that you need to bump the base-line to a Vulkan version that has non-uniform/warp/wave/subgroup operations.
How do you do that?
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/04a6d34baa1ee5203a637184c32e0ecadba0f147/item/build.rs#L31&quot;&gt;You guessed it!&lt;/a&gt;:
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;glslcs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token namespace&quot;&gt;std&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Command&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;glslc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;arg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;--target-env=vulkan1.2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;indented continued&quot;&gt;
It may also be apt to validate this is supported (though it is likely also an over-abundance of caution),
which can only be queried by asking for the physical device properties… next &lt;em&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;2&lt;/span&gt;&lt;/em&gt; the subgroup properties.
&lt;a href=&quot;//git.sr.ht/~nabijaczleweli/mean-shift-clusterer/tree/04a6d34baa1ee5203a637184c32e0ecadba0f147/item/src/msc_gpu.rs#L275&quot;&gt;🙄&lt;/a&gt;
&lt;/p&gt;
&lt;div class=&quot;codecontinued&quot;&gt;
&lt;pre class=&quot;language-rust&quot;&gt;&lt;code class=&quot;language-rust&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;PosteriseGpu&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PosteriseGpu&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; physical_device_subgroup_properties &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PhysicalDeviceSubgroupProperties&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; physical_device_properties2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;PhysicalDeviceProperties2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push_next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; physical_device_subgroup_properties&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;vk_instance&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get_physical_device_properties2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;physical_device&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;mut&lt;/span&gt; physical_device_properties2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; physical_device_properties &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; physical_device_properties2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;properties&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SHADER_MAX_BINDING&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; physical_device_properties&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;limits&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;max_bound_descriptor_sets&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; physical_device_subgroup_properties &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; physical_device_subgroup_properties&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; need &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SubgroupFeatureFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;BASIC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token namespace&quot;&gt;vk&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;SubgroupFeatureFlags&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ARITHMETIC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token macro property&quot;&gt;assert!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;physical_device_subgroup_properties&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;supported_operations &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; need &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; need&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;!--&quot;--&gt;	&lt;!--&quot;--&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p class=&quot;continuation&quot;&gt;
&lt;a href=&quot;//registry.khronos.org/vulkan/specs/latest/man/html/VkSubgroupFeatureFlagBits.html&quot;&gt;&lt;code&gt;BASIC | ARITHMETIC&lt;/code&gt;&lt;/a&gt;
are required by
&lt;a href=&quot;//registry.khronos.org/SPIR-V/specs/unified1/SPIRV.html#OpGroupNonUniformElect&quot;&gt;&lt;code&gt;OpGroupNonUniformElect&lt;/code&gt;&lt;/a&gt;
and
&lt;a href=&quot;//registry.khronos.org/SPIR-V/specs/unified1/SPIRV.html#OpGroupNonUniformUMin&quot; &gt;&lt;code&gt;OpGroupNonUniformUMin&lt;/code&gt;&lt;/a&gt;/&lt;a href=&quot;//registry.khronos.org/SPIR-V/specs/unified1/SPIRV.html#OpGroupNonUniformUMax&quot; &gt;&lt;code&gt;Max&lt;/code&gt;&lt;/a&gt;,
respectively, and that's&lt;!--'--&gt; what &lt;samp&gt;spirv-dis&lt;/samp&gt; says the shader compiles to.
&lt;/p&gt;
&lt;!--
46.789µs 16755 before
93.879µs 16755 before
52.523µs 16755 before
101.727µs 16755 before
101.728µs 16755 before
93.577µs 16755 before
87.238µs 16755 before
105.35µs 16755 before
94.483µs 16755 before
66.712µs 16755 before
55.844µs 16755 before
90.861µs 16755 before
90.256µs 16755 before
111.689µs 16755 before
108.972µs 16755 before
51.92µs 16755 before
63.994µs 16755 before
67.617µs 16755 before
67.617µs 16755 before
66.108µs 16755 before
65.806µs 16755 before
58.259µs 16755 before
52.826µs 16755 before
119.537µs 16755 before
97.199µs 16755 before
55.542µs 16755 before
91.464µs 16755 before
87.54µs 16755 before
101.124µs 16755 before
95.388µs 16755 before
62.485µs 16755 before
54.938µs 16755 before
51.619µs 16755 before
76.371µs 16755 before
82.408µs 16755 before
78.183µs 16755 before
54.939µs 16755 before
53.127µs 16755 before
54.939µs 16755 before
67.315µs 16755 before
51.316µs 16755 before
61.278µs 16755 before
107.161µs 16755 before
64.598µs 16755 before
53.128µs 16755 before
52.826µs 16755 before
61.881µs 16755 before
60.674µs 16755 before
78.182µs 16755 before
91.464µs 16755 before
57.353µs 16755 before
158.779µs 1103347 before
125.574µs 1103347 before
124.668µs 1103347 before
219.453µs 1103347 before
137.346µs 1103347 before
126.782µs 1103347 before
137.347µs 1103347 before
125.574µs 1103347 before
442.227µs 1103347 before
140.366µs 1103347 before
117.424µs 1103347 before
138.253µs 1103347 before
456.716µs 1103347 before
122.858µs 1103347 before
122.253µs 1103347 before
127.084µs 1103347 before
144.894µs 1103347 before
167.231µs 1103347 before
128.291µs 1103347 before
120.141µs 1103347 before
153.647µs 1103347 before
124.669µs 1103347 before
122.556µs 1103347 before
116.82µs 1103347 before
163.609µs 1103347 before
127.687µs 1103347 before
117.424µs 1103347 before
125.877µs 1103347 before
127.083µs 1103347 before
128.593µs 1103347 before
Benchmark 1: 16755 before
  Time (mean ± σ): 74.897137 µs ± 20.160142 µs
  Range (min … max): 46.789000 µs … 119.537000 µs 51 runs
Benchmark 2: 1103347 before
  Time (mean ± σ): 156.374200 µs ± 80.968245 µs
  Range (min … max): 116.820000 µs … 456.716000 µs 30 runs
--&gt;
&lt;!--
70.333µs 16755 after
73.654µs 16755 after
71.843µs 16755 after
54.033µs 16755 after
96.595µs 16755 after
49.505µs 16755 after
84.823µs 16755 after
101.425µs 16755 after
97.501µs 16755 after
72.446µs 16755 after
123.461µs 16755 after
67.617µs 16755 after
74.258µs 16755 after
72.748µs 16755 after
73.352µs 16755 after
50.109µs 16755 after
55.845µs 16755 after
59.467µs 16755 after
77.277µs 16755 after
70.937µs 16755 after
62.787µs 16755 after
57.656µs 16755 after
85.729µs 16755 after
71.542µs 16755 after
86.03µs 16755 after
81.805µs 16755 after
78.483µs 16755 after
68.22µs 16755 after
89.652µs 16755 after
92.067µs 16755 after
71.24µs 16755 after
68.22µs 16755 after
71.541µs 16755 after
90.558µs 16755 after
48.901µs 16755 after
176.287µs 16755 after
92.974µs 16755 after
68.22µs 16755 after
54.335µs 16755 after
73.956µs 16755 after
73.655µs 16755 after
88.747µs 16755 after
71.542µs 16755 after
89.049µs 16755 after
98.105µs 16755 after
70.635µs 16755 after
88.747µs 16755 after
106.858µs 16755 after
95.388µs 16755 after
48.298µs 16755 after
76.672µs 16755 after
80.597µs 16755 after
60.372µs 16755 after
53.128µs 16755 after
64.599µs 16755 after
68.522µs 16755 after
81.502µs 16755 after
49.505µs 16755 after
87.842µs 16755 after
71.843µs 16755 after
143.686µs 1103347 after
119.537µs 1103347 after
170.854µs 1103347 after
147.006µs 1103347 after
126.48µs 1103347 after
120.744µs 1103347 after
135.233µs 1103347 after
136.14µs 1103347 after
124.065µs 1103347 after
124.668µs 1103347 after
129.499µs 1103347 after
127.989µs 1103347 after
181.419µs 1103347 after
131.008µs 1103347 after
121.952µs 1103347 after
137.045µs 1103347 after
118.631µs 1103347 after
126.177µs 1103347 after
119.839µs 1103347 after
122.254µs 1103347 after
146.402µs 1103347 after
142.177µs 1103347 after
117.123µs 1103347 after
124.668µs 1103347 after
129.196µs 1103347 after
131.31µs 1103347 after
134.63µs 1103347 after
134.63µs 1103347 after
124.065µs 1103347 after
127.989µs 1103347 after
474.526µs 1103347 after
135.838µs 1103347 after
119.537µs 1103347 after
131.007µs 1103347 after
128.895µs 1103347 after
Benchmark 1: 16755 after
  Time (mean ± σ): 76.883967 µs ± 20.303881 µs
  Range (min … max): 48.298000 µs … 176.287000 µs 60 runs
Benchmark 2: 1103347 after
  Time (mean ± σ): 141.891971 µs ± 58.588865 µs
  Range (min … max): 117.123000 µs … 474.526000 µs 35 runs
--&gt;
&lt;table class=&quot;perf left&quot;&gt;
 &lt;tr&gt;&lt;th&gt;(colours) &lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;&lt;!--'--&gt;16'755&lt;/span&gt;&lt;/th&gt; &lt;th&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;1'103'347&lt;/span&gt;&lt;/th&gt; &lt;th&gt;±σ&lt;/th&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, natural&lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;74.897µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;156.374µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;81µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;5700 XT, wavy &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;76.884µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;141.892µs&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;20µs&lt;/span&gt;/&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;59µs&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;
 &lt;tr&gt;&lt;th&gt;(speed-up) &lt;/th&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;-2.65%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;span class=&quot;roboto-unscale math-font-normal&quot;&gt;9.26%&lt;/span&gt;&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;
Placebo optimisation. Maybe it's&lt;!--'--&gt; better on worse hardware.
&lt;/p&gt;
&lt;h2 id=&quot;moral&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#moral&quot;&gt;#&lt;/a&gt; Moral&lt;/h2&gt;
&lt;p class=&quot;indented continued&quot;&gt;
Don't develop software for the GPU. Don't try to create 3D models. Never attempt to use vaguely novel technology, implement a paper, or advance the field.
Avoid documenting or formalising anything, &lt;em&gt;especially&lt;/em&gt; to describe or measure methodology.
Accd'g&lt;!--'--&gt; to &lt;a href=&quot;//101010.pl/@nabijaczleweli/114017215974489591&quot;&gt;the post I threaded under&lt;/a&gt;,
I started around &lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-17&quot;&gt;2025-02-17&lt;/date&gt;
and it's&lt;!--'--&gt; now &lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-26&quot;&gt;2025-04-26&lt;/date&gt;.
It never gets better, it's never worth it, and it's &lt;em&gt;all&lt;/em&gt; worse.
&lt;/p&gt;
&lt;h2 id=&quot;network-effect&quot; &gt;&lt;a class=&quot;hash-link&quot; href=&quot;#network-effect&quot;&gt;#&lt;/a&gt; Network effect&lt;/h2&gt;
&lt;ul style=&quot;padding-left: 0; list-style-type: none;&quot;&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/gfx-rs/wgpu/pull/7164&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-17T13:24:49Z&quot; title=&quot;2025-02-17T13:24:49Z&quot;&gt;2025-02-17&lt;/date&gt; &lt;strong&gt;gfx-rs/wgpu&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;7164&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Fix examples links in README&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;
  &lt;h4 id=&quot;network-effect-vulkanalia&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#network-effect-vulkanalia&quot;&gt;#&lt;/a&gt; KyleMayes/vulkanalia&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/h4&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/KyleMayes/vulkanalia/pull/311&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-17T17:42:18Z&quot; title=&quot;2025-02-17T17:42:18Z&quot;&gt;2025-02-17&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;311&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; &lt;samp&gt;App:[:]create&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/KyleMayes/vulkanalia/issues/312&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-22T17:15:41Z&quot; title=&quot;2025-02-22T17:15:41Z&quot;&gt;2025-02-22&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;312&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; &lt;samp&gt;queue_wait_idle()&lt;/samp&gt; returns &lt;samp&gt;Err(ErrorCode(2))&lt;/samp&gt; which it doesn't know how to format and resorts to just &quot;2&quot;. is this &lt;samp&gt;SuccessCode::TIMEOUT&lt;/samp&gt; (2)?&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/KyleMayes/vulkanalia/issues/313&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-22T17:43:14Z&quot; title=&quot;2025-02-22T17:43:14Z&quot;&gt;2025-02-22&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;313&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; All upstream documentation links are 404s&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/KyleMayes/vulkanalia/pull/314&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-22T18:01:14Z&quot; title=&quot;2025-02-22T18:01:14Z&quot;&gt;2025-02-22&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;314&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Fix upstream links being 404s by linking to &lt;samp class=&quot;path&quot;&gt;/latest/&lt;/samp&gt; instead of &lt;samp class=&quot;path&quot;&gt;/1.4-extensions/&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/KyleMayes/vulkanalia/issues/315&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-23T20:25:56Z&quot; title=&quot;2025-02-23T20:25:56Z&quot;&gt;2025-02-23&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;315&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; &lt;samp&gt;ShaderModuleCreateInfoBuilder&lt;/samp&gt; takes &lt;samp&gt;.code(&amp;[u32])&lt;/samp&gt; but then &lt;samp&gt;.code_size()&lt;/samp&gt; in bytes, should probably just take &lt;samp&gt;.code(&amp;[u32])&lt;/samp&gt; and derive &lt;samp&gt;code_size&lt;/samp&gt; automatically&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/KyleMayes/vulkanalia/pull/316&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-23T23:42:53Z&quot; title=&quot;2025-02-23T23:42:53Z&quot;&gt;2025-02-23&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;316&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Use &lt;samp&gt;Result&lt;/samp&gt;'s &lt;samp&gt;Debug&lt;/samp&gt; and &lt;samp&gt;Display&lt;/samp&gt; implementations for &lt;samp&gt;SuccessCode&lt;/samp&gt; and &lt;samp&gt;ErrorCode&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/KyleMayes/vulkanalia/pull/320&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-24T05:48:00Z&quot; title=&quot;2025-02-24T05:48:00Z&quot;&gt;2025-02-24&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;320&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; &lt;samp&gt;ShaderModuleCreateInfoBuilder::code()&lt;/samp&gt; sets both &lt;samp&gt;code&lt;/samp&gt; and &lt;samp&gt;code_size&lt;/samp&gt;, remove its &lt;samp&gt;::code_size()&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/KyleMayes/vulkanalia/pull/321&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-24T05:58:51Z&quot; title=&quot;2025-02-24T05:58:51Z&quot;&gt;2025-02-24&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;321&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; resetting command buffers, not pools&lt;!--&quot;--&gt;&lt;/li&gt;
  &lt;/ul&gt;
 &lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/google/shaderc/issues/1484&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-25T11:28:24Z&quot; title=&quot;2025-02-25T11:28:24Z&quot;&gt;2025-02-25&lt;/date&gt; &lt;strong&gt;google/shaderc&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1484&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Missed optimisation: doesn't elide &lt;samp&gt;&amp;lt;&amp;lt;0&lt;/samp&gt;/&lt;samp&gt;-0&lt;/samp&gt;/&lt;samp&gt;&gt;&gt;0&lt;/samp&gt;/&lt;samp&gt;|0&lt;/samp&gt; like it does &lt;samp&gt;+0&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/KhronosGroup/SPIRV-Tools/pull/6013&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-25T15:18:23Z&quot; title=&quot;2025-02-25T15:18:23Z&quot;&gt;2025-02-25&lt;/date&gt; &lt;strong&gt;KhronosGroup/SPIRV-Tools&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;6013&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; optimiser: remove &lt;samp&gt;OpBitwiseOr&lt;/samp&gt; &lt;samp&gt;OpBitwiseXor&lt;/samp&gt; &lt;samp&gt;OpShiftRightLogical&lt;/samp&gt; &lt;samp&gt;OpShiftRightArithmetic&lt;/samp&gt; &lt;samp&gt;OpShiftLeftLogical&lt;/samp&gt; &lt;samp&gt;OpIAdd&lt;/samp&gt; &lt;samp&gt;OpFAdd&lt;/samp&gt; &lt;samp&gt;OpISub&lt;/samp&gt; &lt;samp&gt;OpFSub&lt;/samp&gt; with 0 or vec[any](0) on rhs and &lt;samp&gt;OpBitwiseOr&lt;/samp&gt; &lt;samp&gt;OpBitwiseXor&lt;/samp&gt; &lt;samp&gt;OpIAdd&lt;/samp&gt; &lt;samp&gt;OpFAdd&lt;/samp&gt; on lhs&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/KhronosGroup/SPIRV-Tools/pull/6020&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-28T21:20:44Z&quot; title=&quot;2025-02-28T21:20:44Z&quot;&gt;2025-02-28&lt;/date&gt; &lt;strong&gt;KhronosGroup/SPIRV-Tools&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;6020&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Fold &lt;samp&gt;0 &amp;lt;&amp;lt;,&gt;&gt;,/,% n&lt;/samp&gt; to 0. Fold &lt;samp&gt;a / 1&lt;/samp&gt; to &lt;samp&gt;a&lt;/samp&gt;. Fold &lt;samp&gt;a % 1&lt;/samp&gt; to &lt;samp&gt;0&lt;/samp&gt;. Fold &lt;samp&gt;f % 1.0&lt;/samp&gt; to &lt;samp&gt;0.0&lt;/samp&gt;. Fold &lt;samp&gt;0.0 % f&lt;/samp&gt; to &lt;samp&gt;0.0&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/jakubcerveny/gilbert/pull/17&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-26T17:22:28Z&quot; title=&quot;2025-02-26T17:22:28Z&quot;&gt;2025-02-26&lt;/date&gt; &lt;strong&gt;jakubcerveny/gilbert&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;17&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Port to Rust&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;
  &lt;h4 id=&quot;network-effect-rust&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#network-effect-rust&quot;&gt;#&lt;/a&gt; rust-lang/rust&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/h4&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/issues/137490&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-23T17:23:18Z&quot; title=&quot;2025-02-23T17:23:18Z&quot;&gt;2025-02-23&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137490&lt;/span&gt;&lt;/a&gt;:&lt;!-- --&gt; What does &quot;before-main stdio file descriptors are not guaranteed to be open on unix platforms&quot; mean?&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/pull/137492&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-23T17:59:26Z&quot; title=&quot;2025-02-23T17:59:26Z&quot;&gt;2025-02-23&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137492&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; libstd: rustdoc: correct note on fds 0/1/2 pre-main&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/pull/137493&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-23T18:15:27Z&quot; title=&quot;2025-02-23T18:15:27Z&quot;&gt;2025-02-23&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137493&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; configure.py: don't instruct user to run nonexistent program&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/pull/137494&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-23T18:44:53Z&quot; title=&quot;2025-02-23T18:44:53Z&quot;&gt;2025-02-23&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137494&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; libstd: init(): &lt;samp&gt;dup()&lt;/samp&gt; subsequent &lt;samp class=&quot;path&quot;&gt;/dev/null&lt;/samp&gt;s instead of opening them again&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/issues/137499&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-23T22:26:41Z&quot; title=&quot;2025-02-23T22:26:41Z&quot;&gt;2025-02-23&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137499&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; nightly cargo can no longer build anything due to error: failed to create directory `&lt;samp class=&quot;path&quot;&gt;...\target&lt;/samp&gt;` Caused by: Incorrect function. (os error 1)&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/pull/137547&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-24T16:19:37Z&quot; title=&quot;2025-02-24T16:19:37Z&quot;&gt;2025-02-24&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137547&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Revert 00bf74da6d1e8e49b18c0203e0cbd993fdac5663&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/issues/137678&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-26T14:57:06Z&quot; title=&quot;2025-02-26T14:57:06Z&quot;&gt;2025-02-26&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137678&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; 1 million item array spends inordinate time on error path of typechecking&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/issues/137680&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-26T15:15:03Z&quot; title=&quot;2025-02-26T15:15:03Z&quot;&gt;2025-02-26&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137680&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Dumps unbounded amounts of data in diagnostics (27M in three lines for one error!) for large input lines (and thinks about them for minutes first)&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/issues/137681&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-02-26T15:24:24Z&quot; title=&quot;2025-02-26T15:24:24Z&quot;&gt;2025-02-26&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137681&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Deleting newlines from input makes it build 3% faster end-to-end&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/rust-lang/rust/issues/138953&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-25T23:45:43Z&quot; title=&quot;2025-03-25T23:45:43Z&quot;&gt;2025-03-25&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;138953&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; &lt;samp&gt;f32 += f32 * u32&lt;/samp&gt; is faster in a loop than &lt;samp&gt;f32 += f32&lt;/samp&gt;; can be defeated (a little bit) with &lt;samp&gt;#[cold]&lt;/samp&gt; annotation?&lt;!--&quot;--&gt;&lt;/li&gt;
  &lt;/ul&gt;
 &lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;
  &lt;h4 id=&quot;network-effect-sourcehut&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#network-effect-sourcehut&quot;&gt;#&lt;/a&gt; ~sircmpwn/sourcehut&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/h4&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
   &lt;li&gt;&lt;a href=&quot;//todo.sr.ht/~sircmpwn/git.sr.ht/380&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-05T22:07:26Z&quot; title=&quot;2025-03-05T22:07:26Z&quot;&gt;2025-03-05&lt;/date&gt; &lt;strong&gt;~sircmpwn/git.sr.ht&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;380&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Renaming private repository leaks old and new names into redirect table queriable at unlisted-equivalent visibility&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;5webr4rzb2eulturkipecdkwms6m7kk2yzafse4p7jybaoknzz@tarta.nabijaczleweli.xyz&gt;&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-06T05:57:04+0100&quot; title=&quot;2025-03-06T05:57:04+0100&quot;&gt;2025-03-06&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;   git.sr.ht&lt;/strong&gt;]&lt;/a&gt; Add git.sr.ht-http-clone to intercept git http-backend explicitly and provide redirections&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;qegljwzh2w5svuyfrajisowprqiv36ukvtomtvyas57roxuoki@tarta.nabijaczleweli.xyz&gt;&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-06T05:57:08+0100&quot; title=&quot;2025-03-06T05:57:08+0100&quot;&gt;2025-03-06&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;  sr.ht-docs&lt;/strong&gt;]&lt;/a&gt; git.sr.ht: use &lt;samp&gt;git.sr.ht-http-clone&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;tl3now4lhsxzx6qmordf7iemxnpbvcucypifh7lubwdax3f2ta@tarta.nabijaczleweli.xyz&gt;&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-06T06:13:03+0100&quot; title=&quot;2025-03-06T06:13:03+0100&quot;&gt;2025-03-06&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;   git.sr.ht&lt;/strong&gt;]&lt;/a&gt; shell: return &quot;Access denied.&quot; for redirects to private repositories the pusher can't access&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;zwwyjz6ymcroboy2cenyuahicmp3q3p7hyjykar3qqfpoz6cbb@tarta.nabijaczleweli.xyz&gt;&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-10T22:29:45+0100&quot; title=&quot;2025-03-10T22:29:45+0100&quot;&gt;2025-03-10&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;     core-go&lt;/strong&gt;]&lt;/a&gt; client: make InternalAuth.Name omitempty to allow &lt;samp&gt;@anoninternal&lt;/samp&gt; auth&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;xsxu6yn6m6khb77nkpnbmbtdskzflkcqooc4r5sqni36v3evdk@tarta.nabijaczleweli.xyz&gt;&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-11T17:04:11+0100&quot; title=&quot;2025-03-11T17:04:11+0100&quot;&gt;2025-03-11&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;builds.sr.ht&lt;/strong&gt;]&lt;/a&gt; Use &lt;samp&gt;git -C&lt;/samp&gt;/&lt;samp&gt;hg --cwd&lt;/samp&gt; instead of cd &amp;&amp;&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;f9ba09981669ba483564d69ae5c04b3df636d1e4.1744311239.git.nabijaczleweli@nabijaczleweli.xyz&gt;&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-10T20:54:23+0200&quot; title=&quot;2025-04-10T20:54:23+0200&quot;&gt;2025-04-10&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;   git.sr.ht&lt;/strong&gt; &lt;!--&quot;--&gt;&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1&lt;/span&gt;/&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;4&lt;/span&gt;&lt;!--&quot;--&gt;]&lt;/a&gt; commit: &lt;samp&gt;range(max(a, b))&lt;/samp&gt;+&lt;samp&gt;if(i &gt;= a || i &gt;= b)break&lt;/samp&gt; =&gt; &lt;samp&gt;range(min(a, b))&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;7703a13a8ee02f576549603dd5cd8d297906da94.1744311239.git.nabijaczleweli@nabijaczleweli.xyz&gt;&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-10T20:54:25+0200&quot; title=&quot;2025-04-10T20:54:25+0200&quot;&gt;2025-04-10&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;   git.sr.ht&lt;/strong&gt; &lt;!--&quot;--&gt;&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;2&lt;/span&gt;/&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;4&lt;/span&gt;&lt;!--&quot;--&gt;]&lt;/a&gt; commit: use saved variables for &lt;samp&gt;old_path&lt;/samp&gt;/&lt;samp&gt;new_path&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;69e963880cef3e9cd3785064972a0a3271155a62.1744311239.git.nabijaczleweli@nabijaczleweli.xyz&gt;&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-10T20:54:27+0200&quot; title=&quot;2025-04-10T20:54:27+0200&quot;&gt;2025-04-10&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;   git.sr.ht&lt;/strong&gt; &lt;!--&quot;--&gt;&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3&lt;/span&gt;/&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;4&lt;/span&gt;&lt;!--&quot;--&gt;]&lt;/a&gt; commit: detect common suffix in addition to prefix&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;06e629292e656dc4ea766e6c2c4dde507772f60d.1744311239.git.nabijaczleweli@nabijaczleweli.xyz&gt;&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-10T20:54:29+0200&quot; title=&quot;2025-04-10T20:54:29+0200&quot;&gt;2025-04-10&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;   git.sr.ht&lt;/strong&gt; &lt;!--&quot;--&gt;&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;4&lt;/span&gt;/&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;4&lt;/span&gt;&lt;!--&quot;--&gt;]&lt;/a&gt; commit: also link renames&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//lists.sr.ht/~sircmpwn/sr.ht-dev/&lt;rf5al4vxjppm6a7rxu6mumdnjol2hihgm3gzhmt3vqeoye3hti@tarta.nabijaczleweli.xyz&gt;&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-10T21:28:38+0200&quot; title=&quot;2025-04-10T21:28:38+0200&quot;&gt;2025-04-10&lt;/date&gt;&lt;!--&quot;--&gt;	[PATCH &lt;strong&gt;lists.sr.ht&lt;/strong&gt;]&lt;/a&gt; patchset: accumulate authors correctly instead of undecoded&lt;!--&quot;--&gt;&lt;/li&gt;
  &lt;/ul&gt;
 &lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;&lt;del&gt;&lt;a href=&quot;//github.com/Rust-SDL2/rust-sdl2/pull/1468&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-19T20:17:57Z&quot; title=&quot;2025-03-19T20:17:57Z&quot;&gt;2025-03-19&lt;/date&gt; &lt;strong&gt;Rust-SDL2/rust-sdl2&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1468&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Fix &lt;samp&gt;SDL_PIXELFORMAT_{RGBA,ARGB,BGRA,ABGR}32&lt;/samp&gt; being backward on big-endian targets&lt;!--&quot;--&gt;&lt;/del&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/pygments/pygments/pull/2881&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-30T13:40:29Z&quot; title=&quot;2025-03-30T13:40:29Z&quot;&gt;2025-03-30&lt;/date&gt; &lt;strong&gt;pygments/pygments&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;2881&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Guesses HLSL code as &quot;tsql&quot; instead of HLSL/C/C++ despite &quot;tsql&quot; yielding errors&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;p&gt;Bonus bugs from writing the &lt;em&gt;post&lt;/em&gt;:&lt;/p&gt;
 &lt;li&gt;
  &lt;h4 id=&quot;network-effect-mathjax&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#network-effect-mathjax&quot;&gt;#&lt;/a&gt; mathjax/MathJax&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/h4&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/mathjax/MathJax/issues/3342&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-16T00:33:04Z&quot; title=&quot;2025-03-16T00:33:04Z&quot;&gt;2025-03-16&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3342&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; AsciiMath input partially explodes on matrices, TeX handles them fine&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/mathjax/MathJax/issues/3343&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-16T13:37:05Z&quot; title=&quot;2025-03-16T13:37:05Z&quot;&gt;2025-03-16&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3343&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; AsciiMath turns &lt;samp&gt;f(\(a, b\))&lt;/samp&gt; into &lt;samp&gt;f(a b)a, b)&lt;/samp&gt;?&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/mathjax/MathJax/issues/3344&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-17T13:41:47Z&quot; title=&quot;2025-03-17T13:41:47Z&quot;&gt;2025-03-17&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3344&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Matrices render goofy in CHTML, fine with SVG&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/mathjax/MathJax/issues/3345&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-17T14:44:24Z&quot; title=&quot;2025-03-17T14:44:24Z&quot;&gt;2025-03-17&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3345&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Opening page with SVG renderer explodes the parser on &lt;samp&gt;\color&lt;/samp&gt; statements; setting to CHTML and reloading works, and then setting to SVG draws mostly-correctly&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/mathjax/MathJax/issues/3354&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-06T14:24:21Z&quot; title=&quot;2025-04-06T14:24:21Z&quot;&gt;2025-04-06&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3354&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; ^F search highlight broken&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/mathjax/MathJax/issues/3355&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-06T14:27:08Z&quot; title=&quot;2025-04-06T14:27:08Z&quot;&gt;2025-04-06&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3355&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; ^F search &quot;whole word&quot; mode broken&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//github.com/mathjax/MathJax/issues/3357&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-08T21:59:53Z&quot; title=&quot;2025-04-08T21:59:53Z&quot;&gt;2025-04-08&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3357&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; &lt;samp&gt;\overline&lt;/samp&gt; displayed varyingly as an overline or as nothing depending on font size&lt;!--&quot;--&gt;&lt;/li&gt;
  &lt;/ul&gt;
 &lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;&lt;a href=&quot;//bugs.debian.org/1101435&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-27T15:46:56+01:00&quot; title=&quot;2025-03-27T15:46:56+01:00&quot;&gt;2025-03-27&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1101435&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; /usr/bin/&lt;strong&gt;pyftsubset&lt;/strong&gt;: ModuleNotFoundError: No module named 'zopfli' with &lt;samp&gt;--flavor=woff&lt;/samp&gt;&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//bugzilla.mozilla.org/show_bug.cgi?id=1957125&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-28T11:17 PDT&quot; title=&quot;2025-03-28T11:17 PDT&quot;&gt;2025-03-28&lt;/date&gt; Bug &lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1957125&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Link/object bounding box no longer matches the reality of the link/object&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//bugzilla.mozilla.org/show_bug.cgi?id=1957298&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-30T09:34 PDT&quot; title=&quot;2025-03-30T09:34 PDT&quot;&gt;2025-03-30&lt;/date&gt; Bug &lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1957298&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; When updating URL with &lt;samp&gt;#:~:text=&lt;/samp&gt; anchor, highlight is added for the new referenced text, but it does not replace the previous ones&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//bugzilla.mozilla.org/show_bug.cgi?id=1960124&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-11T20:20 PDT&quot; title=&quot;2025-04-11T20:20 PDT&quot;&gt;2025-04-11&lt;/date&gt; Bug &lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1960124&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; &quot;&lt;code&gt;data:text/html,&amp;lt;table&gt;&amp;lt;caption&gt;a&amp;lt;caption&gt;b&amp;lt;td&gt;c&amp;lt;/table&gt;&lt;/code&gt;&quot; renders only &lt;samp&gt;a\nc&lt;/samp&gt; — more than 1 &lt;code&gt;display: table-caption;&lt;/code&gt; element is eaten&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//bugzilla.mozilla.org/show_bug.cgi?id=1960952&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-16T09:31 PDT&quot; title=&quot;2025-04-16T09:31 PDT&quot;&gt;2025-04-16&lt;/date&gt; Bug &lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1960952&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Ctrl+H creates history menu, then Ctrl+H again doesn't make the menu go away&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//bugzilla.mozilla.org/show_bug.cgi?id=1961886&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-22T10:49 PDT&quot; title=&quot;2025-04-22T10:49 PDT&quot;&gt;2025-04-22&lt;/date&gt; Bug &lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;1961886&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Table &amp;lt;caption&gt; children aren't focusable with Tab&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/PrismJS/prism/pull/3881&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-30T13:24:36Z&quot; title=&quot;2025-03-30T13:24:36Z&quot;&gt;2025-03-30&lt;/date&gt; &lt;strong&gt;PrismJS/prism&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;3881&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; HLSL &lt;samp&gt;#define&lt;/samp&gt; not highlighted right (... or indeed overhighlighted): uniform &lt;samp&gt;.token.property&lt;/samp&gt; applies, washing out the expression&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;
  &lt;h4 id=&quot;network-effect-blender&quot; class=&quot;continuing&quot;&gt;&lt;a class=&quot;hash-link&quot; href=&quot;#network-effect-blender&quot;&gt;#&lt;/a&gt; blender/blender&lt;span style=&quot;font-weight: initial;&quot;&gt;:&lt;/span&gt;&lt;/h4&gt;
  &lt;ul style=&quot;padding-left: 1em;&quot;&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/issues/136787&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-31T18:33:53+02:00&quot; title=&quot;2025-03-31T18:33:53+02:00&quot;&gt;2025-03-31&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;136787&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Default EEVEE renderer crashes-to-desktop when opening Material or Shading tabs&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/issues/136788&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-03-31T18:35:52+02:00&quot; title=&quot;2025-03-31T18:35:52+02:00&quot;&gt;2025-03-31&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;136788&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; 4.4.0 doesn't start at all&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/pulls/136803&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-01T02:37:55+02:00&quot; title=&quot;2025-04-01T02:37:55+02:00&quot;&gt;2025-04-01&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;136803&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Partially parse AMD driver versions to determine if they require legacy work-arounds instead of spot-checking&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/pulls/136839&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-01T16:53:54+02:00&quot; title=&quot;2025-04-01T16:53:54+02:00&quot;&gt;2025-04-01&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;136839&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Fix Makefile error erroring without the error message on Win32&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/issues/137112&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-07T21:10:58+02:00&quot; title=&quot;2025-04-07T21:10:58+02:00&quot;&gt;2025-04-07&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137112&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; The input map at the bottom of the screen doesn't indicate you can write Δxyz directly in Move operation (nothing else does, either, but this is where you'd expect it)&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/issues/137113&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-07T21:15:40+02:00&quot; title=&quot;2025-04-07T21:15:40+02:00&quot;&gt;2025-04-07&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137113&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Impossible to tab backward when writing Δxyz directly in Move operation&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/pulls/137124&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-08T05:24:43+02:00&quot; title=&quot;2025-04-08T05:24:43+02:00&quot;&gt;2025-04-08&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137124&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Fix #137113: bind universal Shift+Tab to go back instead of Ctrl+Tab&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/issues/137357&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-11T17:52:21+02:00&quot; title=&quot;2025-04-11T17:52:21+02:00&quot;&gt;2025-04-11&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137357&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Minimum accepted OpenColorIO, wayland-protocols, libvulkan-dev, OpenImageIO versions too low?&lt;!--&quot;--&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;//projects.blender.org/blender/blender/issues/137749&quot;&gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-18T23:58:29+02:00&quot; title=&quot;2025-04-18T23:58:29+02:00&quot;&gt;2025-04-18&lt;/date&gt; #&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;137749&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Keyframes appear and disappear in the Timeline window depending on where the scrub head is, no filters applied &lt;!--&quot;--&gt;&lt;/li&gt;
  &lt;/ul&gt;
 &lt;/li&gt;
 &lt;p&gt;&lt;/p&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/servo/servo/issues/36480&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-12T02:53:08Z&quot; title=&quot;2025-04-12T02:53:08Z&quot;&gt;2025-04-12&lt;/date&gt; &lt;strong&gt;servo/servo&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;36480&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Links stop being links when... big page? or maybe some javascript?&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/servo/servo/issues/36481&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-12T03:04:39Z&quot; title=&quot;2025-04-12T03:04:39Z&quot;&gt;2025-04-12&lt;/date&gt; &lt;strong&gt;servo/servo&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;36481&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Crashes for a bit then segfaults on MathJax-heavy page (also cites min-/max-content size. idk)&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/servo/servo/issues/36650&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-22T12:26:17Z&quot; title=&quot;2025-04-22T12:26:17Z&quot;&gt;2025-04-22&lt;/date&gt; &lt;strong&gt;servo/servo&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;36650&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Segfaults on exit based on page contents(?) on Win32&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/matplotlib/matplotlib/issues/29912&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-13T17:32:23Z&quot; title=&quot;2025-04-13T17:32:23Z&quot;&gt;2025-04-13&lt;/date&gt; &lt;strong&gt;matplotlib/matplotlib&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;29912&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; [Bug]: findfont: Font family '&amp;lt;font&gt;' not found. despite being present and queriable via fontconfig; never makes it to &lt;samp class=&quot;path&quot;&gt;~/.cache/matplotlib/fontlist-v330.json&lt;/samp&gt; either&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//github.com/matplotlib/matplotlib/issues/29913&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-13T18:00:50Z&quot; title=&quot;2025-04-13T18:00:50Z&quot;&gt;2025-04-13&lt;/date&gt; &lt;strong&gt;matplotlib/matplotlib&lt;/strong&gt;#&lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;29913&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; [Bug]: &lt;code&gt;plt.ticklabel_format(style='plain')&lt;/code&gt; puts the y axis label out of frame&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//bugs.kde.org/show_bug.cgi?id=503481&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-28T15:20Z&quot; title=&quot;2025-04-28T15:20Z&quot;&gt;2025-04-28&lt;/date&gt; Bug &lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;503481&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Moving cursor around in-image WYSIWYG copies text colour under cursor to everything else&lt;!--&quot;--&gt;&lt;/li&gt;
 &lt;li&gt;&lt;a href=&quot;//bugs.kde.org/show_bug.cgi?id=503482&quot; &gt;&lt;date class=&quot;roboto-unscale math-font-normal&quot; datetime=&quot;2025-04-28T15:26Z&quot; title=&quot;2025-04-28T15:26Z&quot;&gt;2025-04-28&lt;/date&gt; Bug &lt;span style=&quot;font-family: 'RobotoSlab-Regular+tabdig', 'Roboto Slab', serif;&quot;&gt;503482&lt;/span&gt;&lt;/a&gt;:&lt;!--&quot;--&gt; Subscript doesn't render correctly&lt;!--&quot;--&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt; 
 &lt;br /&gt; 
 Nit-pick? Correction? Improvement? Annoying? Cute? Anything? 
 &lt;a href=&quot;mailto:nabijaczleweli@nabijaczleweli.xyz?subject=Notes on src/blogn_t/018-mean-shift-clusterer.html.pp&quot;&gt;Mail&lt;/a&gt;, 
 &lt;a href=&quot;//101010.pl/@nabijaczleweli&quot;&gt;post&lt;/a&gt;, or &lt;a href=&quot;//github.com/nabijaczleweli/nabijaczleweli.github.io/issues/new&quot;&gt;open&lt;/a&gt;! 
 &lt;/p&gt; 
 &lt;/div&gt;
</content>
  </entry>
</feed>
